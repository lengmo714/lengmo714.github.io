<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-16x16-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/favicon-32x32-next.png" color="#222">
  <meta name="yandex-verification" content="7f4abda1472881d3">
  <meta name="baidu-site-verification" content="5lU3qr1ysBwet0Uc">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.proxy.ustclug.org/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lengmo714.top","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":true,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="I accidentally discovered that itâ€™s possible to release mini apps and games on Telegram, and it felt like discovering a new world. So I tried it out for fun.Reference Guide">
<meta property="og:type" content="article">
<meta property="og:title" content="Telegram Mini APP or Game Development Bot Setup">
<meta property="og:url" content="https://lengmo714.top/6e79860ben.html">
<meta property="og:site_name" content="å—é”‹">
<meta property="og:description" content="I accidentally discovered that itâ€™s possible to release mini apps and games on Telegram, and it felt like discovering a new world. So I tried it out for fun.Reference Guide">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic.imgdb.cn/item/667e6133d9c307b7e9486bb0.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/667e657ed9c307b7e950201c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/667e6c98d9c307b7e95bbe1e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/667e6ea9d9c307b7e960ac34.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/667e7068d9c307b7e9640de7.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/667e7162d9c307b7e965dc7d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/66836d9fd9c307b7e9f4ad96.png">
<meta property="article:published_time" content="2024-06-28T06:57:31.000Z">
<meta property="article:modified_time" content="2024-10-24T13:56:43.199Z">
<meta property="article:author" content="å—é”‹">
<meta property="article:tag" content="telegram">
<meta property="article:tag" content="mini APP">
<meta property="article:tag" content="Game">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.imgdb.cn/item/667e6133d9c307b7e9486bb0.png">

<link rel="canonical" href="https://lengmo714.top/6e79860ben.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Telegram Mini APP or Game Development Bot Setup | å—é”‹</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XDK58GP86Z"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XDK58GP86Z');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">å—é”‹</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">å—å¥”ä¸‡é‡Œç©ºï¼Œè„±æ­»é”‹é•ä½™</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://lengmo714.top/6e79860ben.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/IMG_3307.JPG">
      <meta itemprop="name" content="å—é”‹">
      <meta itemprop="description" content="è®°å½•å·¥ä½œä¸­çš„ä¸€äº›ç¬”è®°ä»¥åŠä¸€äº›æœ‰è¶£çš„ä»£ç ,è‡´åŠ›äºæˆä¸ºä¸€ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å—é”‹">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Telegram Mini APP or Game Development Bot Setup
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-06-28 14:57:31" itemprop="dateCreated datePublished" datetime="2024-06-28T14:57:31+08:00">2024-06-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-10-24 21:56:43" itemprop="dateModified" datetime="2024-10-24T21:56:43+08:00">2024-10-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/telegram/" itemprop="url" rel="index"><span itemprop="name">telegram</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/telegram/mini-APP/" itemprop="url" rel="index"><span itemprop="name">mini APP</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/telegram/mini-APP/Game/" itemprop="url" rel="index"><span itemprop="name">Game</span></a>
                </span>
            </span>

          
            <span id="/6e79860ben.html" class="post-meta-item leancloud_visitors" data-flag-title="Telegram Mini APP or Game Development Bot Setup" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/6e79860ben.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/6e79860ben.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>5.9k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>5 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>I accidentally discovered that itâ€™s possible to release mini apps and games on Telegram, and it felt like discovering a new world. So I tried it out for fun.<br><a target="_blank" rel="noopener" href="https://grammy.dev/zh/guide/">Reference Guide</a></p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>To develop a <code>mini App</code> or <code>game</code> on Telegram, creating a dedicated bot is essential.</p>
<h3 id="Create-a-Bot"><a href="#Create-a-Bot" class="headerlink" title="Create a Bot"></a>Create a Bot</h3><p>Search for <code>@BotFather</code> on Telegram or click <a target="_blank" rel="noopener" href="https://t.me/BotFather">BotFather</a>.<br>As shown below:<br><img data-src="https://pic.imgdb.cn/item/667e6133d9c307b7e9486bb0.png" alt="BotFather Dialog"><br>After entering the dialog, you can select <code>Menu</code> -&gt; <code>/newbot</code>, or just type <code>/newbot</code> in the input field to create a bot. Follow the step-by-step instructions it provides.</p>
<h3 id="Create-a-Mini-App-or-Game"><a href="#Create-a-Mini-App-or-Game" class="headerlink" title="Create a Mini App or Game"></a>Create a Mini App or Game</h3><p>After creating the bot, proceed to create a mini app or game, depending on your needs. The process is similar to creating a botâ€”just send a message to <code>@BotFather</code>. The reference guide mentioned above also covers this.</p>
<h3 id="Set-Up-the-Development-Environment"><a href="#Set-Up-the-Development-Environment" class="headerlink" title="Set Up the Development Environment"></a>Set Up the Development Environment</h3><p>The development environment here is for the bot, not your mini app or game. You can develop using either <code>Node.js</code> or <code>Deno</code>. I am using <code>Deno</code>.<br>Refer to the link for setup instructions:<br><a target="_blank" rel="noopener" href="https://deno.com/">Deno Tutorial</a><br>Follow the guide; weâ€™ll skip to the main points here.</p>
<h3 id="Bot-Replying-with-a-Game"><a href="#Bot-Replying-with-a-Game" class="headerlink" title="Bot Replying with a Game"></a>Bot Replying with a Game</h3><ol>
<li>Create a TypeScript script and copy-paste the following code. Note: replace <code>TOKEN</code> and <code>GAME_SHORT_NAME</code> with your own.<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Bot</span>&#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// Your bot token here</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">GAME_SHORT_NAME</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// Short name of your game</span></span><br><span class="line"><span class="comment">// Create an instance of the `Bot` class and pass your bot token.</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>); </span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">replyWithGame</span>(<span class="variable constant_">GAME_SHORT_NAME</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>(); <span class="comment">// Start the bot</span></span><br></pre></td></tr></table></figure>
2ã€Open the terminal and run the script with the following command:<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deno run --allow-net your-script.<span class="property">ts</span></span><br></pre></td></tr></table></figure>
3ã€Go back to Telegram, send <code>/start</code> to your bot (not <code>BotFather</code>, your created bot), and youâ€™ll see a game reply from the bot, as shown below:<br><img data-src="https://pic.imgdb.cn/item/667e657ed9c307b7e950201c.png" alt="å¯¹è¯æ¡†">;<br> At this point, you may notice that clicking the <code>play</code> button doesnâ€™t do anything. We need to add a callback event to the button in the script above.<br>4ã€Add a Callback to the Button Include the following code in the script:<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">GAME_URL</span> = <span class="string">&quot;https://lengmo714.top&quot;</span>;</span><br><span class="line">bot.<span class="title function_">on</span>(<span class="string">&quot;callback_query:game_short_name&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ctx.callbackQuery.game_short_name = &quot;</span>,ctx.<span class="property">callbackQuery</span>.<span class="property">game_short_name</span>)</span><br><span class="line">    <span class="keyword">if</span> (ctx.<span class="property">callbackQuery</span>.<span class="property">game_short_name</span> === <span class="variable constant_">GAME_SHORT_NAME</span>) &#123;</span><br><span class="line">        <span class="keyword">await</span> ctx.<span class="title function_">answerCallbackQuery</span>(&#123; <span class="attr">url</span>: <span class="variable constant_">GAME_URL</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
After saving the code, run the script again. Send <code>/start</code> to the bot, and this time, when you click the <code>play</code> button, it will redirect to your pre-configured game link.</li>
</ol>
<h3 id="Bot-Replying-with-a-Mini-App"><a href="#Bot-Replying-with-a-Mini-App" class="headerlink" title="Bot Replying with a Mini App"></a>Bot Replying with a Mini App</h3><p>1ã€ Create a TypeScript script and copy-paste the following code. Note: replace <code>TOKEN</code> and the mini app URL with your own.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Bot</span>&#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Handle the &quot;/start&quot; command</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(</span><br><span class="line">        <span class="string">&#x27;&lt;b&gt;Hi!&lt;/b&gt; &lt;i&gt;Welcome&lt;/i&gt; to &lt;a href=&quot;https://lengmo714.top&quot;&gt;grammY&lt;/a&gt;.&#x27;</span>,</span><br><span class="line">        &#123; <span class="attr">parse_mode</span>: <span class="string">&quot;HTML&quot;</span> &#125;,</span><br><span class="line">    )</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>2ã€Open the terminal and run the script:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deno run --allow-net tsè„šæœ¬.ts</span><br></pre></td></tr></table></figure>
<p>3ã€Go back to Telegram, send <code>/start</code> to your bot (not <code>BotFather</code>, your created bot), and youâ€™ll see a mini app reply from the bot, as shown below:<br><img data-src="https://pic.imgdb.cn/item/667e6c98d9c307b7e95bbe1e.png" alt="å¯¹è¯æ¡†">;</p>
<p>4ã€Click to open the mini app, and it will redirect to the mini app URL you set earlier.</p>
<h3 id="Adding-Inline-Buttons"><a href="#Adding-Inline-Buttons" class="headerlink" title="Adding Inline Buttons"></a>Adding Inline Buttons</h3><p>When sending <code>/start</code>, you may want the bot to reply with selectable options. You can add inline buttons in the botâ€™s response. Example code:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Bot</span>,<span class="title class_">InlineKeyboard</span>&#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>().<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ1&quot;</span>, <span class="string">&quot;one&quot;</span>).<span class="title function_">row</span>()</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ2&quot;</span>, <span class="string">&quot;two&quot;</span>).<span class="title function_">row</span>()</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ3&quot;</span>,<span class="string">&quot;three&quot;</span>);</span><br><span class="line"><span class="comment">// Handle the &quot;/start&quot; command</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">&quot;è¯·é€‰æ‹©ä½ éœ€è¦ç‚¹å‡»çš„æŒ‰é’®&quot;</span>,&#123;</span><br><span class="line">        <span class="attr">reply_markup</span>: keyboard,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>After running the script, youâ€™ll see:<br><img data-src="https://pic.imgdb.cn/item/667e6ea9d9c307b7e960ac34.png" alt="å¯¹è¯æ¡†"><br>By default, these buttons are vertically aligned. If you want them to be in a row, modify the <code>keyboard</code> as follows:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>().<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ1&quot;</span>, <span class="string">&quot;one&quot;</span>)</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ2&quot;</span>, <span class="string">&quot;two&quot;</span>)</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ3&quot;</span>,<span class="string">&quot;three&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>Note: There are several types of buttons you can add: <code>.text</code>, <code>.game</code>, <code>.url</code>, <code>webApp</code>. I have only used these four, but there may be others.</p>
<h3 id="Bot-Reply-with-Image-Text-Button"><a href="#Bot-Reply-with-Image-Text-Button" class="headerlink" title="Bot Reply with Image + Text + Button"></a>Bot Reply with Image + Text + Button</h3><p>I saw a very nice reply on Telegram today, like the one below (from someone elseâ€™s bot):<br><img data-src="https://pic.imgdb.cn/item/667e7068d9c307b7e9640de7.png" alt="å¯¹è¯æ¡†"><br>Itâ€™s composed of a GIF animation + text + three buttons, and it also captures the userâ€™s ID. I thought it was very cool, so I made a similar one. Hereâ€™s the code:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>,<span class="title class_">InlineKeyboard</span> &#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TELEGRAM_GAME_URL</span> = <span class="string">&#x27;https://lengmo714.top&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Inline keyboard with game and web visit buttons</span></span><br><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;Start Game 1&quot;</span>,<span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;Start Game 2&quot;</span>,<span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;Start Game 3&quot;</span>,<span class="variable constant_">TELEGRAM_GAME_URL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Handle the /start command</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ctx.update.message = &quot;</span>,ctx.<span class="property">update</span>.<span class="property">message</span>.<span class="property">from</span>.<span class="property">first_name</span>);</span><br><span class="line">    <span class="keyword">const</span> gifUrl = <span class="string">&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> caption = <span class="string">`Hi <span class="subst">$&#123;ctx.update.message.<span class="keyword">from</span>.first_name&#125;</span>!\n\nHereâ€™s a great game for you!\n\nğŸ° A great game for you\n\nğŸ’¸ A great game for you\n\nğŸ A great game for you`</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">replyWithAnimation</span>(gifUrl, &#123;</span><br><span class="line">      <span class="attr">caption</span>: caption,</span><br><span class="line">      <span class="attr">reply_markup</span>: keyboard,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// Handle callback query</span></span><br><span class="line">bot.<span class="title function_">start</span>(); <span class="comment">// Start the bot</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>After running, you get:<br><img data-src="https://pic.imgdb.cn/item/667e7162d9c307b7e965dc7d.png" alt="å¯¹è¯æ¡†"></p>
<h3 id="Optimization"><a href="#Optimization" class="headerlink" title="Optimization"></a>Optimization</h3><p>From the image above, we have created three inline buttons using the URL option. The top right corner of these buttons displays an arrow icon. It works fine, but in the reference, the button had a two-window icon. To achieve this, modify the button type:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>()</span><br><span class="line">  .<span class="title function_">webApp</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ&quot;</span>, <span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">webApp</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ&quot;</span>, <span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ&quot;</span>, <span class="variable constant_">TELEGRAM_GAME_URL</span>);</span><br></pre></td></tr></table></figure>
<p>After modification, you can see the effect as follows:<br><img data-src="https://pic.imgdb.cn/item/66836d9fd9c307b7e9f4ad96.png" alt="Dialog box"><br>This is the effect we ultimately want.</p>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    æ‰“èµ
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechat.png" alt="å—é”‹ å¾®ä¿¡æ”¯ä»˜">
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="å—é”‹ æ”¯ä»˜å®">
        <p>æ”¯ä»˜å®</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>å—é”‹
  </li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="https://lengmo714.top/6e79860ben.html" title="Telegram Mini APP or Game Development Bot Setup">https://lengmo714.top/6e79860ben.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/telegram/" rel="tag"><i class="fa fa-tag"></i> telegram</a>
              <a href="/tags/mini-APP/" rel="tag"><i class="fa fa-tag"></i> mini APP</a>
              <a href="/tags/Game/" rel="tag"><i class="fa fa-tag"></i> Game</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/1d25c150.html" rel="prev" title="Cocos Creatorè·å–æ‰‹æœºå‰ªåˆ‡æ¿å†…å®¹">
      <i class="fa fa-chevron-left"></i> Cocos Creatorè·å–æ‰‹æœºå‰ªåˆ‡æ¿å†…å®¹
    </a></div>
      <div class="post-nav-item">
    <a href="/6e79860b.html" rel="next" title="telegram mini APPæˆ–æ¸¸æˆå¼€å‘ä¹‹botè®¾ç½®">
      telegram mini APPæˆ–æ¸¸æˆå¼€å‘ä¹‹botè®¾ç½® <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Create-a-Bot"><span class="nav-number">1.</span> <span class="nav-text">Create a Bot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Create-a-Mini-App-or-Game"><span class="nav-number">2.</span> <span class="nav-text">Create a Mini App or Game</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Set-Up-the-Development-Environment"><span class="nav-number">3.</span> <span class="nav-text">Set Up the Development Environment</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bot-Replying-with-a-Game"><span class="nav-number">4.</span> <span class="nav-text">Bot Replying with a Game</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bot-Replying-with-a-Mini-App"><span class="nav-number">5.</span> <span class="nav-text">Bot Replying with a Mini App</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Adding-Inline-Buttons"><span class="nav-number">6.</span> <span class="nav-text">Adding Inline Buttons</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bot-Reply-with-Image-Text-Button"><span class="nav-number">7.</span> <span class="nav-text">Bot Reply with Image + Text + Button</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Optimization"><span class="nav-number">8.</span> <span class="nav-text">Optimization</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="å—é”‹"
      src="/images/IMG_3307.JPG">
  <p class="site-author-name" itemprop="name">å—é”‹</p>
  <div class="site-description" itemprop="description">è®°å½•å·¥ä½œä¸­çš„ä¸€äº›ç¬”è®°ä»¥åŠä¸€äº›æœ‰è¶£çš„ä»£ç ,è‡´åŠ›äºæˆä¸ºä¸€ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">241</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">72</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">69</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/lengmo714" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;lengmo714" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/842673413@qq.com" title="E-Mail â†’ 842673413@qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/3124723200" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;3124723200" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAGVvxXoafRJrfCUH8PiT5yO--ToMDJnA_7UpHsFucUuQDDEF4aHy6XOAIedS4rD7W" title="æŠ–éŸ³ â†’ https:&#x2F;&#x2F;www.douyin.com&#x2F;user&#x2F;MS4wLjABAAAAGVvxXoafRJrfCUH8PiT5yO--ToMDJnA_7UpHsFucUuQDDEF4aHy6XOAIedS4rD7W" rel="noopener" target="_blank"><i class="fa fa-mobile fa-fw"></i>æŠ–éŸ³</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="/Link/" title="&#x2F;Link&#x2F;">å‹æƒ…é“¾æ¥</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/Silent_F" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;Silent_F" rel="noopener" target="_blank">CSDN</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://lengmo714.top/net/map/index.html" title="https:&#x2F;&#x2F;lengmo714.top&#x2F;net&#x2F;map&#x2F;index.html">è¶³è¿¹</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://mall.jd.com/index-12955410.html" title="https:&#x2F;&#x2F;mall.jd.com&#x2F;index-12955410.html" rel="noopener" target="_blank">äº¬ä¸œå°åº—</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://lengmo714.top/net/Love/baby.html" title="https:&#x2F;&#x2F;lengmo714.top&#x2F;net&#x2F;Love&#x2F;baby.html">æ‹çˆ±è®¡æ—¶</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://lengmo714.top/net/wechat/index.html" title="https:&#x2F;&#x2F;lengmo714.top&#x2F;net&#x2F;wechat&#x2F;index.html">å¾®ä¿¡å¯¹è¯ç”Ÿæˆå™¨</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">æ¹˜ICPå¤‡ 2022022717å· </a>
      <img src="/images/1.png" style="display: inline-block;"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=%E6%B9%98%E5%85%AC%E7%BD%91%E5%AE%89%E5%A4%8743011202000987%E5%8F%B7" rel="noopener" target="_blank">æ¹˜å…¬ç½‘å®‰å¤‡43011202000987å· </a>
  </div>

<div class="copyright">
  
  &copy; 2017 â€“ 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å—é”‹</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">825k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">12:30</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 't3TkgC71hcBBtINYfsVe8r0R-gzGzoHsz',
      appKey     : 'SUF3DMDZlFZMDGj3ai9WfgFY',
      placeholder: "å¡«å†™QQé‚®ç®±å°±ä¼šä½¿ç”¨QQå¤´åƒå–”~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

  +  
  
	<script type="text/javascript" src="/js/cursor/fireworks.js"></script>
  

</body>
</html>
