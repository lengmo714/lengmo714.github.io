<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/17/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="南锋">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/17/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/12/21/cocos2dx-lua%E7%83%AD%E6%9B%B4%E6%96%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="南锋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/21/cocos2dx-lua%E7%83%AD%E6%9B%B4%E6%96%B0/" class="post-title-link" itemprop="url">cocos2dx-lua热更新</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-21 14:27:33" itemprop="dateCreated datePublished" datetime="2018-12-21T14:27:33+08:00">2018-12-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-12 09:53:40" itemprop="dateModified" datetime="2024-03-12T09:53:40+08:00">2024-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">游戏开发</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>每次登陆游戏利用cocos的assetManager从服务器拉去当前最新的两个文件。 一个是version.mainifest,一个project.mainifest. 这两个文件都是xml的描述文件。</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>一个包含了版本信息，第二个包含了游戏所有资源的MD5码。首先通过version文件对比本地的版本是否相同，如果不相同，再通过跟本地的project文件对比MD5码来判断哪些文件需要重新下载，替换资源。 </p>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤:"></a>步骤:</h2><ol>
<li>有一个文件下载的热更新服务器，将最新项目资源(res&#x2F;  src&#x2F; 目录)放入热更新服务器中，添加版本信息母文件(version_info.json)和python脚本文件eneateManifest.py(生成project.manifest、version.manifest文件)。</li>
</ol>
<p>2.version_info.json文件: 主要用来配置信息</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;packageUrl&quot;</span> : <span class="string">&quot;http://ip:port/update/MyProj/assets/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;remoteManifestUrl&quot;</span> : <span class="string">&quot;http://ip:port/update/MyProj/version/project.manifest&quot;</span>,</span><br><span class="line">    <span class="string">&quot;remoteVersionUrl&quot;</span> : <span class="string">&quot;http://ip:port/update/MyProj/version/version.manifest&quot;</span>,</span><br><span class="line">    <span class="string">&quot;engineVersion&quot;</span> : <span class="string">&quot;3.3&quot;</span>,</span><br><span class="line">	<span class="string">&quot;update_channel&quot;</span> : <span class="string">&quot;Android&quot;</span>,</span><br><span class="line">	<span class="string">&quot;bundle&quot;</span> : <span class="string">&quot;2018111701&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span> : <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.eneateManifest.py文件: 这个文件是一个python。目的是生成对应的version和project文件。project文件可以帮你给每个资源生成独一无二的MD5码，相当于每个资源的标记。下面是一段python文件的代码。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">#coding:utf<span class="number">-8</span></span><br><span class="line"> </span><br><span class="line">import <span class="built_in">os</span></span><br><span class="line">import sys</span><br><span class="line">import json</span><br><span class="line">import hashlib</span><br><span class="line">import subprocess</span><br><span class="line">import getpass</span><br><span class="line"> </span><br><span class="line">username = getpass.getuser()</span><br><span class="line"># 改变当前工作目录</span><br><span class="line">#<span class="built_in">os</span>.chdir(<span class="string">&#x27;/Users/&#x27;</span> + username + <span class="string">&#x27;/Documents/client/MyProj/&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">assetsDir = &#123;</span><br><span class="line">    #MyProj文件夹下需要进行热跟的文件夹</span><br><span class="line">    <span class="string">&quot;searchDir&quot;</span> : [<span class="string">&quot;src&quot;</span>, <span class="string">&quot;res&quot;</span>],</span><br><span class="line">    #需要忽略的文件夹</span><br><span class="line">    <span class="string">&quot;ignorDir&quot;</span> : [<span class="string">&quot;cocos&quot;</span>, <span class="string">&quot;framework&quot;</span>, <span class="string">&quot;.svn&quot;</span>],</span><br><span class="line">    #需要忽略的文件</span><br><span class="line">    <span class="string">&quot;ignorFile&quot;</span>:[<span class="string">&quot;.DS_Store&quot;</span>],</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">versionConfigFile   = <span class="string">&quot;version/version_info.json&quot;</span>  #版本信息的配置文件路径</span><br><span class="line">versionManifestPath = <span class="string">&quot;version/version.manifest&quot;</span>    #由此脚本生成的version.manifest文件路径</span><br><span class="line">projectManifestPath = <span class="string">&quot;version/project.manifest&quot;</span>    #由此脚本生成的project.manifest文件路径</span><br><span class="line"># projectManifestPath = <span class="string">&quot;/Users/ximi/Documents/client/MyProj/res/version/project.manifest&quot;</span>    #由此脚本生成的project.manifest文件路径(mac机)</span><br><span class="line"> </span><br><span class="line">class SearchFile:</span><br><span class="line">    def __init__(<span class="built_in">self</span>):</span><br><span class="line">        <span class="built_in">self</span>.fileList = []</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> assetsDir:</span><br><span class="line">            <span class="keyword">if</span> (k == <span class="string">&quot;searchDir&quot;</span>):</span><br><span class="line">                <span class="keyword">for</span> searchdire <span class="keyword">in</span> assetsDir[k]:                 </span><br><span class="line">                    <span class="built_in">self</span>.recursiveDir(searchdire)</span><br><span class="line"> </span><br><span class="line">    def recursiveDir(<span class="built_in">self</span>, srcPath):</span><br><span class="line">        <span class="string">&#x27;&#x27;</span><span class="string">&#x27; 递归指定目录下的所有文件&#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line">        dirList = []    #所有文件夹  </span><br><span class="line"> </span><br><span class="line">        files = <span class="built_in">os</span>.listdir(srcPath) #返回指定目录下的所有文件，及目录（不含子目录）</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> files:         </span><br><span class="line">            #目录的处理</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">os</span>.<span class="built_in">path</span>.isdir(srcPath + <span class="string">&#x27;/&#x27;</span> + f)):              </span><br><span class="line">                <span class="keyword">if</span> (f[<span class="number">0</span>] == <span class="string">&#x27;.&#x27;</span> <span class="keyword">or</span> (f <span class="keyword">in</span> assetsDir[<span class="string">&quot;ignorDir&quot;</span>])):</span><br><span class="line">                    #排除隐藏文件夹和忽略的目录</span><br><span class="line">                    pass</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    #添加非需要的文件夹                                  </span><br><span class="line">                    dirList.append(f)</span><br><span class="line"> </span><br><span class="line">            #文件的处理</span><br><span class="line">            elif (<span class="built_in">os</span>.<span class="built_in">path</span>.isfile(srcPath + <span class="string">&#x27;/&#x27;</span> + f)) <span class="keyword">and</span> (f <span class="keyword">not</span> <span class="keyword">in</span> assetsDir[<span class="string">&quot;ignorFile&quot;</span>]):               </span><br><span class="line">                <span class="built_in">self</span>.fileList.append(srcPath + <span class="string">&#x27;/&#x27;</span> + f) #添加文件</span><br><span class="line"> </span><br><span class="line">        #遍历所有子目录,并递归</span><br><span class="line">        <span class="keyword">for</span> dire <span class="keyword">in</span> dirList:        </span><br><span class="line">            #递归目录下的文件</span><br><span class="line">            <span class="built_in">self</span>.recursiveDir(srcPath + <span class="string">&#x27;/&#x27;</span> + dire)</span><br><span class="line"> </span><br><span class="line">    def getAllFile(<span class="built_in">self</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;</span><span class="string">&#x27; get all file path&#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> tuple(<span class="built_in">self</span>.fileList)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">def CalcMD5(filepath):</span><br><span class="line">    <span class="string">&quot;&quot;</span><span class="string">&#x27;generate a md5 code by a file path&#x27;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">    with open(filepath,&#x27;rb&#x27;) as f:</span></span><br><span class="line"><span class="string">        md5obj = hashlib.md5()</span></span><br><span class="line"><span class="string">        md5obj.update(f.read())</span></span><br><span class="line"><span class="string">        return md5obj.hexdigest()</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">def getVersionInfo():</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;get version config data&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    configFile = open(versionConfigFile,&quot;</span>r<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    json_data = json.load(configFile)</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    configFile.close()</span></span><br><span class="line"><span class="string">    # json_data[&quot;</span>version<span class="string">&quot;] = json_data[&quot;</span>version<span class="string">&quot;] + &#x27;.&#x27; + str(GetSvnCurrentVersion())</span></span><br><span class="line"><span class="string">    json_data[&quot;</span>version<span class="string">&quot;] = json_data[&quot;</span>version<span class="string">&quot;]</span></span><br><span class="line"><span class="string">    return json_data</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">def GenerateVersionManifestFile():</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27; 生成大版本的version.manifest&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    json_str = json.dumps(getVersionInfo(), indent = 2)</span></span><br><span class="line"><span class="string">    fo = open(versionManifestPath,&quot;</span>w<span class="string">&quot;)  </span></span><br><span class="line"><span class="string">    fo.write(json_str)  </span></span><br><span class="line"><span class="string">    fo.close()</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">def GenerateProjectManifestFile():</span></span><br><span class="line"><span class="string">    searchfile = SearchFile()</span></span><br><span class="line"><span class="string">    fileList = list(searchfile.getAllFile())</span></span><br><span class="line"><span class="string">    project_str = &#123;&#125;</span></span><br><span class="line"><span class="string">    project_str.update(getVersionInfo())</span></span><br><span class="line"><span class="string">    dataDic = &#123;&#125;</span></span><br><span class="line"><span class="string">    for f in fileList:      </span></span><br><span class="line"><span class="string">        dataDic[f] = &#123;&quot;</span>md5<span class="string">&quot; : CalcMD5(f)&#125;</span></span><br><span class="line"><span class="string">        print f</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    project_str.update(&#123;&quot;</span>assets<span class="string">&quot;:dataDic&#125;)</span></span><br><span class="line"><span class="string">    json_str = json.dumps(project_str, sort_keys = True, indent = 2)</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    fo = open(projectManifestPath,&quot;</span>w<span class="string">&quot;)  </span></span><br><span class="line"><span class="string">    fo.write(json_str)  </span></span><br><span class="line"><span class="string">    fo.close()</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">if __name__ == &quot;</span>__main__<span class="string">&quot;:</span></span><br><span class="line"><span class="string">    GenerateVersionManifestFile()</span></span><br><span class="line"><span class="string">    GenerateProjectManifestFile()</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>生成version.manifest如下</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;packageUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/assets/&quot;</span>, </span><br><span class="line">  <span class="string">&quot;engineVersion&quot;</span>: <span class="string">&quot;3.3&quot;</span>, </span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>, </span><br><span class="line">  <span class="string">&quot;remoteVersionUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/version/version.manifest&quot;</span>, </span><br><span class="line">  <span class="string">&quot;remoteManifestUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/version/project.manifest&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>生成project.manifest如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;assets&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;src/packages/mvc/init.lua&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;md5&quot;</span>: <span class="string">&quot;6b9173481a1300c5e737ad5885ebef00&quot;</span></span><br><span class="line">        &#125;, </span><br><span class="line">        <span class="string">&quot;src/protobuf.lua&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;md5&quot;</span>: <span class="string">&quot;f790fe35eb179a4341ff41d94e488a5d&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;, </span><br><span class="line">    <span class="string">&quot;packageUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/assets/&quot;</span>, </span><br><span class="line">    <span class="string">&quot;engineVersion&quot;</span>: <span class="string">&quot;3.3&quot;</span>, </span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>, </span><br><span class="line">    <span class="string">&quot;remoteVersionUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/version/version.manifest&quot;</span>, </span><br><span class="line">    <span class="string">&quot;remoteManifestUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/version/project.manifest&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.游戏客户端: 利用cocos assetManager来从服务器获取文件并且进行资源的替换（这里所谓的替换并不是真正的替换，利用了Fileutils-&gt;searchPath() 设置资源文件读取的优先级。也就是老资源和代码并没有删除，而是舍弃不用。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--region *.lua</span></span><br><span class="line"><span class="comment">--Date</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">local</span> AssetsManager = class(<span class="string">&quot;AssetsManager&quot;</span>,<span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">    <span class="keyword">return</span> cc.LayerColor:<span class="built_in">create</span>(cc.c4b(<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">220</span>))</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:ctor</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">self</span>:onNodeEvent(<span class="string">&quot;exit&quot;</span>, handler(<span class="built_in">self</span>, <span class="built_in">self</span>.onExitCallback))</span><br><span class="line">    <span class="built_in">self</span>:initUI()</span><br><span class="line">    <span class="built_in">self</span>:setAssetsManage()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:onExitCallback</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">self</span>.assetsManagerEx:release()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:initUI</span><span class="params">()</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> hintLabel = cc.Label:createWithTTF(<span class="string">&quot;正在更新...&quot;</span>, CONFIG.TTF_FONT_2, <span class="number">20</span>)</span><br><span class="line">        :addTo(<span class="built_in">self</span>)</span><br><span class="line">        :move(<span class="number">600</span>, <span class="number">80</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> progressBg = display.newSprite(<span class="string">&quot;sprites/hyd_progress_bg.png&quot;</span>)    </span><br><span class="line">        :addTo(<span class="built_in">self</span>)</span><br><span class="line">        :move(<span class="number">600</span>, <span class="number">40</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">self</span>.progress = cc.ProgressTimer:<span class="built_in">create</span>(display.newSprite(<span class="string">&quot;sprites/hyd_progress.png&quot;</span>))</span><br><span class="line">        :addTo(progressBg)</span><br><span class="line">        :move(<span class="number">380</span>, <span class="number">19</span>)</span><br><span class="line">    <span class="built_in">self</span>.progress:setType(cc.PROGRESS_TIMER_TYPE_BAR)</span><br><span class="line">    <span class="built_in">self</span>.progress:setBarChangeRate(cc.p(<span class="number">1</span>, <span class="number">0</span>))</span><br><span class="line">    <span class="built_in">self</span>.progress:setMidpoint(cc.p(<span class="number">0.0</span>, <span class="number">0.5</span>))</span><br><span class="line">    <span class="built_in">self</span>.progress:setPercentage(<span class="number">0</span>) </span><br><span class="line"> </span><br><span class="line">    <span class="comment">--触摸吞噬</span></span><br><span class="line">    <span class="built_in">self</span>.listener = cc.EventListenerTouchOneByOne:<span class="built_in">create</span>()</span><br><span class="line">    <span class="built_in">self</span>.listener:setSwallowTouches(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">local</span> onTouchBegan = <span class="function"><span class="keyword">function</span> <span class="params">(touch, event)</span></span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line">    <span class="built_in">self</span>.listener:registerScriptHandler(onTouchBegan, cc.Handler.EVENT_TOUCH_BEGAN)</span><br><span class="line">    cc.Director:getInstance():getEventDispatcher():addEventListenerWithSceneGraphPriority(<span class="built_in">self</span>.listener, <span class="built_in">self</span>)   </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:setAssetsManage</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">--创建可写目录与设置搜索路径</span></span><br><span class="line">    <span class="keyword">local</span> storagePath = cc.FileUtils:getInstance():getWritablePath() .. <span class="string">&quot;NewRes/&quot;</span> </span><br><span class="line">    <span class="keyword">local</span> resPath = storagePath.. <span class="string">&#x27;/res/&#x27;</span></span><br><span class="line">    <span class="keyword">local</span> srcPath = storagePath.. <span class="string">&#x27;/src/&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> (cc.FileUtils:getInstance():isDirectoryExist(storagePath)) <span class="keyword">then</span>         </span><br><span class="line">        cc.FileUtils:getInstance():createDirectory(storagePath)</span><br><span class="line">        cc.FileUtils:getInstance():createDirectory(resPath)</span><br><span class="line">        cc.FileUtils:getInstance():createDirectory(srcPath)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> searchPaths = cc.FileUtils:getInstance():getSearchPaths() </span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(searchPaths, <span class="number">1</span>, storagePath)  </span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(searchPaths, <span class="number">2</span>, resPath)</span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(searchPaths, <span class="number">3</span>, srcPath)</span><br><span class="line">    cc.FileUtils:getInstance():setSearchPaths(searchPaths)</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">self</span>.assetsManagerEx = cc.AssetsManagerEx:<span class="built_in">create</span>(<span class="string">&quot;version/project.manifest&quot;</span>, storagePath)    </span><br><span class="line">    <span class="built_in">self</span>.assetsManagerEx:retain()</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> eventListenerAssetsManagerEx = cc.EventListenerAssetsManagerEx:<span class="built_in">create</span>(<span class="built_in">self</span>.assetsManagerEx, </span><br><span class="line">       <span class="function"><span class="keyword">function</span> <span class="params">(event)</span></span></span><br><span class="line">           <span class="built_in">self</span>:handleAssetsManagerEvent(event)</span><br><span class="line">       <span class="keyword">end</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> dispatcher = cc.Director:getInstance():getEventDispatcher()</span><br><span class="line">    dispatcher:addEventListenerWithFixedPriority(eventListenerAssetsManagerEx, <span class="number">1</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="comment">--检查版本并升级</span></span><br><span class="line">    <span class="built_in">self</span>.assetsManagerEx:update()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:handleAssetsManagerEvent</span><span class="params">(event)</span></span>    </span><br><span class="line">    <span class="keyword">local</span> eventCodeList = cc.EventAssetsManagerEx.EventCode    </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> eventCodeHand = &#123;</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ERROR_NO_LOCAL_MANIFEST] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;发生错误:本地资源清单文件未找到&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ERROR_DOWNLOAD_MANIFEST] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;发生错误:远程资源清单文件下载失败&quot;</span>)  <span class="comment">--资源服务器没有打开，</span></span><br><span class="line">            <span class="built_in">self</span>:downloadManifestError()</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ERROR_PARSE_MANIFEST] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&quot;发生错误:资源清单文件解析失败&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.NEW_VERSION_FOUND] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;发现找到新版本&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ALREADY_UP_TO_DATE] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;已经更新到服务器最新版本&quot;</span>)            </span><br><span class="line">            <span class="built_in">self</span>:updateFinished()</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.UPDATE_PROGRESSION]= <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;更新过程的进度事件&quot;</span>)</span><br><span class="line">            <span class="built_in">self</span>.progress:setPercentage(event:getPercentByFile())</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ASSET_UPDATED] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;单个资源被更新事件&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ERROR_UPDATING] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;发生错误:更新过程中遇到错误&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.UPDATE_FINISHED] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;更新成功事件&quot;</span>)</span><br><span class="line">            <span class="built_in">self</span>:updateFinished()</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.UPDATE_FAILED] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;更新失败事件&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ERROR_DECOMPRESS] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;解压缩失败&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">local</span> eventCode = event:getEventCode()    </span><br><span class="line">    <span class="keyword">if</span> eventCodeHand[eventCode] ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">        eventCodeHand[eventCode]()</span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:updateFinished</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">self</span>:setVisible(<span class="literal">false</span>)</span><br><span class="line">    <span class="built_in">self</span>.listener:setEnabled(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:downloadManifestError</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">self</span>:setVisible(<span class="literal">false</span>)</span><br><span class="line">    <span class="built_in">self</span>.listener:setEnabled(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> AssetsManager</span><br><span class="line"> </span><br><span class="line"><span class="comment">--endregion</span></span><br></pre></td></tr></table></figure>
<p>Android apk 安装后在手机中还是以apk存在，apk 不可写入和删除，所以热更新下载的最新资源都存在缓存中，并添加缓存目录为最高优先级搜索目录，加载资源时从最高优先级目录中加载从而起到替换更新的作用。</p>
<p>cocos2dx中有一个热更新类AssetsManagerEx，用这个类实现热更功能时需要有两个文件，project.manifest以及version.manifest。这里主要是project.manifest文件</p>
<p>Cocos自身也封装了热更新的模块AssetsManager、AssetsManagerEx。</p>
<p>AssetsManager采用的是升级包的管理方式，首先进行版本号对比，然后根据URL获取对应的升级包，解压升级包，设置资源加载路径，通过加载writepath目录下最新文件的方式来实现更新。问题是当涉及跳版本更新，或只有一个文件被改动时，用户就要下载前面全部的升级内容，升级包会越来越大。</p>
<p>AssetsManagerEx是AssetsManager的加强版，不同的是不再使用升级包的方式，而是采用单个文件拉取的方式。首先获取本地更新配置，之后与服务器的更新配置比对，得出差异文件，之后单个拉取差异文件。当本地版本大于服务器版本时，会清理掉本地更新缓存。AssetsManagerEx也有尚未解决的问题，例如多个更新序列无法并行，只能顺序启动。另外版本后期随着项目庞大配置文件几乎包含了所有的文件信息，对比文件时间的耗时会越来越长。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/12/13/cocos2dx-lua%E5%90%84%E7%A7%8D%E5%AE%B9%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="南锋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/13/cocos2dx-lua%E5%90%84%E7%A7%8D%E5%AE%B9%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">cocos2dx-lua各种容器的使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-13 13:47:13" itemprop="dateCreated datePublished" datetime="2018-12-13T13:47:13+08:00">2018-12-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-12 09:53:40" itemprop="dateModified" datetime="2024-03-12T09:53:40+08:00">2024-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">游戏开发</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在cocos2dx-lua开发中，经常用到容器。下面就介绍在开发中会用到的4种容器：ListView,scrollView,tableView,pageView</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="1-ListView-（列表容器）使用"><a href="#1-ListView-（列表容器）使用" class="headerlink" title="1. ListView （列表容器）使用"></a>1. ListView （列表容器）使用</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> MainScene = class(<span class="string">&quot;MainScene&quot;</span>, cc.<span class="built_in">load</span>(<span class="string">&quot;mvc&quot;</span>).ViewBase)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onCreate</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">-- 测试ListView</span></span><br><span class="line">    <span class="comment">--[[</span></span><br><span class="line"><span class="comment">    注: 1.子节点如果是RichText，或是文本信息。</span></span><br><span class="line"><span class="comment">      设置setVerticalSpace()，高度间隔。adjustToRealHeight(),自适应高度。</span></span><br><span class="line"><span class="comment">        2.设置子节点的锚点信息，否则 高度不对称</span></span><br><span class="line"><span class="comment">    ]]</span><span class="comment">--</span></span><br><span class="line"> </span><br><span class="line">    <span class="built_in">self</span>.listView = ccui.ListView:<span class="built_in">create</span>();  </span><br><span class="line">    <span class="built_in">self</span>.listView:setPosition(cc.p(<span class="number">10</span>, <span class="number">10</span>));  </span><br><span class="line">    <span class="built_in">self</span>.listView:setContentSize(cc.size(<span class="number">1116</span>, <span class="number">550</span>));  </span><br><span class="line">    <span class="built_in">self</span>.listView:setDirection(cc.SCROLLVIEW_DIRECTION_VERTICAL);  </span><br><span class="line">    <span class="built_in">self</span>.listView:setBounceEnabled(<span class="literal">true</span>);  </span><br><span class="line">    <span class="built_in">self</span>.listView:setItemsMargin(<span class="number">20</span>)  </span><br><span class="line">      </span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">4</span> <span class="keyword">do</span>  </span><br><span class="line">        <span class="keyword">local</span> layout = ccui.Layout:<span class="built_in">create</span>();  </span><br><span class="line">        layout:setContentSize(cc.size(<span class="number">1116</span>, <span class="number">209</span>));  </span><br><span class="line">        layout:setBackGroundColorType(ccui.LayoutBackGroundColorType.solid);  </span><br><span class="line">        layout:setBackGroundColor(cc.c3b(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>));  </span><br><span class="line">  </span><br><span class="line">        <span class="built_in">self</span>.listView:pushBackCustomItem(layout);  </span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line">    <span class="built_in">self</span>:addChild(<span class="built_in">self</span>.listView); </span><br><span class="line"> </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> MainScene</span><br></pre></td></tr></table></figure>
<h3 id="2-scrollView-（滚动容器）使用"><a href="#2-scrollView-（滚动容器）使用" class="headerlink" title="2. scrollView （滚动容器）使用"></a>2. scrollView （滚动容器）使用</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> MainScene = class(<span class="string">&quot;MainScene&quot;</span>, cc.<span class="built_in">load</span>(<span class="string">&quot;mvc&quot;</span>).ViewBase)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onCreate</span><span class="params">()</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">-- 测试 scrollView</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> scrollView = cc.ScrollView:<span class="built_in">create</span>()</span><br><span class="line">    <span class="keyword">local</span> layerColor = cc.LayerColor:<span class="built_in">create</span>(cc.c4b(<span class="number">100</span>, <span class="number">100</span>,<span class="number">100</span>, <span class="number">100</span>), <span class="number">700</span>, <span class="number">600</span>)</span><br><span class="line">    scrollView:setViewSize(cc.size(<span class="number">700</span>, <span class="number">300</span>))</span><br><span class="line">    scrollView:setContainer(layerColor)</span><br><span class="line">    layerColor:setPosition(cc.p(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    scrollView:setPosition(cc.p(<span class="number">50</span>, <span class="number">50</span>))</span><br><span class="line">    <span class="built_in">self</span>:addChild(scrollView)</span><br><span class="line">    scrollView:setDirection(cc.SCROLLVIEW_DIRECTION_VERTICAL)<span class="comment">--垂直滚动</span></span><br><span class="line">    scrollView:setBounceEnabled(<span class="literal">true</span>)</span><br><span class="line">    scrollView:setDelegate()</span><br><span class="line">    scrollView:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.scrollViewDidZoom)  ,cc.SCROLLVIEW_SCRIPT_ZOOM)</span><br><span class="line">    scrollView:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.scrollViewDidScroll) ,cc.SCROLLVIEW_SCRIPT_SCROLL)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">6</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> strFmt = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;num %d&quot;</span>, i)</span><br><span class="line">        <span class="keyword">local</span> label = cc.Label:createWithSystemFont(strFmt, <span class="string">&quot;Arial&quot;</span>, <span class="number">32</span>)</span><br><span class="line">        label:setColor(cc.c3b(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        label:setPosition(cc.p(<span class="number">350</span>, <span class="number">600</span>-i*<span class="number">100</span>+<span class="number">50</span>))</span><br><span class="line">        layerColor:addChild(label)</span><br><span class="line">    <span class="keyword">end</span>    </span><br><span class="line"> </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:scrollViewDidZoom</span><span class="params">()</span></span></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;ScrollViewDidZoom&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:scrollViewDidScroll</span><span class="params">()</span></span></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;ScrollViewDidScroll&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> MainScene</span><br></pre></td></tr></table></figure>
<h3 id="tableView-使用"><a href="#tableView-使用" class="headerlink" title="tableView 使用"></a>tableView 使用</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">local</span> MainScene = class(<span class="string">&quot;MainScene&quot;</span>, cc.<span class="built_in">load</span>(<span class="string">&quot;mvc&quot;</span>).ViewBase)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onCreate</span><span class="params">()</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">-- 测试tableView2</span></span><br><span class="line">    <span class="built_in">self</span>.tableView2 = cc.TableView:<span class="built_in">create</span>(cc.size(<span class="number">200</span>, <span class="number">200</span>))</span><br><span class="line">    <span class="built_in">self</span>.tableView2:setDirection(cc.SCROLLVIEW_DIRECTION_HORIZONTAL)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:setPosition(cc.p(<span class="number">200</span>, <span class="number">200</span>))</span><br><span class="line">    <span class="built_in">self</span>.tableView2:setDelegate()</span><br><span class="line">    <span class="built_in">self</span>:addChild(<span class="built_in">self</span>.tableView2)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.scrollViewDidScroll) , cc.SCROLLVIEW_SCRIPT_SCROLL)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.scrollViewDidZoom) , cc.SCROLLVIEW_SCRIPT_ZOOM)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.tableCellTouched) , cc.TABLECELL_TOUCHED)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.cellSizeForTable) , cc.TABLECELL_SIZE_FOR_INDEX)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.tableCellAtIndex) , cc.TABLECELL_SIZE_AT_INDEX)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.numberOfCellsInTableView) , cc.NUMBER_OF_CELLS_IN_TABLEVIEW)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:reloadData()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:scrollViewDidScroll</span><span class="params">(view)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ScrollViewDidScroll&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:scrollViewDidZoom</span><span class="params">(view)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ScrollViewDidZoom&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:tableCellTouched</span><span class="params">(table, cell)</span></span></span><br><span class="line">    <span class="keyword">if</span> <span class="literal">nil</span> == cell <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;cell touched at index: &quot;</span>..cell:getIdx())</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:cellSizeForTable</span><span class="params">(table, idx)</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">60</span>, <span class="number">60</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:tableCellAtIndex</span><span class="params">(table, idx)</span></span></span><br><span class="line">    <span class="keyword">local</span> strValue = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%d&quot;</span>, idx)</span><br><span class="line">    <span class="keyword">local</span> cell = <span class="built_in">table</span>:dequeueCell()</span><br><span class="line">    <span class="keyword">local</span> label = <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">if</span> <span class="literal">nil</span> == cell <span class="keyword">then</span></span><br><span class="line">        cell = cc.TableViewCell:<span class="built_in">create</span>()</span><br><span class="line">        label = cc.Label:createWithSystemFont(strValue, <span class="string">&quot;Arial&quot;</span>, <span class="number">32</span>)</span><br><span class="line">        label:setPosition(cc.p(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        label:setAnchorPoint(cc.p(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        cell:addChild(label)</span><br><span class="line">        label:setTag(<span class="number">123</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        label = cell:getChildByTag(<span class="number">123</span>)</span><br><span class="line">        <span class="keyword">if</span> label ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">            label:setString(strValue)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> cell</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:numberOfCellsInTableView</span><span class="params">(table)</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">20</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> MainScene</span><br></pre></td></tr></table></figure>
<h3 id="4-pageView（翻页容器）-使用"><a href="#4-pageView（翻页容器）-使用" class="headerlink" title="4. pageView（翻页容器） 使用"></a>4. pageView（翻页容器） 使用</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> MainScene = class(<span class="string">&quot;MainScene&quot;</span>, cc.<span class="built_in">load</span>(<span class="string">&quot;mvc&quot;</span>).ViewBase)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onCreate</span><span class="params">()</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">-- 测试 pageView</span></span><br><span class="line">    <span class="keyword">local</span> pageView = ccui.PageView:<span class="built_in">create</span>()</span><br><span class="line">    <span class="comment">--设置pageView长宽</span></span><br><span class="line">    pageView:setContentSize(<span class="number">600</span>,<span class="number">600</span>)</span><br><span class="line">    <span class="comment">--设置是否响应触摸事件</span></span><br><span class="line">    pageView:setTouchEnabled(<span class="literal">true</span>)</span><br><span class="line">    <span class="comment">--设置锚点</span></span><br><span class="line">    pageView:setAnchorPoint(cc.p(<span class="number">0.5</span>,<span class="number">0.5</span>))</span><br><span class="line">    <span class="comment">--设置位置在中心位置</span></span><br><span class="line">    pageView:setPosition(display.center)</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">5</span> <span class="keyword">do</span></span><br><span class="line">        <span class="comment">---然后layout，每个layout保存一个page</span></span><br><span class="line">        <span class="keyword">local</span> layout = ccui.Layout:<span class="built_in">create</span>()</span><br><span class="line">        <span class="comment">--为了演示这里做个小图片</span></span><br><span class="line">        layout:setContentSize(<span class="number">600</span>,<span class="number">600</span>)</span><br><span class="line">        layout:setPosition(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">        <span class="comment">--创建一个button</span></span><br><span class="line">        <span class="keyword">local</span> btn= ccui.Button:<span class="built_in">create</span>(<span class="string">&quot;bt_qd.png&quot;</span>,<span class="string">&quot;bt_qd_h.png&quot;</span>,<span class="string">&quot;bt_qd.png&quot;</span>):setPosition(<span class="number">300</span>,<span class="number">300</span>)</span><br><span class="line">        layout:addChild(btn)</span><br><span class="line">        pageView:addChild(layout)<span class="comment">---一个layout 为一个page内容   page:addPage(layout)</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--添加pageView 到场景中</span></span><br><span class="line">    <span class="built_in">self</span>:addChild(pageView)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">--添加事件响应</span></span><br><span class="line">    pageView:addEventListener(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.onEvent))</span><br><span class="line"> </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">--事件响应方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onEvent</span><span class="params">(sender,event)</span></span></span><br><span class="line">    <span class="keyword">if</span> event == ccui.PageViewEventType.turning <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> pageNum = sender:getCurrentPageIndex()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;is turning,this PageNum:&quot;</span>..pageNum)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> MainScene</span><br></pre></td></tr></table></figure>
<blockquote>
<p>以上就是cocos2dx中用到的四种容器</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/08/20/c%E8%AF%AD%E8%A8%80%E9%A2%98%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="南锋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/08/20/c%E8%AF%AD%E8%A8%80%E9%A2%98%E5%BA%93/" class="post-title-link" itemprop="url">C语言大学生考试全面题库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-08-20 02:00:31" itemprop="dateCreated datePublished" datetime="2018-08-20T02:00:31+08:00">2018-08-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-12 09:53:40" itemprop="dateModified" datetime="2024-03-12T09:53:40+08:00">2024-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="计算A-B的值"><a href="#计算A-B的值" class="headerlink" title="计算A-B的值"></a>计算A-B的值</h3><p><strong>输入描述：</strong></p>
<blockquote>
<p>输入两个整数  a,b<br>输出描述描述：</p>
</blockquote>
<p>输出a-b的结果</p>
<blockquote>
<p>样式输入：7 4<br>样式输出：3</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/08/20/c%E8%AF%AD%E8%A8%80%E9%A2%98%E5%BA%93/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/08/08/%E9%80%9A%E4%BF%A1%E7%A7%91%E6%8A%80%E4%BA%BA%E5%91%98%E8%81%8C%E4%B8%9A%E9%81%93%E5%BE%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="南锋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/08/08/%E9%80%9A%E4%BF%A1%E7%A7%91%E6%8A%80%E4%BA%BA%E5%91%98%E8%81%8C%E4%B8%9A%E9%81%93%E5%BE%B7/" class="post-title-link" itemprop="url">通信科技人员职业道德</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-08-08 23:18:11" itemprop="dateCreated datePublished" datetime="2018-08-08T23:18:11+08:00">2018-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-12 09:53:40" itemprop="dateModified" datetime="2024-03-12T09:53:40+08:00">2024-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%80%9A%E4%BF%A1%E7%A7%91%E6%8A%80%E4%BA%BA%E5%91%98%E8%81%8C%E4%B8%9A%E9%81%93%E5%BE%B7/" itemprop="url" rel="index"><span itemprop="name">通信科技人员职业道德</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>通信科技既是整个科学技术的重要组成部分，又是通信生产力中越来越突出和具有重要意义的因素。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/08/08/%E9%80%9A%E4%BF%A1%E7%A7%91%E6%8A%80%E4%BA%BA%E5%91%98%E8%81%8C%E4%B8%9A%E9%81%93%E5%BE%B7/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/05/21/%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%94%B5%E8%84%91%E4%B8%8D%E7%94%A8%E8%BD%AF%E4%BB%B6%E5%BC%80wifi%E7%83%AD%E7%82%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="南锋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/21/%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%94%B5%E8%84%91%E4%B8%8D%E7%94%A8%E8%BD%AF%E4%BB%B6%E5%BC%80wifi%E7%83%AD%E7%82%B9/" class="post-title-link" itemprop="url">创建WiFi热点方法分享</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-05-21 22:11:19" itemprop="dateCreated datePublished" datetime="2018-05-21T22:11:19+08:00">2018-05-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 18:51:05" itemprop="dateModified" datetime="2024-05-14T18:51:05+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">教程</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>分享在拥有无线网卡、有线网路连接的笔记本和台式电脑上创建WiFi热点的详细步骤，适用于方便在其他设备上共享网络连接的场景。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/05/21/%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%94%B5%E8%84%91%E4%B8%8D%E7%94%A8%E8%BD%AF%E4%BB%B6%E5%BC%80wifi%E7%83%AD%E7%82%B9/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2017/10/07/%E9%80%9A%E4%BF%A1%E5%B7%A5%E7%A8%8B%E4%BA%A4%E6%8D%A2%E4%BC%A0%E8%BE%93%E5%AE%9E%E4%B9%A0%E6%8A%A5%E5%91%8A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="南锋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/07/%E9%80%9A%E4%BF%A1%E5%B7%A5%E7%A8%8B%E4%BA%A4%E6%8D%A2%E4%BC%A0%E8%BE%93%E5%AE%9E%E4%B9%A0%E6%8A%A5%E5%91%8A/" class="post-title-link" itemprop="url">通信工程交换传输实习报告</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-10-07 15:29:01" itemprop="dateCreated datePublished" datetime="2017-10-07T15:29:01+08:00">2017-10-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 19:12:52" itemprop="dateModified" datetime="2024-05-14T19:12:52+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">课程设计</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/%E9%80%9A%E4%BF%A1%E5%B7%A5%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">通信工程</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/%E9%80%9A%E4%BF%A1%E5%B7%A5%E7%A8%8B/%E5%AE%9E%E4%B9%A0%E6%8A%A5%E5%91%8A/" itemprop="url" rel="index"><span itemprop="name">实习报告</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本学期的3-5周，我们进行了为期3周的专业实习，本次实习的内容是程控交换和光纤传输，实习地点是云塘校区理科楼B304程控交换实验室。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/10/07/%E9%80%9A%E4%BF%A1%E5%B7%A5%E7%A8%8B%E4%BA%A4%E6%8D%A2%E4%BC%A0%E8%BE%93%E5%AE%9E%E4%B9%A0%E6%8A%A5%E5%91%8A/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2017/06/15/%E6%95%B0%E6%8D%AE%E6%89%8B%E5%A5%97%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="南锋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/06/15/%E6%95%B0%E6%8D%AE%E6%89%8B%E5%A5%97%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">数据手套的设计与实现</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-06-15 06:27:28" itemprop="dateCreated datePublished" datetime="2017-06-15T06:27:28+08:00">2017-06-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-12 09:53:40" itemprop="dateModified" datetime="2024-03-12T09:53:40+08:00">2024-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">嵌入式开发</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>数据手套在人机交互中提供了一种有效的人机交互手段，从数据手套的理论出发，本论文利用一些硬件设备以及软件开发环境，设计了一款可以与机械臂、虚拟手等终端交互的数据手套。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/06/15/%E6%95%B0%E6%8D%AE%E6%89%8B%E5%A5%97%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2017/06/15/%E4%B8%A4%E4%B8%AAHC05%E8%93%9D%E7%89%99%E6%A8%A1%E5%9D%97%E7%9B%B8%E4%BA%92%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="南锋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/06/15/%E4%B8%A4%E4%B8%AAHC05%E8%93%9D%E7%89%99%E6%A8%A1%E5%9D%97%E7%9B%B8%E4%BA%92%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1/" class="post-title-link" itemprop="url">两个HC05蓝牙模块相互之间的通信</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-06-15 06:25:28" itemprop="dateCreated datePublished" datetime="2017-06-15T06:25:28+08:00">2017-06-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 19:15:46" itemprop="dateModified" datetime="2024-05-14T19:15:46+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">嵌入式开发</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/%E8%93%9D%E7%89%99%E6%A8%A1%E5%9D%97/" itemprop="url" rel="index"><span itemprop="name">蓝牙模块</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>介绍两个蓝牙模块通信配置的详细步骤，包括进入AT模式、配置配对码、设置主从模式等。确保两个模块成功连接。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/06/15/%E4%B8%A4%E4%B8%AAHC05%E8%93%9D%E7%89%99%E6%A8%A1%E5%9D%97%E7%9B%B8%E4%BA%92%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2017/05/15/%E8%AF%AD%E9%9F%B3%E4%BF%A1%E5%8F%B7%E6%BB%A4%E6%B3%A2%E5%8E%BB%E5%99%AA%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8FLATTOPWIN%E8%AE%BE%E8%AE%A1%E7%9A%84FIR%E6%BB%A4%E6%B3%A2%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="南锋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/15/%E8%AF%AD%E9%9F%B3%E4%BF%A1%E5%8F%B7%E6%BB%A4%E6%B3%A2%E5%8E%BB%E5%99%AA%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8FLATTOPWIN%E8%AE%BE%E8%AE%A1%E7%9A%84FIR%E6%BB%A4%E6%B3%A2%E5%99%A8/" class="post-title-link" itemprop="url">语音信号滤波去噪——使用FLATTOPWIN设计的FIR滤波器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-15 11:01:00" itemprop="dateCreated datePublished" datetime="2017-05-15T11:01:00+08:00">2017-05-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 19:19:09" itemprop="dateModified" datetime="2024-05-14T19:19:09+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">课程设计</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本课程设计主要内容是设计利用窗口设计法选择FLATTOPWIN窗设计一个FIR滤波器，对一段含噪语音信号进行滤波去噪处理并根据滤波前后的波形和频谱分析滤波性能</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/05/15/%E8%AF%AD%E9%9F%B3%E4%BF%A1%E5%8F%B7%E6%BB%A4%E6%B3%A2%E5%8E%BB%E5%99%AA%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8FLATTOPWIN%E8%AE%BE%E8%AE%A1%E7%9A%84FIR%E6%BB%A4%E6%B3%A2%E5%99%A8/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2017/05/07/%E5%8E%9F%E7%90%86%E5%9B%BE%E8%A7%A3%E8%AF%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="南锋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/07/%E5%8E%9F%E7%90%86%E5%9B%BE%E8%A7%A3%E8%AF%BB/" class="post-title-link" itemprop="url">Arduino Mega 2560 Reference Design原理图解读</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-07 06:31:50" itemprop="dateCreated datePublished" datetime="2017-05-07T06:31:50+08:00">2017-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 19:22:51" itemprop="dateModified" datetime="2024-05-14T19:22:51+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">嵌入式开发</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Arduino是一款便捷灵活、方便上手的开源电子原型平台。包含硬件（各种型号的Arduino板）和软件（ArduinoIDE）</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<ul>
<li>电源模块<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTA2MjMxMTA4NTU3?x-oss-process=image/format,png" alt="这里写图片描述"><br>‘IC1’和’IC2’是两个低压差三路稳压器，起着降压以及稳压的作用。图中的输出是+5V，但我们实测输入电压为9V左右，输出电压为4.7V。<br>&emsp;&emsp;这里为什么要进行降压处理了？原因很简单，我们都知道功耗和电压成正比，即电压越大，电子产品的功耗越大（P&#x3D;UI）。但是采用低电压供电在技术和硬件方面的要求更高。<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTA2MjMyMjM2NTc2?x-oss-process=image/format,png" alt="这里写图片描述"><br>在正常情况下，电压应该是不随时间的改变而改变，但在某些时刻，因为外界的干扰或者电路本身设计的问题会造成电压的衰减。电压衰减造成信号在传输过程的衰减，就可能影响到电路之间的通信。<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTA2MjMzMDAwMDk4?x-oss-process=image/format,png" alt="这里写图片描述"><br>在理想情况下，电路电压的输入为9V，且不为时间的改变而改变，如上图的虚线所示。但实际项目中，电压往往是不稳定的，如上图波浪线所示。所以我们用一个降压稳压电路来稳定其电压，如上图直线所示。<br><strong>降压电路：</strong>稳定电压，消耗多余功率。（根据公式P&#x3D;UI，电压降低了，其功率也会降低。而降低的功率主要由降压电路所消耗，主要方式为散热，所以这也是为什么一般电路的电源模块温度比其他模块高的原因）。<br><strong>期望</strong> 因为多余的功率通过散热的形式消耗难免让人觉得可惜，所以就<a target="_blank" rel="noopener" href="http://baike.baidu.com/link?url=93ZMHJTSc1RxI2RNYP67bV3MIh9wbncsAmpkr9HBIRmJjsfkoWBBmNaRClCC5KrAwx-iwVOhTECsbdYBEdCh4oOAu--9jK7OM0zkW2o2k5EHFc5ewUPZQlikY_Kjrcf0">开关电源</a>就诞生了。</li>
</ul>
<p>同时我们也看到电源模块有几个电容，电容的主要作用是滤波和储能。一般电容为47uF或者470uF。通常使用小电容滤除高频干扰，大电容消除低频干扰。</p>
<p><img src="https://pic.imgdb.cn/item/6643490e0ea9cb1403cc1be4.png" alt="这里写图片描述"><br>因为电容的存在，所以高低电平的转换也由左图变成了右图。</p>
<ul>
<li>复位</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/6643490d0ea9cb1403cc1b99.png" alt="这里写图片描述"></p>
<p><img src="https://pic.imgdb.cn/item/6643490d0ea9cb1403cc1b76.png" alt="这里写图片描述"><br>当按下复位键后，GND和RESET短接，拉低了电平（注意，芯片上的RESET脚和服务模块的RESERT脚是连在一起的，只要中间没有其它电容电阻这些器件，电压是相等的）。用示波器观察，按下复位键时，电平会拉低，当松开时，电平又升高。<br>大家可能注意到30号管脚和其他管脚不一样，在最右边有一个圆圈。这个表示该管脚只对低电平有效。</p>
<ul>
<li>晶振<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTA3MDAxMjM0MDAx?x-oss-process=image/format,png" alt="这里写图片描述"></li>
</ul>
<p>用郑BOSS的话讲，作为专业人士，看到XTAL就要本能的反应是“晶振”，这里是使用的一个16MHz的晶振，晶振在电路中起着非常重要的作用（具体作用还请读者自行百度），相当于人的心脏。<br>如果用示波器看晶振的波形，你可以看到一个很漂亮的正弦波（这里省略照片，因为在笔者准备拍照的时候电路板被小伙伴给弄冒烟了），感兴趣的同志可以自己试一下。</p>
<ul>
<li><p>运算电路<br><img src="https://pic.imgdb.cn/item/6643497b0ea9cb1403ccbd6d.png" alt="这里写图片描述"><br>这个电路实现反馈。如果5脚电压大于+3V3，即7脚翻转为高平。</p>
</li>
<li><p>PWM(Pulse-Width Modulation 脉冲宽度调制)<br><img src="https://pic.imgdb.cn/item/6643497b0ea9cb1403ccbd1f.png" alt="这里写图片描述"></p>
</li>
</ul>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTA3MDAyMzU0MzEy?x-oss-process=image/format,png" alt="这里写图片描述"><br>通过改变脉冲列的周期可以调频，改变脉冲的宽度或占空比可以调压，采用适当控制方法即可使电压与频率协调变化。可以通过调整PWM的周期、PWM的占空比而达到控制充电电流的目的。进而来控制步进电机，来一个脉冲步进电机动一下。</p>
<p>最后还有一些关于万用表、示波器、学生电源等仪器的使用，感兴趣的同学自行百度。</p>
<blockquote>
<p>本篇文章对大家看电路原理图有所帮助，如有不妥的地方也请各位老司机多多指出。</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/16/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/18/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="南锋"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">南锋</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">174</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">63</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">55</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yourname" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yourname@gmail.com" title="E-Mail → mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://yoursite.com/" title="http:&#x2F;&#x2F;yoursite.com" rel="noopener" target="_blank">Title</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">南锋</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
