<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>1024ç¨‹åºå‘˜èŠ‚ï¼Œè‡´æ•¬ç¼–ç çš„è‰ºæœ¯ä¹‹ç¾</title>
    <url>/65bbb015.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»Šå¤©æ˜¯10æœˆ24æ—¥ï¼Œæ˜ŸæœŸä¸€ã€‚åœ¨ç½‘ä¸Šæ— æ„é—´çœ‹åˆ°è¯´ä»€ä¹ˆä»Šå¤©æ˜¯ä»€ä¹ˆ1024ç¨‹åºå‘˜èŠ‚ã€‚<br>è¯´å®è¯ï¼ŒæŒºè¯§å¼‚çš„ï¼Œæ²¡æƒ³åˆ°ç¨‹åºå‘˜è¿˜æœ‰è‡ªå·±çš„èŠ‚æ—¥ã€‚</p>
<h3 id="ç¨‹åºå‘˜èŠ‚çš„æ¥å†"><a href="#ç¨‹åºå‘˜èŠ‚çš„æ¥å†" class="headerlink" title="ç¨‹åºå‘˜èŠ‚çš„æ¥å†"></a>ç¨‹åºå‘˜èŠ‚çš„æ¥å†</h3><p>æŠ±ç€å¥½å¥‡çš„å¿ƒåœ¨ç½‘ä¸ŠæŸ¥äº†ä¸‹ç¨‹åºå‘˜èŠ‚çš„æ¥å†ï¼Œå±…ç„¶è¿˜æŒºæœ‰æ„ä¹‰çš„ã€‚å› ä¸º<br>1024 å…¶å®å°±æ˜¯ 2 çš„åæ¬¡æ–¹ï¼ŒäºŒè¿›åˆ¶è®¡æ•°çš„åŸºæœ¬è®¡é‡å•ä½ä¹‹ä¸€ï¼Œæ˜¯ç¨‹åºå‘˜æ¯å¤©éƒ½åœ¨æ‰“äº¤é“çš„æ•°å­—ã€‚<br>å…¶æ¬¡ï¼Œæ¯å¹´10æœˆ24æ—¥æ˜¯â€è”åˆå›½æ—¥â€ï¼ˆ1947 å¹´èµ·ï¼‰ï¼Œä¹Ÿæ˜¯ä¸–ç•Œå‘å±•ä¿¡æ¯æ—¥ï¼Œæ‰€ä»¥è¿™ä¸€å¤©å¯¹äºç¨‹åºå‘˜æ¥è¯´éå¸¸æœ‰çºªå¿µæ„ä¹‰ã€‚</p>
<p>æ—¢ç„¶çŸ¥é“äº†ï¼Œé‚£ä¹ˆå°±ç¥å¤©ä¸‹æ‰€æœ‰ç¨‹åºå‘˜ä»¬èŠ‚æ—¥å¿«ä¹ï¼Œå†™ä»£ç æ— bugï¼Œå¤´å‘ä¸€ç›´èŒ‚ç››~</p>
<h3 id="å¤§ä½¬å¯„è¯­"><a href="#å¤§ä½¬å¯„è¯­" class="headerlink" title="å¤§ä½¬å¯„è¯­"></a>å¤§ä½¬å¯„è¯­</h3><ul>
<li>ç¨‹åºå‘˜åº”è¯¥æ˜¯è‰ºæœ¯å®¶ï¼ˆArtistï¼‰ï¼Œè€ŒéåŒ äººï¼ˆWorkerï¼‰â€”â€”åè€…åªä¼šå †ç Œä»£ç ï¼Œè€Œå‰è€…èƒ½åˆ›é€ å‡ºç¾å¥½çš„ä½œå“  â€“C++ä¹‹çˆ¶Bjarne Stroustrup</li>
</ul>
]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>1024ç¨‹åºå‘˜èŠ‚</tag>
        <tag>ç¼–ç </tag>
        <tag>èŠ‚æ—¥</tag>
        <tag>è‡´æ•¬</tag>
      </tags>
  </entry>
  <entry>
    <title>2023æ€»ç»“</title>
    <url>/86cce350.html</url>
    <content><![CDATA[<p>çœ¨çœ¼2023å¹´å·²ç»ç»“æŸï¼Œ2024å¹´ä¹Ÿå·²ç»å¼€å¯ã€‚æ˜å¤©å°±æ˜¯2024å¹´ç¬¬ä¸€ä¸ªå·¥ä½œæ—¥äº†ã€‚è‡ªå·±æƒ³äº†å¾ˆä¹…ï¼Œè§‰å¾—è¿˜æ˜¯å¾—æ€»ç»“ä¸€ä¸‹è‡ªå·±çš„è¿™ä¸€å¹´ã€‚<br>å·¥ä½œå‡ å¹´ï¼Œæ„Ÿè§‰è‡ªå·±æ··äº†å‡ å¹´ï¼Œå¥½åƒä»æ¥æ²¡æœ‰è¿‡æ€»ç»“è¿™ä¸€è¯´ã€‚æƒ³äº†å¾ˆä¹…ï¼Œåœ¨è¿™ä¸ªæ—¶å€™ä¾¿æƒ³ç€å†™ä¸€ä¸ªè¿‡å»çš„æ€»ç»“ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>2023å¹´ï¼Œæƒ³ç€å…¶å®æ”¶è·è¿˜æŒºå¤§ï¼Œç®€å•çš„ä»<code>å·¥ä½œ</code>å’Œ<code>ç”Ÿæ´»</code>è¿™ä¸¤æ–¹é¢æ¥è¯´è¯´å§ã€‚</p>
<h3 id="å·¥ä½œ"><a href="#å·¥ä½œ" class="headerlink" title="å·¥ä½œ"></a>å·¥ä½œ</h3><p>ä¸çŸ¥ä¸è§‰ï¼Œæ¥æ·±åœ³å·¥ä½œå·²ç»ä¸€å¹´å¤šäº†~å»å¹´9æœˆä»½æ¥çš„æ·±åœ³ã€‚</p>
<h4 id="å·¥ä½œç»å†"><a href="#å·¥ä½œç»å†" class="headerlink" title="å·¥ä½œç»å†"></a>å·¥ä½œç»å†</h4><p>å»å¹´ï¼Œ2023å¹´ï¼Œæˆ‘ç¬¬ä¸€æ¬¡è¢«å…¬å¸å¼€é™¤ã€‚è¯´å®è¯ï¼Œå½“æ—¶è¿˜æ˜¯æœ‰ä¸€ç‚¹æ°”é¦çš„ï¼Œå› ä¸ºè¢«å…¬å¸åŠé€€äº†ã€‚ä»¥å‰ä¹Ÿæ²¡æœ‰ç»å†è¿‡ï¼Œæƒ³ç€æ—¢ç„¶å…¬å¸éƒ½è¿™ä¹ˆè¯´äº†ï¼Œè‡ªå·±å°±è¯†è¶£çš„èµ°å§ã€‚è¯´åˆ°è¿™ä¸ªï¼Œå°±å¾—ç‰¹åˆ«æ„Ÿè°¢æˆ‘çš„å‰åŒäº‹äº†ã€‚<br>æˆ‘è®°å¾—å½“å¤©ä¸‹åˆï¼Œå…¬å¸åŒäº‹æ‰¾æˆ‘è°ˆäº†åŠé€€çš„äº‹æƒ…ï¼Œç„¶åæˆ‘ç›´æ¥ä¸€å£ç­”åº”äº†ï¼Œå…¶ä»–çš„æƒ³éƒ½æƒ³ã€‚åˆ°äº†æ™šä¸Šåƒé¥­çš„æ—¶å€™ï¼Œå’Œå‰åŒäº‹ä¸€èµ·åƒé¥­èŠåˆ°äº†è¿™ä¸ªäº‹æƒ…ï¼Œå‰åŒäº‹å°±å¾ˆè¯§å¼‚æˆ‘ä¸ºä»€ä¹ˆç›´æ¥ç­”åº”ï¼Œæ²¡æœ‰è°ˆèµ”å¿ã€‚å¬åˆ°èµ”å¿ï¼Œæˆ‘å¾ˆæƒŠè®¶ï¼Œéš¾é“åŠé€€è¿˜æœ‰èµ”å¿çš„å—ï¼Ÿ(å› ä¸ºä¹‹å‰ä¸€ç›´å¾…åœ¨é•¿æ²™å·¥ä½œï¼Œé•¿æ²™å‡ºäº†åçš„æ˜¯åŠ³åŠ¨æ³•çš„æ³•å¤–ä¹‹åœ°,è€Œä¸”è‡ªå·±ä¹Ÿå°±è¾èŒè¿‡1æ¬¡ï¼ˆè¿˜ä¸€æ¬¡æ˜¯å…¬å¸è§£æ•£ï¼Œå…¬å¸ç»™äº†èµ”å¿ï¼‰ï¼Œæ²¡æœ‰ç‰¹æ„äº†è§£è¿‡)ç„¶åè‡ªå·±å»ç½‘ä¸Šäº†è§£ä¸‹ï¼Œåƒå®Œé¥­å›åˆ°å…¬å¸æœæ–­æ‰¾é¢†å¯¼è°ˆèµ”å¿çš„äº‹æƒ…ï¼Œåˆšå¼€å§‹é¢†å¯¼æ²¡æœ‰åŒæ„ã€‚äºæ˜¯æˆ‘ä¹Ÿæ²¡æœ‰è¾èŒï¼Œååœ¨åŠå…¬å®¤è€—ç€ï¼Œè‡ªå·±å†™ç®€å†ï¼Œåœ¨bossä¸Šæ‰¾å·¥ä½œï¼Œåæ­£å°±æ˜¯æ­£å¸¸ä¸Šä¸‹ç­ã€‚æœ€åè¿˜æ˜¯è°ˆæˆäº†èµ”å¿~</p>
<h4 id="å·¥ä½œèƒ½åŠ›æ”¶è·"><a href="#å·¥ä½œèƒ½åŠ›æ”¶è·" class="headerlink" title="å·¥ä½œèƒ½åŠ›æ”¶è·"></a>å·¥ä½œèƒ½åŠ›æ”¶è·</h4><p>åœ¨è¿™ä¸€å—æ„Ÿè§‰æ”¶è·è¿˜æ˜¯æŒºå¤§çš„ã€‚è‡ªå·±ä»¥å‰åšçš„éƒ½æ˜¯Luaå¼€å‘å’Œiosä¸Šæ¶è¿™éƒ¨åˆ†çš„ã€‚<br>åœ¨å»å¹´çš„1ã€2ã€3æœˆä»½æœ‰æ¥è§¦è¿‡googleä¸Šæ¶ï¼Œè¿™ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦å®‰å“è¿™éƒ¨åˆ†å†…å®¹ã€‚4æœˆä»½æ¥åˆ°æ–°å…¬å¸åå¼€å§‹æ¥è§¦Cocos Creatorã€‚äº§å“å‡ ä¹ä¹Ÿæ˜¯ä»0åˆ°1çš„å¼€å‘(1ä¸ªäººè´Ÿè´£æ•´ä¸ªå‰ç«¯ï¼Œä»åˆ«äººé‚£é‡Œæ‹¿äº†ä¸€å¥—æ¡†æ¶)ï¼Œæ‰€ä»¥è‡ªå·±çš„å‹åŠ›ä¹Ÿä¸€ç›´æŒºå¤§ï¼Œä¹Ÿæ˜¯ä¸€ç›´åœ¨å­¦ä¹ ã€‚ä¹‹å‰ä¹Ÿæ˜¯åªåšæ‰‹æœºç«¯ï¼Œä»Šå¹´ä¹Ÿåšäº†webç«¯çš„ä¸€äº›ä¸œè¥¿ï¼Œå‘ç°å…¶ä¸­è¿˜æ˜¯æœ‰ä¸€äº›å·®å¼‚çš„ã€‚<br>12æœˆä»½è¿˜åšäº†å®‰å“éƒ¨åˆ†çš„å†…å®¹ï¼Œä»¥å‰ä¹Ÿæ˜¯æ²¡æœ‰å­¦ä¹ è¿‡ï¼Œæ‰€ä»¥12æœˆä»½åŸºæœ¬ä¸Šæ˜¯æ™šä¸Š10ç‚¹ä¹‹åæ‰ä¸‹ç­ã€‚ä»Šå¹´1æœˆä»½å‹åŠ›æ›´å¤§ï¼Œå› ä¸ºé¡¹ç›®è¦æ±‚ä¸Šçº¿ï¼Œä»¥å‰åªæ˜¯å†™çº¯ä¸šåŠ¡ä»£ç ï¼Œå› ä¸ºæœ‰è¿‡å¼€å‘ç»éªŒï¼Œæ¢ä¸€ç§å¼€å‘è¯­è¨€å’Œå¼•æ“æ„Ÿè§‰å‹åŠ›éƒ½ä¸æ˜¯å¤ªå¤§ã€‚ä½†æ˜¯ç°åœ¨æ¶‰åŠåˆ°å®‰å“åŸç”Ÿçš„ä¸œè¥¿ï¼ˆå®Œå…¨é™Œç”Ÿçš„ä¸€ä¸ªç¯å¢ƒï¼‰,éœ€è¦å­¦ä¹ çš„å°±æ›´å¤šï¼Œå‹åŠ›ä¹Ÿå°±æ›´å¤§ã€‚</p>
<h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><p>1ã€å¼€äº†æŠ–éŸ³ï¼Œ2æœˆä»½çš„æ—¶å€™æ³¨é”€äº†æŠ–éŸ³ï¼Œé‡æ–°å¼€äº†ä¸€ä¸ªæ–°çš„æŠ–éŸ³ã€‚åŸæœ¬æ˜¯æƒ³ç€å¯ä»¥æŠ–éŸ³å¸¦è´§æŒ£ç‚¹å‰¯ä¸šã€‚ä½†æ˜¯åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒæŠ–éŸ³ç²‰ä¸æ‰2000+ï¼Œä¹Ÿæ²¡æœ‰æƒ³åˆ°å¾ˆå¥½çš„å¥—ç°çš„æ–¹æ³•ï¼Œè¿™ä¸ªè¿˜æ˜¯ä¼šä¸€ç›´åšæŒä¸‹å»ï¼Œå¥—ç°çš„äº‹æƒ…å…ˆæ”¾ä¸€æ”¾å§ã€‚<br>2ã€å¼€äº†å¾®ä¿¡å…¬ä¼—å·ï¼Œæ²¡æœ‰åšæŒï¼Œåœ¨å¹´å°¾çš„æ—¶å€™ç›´æ¥æ³¨é”€äº†~</p>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>æ€»çš„æ¥è¯´ï¼Œ2023å¹´è¿˜æ˜¯ç®—æ¯”è¾ƒå¥½çš„ä¸€å¹´ï¼Œè‡ªå·±æ¯•ä¸šè¿™å‡ å¹´ï¼Œ2023å¹´å¯èƒ½æ˜¯è‡ªå·±åœ¨å·¥ä½œä¸­ä»˜å‡ºæœ€å¤šçš„ä¸€å¹´ã€‚</p>
<h3 id="ç”Ÿæ´»"><a href="#ç”Ÿæ´»" class="headerlink" title="ç”Ÿæ´»"></a>ç”Ÿæ´»</h3><p>ç”Ÿæ´»æœ‰äº†å‡ ä¸ªæ¯”è¾ƒå¤§çš„æ”¹å˜ã€‚</p>
<h4 id="è¿åŠ¨"><a href="#è¿åŠ¨" class="headerlink" title="è¿åŠ¨"></a>è¿åŠ¨</h4><p>ä»Šå¹´æ¢äº†æ–°å…¬å¸åï¼Œå°±ä¼šç»å¸¸å»è¿åŠ¨(ä¹Ÿå¯èƒ½æ˜¯å¹´çºªå¤§äº†),å‡ ä¹æ¯å‘¨éƒ½æœ‰ï¼Œæ‰“çƒã€æ¸¸æ³³ã€çˆ¬å±±ã€å¾’æ­¥ç­‰ï¼Œæœ‰å…¬å¸åŒäº‹ä¸€èµ·çš„ï¼Œä¹Ÿæœ‰è‡ªå·±å•ç‹¬å»çš„ã€‚</p>
<h4 id="æ‹çˆ±"><a href="#æ‹çˆ±" class="headerlink" title="æ‹çˆ±"></a>æ‹çˆ±</h4><p>è¿™ä¸ªäº‹æƒ…è¿˜æ˜¯æ¯”è¾ƒå€¼å¾—é«˜å…´çš„ï¼Œä»Šå¹´æ‰¾äº†ä¸€ä¸ªå¥³æœ‹å‹ï¼Œå“ˆå“ˆå“ˆå“ˆ~</p>
<h3 id="2024å¹´æ–°è®¡åˆ’"><a href="#2024å¹´æ–°è®¡åˆ’" class="headerlink" title="2024å¹´æ–°è®¡åˆ’"></a>2024å¹´æ–°è®¡åˆ’</h3><h4 id="å·¥ä½œ-1"><a href="#å·¥ä½œ-1" class="headerlink" title="å·¥ä½œ"></a>å·¥ä½œ</h4><p>2023å¹´ä¸€å¹´çš„å·¥ä½œï¼Œå‘ç°è‡ªå·±è¿˜æ˜¯æœ‰å¾ˆå¤šçš„ä¸è¶³ï¼Œ2024å¹´è¦å¤šå­¦ä¹ ï¼Œå¼¥è¡¥å·¥ä½œä¸­çš„ä¸è¶³ã€‚</p>
<h4 id="é˜…è¯»"><a href="#é˜…è¯»" class="headerlink" title="é˜…è¯»"></a>é˜…è¯»</h4><p>æ— è®ºæŠ€æœ¯å¥½åï¼Œè¿˜æ˜¯è¦åšæŒé˜…è¯»ï¼Œç›®æ ‡æ˜¯ä¸ä½äº12æœ¬ä¹¦ç±çš„é˜…è¯»</p>
<h4 id="è¿åŠ¨-1"><a href="#è¿åŠ¨-1" class="headerlink" title="è¿åŠ¨"></a>è¿åŠ¨</h4><p>åšæŒæ¯å‘¨è¿åŠ¨ï¼Œå¸Œæœ›æ˜¯èƒ½å¤Ÿå°†è‡ªç”±æ³³ç»ƒå¥½(ç›®å‰åªä¼šè›™æ³³ï¼Œè‡ªç”±æ³³è¿˜ä¸å¤ªä¼š,æƒ³è¦æŠ¥ç­å­¦ä¹ )ã€‚æ¸¸æ³³è·ç¦»è¾¾åˆ°50å…¬é‡Œã€‚</p>
<h4 id="å…¶ä»–-1"><a href="#å…¶ä»–-1" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><p>å…¨æ¬¾ä¹°ä¸€è¾†è½¦ï¼Œä¸ä½äº20w</p>
]]></content>
  </entry>
  <entry>
    <title>1024 Programmer&#39;s Day, A Tribute to the Art of Coding</title>
    <url>/65bbb015en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Today is October 24th, Monday. I happened to see online that today is known as 1024 Programmerâ€™s Day.<br>Honestly, I was quite surprised; I didnâ€™t expect programmers to have their own holiday.</p>
<h3 id="The-Origin-of-Programmerâ€™s-Day"><a href="#The-Origin-of-Programmerâ€™s-Day" class="headerlink" title="The Origin of Programmerâ€™s Day"></a>The Origin of Programmerâ€™s Day</h3><p>Out of curiosity, I looked up the origin of Programmerâ€™s Day, and it turns out to be quite meaningful.<br>1024 is actually 2 to the power of 10, one of the fundamental units in binary counting, a number that programmers interact with daily.<br>Additionally, October 24th each year is â€œUnited Nations Dayâ€ (since 1947) and also World Development Information Day, which makes this day very memorable for programmers.</p>
<p>Now that I know, I wish all programmers around the world a Happy Programmerâ€™s Day, bug-free coding, and may your hair stay thick and lush!</p>
<h3 id="Messages-from-Renowned-Figures"><a href="#Messages-from-Renowned-Figures" class="headerlink" title="Messages from Renowned Figures"></a>Messages from Renowned Figures</h3><ul>
<li>Programmers should be artists, not just workers. The latter only stack code, while the former can create beautiful works. â€” Bjarne Stroustrup, Father of C++</li>
</ul>
]]></content>
      <categories>
        <category>Programming</category>
      </categories>
      <tags>
        <tag>1024 Programmer&#39;s Day</tag>
        <tag>Coding</tag>
        <tag>Holiday</tag>
        <tag>Tribute</tag>
      </tags>
  </entry>
  <entry>
    <title>cleanMyMacä¸­æ–‡ç ´è§£ç‰ˆ</title>
    <url>/fc44a28c.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>CleanMyMac Xä¸­æ–‡ç ´è§£ç‰ˆæ˜¯ä¸€æ¬¾macç³»ç»Ÿæ¸…ç†åƒåœ¾è½¯ä»¶ï¼ŒCleanMyMacå·²ç»å®Œæˆäº†å‘å…¨é¢æ¸…ç†ï¼Œä¼˜åŒ–å’Œç®¡ç†å·¥å…·çš„è½¬å˜ã€‚å®ƒçš„ç®—æ³•å’ŒåŠŸèƒ½å˜å¾—æ›´åŠ æ™ºèƒ½ï¼Œä½†å¤–è§‚ä»ç„¶åƒæ‚¨é¢„æœŸçš„é‚£æ ·ç®€å•ã€‚CleanMyMac Xä»¥æå…¶å¿«é€Ÿå’Œæ—¶å°šçš„æ–¹å¼ä¸ºæ‚¨æä¾›åŠæ—¶çš„å»ºè®®ï¼Œç»„ç»‡ï¼Œæ›´æ–°å’Œä¿æŠ¤æ‚¨çš„Macã€‚</p>
<img data-src="https://pic.imgdb.cn/item/664387de0ea9cb140356f0dc.jpg" alt="æ•ˆæœå›¾" />

<h3 id="åŠŸèƒ½åˆ—è¡¨"><a href="#åŠŸèƒ½åˆ—è¡¨" class="headerlink" title="åŠŸèƒ½åˆ—è¡¨"></a>åŠŸèƒ½åˆ—è¡¨</h3><img data-src="https://pic.imgdb.cn/item/664387ed0ea9cb140357126b.jpg" alt="æ•ˆæœå›¾" />

<h3 id="ä¸‹è½½åœ°å€"><a href="#ä¸‹è½½åœ°å€" class="headerlink" title="ä¸‹è½½åœ°å€"></a>ä¸‹è½½åœ°å€</h3><p>ç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šå®‰è£…æ•™ç¨‹ï¼Œä½†æ˜¯åŸºæœ¬éƒ½è¦æ¿€æ´»ç ï¼Œè€Œæ¿€æ´»ç ç›¸å¯¹æœ‰ç‚¹æ˜‚è´µã€‚æˆ–è€…æ˜¯æœ‰å…è´¹æ¿€æ´»çš„ï¼Œä½†æ˜¯æ“ä½œèµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚<br>è¿™é‡Œæ¨èä¸€æ¬¾<code>CleanMyMac Xä¸­æ–‡ç ´è§£ç‰ˆ</code>ä¸‹è½½å¿«æ·ï¼Œå®‰è£…æ–¹ä¾¿ï¼Œä¸€é”®å‚»ç“œå¼å®‰è£…ï¼Œåªè¦ä¼šåœ¨macbookå®‰è£…è½¯ä»¶å³å¯ä½¿ç”¨ã€‚</p>
<a href="https://k.youshop10.com/wSozMuCN" title="" target="">ä¸‹è½½åœ°å€,</a>
]]></content>
      <categories>
        <category>ç ´è§£è½¯ä»¶</category>
      </categories>
      <tags>
        <tag>ç ´è§£è½¯ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>Autodesk3dMaxç ´è§£ç‰ˆä¸‹è½½åŠæ±‰åŒ–</title>
    <url>/f028beb1.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p><a href="https://help.autodesk.com/view/3DSMAX/2024/CHS/?guid=GUID-2B24CF20-383F-48B7-955B-03D8AECCD3B9">Autodesk 3d Max ä½¿ç”¨æ•™ç¨‹:</a><br>ç ´è§£ç‰ˆä¸‹è½½ï¼Œå¾®ä¿¡å…³æ³¨â€œå†å²å›çœ¸â€ï¼Œå‘é€<code>3då»ºæ¨¡</code>è·å–èµ„æºé“¾æ¥ã€‚<br><img data-src="https://s1.ax1x.com/2023/05/08/p9wEfHJ.jpg" style="width:200px;height:200px" alt="" /></p>
<p>å®‰è£…çš„è½¯ä»¶æ˜¯è‹±æ–‡çš„ï¼Œä½†æ˜¯è¿™é‡Œçš„æ•™ç¨‹åˆæ˜¯ä¸­æ–‡çš„ï¼Œå¯¹äºè‹±æ–‡ä¸æ˜¯å¾ˆå¥½çš„æˆ‘æ¥è¯´ç¡®å®æœ‰ç‚¹ä¸ºéš¾ï¼Œäºæ˜¯ä¹å°±æƒ³ç€å°†è½¯ä»¶æ±‰åŒ–ã€‚<br>æ±‰åŒ–çš„æ–¹æ³•ä¹Ÿæ¯”è¾ƒç®€å•<br>ç‚¹ç”µè„‘æ¡Œé¢è½¯ä»¶å¿«æ·æ–¹å¼å›¾æ ‡ï¼Œè¿›å…¥â€œå±æ€§â€ç•Œé¢ï¼Œåœ¨â€œç›®æ ‡â€åé¢åŠ ä¸Š<code>ç©ºæ ¼/Luanguage=CHS</code>å³å¯ã€‚å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://s1.ax1x.com/2023/05/08/p9wE4E9.png" style="width:200px;height:400px" alt="" /><br>è®¾ç½®å®Œåå†æ‰“å¼€è½¯ä»¶ï¼Œè½¯ä»¶ä¸Šæ‰€æœ‰çš„æ˜¾ç¤ºå°±æ˜¯ä¸­æ–‡çš„å•¦~<br>å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://s1.ax1x.com/2023/05/08/p9wEI41.png" style="width:400px;height:350px" alt="" /></p>
]]></content>
      <categories>
        <category>Autodesk3dMax</category>
      </categories>
      <tags>
        <tag>Autodesk3dMax</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorä¹‹ç¿»é¡µå®¹å™¨ï¼ˆPageViewï¼‰å’Œæ»šåŠ¨å®¹å™¨ï¼ˆScrollViewï¼‰çš„è§¦æ‘¸å†²çªå¤„ç†</title>
    <url>/6803a9d8.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åœ¨å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ—¢èƒ½ç¿»é¡µåˆèƒ½ä¸Šä¸‹æ»‘åŠ¨çš„ç•Œé¢ï¼Œè¿™æ—¶å€™å°±ä¼šé‡åˆ°ç¿»é¡µå®¹å™¨å’Œæ»šåŠ¨å®¹å™¨è§¦æ‘¸å†²çªçš„æƒ…å†µã€‚ä»¥ä¸‹æ˜¯åšä¸»è¿™é‡Œçš„è§£å†³æ–¹æ³•ã€‚</p>
<p><code>ScrollView</code>å’Œ<code>PageView</code>å±‚çº§å…³ç³»å¦‚ä¸‹ï¼š<br><img data-src="https://s1.ax1x.com/2023/07/07/pCcG7lT.png" alt="" /><br>åœ¨ä¸åšä»»ä½•å¤„ç†å‰ï¼Œåœ¨<code>ScrollView</code>åŒºåŸŸï¼ˆä¸Šå›¾ç™½è‰²åŒºåŸŸï¼‰æ»‘åŠ¨ï¼Œ<code>ScrollView</code>å¯ä»¥æ­£å¸¸ä¸Šä¸‹æ»‘åŠ¨ï¼Œ<code>PageView</code>ä¸èƒ½å·¦å³æ»‘åŠ¨ï¼Œä½†æ˜¯<code>PageView</code>å¯ä»¥åœ¨ä¸Šå›¾ä¸­çº¢ä¸çº¢ã€ç²‰ä¸ç²‰çš„åŒºåŸŸå·¦å³æ»‘åŠ¨ã€‚æŸ¥äº†ä¸€ä¸‹ï¼Œæ˜¯å› ä¸ºä¸¤è€…çš„è§¦æ‘¸å†²çªäº†ã€‚<br>ä¸‹é¢æ˜¯æˆ‘çš„è§£å†³æ–¹æ³•ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">intiView</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_ScrollC_game</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_START</span>, <span class="variable language_">this</span>.<span class="property">touchStart</span>, <span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_ScrollC_game</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_MOVE</span>, <span class="variable language_">this</span>.<span class="property">touchMove</span>, <span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_ScrollC_game</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_END</span>, <span class="variable language_">this</span>.<span class="property">touchEnd</span>, <span class="variable language_">this</span>);       </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">touchStart</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">chuandi</span> = <span class="literal">true</span>; <span class="comment">//chuandi:æ˜¯å¦å¯ä»¥ä¼ é€’ï¼Œé»˜è®¤ä¸ºtrueï¼›</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å¼€å§‹&quot;</span>,event.<span class="title function_">getLocation</span>());</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">startPosition</span> = event.<span class="title function_">getLocation</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pageIdx</span> = <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_record</span>.<span class="title function_">getCurrentPageIndex</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">touchMove</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">chuandi</span> == <span class="literal">false</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">chuandi</span> = <span class="literal">true</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç§»åŠ¨ = &quot;</span>, event.<span class="title function_">getLocation</span>());</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">movePosition</span> = event.<span class="title function_">getLocation</span>();</span><br><span class="line">        <span class="keyword">let</span> distance_x = <span class="variable language_">this</span>.<span class="property">movePosition</span>.<span class="property">x</span> - <span class="variable language_">this</span>.<span class="property">startPosition</span>.<span class="property">x</span>;</span><br><span class="line">        <span class="keyword">let</span> distance_y = <span class="variable language_">this</span>.<span class="property">movePosition</span>.<span class="property">y</span> - <span class="variable language_">this</span>.<span class="property">startPosition</span>.<span class="property">y</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è·ç¦»å·®== &quot;</span>, distance_x, distance_y);</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦éœ€è¦ç¿»é¡µ</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(distance_x) &gt; <span class="number">50</span> &amp;&amp; distance_x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‘å‰ç¿»é¡µ&quot;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_record</span>.<span class="title function_">scrollToPage</span>(<span class="variable language_">this</span>.<span class="property">pageIdx</span> - <span class="number">1</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">chuandi</span> = <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(distance_x) &gt; <span class="number">50</span> &amp;&amp; distance_x &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‘åç¿»é¡µ&quot;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_record</span>.<span class="title function_">scrollToPage</span>(<span class="variable language_">this</span>.<span class="property">pageIdx</span> + <span class="number">1</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">chuandi</span> = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">touchEnd</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">endPosition</span> = event.<span class="title function_">getLocation</span>();</span><br><span class="line">        <span class="keyword">let</span> distance_x = <span class="variable language_">this</span>.<span class="property">endPosition</span>.<span class="property">x</span> - <span class="variable language_">this</span>.<span class="property">startPosition</span>.<span class="property">x</span>;</span><br><span class="line">        <span class="keyword">let</span> distance_y = <span class="variable language_">this</span>.<span class="property">endPosition</span>.<span class="property">y</span> - <span class="variable language_">this</span>.<span class="property">startPosition</span>.<span class="property">y</span>;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯ç‚¹å‡»</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(distance_y) &lt; <span class="number">50</span> &amp;&amp; <span class="title class_">Math</span>.<span class="title function_">abs</span>(distance_x) &lt; <span class="number">50</span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è§¦æ‘¸ç»“æŸï¼Œæ˜¯ç‚¹å‡»&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç»“æŸ1&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åå®ç°äº†æœŸæœ›æ•ˆæœ:</p>
<!-- ![](/img/gif/View.gif) -->
<img data-src="https://pic.imgdb.cn/item/64b2bbbd1ddac507ccd0891a.gif" alt="" />

]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
  </entry>
  <entry>
    <title>Cocos Creatorçº¹ç†ç¼“å­˜ä¸å›¾ç‰‡å¤§å°ä¸åŒçš„å¯èƒ½åŸå› </title>
    <url>/d1b0e98d.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åœ¨Cocos Creatoræ¸¸æˆå¼€å‘ä¸­ï¼Œçº¹ç†ç¼“å­˜å¤§å°ä¸å•ä¸ªå›¾ç‰‡å¤§å°ä¸ä¸€è‡´å¯èƒ½æ¶‰åŠåˆ°ä¸€äº›é¢å¤–çš„å¤„ç†å’Œä¼˜åŒ–ï¼Œä»¥æé«˜æ¸¸æˆæ€§èƒ½å’Œæ•ˆç‡ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½å¯¼è‡´è¿™ç§å·®å¼‚çš„åŸå› ï¼š</p>
<span id="more"></span>
<h3 id="å‹ç¼©ç®—æ³•"><a href="#å‹ç¼©ç®—æ³•" class="headerlink" title="å‹ç¼©ç®—æ³•"></a>å‹ç¼©ç®—æ³•</h3><p>æ¸¸æˆå¼•æ“é€šå¸¸ä¼šä½¿ç”¨ä¸åŒçš„å‹ç¼©ç®—æ³•æ¥å‡å°çº¹ç†çš„å†…å­˜å ç”¨ã€‚è¿™åŒ…æ‹¬å„ç§çº¹ç†å‹ç¼©æŠ€æœ¯ï¼Œå¦‚ETCã€PVRTCã€ASTCç­‰ã€‚è¿™äº›ç®—æ³•åœ¨å‡å°çº¹ç†å ç”¨å†…å­˜çš„åŒæ—¶ï¼Œä¿æŒè¾ƒé«˜çš„è´¨é‡ã€‚</p>
<h3 id="Mipmap"><a href="#Mipmap" class="headerlink" title="Mipmap"></a>Mipmap</h3><p>å¼•æ“å¯èƒ½ä¼šç”Ÿæˆçº¹ç†çš„Mipmapï¼Œå³åŸå§‹çº¹ç†çš„ä¸åŒåˆ†è¾¨ç‡ç‰ˆæœ¬ã€‚Mipmapå¯ä»¥æé«˜æ¸²æŸ“æ•ˆæœï¼Œä½†ä¼šå¢åŠ çº¹ç†å ç”¨çš„å†…å­˜ã€‚</p>
<h3 id="çº¹ç†æ ¼å¼"><a href="#çº¹ç†æ ¼å¼" class="headerlink" title="çº¹ç†æ ¼å¼"></a>çº¹ç†æ ¼å¼</h3><p>å¼•æ“å¯èƒ½ä¼šä½¿ç”¨ä¸åŒçš„çº¹ç†æ ¼å¼ï¼Œä¾‹å¦‚RGBA8888ã€RGB565ç­‰ã€‚è¿™äº›æ ¼å¼åœ¨å­˜å‚¨å’Œæ¸²æŸ“æ—¶éƒ½æœ‰ä¸åŒçš„å†…å­˜å ç”¨ã€‚</p>
<h3 id="åŠ¨æ€åˆæ‰¹"><a href="#åŠ¨æ€åˆæ‰¹" class="headerlink" title="åŠ¨æ€åˆæ‰¹"></a>åŠ¨æ€åˆæ‰¹</h3><p>Cocos Creatorå¯èƒ½ä¼šå¯¹çº¹ç†è¿›è¡ŒåŠ¨æ€åˆæ‰¹ï¼Œå°†å¤šä¸ªå°çº¹ç†åˆå¹¶æˆä¸€ä¸ªå¤§çš„çº¹ç†é›†ï¼Œä»¥å‡å°‘æ¸²æŸ“è°ƒç”¨å’Œæé«˜æ€§èƒ½ã€‚è¿™å¯èƒ½å¯¼è‡´çº¹ç†ç¼“å­˜çš„å¤§å°ä¸å•ä¸ªå›¾ç‰‡çš„å¤§å°ä¸åŒã€‚</p>
<p>è¦æŸ¥çœ‹çº¹ç†ç¼“å­˜çš„å®é™…å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨å¼€å‘è€…å·¥å…·æˆ–å¼•æ“æä¾›çš„æ€§èƒ½åˆ†æå·¥å…·ã€‚è¿™æ ·å¯ä»¥æ›´è¯¦ç»†åœ°äº†è§£å¼•æ“æ˜¯å¦‚ä½•å¤„ç†çº¹ç†çš„ï¼Œå¹¶æ‰¾åˆ°å¯èƒ½çš„ä¼˜åŒ–æ–¹æ³•ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œè¿™äº›åªæ˜¯å¯èƒ½çš„åŸå› ä¹‹ä¸€ï¼Œå…·ä½“æƒ…å†µå¯èƒ½ä¼šå› å¼•æ“ç‰ˆæœ¬ã€å¹³å°å’Œé¡¹ç›®è®¾ç½®è€Œå¼‚ã€‚å¦‚æœæœ‰ç‰¹å®šçš„é—®é¢˜ï¼Œå»ºè®®æŸ¥é˜…Cocos Creatorçš„å®˜æ–¹æ–‡æ¡£æˆ–åœ¨ç›¸å…³çš„ç¤¾åŒºè®ºå›ä¸Šå’¨è¯¢ã€‚</p>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>çº¹ç†ä¼˜åŒ–</tag>
        <tag>æ¸¸æˆæ€§èƒ½</tag>
      </tags>
  </entry>
  <entry>
    <title>Cannot read properties of null (reading &#39;getGFXTexture&#39;)</title>
    <url>/db08b38f.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>æœ€è¿‘åœ¨æµè§ˆå™¨ä¸Šè¿è¡ŒCocos Creatorå·¥ç¨‹æ—¶ï¼Œæ€»æ˜¯æç¤ºè¿™ä¸ªé”™è¯¯<code>Cannot read properties of null (reading &#39;getGFXTexture&#39;)</code>,å¦‚ä¸‹å›¾ï¼š</p>
<img data-src="https://s11.ax1x.com/2024/01/30/pFKDIqs.png" alt="" />

<h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><p>å›¾ç‰‡çº¹ç†è¢«æ¸…ç©ºæ‰€å¯¼è‡´ï¼Œè‡ªå·±åœ¨ç½‘ä¸Šæ‰¾çš„ç­”æ¡ˆ</p>
<h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>è¿™é‡Œç®€å•è¯´ä¸‹æˆ‘è‡ªå·±çš„è§£å†³æ–¹æ¡ˆã€‚<br>1ã€vsCodeæ‰“å¼€Cocosçš„æºç è°ƒè¯•åŠŸèƒ½(æŠ¥è¿™ä¸ªé”™çš„æ—¶å€™vscodeä¼šæœ‰æç¤ºï¼Œæˆ–è€…è‡ªå·±ç™¾åº¦)<br>2ã€æŸ¥çœ‹å †æ ˆï¼Œå®šä½åˆ°è¿™ä¸ªåœ°æ–¹ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/6643274b0ea9cb14038e966b.png" alt="" /></p>
<p>3.1 åœ¨Cocos Creatorä¸­æ–‡ç¤¾åŒºé‡Œæœ‰äººå›ç­”äº†ä¸€ç§æ–¹æ³•ï¼Œå°†è¿™é‡Œ <code>if(frame)</code> çš„åˆ¤æ–­æ”¹ä¸º<code>if(frame &amp;&amp; frame.isVaild)</code>ï¼Œæˆ‘è¯•äº†ä¸‹è¿™ä¸ªæ–¹æ³•ï¼Œå¥½åƒæ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå³ä½¿æœ‰ç”¨çš„è¯ä¹Ÿåªæ˜¯é˜»æ­¢æŠ¥é”™ï¼Œä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ï¼ˆåé¢ä¸€å¥æ˜¯è‡ªå·±çš„è§è§£ï¼Œå¦‚æœæœ‰è¯¯ï¼Œè¿˜è¯·è°…è§£ï¼‰ã€‚</p>
<p>è¿™é‡Œä»‹ç»æˆ‘çš„æ–¹æ³•ï¼š<br>è¿˜æ˜¯ä¸€æ ·æ–­ç‚¹åˆ°è¿™ä¸ªåœ°æ–¹ï¼Œåƒä¸‡åˆ«æƒ³ç€æ‰“æ—¥å¿—ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯åªè¯»æ–‡ä»¶ã€‚ç„¶åæŸ¥çœ‹<code>frame</code>çš„å€¼ï¼Œè¿™ä¸ª<code>frame</code>å°±æ˜¯ä½ è¦åŠ è½½çš„é‚£ä¸ª<code>SpriteFrame</code>ï¼Œè¿™é‡Œé¢æœ‰ä¸ªå‚æ•°<code>uuid</code>ã€‚å¤åˆ¶<code>uuid</code>ç„¶ååœ¨Cocos Creatorçš„èµ„æºç®¡ç†å™¨ä¸­ç›´æ¥æœç´¢ï¼Œçœ‹æ˜¯å“ªå¼ å›¾ç‰‡çš„çº¹ç†è¢«æ¸…ç©ºäº†ã€‚<br><img data-src="https://pic.imgdb.cn/item/664327760ea9cb14038eceba.png" alt="" /></p>
<p>æ‰¾åˆ°è¿™å¼ å›¾ç‰‡åï¼Œç‚¹å‡»å³é”®ï¼Œé€‰æ‹©<code>æŸ¥æ‰¾UUIDçš„ä½¿ç”¨</code>ï¼Œå°±å¯ä»¥çŸ¥é“æœ‰å“ªäº›åœ°æ–¹å¼•ç”¨äº†è¿™å¼ å›¾ç‰‡ï¼Œç„¶åæ ¹æ®å¼•ç”¨å»æŸ¥çœ‹ï¼Œå°±å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜å•¦~</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Cocos Creatorä¸­ç›‘å¬è¾“å…¥æ¡†çš„è¾“å…¥äº‹ä»¶</title>
    <url>/3344996d.html</url>
    <content><![CDATA[<p>åœ¨ Cocos Creator ä¸­ï¼Œè¦ç›‘å¬è¾“å…¥æ¡†çš„è¾“å…¥äº‹ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>EditBox</code> ç»„ä»¶æä¾›çš„å›è°ƒå‡½æ•°ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•åœ¨ç”¨æˆ·è¾“å…¥æ—¶ç›‘å¬ <code>EditBox</code> äº‹ä»¶ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">-- ç”¨äºç›‘å¬è¾“å…¥æ¡†äº‹ä»¶çš„ç¤ºä¾‹è„šæœ¬</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = cc.<span class="property">_decorator</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ccclass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YourComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">cc.Component</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@property</span>(cc.<span class="property">EditBox</span>)</span><br><span class="line">    <span class="attr">yourEditBox</span>: cc.<span class="property">EditBox</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// ç›‘å¬è¾“å…¥æ¡†çš„è¾“å…¥äº‹ä»¶</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">yourEditBox</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="string">&#x27;editing-did-began&#x27;</span>, <span class="variable language_">this</span>.<span class="property">onEditingDidBegan</span>, <span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">yourEditBox</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="string">&#x27;text-changed&#x27;</span>, <span class="variable language_">this</span>.<span class="property">onTextChanged</span>, <span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">yourEditBox</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="string">&#x27;editing-did-ended&#x27;</span>, <span class="variable language_">this</span>.<span class="property">onEditingDidEnded</span>, <span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onEditingDidBegan</span>(<span class="params"></span>) &#123;</span><br><span class="line">        cc.<span class="title function_">log</span>(<span class="string">&#x27;ç”¨æˆ·å¼€å§‹è¾“å…¥&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onTextChanged</span>(<span class="params"></span>) &#123;</span><br><span class="line">        cc.<span class="title function_">log</span>(<span class="string">&#x27;ç”¨æˆ·è¾“å…¥å†…å®¹å‘ç”Ÿå˜åŒ–&#x27;</span>, <span class="variable language_">this</span>.<span class="property">yourEditBox</span>.<span class="property">string</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onEditingDidEnded</span>(<span class="params"></span>) &#123;</span><br><span class="line">        cc.<span class="title function_">log</span>(<span class="string">&#x27;ç”¨æˆ·ç»“æŸè¾“å…¥&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸‰ä¸ªäº‹ä»¶ï¼š</p>
<p><code>editing-did-began</code>ï¼šå½“ç”¨æˆ·å¼€å§‹åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ—¶è§¦å‘ã€‚<br><code>text-changed</code>ï¼šå½“è¾“å…¥æ¡†çš„æ–‡æœ¬å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ã€‚<br><code>editing-did-ended</code>ï¼šå½“ç”¨æˆ·ç»“æŸåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ—¶è§¦å‘ã€‚<br>ä½ å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä½¿ç”¨è¿™äº›äº‹ä»¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªã€‚åœ¨æ¯ä¸ªäº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸­ï¼Œä½ å¯ä»¥æ‰§è¡Œä½ å¸Œæœ›è¿›è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚æ›´æ–° UIã€éªŒè¯è¾“å…¥ç­‰ã€‚</p>
<p>ç¡®ä¿åœ¨é€‚å½“çš„æ—¶æœºï¼ˆä¾‹å¦‚ onLoad å‡½æ•°ä¸­ï¼‰æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶æœºï¼ˆä¾‹å¦‚ç»„ä»¶é”€æ¯æ—¶ï¼‰ç§»é™¤äº‹ä»¶ç›‘å¬å™¨ï¼Œä»¥é¿å…æ½œåœ¨çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚</p>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo Nextä¸»é¢˜ç¾åŒ–å½’æ¡£é¡µ</title>
    <url>/5391295.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>hexoé™æ€åšå®¢å½’æ¡£é¡µç¾åŒ–åå¦‚ä¸‹<br><img data-src="https://s1.ax1x.com/2022/11/03/xqsc7T.jpg" art="æ•ˆæœå›¾"/></p>
<span id="more"></span>
<p>ç”±äºç¬”è€…ä½¿ç”¨çš„æ˜¯nextä¸»é¢˜æœ€æ–°ç‰ˆæœ¬ï¼Œæ‰€ä»¥ç½‘ä¸Šå¾ˆå¤šæ–¹æ³•éƒ½æ²¡æœ‰è¡Œé€šã€‚äºæ˜¯ä¾¿è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿ä½œè€…è‡ªå·±ï¼Œä¹Ÿæ–¹ä¾¿å’Œæˆ‘æœ‰åŒæ ·é—®é¢˜çš„æœ‹å‹ã€‚<br><a href="https://lengmo714.top/archives/" class="æ¼”ç¤ºåœ°å€">Demo</a></p>
<h3 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h3><p>åœ¨<code>blog/themes/next/layout/_macro/ </code>ä¸‹æ–°å»ºæ–‡ä»¶<code>post-collapse.swig</code>å¹¶å¤åˆ¶ä¸€ä¸‹å†…å®¹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;% macro <span class="title function_">render</span>(posts) %&#125;</span><br><span class="line">&#123;%- set current_year = <span class="string">&#x27;1970&#x27;</span> %&#125;</span><br><span class="line">&#123;%- <span class="keyword">for</span> post <span class="keyword">in</span> posts.<span class="title function_">toArray</span>() %&#125;</span><br><span class="line"></span><br><span class="line">  &#123;%- set year = <span class="title function_">date</span>(post.<span class="property">date</span>, <span class="string">&#x27;YYYY&#x27;</span>) %&#125;</span><br><span class="line"></span><br><span class="line">  &#123;%- <span class="keyword">if</span> year !== current_year %&#125;</span><br><span class="line">    &#123;%- set current_year = year %&#125;</span><br><span class="line">    &lt;div <span class="keyword">class</span>=<span class="string">&quot;collection-year&quot;</span>&gt;</span><br><span class="line">      &lt;&#123;%- <span class="keyword">if</span> theme.<span class="property">seo</span> %&#125;h2&#123;% <span class="keyword">else</span> %&#125;h1&#123;%- endif %&#125; <span class="keyword">class</span>=<span class="string">&quot;collection-header&quot;</span>&gt;&#123;&#123; current_year &#125;&#125;&lt;/&#123;%- <span class="keyword">if</span> theme.<span class="property">seo</span> %&#125;h2&#123;% <span class="keyword">else</span> %&#125;h1&#123;%- endif %&#125;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">  &lt;article <span class="keyword">class</span>=<span class="string">&quot;my-post post-type-&#123;&#123; post.type | default(&#x27;normal&#x27;) &#125;&#125;&quot;</span> itemscope itemtype=<span class="string">&quot;http://schema.org/Article&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">&quot;my-post-header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;my-post-meta&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">time</span> <span class="attr">class</span>=<span class="string">&quot;my-post-time&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;dateCreated&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">datetime</span>=<span class="string">&quot;&#123;&#123; moment(post.date).format() &#125;&#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">content</span>=<span class="string">&quot;&#123;&#123; date(post.date, config.date_format) &#125;&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;&#123; date(post.date, &#x27;MM-DD&#x27;) &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">time</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &lt;&#123;%- if theme.seo %&#125;h3&#123;% else %&#125;h2&#123;%- endif %&#125; class=&quot;my-post-title&quot;&gt;</span></span><br><span class="line"><span class="language-xml">        &#123;%- if post.link %&#125;&#123;# Link posts #&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;my-post-title-link post-title-link-external&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(post.link) &#125;&#125;&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;url&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;&#123; post.title or post.link &#125;&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-external-link&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;% else %&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;my-post-title-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(post.path) &#125;&#125;&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;url&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;% if post.type === &#x27;picture&#x27; %&#125;</span></span><br><span class="line"><span class="language-xml">              &#123;&#123; post.content &#125;&#125;</span></span><br><span class="line"><span class="language-xml">            &#123;% else %&#125;</span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">itemprop</span>=<span class="string">&quot;name&quot;</span>&gt;</span>&#123;&#123; post.title or __(&#x27;post.untitled&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;% endif %&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;%- endif %&#125;</span></span><br><span class="line"><span class="language-xml">      &lt;/&#123;%- if theme.seo %&#125;h3&#123;% else %&#125;h2&#123;%- endif %&#125;&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line">  &lt;/article&gt;</span><br><span class="line"></span><br><span class="line">&#123;%- endfor %&#125;</span><br><span class="line">&#123;% endmacro %&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h3><p>å¤åˆ¶ä¸‹é¢å†…å®¹ï¼Œç²˜è´´åˆ°ä½ æ‰€ç”¨ä¸»é¢˜çš„<code>index.styl</code>åé¢</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å½’æ¡£é¡µæ ·å¼ began */</span></span><br><span class="line">.<span class="property">page</span>-archive .<span class="property">archive</span>-page-counter &#123;</span><br><span class="line">  font-<span class="attr">size</span>: 18px;</span><br><span class="line">  background-<span class="attr">color</span>: #49b1f5;</span><br><span class="line">  padding-<span class="attr">left</span>: 10px;</span><br><span class="line">  padding-<span class="attr">right</span>: 10px;</span><br><span class="line">  border-<span class="attr">radius</span>: 8px;</span><br><span class="line">  <span class="attr">color</span>: #fff;</span><br><span class="line">  +<span class="title function_">mobile</span>(<span class="params"></span>) &#123;</span><br><span class="line">    font-<span class="attr">size</span>: 16px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">my</span>-post-time&#123;</span><br><span class="line">  font-<span class="attr">size</span>: 11px;</span><br><span class="line">  <span class="attr">position</span>: absolute;</span><br><span class="line">  <span class="attr">color</span>: #fff;</span><br><span class="line">  background-<span class="attr">color</span>: #49b1f5;</span><br><span class="line">  border-<span class="attr">radius</span>: 5px;</span><br><span class="line">  padding-<span class="attr">left</span>: 5px;</span><br><span class="line">  padding-<span class="attr">right</span>: 5px;</span><br><span class="line">  margin-<span class="attr">left</span>: 15px;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">mypost</span>&#123;</span><br><span class="line">  <span class="attr">position</span>: relative;</span><br><span class="line">  margin-<span class="attr">bottom</span>: 1rem;</span><br><span class="line">  -webkit-<span class="attr">transition</span>: all .2s ease-<span class="keyword">in</span>-out;</span><br><span class="line">  -moz-<span class="attr">transition</span>: all .2s ease-<span class="keyword">in</span>-out;</span><br><span class="line">  -o-<span class="attr">transition</span>: all .2s ease-<span class="keyword">in</span>-out;</span><br><span class="line">  -ms-<span class="attr">transition</span>: all .2s ease-<span class="keyword">in</span>-out;</span><br><span class="line">  <span class="attr">transition</span>: all .2s ease-<span class="keyword">in</span>-out;</span><br><span class="line">&#125;</span><br><span class="line">a.<span class="property">my</span>-post-title-<span class="attr">link</span>:before&#123;</span><br><span class="line">  <span class="attr">top</span>: 10px;</span><br><span class="line">  <span class="attr">width</span>: 18px;</span><br><span class="line">  <span class="attr">height</span>: 18px;</span><br><span class="line">  <span class="attr">content</span>: <span class="string">&quot;ğŸ“š&quot;</span>;</span><br><span class="line">  margin-<span class="attr">right</span>: 5px;</span><br><span class="line">  <span class="attr">font</span>: normal normal normal 14px/<span class="number">1</span> <span class="title class_">FontAwesome</span>;</span><br><span class="line">  font-<span class="attr">size</span>: 15px;</span><br><span class="line">  line-<span class="attr">height</span>: 18px;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">my</span>-<span class="attr">post</span>:hover&#123;</span><br><span class="line">  <span class="attr">transform</span>: <span class="title function_">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  box-<span class="attr">shadow</span>: 10px 10px 15px 2px <span class="title function_">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">.12</span>), <span class="number">0</span> <span class="number">0</span> 6px <span class="number">0</span> <span class="title function_">rgba</span>(<span class="number">104</span>, <span class="number">104</span>, <span class="number">105</span>, <span class="number">0.1</span>);</span><br><span class="line">  border-<span class="attr">radius</span>: 30px;</span><br><span class="line">  <span class="attr">width</span>: 400px;</span><br><span class="line">  <span class="attr">padding</span>: 1px 10px;</span><br><span class="line">  margin-<span class="attr">left</span>: 25px;</span><br><span class="line">  font-<span class="attr">size</span>: 16px;</span><br><span class="line">  transition-<span class="attr">duration</span>: <span class="number">0.</span>15s;</span><br><span class="line">  +<span class="title function_">mobile</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="attr">width</span>: 260px;</span><br><span class="line">    margin-<span class="attr">left</span>: 18px;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//display:flex;</span></span><br><span class="line">&#125;</span><br><span class="line">a.<span class="property">my</span>-post-title-link&#123;</span><br><span class="line">  text-<span class="attr">decoration</span>: none;</span><br><span class="line">  font-<span class="attr">size</span>: 15px;</span><br><span class="line">  font-<span class="attr">weight</span>: <span class="number">400</span>;</span><br><span class="line">  +<span class="title function_">mobile</span>(<span class="params"></span>) &#123;</span><br><span class="line">    font-<span class="attr">size</span>: 14px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">my</span>-post-title&#123;</span><br><span class="line">  <span class="attr">display</span>: block;</span><br><span class="line">  margin-<span class="attr">left</span>: <span class="number">4.</span>5rem;</span><br><span class="line">  <span class="attr">color</span>: #4c4948;</span><br><span class="line">  text-<span class="attr">decoration</span>: none;</span><br><span class="line">  font-<span class="attr">size</span>: .8rem;</span><br><span class="line">  <span class="attr">cursor</span>: pointer;</span><br><span class="line">  +<span class="title function_">mobile</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//margin-left: 4rem;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">my</span>-post-header&#123;</span><br><span class="line">  <span class="attr">position</span>: top;</span><br><span class="line">  margin-<span class="attr">bottom</span>: 1rem;</span><br><span class="line">  -webkit-<span class="attr">transition</span>: all .2s ease-<span class="keyword">in</span>-out;</span><br><span class="line">  -moz-<span class="attr">transition</span>: all .2s ease-<span class="keyword">in</span>-out;</span><br><span class="line">  -o-<span class="attr">transition</span>: all .2s ease-<span class="keyword">in</span>-out;</span><br><span class="line">  -ms-<span class="attr">transition</span>: all .2s ease-<span class="keyword">in</span>-out;</span><br><span class="line">  <span class="attr">transition</span>: all .2s ease-<span class="keyword">in</span>-out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//.my-post-title-link&#123;</span></span><br><span class="line"><span class="comment">//  font-size: 16px;</span></span><br><span class="line"><span class="comment">//  font-weight: 500;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line">.<span class="property">my</span>-post-meta&#123;</span><br><span class="line">  <span class="attr">position</span>: absolute;</span><br><span class="line">  <span class="attr">color</span>: #99a9bf;</span><br><span class="line">  <span class="attr">width</span>: 80px;</span><br><span class="line">  <span class="attr">color</span>: #<span class="number">114142</span>;</span><br><span class="line">&#125;</span><br><span class="line">div.<span class="property">post</span>-block.<span class="property">tag</span> .<span class="property">collection</span>-title h2 &#123;</span><br><span class="line">  border-<span class="attr">width</span>: 1px;</span><br><span class="line">  border-<span class="attr">style</span>: solid;</span><br><span class="line">  border-<span class="attr">color</span>: #3f3f3f;</span><br><span class="line">  border-<span class="attr">radius</span>: 20px;</span><br><span class="line">  font-<span class="attr">size</span>: 22px;</span><br><span class="line">  background-<span class="attr">color</span>: #b4e8fa;</span><br><span class="line">  <span class="attr">padding</span>: 2px 15px;</span><br><span class="line">  letter-<span class="attr">spacing</span>: <span class="number">1.</span>5px;</span><br><span class="line">  box-<span class="attr">sizing</span>: border-box;</span><br><span class="line">  <span class="attr">color</span>: #3f3f3f;</span><br><span class="line">  <span class="attr">display</span>: inline-block;</span><br><span class="line">  <span class="attr">margin</span>: 10px <span class="number">0</span> 10px;</span><br><span class="line">  text-<span class="attr">align</span>: center;</span><br><span class="line">  +<span class="title function_">mobile</span>(<span class="params"></span>)&#123;</span><br><span class="line">    font-<span class="attr">size</span>: 18px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å½’æ¡£é¡µæ ·å¼ end */</span></span><br></pre></td></tr></table></figure>
<p>ç²˜è´´æ–‡ä»¶è·¯å¾„å¦‚å›¾</p>
<img data-src="https://s1.ax1x.com/2022/11/03/xqs6BV.jpg" art="ç¤ºæ„å›¾" />

<h3 id="ä¿®æ”¹æ–‡ä»¶"><a href="#ä¿®æ”¹æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶"></a>ä¿®æ”¹æ–‡ä»¶</h3><p>å‰ä¸¤æ­¥å¯èƒ½ç½‘ä¸Šå¾ˆå¤šæ–‡ç« éƒ½æåˆ°è¿‡ï¼Œä½œè€…ä¹ŸæŒ‰ç…§å…¶æ–¹æ³•è¯•äº†å¾ˆå¤šæ¬¡éƒ½æ²¡æœ‰æˆåŠŸã€‚è¿™é‡Œä½œè€…å†™ä¸‹è‡ªå·±æ‰€æ”¹åŠ¨çš„åœ°æ–¹<br>æ‰“å¼€<code>blog/themes/next/layout/archive.njk</code><br>å°†é‡Œé¢ç¬¬äºŒè¡Œæ‰€å¼•ç”¨çš„<code>_macro/post-collapse.njk</code>æ”¹ä¸º<code>_macro/post-collapse.swig</code>å³å¯<br><img data-src="https://s1.ax1x.com/2022/11/03/xqs2AU.jpg" art="ç¤ºæ„å›¾" /></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
  </entry>
  <entry>
    <title>CleanMyMac Chinese Cracked Version</title>
    <url>/fc44a28cen.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>CleanMyMac X Chinese cracked version is a Mac system cleanup software. CleanMyMac has transitioned into a comprehensive cleaning, optimization, and management tool. Its algorithms and features have become smarter, but the interface remains as simple as youâ€™d expect. CleanMyMac X provides timely suggestions, organizes, updates, and protects your Mac in a highly fast and stylish way.</p>
<img data-src="https://pic.imgdb.cn/item/664387de0ea9cb140356f0dc.jpg" alt="Effect Image" />

<h3 id="Feature-List"><a href="#Feature-List" class="headerlink" title="Feature List"></a>Feature List</h3><img data-src="https://pic.imgdb.cn/item/664387ed0ea9cb140357126b.jpg" alt="Effect Image" />

<h3 id="Download-Link"><a href="#Download-Link" class="headerlink" title="Download Link"></a>Download Link</h3><p>There are many installation tutorials online, but most require an activation code, which can be relatively expensive. Alternatively, there are free activation methods, but the process can be quite troublesome.<br>Here, I recommend a <code>CleanMyMac X Chinese cracked version</code> which is quick to download, easy to install, and features a one-click foolproof installation. If you can install software on a MacBook, you can use this.</p>
<a href="https://k.youshop10.com/wSozMuCN" title="" target="">Download Link,</a>
]]></content>
      <categories>
        <category>Cracked Software</category>
      </categories>
      <tags>
        <tag>Cracked Software</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè¿ç»­æ•™ç¨‹ä¹‹Cè¯­è¨€APIæ€»è§ˆ</title>
    <url>/21185.html</url>
    <content><![CDATA[<p>Luaæ˜¯ä¸€ç§åµŒå…¥å¼è¯­è¨€ï¼Œè¿™å°±æ„å‘³ç€Luaå¹¶ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„åº”ç”¨ï¼Œè€Œæ˜¯ä¸€ä¸ªåº“ï¼Œå®ƒå¯ä»¥é“¾æ¥åˆ°å…¶ä»–åº”ç”¨ç¨‹åºï¼Œå°†Luaçš„åŠŸèƒ½èå…¥è¿™äº›åº”ç”¨ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å› ä¸ºèƒ½å¤Ÿå½“ä½œåº“æ¥æ‰©å±•æŸä¸ªåº”ç”¨ç¨‹åºï¼Œæ‰€ä»¥Luaæ˜¯ä¸€ç§åµŒå…¥å¼è¯­è¨€ã€‚åŒæ—¶ï¼Œä½¿ç”¨äº†Luaè¯­è¨€çš„ç¨‹åºä¹Ÿå¯ä»¥åœ¨Luaç¯å¢ƒä¸­æ³¨å†Œæ–°çš„å‡½æ•°ï¼Œæ¯”å¦‚ç”¨Cè¯­è¨€å®ç°å‡½æ•°ï¼Œä»è€Œå¢åŠ ä¸€äº›æ— æ³•ç›´æ¥ç”¨Luaè¯­è¨€ç¼–å†™çš„åŠŸèƒ½ã€‚å› æ­¤Luaä¹Ÿæ˜¯ä¸€ç§å¯æ‰©å±•çš„è¯­è¨€ã€‚<br>ä¸Šè¿°ä¸¤ç§å¯¹Luaè¯­è¨€çš„å®šä½åˆ†åˆ«å¯¹åº”Cè¯­è¨€å’ŒLuaè¯­è¨€ä¹‹é—´çš„ä¸¤ç§äº¤äº’å½¢å¼ã€‚åœ¨ç¬¬ä¸€ç§å½¢å¼ä¸­ï¼ŒCè¯­è¨€æ‹¥æœ‰æ§åˆ¶æƒï¼Œè€ŒLuaè¯­è¨€è¢«ç”¨ä½œåº“ï¼Œè¿™ç§äº¤äº’å½¢å¼ä¸­çš„Cä»£ç è¢«ç§°ä¸ºåº”ç”¨ä»£ç ã€‚åœ¨ç¬¬äºŒç§å½¢å¼ä¸­ï¼ŒLuaè¯­è¨€æ‹¥æœ‰æ§åˆ¶æƒï¼Œè€ŒCè¯­è¨€è¢«ç”¨ä½œåº“ï¼Œæ­¤æ—¶çš„Cä»£ç è¢«ç§°ä¸ºåº“ä»£ç ã€‚åº”ç”¨ä»£ç å’Œåº“ä»£ç éƒ½é€‚ç”¨ç›¸åŒçš„APIä¸Luaè¯­è¨€é€šä¿¡ï¼Œè¿™äº›APIè¢«ç§°ä¸ºC APIã€‚<br>C APIæ˜¯ä¸€ä¸ªå‡½æ•°ã€å¸¸é‡å’Œç±»å‹ç»„æˆçš„é›†åˆï¼Œæœ‰äº†å®ƒï¼ŒCè¯­è¨€ä»£ç å°±èƒ½ä¸Luaè¯­è¨€äº¤äº’ã€‚C APIåŒ…æ‹¬è¯»å†™Luaå…¨å±€å˜é‡çš„å‡½æ•°ã€è°ƒç”¨Luaå‡½æ•°çš„å‡½æ•°ã€è¿è¡ŒLuaä»£ç æ®µçš„å‡½æ•°ï¼Œä»¥åŠæ³¨å†ŒCå‡½æ•°çš„å‡½æ•°ç­‰ã€‚é€šè¿‡è°ƒç”¨CAPIï¼ŒCä»£ç å‡ ä¹å¯ä»¥åšLuaä»£ç èƒ½å¤Ÿåšçš„æ‰€æœ‰äº‹æƒ…ã€‚<br>CAPIéµå¾ªCè¯­è¨€çš„æ“ä½œæ¨¡å¼ï¼Œä¸Luaçš„æ“ä½œæ¨¡å¼ç”±å¾ˆå¤§çš„åŒºåˆ«ã€‚åœ¨ä½¿ç”¨Cè¯­è¨€ç¼–ç¨‹æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æ³¨æ„ç±»å‹æ£€æŸ¥ã€é”™è¯¯æ¢å¤ã€å†…å­˜åˆ†é…é”™è¯¯å’Œå…¶ä»–ä¸€äº›å¤æ‚çš„æ¦‚å¿µã€‚CAPIä¸­çš„å¤§å¤šæ•°å‡½æ•°éƒ½ä¸ä¼šæ£€æŸ¥å…¶å‚æ•°çš„æ­£ç¡®æ€§ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨è°ƒç”¨å‡½æ•°å‰ç¡®ä¿å‚æ•°çš„åˆæ³•æ€§ï¼Œä¸€æ—¦å‡ºé”™ï¼Œç¨‹åºä¼šç›´æ¥å´©æºƒè€Œä¸ä¼šæ”¶åˆ°è§„èŒƒçš„é”™è¯¯ä¿¡æ¯ã€‚æ­¤å¤–ï¼ŒCAPIå¼ºè°ƒçš„æ˜¯çµæ´»æ€§å’Œç®€æ´æ€§ï¼ŒæŸäº›æƒ…å†µä¸‹ä¼šä»¥ç‰ºç‰²æ˜“ç”¨æ€§ä¸ºä»£ä»·ï¼Œå³ä¾¿æ˜¯å¸¸è§çš„éœ€æ±‚ï¼Œä¹Ÿå¯èƒ½éœ€è¦è°ƒç”¨å¥½å‡ ä¸ªAPIã€‚è¿™ä¹ˆåšè™½ç„¶æœ‰äº›ç¹çï¼Œä½†æˆ‘ä»¬å´å¯ä»¥å®Œå…¨æ§åˆ¶æ‰€æœ‰ç»†èŠ‚ã€‚</p>
<h2 id="ç¬¬ä¸€ä¸ªç¤ºä¾‹"><a href="#ç¬¬ä¸€ä¸ªç¤ºä¾‹" class="headerlink" title="ç¬¬ä¸€ä¸ªç¤ºä¾‹"></a>ç¬¬ä¸€ä¸ªç¤ºä¾‹</h2><p>é¦–å…ˆæ¥å­¦ä¹ ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºçš„ä¾‹å­ï¼šä¸€ä¸ªç‹¬ç«‹çš„è§£é‡Šå™¨ã€‚</p>
<blockquote>
<p>ä¸€ä¸ªç®€å•åœ°é¢ç‹¬ç«‹è§£é‡Šå™¨</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;lua.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;luaxlib.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;lualib.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">	<span class="type">char</span> buff[<span class="number">256</span>];</span><br><span class="line">	<span class="type">int</span> error;</span><br><span class="line">	lua_State *L = luaL_newstate();     <span class="comment">/*æ‰“å¼€Lua*/</span></span><br><span class="line">	luaL_openlibs(L);				<span class="comment">/*æ‰“å¼€æ ‡å‡†åº“*/</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (fgets(buff,<span class="keyword">sizeof</span>(buff),<span class="built_in">stdin</span>)!= <span class="literal">NULL</span>)&#123;</span><br><span class="line">		error = luaL_loadstring(L,buff)||lua_pcall(L,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">		<span class="keyword">if</span>(error)&#123;</span><br><span class="line">			<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">&quot;%s\n&quot;</span>,lua_tostring(L,<span class="number">-1</span>));</span><br><span class="line">			lua_pop(L,<span class="number">1</span>);			<span class="comment">/*ä»æ ˆä¸­å¼¹å‡ºé”™è¯¯ä¿¡æ¯*/</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	lua_close(L);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤´æ–‡ä»¶lua.hå£°æ˜äº†Luaæä¾›çš„åŸºç¡€å‡½æ•°ï¼Œå…¶ä¸­åŒ…æ‹¬åˆ›å»ºæ–°Luaç¯å¢ƒçš„å‡½æ•°ã€è°ƒç”¨Luaå‡½æ•°çš„å‡½æ•°ã€è¯»å†™ç¯å¢ƒä¸­çš„å…¨å±€å˜é‡çš„å‡½æ•°ï¼Œä»¥åŠæ³¨å†Œä¾›Luaè¯­è¨€è°ƒç”¨æ–°å‡½æ•°çš„å‡½æ•°ç­‰ç­‰ã€‚lua.hä¸­å£°æ˜çš„æ‰€æœ‰å†…å®¹éƒ½æœ‰ä¸€ä¸ªå‰ç¼€lua_ã€‚<br>å¤´æ–‡ä»¶luaxlib.hå£°æ˜äº†è¾…åŠ©åº“æ‰€æä¾›çš„å‡½æ•°ï¼Œå…¶ä¸­æ‰€æœ‰çš„å£°æ˜å‡ä»¥luaL_å¼€å¤´ã€‚è¾…åŠ©åº“ä½¿ç”¨lua.hæä¾›çš„åŸºç¡€APIæ¥æä¾›æ›´é«˜å±‚æ¬¡çš„æŠ½è±¡ï¼Œç‰¹åˆ«æ˜¯å¯¹æ ‡å‡†åº“ç”¨åˆ°çš„ç›¸å…³æœºåˆ¶è¿›è¡ŒæŠ½è±¡ã€‚åŸºç¡€APIè¿½æ±‚ç»æµæ€§å’Œæ­£äº¤æ€§ï¼Œè€Œè¾…åŠ©åº“åˆ™è¿½æ±‚å¯¹å¸¸è§ä»»åŠ¡çš„å®ç”¨æ€§ã€‚å½“ç„¶ï¼Œè¦åœ¨ç¨‹åºä¸­åˆ›å»ºå…¶ä»–æ‰€éœ€çš„æŠ½è±¡ä¹Ÿæ˜¯éå¸¸ç®€å•çš„ã€‚è¯·è®°ä½ï¼Œè¾…åŠ©åº“ä¸èƒ½è®¿é—®Luaçš„å†…éƒ¨å…ƒç´ ï¼Œè€Œåªèƒ½é€šè¿‡lua.hä¸­å£°æ˜çš„å®˜æ–¹åŸºç¡€APIå®Œæˆæ‰€æœ‰å·¥ä½œã€‚è¾…åŠ©åº“èƒ½å®ç°ä»€ä¹ˆï¼Œä½ çš„ç¨‹åºå°±èƒ½å®ç°ä»€ä¹ˆã€‚<br>Luaæ ‡å‡†åº“æ²¡æœ‰å®šä¹‰ä»»ä½•Cè¯­è¨€å…¨å±€å˜é‡ï¼Œå®ƒå°†å…¶æ‰€æœ‰çš„çŠ¶æ€éƒ½ä¿å­˜åœ¨åŠ¨æ€çš„ç»“æ„ä½“lua_Stateä¸­ï¼ŒLuaä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½æ¥æ”¶ä¸€ä¸ªæŒ‡å‘è¯¥ç»“æ„çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ã€‚è¿™ç§è®¾è®¡ä½¿å¾—Luaæ˜¯å¯é‡å…¥çš„ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥ç”¨äºç¼–ç¨‹å¤šçº¿ç¨‹ä»£ç ã€‚<br>é¡¾åæ€ä¹‰ï¼Œå‡½æ•°luaL_newstateç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„LuaçŠ¶æ€ã€‚å½“å®ƒåˆ›å»ºä¸€ä¸ªæ–°çŠ¶æ€æ—¶ï¼Œæ–°ç¯å¢ƒä¸­æ²¡æœ‰åŒ…å«é¢„å®šä¹‰çš„å‡½æ•°ï¼Œç”šè‡³è¿printä¹Ÿæ²¡æœ‰ã€‚ä¸ºäº†ä¿æŒLuaè¯­è¨€çš„ç²¾ç‚¼ï¼Œæ‰€æœ‰çš„æ ‡å‡†åº“éƒ½è¢«ç»„ç»‡æˆä¸åŒçš„åŒ…ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ä¸éœ€è¦ä½¿ç”¨æŸäº›åŒ…æ—¶å¯ä»¥å¿½ç•¥å®ƒä»¬ã€‚å¤´æ–‡ä»¶lualib.hä¸­å£°æ˜äº†ç”¨äºæ‰“å¼€è¿™äº›åº“çš„å‡½æ•°ã€‚å‡½æ•°luaL_openlibsç”¨äºæ‰“å¼€æ‰€æœ‰çš„æ ‡å‡†åº“ã€‚<br>å½“åˆ›å»ºå¥½ä¸€ä¸ªçŠ¶æ€å¹¶ä¸”åœ¨å…¶ä¸­åŠ è½½æ ‡å‡†åº“ä»¥åï¼Œå°±å¯ä»¥å¤„ç†ç”¨æˆ·çš„è¾“å…¥äº†ã€‚ç¨‹åºä¼šé¦–å…ˆè°ƒç”¨å‡½æ•°luaL_loadstringæ¥ç¼–è¯‘ç”¨æˆ·è¾“å…¥çš„æ¯ä¸€è¡Œå†…å®¹ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œåˆ™è¿”å›é›¶ï¼Œå¹¶å‘æ ˆä¸­å‹å…¥ç¼–è¯‘åå¾—åˆ°çš„å‡½æ•°ã€‚ç„¶åï¼Œç¨‹åºè°ƒç”¨å‡½æ•°lua_pcallä»æ ˆä¸­å¼¹å‡ºç¼–è¯‘åçš„å‡½æ•°ï¼Œå¹¶ä»¥ä¿æŠ¤æ¨¡å¼è¿è¡Œã€‚ä¸å‡½æ•°lua_loadstringç±»ä¼¼ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿï¼Œå‡½æ•°lua_pcallåˆ™è¿”å›é›¶ï¼›å½“å‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šå‘æ ˆä¸­å‹å…¥ä¸€æ¡é”™è¯¯ä¿¡æ¯ã€‚éšåæˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°lua_tostringè·å–é”™è¯¯ä¿¡æ¯ï¼Œå¹¶åœ¨æ‰“å°é”™è¯¯ä¿¡æ¯åä½¿ç”¨å‡½æ•°lua_popå°†ä»æ ˆä¸­åˆ é™¤ã€‚<br>åœ¨Cè¯­è¨€ä¸­ï¼ŒçœŸæ˜¯çš„é”™è¯¯å¤„ç†å¯èƒ½ä¼šç›¸å½“å¤æ‚ï¼Œå¹¶ä¸”å¦‚ä½•å¤„ç†é”™è¯¯å–å†³äºåº”ç”¨çš„æ€§è´¨ã€‚Luaæ ¸ä¸ä¼šç›´æ¥å‘ä»»ä½•è¾“å‡ºæµå†™å…¥æ•°æ®ï¼Œå®ƒåªä¼šé€šè¿‡è¿”å›é”™è¯¯ä¿¡æ¯æ¥æç¤ºé”™è¯¯ã€‚æ¯ä¸ªåº”ç”¨å¯ä»¥ç”¨å…¶æ‰€éœ€çš„æœ€æ°å½“çš„æ–¹å¼æ¥å¤„ç†è¿™äº›é”™è¯¯ä¿¡æ¯ã€‚ä¸ºäº†ç®€åŒ–è®¨è®ºï¼Œå‡è®¾ä¸€ä¸‹ç¤ºä¾‹ä½¿ç”¨å¦‚ä¸‹ç®€å•çš„é”™è¯¯å¤„ç†å‡½æ•°ï¼Œå³æ‰“å°ä¸€æ¡é”™è¯¯ä¿¡æ¯ï¼Œå…³é—­LuaçŠ¶æ€å¹¶ç»“æŸæ•´ä¸ªåº”ç”¨ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">error</span> <span class="params">(lua_State *L,<span class="type">const</span> <span class="type">char</span> *fmt, ...)</span>&#123;</span><br><span class="line">	va_list argp;</span><br><span class="line">	va_start(argp,fmt);</span><br><span class="line">	<span class="built_in">vfprintf</span>(<span class="built_in">stderr</span>,fmt,argp);</span><br><span class="line">	va_end(argp);</span><br><span class="line">	lua_close(L);</span><br><span class="line">	<span class="built_in">exit</span>(EXIT_FAILURE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±äºLuaæ—¢å¯ä»¥ä½œä¸ºCä»£ç æ¥ç¼–è¯‘ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºC++ä»£ç æ¥ç¼–è¯‘ï¼Œå› æ­¤lua.hä¸­å¹¶æ²¡æœ‰åŒ…å«ä»¥ä¸‹è¿™ç§åœ¨Cæ ‡å‡†åº“ä¸­çš„å¸¸è§çš„å†™æ³•ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span>&#123;</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">	...</span><br><span class="line">	<span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå°†Luaä½œä¸ºCä»£ç ç¼–è¯‘å‡ºæ¥ååˆè¦åœ¨C++ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå¯ä»¥å¼•å…¥lua.hppæ¥æ›¿ä»£lua.hï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span>&#123;</span><br><span class="line">	<span class="meta">#<span class="keyword">include</span> <span class="string">&quot;lua.h&quot;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h2><p>Luaå’ŒCä¹‹é—´é€šä¿¡çš„ä¸»è¦ç»„ä»¶æ˜¯æ— å¤„ä¸åœ¨çš„è™šæ‹Ÿæ ˆï¼Œå‡ ä¹æ‰€æœ‰çš„APIè°ƒç”¨éƒ½æ˜¯åœ¨æ“ä½œè¿™ä¸ªæ ˆä¸­çš„å€¼ï¼ŒLuaä¸Cä¹‹é—´æ‰€æœ‰çš„æ•°æ®äº¤æ¢éƒ½æ˜¯é€šè¿‡è¿™ä¸ªæ ˆå®Œæˆçš„ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥åˆ©ç”¨æ ˆä¿å­˜ä¸­é—´ç»“æœã€‚<br>å½“æˆ‘ä»¬æƒ³åœ¨Luaå’ŒCä¹‹é—´äº¤æ¢æ•°æ®æ—¶ï¼Œä¼šé¢å¯¹ä¸¤ä¸ªé—®é¢˜ï¼šç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯åŠ¨æ€ç±»å‹å’Œé™æ€ç±»å‹ä½“ç³»ä¹‹é—´ä¸åŒ¹é…ï¼›ç¬¬äºŒä¸ªé—®é¢˜æ˜¯è‡ªåŠ¨å†…å­˜ç®¡ç†å’Œæ‰‹åŠ¨å†…å­˜ç®¡ç†ä¹‹é—´ä¸åŒ¹é…ã€‚<br>åœ¨Luaä¸­ï¼Œå¦‚æœæˆ‘ä»¬å†™t[k]&#x3D;vï¼Œkå’Œvéƒ½å¯ä»¥æ˜¯å‡ ç§ä¸åŒç±»å‹ï¼›ç”±äºå…ƒè¡¨çš„å­˜åœ¨ï¼Œç”šè‡³tä¹Ÿå¯ä»¥æœ‰ä¸åŒçš„ç±»å‹ã€‚ç„¶è€Œï¼Œå¦‚æœè¦åœ¨Cè¯­è¨€ä¸­æä¾›è¿™ç§æ“ä½œï¼Œä»»æ„ç»™å®šçš„settableå‡½æ•°éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå›ºå®šçš„ç±»å‹ã€‚ä¸ºäº†å®ç°è¿™æ ·çš„æ“ä½œï¼Œæˆ‘ä»¬å°±éœ€è¦å¥½å‡ åä¸ªä¸åŒçš„å‡½æ•°ã€‚<br>å¯ä»¥é€šè¿‡åœ¨Cè¯­è¨€ä¸­å£°æ˜æŸç§è”åˆä½“ç±»å‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå‡è®¾è¿™ç§ç±»å‹å«lua_Valueï¼Œå®ƒèƒ½å¤Ÿè¡¨ç¤ºLuaè¯­è¨€ä¸­æ‰€æœ‰çš„å€¼ï¼Œç„¶åï¼Œå¯ä»¥æŠŠsettableå£°æ˜ä¸ºï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">lua_settable</span> <span class="params">(lua_Value a,lua_Value k,lua_Value v)</span>;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¾ˆéš¾å°†å¦‚æ­¤å¤æ‚çš„ç±»å‹æ˜ å°„åˆ°å…¶ä»–è¯­è¨€ä¸­ï¼›è€Œåœ¨è®¾è®¡Luaæ—¶ï¼Œæˆ‘ä»¬åˆè¦æ±‚Luaè¯­è¨€ä¸ä»…èƒ½æ–¹ä¾¿åœ°ä¸C&#x2F;C++äº¤äº’ï¼Œè€Œä¸”è¿˜èƒ½ä¸<code>Java</code>ã€<code>Fortran</code>ã€<code>C#</code>ç­‰å…¶ä»–è¯­è¨€æ–¹ä¾¿åœ°äº¤äº’ã€‚å…¶æ¬¡ï¼ŒLuaè¯­è¨€ä¼šåšåƒåœ¾æ”¶é›†ï¼šç”±äºLuaé¢„å‹å¼•æ“å¹¶ä¸çŸ¥é“Luaä¸­çš„ä¸€ä¸ªè¡¨å¯èƒ½ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªCè¯­è¨€å˜é‡ä¸­ï¼Œå› æ­¤å®ƒå¯èƒ½ä¼šè®¤ä¸ºè¿™ä¸ªè¡¨æ˜¯åƒåœ¾å¹¶å°†å…¶æ”¶å›ã€‚<br>å› æ­¤ï¼ŒLuaAPIä¸­ç­æœ‰å®šä¹‰ä»»ä½•ç±»ä¼¼äºlua_Valueçš„ç±»å‹ï¼Œè€Œæ˜¯ä½¿ç”¨æ ˆåœ¨Luaå’ŒCä¹‹é—´äº¤æ¢æ•°æ®ã€‚æ ˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½èƒ½ä¿å­˜Luaä¸­ä»»æ„ç±»å‹çš„å€¼ã€‚å½“æˆ‘ä»¬æƒ³è¦ä»Luaä¸­è·å–ä¸€ä¸ªå€¼æ—¶ï¼Œåªéœ€è¦è°ƒç”¨Luaï¼ŒLuaå°±ä¼šå°†æŒ‡å®šçš„å€¼å‹å…¥æ ˆä¸­ã€‚å½“æƒ³è¦å°†ä¸€ä¸ªå€¼ä¼ ç»™Luaæ—¶ï¼Œé¦–å…ˆè¦å°†è¿™ä¸ªå€¼å‹å…¥æ ˆï¼Œç„¶åè°ƒç”¨Luaå°†å…¶ä¸­æ ˆä¸­å¼¹å‡ºå³å¯ã€‚å°½ç®¡æˆ‘ä»¬ä»ç„¶éœ€è¦ä¸€ä¸ªä¸åŒçš„å‡½æ•°å°†æ¯ç§Cè¯­è¨€ç±»å‹çš„å€¼å‹å…¥æ ˆï¼Œè¿˜éœ€è¦å¦ä¸€ä¸ªä¸åŒå‡½æ•°ä»æ ˆä¸­å¼¹å‡ºæ¯ç§Cè¯­è¨€ç±»å‹çš„å€¼ï¼Œä½†æ˜¯é¿å…äº†è¿‡å¤šçš„ç»„åˆã€‚å¦å¤–ï¼Œç”±äºè¿™ä¸ªæ ˆæ˜¯LuaçŠ¶æ€çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤åƒåœ¾æ”¶é›†å™¨çŸ¥é“Cè¯­è¨€æ­£åœ¨ä½¿ç”¨å“ªäº›å€¼ã€‚<br>å‡ ä¹CAPIä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½ä¼šç”¨åˆ°æ ˆã€‚æ­£å¦‚ç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œå‡½æ•°luaL_loadstringå°†å…¶ç»“æœç•™åœ¨æ ˆä¸­ï¼›å‡½æ•°lua_pcallä»æ ˆä¸­å–å‡ºè¦è°ƒç”¨çš„å‡½æ•°ï¼Œå¹¶ä¸”ä¹Ÿä¼šå°†é”™è¯¯æ¶ˆæ¯ç•™åœ¨æ ˆä¸­ã€‚<br>Luaä¸¥æ ¼åœ°æŒ‰ç…§LIFOçš„è§„åˆ™æ¥æ“ä½œæ ˆã€‚åœ¨è°ƒç”¨Luaæ—¶åªæœ‰æ ˆé¡¶éƒ¨çš„éƒ¨åˆ†ä¼šå‘ç”Ÿæ”¹å˜ï¼Œè€ŒCè¯­è¨€ä»£ç åˆ™æœ‰æ›´å¤§çš„è‡ªç”±åº¦ã€‚æ›´å…·ä½“åœ°è¯´ï¼ŒCè¯­è¨€å¯ä»¥æ£€è§†æ ˆä¸­çš„ä»»ä½•ä¸€ä¸ªå…ƒç´ ï¼Œç”šè‡³å¯ä»¥åœ¨æ ˆçš„ä»»æ„ä½ç½®æ’å…¥æˆ–åˆ é™¤å…ƒç´ ã€‚</p>
<h3 id="å‹å…¥å…ƒç´ "><a href="#å‹å…¥å…ƒç´ " class="headerlink" title="å‹å…¥å…ƒç´ "></a>å‹å…¥å…ƒç´ </h3><p>é’ˆå¯¹æ¯ä¸€ç§èƒ½ç”¨Cè¯­è¨€ç›´æ¥è¡¨ç¤ºçš„Luaæ•°æ®ç±»å‹ï¼ŒCAPIä¸­éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„äºšæ ˆå‡½æ•°ï¼šå¸¸é‡nilä½¿ç”¨lua_pushnilï¼›å¸ƒå°”å€¼ä½¿ç”¨lua_pushboolean;åŒç²¾åº¦æµ®ç‚¹æ•°ä½¿ç”¨lua_pushnumberï¼›æ•´å‹ä½¿ç”¨lua_pushintegerï¼›ä»»æ„å­—ç¬¦ä¸²ä½¿ç”¨lua_pushlstringï¼›ä»¥\0ç»ˆæ­¢çš„å­—ç¬¦ä¸²ä½¿ç”¨lua_pushstringã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">lua_pushnil</span>         <span class="params">(lua_State *L)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_pushboolean</span>     <span class="params">(lua_State *L, <span class="type">int</span> <span class="type">bool</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_pushnumber</span>		 <span class="params">(lua_State *L, lua_Number n)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_pushinteger</span>     <span class="params">(lua_State *L, lua_Integer n)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_pushlstring</span>     <span class="params">(lua_State *L, <span class="type">const</span> <span class="type">char</span> *s, <span class="type">size_t</span> len)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_pushstring</span>      <span class="params">(lua_State *L, <span class="type">const</span> <span class="type">char</span> *s)</span>;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œä¹Ÿæœ‰å‘æ ˆä¸­å‹å…¥Cå‡½æ•°å’Œç”¨æˆ·æ•°æ®çš„å‡½æ•°ã€‚<br>ç±»å‹Lua_Numberç›¸å½“äºLuaè¯­è¨€çš„æµ®ç‚¹æ•°ç±»å‹ï¼Œé»˜è®¤ä¸ºdoubleï¼Œä½†å¯ä»¥åœ¨ç¼–è¯‘æ—¶é…ç½®Luaï¼Œè®©Lua_Numberä¸ºfloatç”šè‡³long doubleã€‚ç±»å‹lua_Integerç›¸å½“äºLuaè¯­è¨€ä¸­çš„æ•´å‹ï¼Œé€šå¸¸è¢«å®šä¹‰ä¸ºlong long ï¼Œæ—¢æœ‰ç¬¦å·64ä½æ•´å‹ã€‚åŒæ ·ï¼Œè¦æŠŠLuaè¯­è¨€ä¸­çš„lua_Integeré…ç½®ä¸ºä½¿ç”¨intæˆ–longä¹Ÿå¾ˆå®¹æ˜“ã€‚å¦‚æœä½¿ç”¨float-intç»„åˆï¼Œä¹Ÿå°±æ˜¯32æµ®ç‚¹æ•°ç±»å‹å’Œæ•´å‹ï¼Œå³æˆ‘ä»¬æ‰€è¯´çš„ç²¾ç®€Luaï¼Œå¯¹äºèµ„æºå—é™çš„æœºå™¨å’Œç¡¬ä»¶è€Œè¨€ï¼Œç›¸å½“é«˜æ•ˆã€‚<br>Luaè¯­è¨€ä¸­çš„é¢å­—ç¬¦ä¸²ä¸æ˜¯ä»¥\0ç»“å°¾çš„ï¼Œå®ƒä»¬å¯ä»¥åŒ…å«ä»»æ„äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤ï¼Œå°†å­—ç¬¦ä¸²å‹æ ˆçš„åŸºæœ¬å‡½æ•°lua_pushlstringéœ€è¦ä¸€ä¸ªæ˜ç¡®çš„é•¿åº¦ä½œä¸ºå‚æ•°ã€‚å¯¹äºä»¥\0ç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°lua_pushstringï¼Œè¯¥å‡½æ•°é€šè¿‡strlenæ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚Luaè¯­è¨€ä¸ä¼šä¿ç•™æŒ‡å‘å¤–éƒ¨å­—ç¬¦ä¸²çš„æŒ‡é’ˆã€‚å¯¹äºä¸å¾—ä¸ä¿ç•™çš„å­—ç¬¦ä¸²ï¼ŒLuaè¦ä¹ˆç”Ÿæˆä¸€ä¸ªå†…éƒ¨å‰¯æœ¬ï¼Œè¦ä¹ˆå¤ç”¨å·²æœ‰çš„å­—ç¬¦ä¸²ã€‚å› æ­¤ï¼Œä¸€æ—¦ä¸Šè¿°å‡½æ•°è¿”å›ï¼Œå³ä½¿ç«‹å³é‡Šæ”¾æˆ–ä¿®æ”¹ç¼“å†²åŒºä¹Ÿä¸ä¼šå‡ºç°é—®é¢˜ã€‚<br>æ— è®ºä½•æ—¶å‘æ ˆå†…å‹å…¥ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥ç¡®ä¿æ ˆä¸­æœ‰è¶³å¤Ÿçš„ç©ºé—´ã€‚è¯·æ³¨æ„ï¼Œç°åœ¨ä½ æ˜¯ä¸€ä¸ªCè¯­è¨€ç¨‹åºå‘˜ï¼ŒLuaè¯­è¨€ä¸ä¼šå® ç€ä½ ã€‚å½“Luaå¯åŠ¨æ—¶ï¼Œä»¥åŠLuaè°ƒç”¨Cè¯­è¨€æ—¶ï¼Œæ ˆä¸­è‡³å°‘æœ‰20ä¸ªç©ºé—²çš„ä½ç½®ã€‚å¯¹äºå¤§å¤šæ•°æƒ…å†µï¼Œè¿™ä¸ªç©ºé—´æ˜¯å®Œå…¨å¤Ÿç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æ— é¡»è€ƒè™‘æ ˆç©ºé—´çš„é—®é¢˜ã€‚ä¸è¿‡ï¼Œæœ‰äº›ä»»åŠ¡å¯èƒ½ä¼šéœ€è¦æ›´å¤šçš„æ ˆç©ºé—´ï¼Œç‰¹å¤‡æ˜¯å¾ªç¯å‘æ ˆä¸­å‹å…¥å…ƒç´ æ—¶ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå°±éœ€è¦è°ƒç”¨å“ˆæ•°lua_checkstackæ¥æ£€æŸ¥æ ˆä¸­æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span> lua_checkstack (lua_State *L, <span class="built_in">int</span> sz);</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼Œszæ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„é¢å¤–æ ˆä½ç½®çš„æ•°é‡ã€‚å¦‚æœå¯èƒ½ï¼Œå‡½æ•°lua_checkstackä¼šå¢åŠ æ ˆçš„å¤§å°ï¼Œä»¥å®¹çº³æ‰€éœ€çš„é¢å¤–ç©ºé—´ï¼›å¦åˆ™ï¼Œè¯¥å‡½æ•°è¿”å›é›¶ã€‚<br>è¾…åŠ©åº“ä¹Ÿæä¾›äº†ä¸€ä¸ªé«˜å±‚å‡½æ•°æ¥æ£€æŸ¥æ ˆç©ºé—´ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">void luaL_checkstack (lua_State *L, <span class="built_in">int</span> sz, const char *msg);</span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°ç±»ä¼¼äºå‡½æ•°lua_checkstackï¼Œä½†æ˜¯å¦‚æœæ ˆç©ºé—´ä¸èƒ½æ»¡è¶³è¯·æ±‚ï¼Œè¯¥å‡½æ•°ä¼šä½¿ç”¨æŒ‡å®šçš„é”™è¯¯ä¿¡æ¯æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä¸æ˜¯è¿”å›é”™è¯¯ç ã€‚</p>
<h3 id="æŸ¥è¯¢å…ƒç´ "><a href="#æŸ¥è¯¢å…ƒç´ " class="headerlink" title="æŸ¥è¯¢å…ƒç´ "></a>æŸ¥è¯¢å…ƒç´ </h3><p>CAPIä½¿ç”¨ç´¢å¼•æ¥å¼•ç”¨æ ˆä¸­çš„å…ƒç´ ã€‚ç¬¬ä¸€ä¸ªè¢«å‹å…¥æ ˆçš„å…ƒç´ ç´¢å¼•ä¸º1ï¼Œç¬¬äºŒä¸ªè¢«å‹å…¥çš„å…ƒç´ ç´¢å¼•ä¸º2ï¼Œä¾æ¬¡ç±»æ¨ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä»¥æ ˆé¡¶ä¸ºå‚ç…§ï¼Œä½¿ç”¨è´Ÿæ•°ç´¢å¼•æ¥è®¿é—®æ ˆä¸­çš„å…ƒç´ ï¼Œæ­¤æ—¶ï¼Œ-1è¡¨ç¤ºæ ˆé¡¶å…ƒç´ ï¼Œ-2è¡¨ç¤ºåœ¨å®ƒä¹‹å‰è¢«å‹å…¥æ ˆçš„å…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨ã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨lua_tostring(L,-1)ä¼šå°†æ ˆé¡¶çš„å€¼ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ã€‚æ­£å¦‚ä½ æ¥ä¸‹æ¥è¦çœ‹åˆ°çš„ï¼Œæœ‰äº›æƒ…å†µä¸‹ä»æ ˆåº•å¯¹æ ˆè¿›è¡Œç´¢å¼•æ›´åŠ è‡ªç„¶ï¼Œè€Œæœ‰äº›æƒ…å†µä¸‹åˆ™ä½¿ç”¨è´Ÿæ•°ç´¢å¼•æ›´å¥½ã€‚<br>è¦æ£€æŸ¥æ ˆä¸­çš„ä¸€ä¸ªå…ƒç´ æ˜¯å¦ä¸ºç‰¹å®šçš„ç±»å‹ï¼ŒCAPIæä¾›äº†ä¸€ç³»åˆ—åä¸ºlua_is<em>çš„å‡½æ•°ï¼Œå…¶ä¸­</em>å¯ä»¥æ˜¯ä»»æ„ä¸€ç§Luaæ•°æ®ç±»å‹ã€‚è¿™äº›å‡½æ•°åŒ…æ‹¬lua_isnilã€lua_isnumberã€lua_isstringå’Œlua_istableç­‰ã€‚æ‰€æœ‰è¿™äº›å‡½æ•°éƒ½æœ‰åŒæ ·çš„åŸå‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> lua_is* (lua_State *L, <span class="type">int</span> index);</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šï¼Œå‡½æ•°lua_isnumberä¸ä¼šæ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦ä¸ºç‰¹å®šç±»å‹ï¼Œè€Œæ˜¯æ£€æŸ¥è¯¥å€¼æ˜¯å¦èƒ½è¢«è½¬æ¢ä¸ºç‰¹å®šç±»å‹ã€‚å‡½æ•°lua_isstringä¸ä¹‹ç±»ä¼¼ï¼Œç‰¹åˆ«ä¹‹å¤„åœ¨äºï¼Œå®ƒæ¥å—æ•°å­—ã€‚<br>è¿˜æœ‰ä¸€ä¸ªå‡½æ•°lua_typeï¼Œç”¨äºè¿”å›æ ˆä¸­å…ƒç´ çš„ç±»å‹ï¼Œæ¯ä¸€ç§ç±»å‹éƒ½ç”±ä¸€ä¸ªå¯¹åº”çš„å¸¸é‡è¡¨ç¤ºï¼ŒåŒ…æ‹¬LUA_INITã€LUA_TBOOLEANã€LUA_TUMBERã€LUA_TSTRINGç­‰ã€‚è¿˜å‡½æ•°ä¸€èˆ¬ä¸switchè¯­å¥è¿ç”¨ã€‚å½“éœ€è¦æ£€æŸ¥å­—ç¬¦ä¸²å’Œæ•°å€¼æ˜¯å¦å­˜åœ¨æ½œåœ¨çš„å¼ºåˆ¶ç±»å‹è½¬æ¢æ—¶ï¼Œè¯¥å‡½æ•°ä¹ŸåŒæ ·æœ‰ç”¨ã€‚<br>å‡½æ•°lua_to*ç”¨äºä»æ ˆä¸­è·å–ä¸€ä¸ªå€¼ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> 				<span class="title function_">lua_toboolean</span><span class="params">(lua_State *L, <span class="type">int</span> index)</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> 			*<span class="title function_">lua_tolstring</span><span class="params">(lua_State *L, <span class="type">int</span> index, <span class="type">size_t</span> *len)</span>;</span><br><span class="line">lua_State           *<span class="title function_">lua_tothread</span><span class="params">(lua_State *L, <span class="type">int</span> index)</span>;</span><br><span class="line">lua_Number          <span class="title function_">lua_tonumber</span><span class="params">(lua_State *L, <span class="type">int</span> index)</span>;</span><br><span class="line">lua_Integer         <span class="title function_">lua_tointeger</span><span class="params">(lua_State *L, <span class="type">int</span> index)</span>;</span><br></pre></td></tr></table></figure>
<p>å³ä½¿æŒ‡å®šçš„å…ƒç´ çš„ç±»å‹ä¸æ­£ç¡®ï¼Œè°ƒç”¨è¿™äº›å‡½æ•°ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ã€‚å‡½æ•°lua_tobooleané€‚ç”¨äºæ‰€æœ‰ç±»å‹ï¼Œå®ƒå¯ä»¥æŒ‰ç…§å¦‚ä¸‹çš„è§„åˆ™å°†ä»»æ„Luaå€¼è½¬æ¢ä¸ºCçš„å¸ƒå°”å€¼ï¼šnilå’Œfalseè½¬æ¢ä¸º0ï¼Œæ‰€æœ‰å…¶ä»–çš„Luaå€¼è½¬æ¢ä¸º1.å¯¹äºç±»å‹ä¸æ­£ç¡®çš„å€¼ï¼Œå‡½æ•°lua_tolstringå’Œlua_tothreadè¿”å›NULLã€‚ä¸è¿‡ï¼Œæ•°å€¼ç›¸å…³çš„å‡½æ•°éƒ½æ— æ³•æç¤ºæ•°å€¼çš„ç±»å‹é”™è¯¯ï¼Œå› æ­¤åªèƒ½ç®€å•åœ°è¿”å›0ã€‚ä»¥å‰æˆ‘ä»¬éœ€è¦è°ƒç”¨å‡½æ•°lua_isnumberæ¥æ£€æŸ¥ç±»å‹ï¼Œä½†æ˜¯Lua5.2å¼•å…¥äº†å¦‚ä¸‹çš„æ–°å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lua_Number      lua_tonumberx(lua_State *L, <span class="built_in">int</span> idx, <span class="built_in">int</span> *isnum)</span><br><span class="line">lua_Integer     lua_tointegerx(lua_State *L,<span class="built_in">int</span> idx, <span class="built_in">int</span> *isnum)</span><br></pre></td></tr></table></figure>
<p>å‡ºå£å‚æ•°isnumè¿”å›äº†ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œæ¥è¡¨ç¤ºLuaå€¼æ˜¯å¦è¢«å¼ºåˆ¶è½¬æ¢ä¸ºæœŸæœ›çš„ç±»å‹ã€‚<br>å‡½æ•°lua_tolstringè¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å­—ç¬¦ä¸²å†…éƒ¨å‰¯æœ¬çš„æŒ‡é’ˆï¼Œå¹¶å°†å­—ç¬¦ä¸²çš„é•¿åº¦å­˜å…¥åˆ°å‚æ•°lenæŒ‡å®šçš„ä½ç½®ã€‚æˆ‘ä»¬æ— æ³•ä¿®æ”¹è¿™ä¸ªå†…éƒ¨å‰¯æœ¬ã€‚Luaè¯­è¨€ä¿è¯ï¼Œåªè¦å¯¹åº”çš„å­—ç¬¦ä¸²è¿˜åœ¨æ ˆä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªæŒ‡é’ˆå°±æ˜¯æœ‰æ•ˆçš„ã€‚å½“Luaè°ƒç”¨çš„ä¸€ä¸ªCå‡½æ•°è¿”å›æ—¶ï¼ŒLuaå°±ä¼šæ¸…ç©ºæ ˆã€‚å› æ­¤ï¼Œä½œä¸ºè§„åˆ™ï¼Œæ°¸è¿œä¸è¦æŒ‡å‘Luaå­—ç¬¦ä¸²çš„æŒ‡é’ˆå­˜æ”¾åˆ°è·å–è¯¥æŒ‡é’ˆçš„å‡½æ•°ä¹‹å¤–ã€‚<br>å‡½æ•°lua_tolstringè¿”å›çš„æ‰€æœ‰å­—ç¬¦ä¸²åœ¨å…¶æœ«å°¾éƒ½ä¼šæœ‰ä¸€ä¸ªé¢å¤–çš„\0ï¼Œä¸è¿‡è¿™äº›å­—ç¬¦ä¸²ä¸­ä¹Ÿå¯èƒ½ä¼šæœ‰\0ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°lenè·å–å­—ç¬¦ä¸²çš„çœŸå®é•¿åº¦ã€‚ç‰¹åˆ«çš„ï¼Œå‡è®¾æ ˆé¡¶çš„å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå¦‚ä¸‹æ¨æ–­æ°¸è¿œæˆç«‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">size_t</span> len;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *s = lua_tolstring(L, <span class="number">-1</span> ,&amp;len); <span class="comment">/*ä»»æ„Luaå­—ç¬¦ä¸²*/</span></span><br><span class="line">assert(s[len] == <span class="string">&#x27;\0&#x27;</span>);</span><br><span class="line">assert(<span class="built_in">strlen</span>(s) &lt;= len);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸éœ€è¦é•¿åº¦ä¿¡æ¯ï¼Œå¯ä»¥åœ¨è°ƒç”¨å‡½æ•°lua_tolstringæ—¶å°†ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ä¸ºNULLã€‚ä¸è¿‡ï¼Œä½¿ç”¨å®lua_tostringä¼šæ›´å¥½ï¼Œå› æ­¤è¿™ä¸ªå®å°±æ˜¯ç”¨NULLä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°æ¥è°ƒç”¨å‡½æ•°lua_tolstringçš„ã€‚<br>ä¸ºäº†æ©é¥°è¿™äº›å‡½æ•°çš„ç”¨æ³•ï¼Œç¤ºä¾‹æä¾›äº†ä¸€ä¸ªæœ‰ç”¨çš„è¾…åŠ©å‡½æ•°ï¼Œå®ƒè¾“å‡ºæ•´ä¸ªæ ˆçš„å†…å®¹ã€‚</p>
<blockquote>
<p>å¯¹æ ˆè¿›è¡ŒDump</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">static void stackDump(lua_State *L)&#123;</span><br><span class="line">	<span class="built_in">int</span> i;</span><br><span class="line">	<span class="built_in">int</span> top = lua_gettop(L); /*æ ˆçš„æ·±åº¦*/</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i&lt;= top;i++)&#123;</span><br><span class="line">		<span class="built_in">int</span> t = lua_type(L,i);</span><br><span class="line">		switch(t)&#123;</span><br><span class="line">			<span class="keyword">case</span> LUA_TSTRING:&#123;</span><br><span class="line">				printf(<span class="string">&quot;&#x27;%s&#x27;&quot;</span>,lua_tostring(L,i));</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">case</span> LUA_TBOOLEAN:&#123;</span><br><span class="line">				printf(lua_toboolean(L,i)?<span class="string">&quot;true&quot;</span>:<span class="string">&quot;false&quot;</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">case</span> LUA_TUNMBER:&#123;</span><br><span class="line">				printf(<span class="string">&quot;%g&quot;</span>,lua_tonumber(L,i));</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			default:&#123;</span><br><span class="line">				printf(<span class="string">&quot;%s&quot;</span>,lua_typename(L,t));</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		printf(<span class="string">&quot; &quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‡½æ•°ä»æ ˆåº•å‘æ ˆé¡¶éå†ï¼Œå¹¶æ ¹æ®æ¯ä¸ªå…ƒç´ çš„ç±»å‹æ‰“å°å…¶å€¼ã€‚å®ƒæ‰“å°å­—ç¬¦ä¸²æ—¶ä¼šç”¨å•å¼•å·å°†å…¶æ‹¬èµ·æ¥ï¼Œå¯¹æ•°å€¼ç±»å‹çš„å€¼åˆ™ä½¿ç”¨æ ¼å¼â€%gâ€è¾“å‡ºï¼Œå¯¹äºå…¶ä»–Cè¯­è¨€ä¸­ä¸å­˜åœ¨ç­‰ä»·ç±»å‹çš„å€¼åˆ™åªæ‰“å°å‡ºå®ƒä»¬çš„ç±»å‹ã€‚<br>åœ¨Lua5.3ä¸­ï¼Œç”±äºæ•´å‹æ€»æ˜¯å¯ä»¥è¢«å¼ºåˆ¶è½¬æ¢ä¸ºæµ®ç‚¹å‹ï¼Œå› æ­¤ä»ç„¶å¯ä»¥ç”¨å‡½æ•°lua_tonumberå’Œâ€%gâ€çš„æ ¼å¼æ‰“å°æ‰€æœ‰çš„æ•°å€¼ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å€¾å‘äºå°†æ•´æ•°æ‰“å°ä¸ºæ•´å‹ï¼Œä»¥é¿å…æŸå¤±ç²¾åº¦ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ–°å‡½æ•°lua_isintegeræ¥åŒºåˆ†æ•´å‹å’Œæµ®ç‚¹å‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> LUA_TNUMBER:&#123;</span><br><span class="line">	<span class="keyword">if</span> (lua_isinteger(L,i))</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,lua_tointeger(L,i));</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%g&quot;</span>,lua_tonumber(L,i));</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å…¶ä»–æ ˆæ“ä½œ"><a href="#å…¶ä»–æ ˆæ“ä½œ" class="headerlink" title="å…¶ä»–æ ˆæ“ä½œ"></a>å…¶ä»–æ ˆæ“ä½œ</h3><p>é™¤äº†ä¸Šè¿°åœ¨Cè¯­è¨€å’Œæ ˆä¹‹é—´äº¤æ¢æ•°æ®çš„å‡½æ•°å¤–CAPIè¿˜æä¾›äº†ä¸‹åˆ—ç”¨äºé€šè¿‡æ ˆæ“ä½œçš„å‡½æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">lua_gettop</span>			<span class="params">(lua_State *L)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_settop</span>         <span class="params">(lua_State *L, <span class="type">int</span> index)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_pushvalue</span>		<span class="params">(lua_State *L, <span class="type">int</span> index)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_rotate</span>			<span class="params">(lua_State *L, <span class="type">int</span> index, <span class="type">int</span> n)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_remove</span>  		<span class="params">(lua_State *L, <span class="type">int</span> index)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_insert</span> 		<span class="params">(lua_State *L, <span class="type">int</span> index)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_replace</span>        <span class="params">(lua_State *L, <span class="type">int</span> index)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_copy</span> 			<span class="params">(lua_State *L, <span class="type">int</span> fromidx,<span class="type">int</span> toidx)</span>;</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°lua_gettopè¿”å›æ ˆä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œä¹Ÿå³æ ˆé¡¶å…ƒç´ çš„ç´¢å¼•ã€‚å‡½æ•°lua_settopå°†æ ˆé¡¶è®¾ç½®ä¸ºä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œå³ä¿®æ”¹æ ˆä¸­çš„å…ƒç´ æ•°é‡ã€‚å¦‚æœä¹‹å‰çš„æ ˆé¡¶æ¯”æ–°è®¾ç½®çš„æ›´é«˜ï¼Œé‚£ä¹ˆé«˜å‡ºæ¥çš„è¿™äº›å…ƒç´ å°±ä¼šè¢«ä¸¢å¼ƒï¼›åä¹‹ï¼Œè¯¥å‡½æ•°ä¼šå‘æ ˆä¸­å‹å…¥nilæ¥ä¸è¶³å¤§å°ã€‚ç‰¹åˆ«çš„ï¼Œå‡½æ•°lua_settop(L,0)ç”¨äºæ¸…ç©ºæ ˆã€‚åœ¨è°ƒç”¨å‡½æ•°lua_settopæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿæ•°ç´¢å¼•ï¼›åŸºäºè¿™ä¸ªåŠŸèƒ½ï¼ŒCAPIæä¾›äº†ä¸‹é¢çš„å®ï¼Œç”¨äºä»æ ˆä¸­å¼¹å‡ºnä¸ªå…ƒç´ ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> lua_pop(L,n)  lua_settop(L,-(n) -1)</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°lua_pushvalueç”¨äºå°†æŒ‡å®šç´¢å¼•ä¸Šçš„å…ƒç´ çš„å‰¯æœ¬å‹å…¥æ ˆã€‚<br>å‡½æ•°lua_rotateæ˜¯Lua5.3ä¸­æ–°å¼•å…¥çš„ã€‚é¡¾åæ€ä¹‰ï¼Œè¯¥å‡½æ•°å°†æŒ‡å®šç´¢å¼•çš„å…ƒç´ å‘æ ˆé¡¶è½¬åŠ¨nä¸ªä½ç½®ã€‚è‹¥nä¸ºæ•´æ•°ï¼Œè¡¨ç¤ºå°†å…ƒç´ å‘æ ˆé¡¶æ–¹å‘è½¬åŠ¨ï¼Œè€Œnä¸ºè´Ÿæ•°åˆ™è¡¨ç¤ºå‘ç›¸åçš„æ–¹å‘è½¬åŠ¨ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‡½æ•°ï¼Œå¦å¤–ä¸¤ä¸ªCAPIæ“ä½œå®é™…ä¸Šæ˜¯åŸºäºä½¿ç”¨è¯¥å‡½æ•°çš„å®å®šä¹‰çš„ã€‚å…¶ä¸­ä¸€ä¸ªæ˜¯lua_removeï¼Œç”¨äºåˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ï¼Œå¹¶å°†è¯¥ä½ç½®ä¸Šçš„æ‰€æœ‰å…ƒç´ ä¸‹ç§»ä»¥å¡«è¡¥ç©ºç¼ºï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> lua_remove(L,idx) \ (lua_rotate(L,(idx),-1),lua_pop(L,1))</span></span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥å‡½æ•°ä¼šå°†æ ˆé¡¶è½¬åŠ¨ä¸€æ ¼ï¼ŒæŠŠæƒ³è¦çš„é‚£ä¸ªå…ƒç´ ç§»åŠ¨åˆ°æ ˆé¡¶ï¼Œç„¶åå¼¹å‡ºè¯¥å…ƒç´ ã€‚å¦ä¸€ä¸ªå®æ˜¯lua_insertï¼Œç”¨äºå°†æ ˆé¡¶å…ƒç´ ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ï¼Œå¹¶ä¸Šç§»æŒ‡å®šä½ç½®ä¹‹ä¸Šçš„æ‰€æœ‰å…ƒç´ ä»¥å¼€è¾Ÿå‡ºä¸€ä¸ªå…ƒç´ çš„ç©ºé—´ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> lua_insert(L,inx)    lua_rotate(L,(idx),1)</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°lua_replaceå¼¹å‡ºä¸€ä¸ªå€¼ï¼Œå¹¶å°†æ ˆé¡¶è®¾ç½®ä¸ºæŒ‡å®šç´¢å¼•ä¸Šçš„å€¼ï¼Œè€Œä¸ç§»åŠ¨ä»»ä½•å…ƒç´ ã€‚æœ€åï¼Œå‡½æ•°lua_copyå°†ä¸€ä¸ªç´¢å¼•ä¸Šçš„å€¼å¤åˆ¶åˆ°å¦ä¸€ä¸ªç´¢å¼•ä¸Šï¼Œå¹¶ä¸”åŸå€¼ä¸å—å½±å“ã€‚è¯·æ³¨æ„ï¼Œä»¥ä¸‹çš„æ“ä½œä¸ä¼šå¯¹ç©ºæ ˆäº§ç”Ÿå½±å“ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_settop(L,<span class="number">-1</span>);<span class="comment">/*å°†æ ˆé¡¶è®¾ä¸ºå½“å‰å€¼*/</span></span><br><span class="line">lua_insert(L,<span class="number">-1</span>);<span class="comment">/*å°†æ ˆé¡¶çš„å…ƒç´ ç§»åŠ¨åˆ°æ ˆé¡¶*/</span></span><br><span class="line">lua_copy(L,x,x);<span class="comment">/*æŠŠä¸€ä¸ªå…ƒç´ å¤åˆ¶åˆ°å®ƒå½“å‰çš„ä½ç½®*/</span></span><br><span class="line">lua_rotate(L,x,<span class="number">0</span>);<span class="comment">/*æ—‹è½¬é›¶ä¸ªä½ç½®*/</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¤ºä¾‹ æ ˆæ“ä½œç¤ºä¾‹</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;lua.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;luaxlib.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">stackDump</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	å‚è§ä¸Šé¢é‚£ä¸ªç¤ºä¾‹</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">	lua_State *L = luaL_newstate();</span><br><span class="line">	lua_pushboolean(L,<span class="number">1</span>);</span><br><span class="line">	lua_pushnumber(L,<span class="number">10</span>);</span><br><span class="line">	lua_pushnil(L);</span><br><span class="line">	lua_pushstring(L,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">	stackDump(L):</span><br><span class="line">	<span class="comment">/*å°†è¾“å‡ºï¼štrue 10 nil &#x27;hello&#x27; */</span></span><br><span class="line">	lua_pushvalue(L.<span class="number">-4</span>); stackDump(L);</span><br><span class="line">	<span class="comment">/*å°†è¾“å‡ºï¼štrue 10 nil &#x27;hello&#x27; true */</span></span><br><span class="line">	lua_replace(L,<span class="number">3</span>); stackDump(L);</span><br><span class="line">	<span class="comment">/*å°†è¾“å‡ºï¼štrue 10 nil &#x27;hello&#x27; */</span></span><br><span class="line">	lua_settop(L,<span class="number">6</span>);stackDump(L);</span><br><span class="line">	<span class="comment">/*å°†è¾“å‡ºï¼štrue 10 true &#x27;hello&#x27; nil nil */</span></span><br><span class="line">	lua_rotate(L,<span class="number">3</span>,<span class="number">1</span>);stackDump(L);</span><br><span class="line">	<span class="comment">/*å°†è¾“å‡ºï¼štrue 10 nil true &#x27;hello&#x27; nil */</span></span><br><span class="line">	lua_remove(L,<span class="number">-3</span>);stackDump(L);</span><br><span class="line">	<span class="comment">/*å°†è¾“å‡ºï¼štrue 10 nil &#x27;hello&#x27; nil*/</span></span><br><span class="line">	lua_settop(L,<span class="number">-5</span>);stackDump(L);</span><br><span class="line">	<span class="comment">/*å°†è¾“å‡ºï¼štrue */</span></span><br><span class="line">	lua_close(L);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨CAPIè¿›è¡Œé”™è¯¯å¤„ç†"><a href="#ä½¿ç”¨CAPIè¿›è¡Œé”™è¯¯å¤„ç†" class="headerlink" title="ä½¿ç”¨CAPIè¿›è¡Œé”™è¯¯å¤„ç†"></a>ä½¿ç”¨CAPIè¿›è¡Œé”™è¯¯å¤„ç†</h2><p>Luaä¸­æ‰€æœ‰çš„ç»“æ„éƒ½æ˜¯åŠ¨æ€çš„ï¼šå®ƒä»¬ä¼šæŒ‰éœ€æ‰©å±•ï¼Œå¹¶ä¸”åœ¨å¯èƒ½æ—¶æœ€åé‡æ–°æ”¶ç¼©ã€‚è¿™æ„å‘³ç€åœ¨Luaä¸­å†…å­˜åˆ†é…å¤±è´¥å¯èƒ½æ— å¤„ä¸åœ¨ï¼Œå‡ ä¹æ‰€æœ‰çš„æ“ä½œæœ€ç»ˆéƒ½å¯èƒ½ä¼šé¢ä¸´å†…å­˜åˆ†é…å¤±è´¥ã€‚æ­¤å¤–ï¼Œè®¸å¤šæ“ä½œå¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œè®¿é—®ä¸€ä¸ªå…¨å±€å˜é‡å¯èƒ½ä¼šè§¦å‘__indexå…ƒæ–¹æ³•ï¼Œè€Œè¯¥å…ƒæ–¹æ³•åˆå¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚æœ€åï¼Œåˆ†é…å†…å­˜çš„æ“ä½œä¼šè§¦å‘åƒåœ¾æ”¶é›†å™¨ï¼Œè€Œåƒåœ¾æ”¶é›†å™¨åˆå¯èƒ½ä¼šè°ƒç”¨åŒæ ·å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ææ„å™¨ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒLua APIä¸­çš„ç»å¤§éƒ¨åˆ†å‡½æ•°éƒ½å¯èƒ½æŠ›å‡ºå¼‚å¸¸ã€‚<br>Luaè¯­è¨€ä½¿ç”¨å¼‚å¸¸æ¥æç¤ºé”™è¯¯ï¼Œè€Œæ²¡æœ‰å†APIçš„æ¯ä¸ªæ“ä½œä¸­ä½¿ç”¨é”™è¯¯ç ã€‚ä¸C++æˆ–Javaä¸åŒï¼ŒCè¯­è¨€æ²¡æœ‰æä¾›å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒLuaä½¿ç”¨äº†Cè¯­è¨€ä¸­çš„setjmpæœºåˆ¶ï¼Œsetjmpè¥é€ äº†ä¸€ä¸ªç±»ä¼¼å¼‚å¸¸å¤„ç†çš„æœºåˆ¶ã€‚å› æ­¤ï¼Œå¤§å¤šæ•°APIå‡½æ•°éƒ½å¯ä»¥è·‘å‡ºå¼‚å¸¸è€Œä¸æ˜¯ç›´æ¥è¿”å›ã€‚<br>åœ¨ç¼–å†™åº“ä»£ç æ—¶ï¼Œç”±äºLuaä¼šæ•è·æ‰€æœ‰å¼‚å¸¸ï¼Œå› æ­¤ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´ä½¿ç”¨longjmpå¹¶ä¸æ˜¯è¿›è¡Œé¢å¤–çš„æ“ä½œã€‚ä¸è¿‡ï¼Œåœ¨ç¼–å†™åº”ç”¨ç¨‹åºä»£ç æ—¶ï¼Œåˆ™å¿…é¡»æä¾›ä¸€ç§æ•è·å¼‚å¸¸çš„æ–¹æ³•ã€‚</p>
<h3 id="å¤„ç†åº”ç”¨ä»£ç ä¸­çš„é”™è¯¯"><a href="#å¤„ç†åº”ç”¨ä»£ç ä¸­çš„é”™è¯¯" class="headerlink" title="å¤„ç†åº”ç”¨ä»£ç ä¸­çš„é”™è¯¯"></a>å¤„ç†åº”ç”¨ä»£ç ä¸­çš„é”™è¯¯</h3><p>å¦‚æœåº”ç”¨è°ƒç”¨äº†Lua APIä¸­çš„å‡½æ•°ï¼Œå°±å¯èƒ½å‘ç”Ÿé”™è¯¯ã€‚Luaè¯­è¨€é€šå¸¸é€šè¿‡é•¿è·³è½¬æ¥æç¤ºé”™è¯¯ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ç›¸åº”çš„setjmpï¼Œè§£é‡Šå™¨å°±æ— æ³•è¿›è¡Œé•¿è·³è½¬ã€‚æ­¤æ—¶ï¼ŒAPIä¸­çš„ä»»ä½•é”™è¯¯éƒ½ä¼šå¯¼è‡´Luaè°ƒç”¨ç´§æ€¥å‡½æ•°ï¼Œå½“è¿™ä¸ªå‡½æ•°è¿”å›åï¼Œåº”ç”¨å°±ä¼šé€€å‡ºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°lua_atpanicæ¥è®¾ç½®è‡ªå·±çš„ç´§æ€¥å‡½æ•°ï¼Œä½†ä½œç”¨ä¸å¤§ã€‚<br>è¦æ­£ç¡®åœ°å¤„ç†åº”ç”¨ä»£ç ä¸­çš„é”™è¯¯ï¼Œå°±å¿…é¡»é€šè¿‡Luaè¯­è¨€è°ƒç”¨æˆ‘ä»¬è‡ªå·±çš„ä»£ç ï¼Œè¿™æ ·Luaè¯­è¨€æ‰èƒ½è®¾ç½®é€‚åˆçš„ä¸Šä¸‹æ–‡æ¥æ•è·å¼‚å¸¸ï¼Œå³åœ¨setjmpçš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œä»£ç ã€‚ç±»ä¼¼äºé€šè¿‡å‡½æ•°pcallåœ¨ä¿æŠ¤æ¨¡å¼ä¸­è¿è¡ŒLuaä»£ç ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å‡½æ•°lua_pcallè¿è¡ŒCä»£ç ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œå¯ä»¥æŠŠCä»£ç å°è£…åˆ°ä¸€ä¸ªå‡½æ•°Fä¸­ï¼Œç„¶åä½¿ç”¨lua_pcallè°ƒç”¨è¿™ä¸ªå‡½æ•°Fã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬çš„Cä»£ç ä¼šåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹è¿è¡Œã€‚å³ä¾¿å‘ç”Ÿå†…å­˜åˆ†é…å¤±è´¥ï¼Œå‡½æ•°lua_pcallä¹Ÿä¼šè¿”å›ä¸€ä¸ªå¯¹åº”çš„é”™è¯¯ç ï¼Œæ˜¯è§£é‡Šå™¨èƒ½å¤Ÿä¿æŒä¸€è‡´çš„çŠ¶æ€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">foo</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	code to run in protected <span class="title function_">mode</span><span class="params">(è¦ä»¥ä¿æŠ¤æ¨¡å¼è¿è¡Œçš„ä»£ç )</span></span><br><span class="line">	<span class="keyword">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">secure_foo</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	lua_pushcfunction(L,foo)<span class="comment">/*å°†fooä½œä¸ºLuaå‡½æ•°å‹æ ˆ*/</span></span><br><span class="line">	<span class="keyword">return</span> (lua_pcall(L,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) == <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæ— è®ºå‘ç”Ÿä»€ä¹ˆï¼Œè°ƒç”¨secure_fooæ—¶éƒ½ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œæ¥è¡¨ç¤ºfooæ‰§è¡Œæ˜¯å¦æˆåŠŸã€‚ç‰¹åˆ«çš„ï¼Œè¯·æ³¨æ„ï¼Œæ ˆä¸­å·²ç»é¢„å…ˆåˆ†é…äº†ç©ºé—´ï¼Œè€Œä¸”å‡½æ•°lua_pushcfunctionä¸ä¼šåˆ†é…å†…å­˜ï¼Œè¿™æ ·æ‰ä¸ä¼šå¼•å‘é”™è¯¯ã€‚</p>
<h3 id="å¤„ç†åº“ä»£ç ä¸­çš„é”™è¯¯"><a href="#å¤„ç†åº“ä»£ç ä¸­çš„é”™è¯¯" class="headerlink" title="å¤„ç†åº“ä»£ç ä¸­çš„é”™è¯¯"></a>å¤„ç†åº“ä»£ç ä¸­çš„é”™è¯¯</h3><p>Luaæ˜¯ä¸€ç§å®‰å…¨çš„è¯­è¨€ã€‚è¿™æ„å‘³ç€ä¸ç®¡ç”¨Luaå†™ä»€ä¹ˆï¼Œä¹Ÿä¸ç®¡å†™å‡ºæ¥çš„å†…å®¹å¤šä¹ˆä¸æ­£ç¡®ï¼Œæˆ‘ä»¬æ€»èƒ½ç”¨å®ƒè‡ªèº«çš„æœºåˆ¶æ¥ç†è§£ç¨‹åºçš„è¡Œä¸ºã€‚æ­¤å¤–ï¼Œç¨‹åºä¸­çš„é”™è¯¯ä¹Ÿæ˜¯é€šè¿‡Luaè¯­è¨€çš„æœºåˆ¶æ¥æ£€æµ‹å’Œè§£é‡Šçš„ã€‚ä¸ä¹‹ç›¸æ¯”ï¼Œè®¸å¤šCè¯­è¨€ä»£ç ä¸­çš„é”™è¯¯åªèƒ½ä»åº•å±‚ç¡¬ä»¶çš„è§’åº¦æ¥è§£é‡Šã€‚<br>åªè¦å¾€Luaä¸­åŠ å…¥æ–°çš„Cå‡½æ•°ï¼Œè¿™ç§å®‰å…¨æ€§å°±å¯èƒ½è¢«æ‰“ç ´ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç­‰ä»·äºBASICå‘½ä»¤pokeçš„å‡½æ•°å°±å¯èƒ½å¯¼è‡´å„ç§å„æ ·çš„å†…å­˜å´©æºƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿æ–°åŠ å…¥çš„å†…å®¹å¯¹Luaè¯­è¨€æ¥è¯´æ˜¯å®‰å…¨çš„ï¼Œå¹¶æä¾›å¦¥å–„çš„é”™è¯¯å¤„ç†ã€‚<br>æ­£å¦‚ä¹‹å‰è®¨è®ºçš„ï¼ŒCè¯­è¨€ç¨‹åºå¿…é¡»é€šè¿‡lua_pcallè®¾ç½®é”™è¯¯å¤„ç†ã€‚ä¸è¿‡ï¼Œåœ¨ä¸ºluaç¼–å†™åº“å‡½æ•°æ—¶ï¼Œé€šå¸¸æ— é¡»å¤„ç†é”™è¯¯ã€‚åº“å‡½æ•°æŠ›å‡ºçš„é”™è¯¯è¦ä¹ˆè¢«Luaä¸­çš„pcallæ•è·ï¼Œè¦ä¹ˆè¢«åº”ç”¨ä»£ç ä¸­çš„lua_pcallæ•è·ã€‚å› æ­¤ï¼Œå½“Cè¯­è¨€åº“ä¸­çš„å‡½æ•°æ£€æµ‹åˆ°é”™è¯¯æ—¶ï¼Œåªéœ€è¦ç®€å•åœ°è°ƒç”¨lua_errorå³å¯ã€‚å‡½æ•°lua_errorä¼šæ”¶æ‹¾Luaç³»ç»Ÿä¸­çš„æ®‹å±€ï¼Œç„¶åè·³è½¬å›ä¿æŠ¤æ¨¡å¼è°ƒç”¨å¤„ï¼Œå¹¶ä¼ é€’é”™è¯¯ä¿¡æ¯ã€‚</p>
<h2 id="å†…å­˜åˆ†é…"><a href="#å†…å­˜åˆ†é…" class="headerlink" title="å†…å­˜åˆ†é…"></a>å†…å­˜åˆ†é…</h2><p>Luaè¯­è¨€æ ¸å¿ƒå¯¹å†…å­˜åˆ†é…ä¸è¿›è¡Œä»»ä½•å‡è®¾ï¼Œå®ƒæ—¢ä¸ä¼šè°ƒç”¨mallocä¹Ÿä¸ä¼šè°ƒç”¨reallocæ¥åˆ†é…å†…å­˜ã€‚ç›¸åï¼ŒLuaè¯­è¨€æ ¸å¿ƒåªä¼šé€šè¿‡ä¸€ä¸ªåˆ†é…å‡½æ•°æ¥åˆ†é…å’Œé‡Šæ”¾å†…å­˜ï¼Œå½“ç”¨æˆ·åˆ›å»ºLuaçŠ¶æ€æ—¶å¿…é¡»æä¾›è¯¥å‡½æ•°ã€‚<br>luaL_newstateæ˜¯ä¸€ä¸ªç”¨é»˜è®¤åˆ†é…å‡½æ•°æ¥åˆ›å»ºLuaçŠ¶æ€çš„è¾…åŠ©å‡½æ•°ã€‚è¯¥é»˜è®¤åˆ†é…å‡½æ•°ä½¿ç”¨äº†æ¥è‡ªCè¯­è¨€æ ‡å‡†å‡½æ•°åº“çš„æ ‡å‡†å‡½æ•°malloc-realloc-freeï¼Œå¯¹äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œè¿™å‡ ä¸ªå‡½æ•°å¤Ÿç”¨äº†ã€‚ä½†æ˜¯ï¼Œè¦å®Œå…¨æ§åˆ¶Luaçš„å†…å­˜åˆ†é…ä¹Ÿå¾ˆå®¹æ˜“ï¼Œä½¿ç”¨åŸå§‹çš„lua_newstateæ¥åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„LuaçŠ¶æ€å³å¯ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_State *<span class="title function_">lua_newstate</span><span class="params">(lua_Alloc f, <span class="type">void</span> *ud)</span>;</span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ˜¯åˆ†é…å‡½æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯ç”¨æˆ·æ•°æ®ã€‚ç”¨è¿™ç§æ–¹å¼åˆ›å»ºçš„LuaçŠ¶æ€ä¼šé€šè¿‡è°ƒç”¨få®Œæˆæ‰€æœ‰çš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾ï¼Œç”šè‡³ç»“æ„lua_Stateä¹Ÿæ˜¯ç”±fåˆ†é…çš„ã€‚<br>åˆ†é…å‡½æ•°å¿…é¡»æ»¡è¶³lua_Allocçš„ç±»å‹å£°æ˜ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">void</span> * (*lua_Alloc) (<span class="type">void</span> *ud,</span><br><span class="line">							 <span class="type">void</span> *ptr,</span><br><span class="line">							 <span class="type">size_t</span> osize,</span><br><span class="line">							 <span class="type">size_t</span> nsize);</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå‚æ•°å§‹ç»ˆä¸ºlua_newstateæ‰€æä¾›çš„ç”¨æˆ·æ•°æ®ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ­£è¦è¢«åˆ†é…æˆ–è€…é‡Šæ”¾çš„åœ°å€ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯åŸå§‹å—çš„å¤§å°ï¼›æœ€åä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚çš„å—å¤§å°ã€‚å¦‚æœpträ¸æ˜¯NULLï¼ŒLuaä¼šä¿è¯å…¶ä¹‹å‰è¢«åˆ†é…çš„å¤§å°å°±æ˜¯osizeã€‚<br>Luaè¯­è¨€ä½¿ç”¨NULLè¡¨ç¤ºå¤§å°ä¸ºé›¶çš„å—ã€‚å½“nsizeä¸ºé›¶æ—¶ï¼Œåˆ†é…å‡½æ•°å¿…é¡»é‡Šæ”¾ptræŒ‡å‘çš„å—å¹¶è¿”å›NULLï¼Œå¯¹åº”äºæ‰€è¦æ±‚çš„å¤§å°çš„å—ã€‚å½“ptræ˜¯NULLæ—¶ï¼Œè¯¥å‡½æ•°å¿…é¡»åˆ†é…å¹¶è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„å—ï¼›å¦‚æœæ— æ³•åˆ†é…æŒ‡å®šçš„å—ï¼Œåˆ™å¿…é¡»è¿”å›NULLã€‚å¦‚æœptræ˜¯NULLå¹¶ä¸”nsizeä¸ºé›¶ï¼Œåˆ™ä¸¤æ¡è§„åˆ™éƒ½é€‚ç”¨ï¼šæœ€ç»ˆç»“æœæ˜¯åˆ†é…å‡½æ•°ä»€ä¹ˆéƒ½ä¸åšï¼Œè¿”å›NULLã€‚<br>æœ€åï¼Œå½“pträ¸æ˜¯NULLå¹¶ä¸”nsizeä¸ä¸ºé›¶æ—¶ï¼Œåˆ†é…å‡½æ•°åº”è¯¥åƒreallocä¸€æ ·é‡æ–°åˆ†é…å—å¹¶ä¸”è¿”å›æ–°åœ°å€ã€‚åŒæ ·ï¼Œå½“å‡ºç°é”™è¯¯åˆ†é…å‡½æ•°å¿…é¡»è¿”å›NULLã€‚Luaå‡å®šåˆ†é…å‡½æ•°åœ¨å—çš„æ–°å°ºå¯¸å°äºæˆ–ç­‰äºæ—§å°ºå¯¸æ—¶ä¸ä¼šå¤±è´¥ã€‚<br>luaL_newstateä½¿ç”¨çš„æ ‡å‡†åˆ†é…å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> *<span class="title function_">l_alloc</span> <span class="params">(<span class="type">void</span> *ud , <span class="type">void</span> *ptr, <span class="type">size_t</span> osize, <span class="type">size_t</span> nsize)</span>&#123;</span><br><span class="line">	(<span class="type">void</span>)ud; (<span class="type">void</span>)osie;<span class="comment">/*æœªä½¿ç”¨*/</span></span><br><span class="line">	<span class="keyword">if</span>(nsize == <span class="number">0</span> )&#123;</span><br><span class="line">		<span class="built_in">free</span>(ptr);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">realloc</span> (ptr,nsize);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°å‡è®¾free(NULL)ä»€ä¹ˆä¹Ÿä¸åšï¼Œå¹¶ä¸”realloc(NULL,size)ç­‰ä»·äºmalloc(size)ã€‚IOSCæ ‡å‡†ä¼šæ‰˜ç®¡è¿™ä¸¤ç§è¡Œä¸ºã€‚<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨lua_getallocfæ¢å¤LuaçŠ¶æ€çš„å†…å­˜åˆ†é…å™¨ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_Alloc <span class="title function_">lua_getallocf</span> <span class="params">(lua_State *L, <span class="type">void</span> **ud)</span>;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœudä¸æ˜¯NULLï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¼šæŠŠ*udè®¾ç½®ä¸ºè¯¥åˆ†é…å™¨çš„ç”¨æˆ·æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨lua_setallocfæ¥æ›´æ”¹LuaçŠ¶æ€çš„å†…å­˜åˆ†é…å™¨ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">lua_setallocf</span> <span class="params">(lua_State *L, Lua_Alloc f, <span class="type">void</span> *ud)</span>;</span><br></pre></td></tr></table></figure>
<p>è¯·è®°ä½ï¼Œæ‰€æœ‰æ–°çš„åˆ†é…å‡½æ•°éƒ½æœ‰è´£ä»»é‡Šæ”¾ç”±å‰ä¸€ä¸ªåˆ†é…å‡½æ•°åˆ†é…çš„å—ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ–°çš„åˆ†é…å‡½æ•°æ˜¯åœ¨æ—§åˆ†é…å‡½æ•°çš„åŸºç¡€ä¸Šåšäº†åŒ…è£…ï¼Œæ¥è¿½è¸ªæˆ–åŒæ­¥è®¿é—®å †çš„ã€‚<br>Luaåœ¨å†…éƒ¨ä¸ä¼šä¸ºäº†é‡ç”¨è€Œç¼“å­˜ç©ºé—²å†…å­˜ã€‚å®ƒå‡å®šåˆ†é…å‡½æ•°ä¼šå®Œæˆè¿™ç§ç¼“å­˜å·¥ä½œï¼›è€Œä¼˜ç§€çš„åˆ†é…å‡½æ•°ç¡®å®ä¹Ÿä¼šè¿™ä¹ˆåšã€‚Luaä¸ä¼šè¯•å›¾å‹ç¼©å†…å­˜ç¢ç‰‡ã€‚ç ”ç©¶è¡¨æ˜ï¼Œå†…å­˜ç¢ç‰‡æ›´å¤šæ˜¯ç”±ç³Ÿç³•çš„åˆ†é…å†³ç­–å¯¼è‡´çš„ï¼Œè€Œéç¨‹åºçš„è¡Œä¸ºé€ æˆçš„ï¼›è€Œä¼˜ç§€çš„åˆ†é…å‡½æ•°ä¸ä¼šé€ æˆå¤ªå¤šå†…å­˜ç¢ç‰‡ã€‚<br>å¯¹äºå·²æœ‰çš„ä¼˜ç§€åˆ†é…å‡½æ•°ï¼Œæƒ³è¦åšåˆ°æ¯”å®ƒæ›´å¥½æ˜¯å¾ˆéš¾çš„ï¼Œä½†æœ‰æ—¶å€™ä¹Ÿä¸å¦¨è¯•ä¸€è¯•ã€‚ä¾‹å¦‚ï¼ŒLuaä¼šå‘Šè¯‰ä½ å·²ç»é‡Šæ”¾æˆ–è€…é‡æ–°åˆ†é…çš„å—çš„å¤§å°ã€‚å› æ­¤ï¼Œä¸€ä¸ªç‰¹å®šçš„åˆ†é…å‡½æ•°ä¸éœ€è¦ä¿å­˜æœ‰å…³å—å¤§å°çš„ä¿¡æ¯ï¼Œä»¥æ­¤å‡å°‘æ¯ä¸ªå—çš„å†…å­˜å¼€é”€ã€‚<br>è¿˜æœ‰ä¸€ç§å¯ä»¥æ”¹å–„çš„å†…å­˜åˆ†é…çš„åœºæ™¯ï¼Œæ˜¯åœ¨å¤šçº¿ç¨‹ç³»ç»Ÿä¸­ã€‚è¿™ç§ç³»ç»Ÿé€šå¸¸éœ€è¦å¯¹å†…å­˜åˆ†é…å‡½æ•°è¿›è¡Œçº¿ç¨‹åŒæ­¥ï¼Œå› ä¸ºè¿™äº›å‡½æ•°ä½¿ç”¨çš„æ˜¯å…¨å±€èµ„æºã€‚ä¸è¿‡ï¼Œå¯¹LuaçŠ¶æ€çš„è®¿é—®ä¹Ÿå¿…é¡»æ˜¯åŒæ­¥çš„â€”â€”æˆ–è€…æ›´å¥½çš„æƒ…å†µæ˜¯ï¼Œé™åˆ¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®LuaçŠ¶æ€ã€‚å¦‚æœæ¯ä¸ªLuaçŠ¶æ€éƒ½ä»ç§æœ‰çš„å†…å­˜æ± ä¸­åˆ†é…å†…å­˜ï¼Œé‚£ä¹ˆåˆ†é…å‡½æ•°å°±å¯ä»¥é¿å…çº¿ç¨‹åŒæ­¥å¯¼è‡´çš„é¢å¤–å¼€é”€äº†ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>C</tag>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoæ·»åŠ jVectorMapè¶³è¿¹åœ°å›¾</title>
    <url>/ced8a6a3.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>æœ¬æ–¹æ³•é€‚ç”¨ä¸ä»»ä½•ä¸»é¢˜<br>è¶³è¿¹åœ°å›¾ä½œè€…æ•ˆæœå¦‚ä¸‹ï¼š<br><img data-src="https://s1.ax1x.com/2022/11/03/xqsHHK.jpg" alt="æ•ˆæœå›¾" /></p>
<span id="more"></span>

<h3 id="jVectorMap"><a href="#jVectorMap" class="headerlink" title="jVectorMap"></a>jVectorMap</h3><p>JVectorMap æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ã€å…¼å®¹æ€§å¼ºçš„ jQuery åœ°å›¾æ’ä»¶ã€‚</p>
<p>å®ƒå¯ä»¥å·¥ä½œåœ¨åŒ…æ‹¬ IE6 åœ¨å†…çš„å„æ¬¾æµè§ˆå™¨ä¸­ï¼ŒçŸ¢é‡å›¾è¾“å‡ºï¼Œé™¤å®˜æ–¹æä¾›å„å›½åœ°å›¾æ•°æ®å¤–ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨æ•°æ®è½¬æ¢ç¨‹åºå®šåˆ¶åœ°å›¾æ•°æ®ã€‚ä¾‹å¦‚è¡—é“åœ°å›¾ã€å°åŒºåœ°å›¾ç­‰ç­‰ã€‚</p>
<p>JVectorMap å®˜æ–¹ç½‘ç«™æä¾›äº†å¾ˆå¤šç›¸å…³æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªå·±ç ”ç©¶ä¸€ä¸‹ã€‚</p>
<a href="http://jvectormap.com/" title="" target="">å®˜æ–¹ç½‘ç«™,</a>

<p>ä»Šå¤©æ•™å¤§å®¶é€šè¿‡ jVectorMap åˆ¶ä½œæ—…è¡Œè¶³è¿¹åœ°å›¾ï¼Œæœ€ç»ˆçš„æ•ˆæœå¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„ Demo æ¼”ç¤ºï¼ˆä¸­å›½ï¼‰ï¼Œå¹¶æ•™å¤§å®¶å¦‚ä½•å°†åˆ¶ä½œå¥½çš„è¶³è¿¹åœ°å›¾åµŒå…¥åˆ°æˆ‘ä»¬è‡ªå·±çš„åšå®¢ä¸­ã€‚</p>
<a href="https://lengmo714.top/net/map/index.html" title="" target="">Demo,</a>


<h3 id="è·å–æºç "><a href="#è·å–æºç " class="headerlink" title="è·å–æºç "></a>è·å–æºç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">git clone <span class="attr">https</span>:<span class="comment">//github.com/HelloWuJiaYi/jVectorMap-Footprint</span></span><br></pre></td></tr></table></figure>
<h3 id="æ–‡ä»¶è¯´æ˜"><a href="#æ–‡ä»¶è¯´æ˜" class="headerlink" title="æ–‡ä»¶è¯´æ˜"></a>æ–‡ä»¶è¯´æ˜</h3><img data-src="https://s1.ax1x.com/2022/11/03/xqs7B6.jpg" alt="ç¤ºæ„å›¾"/>

<ul>
<li>ç»¿è‰²æ¡†ä¸­æ˜¯å¿…é¡»è¦å¼•å…¥çš„æ–‡ä»¶å†…å®¹ã€‚</li>
<li>ä¸‹é¢ä¸‰ä¸ªæ–‡ä»¶æ˜¯å±•ç¤ºçš„åœ°å›¾ï¼Œå¯è‡ªè¡Œåˆ°å®˜ç½‘ä¸‹è½½éœ€è¦çš„åœ°å›¾ : <a href="http://jvectormap.com/maps/world/world/">http://jvectormap.com/maps/world/world/</a>  ï¼Œæ‹·è´åˆ° js ç›®å½•ã€‚(è¿™é‡Œè·å–çš„æºä»£ç ä¸­å·²ç»æä¾›)</li>
<li>index.htmlä¸­éœ€è¦æ·»åŠ è¶³è¿¹ä½ç½®å’Œç›¸å…³æ ·å¼ã€‚</li>
</ul>
<h3 id="å¦‚ä½•æ›´æ¢ä¸åŒå›½å®¶åœ°å›¾"><a href="#å¦‚ä½•æ›´æ¢ä¸åŒå›½å®¶åœ°å›¾" class="headerlink" title="å¦‚ä½•æ›´æ¢ä¸åŒå›½å®¶åœ°å›¾"></a>å¦‚ä½•æ›´æ¢ä¸åŒå›½å®¶åœ°å›¾</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--å¼•å…¥jQueryæ¡†æ¶--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery-1.9.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--å¼•å…¥jVectorMapåº“--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery-jvectormap-1.2.2.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--å¼•å…¥æ ·å¼è¡¨--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;js/jquery-jvectormap-1.2.2.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">media</span>=<span class="string">&quot;screen&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--å¼•å…¥ä¸­å›½åœ°å›¾æ•°æ®åº“--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery-jvectormap-cn-merc-en.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--å¼•å…¥ç¾å›½åœ°å›¾æ•°æ®åº“--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--script type=&quot;text/javascript&quot; src=&quot;js/jquery-jvectormap-us-aea.js&quot;&gt;&lt;/script--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--å¼•å…¥ä¸–ç•Œåœ°å›¾æ•°æ®åº“--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--script type=&quot;text/javascript&quot; src=&quot;js/jquery-jvectormap-world-mill.js&quot;&gt;&lt;/script--&gt;</span></span></span><br><span class="line"></span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br></pre></td></tr></table></figure>

<p>æå‰ä¸‹è½½éœ€è¦çš„å›½å®¶åœ°å›¾ï¼Œé»˜è®¤ä½¿ç”¨ä¸­å›½åœ°å›¾æ‹·è´åˆ° <code>js</code> ç›®å½•ä¸‹ã€‚</p>
<p>åœ¨ <code>&lt;head&gt;</code> æ ‡ç­¾é‡Œå¼•å…¥åœ°å›¾æ•°æ®ï¼š <code>&lt;script type=&quot;text/javascript&quot; src=&quot;js/åœ°å›¾æ–‡ä»¶å&quot;&gt;&lt;/script&gt;</code><br>åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªåœ°å›¾åº“ï¼Œæ³¨æ„ä¸è¦å¼•å…¥å¤šä¸ªåœ°å›¾æ•°æ®ã€‚</p>
<h3 id="ä¿®æ”¹åœ°å›¾é¢œè‰²ç­‰ç›¸å…³æ ·å¼"><a href="#ä¿®æ”¹åœ°å›¾é¢œè‰²ç­‰ç›¸å…³æ ·å¼" class="headerlink" title="ä¿®æ”¹åœ°å›¾é¢œè‰²ç­‰ç›¸å…³æ ·å¼"></a>ä¿®æ”¹åœ°å›¾é¢œè‰²ç­‰ç›¸å…³æ ·å¼</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">  &lt;!--background-<span class="attr">color</span>: åœ°å›¾èƒŒæ™¯é¢œè‰²--&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color:#353535&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        $(<span class="string">&#x27;#map&#x27;</span>).<span class="title function_">vectorMap</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// æ­¤å¤„æ›´æ”¹åœ°å›¾</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">map</span>: <span class="string">&#x27;cn_merc_en&#x27;</span>,   <span class="comment">// ä¸­å›½åœ°å›¾</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//map: &#x27;us-aea&#x27;,     // ç¾å›½åœ°å›¾</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//map: &#x27;world-mill&#x27;, // ä¸–ç•Œåœ°å›¾</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">backgroundColor</span>: <span class="string">&#x27;transparent&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">zoomMin</span>: <span class="number">0.9</span>, <span class="comment">// é¼ æ ‡ç¼©æ”¾æ—¶çš„æœ€å°æ¯”ä¾‹</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">zoomMax</span>: <span class="number">2.4</span>, <span class="comment">// é¼ æ ‡ç¼©æ”¾æ—¶çš„æœ€å¤§æ¯”ä¾‹</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">focusOn</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">x</span>: <span class="number">0.55</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">y</span>: <span class="number">2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">scale</span>: <span class="number">0.9</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">regionStyle</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">initial</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">fill</span>: <span class="string">&#x27;#e5e5e5&#x27;</span>,   <span class="comment">// åœ°å›¾é¢œè‰²</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="string">&quot;fill-opacity&quot;</span>: <span class="number">1</span>, <span class="comment">// çœä»½ï¼ˆå·ï¼‰æ˜¯å¦éšè—ï¼Œé¼ æ ‡æ»‘åŠ¨æ—¶æ˜¾ç¤º; 1ï¼šæ˜¾ç¤ºï¼Œ2ï¼šéšè—ã€‚</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">stroke</span>: <span class="string">&#x27;none&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="string">&quot;stroke-width&quot;</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="string">&quot;stroke-opacity&quot;</span>: <span class="number">1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">hover</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">fill</span>: <span class="string">&#x27;#ccc&#x27;</span>,  <span class="comment">// é¼ æ ‡æ»‘åŠ¨è‡³æŸçœä»½çš„é«˜äº®é¢œè‰²ã€‚</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="string">&quot;fill-opacity&quot;</span>: <span class="number">0.8</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">selected</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">fill</span>: <span class="string">&#x27;yellow&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">selectedHover</span>: &#123;&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">markerStyle</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">initial</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">fill</span>: <span class="string">&#x27;#fd8888&#x27;</span>, <span class="comment">// è¶³è¿¹ä½ç½®çš„å¡«å……é¢œè‰²</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">stroke</span>: <span class="string">&#x27;#fff&#x27;</span>   <span class="comment">// è¶³è¿¹ä½ç½®çš„æè¾¹é¢œè‰²</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">hover</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">fill</span>: <span class="string">&#x27;#fd2020&#x27;</span>, <span class="comment">// é¼ æ ‡æ»‘åŠ¨è‡³è¶³è¿¹ä½ç½®åçš„å¡«å……é¢œè‰²</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">stroke</span>: <span class="string">&#x27;#fff&#x27;</span>,  <span class="comment">// é¼ æ ‡æ»‘åŠ¨è‡³è¶³è¿¹ä½ç½®åçš„æè¾¹é¢œè‰²</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="string">&quot;fill-opacity&quot;</span>: <span class="number">0.8</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>å‚ç…§ä»£ç æ³¨é‡Šä¿®æ”¹é¢œè‰²å’Œç›¸å…³æ ·å¼ã€‚</p>
<p><strong>åƒä¸‡æ³¨æ„ï¼š</strong> åœ¨æ›´æ”¹åœ°å›¾æ—¶ <code>map: &#39;åœ°å›¾åç§°&#39;</code> ï¼Œåœ°å›¾åç§°æ˜¯åœ°å›¾æ•°æ®æ–‡ä»¶åçš„ååŠéƒ¨åˆ†ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>ä¸­å›½åœ°å›¾æ–‡ä»¶åï¼š<code>jquery-jvectormap-cn-merc-en.js</code></p>
<p>é‚£åœ°å›¾çš„åç§°æ˜¯ï¼š<code>cn-merc-en</code></p>
<p>ä½†æ˜¯è¦æ³¨æ„æŠŠ <code>-</code> (æ¨ªæ )æ›´æ”¹æˆ <code>_</code>ï¼ˆä¸‹åˆ’çº¿ï¼‰ã€‚ å¦åˆ™ä¸ä¼šæ˜¾ç¤ºåœ°å›¾ã€‚</p>
<h3 id="æ·»åŠ è¶³è¿¹ä½ç½®"><a href="#æ·»åŠ è¶³è¿¹ä½ç½®" class="headerlink" title="æ·»åŠ è¶³è¿¹ä½ç½®"></a>æ·»åŠ è¶³è¿¹ä½ç½®</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">markers</span>: [ <span class="comment">// è¶³è¿¹ä½ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#123;latLng: [ç»åº¦ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰, çº¬åº¦ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰], name: &#x27;åŸå¸‚åç§°&#x27;&#125;,</span></span><br><span class="line"></span><br><span class="line">        &#123;<span class="attr">latLng</span>: [<span class="number">39.90</span>, <span class="number">116.41</span>], <span class="attr">name</span>: <span class="string">&#x27;åŒ—äº¬&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">latLng</span>: [<span class="number">31.24</span>, <span class="number">121.50</span>], <span class="attr">name</span>: <span class="string">&#x27;ä¸Šæµ·&#x27;</span>&#125;,</span><br><span class="line"></span><br><span class="line">        &#123;<span class="attr">latLng</span>: [<span class="number">46.06</span>, <span class="number">122.06</span>], <span class="attr">name</span>: <span class="string">&#x27;å†…è’™å¤ - ä¹Œå…°æµ©ç‰¹&#x27;</span>&#125;</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>
<p>è¯­æ³•ï¼š<code>&#123;latLng: [ç»åº¦ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰, çº¬åº¦ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰], name: &#39;åŸå¸‚åç§°&#39;&#125;</code>ã€‚</p>
<h3 id="åµŒå…¥åˆ°åšå®¢"><a href="#åµŒå…¥åˆ°åšå®¢" class="headerlink" title="åµŒå…¥åˆ°åšå®¢"></a>åµŒå…¥åˆ°åšå®¢</h3><p>è¿™é‡Œä»‹ç»ä½œè€…åµŒå…¥åˆ°åšå®¢ä¸­çš„æ–¹æ³•ï¼Œä¸ä¸€å®šé€šç”¨ã€‚<br>ä½œè€…ä½¿ç”¨çš„æ˜¯Hexoé™æ€åšå®¢ã€‚<br>é¦–å…ˆå°†ä¸‹è½½ä¸‹æ¥çš„æºä»£ç æ”¾åˆ°blogæ–‡ä»¶å¤¹ä¸‹ï¼Œä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚<br>å†åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.yml</code>ä¸­<code>menu</code>ä¸­æ·»åŠ åˆšåˆšä¿®æ”¹å¥½çš„<code>index.html</code>åœ¨æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶è·¯å¾„ï¼Œæ¯”å¦‚<code>https://abc.com/map/index</code><br>æœ€åå°†ä¿®æ”¹åçš„é…ç½®æ–‡ä»¶ä¸Šä¼ å³å¯ã€‚</p>
<a href="https://lengmo714.top/net/map/index.html" title="" target="">ç¬”è€…æ•ˆæœ,</a>

]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
  </entry>
  <entry>
    <title>IEæµè§ˆå™¨åœç”¨ï¼Œé IEæ‰èƒ½æ‰“å¼€çš„ç½‘é¡µæ€ä¹ˆåŠ</title>
    <url>/fbea9931.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œå¾®è½¯å·²ç»åœç”¨IEæµè§ˆå™¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯Edgeæµè§ˆå™¨ã€‚è¿™ä¸€æ”¹å˜ï¼Œå¯¼è‡´ç°åœ¨å¸‚é¢ä¸Šéœ€è¦ä»…IEæµè§ˆå™¨æ‰èƒ½æ‰“å¼€çš„ç½‘ç«™æ— æ³•ä½¿ç”¨ï¼Œç½‘ä¸Šæœ‰è®¸å¤šçš„è§£å†³æ–¹æ³•ï¼Œè¿™é‡Œç¬”è€…ä¹Ÿä»‹ç»ä¸€ç§æˆ‘æ­£åœ¨ä½¿ç”¨çš„ã€‚</p>
<p>ç¬”è€…æ˜¾ç¤ºéœ€è¦æ‰“å¼€è¿™ä¸ªç½‘ç«™<a href="https://www.yljr.com/register.xhtml">ä¸­ä¼äº‘é“¾</a>ï¼Œæ‰“å¼€å°±ä¼šæœ‰ä¸‹é¢å¼¹çª—æç¤ºï¼š<br><img data-src="https://pic.imgdb.cn/item/664332a50ea9cb1403a5089c.png" alt="" /></p>
<h3 id="è§£å†³æ­¥éª¤"><a href="#è§£å†³æ­¥éª¤" class="headerlink" title="è§£å†³æ­¥éª¤"></a>è§£å†³æ­¥éª¤</h3><ol>
<li>æ‰“å¼€Edgeæµè§ˆå™¨ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹æŒ‰é’®ï¼Œé€‰æ‹©<code>è®¾ç½®</code>â€&#96;ã€‚<img data-src="https://pic.imgdb.cn/item/664335c30ea9cb1403a9ddb4.jpg" alt="" /></li>
<li>åœ¨è®¾ç½®èœå•ä¸­é€‰æ‹©<code>é»˜è®¤æµè§ˆå™¨</code>ï¼Œå°†<code>å…è®¸åœ¨Internet Exploreræ¨¡å¼ä¸‹é‡æ–°åŠ è½½ç½‘ç«™</code>è®¾ç½®ä¸º<code>å…è®¸</code>ã€‚<img data-src="https://pic.imgdb.cn/item/664335ee0ea9cb1403aa1a24.png" alt="" /></li>
<li>ç‚¹å‡»<code>é‡å¯</code>ï¼Œä»¥ä¾¿ä½¿è®¾ç½®ç”Ÿæ•ˆã€‚<img data-src="https://pic.imgdb.cn/item/664336140ea9cb1403ab4f22.png" alt="" /></li>
<li>æµè§ˆå™¨é‡å¯åï¼Œåœ¨Edgeæµè§ˆå™¨ä¸­æ‰“å¼€æ‰€éœ€ç½‘é¡µï¼Œç‚¹å‡»å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹ï¼Œç„¶åé€‰æ‹©<code>åœ¨Internet Exploreræ¨¡å¼ä¸‹é‡æ–°åŠ è½½ç½‘ç«™</code>ã€‚<img data-src="https://pic.imgdb.cn/item/6643362b0ea9cb1403ac3245.jpg" alt="" /></li>
</ol>
<p>è®¾ç½®å®Œåï¼Œå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨å•¦~</p>
]]></content>
      <categories>
        <category>ç”µè„‘ä½¿ç”¨æŠ€å·§</category>
      </categories>
      <tags>
        <tag>ç”µè„‘ä½¿ç”¨æŠ€å·§</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaä¸­System.out.printlnå’ŒSystem.out.printçš„åŒºåˆ«</title>
    <url>/774329ab.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>javaé‡Œå¸¸ç”¨çš„æ§åˆ¶å°è¾“å‡ºè¯­å¥æœ‰System.out.printlnå’ŒSystem.out.printã€‚ä½†æ˜¯è¿™2è€…æœ‰ä»€ä¹ˆåŒºåˆ«äº†ï¼Ÿ</p>
<p>æœ€æ˜æ˜¾çš„åŒºåˆ«å°±æ˜¯</p>
<blockquote>
<p>System.out.println()è¾“å‡ºåè¿½åŠ ä¸€ä¸ªæ¢è¡Œ<br>è€Œ System.out.print()è¾“å‡ºåä¸ä¼šæ¢è¡Œ</p>
</blockquote>
<p>ä¾‹å¦‚:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForEachLoop</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        String[] words = &#123;<span class="string">&quot;Welcome &quot;</span>,<span class="string">&quot;to &quot;</span>,<span class="string">&quot;myBlog&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (String word: words)&#123;</span><br><span class="line">            System.out.println(word);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºä¸º:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Welcome</span><br><span class="line">to</span><br><span class="line">myBlog</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForEachLoop</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        String[] words = &#123;<span class="string">&quot;Welcome &quot;</span>,<span class="string">&quot;to &quot;</span>,<span class="string">&quot;myBlog&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (String word: words)&#123;</span><br><span class="line">            System.out.print(word);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºä¸º:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Welcome to myBlog</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaåŸºæœ¬æ•°æ®ç±»å‹</title>
    <url>/c80e1ec8.html</url>
    <content><![CDATA[<h1 id="Java-åŸºæœ¬æ•°æ®ç±»å‹"><a href="#Java-åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="Java åŸºæœ¬æ•°æ®ç±»å‹"></a>Java åŸºæœ¬æ•°æ®ç±»å‹</h1><p>åœ¨ Java ä¸­ï¼Œä¸€å…±æœ‰ä¸¤å¤§æ•°æ®ç±»å‹ï¼š</p>
<ul>
<li>åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå†…ç½®æ•°æ®ç±»å‹ï¼‰</li>
<li>å¼•ç”¨æ•°æ®ç±»å‹<br>å‡ºæ¥ç»å¸¸ç”¨åˆ°çš„ <code>int</code> ç±»å‹å¤–,Java è¯­è¨€è¿˜æœ‰å…¶ä»– 7 ç§åŸºæœ¬æ•°æ®ç±»å‹ã€‚å®ƒä»¬ç”±è¯­è¨€é¢„å…ˆå®šä¹‰ï¼Œä¹Ÿç§°å†…ç½®æ•°æ®ç±»å‹ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒä»¬æ˜¯ Java è¯­è¨€ä¸­æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ã€‚å¦å¤–æ³¨æ„ï¼šå¼•ç”¨æ•°æ®ç±»å‹å¹¶ä¸å±äºåŸºæœ¬æ•°æ®ç±»å‹çš„èŒƒç•´ï¼Œæˆ‘ä»¬å°†åœ¨åé¢è®²è§£ã€‚<span id="more"></span></li>
</ul>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Java è¯­è¨€æ”¯æŒ 8 ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼š<code>byte</code>ï¼Œ<code>short</code>ï¼Œ<code>int</code>ï¼Œ<code>long</code>ï¼Œ<code>float</code>ï¼Œ<code>double</code>ï¼Œ<code>char</code> å’Œ <code>boolean</code></p>
<h2 id="åˆ†ç±»å’Œç‰¹ç‚¹"><a href="#åˆ†ç±»å’Œç‰¹ç‚¹" class="headerlink" title="åˆ†ç±»å’Œç‰¹ç‚¹"></a>åˆ†ç±»å’Œç‰¹ç‚¹</h2><h3 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h3><p>åŸºæœ¬æ•°æ®ç±»å‹å®šä¹‰åœ¨ <code>Java</code>ç±»å‹ç³»ç»Ÿä¸­ï¼Œåœ¨ç±»å‹ç³»ç»Ÿä¸­ï¼Œåˆå¯å°†åŸºæœ¬ç±»å‹åˆ†ä¸ºä¸‰å¤§ç±»ï¼š</p>
<ul>
<li>æ•°å­—å‹ï¼šåŒ…å« <code>short</code>ã€<code>int</code>ã€<code>long</code>ã€<code>float</code> å’Œ <code>double</code>ï¼Œåªèƒ½å­˜å‚¨æ•°å­—æ•°æ®ï¼›</li>
<li>å­—ç¬¦å‹ï¼š<code>byte</code> å’Œ <code>char</code>ï¼Œåªèƒ½å­˜å‚¨å­—ç¬¦æ•°æ®ï¼›</li>
<li>å¸ƒå°”ç±»å‹ï¼š<code>boolean</code>ï¼Œåªèƒ½å­˜å‚¨ <code>true</code>(çœŸ) æˆ– <code>false</code>(å‡)ã€‚</li>
</ul>
<h3 id="èŒƒå›´å’Œé»˜è®¤å€¼"><a href="#èŒƒå›´å’Œé»˜è®¤å€¼" class="headerlink" title="èŒƒå›´å’Œé»˜è®¤å€¼"></a>èŒƒå›´å’Œé»˜è®¤å€¼</h3><p>åŸºæœ¬ç±»å‹éƒ½æœ‰å›ºå®šçš„å¤§å°ï¼Œå› æ­¤ï¼ŒåŸºæœ¬ç±»å‹çš„å€¼ä¼šè¢«é™åˆ¶åœ¨ä¸€ä¸ªèŒƒå›´å†…ã€‚</p>
<p>å¦å¤–ï¼Œåœ¨å£°æ˜å˜é‡æ—¶ï¼Œä¸ä¸€å®šæ€»æ˜¯éœ€è¦åˆ†é…å€¼ã€‚ç¼–è¯‘å™¨ä¼šå°†å·²å£°æ˜ä½†æœªåˆå§‹åŒ–çš„å­—æ®µè®¾ç½®åˆç†çš„é»˜è®¤å€¼ã€‚<strong>ä½†æ˜¯ï¼Œå»ºè®®ä¸ºæ¯ä¸ªå˜é‡éƒ½èµ‹åˆå§‹å€¼ï¼Œè¿™æ˜¯å¾ˆå¥½çš„ç¼–ç¨‹ä¹ æƒ¯</strong>ã€‚</p>
<h3 id="å¸¸è§é”™è¯¯"><a href="#å¸¸è§é”™è¯¯" class="headerlink" title="å¸¸è§é”™è¯¯"></a>å¸¸è§é”™è¯¯</h3><p>åœ¨ç¼–ç è¿‡ç¨‹ä¸­ï¼Œè¦ç‰¹åˆ«æ³¨æ„å˜é‡ä¸è¦è¶…å‡ºå…¶ç±»å‹çš„èŒƒå›´ï¼Œè¯·æŸ¥çœ‹å¦‚ä¸‹ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemoryOverflow</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      	<span class="comment">// Integer.MAX_VALUE ç”¨æ¥intç±»å‹èƒ½å­˜å‚¨çš„æœ€å¤§å€¼</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">maximumValue</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line">      	System.out.println(<span class="string">&quot;intç±»å‹èƒ½å¤Ÿå­˜å‚¨çš„æœ€å¤§å€¼ä¸ºï¼š&quot;</span> + maximumValue);</span><br><span class="line">        System.out.println(maximumValue + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int ç±»å‹èƒ½å¤Ÿå­˜å‚¨çš„æœ€å¤§å€¼ä¸º2147483647</span><br><span class="line">-2147483648</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å‘ç° <code>int</code> ç±»å‹èƒ½å­˜å‚¨çš„æœ€å¤§å€¼åŠ  1 ä¹‹åï¼Œå˜æˆäº†ä¸€ä¸ªè´Ÿæ•°ï¼Œè¿™ä¸ªæ•°å…¶å®å°±æ˜¯ <code>int</code> ç±»å‹èƒ½å¤Ÿå­˜æ”¾çš„æœ€å°å€¼ï¼Œè¿™æ˜¯å› ä¸ºåŠ  1 ä¹‹åå˜é‡è¶…å‡ºäº† <code>int</code> ç±»å‹èƒ½å¤Ÿå­˜å‚¨çš„æœ€å¤§å€¼ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å¸¸å¸¸è¯´çš„å†…å­˜æº¢å‡ºé”™è¯¯ã€‚</p>
<p>è¿˜è¦ç‰¹åˆ«æ³¨æ„ä¸€ç‚¹ï¼Œç”±äº<strong>Java</strong>æ˜¯<strong>å¼ºç±»å‹</strong>çš„ï¼Œæ¯ä¸ªå˜é‡éƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼Œåªæœ‰ç»™å®šç§ç±»çš„å€¼èƒ½å¤Ÿå­˜å‚¨åˆ°è¯¥å˜é‡ä¸­ã€‚ä¾‹å¦‚ï¼Œä¸èƒ½å°†æµ®ç‚¹å‹çš„æ•°å­—èµ‹å€¼ç»™æ•´å‹å˜é‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IncompatibleTypeError</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> age;</span><br><span class="line">      	age = <span class="number">20.5f</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æºä»£ç åœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ javac IncompatibleTypeError.java</span><br><span class="line">IncompatibleTypeError.java:4: é”™è¯¯: ä¸å…¼å®¹çš„ç±»å‹: ä»floatè½¬æ¢åˆ°intå¯èƒ½ä¼šæœ‰æŸå¤±</span><br><span class="line">      	age = 20.5f;</span><br><span class="line">      	      ^</span><br><span class="line">1 ä¸ªé”™è¯¯</span><br></pre></td></tr></table></figure>
<h2 id="æ•´å‹"><a href="#æ•´å‹" class="headerlink" title="æ•´å‹"></a>æ•´å‹</h2><p>æ•´å‹å°±æ˜¯æ•´æ•°ç±»å‹ï¼Œå’Œæ•°å­¦ä¸­çš„æ•´æ•°æ„ä¹‰ç›¸åŒï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªæ•´å‹å˜é‡age</span></span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªæ•´å‹å˜é‡ score</span></span><br><span class="line"><span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure>
<p>æ•´å‹é™¤äº† <code>int </code>ç±»å‹ï¼Œè¿˜æœ‰ <code>short</code> å’Œ <code>long</code> ç±»å‹ï¼Œä¹Ÿå°±æ˜¯çŸ­æ•´å‹å’Œé•¿æ•´å‹ï¼Œä»–ä»¬ç”¨äºå­˜æ”¾ä¸åŒèŒƒå›´çš„æ•´æ•°å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>long</code> ç±»å‹çš„å€¼åé¢è¦ä»¥å¤§å†™å­—æ¯ <code>L </code>æˆ–å°å†™å­—æ¯ <code>l</code> ç»“å°¾ã€‚è¯·é˜…è¯»ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªçŸ­æ•´å‹å˜é‡a</span></span><br><span class="line"><span class="type">short</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªé•¿æ•´å‹å˜é‡b</span></span><br><span class="line"><span class="type">long</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">100l</span>;</span><br><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªé•¿æ•´å‹å˜é‡c</span></span><br><span class="line"><span class="type">long</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">100L</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Tips</strong>ï¼šå¯¹äºé•¿æ•´å‹ï¼Œæ¨èåé¢æ€»ä»¥å¤§å†™å­—æ¯ <code>L</code> ç»“å°¾ï¼Œå› ä¸ºå°å†™å­—æ¯ <code>l</code>ä¸æ•°å­— <code>1</code> å®¹æ˜“æ··æ·†ã€‚</p>
</blockquote>
<p>å’Œæ•°å­¦ä¸€æ ·ï¼Œè®¡ç®—æœºä¸­çš„æ•´å‹ä¹Ÿæœ‰è¿›åˆ¶çš„æ¦‚å¿µï¼Œ<code>Java</code> å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§è¿›åˆ¶ç³»ç»Ÿè¡¨ç¤ºï¼š</p>
<ul>
<li><strong>åè¿›åˆ¶</strong>ï¼šåŸºæ•°ä¸º 10ï¼Œç”± 0 åˆ° 9 ç»„æˆï¼› è¿™æ˜¯æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­ä½¿ç”¨çš„æ•°å­—ç³»ç»Ÿï¼›</li>
<li><strong>åå…­è¿›åˆ¶</strong>ï¼šåŸºæ•°ä¸º 16ï¼Œç”±æ•°å­— 0 åˆ° 9 å’Œå­—æ¯ A åˆ° F ç»„æˆï¼›</li>
<li><strong>äºŒè¿›åˆ¶</strong>ï¼šåŸºæ•°ä¸º 2ï¼Œç”±æ•°å­— 0 å’Œ 1 ç»„æˆã€‚<br>åœ¨ <code>Java</code> ä¸­ï¼Œåå…­è¿›åˆ¶å’ŒäºŒè¿›åˆ¶éœ€è¦ä»¥å‰ç¼€åŒºåˆ†ï¼Œå‰ç¼€ <code>0x</code> è¡¨ç¤ºåå…­è¿›åˆ¶ï¼Œå‰ç¼€ <code>0b</code> è¡¨ç¤ºäºŒè¿›åˆ¶ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åè¿›åˆ¶è¡¨ç¤ºæ•°å­—10</span></span><br><span class="line"><span class="type">int</span> <span class="variable">decimalValue</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">// åå…­è¿›åˆ¶è¡¨ç¤ºæ•°å­—10</span></span><br><span class="line"><span class="type">int</span> <span class="variable">hexadecimalValue</span> <span class="operator">=</span> <span class="number">0xA</span>;</span><br><span class="line"><span class="comment">// äºŒè¿›åˆ¶è¡¨ç¤ºæ•°å­—10</span></span><br><span class="line"><span class="type">int</span> <span class="variable">binaryValue</span> <span class="operator">=</span> <span class="number">0b1010</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="æµ®ç‚¹å‹"><a href="#æµ®ç‚¹å‹" class="headerlink" title="æµ®ç‚¹å‹"></a>æµ®ç‚¹å‹</h2><p>æµ®ç‚¹ç±»å‹å°±æ˜¯æ•°å­¦ä¸­çš„å°æ•°ï¼Œåœ¨ <code>Java</code> ä¸­ï¼Œæµ®ç‚¹å‹åˆå¯åˆ†ä¸ºå•ç²¾åº¦æµ®ç‚¹å‹ (<code>float</code>) å’ŒåŒç²¾åº¦æµ®ç‚¹å‹ (<code>double</code>)ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>float</code> ç±»å‹çš„å€¼å¿…é¡»è¦ä»¥å¤§å†™å­—æ¯ <code>F</code> æˆ–å°å†™å­—æ¯ <code>f</code> ç»“å°¾ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="number">1.2f</span>;</span><br><span class="line"><span class="type">float</span> <span class="variable">f2</span> <span class="operator">=</span> <span class="number">10.56F</span>;</span><br></pre></td></tr></table></figure>
<p><code>double</code> ç±»å‹çš„å€¼å¯ä»¥ä»¥å­—æ¯ <code>D</code> æˆ– <code>d</code> ç»“å°¾ï¼Œä½†ä¸åšå¼ºåˆ¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä¸‰ä¸ªdoubleç±»å‹å˜é‡ï¼Œå…¶å€¼éƒ½ä¸º123.3</span></span><br><span class="line"><span class="type">double</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="number">123.3</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="number">123.3D</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">d3</span> <span class="operator">=</span> <span class="number">123.3d</span>;</span><br></pre></td></tr></table></figure>
<p>å¦å¤–æµ®ç‚¹ç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨å­—æ¯ <code>E</code> æˆ– <code>e</code>ï¼Œåé¢è·Ÿä¸Šæ¬¡æ–¹çš„æ•°å€¼ï¼Œæ¥è¡¨ç¤ºæ•°å­¦ä¸­çš„ç§‘å­¦è®¡æ•°æ³•ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºçš„ 123.4</span></span><br><span class="line"><span class="type">double</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="number">1.234e2</span>;</span><br><span class="line"><span class="type">float</span> <span class="variable">f1</span>  <span class="operator">=</span> <span class="number">1.234e2f</span>;</span><br><span class="line"><span class="comment">// ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤º 200022.1</span></span><br><span class="line"><span class="type">double</span> <span class="variable">d3</span> <span class="operator">=</span> <span class="number">2.000221e5</span></span><br></pre></td></tr></table></figure>
<h2 id="å¸ƒå°”ç±»å‹"><a href="#å¸ƒå°”ç±»å‹" class="headerlink" title="å¸ƒå°”ç±»å‹"></a>å¸ƒå°”ç±»å‹</h2><p>å¸ƒå°”ç±»å‹ <code>boolean</code> åªæœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼š<code>true</code> å’Œ <code>false</code>ï¼Œå®ƒæ˜¯ç”¨äºè·Ÿè¸ªåˆ¤æ–­æ¡ä»¶çœŸå‡çš„æ ‡å¿—ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">b2</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<h2 id="å­—ç¬¦ç±»å‹"><a href="#å­—ç¬¦ç±»å‹" class="headerlink" title="å­—ç¬¦ç±»å‹"></a>å­—ç¬¦ç±»å‹</h2><p>å­—ç¬¦ç±»å‹ <code>char</code> è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚Java ä¸­çš„ <code>char</code> ç±»å‹é™¤äº†å¯è¡¨ç¤ºæ ‡å‡†çš„ <code>ASCII</code> å¤–ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºä¸€ä¸ª <code>Unicode</code> å­—ç¬¦ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CharType</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å­˜æ”¾ä¸€ä¸ª ASCII ç </span></span><br><span class="line">        <span class="type">char</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">97</span>;</span><br><span class="line">        <span class="comment">// å­˜æ”¾ä¸€ä¸ªUnicodeå­—ç¬¦</span></span><br><span class="line">        <span class="type">char</span> <span class="variable">zh</span> <span class="operator">=</span> <span class="string">&#x27;æ…•&#x27;</span>;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">        System.out.println(zh);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a</span><br><span class="line">æ…•</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå˜é‡</title>
    <url>/c4c9aa95.html</url>
    <content><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯å˜é‡"><a href="#ä»€ä¹ˆæ˜¯å˜é‡" class="headerlink" title="ä»€ä¹ˆæ˜¯å˜é‡"></a>ä»€ä¹ˆæ˜¯å˜é‡</h2><p>åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œå˜é‡æ˜¯æŒ‡ä¸€ä¸ªåŒ…å«å€¼çš„å­˜å‚¨åœ°å€ä»¥åŠå¯¹åº”çš„ç¬¦å·åç§°ã€‚<br>ä»å®šä¹‰ä¸Šæ¥çœ‹ï¼Œå˜é‡å¤§æ¦‚å¯åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå˜é‡çš„åå­—å’Œå˜é‡çš„å€¼ï¼Œå¯é€šè¿‡å˜é‡åæ¥è®¿é—®å˜é‡å€¼ã€‚ç®€å•æ¥è¯´ï¼Œå˜é‡å°±æ˜¯å­˜å‚¨æ•°æ®çš„è½½ä½“ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å¯¹äº Java è¯­è¨€æ¥è®²ï¼ŒJava æ˜¯ä¸€ç§å¼ºç±»å‹çš„è¯­è¨€ï¼Œå› æ­¤å˜é‡éƒ½å¿…é¡»æœ‰ä¸€ä¸ªç±»å‹ã€‚åœ¨ Java ä»£ç ä¸­ï¼Œå˜é‡æ˜¯é•¿è¿™ä¸ªæ ·å­çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// =å·¦ä¾§çš„ageæ˜¯å˜é‡åï¼Œå³ä¾§çš„22æ˜¯å˜é‡å€¼</span></span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">22</span>;</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºå˜é‡"><a href="#åˆ›å»ºå˜é‡" class="headerlink" title="åˆ›å»ºå˜é‡"></a>åˆ›å»ºå˜é‡</h2><p>æˆ‘ä»¬å·²ç»åœ¨ä¸Šé¢çœ‹åˆ°äº†å˜é‡åœ¨ä»£ç ä¸­çš„æ ·å­ï¼Œç°åœ¨æˆ‘ä»¬æ¥åŠ¨æ‰‹åˆ›å»ºå˜é‡ã€‚</p>
<p>åœ¨Javaè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åšä¸¤ä»¶äº‹æ‰èƒ½åˆ›å»ºä¸€ä¸ªå˜é‡ï¼š</p>
<ul>
<li>ç»™å˜é‡èµ·ä¸€ä¸ªåå­—</li>
<li>å®šä¹‰å˜é‡çš„æ•°æ®ç±»å‹<br>åˆ›å»ºå˜é‡çš„è¿‡ç¨‹ä¹Ÿå«å£°æ˜å˜é‡ï¼Œå£°æ˜å˜é‡çš„è¯­æ³•å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">DataType å˜é‡å;</span><br></pre></td></tr></table></figure>
<p>å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ï¼Œå£°æ˜äº†ä¸€ä¸ªåå­—ä¸º<code>a</code>ï¼Œç±»å‹ä¸º<strong>æ•´å‹</strong>çš„å˜é‡ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å†å£°æ˜ä¸€ä¸ªåå­—ä¸º<code>b</code>ï¼Œç±»å‹ä¸º<strong>å­—ç¬¦å‹</strong>çš„å˜é‡ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> b;</span><br></pre></td></tr></table></figure>
<p>å†å£°æ˜ä¸¤ä¸ªæ•´å‹çš„å˜é‡<code>age</code>ã€<code>number</code>ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> age;</span><br><span class="line"><span class="type">int</span> number;</span><br></pre></td></tr></table></figure>
<h2 id="ç»™å˜é‡èµ‹å€¼"><a href="#ç»™å˜é‡èµ‹å€¼" class="headerlink" title="ç»™å˜é‡èµ‹å€¼"></a>ç»™å˜é‡èµ‹å€¼</h2><p>å˜é‡å£°æ˜æ“ä½œå·²ç»å‘Šè¯‰äº†ç¼–è¯‘å™¨å˜é‡çš„æ•°æ®ç±»å‹ã€‚æ•°æ®ç±»å‹å†³å®šäº†å˜é‡ä¸­å¯ä»¥å­˜æ”¾ä»€ä¹ˆï¼Œä¸èƒ½å­˜æ”¾ä»€ä¹ˆï¼Œä¸Šè¿°çš„å˜é‡<code>a</code>ä¸º<code>int</code>ç±»å‹ï¼ˆæ•´å‹ï¼‰ï¼Œå› æ­¤åªèƒ½å­˜æ”¾æ•´æ•°ã€‚</p>
<p>ä¸€æ—¦å£°æ˜äº†ä¸€ä¸ªå˜é‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨èµ‹å€¼è¯­å¥ä¸ºå…¶èµ‹å€¼ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å˜é‡å£°æ˜è¯­å¥</span></span><br><span class="line"><span class="type">int</span> a;</span><br><span class="line"><span class="comment">// èµ‹å€¼è¯­å¥</span></span><br><span class="line">a = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>ä¸ºå˜é‡åˆ†é…å€¼çš„è¯­å¥ï¼Œå°±ç§°ä¸ºèµ‹å€¼è¯­å¥ã€‚éœ€è¦ç‰¹åˆ«æé†’çš„æ˜¯ï¼Œè¯­å¥ä¸­<code>=</code>çš„æ„ä¹‰ä¸åŒäºæ•°å­¦ä¸­çš„ç­‰å·ï¼Œåœ¨ Java ä¸­ï¼Œ<code>=</code>æ˜¯èµ‹å€¼ç¬¦å·ã€‚</p>
<p>å¯¹äºå˜é‡çš„å£°æ˜å’Œèµ‹å€¼æ“ä½œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿™ä¸¤æ¡è¯­å¥åˆå¹¶æˆä¸€æ¡è¯­å¥ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œå¦‚æœè¦åˆ›å»ºå¤šä¸ªç±»å‹ç›¸åŒçš„å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€æ¡è¯­å¥ä¸­å°†å¤šä¸ªå˜é‡çš„å£°æ˜è¿›è¡Œåˆ†ç»„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a, b;</span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line">b = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†ç²¾ç®€è¯­æ³•ï¼Œè¿˜å¯ä»¥å°†å˜é‡çš„å£°æ˜å’Œèµ‹å€¼åŒæ—¶åˆ†ç»„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>, b = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä½œç”¨åŸŸèŒƒå›´å†…ï¼Œå˜é‡çš„å€¼èƒ½å¤Ÿéšæ—¶è®¿é—®æˆ–é‡æ–°èµ‹å€¼ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PrintVariable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">    	System.out.println(<span class="string">&quot;ä¿®æ”¹å‰å˜é‡a=&quot;</span> + a);</span><br><span class="line">    	<span class="comment">// å°†å˜é‡aé‡æ–°èµ‹å€¼ä¸º100</span></span><br><span class="line">    	a = <span class="number">100</span>;</span><br><span class="line">    	System.out.println(<span class="string">&quot;ä¿®æ”¹åå˜é‡a=&quot;</span> + a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ä¿®æ”¹å‰å˜é‡a=<span class="number">20</span></span><br><span class="line">ä¿®æ”¹åå˜é‡a=<span class="number">100</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œå£°æ˜äº†ä¸€ä¸ªæ•´å‹å˜é‡<code>a</code>ï¼Œä¸”åˆå§‹åŒ–å€¼ä¸º<code>20</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>a = 100</code>;è¿™ç§èµ‹å€¼è¯­å¥ï¼Œå¯¹å˜é‡<code>a</code>é‡æ–°èµ‹å€¼ã€‚</p>
<p>æ³¨æ„ï¼Œåœ¨ Java ä¸­ï¼Œå¯¹å˜é‡è¿›è¡Œé‡æ–°èµ‹å€¼ï¼Œè¿™æ ·çš„å†™æ³•æ˜¯é”™è¯¯çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘ä»£ç ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Test.java:5: é”™è¯¯: å·²åœ¨æ–¹æ³• main(String[])ä¸­å®šä¹‰äº†å˜é‡ a</span><br><span class="line">	int a = 2;</span><br><span class="line">	    ^</span><br><span class="line">1 ä¸ªé”™è¯¯</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘æŠ¥é”™çš„åŸå› å¾ˆç®€å•ï¼Œç¬¬äºŒè¡Œä»£ç å†æ¬¡å®šä¹‰äº†å˜é‡<code>a</code>ï¼Œè€Œå˜é‡<code>a</code>å·²ç»åœ¨å†…å­˜ä¸­å­˜åœ¨äº†ï¼Œä¸èƒ½å†é‡å¤å®šä¹‰ã€‚è¿™ä¸å¯¹å˜é‡é‡æ–°èµ‹å€¼ä¸åŒã€‚</p>
<h2 id="å˜é‡å‘½åè§„èŒƒ"><a href="#å˜é‡å‘½åè§„èŒƒ" class="headerlink" title="å˜é‡å‘½åè§„èŒƒ"></a>å˜é‡å‘½åè§„èŒƒ</h2><p>å¯¹äºå˜é‡çš„å‘½åï¼Œæ¯ç§ç¼–ç¨‹è¯­è¨€éƒ½æœ‰è‡ªå·±çš„è§„åˆ™å’Œçº¦å®šï¼ŒJava è¯­è¨€ä¹Ÿä¸ä¾‹å¤–ã€‚å‘½åå˜é‡çš„è§„åˆ™å’Œçº¦å®šå¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å˜é‡çš„åç§°å¯ä»¥æ˜¯ä»»ä½•åˆæ³•çš„æ ‡è¯†ç¬¦ï¼Œä»¥å­—æ¯ï¼Œç¾å…ƒç¬¦å·<code>$</code>æˆ–ä¸‹åˆ’çº¿<code>_</code>å¼€å¤´</strong>ã€‚ä½†æ˜¯ï¼ŒæŒ‰ç…§çº¦å®šä¿—æˆï¼Œå˜é‡åº”å§‹ç»ˆä»¥å­—æ¯å¼€å¤´ï¼Œä¸æ¨èä½¿ç”¨ç¾å…ƒç¬¦å·å’Œä¸‹åˆ’çº¿å¼€å¤´ï¼›</li>
<li><strong>å¼€å¤´åç»­çš„å­—ç¬¦å¯ä»¥æ˜¯å­—æ¯ã€æ•°å­—ã€ç¾å…ƒç¬¦å·æˆ–ä¸‹åˆ’çº¿</strong>ã€‚ä¸ºå˜é‡é€‰æ‹©åç§°æ—¶ï¼Œæ¨èä½¿ç”¨å®Œæ•´çš„è‹±æ–‡å•è¯ï¼Œä¸æ¨èä½¿ç”¨å•è¯ç¼©å†™ï¼Œæ›´ä¸è¦ä½¿ç”¨ä¸­æ–‡æ‹¼éŸ³ã€‚è¿™æ ·åšæœ‰åˆ©äºä»£ç çš„é˜…è¯»å’Œç†è§£ã€‚å¦å¤–è¯·ç‰¢è®°ï¼Œé€‰æ‹©çš„åç§°ä¸èƒ½æ˜¯<strong>å…³é”®å­—</strong>æˆ–<strong>ä¿ç•™å­—</strong>ï¼›</li>
<li><strong>å˜é‡å‘½ååŒºåˆ†å¤§å°å†™</strong>ï¼›</li>
<li><strong>å˜é‡å‘½ååº”é‡‡ç”¨å°é©¼å³°å‘½åæ³•</strong>ã€‚æ‰€è°“å°é©¼å³°å‘½åæ³•ï¼Œå°±æ˜¯å¦‚æœä½ é€‰æ‹©çš„åç§°åªåŒ…å«ä¸€ä¸ªå•è¯ï¼Œé‚£ä¹ˆç”¨å…¨éƒ¨å°å†™å­—æ¯æ‹¼å†™è¯¥å•è¯ï¼›å¦‚æœåç§°åŒ…å«å¤šä¸ªå•è¯ï¼Œè¯·å°†ç¬¬äºŒä¸ªå•è¯èµ·çš„æ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯éƒ½å¤§å†™ï¼›</li>
<li><strong>å¦‚æœå˜é‡å­˜å‚¨äº†ä¸€ä¸ªå¸¸é‡å€¼ï¼Œè¦å°†æ¯ä¸ªå­—æ¯å¤§å†™å¹¶ç”¨ä¸‹åˆ’çº¿å­—ç¬¦åˆ†éš”æ¯ä¸ªå•è¯</strong>ã€‚æ¯”å¦‚<code>static final int MAX_NUM = 100</code>ã€‚æŒ‰ç…§çº¦å®šä¿—æˆï¼Œé™¤äº†å¸¸é‡å‘½åçš„æƒ…å†µï¼Œä¸‹åˆ’çº¿å­—ç¬¦æ°¸è¿œä¸ä¼šåœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚<br>ä¸‹é¢æˆ‘ä»¬å¯¹ç…§ä¸Šè¿°è§„åˆ™å’Œçº¦å®šæ¥çœ‹å‡ ä¸ªå®ä¾‹ã€‚</li>
</ul>
<p>å®ä¾‹1ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> $a;</span><br><span class="line"><span class="type">int</span> _b;</span><br><span class="line"><span class="type">int</span> age;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢3ä¸ªå˜é‡çš„å£°æ˜éƒ½æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯æ ¹æ®çº¦å®šä¿—ç§°ï¼Œä¸æ¨è<code>$a</code>è¿™ç§ä»¥ç¾å…ƒç¬¦å·å¼€å¤´ã€<code>_b</code>è¿™ç§ä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„å‘½åæ–¹å¼ã€‚</p>
<p>å®ä¾‹2ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VariablesNameing2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">Name</span> <span class="operator">=</span> <span class="string">&quot;Colorful&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;Colorful1&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;Name=&quot;</span> + Name);</span><br><span class="line">        System.out.println(<span class="string">&quot;name=&quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å˜é‡ååŒºåˆ†å¤§å°å†™ï¼Œå› æ­¤ä¸Šé¢çš„<code>Name</code>å’Œ<code>name</code>æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡ã€‚ç”±äºåªæœ‰ä¸€ä¸ªå•è¯ç»„æˆï¼Œåº”å°†å•è¯ä½¿ç”¨å…¨éƒ¨å°å†™æ‹¼å†™ï¼Œä¸æ¨èç¬¬1è¡Œ<code>Name</code>è¿™ç§å‘½åæ–¹å¼ã€‚</p>
<p>å®ä¾‹3ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜å§“å’Œåå˜é‡</span></span><br><span class="line">String firstName;</span><br><span class="line">String lastname;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢å£°æ˜äº†ä¸¤ä¸ªå˜é‡ <code>firstName</code>å’Œ<code>lastname</code>ï¼Œç”±äºå®ƒä»¬éƒ½æ˜¯ç”±ä¸¤ä¸ªå•è¯ç»„æˆï¼ŒæŒ‰ç…§å°é©¼å³°å‘½åæ³•çš„çº¦å®šä¿—æˆï¼šç¬¬2è¡Œ<code>lastname</code> å˜é‡åç”±ä¸¤ä¸ªè‹±æ–‡å•è¯ç»„æˆï¼Œå› æ­¤æ¨èæ”¹ä¸º<code>lastName</code>ã€‚</p>
<h2 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h2><p>æ‰€è°“å¸¸é‡ï¼Œå°±æ˜¯æ’å¸¸ä¸å˜çš„é‡ã€‚æˆ‘ä»¬å¯ä»¥å°†å¸¸é‡ç†è§£æˆä¸€ç§ç‰¹æ®Šçš„å˜é‡ã€‚</p>
<p>ä¸å˜é‡ä¸åŒçš„æ˜¯ï¼Œä¸€æ—¦å®ƒè¢«èµ‹å€¼åï¼Œåœ¨ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­ä¸å…è®¸è¢«æ”¹å˜ã€‚å¸¸é‡ä½¿ç”¨<code>final</code>å…³é”®å­—ä¿®é¥°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> DataType å¸¸é‡å = å¸¸é‡å€¼;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Tips:</strong> å¸¸é‡çš„å‘½åè§„èŒƒä¸æ™®é€šå˜é‡æœ‰æ‰€ä¸åŒï¼Œè¦å°†æ¯ä¸ªå­—æ¯å¤§å†™å¹¶ç”¨ä¸‹åˆ’çº¿å­—ç¬¦åˆ†éš”æ¯ä¸ªå•è¯ã€‚</p>
</blockquote>
<p>å¦‚æœæˆ‘ä»¬å°è¯•åœ¨ä»£ç ä¸­ä¿®æ”¹å¸¸é‡çš„å€¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ConstantTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å£°æ˜å¹¶åˆå§‹åŒ–å¸¸é‡ TOTAL_NUM</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">TOTAL_NUM</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">        <span class="comment">// å¯¹ TOTAL_NUM é‡æ–°èµ‹å€¼</span></span><br><span class="line">        TOTAL_NUM = <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘æ‰§è¡Œä»£ç ï¼Œç¼–è¯‘å™¨å°†ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ConstantTest.java:<span class="number">6</span>: é”™è¯¯: æ— æ³•ä¸ºæœ€ç»ˆå˜é‡TOTAL_NUMåˆ†é…å€¼</span><br><span class="line">        TOTAL_NUM = <span class="number">20</span>;</span><br><span class="line">        ^</span><br><span class="line"><span class="number">1</span> ä¸ªé”™è¯¯</span><br></pre></td></tr></table></figure>
<p>é€‚å½“åœ°ä½¿ç”¨å¸¸é‡å¯ä»¥æé«˜ä»£ç çš„å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºä¸­å£°æ˜ä¸€ä¸ªè¡¨ç¤ºç½‘ç«™åç§°çš„å¸¸é‡ï¼š <code>final String SITE_NAME = &quot;ä¸‰å°ºé’é”‹&quot;</code>;ï¼Œè¿™æ ·åœ¨æ‰€æœ‰éœ€è¦ç”¨åˆ°ç½‘ç«™åç§°çš„åœ°æ–¹ï¼Œéƒ½è°ƒç”¨è¿™ä¸ªå¸¸é‡å³å¯ã€‚è¿™æ ·æ—¢ä¿è¯äº†å…¶å€¼ä¸å¯ä¿®æ”¹ï¼Œæé«˜äº†ä»£ç çš„å®‰å…¨æ€§ï¼Œåˆç»Ÿä¸€äº†è°ƒç”¨æ–¹çš„è§„èŒƒã€‚</p>
<h2 id="å˜é‡çš„ç§ç±»"><a href="#å˜é‡çš„ç§ç±»" class="headerlink" title="å˜é‡çš„ç§ç±»"></a>å˜é‡çš„ç§ç±»</h2><p>å­¦ä¹ å˜é‡çš„ç§ç±»ï¼Œéœ€è¦ä½ å¯¹ Java çš„ç±»å’Œå¯¹è±¡æœ‰ä¸€å®šçš„äº†è§£ã€‚ç›®å‰ä¸è¦æ±‚å®Œå…¨ç†è§£ï¼Œç­‰åˆ°åé¢å­¦å®Œé¢å‘å¯¹è±¡ç›¸å…³çŸ¥è¯†åå†å›è¿‡å¤´æ¥å›å‘³ã€‚</p>
<p>Java è¯­è¨€å®šä¹‰äº†ä»¥ä¸‹<strong>4 ç§å˜é‡</strong>ï¼š</p>
<ul>
<li>å®ä¾‹å˜é‡ï¼ˆè§ä»£ç ä¸­<code>instanceVariable</code>ï¼‰</li>
<li>ç±»å˜é‡ï¼ˆè§ä»£ç ä¸­<code>classVariable</code>ï¼‰</li>
<li>å±€éƒ¨å˜é‡ï¼ˆè§ä»£ç ä¸­<code>localVariable</code>ï¼‰</li>
<li>å‚æ•°ï¼ˆè§ä»£ç ä¸­<code>parameterå’Œargs</code>ï¼‰<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KindsOfVariables</span> &#123;</span><br><span class="line">    <span class="comment">// 1.å®ä¾‹å˜é‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">instanceVariable</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// 2.ç±»å˜é‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> classVariable;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">demoMethod</span><span class="params">(<span class="type">int</span> parameter)</span> &#123; <span class="comment">// 3.å‚æ•°	    </span></span><br><span class="line">        <span class="comment">// 4.å±€éƒ¨å˜é‡</span></span><br><span class="line">        <span class="type">int</span> localVariable;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å…¥å£æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="å®ä¾‹å˜é‡"><a href="#å®ä¾‹å˜é‡" class="headerlink" title="å®ä¾‹å˜é‡"></a>å®ä¾‹å˜é‡</h3><p>å®ä¾‹å˜é‡åœ¨ç±»èŒƒå›´å†…å£°æ˜ã€‚å£°æ˜æ—¶ä¸ä½¿ç”¨<code>static</code>å…³é”®å­—ä¿®é¥°ï¼Œå› æ­¤ä¹Ÿç§°ä¸º<strong>éé™æ€å­—æ®µ</strong>ã€‚</p>
<p>å®ä¾‹å˜é‡ç”¨äºå­˜å‚¨å¯¹è±¡çš„çŠ¶æ€ï¼Œå®ƒçš„å€¼å¯¹äºç±»çš„æ¯ä¸ªå®ä¾‹éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ã€‚åªè¦ç›¸åº”çš„å¯¹è±¡å­˜åœ¨äºå†…å­˜ä¸­ï¼Œå®ƒå°±å ç”¨ç€å­˜å‚¨ç©ºé—´ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹å˜é‡çš„å®ä¾‹ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ä»‹ç»ç±»å’Œå¯¹è±¡çš„æ¦‚å¿µï¼Œå¦‚æœä½ äº†è§£ç±»å’Œå¯¹è±¡ï¼Œå¯ä»¥é˜…è¯»æºç å¸®åŠ©ç†è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="comment">// å®ä¾‹å˜é‡ name</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="comment">// å®ä¾‹å˜é‡ age</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°å­¦ç”ŸåŸºæœ¬ä¿¡æ¯çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦ç”Ÿå§“åä¸ºï¼š&quot;</span> + name);</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦ç”Ÿå¹´é¾„ä¸ºï¼š&quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span>  <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å®ä¾‹åŒ–ä¸¤ä¸ªå­¦ç”Ÿå¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å°æ…•&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å°æ&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        <span class="comment">// åˆ†åˆ«è°ƒç”¨æ‰“å°å­¦ç”ŸåŸºæœ¬ä¿¡æ¯æ–¹æ³•ï¼Œæ‰“å°ä¸¤ä¸ªå¯¹è±¡ä¸‹çš„ä¸¤ä¸ªå®ä¾‹å˜é‡</span></span><br><span class="line">        student1.printInfo();</span><br><span class="line">        System.out.println(<span class="string">&quot;--------åˆ†å‰²çº¿--------&quot;</span>);</span><br><span class="line">        student2.printInfo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å­¦ç”Ÿå§“åä¸ºï¼šå°æ…•</span><br><span class="line">å­¦ç”Ÿå¹´é¾„ä¸ºï¼š20</span><br><span class="line">--------åˆ†å‰²çº¿--------</span><br><span class="line">å­¦ç”Ÿå§“åä¸ºï¼šå°æ</span><br><span class="line">å­¦ç”Ÿå¹´é¾„ä¸ºï¼š18</span><br></pre></td></tr></table></figure>
<p>å®ä¾‹å˜é‡å’Œå®ä¾‹å¯¹è±¡ç›¸å…³ï¼Œå› æ­¤éœ€è¦é€šè¿‡<code>new</code>å…³é”®å­—å®ä¾‹åŒ–å‡ºå¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡æ‰èƒ½è®¿é—®å…¶å®ä¾‹å˜é‡ï¼ˆä¹Ÿç§°å®ä¾‹å±æ€§ï¼‰ã€‚ ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>name</code>å’Œ<code>age</code>å°±æ˜¯ç”¨äºå­˜å‚¨å…¶å¯¹è±¡çš„å±æ€§ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–äº†ä¸¤ä¸ªå­¦ç”Ÿå¯¹è±¡ï¼Œå…¶å®ä¾‹å˜é‡<code>name</code>å’Œ<code>age</code>ï¼Œåœ¨æ¯ä¸ªå¯¹è±¡å®ä¾‹ä¸­æ˜¯å”¯ä¸€çš„ã€‚</p>
<h3 id="ç±»å˜é‡"><a href="#ç±»å˜é‡" class="headerlink" title="ç±»å˜é‡"></a>ç±»å˜é‡</h3><p>ç±»å˜é‡åœ¨ç±»èŒƒå›´å†…ä½¿ç”¨<code>static</code>å…³é”®å­—ä¿®é¥°ï¼Œå› æ­¤ç±»å˜é‡åˆè¢«ç§°ä¸ºé™æ€å­—æ®µã€é™æ€å˜é‡ã€‚</p>
<p><code>static</code>ä¿®é¥°ç¬¦å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæ— è®ºç±»è¢«å®ä¾‹åŒ–å¤šå°‘æ¬¡ï¼Œç±»å˜é‡å§‹ç»ˆåªæœ‰ä¸€ä¸ªå˜é‡å‰¯æœ¬ã€‚åªè¦ç±»è¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå®ƒå°±ä¼šå­˜åœ¨ã€‚</p>
<p>å¦å¤–ï¼Œç±»å˜é‡å¯ä»¥è¢«å£°æ˜ä¸ºå¸¸é‡ï¼Œé€šè¿‡ä½¿ç”¨<code>final</code>å…³é”®å­—ä»¥è¡¨ç¤ºå˜é‡æ°¸è¿œä¸ä¼šæ”¹å˜ã€‚ä¾‹å¦‚ï¼š<code>public static final NAME = &quot;æ…•æ…•&quot;</code>ï¼Œè¿™é‡Œçš„<code>NAME</code>å°±æ˜¯ä¸ä¼šæ”¹å˜çš„å¸¸é‡ã€‚å†æ¬¡æé†’ï¼Œåœ¨å¸¸é‡çš„å‘½åè§„èŒƒä¸­ï¼Œè¦å°†å­—æ¯å…¨éƒ¨å¤§å†™ã€‚</p>
<p>å¯¹äºç±»å˜é‡ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªå®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Course</span> &#123;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// ç±»å˜é‡ courseType</span></span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">courseType</span> <span class="operator">=</span> <span class="string">&quot;æ–‡å­—è¯¾ç¨‹&quot;</span>;</span><br><span class="line">  	<span class="comment">// å¸¸é‡ COURSE_NAME</span></span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">COURSE_NAME</span> <span class="operator">=</span> <span class="string">&quot;Java åŸºç¡€æ•™ç¨‹&quot;</span>;</span><br><span class="line">  	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      	<span class="comment">// åˆ†åˆ«æ‰“å°ç±»å˜é‡å’Œå¸¸é‡</span></span><br><span class="line">      	System.out.println(Course.courseType);</span><br><span class="line">      	System.out.println(Course.COURSE_NAME);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ–‡å­—è¯¾ç¨‹</span><br><span class="line">Java åŸºç¡€æ•™ç¨‹</span><br></pre></td></tr></table></figure>
<p>ç±»å˜é‡å’Œç±»ç›¸å…³ï¼Œå› æ­¤ä¸éœ€è¦ä½¿ç”¨<code>new</code>å…³é”®å­—å®ä¾‹åŒ–å¯¹è±¡åå†è°ƒç”¨ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡<strong>ç±»å + <code>.</code>ç‚¹è¿ç®—ç¬¦ + ç±»å˜é‡å</strong>çš„æ–¹å¼è°ƒç”¨ã€‚</p>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>courseType</code> å’Œ<code>COURSE_NAME</code>éƒ½ä½¿ç”¨<code>static</code>å…³é”®å­—ä¿®é¥°ï¼Œå®ƒä»¬éƒ½å¯ä»¥ç›´æ¥é€šè¿‡<code>Course.å˜é‡å</code>çš„æ–¹å¼è°ƒç”¨ã€‚</p>
<h3 id="å±€éƒ¨å˜é‡"><a href="#å±€éƒ¨å˜é‡" class="headerlink" title="å±€éƒ¨å˜é‡"></a>å±€éƒ¨å˜é‡</h3><p>å±€éƒ¨å˜é‡æ˜¯åœ¨æ–¹æ³•èŒƒå›´å†…è¢«å£°æ˜å’Œä½¿ç”¨çš„ã€‚å®ƒä»¬æ²¡æœ‰ä»»ä½•å…³é”®å­—ä¿®é¥°ï¼Œå¯ä»¥æ ¹æ®<strong>å˜é‡å£°æ˜çš„ä½ç½®</strong>æ¥è®¤å®šå±€éƒ¨å˜é‡ï¼ˆå³æ–¹æ³•çš„å·¦èŠ±æ‹¬å·å’Œå³èŠ±æ‹¬å·ä¹‹é—´ï¼‰ï¼Œå› æ­¤ï¼Œå±€éƒ¨å˜é‡åªå¯ä»¥å¯¹å£°æ˜å®ƒä»¬çš„æ–¹æ³•å¯è§ã€‚æ–¹æ³•è¿”å›åï¼Œå®ƒä»¬å°†è¢«é”€æ¯ã€‚</p>
<p>åœ¨<code>main</code>æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">  	<span class="comment">// å±€éƒ¨å˜é‡ name</span></span><br><span class="line">  	<span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;å°æ…•&quot;</span>;</span><br><span class="line">  	<span class="comment">// å±€éƒ¨å˜é‡ age</span></span><br><span class="line">  	<span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">20</span>;    	</span><br><span class="line">  	System.out.println(<span class="string">&quot;å§“åï¼š&quot;</span> + name);</span><br><span class="line">  	System.out.println(<span class="string">&quot;å¹´é¾„ï¼š&quot;</span> + age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªè‡ªå®šä¹‰æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintNumber</span> &#123;</span><br><span class="line">  </span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printer</span><span class="params">()</span> &#123;</span><br><span class="line">  	    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">  	    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= num; i ++) &#123;</span><br><span class="line">	      	System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å±€éƒ¨å˜é‡å’Œæ–¹æ³•ç›¸å…³ï¼Œå› æ­¤åªèƒ½åœ¨æ–¹æ³•å†…éƒ¨å±€éƒ¨å®šä¹‰å’Œä½¿ç”¨ï¼Œåœ¨ç¬¬äºŒä¸ªå®ä¾‹ä¸­æ²¡æœ‰ä»£ç æ³¨é‡Šï¼Œè¯·æ€è€ƒ<code>printer</code>æ–¹æ³•ä¸­æœ‰å“ªå‡ ä¸ªå±€éƒ¨å˜é‡ã€‚</p>
<h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><p>å‚æ•°æ˜¯ç”¨äºä¼ é€’ç»™æ–¹æ³•ç­¾åçš„å˜é‡ï¼ˆä¾‹å¦‚å…¥å£æ–¹æ³•<code>main</code>ä¸­çš„<code>args</code>ï¼‰ï¼Œå®ƒä»¬å¯ä»¥åœ¨æ–¹æ³•ä¸­çš„ä»»ä½•ä½ç½®è¢«è°ƒç”¨ã€‚åœ¨æ–¹æ³•æ‰§è¡Œçš„æœŸé—´ä½äºå†…å­˜ä¸­ï¼Œæ–¹æ³•è¿”å›åè¢«é”€æ¯ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸Šé¢å®ä¾‹å˜é‡çš„å®ä¾‹ä¸­ï¼Œ<code>Student</code>ç±»çš„æ„é€ æ–¹æ³•å°±æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚ä¸‹ä¸ºä»£ç æˆªå–ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Student ç±»æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;  <span class="comment">// name å’Œ age å°±æ˜¯ä¼ é€’ç»™Studentæ„é€ æ–¹æ³•çš„å‚æ•°</span></span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œæ–¹æ³•ä½“ä¸­çš„<code>this.name</code>å’Œ<code>this.age</code>æŒ‡ä»£çš„æ˜¯å®ä¾‹å˜é‡ï¼Œè€Œ <code>name</code>å’Œ<code>age</code>æ˜¯å‚æ•°ï¼Œå®ƒä»¬è¢«ç”¨äºèµ‹å€¼ç»™å®ä¾‹å˜é‡ã€‚</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaè¡¨è¾¾å¼ã€è¯­å¥å’Œå—</title>
    <url>/d5e4b0c3.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="è¡¨è¾¾å¼"><a href="#è¡¨è¾¾å¼" class="headerlink" title="è¡¨è¾¾å¼"></a>è¡¨è¾¾å¼</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><blockquote>
<p>è¡¨è¾¾å¼ï¼Œæ˜¯ç”±æ•°å­—ã€è¿ç®—ç¬¦ã€æ•°å­—åˆ†ç»„ç¬¦å·ï¼ˆæ‹¬å·ï¼‰ã€è‡ªç”±å˜é‡å’Œçº¦æŸå˜é‡ç­‰ä»¥èƒ½æ±‚å¾—æ•°å€¼çš„æœ‰æ„ä¹‰æ’åˆ—æ–¹æ³•æ‰€å¾—çš„ç»„åˆã€‚çº¦æŸå˜é‡æ˜¯åœ¨è¡¨è¾¾å¼ä¸­å·²è¢«æŒ‡å®šæ•°å€¼ï¼Œè€Œè‡ªç”±å˜é‡åˆ™å¯ä»¥åœ¨è¡¨è¾¾å¼ä¹‹å¤–å¦è¡ŒæŒ‡å®šæ•°å€¼ã€‚</p>
</blockquote>
<p>åœ¨ <code>Java </code>ä¸­ï¼Œè¡¨è¾¾å¼æ˜¯æ ¹æ® Java è¯­æ³•ç”±<strong>å˜é‡ã€è¿ç®—ç¬¦</strong>å’Œ<strong>æ–¹æ³•</strong>è°ƒç”¨ç»„æˆçš„ç»“æ„ï¼Œè¡¨è¾¾å¼çš„ç»“ç®—ç»“æœä¸º<strong>å•ä¸ªå€¼</strong>ã€‚<br>è¡¨è¾¾å¼å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Expression</span> &#123;</span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      	<span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>, b = <span class="number">20</span>;</span><br><span class="line">      	<span class="comment">// (a + b) * 2 å°±æ˜¯ä¸€ä¸ªç®—æ•°è¡¨è¾¾å¼</span></span><br><span class="line">      	<span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> (a + b) * <span class="number">2</span>;</span><br><span class="line">      	<span class="comment">// c &gt; b å°±æ˜¯ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼</span></span><br><span class="line">      	<span class="keyword">if</span> (c &gt; b) &#123; <span class="comment">// ifè¯­å¥å°†åœ¨ä¸‹ä¸€å°èŠ‚è®²åˆ°ï¼Œæ­¤å¤„åªéœ€çŸ¥é“ c &gt; b æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼å³å¯</span></span><br><span class="line">          	System.out.println(<span class="string">&quot;cå¤§äºb&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ¡ˆä¾‹<br>ç‚¹å‡» â€œè¿è¡Œæ¡ˆä¾‹â€ å¯æŸ¥çœ‹åœ¨çº¿è¿è¡Œæ•ˆæœ<br>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>(a + b) * 2</code> å°±æ˜¯ä¸€ä¸ªç®—æ•°è¡¨è¾¾å¼ï¼Œè€Œ <code>c &gt; b</code> å°±æ˜¯ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ï¼Œä»£ç ä¸­çš„ <code>if</code> è¯­å¥å°†åœ¨ä¸‹ä¸€å°èŠ‚è®²åˆ°ï¼Œæ­¤å¤„åªéœ€çŸ¥é“ c &gt; b æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼å³å¯ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°†å›´ç»•ç®—æ•°è¡¨è¾¾å¼å’Œå¸ƒå°”è¡¨è¾¾å¼æ¥å­¦ä¹ è¡¨è¾¾å¼ã€‚</p>
<h3 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h3><h4 id="ç®—æ•°è¡¨è¾¾å¼"><a href="#ç®—æ•°è¡¨è¾¾å¼" class="headerlink" title="ç®—æ•°è¡¨è¾¾å¼"></a>ç®—æ•°è¡¨è¾¾å¼</h4><p>ç®—æ•°è¡¨è¾¾å¼æ˜¯æœ€å¸¸ç”¨çš„è¡¨è¾¾å¼ï¼Œåˆç§°ä¸ºæ•°å­¦è¡¨è¾¾å¼ã€‚å®ƒæ˜¯é€šè¿‡ç®—æœ¯è¿ç®—ç¬¦æ¥è¿›è¡Œè¿ç®—çš„æ•°å­¦å…¬å¼ã€‚</p>
<p>ä¸ºäº†ä½¿ç”¨ <code>Java</code> è¿›è¡Œç®—æ•°è¿ç®—ï¼Œé¦–å…ˆå¿…é¡»è‡³å°‘å£°æ˜ä¸€ä¸ªå˜é‡ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<p>å˜é‡åˆ›å»ºåï¼Œå¯ä»¥ä½¿ç”¨<code>ç®—æ•°è¿ç®—ç¬¦</code>ï¼ˆ<code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code>ã€ <code>%</code>ã€<code>++</code>ã€ <code>--</code> ï¼‰æ¥æ“ä½œå˜é‡çš„å€¼ã€‚ä½¿ç”¨ç®—æ•°è¡¨è¾¾å¼çš„å®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticExpression1</span> &#123;</span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      	<span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">      	<span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> num / <span class="number">3</span>;</span><br><span class="line">      	System.out.println( num + <span class="string">&quot; / 3 = &quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘æ‰§è¡Œç¨‹åºï¼Œå±å¹•ä¸Šå°†ä¼šæ‰“å°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">10 / 3 = 3</span><br></pre></td></tr></table></figure>
<p>å¯¹äºæ“ä½œæ•°ä¸ºæ•´å‹çš„é™¤æ³•è¡¨è¾¾å¼ï¼Œå…¶è®¡ç®—ç»“æœå°†å§‹ç»ˆå–æ•´æ•°éƒ¨åˆ†ã€‚æ‰€ä»¥ä¸Šé¢çš„ <code>10 / 3</code> çš„ç»“æœç­‰äº <code>3</code>ã€‚å¦‚æœæˆ‘ä»¬æƒ³å¾—åˆ°å°æ•°ï¼Œå¯ä»¥ä½¿ç”¨æµ®ç‚¹ç±»å‹çš„å˜é‡æ¥ä½œä¸ºæ“ä½œæ•°<code>ï¼ˆ10.0 / 3ï¼‰</code>ï¼Œå…¶è¿”å›çš„å€¼ä¹Ÿæ˜¯ä¸€ä¸ªæµ®ç‚¹å‹ã€‚</p>
<p>é™¤äº†é™¤æ³•è¡¨è¾¾å¼ä¹‹å¤–ï¼Œåœ¨ä½¿ç”¨<strong>è‡ªå¢ &#x2F; è‡ªå‡è¡¨è¾¾å¼</strong>è¿ç®—çš„æ—¶å€™ï¼Œä¹Ÿè¦é¢å¤–æ³¨æ„å‰å<strong>è‡ªå¢ &#x2F; è‡ªå‡</strong>è¿ç®—ç¬¦çš„å·®åˆ«ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹é¢ä¸€ä¸ªå®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticExpression2</span> &#123;</span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">     	<span class="comment">// å‰è‡ªå¢</span></span><br><span class="line">      	System.out.println(<span class="string">&quot;------ å‰è‡ªå¢ ------&quot;</span>);</span><br><span class="line">	    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">      	System.out.println(<span class="string">&quot;++num = &quot;</span> + (++num));</span><br><span class="line">      	System.out.println(<span class="string">&quot;num = &quot;</span> + num);</span><br><span class="line">      	<span class="comment">// å‰è‡ªå‡</span></span><br><span class="line">        System.out.println(<span class="string">&quot;------ å‰è‡ªå‡ ------&quot;</span>);</span><br><span class="line">	    num = <span class="number">10</span>;</span><br><span class="line">      	System.out.println(<span class="string">&quot;--num = &quot;</span> + (--num));</span><br><span class="line">      	System.out.println(<span class="string">&quot;num = &quot;</span> + num);</span><br><span class="line"></span><br><span class="line">      	<span class="comment">// åè‡ªå¢</span></span><br><span class="line">        System.out.println(<span class="string">&quot;------ åè‡ªå¢ ------&quot;</span>);</span><br><span class="line">	    num = <span class="number">10</span>;</span><br><span class="line">      	System.out.println(<span class="string">&quot;num++ = &quot;</span> + (num ++));</span><br><span class="line">        System.out.println(<span class="string">&quot;num = &quot;</span> + num);</span><br><span class="line">      	<span class="comment">// å‰è‡ªå‡</span></span><br><span class="line">      	System.out.println(<span class="string">&quot;------ å‰è‡ªå‡ ------&quot;</span>);</span><br><span class="line">      	num = <span class="number">10</span>;</span><br><span class="line">      	System.out.println(<span class="string">&quot;num-- = &quot;</span> + (num --));</span><br><span class="line">        System.out.println(<span class="string">&quot;num = &quot;</span> + num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œæ¡ˆä¾‹<br>æ³¨æ„è§‚å¯Ÿå‰åè‡ªå¢è‡ªå‡çš„åŒºåˆ«ï¼Œè¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">------ å‰è‡ªå¢ ------</span><br><span class="line">++num = 11</span><br><span class="line">num = 11</span><br><span class="line">------ å‰è‡ªå‡ ------</span><br><span class="line">--num = 9</span><br><span class="line">num = 9</span><br><span class="line">------ åè‡ªå¢ ------</span><br><span class="line">num++ = 10</span><br><span class="line">num = 11</span><br><span class="line">------ å‰è‡ªå‡ ------</span><br><span class="line">num-- = 10</span><br><span class="line">num = 9</span><br></pre></td></tr></table></figure>
<p>ç»“è®ºï¼š</p>
<ul>
<li><p><strong>å‰è‡ªå¢ &#x2F; è‡ªå‡çš„è¿ç®—è§„åˆ™æ˜¯</strong>ï¼šå…ˆè¿›è¡Œè‡ªå¢æˆ–è€…è‡ªå‡è¿ç®—ï¼Œå†è¿›è¡Œè¡¨è¾¾å¼è¿ç®—ï¼›</p>
</li>
<li><p><strong>åè‡ªå¢ &#x2F; è‡ªå‡çš„è¿ç®—è§„åˆ™æ˜¯</strong>ï¼šå…ˆè¿›è¡Œè¡¨è¾¾å¼è¿ç®—ï¼Œå†è¿›è¡Œè‡ªå¢æˆ–è€…è‡ªå‡è¿ç®—ã€‚</p>
</li>
</ul>
<h4 id="å¸ƒå°”è¡¨è¾¾å¼"><a href="#å¸ƒå°”è¡¨è¾¾å¼" class="headerlink" title="å¸ƒå°”è¡¨è¾¾å¼"></a>å¸ƒå°”è¡¨è¾¾å¼</h4><p><strong>å¸ƒå°”è¡¨è¾¾å¼ï¼ˆBoolean expressionï¼‰</strong>çš„ç»“æœåªæœ‰ <code>true</code>ï¼ˆçœŸï¼‰å’Œ <code>false</code>ï¼ˆå‡ï¼‰ä¸¤ä¸ªå€¼ã€‚åœ¨ <code>Java</code> è¯­è¨€ä¸­ï¼Œå¸ƒå°”è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨å…³ç³»è¿ç®—ç¬¦æˆ–é€»è¾‘è¿ç®—ç¬¦æ¥ä»£æ›¿ç®—æ•°è¿ç®—ç¬¦ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨<strong>å…³ç³»è¿ç®—ç¬¦</strong>çš„å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BooleanExpression1</span> &#123;</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      	<span class="comment">// åˆå§‹åŒ–ä¸¤ä¸ªæ•´å‹å˜é‡aã€bï¼Œå€¼åˆ†åˆ«ä¸º2ã€3</span></span><br><span class="line">      	<span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">2</span>, b = <span class="number">3</span>;</span><br><span class="line">      	<span class="comment">// åˆ†åˆ«æ‰“å°æ¯”è¾ƒè¿ç®—ç¬¦æ¯”è¾ƒçš„ç»“æœ</span></span><br><span class="line">      	System.out.println(a == b);</span><br><span class="line">      	System.out.println(a != b);</span><br><span class="line">      	System.out.println(a &gt; b);</span><br><span class="line">      	System.out.println(a &lt; b);</span><br><span class="line">      	System.out.println(a &gt;= b);</span><br><span class="line">      	System.out.println(a &lt;= b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯·é˜…è¯»ä¸Šé¢ä»£ç ï¼Œå¹¶ç®—å‡ºæ¯ä¸€æ¬¡æ‰“å°çš„ç»“æœã€‚è¿™é‡Œä¸å†å±•ç¤ºä»£ç æ‰“å°ç»“æœã€‚</p>
<p>å¸ƒå°”è¡¨è¾¾å¼å¸¸ä½œä¸ºæ¡ä»¶åˆ†æ”¯è¯­å¥ä¸­çš„<strong>æ¡ä»¶</strong>ã€‚å› æ­¤ä¸‹é¢çš„ç¤ºä¾‹éœ€è¦ä½ å¯¹æ¡ä»¶è¯­å¥æœ‰ä¸€å®šçš„äº†è§£ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€äº›çš„å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BooleanExpression2</span> &#123;</span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–4ä¸ªæ•´å‹å˜é‡</span></span><br><span class="line">      	<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">4</span>, j = <span class="number">5</span>, k = <span class="number">7</span>, m = <span class="number">8</span>;</span><br><span class="line">        <span class="comment">// i &gt; j &amp;&amp; m &lt; k++ å³ä¸ºæ¡ä»¶è¡¨è¾¾å¼</span></span><br><span class="line">      	<span class="keyword">if</span>(i &gt; j &amp;&amp; m &lt; k++) &#123;</span><br><span class="line">          	k++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          	k--;</span><br><span class="line">        &#125;</span><br><span class="line">      	System.out.println(<span class="string">&quot;k = &quot;</span> + k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘æ‰§è¡Œä»£ç ï¼Œå±å¹•ä¸Šå°†ä¼šæ‰“å°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">k = 6</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ï¼Œæ˜¯ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦å’Œç®—æ•°è¿ç®—ç¬¦ç»“åˆçš„å¸ƒå°”è¡¨è¾¾å¼ç¤ºä¾‹ï¼Œå¦‚æœå¸ƒå°”è¡¨è¾¾å¼ <code>i &gt; j &amp;&amp; m &lt; k++ </code>ç»“æœä¸ºçœŸï¼Œåˆ™æ‰§è¡Œ <code>if</code> åˆ†æ”¯ï¼Œ<code>k</code> è‡ªå¢ <code>1</code>ï¼Œå¦åˆ™æ‰§è¡Œ <code>else</code> åˆ†æ”¯ï¼Œ<code>k</code> è‡ªå‡ <code>1</code>ï¼Œæœ€åæ‰“å°å‡º <code>k</code> çš„å€¼ã€‚ç”±äº <code>i</code> çš„å€¼å°äº <code>j</code>ï¼Œå¹¶ä¸” <code>&amp;&amp;</code> è¿ç®—ç¬¦æœ‰çŸ­è·¯ä½œç”¨ï¼Œæ‰€ä»¥ <code>m &lt; k++</code> ä¸åšè¿ç®—ï¼Œç›´æ¥èµ°åˆ° <code>else</code> åˆ†æ”¯ï¼Œæœ€åå¾—åˆ°ç»“æœ <code>k = 6</code>ã€‚</p>
<p>è¿™é‡Œå†æ¬¡å¼ºè°ƒä¸€ä¸‹é€»è¾‘è¿ç®—ç¬¦çš„çŸ­è·¯ï¼š</p>
<p>åœ¨è¡¨è¾¾å¼ä¸­ <code>(a &amp;&amp; b)</code>ï¼Œå¦‚æœ a ä¸ºå‡ï¼Œåˆ™ b ä¸ä¼šè¢«æ±‚å€¼ï¼Œå› ä¸ºæ— è®ºå¦‚ä½•è¡¨è¾¾å¼éƒ½ä¼šä¸ºå‡ã€‚</p>
<p>åŒç†ï¼Œåœ¨è¡¨è¾¾å¼ä¸­ <code>(a || b)</code>ï¼Œå¦‚æœ a ä¸ºçœŸï¼Œåˆ™ b ä¸ä¼šè¢«æ±‚å€¼ï¼Œå› ä¸ºæ— è®ºå¦‚ä½•è¡¨è¾¾å¼éƒ½ä¼šä¸ºçœŸã€‚</p>
<p>è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„çŸ­è·¯ã€‚å¦‚æœæƒ³è¦å–æ¶ˆçŸ­è·¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>&amp;</code> ä»£æ›¿ <code>&amp;&amp;</code>ã€ä½¿ç”¨ <code>|</code> ä»£æ›¿ <code>||</code>ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™æ ·å†™ï¼Œä¼šé™ä½ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<p>è¯•æƒ³ï¼Œå¦‚æœå°†è¡¨è¾¾å¼ä¸­ <code>i &gt; j &amp;&amp; m &lt; k++</code> çš„ <code>&amp;&amp;</code> æ”¹ä¸º <code>&amp;</code>ï¼Œå˜é‡ <code>k</code> çš„å€¼å°†ä¼šæ˜¯å¤šå°‘ï¼Ÿ</p>
<h2 id="è¯­å¥"><a href="#è¯­å¥" class="headerlink" title="è¯­å¥"></a>è¯­å¥</h2><p>åœ¨è®¡ç®—æœºç§‘å­¦çš„ç¼–ç¨‹ä¸­ï¼Œä¸€ä¸ªè¯­å¥æ˜¯æŒ‡ä»¤å¼ç¼–ç¨‹è¯­è¨€ä¸­<strong>æœ€å°çš„ç‹¬ç«‹å…ƒç´ </strong>ï¼Œè¯­å¥ç”¨ä»¥è¡¨è¾¾ç¨‹åºè¦æ‰§è¡Œçš„ä¸€äº›åŠ¨ä½œã€‚å¤šæ•°è¯­å¥æ˜¯ä»¥é«˜çº§è¯­è¨€ç¼–å†™æˆä¸€ä¸ªæˆ–å¤šä¸ªè¯­å¥çš„åºåˆ—ï¼Œç”¨äºå‘½ä»¤è®¡ç®—æœºæ‰§è¡ŒæŒ‡å®šçš„ä¸€ç³»åˆ—æ“ä½œã€‚</p>
<p>è¯­å¥å’Œè‡ªç„¶è¯­è¨€ï¼ˆä¾‹å¦‚è‹±è¯­ã€æ±‰è¯­ï¼‰ä¸­çš„å¥å­å¤§è‡´ç›¸åŒã€‚ä¸€æ¡è¯­å¥æ„æˆäº†å®Œæ•´çš„æ‰§è¡Œå•å…ƒã€‚é€šè¿‡ä½¿ç”¨è‹±æ–‡åˆ†å·ï¼ˆ<code>;</code>ï¼‰ç»ˆæ­¢è¡¨è¾¾å¼ï¼Œå¯ä»¥å°†ä»¥ä¸‹ç±»å‹çš„è¡¨è¾¾å¼åˆ¶æˆè¯­å¥ï¼š</p>
<ul>
<li>èµ‹å€¼è¡¨è¾¾å¼</li>
<li>è‡ªå¢ &#x2F; è‡ªå‡ ++ æˆ– â€“</li>
<li>æ–¹æ³•è°ƒç”¨</li>
<li>å¯¹è±¡åˆ›å»ºè¡¨è¾¾å¼ï¼ˆé¢å‘å¯¹è±¡éƒ¨åˆ†å°†ä¼šå­¦åˆ°ï¼‰<br>è¯·ç»“åˆå¦‚ä¸‹ç¤ºä¾‹ç†è§£è¯­å¥çš„æ¦‚å¿µï¼š</li>
</ul>
<p>å˜é‡å£°æ˜è¯­å¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> age;</span><br></pre></td></tr></table></figure>
<p>èµ‹å€¼è¯­å¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">age = <span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p>è‡ªå¢è¯­å¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">age ++;</span><br></pre></td></tr></table></figure>
<p>æ–¹æ³•è°ƒç”¨è¯­å¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.printlnï¼ˆ<span class="string">&quot;Hello World! &quot;</span>ï¼‰;</span><br></pre></td></tr></table></figure>
<h2 id="å—"><a href="#å—" class="headerlink" title="å—"></a>å—</h2><p>å—é€šå¸¸ç”¨æ¥å°†ä¸¤æ¡æˆ–å¤šæ¡è¯­å¥ç»„åˆåœ¨ä¸€èµ·ï¼Œä½¿å…¶åœ¨æ ¼å¼ä¸Šçœ‹æ›´åƒä¸€æ¡è¯­å¥ã€‚</p>
<p>ä¸€å †è¯­å¥å¯ä»¥æ”¾åœ¨å¤§æ‹¬å·ä¸­ï¼Œä»¥ä½œä¸ºå•ä¸ªå—æ‰§è¡Œã€‚å¯ä»¥ä¸ºæ­¤ç±»è¯­å¥å‘½åæˆ–ä¸ºå…¶æä¾›æ‰§è¡Œæ¡ä»¶ï¼ˆä¸‹ä¸€èŠ‚çš„æ¡ä»¶åˆ¤æ–­å°†ä¼šè®²åˆ°ï¼‰ã€‚</p>
<p>ä¸‹é¢æ˜¯å°†ä¸€ç³»åˆ—çš„è¯­å¥æ”¾åœ¨ä¸€ä¸ªå—ä¸­çš„ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> a + b + c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Lua-cjsonå®‰è£…åŠéƒ¨ç½²</title>
    <url>/54099.html</url>
    <content><![CDATA[<p>åœ¨å®‰è£…lua-cjsonæ—¶åœ¨ç½‘ä¸ŠæŸ¥æ‰¾äº†å¾ˆå¤šæ–‡ç« ï¼Œå…³äºå…·ä½“çš„å®‰è£…æ–¹æ³•ä¼—è¯´çº·çº­ï¼Œä¸»è¦åŸå› æ˜¯å› ä¸ºlua-cjsonåœ¨å®‰è£…æ—¶éœ€è¦è¿›è¡Œé…ç½®çš„æ›´æ”¹ï¼Œä»¥ä¸‹æ˜¯ç»è¿‡å®æ“å¾—åˆ°çš„å…·ä½“å®‰è£…æ­¥éª¤ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget http://www.kyne.com.au/~mark/software/download/lua-cjson-2.1.0.tar.gz ä¸‹è½½å®‰è£…åŒ…</span><br><span class="line"></span><br><span class="line">tar zxvf lua-cjson-2.1.0.tar.gz</span><br><span class="line"></span><br><span class="line">cd lua-cjson-2.1.0/</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
<p>ä¿®æ”¹luaç‰ˆæœ¬ï¼Œé»˜è®¤ç‰ˆæœ¬ä¸º5.1 ï¼ˆæˆ‘çš„å½“å‰ç‰ˆæœ¬ä¸º5.3ï¼Œå¯ä»¥é€šè¿‡lua -v æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼‰<br>æ³¨é‡Šæ‰ CJSON_LDFLAGS &#x3D; -shared<br>è®¾ç½®CJSON_LDFLAGS &#x3D; -bundle -undefined dynamic_lookup ï¼ˆè¿™é‡Œå°±æ˜¯OSXå’ŒUnixçš„åŒºåˆ«ï¼Œbundleæ˜¯Macä½¿ç”¨çš„æ–‡ä»¶æ ¼å¼ï¼Œå¦‚æœä¸ä½¿ç”¨è¿™äº›é€‰é¡¹ï¼Œå¯èƒ½å¼•èµ·â€œmultiple lua vms detectedâ€é”™è¯¯ï¼‰<br>ä¿å­˜é…ç½®æ–‡ä»¶ç„¶åé€€å‡º</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">make</span><br><span class="line"></span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<p>æ£€æŸ¥ &#x2F;usr&#x2F;local&#x2F;lib&#x2F;lua&#x2F;5.3æ–‡ä»¶å¤¹ä¸‹æ˜¯å¦å­˜åœ¨cjson.soæ–‡ä»¶</p>
<p>å¦‚æœå­˜åœ¨åˆ™ä»£è¡¨å®‰è£…æˆåŠŸ</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaåŸºç¡€è¯­æ³•</title>
    <url>/ea538f2a.html</url>
    <content><![CDATA[<h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><p>ç¬¬ä¸€ä¸ª<code>Java</code>ç¨‹åº</p>
<span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="å¤§å°å†™æ•æ„Ÿ"><a href="#å¤§å°å†™æ•æ„Ÿ" class="headerlink" title="å¤§å°å†™æ•æ„Ÿ"></a>å¤§å°å†™æ•æ„Ÿ</h3><p>Java è¯­è¨€æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œè¿™ä¸ªçŸ¥è¯†ç‚¹å¾ˆå¥½ç†è§£ï¼šæ‰€æœ‰çš„å‘½åéƒ½åŒºåˆ†å¤§å°å†™ (æ–‡ä»¶åã€ç±»åã€æ–¹æ³•åç­‰ç­‰)ã€‚</p>
<p>ä¾‹å¦‚ï¼š<code>HelloWorld</code> ä¸ <code>helloWorld</code> æ˜¯ä¸åŒçš„ï¼›<code>Hello.java</code> å’Œ <code>HellO.java</code> ä¹Ÿæ˜¯ä¸åŒçš„ã€‚</p>
<h3 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h3><p>Java æ˜¯çº¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œå› æ­¤ç±» (class) æ˜¯ä¸€ä¸ªç¨‹åºçš„åŸºæœ¬å•ä½ã€‚æ‰€æœ‰çš„ Java ç¨‹åºæƒ³è¦è¿è¡Œï¼Œéƒ½ç¦»ä¸å¼€ç±»ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ¥çœ‹çœ‹ä»£ç çš„ç¬¬ä¸€è¡Œï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ<code>public</code> æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œå®ƒå±äºè®¿é—®æ§åˆ¶ç¬¦ï¼Œå®ƒè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯å…¬å¼€çš„ã€‚å…³äºä»€ä¹ˆæ˜¯è®¿é—®æ§åˆ¶ç¬¦ï¼Œåœ¨åˆå­¦é˜¶æ®µä¸å¿…ç†è§£ã€‚</p>
<p>ç´§æ¥ç€çš„ <code>class</code> ä¹Ÿæ˜¯ä¸€ä¸ªå…³é”®å­—ç”¨äºå£°æ˜ç±»ï¼Œ <code>HelloWorld</code> æ˜¯ç±»åï¼Œç±»åçš„é¦–å­—æ¯è¦å¤§å†™ã€‚å¦‚æœç±»åç”±å¤šä¸ªå•è¯ç»„æˆï¼Œé‚£ä¹ˆæ¯ä¸ªå•è¯çš„é¦–å­—æ¯éƒ½è¦å¤§å†™ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å£°æ˜ä¸€ä¸ªè¡¨ç¤ºå­¦ç”Ÿçš„ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImoocStudent</span> &#123;</span><br><span class="line">  	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸»æ–¹æ³•"><a href="#ä¸»æ–¹æ³•" class="headerlink" title="ä¸»æ–¹æ³•"></a>ä¸»æ–¹æ³•</h3><p>ä»€ä¹ˆæ˜¯ä¸»æ–¹æ³•å‘¢ï¼Ÿè¯·è§‚å¯Ÿç¤ºä¾‹ä»£ç çš„ <code>class</code> å†…éƒ¨ï¼ˆæŒ‡çš„æ˜¯ç±»å <code>HelloWorld</code> åé¢ç”¨å¤§æ‹¬å· {} åŒ…å«çš„å†…å®¹ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•è¢«ç§°ä¸ºä¸»æ–¹æ³•ã€‚æ¯ä¸ªç±»åªèƒ½æ‹¥æœ‰ä¸€ä¸ªä¸»æ–¹æ³•ã€‚</p>
<p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šæ‰€æœ‰çš„ <code>Java</code> ç¨‹åºéƒ½ä»ä¸»æ–¹æ³•å¼€å§‹æ‰§è¡Œã€‚ ä»¥ä¸‹çš„å†™æ³•æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥ä½ æš‚æ—¶æ— éœ€æ·±ç©¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è€Œåœ¨ä¸»æ–¹æ³•å†…éƒ¨ï¼ˆæŒ‡çš„æ˜¯ <code>main()</code> åé¢ä¸€å¯¹å¤§æ‹¬å·ä¸­é—´åŒ…å«çš„å†…å®¹ï¼‰æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›æŒ‡ä»¤ï¼Œä¾‹å¦‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç§°è¿™ä¸ªæŒ‡ä»¤ä¸ºè¾“å‡ºè¯­å¥ï¼Œå®ƒçš„ä½œç”¨æ˜¯å‘å±å¹•è¾“å‡º <code>Hello World!</code> ã€‚è¾“å‡ºè¯­å¥åœ¨åé¢ä¼šç»å¸¸ç”¨åˆ°ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸»æ–¹æ³•å†…éƒ¨å¤šæ¬¡è°ƒç”¨è¾“å‡ºè¯­å¥ï¼Œä»¥è¾“å‡ºå¤šæ¡å†…å®¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImoocStudent</span> &#123;</span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;ç¬¬ä¸€è¡Œè¾“å‡º&quot;</span>);</span><br><span class="line">      	System.out.println(<span class="string">&quot;ç¬¬äºŒè¡Œè¾“å‡º&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦å¤–è¡¥å……ä¸€ç‚¹ï¼Œç±»çš„å†…éƒ¨ä¸ä»…å¯ä»¥åŒ…å«ä¸€ä¸ªä¸»æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥åŒ…å«å¤šä¸ªæ–¹æ³•ã€‚åœ¨å­¦ä¹ æ–¹æ³•çš„æ¦‚å¿µä¹‹å‰ï¼Œæˆ‘ä»¬å°†ä¸»è¦åœ¨ä¸»æ–¹æ³•ä¸­ç¼–å†™ç¤ºä¾‹ä»£ç ã€‚</p>
<h3 id="æºä»£ç æ–‡ä»¶"><a href="#æºä»£ç æ–‡ä»¶" class="headerlink" title="æºä»£ç æ–‡ä»¶"></a>æºä»£ç æ–‡ä»¶</h3><p>æ—¢ç„¶æºä»£ç éœ€è¦æä¾›ç»™è®¡ç®—æœºæ‰§è¡Œï¼Œæˆ‘ä»¬å°±è¦å°†æºä»£ç ä»¥æ–‡ä»¶çš„å½¢å¼ä¿å­˜åœ¨è®¡ç®—æœºçš„ç£ç›˜ä¸Šã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæºä»£ç æ–‡ä»¶çš„å‘½åå¿…é¡»ä¸ç±»åç›¸åŒï¼Œä¸”åç¼€åä¸º<code>.java</code>ã€‚ä¾‹å¦‚ï¼š<code>HelloWorld</code> ç±»å¯¹åº”çš„æºä»£ç æ–‡ä»¶ååº”è¯¥ä¸º <code>HelloWorld.java</code>ã€‚</p>
<h2 id="Javaæ ‡è¯†ç¬¦"><a href="#Javaæ ‡è¯†ç¬¦" class="headerlink" title="Javaæ ‡è¯†ç¬¦"></a>Javaæ ‡è¯†ç¬¦</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>åœ¨è®¡ç®—æœºç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ ‡è¯†ç¬¦æ˜¯å¼€å‘è€…ç¼–ç¨‹æ—¶ä½¿ç”¨çš„åå­—ï¼Œç”¨äºç»™å˜é‡ã€å¸¸é‡ã€å‡½æ•°ã€è¯­å¥å—ç­‰å‘½åï¼Œä»¥å»ºç«‹èµ·åç§°ä¸ä½¿ç”¨ä¹‹é—´çš„å…³ç³»ã€‚æ ‡è¯†ç¬¦é€šå¸¸ç”±å­—æ¯å’Œæ•°å­—ä»¥åŠå…¶å®ƒå­—ç¬¦æ„æˆã€‚</p>
<p>åœ¨ Java ä¸­ï¼Œæ ‡è¯†ç¬¦é€šå¸¸ç”¨æ¥ç»™ç±»ã€å¯¹è±¡ã€å˜é‡ã€æ–¹æ³•ã€æ¥å£ã€è‡ªå®šä¹‰æ•°æ®ç±»å‹å‘½åã€‚</p>
<h3 id="å‘½åè§„èŒƒ"><a href="#å‘½åè§„èŒƒ" class="headerlink" title="å‘½åè§„èŒƒ"></a>å‘½åè§„èŒƒ</h3><p>æ ‡è¯†ç¬¦éƒ½ä»¥å­—æ¯ï¼ˆA-Z æˆ–è€… a-zï¼‰ï¼Œç¾å…ƒç¬¦å·ï¼ˆ$ï¼‰æˆ–ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¼€å§‹ï¼›é¦–å­—æ¯åå¯ä»¥æ˜¯å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿çš„ä»»æ„ç»„åˆï¼›æ­£å¦‚æˆ‘ä»¬å‰é¢æ‰€æåˆ°çš„ï¼Œæ ‡è¯†ç¬¦æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼›éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒJava ä¸­çš„ <strong>å…³é”®å­—</strong>ï¼ˆæœ¬èŠ‚æœ€åå°†ä¼šä»‹ç»ï¼‰ä¸èƒ½è¢«ç”¨ä½œæ ‡è¯†ç¬¦ã€‚</p>
<p>ä»¥ä¸‹æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦å‘½åå®ä¾‹ï¼š</p>
<ul>
<li>$name</li>
<li>_World<br>ä»¥ä¸‹ä¸åˆæ³•çš„æ ‡è¯†ç¬¦å‘½åå®ä¾‹ï¼š</li>
<li>ï¿¥color</li>
<li>12name</li>
<li>final</li>
</ul>
<h2 id="Java-æ³¨é‡Šå’Œç©ºè¡Œ"><a href="#Java-æ³¨é‡Šå’Œç©ºè¡Œ" class="headerlink" title="Java æ³¨é‡Šå’Œç©ºè¡Œ"></a>Java æ³¨é‡Šå’Œç©ºè¡Œ</h2><h3 id="æ¦‚å¿µ-1"><a href="#æ¦‚å¿µ-1" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><h4 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h4><p>æ³¨é‡Šæ˜¯ä¸€ç§ä¾¿äºç»™äººé˜…è¯»ç¨‹åºçš„æ–‡æœ¬ï¼Œå®ƒä¸ä¼šè¢«ç¼–è¯‘å™¨è§£æã€‚å…»æˆå¤šäº›æ³¨é‡Šçš„ä¹ æƒ¯ï¼Œä¸ä½†æœ‰åŠ©äºè‡ªå·±ç†è§£ç¨‹åºï¼Œä¹Ÿæœ‰åŠ©äºåˆ«äººæ›´å¥½åœ°ç†è§£è‡ªå·±çš„ç¨‹åºã€‚åœ¨å›¢é˜Ÿåä½œçš„é¡¹ç›®ä¸­ï¼Œä»£ç æ³¨é‡Šæ›´åŠ é‡è¦ï¼Œä»£ç çš„ç ”å‘äººå‘˜é€šè¿‡ç¼–å†™é€šä¿—æ˜“æ‡‚çš„æ³¨é‡Šï¼Œå¯ä»¥æå¤§åœ°é™ä½åä½œæˆå‘˜ä¹‹é—´æ²Ÿé€šæˆæœ¬ã€‚</p>
<p>ä¸‹å›¾ç°è‰²éƒ¨åˆ†ä¸º Java æºç ä¸­çš„æ³¨é‡Šï¼š<br><img data-src="https://s1.ax1x.com/2023/02/22/pSvrVVH.png" style="width:300px;height:200px" alt=""/></p>
<h4 id="ç©ºè¡Œ"><a href="#ç©ºè¡Œ" class="headerlink" title="ç©ºè¡Œ"></a>ç©ºè¡Œ</h4><p>ç©ºè¡Œå°±æ˜¯ç©ºç™½è¡Œï¼Œä¸æ³¨é‡Šä¸€æ ·ï¼ŒåŒæ ·ä¸ä¼šè¢«ç¼–è¯‘å™¨è§£æã€‚</p>
<p>é€‚å½“åœ°ä½¿ç”¨ç©ºè¡Œï¼Œå¯ä»¥è®©ä»£ç çš„ç»“æ„çœ‹èµ·æ¥æ›´å¥½çœ‹ï¼Œä¾‹å¦‚ï¼Œä¸‹é¢ç¨‹åºä¸­ç¬¬ 2 è¡Œã€ç¬¬ 5 è¡Œå’Œç¬¬ 8 è¡Œéƒ½æ˜¯ç©ºè¡Œï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HelloImooc</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    	System.out.println(<span class="string">&quot;ä½ å¥½æ…•è¯¾ç½‘&quot;</span>);</span><br><span class="line">        </span><br><span class="line">      System.out.println(<span class="string">&quot;Hello, Imooc!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ³¨é‡Šçš„åˆ†ç±»"><a href="#æ³¨é‡Šçš„åˆ†ç±»" class="headerlink" title="æ³¨é‡Šçš„åˆ†ç±»"></a>æ³¨é‡Šçš„åˆ†ç±»</h3><p>Java è¯­è¨€æä¾›äº†ä¸‰ç§ç±»åˆ«çš„æ³¨é‡Šï¼š</p>
<ul>
<li>å•è¡Œæ³¨é‡Š</li>
<li>å¤šè¡Œæ³¨é‡Š</li>
<li>æ–‡æ¡£æ³¨é‡Š</li>
</ul>
<h4 id="å•è¡Œæ³¨é‡Š"><a href="#å•è¡Œæ³¨é‡Š" class="headerlink" title="å•è¡Œæ³¨é‡Š"></a>å•è¡Œæ³¨é‡Š</h4><p>å•è¡Œæ³¨é‡Šç”¨äºæ³¨é‡Šä¸€è¡Œæ–‡æœ¬ï¼Œå®ƒä»¥åŒæ–œçº¿å¼€å§‹ï¼Œåé¢è·Ÿä¸Šè¦æ³¨é‡Šçš„å†…å®¹ï¼Œå…¶å†™æ³•ä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// è¢«æ³¨é‡Šçš„å†…å®¹</span><br></pre></td></tr></table></figure>
<p>åœ¨ Java ä»£ç ä¸­ï¼Œå®ƒæ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloImooc</span> &#123;</span><br><span class="line">  	<span class="comment">// å®šä¹‰å…¥å£æ–¹æ³•</span></span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      	<span class="comment">// æ‰“å°è¾“å‡ºï¼šä½ å¥½</span></span><br><span class="line">      	System.out.println(<span class="string">&quot;ä½ å¥½&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¤šè¡Œæ³¨é‡Š"><a href="#å¤šè¡Œæ³¨é‡Š" class="headerlink" title="å¤šè¡Œæ³¨é‡Š"></a>å¤šè¡Œæ³¨é‡Š</h4><p>å¤šè¡Œæ³¨é‡Šç”¨äºæ³¨é‡Šå¤šè¡Œæ–‡æœ¬ï¼Œå®ƒä»¥ <code>/*</code> å¼€å¤´ï¼Œä»¥ <code>*/</code> ç»“å°¾ï¼Œå…¶å†™æ³•ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¢«æ³¨é‡Šçš„ç¬¬ä¸€è¡Œå†…å®¹</span></span><br><span class="line"><span class="comment">è¢«æ³¨é‡Šçš„ç¬¬äºŒè¡Œå†…å®¹</span></span><br><span class="line"><span class="comment">è¢«æ³¨é‡Šçš„ç¬¬ä¸‰è¡Œå†…å®¹</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬åœ¨å¼€å‘æ—¶ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œéœ€è¦æ³¨é‡Šä¸€æ®µå¤šè¡Œçš„é€»è¾‘ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨å¤šè¡Œæ³¨é‡Šï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">  	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"> 	<span class="keyword">private</span> String name;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">/*</span></span><br><span class="line"><span class="comment">  	å¤šè¡Œæ³¨é‡Šï¼Œæ³¨é‡Šäº†è¿™æ®µä»£ç </span></span><br><span class="line"><span class="comment">  	public Dog (String name, int age) &#123;</span></span><br><span class="line"><span class="comment">  		this.name = name;</span></span><br><span class="line"><span class="comment">      	this.age = age;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ–‡æ¡£æ³¨é‡Š"><a href="#æ–‡æ¡£æ³¨é‡Š" class="headerlink" title="æ–‡æ¡£æ³¨é‡Š"></a>æ–‡æ¡£æ³¨é‡Š</h4><p>Java ä¸­è¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„å¤šè¡Œæ³¨é‡Š â€”â€” æ–‡æ¡£æ³¨é‡Šï¼Œå®ƒä»¥ <code>/**</code> å¼€å¤´ï¼Œä»¥ <code>*/</code> ç»“å°¾ï¼Œå¦‚æœæœ‰å¤šè¡Œï¼Œåˆ™æ¯è¡Œéƒ½ä»¥ <code>*</code> å¼€å¤´ï¼Œå…¶åœ¨ä»£ç ä¸­çš„å†™æ³•ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HelloWorld ç±»</span></span><br><span class="line"><span class="comment"> * å®ƒæ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ª Java ç¨‹åº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: Colorful</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/02/02</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»æ–¹æ³•ï¼Œå‘å±å¹•æ‰“å° Hello World!</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args ä¸»æ–¹æ³•çš„å›ºå®šå‚æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      	System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§ç‰¹æ®Šçš„å¤šè¡Œæ³¨é‡Šéœ€è¦å†™åœ¨ç±»å’Œæ–¹æ³•çš„å®šä¹‰å¤„ï¼Œå¯ä»¥ä½¿ç”¨ javadoc è¿™æ ·çš„å‘½ä»¤æ¥è‡ªåŠ¨åˆ›å»ºæ–‡æ¡£ã€‚å¦å¤–é€šå¸¸åœ¨ç¨‹åºå¼€å¤´åŠ å…¥ä½œè€…ï¼Œæ—¶é—´ï¼Œç‰ˆæœ¬ï¼Œè¦å®ç°çš„åŠŸèƒ½ç­‰å†…å®¹æ³¨é‡Šï¼Œæ–¹ä¾¿ç¨‹åºçš„ç»´æŠ¤ä»¥åŠç¨‹åºå‘˜çš„äº¤æµã€‚</p>
<h2 id="å…³é”®å­—å’Œä¿ç•™å­—"><a href="#å…³é”®å­—å’Œä¿ç•™å­—" class="headerlink" title="å…³é”®å­—å’Œä¿ç•™å­—"></a>å…³é”®å­—å’Œä¿ç•™å­—</h2><h3 id="æ¦‚å¿µ-2"><a href="#æ¦‚å¿µ-2" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>å…³é”®å­— (<code>Keyword</code>) æ˜¯ Java è¯­è¨€ä¸­çš„ç‰¹æ®Šæ ‡è®°ã€‚å®ƒå·²ç»è¢«è¯­è¨€æœ¬èº«é¢„å…ˆä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨å…³é”®å­—ä½œä¸ºæˆ‘ä»¬æ ‡è¯†ç¬¦çš„å‘½åã€‚</p>
<p>ä¾‹å¦‚ Java åŸºæœ¬ç±»å‹çš„ <code>int</code>ã€<code>boolean</code>ï¼Œæµç¨‹æ§åˆ¶è¯­å¥ä¸­çš„ <code>if</code>ã€<code>for</code>ï¼Œè®¿é—®ä¿®é¥°ç¬¦ <code>public</code>ï¼Œä»¥åŠä¸€äº›ç”¨äºå£°æ˜å’Œå®šä¹‰ Java ç±»ã€åŒ…ã€æ¥å£çš„ <code>class</code>ã€<code>package</code>ã€<code>interface</code>ã€‚</p>
<p>è€Œä¿ç•™å­— (<code>Reserved word</code>) å¯èƒ½æ˜¯æœªæ¥çš„å…³é”®å­—ï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­ï¼ŒJava è¯­è¨€ä½œä¸ºç‰¹æ®Šæ ‡è®°ã€‚</p>
<blockquote>
<p>Tipsï¼šæ— è®ºæ˜¯å…³é”®å­—è¿˜æ˜¯ä¿ç•™å­—ï¼Œæˆ‘ä»¬éƒ½è¦è®°ä½ï¼šä¸èƒ½ä½¿ç”¨å®ƒä»¬ä½œä¸ºæˆ‘ä»¬çš„ä»£ç ä¸­çš„æ ‡è¯†ç¬¦ã€‚</p>
</blockquote>
<h2 id="Java-ä¸­æœ‰å“ªäº›å…³é”®å­—"><a href="#Java-ä¸­æœ‰å“ªäº›å…³é”®å­—" class="headerlink" title="Java ä¸­æœ‰å“ªäº›å…³é”®å­—"></a>Java ä¸­æœ‰å“ªäº›å…³é”®å­—</h2><p>å…³é”®å­—ä¸€å¾‹ç”¨å°å†™å­—æ¯æ ‡è¯†ï¼ŒJava è¯­è¨€ä¸­å®šä¹‰äº†å¦‚ä¸‹è¡¨æ‰€ç¤ºçš„å…³é”®å­—ï¼š</p>
<table>
<thead>
<tr>
<th>å…³é”®è¯</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>abstract</td>
<td>è¡¨æ˜ç±»æˆ–è€…æˆå‘˜æ–¹æ³•å…·æœ‰æŠ½è±¡å±æ€§</td>
</tr>
<tr>
<td>assert</td>
<td>æ–­è¨€ï¼Œå¸¸ç”¨äºç¨‹åºçš„è°ƒè¯•</td>
</tr>
<tr>
<td>boolean</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ï¼šå¸ƒå°”ç±»å‹</td>
</tr>
<tr>
<td>break</td>
<td>æå‰è·³å‡ºä¸€ä¸ªå—</td>
</tr>
<tr>
<td>byte</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå­—èŠ‚ç±»å‹</td>
</tr>
<tr>
<td>case</td>
<td>ç”¨åœ¨ switch è¯­å¥ä¹‹ä¸­ï¼Œè¡¨ç¤ºå…¶ä¸­çš„ä¸€ä¸ªåˆ†æ”¯</td>
</tr>
<tr>
<td>catch</td>
<td>ç”¨åœ¨å¼‚å¸¸å¤„ç†ä¸­ï¼Œç”¨æ¥æ•æ‰å¼‚å¸¸</td>
</tr>
<tr>
<td>char</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ï¼šå­—ç¬¦ç±»å‹</td>
</tr>
<tr>
<td>class</td>
<td>ç”¨äºå£°æ˜ä¸€ä¸ªç±»</td>
</tr>
<tr>
<td>const</td>
<td>ä¿ç•™å…³é”®å­—</td>
</tr>
<tr>
<td>continue</td>
<td>å›åˆ°ä¸€ä¸ªå—çš„å¼€å§‹å¤„</td>
</tr>
<tr>
<td>default</td>
<td>é»˜è®¤ï¼Œç”¨åœ¨ switch è¯­å¥ä¸­ï¼Œè¡¨æ˜ä¸€ä¸ªé»˜è®¤çš„åˆ†æ”¯ï¼›<code>JDK1.8</code> ä»¥åä¹Ÿä½œç”¨äºå£°æ˜æ¥å£å‡½æ•°çš„é»˜è®¤å®ç°</td>
</tr>
<tr>
<td>do</td>
<td>ç”¨åœ¨ do-while å¾ªç¯ç»“æ„ä¸­</td>
</tr>
<tr>
<td>double</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ï¼šåŒç²¾åº¦æµ®ç‚¹æ•°ç±»å‹</td>
</tr>
<tr>
<td>else</td>
<td>ç”¨åœ¨æ¡ä»¶è¯­å¥ä¸­ï¼Œè¡¨æ˜å½“æ¡ä»¶ä¸æˆç«‹æ—¶çš„åˆ†æ”¯</td>
</tr>
<tr>
<td>enum</td>
<td>æšä¸¾</td>
</tr>
<tr>
<td>extends</td>
<td>è¡¨æ˜ä¸€ä¸ªç±»å‹æ˜¯å¦ä¸€ä¸ªç±»å‹çš„å­ç±»å‹ã€‚å¯¹äºç±»ï¼Œå¯ä»¥æ˜¯å¦ä¸€ä¸ªç±»æˆ–è€…æŠ½è±¡ç±»ï¼›å¯¹äºæ¥å£ï¼Œå¯ä»¥æ˜¯å¦ä¸€ä¸ªæ¥å£</td>
</tr>
<tr>
<td>final</td>
<td>ç”¨æ¥è¯´æ˜æœ€ç»ˆå±æ€§ï¼Œè¡¨æ˜ä¸€ä¸ªç±»ä¸èƒ½æ´¾ç”Ÿå‡ºå­ç±»ï¼Œæˆ–è€…æˆå‘˜æ–¹æ³•ä¸èƒ½è¢«è¦†ç›–ï¼Œæˆ–è€…æˆå‘˜åŸŸçš„å€¼ä¸èƒ½è¢«æ”¹å˜ï¼Œç”¨æ¥å®šä¹‰å¸¸é‡</td>
</tr>
<tr>
<td>finally</td>
<td>ç”¨äºå¤„ç†å¼‚å¸¸æƒ…å†µï¼Œç”¨æ¥å£°æ˜ä¸€ä¸ªåŸºæœ¬è‚¯å®šä¼šè¢«æ‰§è¡Œåˆ°çš„è¯­å¥å—</td>
</tr>
<tr>
<td>float</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ä¹‹ä¸€ï¼Œå•ç²¾åº¦æµ®ç‚¹æ•°ç±»å‹</td>
</tr>
<tr>
<td>for</td>
<td>ä¸€ç§å¾ªç¯ç»“æ„çš„å¼•å¯¼è¯</td>
</tr>
<tr>
<td>goto</td>
<td>ä¿ç•™å…³é”®å­—ï¼Œæ²¡æœ‰å…·ä½“å«ä¹‰</td>
</tr>
<tr>
<td>if</td>
<td>æ¡ä»¶è¯­å¥çš„å¼•å¯¼è¯</td>
</tr>
<tr>
<td>implements</td>
<td>è¡¨æ˜ä¸€ä¸ªç±»å®ç°äº†ç»™å®šçš„æ¥å£</td>
</tr>
<tr>
<td>import</td>
<td>è¡¨æ˜è¦è®¿é—®æŒ‡å®šçš„ç±»æˆ–åŒ…</td>
</tr>
<tr>
<td>instanceof</td>
<td>ç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹çš„å®ä¾‹å¯¹è±¡</td>
</tr>
<tr>
<td>int</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ä¹‹ä¸€ï¼Œæ•´æ•°ç±»å‹</td>
</tr>
<tr>
<td>interface</td>
<td>æ¥å£</td>
</tr>
<tr>
<td>long</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ä¹‹ä¸€ï¼Œé•¿æ•´æ•°ç±»å‹</td>
</tr>
<tr>
<td>native</td>
<td>ç”¨æ¥å£°æ˜ä¸€ä¸ªæ–¹æ³•æ˜¯ç”±ä¸è®¡ç®—æœºç›¸å…³çš„è¯­è¨€ï¼ˆå¦‚ C&#x2F;C++&#x2F;FORTRAN è¯­è¨€ï¼‰å®ç°çš„</td>
</tr>
<tr>
<td>new</td>
<td>ç”¨æ¥åˆ›å»ºæ–°å®ä¾‹å¯¹è±¡</td>
</tr>
<tr>
<td>package</td>
<td>åŒ…</td>
</tr>
<tr>
<td>private</td>
<td>ä¸€ç§è®¿é—®æ§åˆ¶æ–¹å¼ï¼šç§ç”¨æ¨¡å¼</td>
</tr>
<tr>
<td>protected</td>
<td>ä¸€ç§è®¿é—®æ§åˆ¶æ–¹å¼ï¼šä¿æŠ¤æ¨¡å¼</td>
</tr>
<tr>
<td>public</td>
<td>ä¸€ç§è®¿é—®æ§åˆ¶æ–¹å¼ï¼šå…±ç”¨æ¨¡å¼</td>
</tr>
<tr>
<td>return</td>
<td>ä»æˆå‘˜æ–¹æ³•ä¸­è¿”å›æ•°æ®</td>
</tr>
<tr>
<td>short</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ä¹‹ä¸€ï¼ŒçŸ­æ•´æ•°ç±»å‹</td>
</tr>
<tr>
<td>static</td>
<td>è¡¨æ˜å…·æœ‰é™æ€å±æ€§</td>
</tr>
<tr>
<td>strictfp</td>
<td>ç”¨æ¥å£°æ˜ FP_strictï¼ˆå•ç²¾åº¦æˆ–åŒç²¾åº¦æµ®ç‚¹æ•°ï¼‰è¡¨è¾¾å¼éµå¾ª IEEE 754 ç®—æœ¯è§„èŒƒ</td>
</tr>
<tr>
<td>super</td>
<td>è¡¨æ˜å½“å‰å¯¹è±¡çš„çˆ¶ç±»å‹çš„å¼•ç”¨æˆ–è€…çˆ¶ç±»å‹çš„æ„é€ æ–¹æ³•</td>
</tr>
<tr>
<td>switch</td>
<td>åˆ†æ”¯è¯­å¥ç»“æ„çš„å¼•å¯¼è¯</td>
</tr>
<tr>
<td>synchronized</td>
<td>è¡¨æ˜ä¸€æ®µä»£ç éœ€è¦åŒæ­¥æ‰§è¡Œ</td>
</tr>
<tr>
<td>this</td>
<td>æŒ‡å‘å½“å‰å®ä¾‹å¯¹è±¡çš„å¼•ç”¨</td>
</tr>
<tr>
<td>throw</td>
<td>æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</td>
</tr>
<tr>
<td>throws</td>
<td>å£°æ˜åœ¨å½“å‰å®šä¹‰çš„æˆå‘˜æ–¹æ³•ä¸­æ‰€æœ‰éœ€è¦æŠ›å‡ºçš„å¼‚å¸¸</td>
</tr>
<tr>
<td>transient</td>
<td>å£°æ˜ä¸ç”¨åºåˆ—åŒ–çš„æˆå‘˜åŸŸ</td>
</tr>
<tr>
<td>try</td>
<td>å°è¯•ä¸€ä¸ªå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ç¨‹åºå—</td>
</tr>
<tr>
<td>void</td>
<td>å£°æ˜å½“å‰æˆå‘˜æ–¹æ³•æ²¡æœ‰è¿”å›å€¼</td>
</tr>
<tr>
<td>volatile</td>
<td>è¡¨æ˜ä¸¤ä¸ªæˆ–è€…å¤šä¸ªå˜é‡å¿…é¡»åŒæ­¥åœ°å‘ç”Ÿå˜åŒ–</td>
</tr>
<tr>
<td>while</td>
<td>ç”¨åœ¨å¾ªç¯ç»“æ„ä¸­</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaè¿ç®—ç¬¦</title>
    <url>/778179f.html</url>
    <content><![CDATA[<h1 id="Java-è¿ç®—ç¬¦"><a href="#Java-è¿ç®—ç¬¦" class="headerlink" title="Java è¿ç®—ç¬¦"></a>Java è¿ç®—ç¬¦</h1><p>è¿ç®—ç¬¦æ˜¯ä¸€äº›ç‰¹æ®Šçš„ç¬¦å·ï¼Œå®ƒä»¬å¯¹ä¸€ä¸ªï¼Œä¸¤ä¸ªæˆ–å¤šä¸ªæ“ä½œæ•°æ‰§è¡Œç‰¹å®šçš„è¿ç®—ï¼Œç„¶åè¿”å›ä¸€ä¸ªç»“æœã€‚è¿™é‡Œçš„æ“ä½œæ•°æŒ‡çš„å°±æ˜¯è¿ç®—ç¬¦æ“ä½œçš„å®ä½“ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p><code>Java</code>æä¾›äº†ä¸€ç»„ä¸°å¯Œçš„è¿ç®—ç¬¦æ¥æ“ä½œå˜é‡ã€‚ æˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰Javaè¿ç®—ç¬¦åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li>ç®—æœ¯è¿ç®—ç¬¦</li>
<li>å…³ç³»è¿ç®—ç¬¦</li>
<li>ä½è¿ç®—ç¬¦</li>
<li>é€»è¾‘è¿ç®—ç¬¦</li>
<li>èµ‹å€¼è¿ç®—ç¬¦</li>
<li>å…¶ä»–è¿ç®—ç¬¦</li>
</ul>
<h2 id="ç®—æœ¯è¿ç®—ç¬¦"><a href="#ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ç®—æœ¯è¿ç®—ç¬¦"></a>ç®—æœ¯è¿ç®—ç¬¦</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>Java è¯­è¨€æä¾›äº†æ‰§è¡ŒåŠ å‡ä¹˜é™¤å››åˆ™è¿ç®—çš„è¿ç®—ç¬¦ã€‚ ç®—æ•°è¿ç®—ç¬¦è¢«ç”¨åœ¨æ•°å­¦è¡¨è¾¾å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„åµŒå¥—çš„å°æ‹¬å·ï¼Œå…¶ä½œç”¨ä¸æ•°å­¦ä¸­ç›¸åŒã€‚ä¸‹è¡¨åˆ—å‡ºäº†ç®—æœ¯è¿ç®—ç¬¦ï¼š</p>
<p>ï¼ˆåœ¨ä¾‹å­ä¸­ï¼Œåˆå§‹åŒ–ä¸¤ä¸ªæ•´å‹å˜é‡aã€bï¼š<code>int a = 2; int b = 4;</code>ï¼‰<br><img data-src="https://s1.ax1x.com/2023/02/24/pSzbdl6.jpg" style="width:400px;height:300px" alt=""/></p>
<h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>ä»¥ä¸‹æ˜¯ç®—æ•°è¿ç®—ç¬¦çš„å®ä¾‹ç¨‹åºã€‚</p>
<p>åŠ æ³•è¿ç®—ç¬¦ä½¿ç”¨å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticOperators1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å£°æ˜ä¸¤ä¸ªæ•´å‹å˜é‡ num1,num2 åˆ†åˆ«èµ‹å€¼ä¸º 2, 3</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">2</span>, num2 = <span class="number">3</span>;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨åŠ æ³•è¿ç®—ç¬¦ï¼Œå¯¹num1å’Œnum2æ‰§è¡Œç›¸åŠ æ“ä½œï¼Œå¹¶å°†è¿”å›ç»“æœèµ‹å€¼ç»™result</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> num1 + num2;</span><br><span class="line">        System.out.println( num1 + <span class="string">&quot; + &quot;</span> + num2 + <span class="string">&quot; = &quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2 + 3 = 5</span><br></pre></td></tr></table></figure>
<p>å‡æ³•è¿ç®—ç¬¦ä½¿ç”¨å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticOperators2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å£°æ˜ä¸¤ä¸ªæ•´å‹å˜é‡ num1, num2 åˆ†åˆ«èµ‹å€¼ä¸º 5, 3</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">5</span>, num2 = <span class="number">3</span>;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨å‡æ³•è¿ç®—ç¬¦ï¼Œè®© num1 åŠ ä¸Š num2ï¼Œå¹¶å°†è¿”å›ç»“æœèµ‹å€¼ç»™result</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> num1 + num2;</span><br><span class="line">        System.out.println( num1 + <span class="string">&quot; + &quot;</span> + num2 + <span class="string">&quot; = &quot;</span> + result);</span><br><span class="line">        <span class="comment">// è®¡ç®— num2 - num1 çš„ç»“æœ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result1</span> <span class="operator">=</span> num2 - num1;</span><br><span class="line">        System.out.println( num2 + <span class="string">&quot; - &quot;</span> + num1 + <span class="string">&quot; = &quot;</span> + result1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">5 + 3 = 8</span><br><span class="line">3 - 5 = -2</span><br></pre></td></tr></table></figure>
<p>ä¹˜æ³•è¿ç®—ç¬¦ä½¿ç”¨å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticOperators3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å£°æ˜ä¸¤ä¸ªæ•´å‹å˜é‡ num1, num2 åˆ†åˆ«èµ‹å€¼ä¸º 2, 5</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">2</span>, num2 = <span class="number">5</span>;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ä¹˜æ³•è¿ç®—ç¬¦ï¼Œè®© num1 ä¸ num2 ç›¸ä¹˜ï¼Œå¹¶å°†è¿”å›ç»“æœèµ‹å€¼ç»™result</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> num1 * num2;</span><br><span class="line">        System.out.println( num1 + <span class="string">&quot; * &quot;</span> + num2 + <span class="string">&quot; = &quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2 x 5 = 10</span><br></pre></td></tr></table></figure>
<p>é™¤æ³•è¿ç®—ç¬¦ä½¿ç”¨å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticOperators4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å£°æ˜ä¸¤ä¸ªæ•´å‹å˜é‡ num1, num2 åˆ†åˆ«èµ‹å€¼ä¸º 10, 2</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">10</span>, num2 = <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨é™¤æ³•è¿ç®—ç¬¦ï¼Œè®© num1 é™¤ä»¥ num2ï¼Œå¹¶å°†è¿”å›ç»“æœèµ‹å€¼ç»™result</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> num1 / num2;</span><br><span class="line">        System.out.println( num1 + <span class="string">&quot; / &quot;</span> + num2 + <span class="string">&quot; = &quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">10 / 2 = 5</span><br></pre></td></tr></table></figure>
<p>å–ä½™è¿ç®—ç¬¦ä½¿ç”¨å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticOperators5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å£°æ˜ä¸¤ä¸ªæ•´å‹å˜é‡ num1, num2 åˆ†åˆ«èµ‹å€¼ä¸º 5, 2</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">5</span>, num2 = <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨å–ä½™è¿ç®—ç¬¦ï¼Œè®© num1 å¯¹ num2 å–ä½™ï¼Œå¹¶å°†è¿”å›ç»“æœèµ‹å€¼ç»™result</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> num1 % num2;</span><br><span class="line">        System.out.println( num1 + <span class="string">&quot; % &quot;</span> + num2 + <span class="string">&quot; = &quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘æ‰§è¡Œä»£ç ï¼Œå±å¹•ä¸Šå°†ä¼šæ‰“å°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">5 % 2 = 1</span><br></pre></td></tr></table></figure>
<p>è‡ªå¢ã€è‡ªå‡è¿ç®—ç¬¦ä½¿ç”¨å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticOperators6</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å£°æ˜ä¸¤ä¸ªæ•´å‹å˜é‡ num1, num2 åˆ†åˆ«èµ‹å€¼ä¸º 5, 2</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">5</span>, num2 = <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// æ‰“å° num1 å’Œ num2</span></span><br><span class="line">        System.out.println(<span class="string">&quot;num1=&quot;</span> + num1);</span><br><span class="line">        System.out.println(<span class="string">&quot;num2=&quot;</span> + num2);</span><br><span class="line">        num1 ++;</span><br><span class="line">        num2 --;</span><br><span class="line">        System.out.println(<span class="string">&quot;num1è‡ªå¢åï¼š&quot;</span> + num1);</span><br><span class="line">        System.out.println(<span class="string">&quot;num2è‡ªå‡åï¼š&quot;</span> + num2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">num1=5</span><br><span class="line">num2=2</span><br><span class="line">num1è‡ªå¢åï¼š6</span><br><span class="line">num2è‡ªå‡åï¼š1</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œæ•´å‹ä¹‹é—´çš„é™¤æ³•è¿ç®—æ˜¯æ•´é™¤ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€<code>2 / 4</code>çš„ç»“æœä¸º<code>0</code>ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åƒæ•°å­¦ä¸€æ ·å¾—åˆ°ä¸€ä¸ªå°æ•°ï¼Œå¯ä»¥ä½¿ç”¨æµ®ç‚¹ç±»å‹çš„æ“ä½œæ•°ã€‚ä¾‹å¦‚:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OperatorDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ†ç»„åˆå§‹åŒ–ä¸¤ä¸ªæ•´å‹å˜é‡i1ã€i2ï¼Œå€¼åˆ†åˆ«ä¸º2ã€4</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">2</span>, i2 = <span class="number">4</span>;</span><br><span class="line">        <span class="comment">// ä½¿i1é™¤ä»¥i2ï¼Œå¹¶å°†è¿”å›ç»“æœèµ‹å€¼ç»™i3</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i3</span> <span class="operator">=</span> i1 / i2;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ•´å‹2é™¤ä»¥æ•´å‹4çš„ç»“æœä¸ºï¼š&quot;</span> + i3);</span><br><span class="line">        <span class="comment">// åˆ†ç»„åˆå§‹åŒ–ä¸¤ä¸ªæµ®ç‚¹å‹å˜é‡f1ã€f2ï¼Œå€¼åˆ†åˆ«ä¸º2ã€4</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="number">2f</span>, f2 = <span class="number">4f</span>;</span><br><span class="line">        <span class="comment">// ä½¿f1é™¤ä»¥f2ï¼Œå¹¶å°†è¿”å›ç»“æœèµ‹å€¼ç»™f3</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">f3</span> <span class="operator">=</span> f1 / f2;</span><br><span class="line">        System.out.println(<span class="string">&quot;æµ®ç‚¹å‹2é™¤ä»¥æµ®ç‚¹å‹4çš„ç»“æœä¸ºï¼š&quot;</span> + f3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ•´å‹2é™¤ä»¥æ•´å‹4çš„ç»“æœä¸ºï¼š0</span><br><span class="line">æµ®ç‚¹å‹2é™¤ä»¥æµ®ç‚¹å‹4çš„ç»“æœä¸ºï¼š0.5</span><br></pre></td></tr></table></figure>
<p>è¦ç‰¹åˆ«æ³¨æ„ï¼Œåœ¨ Java è¯­è¨€ä¸­ï¼Œç®—æ•°è¿ç®—ç¬¦ä¸èƒ½ä½œç”¨äºä¸åŒç±»å‹çš„æ“ä½œæ•°ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªåä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OperatorDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–å¸ƒå°”ç±»å‹çš„å˜é‡bï¼Œå€¼ä¸ºtrue</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–æ•´å‹å˜é‡iï¼Œå€¼ä¸º20</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨åŠ æ³•è¿ç®—ç¬¦ï¼Œè®©iä¸bç›¸åŠ </span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> i + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘ä»£ç ï¼Œå°†ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">javac OperatorDemo1.java</span><br><span class="line">OperatorDemo1.java:<span class="number">7</span>: é”™è¯¯: äºŒå…ƒè¿ç®—ç¬¦ <span class="string">&#x27;+&#x27;</span> çš„æ“ä½œæ•°ç±»å‹é”™è¯¯</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> i + b;</span><br><span class="line">                       ^</span><br><span class="line">  ç¬¬ä¸€ä¸ªç±»å‹:  <span class="type">int</span></span><br><span class="line">  ç¬¬äºŒä¸ªç±»å‹: <span class="type">boolean</span></span><br><span class="line"><span class="number">1</span> ä¸ªé”™è¯¯</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å™¨ç»™å‡ºæ˜ç¡®æç¤ºï¼šåŠ æ³•è¿ç®—ç¬¦çš„æ“ä½œæ•°ç±»å‹é”™è¯¯ã€‚è¿™æ˜¯å› ä¸º Java æ˜¯å¼ºç±»å‹çš„è¯­è¨€ï¼Œä¸åŒç±»å‹çš„æ“ä½œæ•°çš„ç®—æ•°è¿ç®—æ˜¯è¿è§„çš„ï¼Œè¿™ä¸ªåŸç†åŒæ ·é€‚ç”¨äºå…¶ä»–ç®—æ•°è¿ç®—ç¬¦ï¼Œæ­¤å¤„ä¸å†ä¸€ä¸€åˆ—ä¸¾ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹ï¼Œè‡ªå¢è‡ªå‡è¿ç®—ç¬¦æ˜¯æœ‰å‰åä¹‹åˆ†çš„ï¼Œ++iè¡¨ç¤ºå…ˆåŠ 1å†å¼•ç”¨iï¼Œi++è¡¨ç¤ºå…ˆå¼•ç”¨iå†åŠ 1ã€‚å°†åœ¨ä¸‹ä¸€å°èŠ‚ä¸¾ä¾‹ä»‹ç»ã€‚</p>
<h2 id="å…³ç³»è¿ç®—ç¬¦"><a href="#å…³ç³»è¿ç®—ç¬¦" class="headerlink" title="å…³ç³»è¿ç®—ç¬¦"></a>å…³ç³»è¿ç®—ç¬¦</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>å…³ç³»è¿ç®—ç¬¦åˆç§°ä¸ºæ¯”è¾ƒè¿ç®—ç¬¦ï¼Œæ¯”è¾ƒçš„ç»“æœæ˜¯ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„å€¼ï¼ˆ<code>true</code>æˆ–<code>false</code>ï¼‰ã€‚</p>
<p>Java è¯­è¨€æœ‰å‡ ä¸ªå¯ç”¨äºæ¯”è¾ƒå˜é‡çš„è¿ç®—ç¬¦ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<p>ï¼ˆåœ¨ä¾‹å­ä¸­ï¼Œåˆå§‹åŒ–ä¸¤ä¸ªæ•´å‹å˜é‡aã€bï¼š<code>int a = 2</code>; <code>int b = 4</code>;ï¼‰</p>
<h3 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦çš„å®ä¾‹ç¨‹åºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OperateDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–ä¸€ä¸ªåŒç²¾åº¦æµ®ç‚¹å‹å˜é‡d1ï¼Œå€¼ä¸º10</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–ä¸€ä¸ªæ•´å‹å˜é‡i1ï¼Œå€¼ä¹Ÿä¸º10</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;id == i1çš„ç»“æœä¸ºï¼š&quot;</span> + (d1 == i1));</span><br><span class="line">        System.out.println(<span class="string">&quot;id != i1çš„ç»“æœä¸ºï¼š&quot;</span> + (d1 != i1));</span><br><span class="line">        System.out.println(<span class="string">&quot;id &gt; i1çš„ç»“æœä¸ºï¼š&quot;</span> + (d1 &gt; i1));</span><br><span class="line">        System.out.println(<span class="string">&quot;id &lt; i1çš„ç»“æœä¸ºï¼š&quot;</span> + (d1 &lt; i1));</span><br><span class="line">        System.out.println(<span class="string">&quot;id &gt;= i1çš„ç»“æœä¸ºï¼š&quot;</span> + (d1 &gt;= i1));</span><br><span class="line">        System.out.println(<span class="string">&quot;id &lt;= i1çš„ç»“æœä¸ºï¼š&quot;</span> + (d1 &lt;= i1));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id == i1çš„ç»“æœä¸ºï¼štrue</span><br><span class="line">id != i1çš„ç»“æœä¸ºï¼šfalse</span><br><span class="line">id &gt; i1çš„ç»“æœä¸ºï¼šfalse</span><br><span class="line">id &lt; i1çš„ç»“æœä¸ºï¼šfalse</span><br><span class="line">id &gt;= i1çš„ç»“æœä¸ºï¼štrue</span><br><span class="line">id &lt;= i1çš„ç»“æœä¸ºï¼štrue</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Tips</strong>ï¼š<code>&gt;</code>ã€<code>&lt;</code>ã€<code>&gt;=</code>ã€<code>&lt;=</code> è¿™å‡ ä¸ªè¿ç®—ç¬¦å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°å¿…é¡»æ˜¯<code>byte</code>ï¼Œ<code>short</code>ï¼Œ<code>int</code>ï¼Œ<code>long</code>ï¼Œ<code>double</code>ï¼Œ<code>float</code>ï¼Œ<code>char</code>è¿™å‡ ç§æ•°æ®ç±»å‹ï¼›è€Œ&#x3D;&#x3D;å’Œ!&#x3D;è¿ç®—ç¬¦çš„æ“ä½œæ•°æ—¢å¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆå¯ä»¥æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ã€‚</p>
</blockquote>
<h2 id="ä½è¿ç®—ç¬¦"><a href="#ä½è¿ç®—ç¬¦" class="headerlink" title="ä½è¿ç®—ç¬¦"></a>ä½è¿ç®—ç¬¦</h2><p>Java è¯­è¨€è¿˜æä¾›äº†å¯¹æ•´æ•°ç±»å‹æ‰§è¡ŒæŒ‰ä½å’Œç§»ä½æ“ä½œçš„è¿ç®—ç¬¦ï¼Œç§°ä½œä½è¿ç®—ç¬¦ã€‚<br>å®ƒåœ¨å®é™…çš„ç¼–ç ä¸­å¹¶ä¸å¸¸ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹äº†è§£å³å¯ã€‚<br>å‡è®¾<code>a = 60ï¼Œb = 13</code>;å®ƒä»¬çš„äºŒè¿›åˆ¶æ ¼å¼è¡¨ç¤ºå°†å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">a = <span class="number">0011</span> <span class="number">1100</span></span><br><span class="line">b = <span class="number">0000</span> <span class="number">1101</span></span><br><span class="line">-----------------</span><br><span class="line">a &amp; b = <span class="number">0000</span> <span class="number">1100</span></span><br><span class="line">a | b = <span class="number">0011</span> <span class="number">1101</span></span><br><span class="line">a ^ b = <span class="number">0011</span> <span class="number">0001</span></span><br><span class="line">~a = <span class="number">1100</span> <span class="number">0011</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹è¡¨åˆ—å‡ºäº†ä½è¿ç®—ç¬¦çš„åŸºæœ¬è¿ç®—ï¼Œå‡è®¾æ•´æ•°å˜é‡ a çš„å€¼ä¸º 60 å’Œå˜é‡ b çš„å€¼ä¸º 13ï¼š<br><img data-src="https://s1.ax1x.com/2023/02/24/pSzOSY9.jpg" style="width:400px;height:400px" alt=""/></p>
<h2 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h2><h3 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>é€»è¾‘è¿ç®—ç¬¦å¯ä»¥åœ¨è¡¨è¾¾å¼ä¸­ç”Ÿæˆç»„åˆæ¡ä»¶ï¼Œä¾‹å¦‚åœ¨æ‰§è¡Œç‰¹å®šè¯­å¥å—ä¹‹å‰å¿…é¡»æ»¡è¶³çš„ä¸¤ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ã€‚ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ï¼Œå¯ä»¥æè¿°è¿™äº›ç»„åˆæ¡ä»¶ã€‚é€»è¾‘è¿ç®—çš„è¿”å›ç»“æœåªèƒ½ä¸ºçœŸæˆ–å‡ã€‚</p>
<p>Java è¯­è¨€ä¸­çš„é€»è¾‘è¿ç®—ç¬¦ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<p>ï¼ˆåœ¨ä¾‹å­ä¸­ï¼Œåˆå§‹åŒ–ä¸¤ä¸ªæ•´å‹å˜é‡aã€bï¼š<code>int a = 0</code>; <code>int b = 1</code>;ï¼‰<br><img data-src="https://s1.ax1x.com/2023/02/24/pSzOEwD.jpg" style="width:400px;height:300px" alt=""/></p>
<h3 id="çŸ­è·¯è¿ç®—"><a href="#çŸ­è·¯è¿ç®—" class="headerlink" title="çŸ­è·¯è¿ç®—"></a>çŸ­è·¯è¿ç®—</h3><p><code>&amp;&amp;</code>å’Œ<code>||</code>è¿ç®—ç¬¦å­˜åœ¨çŸ­è·¯è¡Œä¸ºã€‚çŸ­è·¯çš„æ„æ€æ˜¯ï¼šåªæœ‰åœ¨éœ€è¦çš„æ—¶å€™æ‰ä¼šåˆ¤æ–­ç¬¬äºŒä¸ªæ“ä½œæ•°çš„çœŸå‡ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LogicOperators</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>((a == <span class="number">2</span>) &amp;&amp; (b == <span class="number">2</span>)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;aå’Œbéƒ½ç­‰äº2&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>((a == <span class="number">1</span>) || (b == <span class="number">1</span>)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;aç­‰äº1æˆ–bç­‰äº1&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">aç­‰äº<span class="number">1</span>æˆ–bç­‰äº<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºè§£æï¼šæœ‰ä¸¤ä¸ªæ•´å‹å˜é‡<code>a</code>å’Œ<code>b</code>ï¼Œå€¼åˆ†åˆ«ä¸º<code>1</code>å’Œ<code>2</code>ã€‚ç¬¬ä¸€ä¸ª<code>if</code>è¯­å¥çš„æ¡ä»¶ä¸ºé€»è¾‘ä¸è¿ç®—ï¼Œå…¶ç¬¬ä¸€ä¸ªæ“ä½œæ•°<code>a == 2</code>ä¸ºå‡ï¼Œæ‰€ä»¥æ— è®ºç¬¬äºŒä¸ªæ“ä½œæ•°æ˜¯çœŸæ˜¯å‡ï¼Œéƒ½ä¸å»åˆ¤æ–­ï¼Œæ¡ä»¶ç›´æ¥è¢«åˆ¤å®šä¸ºå‡ï¼›ç¬¬äºŒä¸ª<code>if</code>è¯­å¥çš„æ¡ä»¶ä¸ºé€»è¾‘æˆ–è¿ç®—ï¼Œ å…¶ç¬¬ä¸€ä¸ªæ“ä½œæ•°<code>a == 1</code>ä¸ºçœŸï¼Œæ‰€ä»¥æ— è®ºç¬¬äºŒä¸ªæ“ä½œæ•°æ˜¯çœŸæ˜¯å‡ï¼Œéƒ½ä¸ä¼šå»åˆ¤æ–­ï¼Œæ¡ä»¶ç›´æ¥è¢«åˆ¤å®šä¸ºçœŸã€‚è¿™å°±æ˜¯æ‰€è°“çš„çŸ­è·¯ã€‚</p>
<h2 id="èµ‹å€¼è¿ç®—ç¬¦"><a href="#èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="èµ‹å€¼è¿ç®—ç¬¦"></a>èµ‹å€¼è¿ç®—ç¬¦</h2><h3 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>èµ‹å€¼è¿ç®—ç¬¦æ˜¯ä¸ºæŒ‡å®šå˜é‡åˆ†é…å€¼çš„ç¬¦å·ã€‚ä¸‹æ ‡åˆ—å‡ºäº†å¸¸ç”¨ Java ä¸­å¸¸ç”¨çš„èµ‹å€¼è¿ç®—ç¬¦ï¼š<br><img data-src="https://s1.ax1x.com/2023/02/24/pSzOdlq.jpg" style="width:400px;height:300px" alt=""/></p>
<h3 id="å®ä¾‹-2"><a href="#å®ä¾‹-2" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªèµ‹å€¼è¿ç®—ç¬¦çš„å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OperateDemo5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ†ç»„åˆå§‹åŒ–ä¸‰ä¸ªå˜é‡ num1ã€num2ã€resultï¼Œå€¼åˆ†åˆ«ä¸º 20ã€10ã€0</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">20</span>, num2 = <span class="number">10</span>,  result = <span class="number">0</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆå§‹å€¼ï¼š&quot;</span>);</span><br><span class="line">        System.out.print(<span class="string">&quot;num1=&quot;</span> + num1 + <span class="string">&#x27;\t&#x27;</span>);</span><br><span class="line">        System.out.print(<span class="string">&quot;num2=&quot;</span> + num2 + <span class="string">&#x27;\t&#x27;</span>);</span><br><span class="line">        System.out.print(<span class="string">&quot;result=&quot;</span> + result + <span class="string">&quot;\t\n&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¼€å§‹èµ‹å€¼è¿ç®—ï¼š&quot;</span>);</span><br><span class="line">        result += num1;</span><br><span class="line">        System.out.println(<span class="string">&quot;result += num1 ç»“æœä¸ºï¼š&quot;</span> + result);</span><br><span class="line">        result -= num2;</span><br><span class="line">        System.out.println(<span class="string">&quot;result -= num2 ç»“æœä¸ºï¼š&quot;</span> + result);</span><br><span class="line">        result *= num1;</span><br><span class="line">        System.out.println(<span class="string">&quot;result *= num1 ç»“æœä¸ºï¼š&quot;</span> + result);</span><br><span class="line">        result /= num2;</span><br><span class="line">        System.out.println(<span class="string">&quot;result /= num2 ç»“æœä¸ºï¼š&quot;</span> + result);</span><br><span class="line">        result %= <span class="number">15</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;result %= 15 ç»“æœä¸ºï¼š&quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åˆå§‹å€¼ï¼š</span><br><span class="line">num1=20	num2=10	result=0	</span><br><span class="line">å¼€å§‹èµ‹å€¼è¿ç®—ï¼š</span><br><span class="line">result += num1 ç»“æœä¸ºï¼š20</span><br><span class="line">result -= num2 ç»“æœä¸ºï¼š10</span><br><span class="line">result *= num1 ç»“æœä¸ºï¼š200</span><br><span class="line">result /= num2 ç»“æœä¸ºï¼š20</span><br><span class="line">result %= 15 ç»“æœä¸ºï¼š5</span><br></pre></td></tr></table></figure>
<h2 id="å…¶ä»–è¿ç®—ç¬¦"><a href="#å…¶ä»–è¿ç®—ç¬¦" class="headerlink" title="å…¶ä»–è¿ç®—ç¬¦"></a>å…¶ä»–è¿ç®—ç¬¦</h2><h3 id="æ¡ä»¶è¿ç®—ç¬¦ï¼ˆ-ï¼‰"><a href="#æ¡ä»¶è¿ç®—ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="æ¡ä»¶è¿ç®—ç¬¦ï¼ˆ? :ï¼‰"></a>æ¡ä»¶è¿ç®—ç¬¦ï¼ˆ? :ï¼‰</h3><p>æ¡ä»¶è¿ç®—ç¬¦ä¹Ÿç§°ä¸ºä¸‰å…ƒè¿ç®—ç¬¦ã€‚æˆ‘ä»¬ä¼šåœ¨æ¡ä»¶è¯­å¥å°èŠ‚ä¸­å†æ¬¡å¯¹å…¶ä»‹ç»ã€‚</p>
<p>è¯¥è¿ç®—ç¬¦ç”±ä¸‰ä¸ªæ“ä½œæ•°ç»„æˆï¼Œç”¨äºåˆ¤æ–­<strong>å¸ƒå°”è¡¨è¾¾å¼</strong>ã€‚å®ƒçš„ç›®çš„æ˜¯ç¡®å®šåº”å°†å“ªä¸ªå€¼åˆ†é…ç»™å˜é‡ã€‚æ¡ä»¶è¿ç®—ç¬¦çš„è¯­æ³•ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConditionalOperators</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">15</span>;</span><br><span class="line">        System.out.println(age &gt;= <span class="number">18</span> ? <span class="string">&quot;åœ¨ä¸­å›½ä½ å·²ç»æˆå¹´&quot;</span> :  <span class="string">&quot;åœ¨ä¸­å›½ä½ è¿˜æœªæˆå¹´&quot;</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±äº<code>age</code>å˜é‡å€¼ä¸º<code>15</code>ï¼Œå°äº<code>18</code>ï¼Œ<code>age &gt;= 18</code>è¿”å›ç»“æœä¸ºå‡ï¼Œå› æ­¤ç¼–è¯‘æ‰§è¡Œåï¼Œå±å¹•å°†æ‰“å°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨ä¸­å›½ä½ è¿˜æœªæˆå¹´</span><br></pre></td></tr></table></figure>
<h3 id="instanceof-è¿ç®—ç¬¦"><a href="#instanceof-è¿ç®—ç¬¦" class="headerlink" title="instanceof è¿ç®—ç¬¦"></a>instanceof è¿ç®—ç¬¦</h3><blockquote>
<p><strong>Tips</strong>ï¼šäº†è§£ <code>instanceof</code> è¿ç®—ç¬¦éœ€è¦ä¸€äº›é¢å‘å¯¹è±¡çš„å‰ç½®çŸ¥è¯†ã€‚ç›®å‰ä½ å¯ä»¥é€‰æ‹©æ€§å­¦ä¹ ã€‚</p>
</blockquote>
<p><code>instanceof</code>è¿ç®—ç¬¦å°†å¯¹è±¡ä¸æŒ‡å®šç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œæ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªç‰¹å®šç±»å‹ï¼ˆç±»ç±»å‹æˆ–æ¥å£ç±»å‹ï¼‰ã€‚</p>
<p><code>instanceof</code> è¿ç®—ç¬¦çš„è¯­æ³•ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">( Object reference variable ) <span class="keyword">instanceof</span>  (class/<span class="keyword">interface</span> <span class="title class_">type</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœ<code>instanceof</code>å·¦ä¾§çš„å˜é‡æ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œæ˜¯<code>instanceof</code>å³ä¾§ç±»æˆ–æ¥å£çš„ä¸€ä¸ªå¯¹è±¡ï¼Œç»“æœä¸ºçœŸï¼Œå¦åˆ™ç»“æœä¸ºå‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InstanceOfOperators1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;imooc&quot;</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> name <span class="keyword">instanceof</span> String; </span><br><span class="line">     	  System.out.println(<span class="string">&quot;ç»“æœä¸ºï¼š&quot;</span> + b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±äºå­—ç¬¦ä¸²å˜é‡<code>name</code>æ˜¯<code>String</code>ç±»å‹ï¼Œæ‰€ä»¥æ‰§è¡Œä»£ç ï¼Œå±å¹•ä¼šæ‰“å°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç»“æœä¸ºï¼štrue</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œ<code>instanceof</code>è¿ç®—ç¬¦ä¸èƒ½ç”¨äºæ“ä½œåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¦‚æœå°†å­—ç¬¦ä¸²ç±»å‹<code>name</code>å˜é‡æ”¹ä¸ºä¸€ä¸ª<code>char</code>ç±»å‹çš„å˜é‡ï¼Œç¼–è¯‘ä»£ç å°†ä¼šæŠ¥é”™:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InstanceOfOperators1.java:4: é”™è¯¯: æ„å¤–çš„ç±»å‹</span><br><span class="line">        boolean b = name instanceof String;</span><br><span class="line">                    ^</span><br><span class="line">  éœ€è¦: å¼•ç”¨</span><br><span class="line">  æ‰¾åˆ°:    char</span><br><span class="line">1 ä¸ªé”™è¯¯</span><br></pre></td></tr></table></figure>
<h2 id="è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§"><a href="#è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§" class="headerlink" title="è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§"></a>è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§</h2><p>å½“å¤šç§è¿ç®—ç¬¦åœ¨ä¸€åŒä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€ä¸ªæ‰§è¡Œå…ˆåé¡ºåºçš„é—®é¢˜ã€‚</p>
<p>ä¸‹è¡¨ä¸­çš„è¿ç®—ç¬¦æŒ‰ä¼˜å…ˆé¡ºåºæ’åºã€‚è¿ç®—ç¬¦è¶Šé è¿‘è¡¨æ ¼é¡¶éƒ¨ï¼Œå…¶ä¼˜å…ˆçº§è¶Šé«˜ã€‚å…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§çš„è¿ç®—ç¬¦å°†åœ¨å…·æœ‰ç›¸å¯¹è¾ƒä½ä¼˜å…ˆçº§çš„è¿ç®—ç¬¦ä¹‹å‰è®¡ç®—ã€‚åŒä¸€è¡Œä¸Šçš„è¿ç®—ç¬¦å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§ã€‚<br>|â€”|â€”|<br>|ç±»åˆ«	|æ“ä½œç¬¦	|å…³è”æ€§|<br>åç¼€	|() [] . (ç‚¹æ“ä½œç¬¦)|	å·¦åˆ°å³<br>ä¸€å…ƒ	|+ + - ï¼ã€œ	|ä»å³åˆ°å·¦<br>ä¹˜æ€§	|* &#x2F;ï¼…	|å·¦åˆ°å³<br>åŠ æ€§	|+ -	|å·¦åˆ°å³<br>ç§»ä½	|&gt;&gt; &gt;&gt;&gt; &lt;&lt;	|å·¦åˆ°å³<br>å…³ç³»	|&gt;&gt; &#x3D; &lt;&lt; &#x3D;	|å·¦åˆ°å³<br>ç›¸ç­‰	|&#x3D;&#x3D; !&#x3D;	|å·¦åˆ°å³<br>æŒ‰ä½ä¸	|ï¼†	|å·¦åˆ°å³<br>æŒ‰ä½å¼‚æˆ–	|^	å·¦åˆ°å³<br>æŒ‰ä½æˆ–	|||	å·¦åˆ°å³<br>é€»è¾‘ä¸	|&amp;&amp;	|å·¦åˆ°å³<br>é€»è¾‘æˆ–	|| ||	å·¦åˆ°å³<br>æ¡ä»¶	|ï¼Ÿï¼š	|ä»å³åˆ°å·¦<br>èµ‹å€¼	|&#x3D; + &#x3D; - &#x3D; * &#x3D; &#x2F; &#x3D;ï¼…&#x3D; &gt;&gt; &#x3D; &lt;&lt; &#x3D;ï¼†&#x3D; ^ &#x3D; | &#x3D;	|ä»å³åˆ°å·¦<br>é€—å·|	ï¼Œ	|å·¦åˆ°å³<br>å½“<strong>ç›¸åŒä¼˜å…ˆçº§</strong>çš„è¿ç®—ç¬¦å‡ºç°åœ¨åŒä¸€è¡¨è¾¾å¼ä¸­æ—¶ï¼Œå¦‚ä½•æ§åˆ¶å®ƒä»¬è®¡ç®—çš„å…ˆåå‘¢ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OperateorsPriority</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      	<span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">      	<span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">      	<span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">6</span>;</span><br><span class="line">      	<span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> a + b - c + a;</span><br><span class="line">     	System.out.println(<span class="string">&quot;result = &quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è®¡ç®—<code>result</code>çš„è¯­å¥çš„å³ä¾§ï¼Œ<code>+ ã€-</code>ä¸¤ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§ç›¸åŒï¼Œå¦‚æœæˆ‘ä»¬ä¸åŠ ä»¥æ§åˆ¶ï¼Œå°†æŒ‰ç…§ä»å·¦åˆ°å³é¡ºåºè®¡ç®—ï¼Œæ‰“å°ç»“æœä¸º<code>result = 2</code>ï¼›ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³å…ˆè®¡ç®—<code>a + b</code>å’Œ<code>c + a</code>çš„å€¼ï¼Œå†è®¡ç®—ä¸¤è€…ä¹‹å·®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‹¬å·()å°†å…¶é¡ºåºè¿›è¡Œæ§åˆ¶ï¼š<code>(a + b) - (c + a)</code>ï¼Œå†æ‰§è¡Œä»£ç å°†æ‰“å°æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼š<code>result = -2</code>ã€‚</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaä¸­â€œ.â€å’Œâ€œ:â€åŒºåˆ«</title>
    <url>/3247.html</url>
    <content><![CDATA[<p>åˆå­¦luaï¼Œå¯èƒ½ä¼šå¯¹<code>.</code>å’Œ<code>:</code>è¿™ä¸¤ä¸ªç¬¦å·çš„ç”¨æ³•äº§ç”Ÿç–‘é—®ï¼Œå¾ˆå¤šæ—¶å€™éƒ½ä¼šå› ä¸ºè¿™ä¸ªå‡ºé”™ï¼Œè¿™é‡Œç¬”è€…ç®€å•ä»‹ç»ä¸‹ç¬”è€…åœ¨ä½¿ç”¨Cocos2dxæ¸¸æˆå¼€å‘ä¸­å¯¹è¿™ä¸¤è€…çš„è®¤è¯†</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å†’å·çš„ä½œç”¨ï¼šå®šä¹‰å‡½æ•°æ—¶ï¼Œç»™å‡½æ•°æ·»åŠ éšè—çš„ç¬¬ä¸€ä¸ªå‚æ•°<code>self</code>ï¼Œè°ƒç”¨å‡½æ•°æ—¶ï¼Œé»˜è®¤æŠŠå½“å‰è°ƒç”¨è€…ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’è¿›å»ã€‚<br>ä½¿ç”¨å†’å·åï¼Œå°±ç›¸å½“äºæˆ‘ä»¬ä½¿ç”¨äº†ç‚¹å·ï¼Œåªæ˜¯æˆ‘ä»¬ä¸å†éœ€è¦æ˜¾ç¤ºçš„å®šä¹‰<code>self</code>å‚æ•°ä»¥åŠä¸»åŠ¨ä½ä¼ é€’å‚æ•°ã€‚</p>
<p>åœ¨Cocos2dx å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¤§éƒ¨åˆ†æ—¶å€™éƒ½æ˜¯ä½¿ç”¨çš„å†’å·</p>
<p>ä¸€èˆ¬æˆ‘ä»¬åœ¨å®šä¹‰å‡½æ•°æ—¶ä¼šç”¨ä¸‹é¢å†™æ³•</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onCreate</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>ç­‰åŒäºä¸‹é¢å†™æ³•</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene.onCreate</span><span class="params">(self)</span></span></span><br></pre></td></tr></table></figure>


<blockquote>
<p>ç¬”è€…ä¸ªäººçœ‹æ³•ï¼Œæ¬¢è¿å¤§å®¶æ›´æ­£</p>
</blockquote>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaä¸­å‡½æ•°çš„ä½¿ç”¨</title>
    <url>/36819.html</url>
    <content><![CDATA[<p>åœ¨Luaè¯­è¨€ä¸­ï¼Œå‡½æ•°æ˜¯å¯¹è¯­å¥å’Œè¡¨è¾¾å¼è¿›è¡ŒæŠ½è±¡çš„ä¸»è¦æ–¹å¼ã€‚å‡½æ•°æ—¢å¯ä»¥ç”¨äºå®ŒæˆæŸç§ç‰¹å®šä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥åªæ˜¯è¿›è¡Œä¸€äº›è®¡ç®—ç„¶åè¿”å›è®¡ç®—ç»“æœã€‚åœ¨å‰ä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä¸€å¥å‡½æ•°è°ƒç”¨è§†ä¸ºä¸€æ¡è¯­å¥ï¼›è€Œåœ¨åä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ™å°†å‡½æ•°è°ƒç”¨è§†ä¸ºè¡¨è¾¾å¼ï¼š</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">8</span>*<span class="number">9</span> , <span class="number">9</span>/<span class="number">8</span>)</span><br><span class="line">a = <span class="built_in">math</span>.<span class="built_in">sin</span>(<span class="number">3</span>) + <span class="built_in">math</span>.<span class="built_in">cos</span>(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>())</span><br></pre></td></tr></table></figure>
<p>æ— è®ºå“ªç§æƒ…å†µï¼Œå‡½æ•°è°ƒç”¨æ—¶éƒ½éœ€è¦ä½¿ç”¨ä¸€å¯¹åœ†æ‹¬å·æŠŠå‚æ•°åˆ—è¡¨æ‹¬èµ·æ¥ã€‚å³ä½¿è¢«è°ƒç”¨çš„å‡½æ•°ä¸éœ€è¦å‚æ•°ï¼Œä¹Ÿéœ€è¦ä¸€å¯¹ç©ºæ‹¬å·()ã€‚å¯¹äºè¿™ä¸ªè§„åˆ™ï¼Œå”¯ä¸€çš„ä¾‹å¤–å°±æ˜¯ï¼Œå½“å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ä¸”è¯¥å‚æ•°æ˜¯å­—ç¬¦ä¸²å¸¸é‡æˆ–è¡¨æ„é€ å™¨æ—¶:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> <span class="string">&quot;Hello World&quot;</span>    &lt;<span class="comment">--&gt; print(&quot;Hello World&quot;)</span></span><br><span class="line"><span class="built_in">dofile</span> <span class="string">&quot;a.lua&quot;</span>		   &lt;<span class="comment">--&gt; dofile(&#x27;a.lua&#x27;)</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">[[a multi-line message]]</span> &lt;<span class="comment">--&gt; print([[a multi-line message]])</span></span><br><span class="line">f&#123;x = <span class="number">10</span> , y = <span class="number">20</span>&#125;		&lt;<span class="comment">--&gt; f(&#123;x = 10 , y = 20&#125;)</span></span><br><span class="line"><span class="built_in">type</span>&#123;&#125;	</span><br></pre></td></tr></table></figure>
<p>Luaè¯­è¨€ä¹Ÿä¸ºé¢å‘å¯¹è±¡é£æ ¼çš„è°ƒç”¨æä¾›äº†ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ï¼Œå³å†’å·æ“ä½œç¬¦ã€‚å½¢å¦‚x:foo(x)çš„è¡¨è¾¾å¼æ„å‘³ä¸ºè°ƒç”¨å¯¹è±¡oçš„fooæ–¹æ³•ã€‚<br>ä¸€ä¸ªLuaç¨‹åºæ—¢å¯ä»¥è°ƒç”¨Luaè¯­è¨€ç¼–å†™çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨Cè¯­è¨€ç¼–å†™çš„å‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„å‡½æ•°æ¥å®ç°å¯¹æ€§èƒ½è¦æ±‚æ›´é«˜ï¼Œæˆ–ä¸å®¹æ˜“ç›´æ¥é€šè¿‡Luaè¯­è¨€è¿›è¡Œæ“ä½œçš„æ“ä½œç³»ç»Ÿæœºåˆ¶ç­‰ã€‚ä¾‹å¦‚ï¼ŒLuaè¯­è¨€æ ‡å‡†åº“ä¸­æ‰€æœ‰çš„å‡½æ•°å°±éƒ½æ˜¯ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„ã€‚ä¸è¿‡ï¼Œæ— è®ºä¸€ä¸ªå‡½æ•°æ˜¯ç”¨Luaè¯­è¨€ç¼–å†™çš„è¿˜æ˜¯ç”¨Cè¯­è¨€ç¼–å†™çš„ï¼Œåœ¨è°ƒç”¨å®ƒä»¬æ—¶éƒ½æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚<br>æ­£å¦‚æˆ‘ä»¬å·²ç»åœ¨å…¶ä»–ç¤ºä¾‹ä¸­æ‰€çœ‹åˆ°çš„ï¼ŒLuaè¯­è¨€ä¸­çš„å‡½æ•°å®šä¹‰çš„å¸¸è§è¯­æ³•æ ¼å¼å½¢å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">( a )</span></span></span><br><span class="line">	<span class="keyword">local</span> sum = <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, #a <span class="keyword">do</span></span><br><span class="line">		sum = sum + a[i]</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> sum</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§è¯­æ³•ä¸­ï¼Œä¸€ä¸ªå‡½æ•°å®šä¹‰å…·æœ‰ä¸€ä¸ªå‡½æ•°åã€ä¸€ä¸ªå‚æ•°ç»„æˆçš„åˆ—è¡¨å’Œç”±ä¸€ç»„è¯­å¥ç»„æˆçš„å‡½æ•°ä½“ã€‚å‚æ•°çš„è¡Œä¸ºä¸å±€éƒ¨å˜é‡çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ï¼Œç›¸å½“äºä¸€ä¸ªç”¨å‡½æ•°è°ƒç”¨æ—¶è½¬å…¥çš„å€¼è¿›è¡Œåˆå§‹åŒ–çš„å±€éƒ¨å˜é‡ã€‚<br>è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ªæ•°å¯ä»¥ä¸å®šä¹‰å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ªæ•°ä¸ä¸€è‡´ã€‚Luaè¯­è¨€ä¼šé€šè¿‡æŠ›å¼ƒå¤šä½™å‚æ•°å’Œå°†ä¸è¶³çš„å‚æ•°è®¾ä¸ºnilçš„æ–¹å¼æ¥è°ƒæ•´å‚æ•°çš„ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> <span class="params">(a,b)</span></span> <span class="built_in">print</span>(a , b) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å…¶å½¢ä¸ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f()				<span class="comment">-- nil  nil</span></span><br><span class="line">f(<span class="number">3</span>)			<span class="comment">-- 3  nil</span></span><br><span class="line">f(<span class="number">3</span>,<span class="number">4</span>)			<span class="comment">-- 3  4</span></span><br><span class="line">f(<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)		<span class="comment">-- 3  4  (5è¢«ä¸¢å¼ƒ)</span></span><br></pre></td></tr></table></figure>
<p>è™½ç„¶è¿™ç§è¡Œä¸ºå¯èƒ½å¯¼è‡´ç¼–ç¨‹é”™è¯¯ï¼Œä½†åŒæ ·åˆæ˜¯æœ‰ç”¨çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºé»˜è®¤å‚æ•°çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹é€’å¢å…¨å±€è®¡æ•°å™¨çš„å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">incCount</span><span class="params">( n )</span></span></span><br><span class="line">	n = n <span class="keyword">or</span> <span class="number">1</span></span><br><span class="line">	globalCounter = globalCounter + n</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°ä»¥1ä½œä¸ºé»˜è®¤å®å‚ï¼Œå½“è°ƒç”¨æ— å‚æ•°çš„incCount()æ—¶ï¼Œå°†globalCounteråŠ 1ã€‚åœ¨è°ƒç”¨incCount()æ—¶ï¼ŒLuaè¯­è¨€é¦–å…ˆæŠŠå‚æ•°nåˆå§‹åŒ–ä¸ºnilï¼Œæ¥ä¸‹æ¥orè¡¨è¾¾å¼åˆè¿”å›äº†å…¶ç¬¬äºŒä¸ªæ“ä½œæ•°ï¼Œæœ€ç»ˆæŠŠnèµ‹æˆäº†é»˜è®¤å€¼1ã€‚</p>
<h2 id="å¤šè¿”å›å€¼"><a href="#å¤šè¿”å›å€¼" class="headerlink" title="å¤šè¿”å›å€¼"></a>å¤šè¿”å›å€¼</h2><p>Luaè¯­è¨€ä¸­ä¸€ç§ä¸ä¼—ä¸åŒä½†åˆéå¸¸æœ‰ç”¨çš„ç‰¹æ€§æ˜¯å…è®¸ä¸€ä¸ªå‡½æ•°è¿”å›å¤šä¸ªç»“æœã€‚Luaè¯­è¨€ä¸­å‡ ä¸ªé¢„å®šä¹‰å‡½æ•°å°±ä¼šè¿”å›å¤šä¸ªå€¼ã€‚æˆ‘ä»¬å·²ç»æ¥è§¦è¿‡å‡½æ•°string.findï¼Œè¯¥å‡½æ•°ç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­å®šä½æ¨¡å¼ã€‚å½“æ‰¾åˆ°äº†å¯¹åº”çš„æ¨¡å¼æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸¤ä¸ªç´¢å¼•å€¼ï¼šæ‰€åŒ¹é…æ¨¡å¼åœ¨å­—ç¬¦ä¸²ä¸­åˆå§‹å­—ç¬¦å’Œç»“å°¾å­—ç¬¦çš„ç´¢å¼•ã€‚ä½¿ç”¨å¤šé‡èµ‹å€¼å¯ä»¥åŒæ—¶è·å–åˆ°è¿™ä¸¤ä¸ªç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s, e = <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;hello lua users&quot;</span> , <span class="string">&quot;Lua&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s, e) 		<span class="comment">-- 7 	9</span></span><br></pre></td></tr></table></figure>
<p>è¯·è®°ä½ï¼Œå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•å€¼ä¸º1ã€‚<br>Luaè¯­è¨€ç¼–å†™çš„å‡½æ•°åŒæ ·å¯ä»¥è¿”å›å¤šä¸ªç»“æœï¼Œåªéœ€åœ¨returnå…³é”®å­—ååˆ—å‡ºæ‰€æœ‰è¦è¿”å›çš„å€¼å³å¯ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨äºæŸ¥æ‰¾åºåˆ—ä¸­æœ€å¤§å…ƒç´ çš„å‡½æ•°å¯ä»¥åŒæ—¶è¿”å›æœ€å¤§å€¼åŠè¯¥å…ƒç´ çš„ä½ç½®ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maximum</span><span class="params">(a)</span></span></span><br><span class="line">	<span class="keyword">local</span> mi = <span class="number">1</span></span><br><span class="line">	<span class="keyword">local</span> m = a[mi]</span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, #a <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">if</span> a[i] &gt; m <span class="keyword">then</span></span><br><span class="line">			mi = i ; m = a[i]</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> m, mi</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(maximum(&#123;<span class="number">8</span>,<span class="number">10</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">5</span>&#125;))  <span class="comment">--23 3</span></span><br></pre></td></tr></table></figure>
<p>Luaè¯­è¨€æ ¹æ®å‡½æ•°çš„è¢«è°ƒç”¨æƒ…å†µè°ƒæ•´è¿”å›å€¼çš„æ•°é‡ã€‚å½“å‡½æ•°è¢«ä½œä¸ºä¸€æ¡å•ç‹¬è¯­å¥è°ƒç”¨æ—¶ï¼Œå…¶æ‰€æœ‰è¿”å›å€¼éƒ½ä¼šè¢«ä¸¢å¼ƒï¼›å½“å‡½æ•°è¢«ä½œä¸ºè¡¨è¾¾å¼è°ƒç”¨æ—¶ï¼Œå°†åªä¿ç•™å‡½æ•°çš„ç¬¬ä¸€ä¸ªè¿”å›å€¼ã€‚åªæœ‰å½“å‡½æ•°è°ƒç”¨æ˜¯ä¸€ç³»åˆ—è¡¨è¾¾å¼ä¸­çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼æ—¶ï¼Œå…¶æ‰€æœ‰çš„è¿”å›å€¼æ‰èƒ½è¢«è·å–åˆ°ã€‚è¿™é‡Œæ‰€è°“çš„â€œä¸€ç³»åˆ—è¡¨è¾¾å¼â€åœ¨Luaä¸­è¡¨ç°ä¸º4ç§æƒ…å†µï¼šå¤šé‡èµ‹å€¼ã€å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å®å‚åˆ—è¡¨ã€è¡¨æ„é€ å™¨å’Œreturnè¯­å¥ã€‚ä¸ºäº†åˆ†åˆ«å±•ç¤ºè¿™å‡ ç§æƒ…å†µï¼Œæ¥ä¸‹æ¥ä¸¾å‡ ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo0</span><span class="params">()</span></span> <span class="keyword">end</span>			<span class="comment">-- ä¸è¿”å›ç»“æœ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo1</span><span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&quot;a&quot;</span> <span class="keyword">end</span> 		<span class="comment">-- è¿”å›1ä¸ªç»“æœ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo2</span><span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span> <span class="keyword">end</span> 	<span class="comment">-- è¿”å›2ä¸ªç»“æœ</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å¤šé‡èµ‹å€¼ä¸­ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°è°ƒç”¨æ˜¯ä¸€ç³»åˆ—è¡¨è¾¾å¼ä¸­çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼Œåˆ™è¯¥å‡½æ•°è°ƒç”¨å°†äº§ç”Ÿå°½å¯èƒ½å¤šçš„è¿”å›å€¼ä»¥åŒ¹é…å¾…èµ‹å€¼å˜é‡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x,y = foo2()			<span class="comment">-- x = &quot;a&quot;, y = &quot;b&quot;</span></span><br><span class="line">x = foo2()				<span class="comment">-- x = &quot;a&quot;, &quot;b&quot;è¢«ä¸¢å¼ƒ</span></span><br><span class="line">x,y,z = <span class="number">10</span>, foo2()		<span class="comment">-- x = 10, y = &quot;a&quot;, z = &quot;b&quot;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å¤šé‡èµ‹å€¼ä¸­ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æˆ–è€…è¿”å›å€¼ä¸ªæ•°ä¸å¤Ÿå¤šï¼Œé‚£ä¹ˆLuaè¯­è¨€ä¼šç”¨nilæ¥è¡¥å……ç¼ºå¤±çš„å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x,y = foo0()		<span class="comment">-- x = nil , y = nil</span></span><br><span class="line">x,y = foo1()		<span class="comment">-- x = &quot;a&quot; , y = nil</span></span><br><span class="line">x,y,z = foo2()		<span class="comment">-- x = &quot;a&quot; , y = &quot;b&quot; , z = nil</span></span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œåªæœ‰å½“å‡½æ•°è°ƒç”¨ä¸€ç³»åˆ—è¡¨è¾¾å¼ä¸­çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼æ—¶æ‰èƒ½è¿”å›å¤šå€¼ç»“æœï¼Œå¦åˆ™åªèƒ½è¿”å›ä¸€ä¸ªç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x,y = foo2(), <span class="number">20</span> 			<span class="comment">-- x = &quot;a&quot;, y = 20  (&#x27;b&#x27;è¢«ä¸¢å¼ƒ)</span></span><br><span class="line">x,y = foo0(), <span class="number">20</span>, <span class="number">30</span> 		<span class="comment">-- x = nil, y = 20  (30è¢«ä¸¢å¼ƒ)</span></span><br></pre></td></tr></table></figure>
<p>å½“ä¸€ä¸ªè°ƒç”¨æ˜¯å¦ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„æœ€åä¸€ä¸ªå®å‚æ—¶ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°çš„æ‰€æœ‰è¿”å›å€¼éƒ½ä¼šè¢«ä½œä¸ºå®å‚ä¼ ç»™ç¬¬äºŒä¸ªå‡½æ•°ã€‚æˆ‘ä»¬å·²ç»è§åˆ°è¿‡å¾ˆå¤šè¿™æ ·çš„ä»£ç ç»“æ„ï¼Œä¾‹å¦‚å‡½æ•°printã€‚ç”±äºå‡½æ•°printèƒ½å¤Ÿæ¥æ”¶å¯å˜æ•°é‡çš„å‚æ•°ï¼Œæ‰€ä»¥print(g())ä¼šæ‰“å°å‡ºgè¿”å›çš„æ‰€æœ‰ç»“æœã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(foo0())			<span class="comment">-- æ²¡æœ‰ç»“æœ</span></span><br><span class="line"><span class="built_in">print</span>(foo1())			<span class="comment">-- a</span></span><br><span class="line"><span class="built_in">print</span>(foo2())			<span class="comment">-- a   b</span></span><br><span class="line"><span class="built_in">print</span>(foo2(),<span class="number">1</span>)			<span class="comment">-- a   1</span></span><br><span class="line"><span class="built_in">print</span>(foo2() .. <span class="string">&quot;x&quot;</span>)	<span class="comment">-- ax</span></span><br></pre></td></tr></table></figure>
<p>å½“åœ¨è¡¨è¾¾å¼ä¸­è°ƒç”¨foo2æ—¶ï¼ŒLuaè¯­è¨€ä¼šæŠŠå…¶è¿”å›å€¼çš„ä¸ªæ•°è°ƒæ•´ä¸º1.å› æ­¤ï¼Œåœ¨ä¸Šä¾‹çš„æœ€åä¸€è¡Œï¼Œåªæœ‰ç¬¬ä¸€ä¸ªè¿”å›å€¼â€aâ€å‚ä¸äº†å­—ç¬¦ä¸²è¿æ¥æ“ä½œã€‚<br>å½“æˆ‘ä»¬è°ƒç”¨f(g())æ—¶ï¼Œå¦‚æœfçš„å‚æ•°æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆLuaè¯­è¨€ä¼šæŠŠgè¿”å›å€¼çš„ä¸ªæ•°è°ƒæ•´æˆä¸fçš„å‚æ•°ä¸ªæ•°ä¸€è‡´ã€‚<br>è¡¨æ„é€ å™¨ä¼šå®Œæ•´åœ°æ¥æ”¶å‡½æ•°è°ƒç”¨çš„æ‰€æœ‰è¿”å›å€¼ï¼Œè€Œä¸ä¼šè°ƒæ•´è¿”å›å€¼çš„ä¸ªæ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = &#123;foo0()&#125;		<span class="comment">-- t = &#123;&#125;</span></span><br><span class="line">t = &#123;foo1()&#125;		<span class="comment">-- t = &#123;&quot;a&quot;&#125;</span></span><br><span class="line">t = &#123;foo2()&#125;		<span class="comment">-- t = &#123;&quot;a&quot;,&quot;b&quot;&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œè¿™ç§è¡Œä¸ºåªæœ‰å½“å‡½æ•°è°ƒç”¨æ˜¯è¡¨è¾¾å¼åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªæ—¶æ‰æœ‰æ•ˆï¼Œåœ¨å…¶ä»–ä½ç½®ä¸Šçš„å‡½æ•°æ€»æ˜¯åªè¿”å›ä¸€ä¸ªç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = &#123;foo0(),foo2(),<span class="number">4</span>&#125;  <span class="comment">-- t[1] = nil, t[2] = &quot;a&quot;, t[3] = 4</span></span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œå½¢å¦‚return f()çš„è¯­å¥ä¼šè¿”å›fè¿”å›çš„æ‰€æœ‰ç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(i)</span></span></span><br><span class="line">	<span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">then</span> <span class="keyword">return</span> foo0()</span><br><span class="line">	<span class="keyword">elseif</span> i == <span class="number">1</span> <span class="keyword">then</span> <span class="keyword">return</span> foo1()</span><br><span class="line">	<span class="keyword">elseif</span> i == <span class="number">2</span> <span class="keyword">then</span> <span class="keyword">return</span> foo2()</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(foo(<span class="number">1</span>))		<span class="comment">-- a</span></span><br><span class="line"><span class="built_in">print</span>(foo(<span class="number">2</span>))		<span class="comment">-- a b</span></span><br><span class="line"><span class="built_in">print</span>(foo(<span class="number">0</span>))		<span class="comment">-- æ— ç»“æœ</span></span><br><span class="line"><span class="built_in">print</span>(foo(<span class="number">3</span>))		<span class="comment">-- æ— ç»“æœ</span></span><br></pre></td></tr></table></figure>
<p>å°†å‡½æ•°è°ƒç”¨ç”¨ä¸€å¯¹åœ†æ‹¬å·æ‹¬èµ·æ¥å¯ä»¥å¼ºåˆ¶å…¶åªè¿”å›ä¸€ä¸ªç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(foo0())		<span class="comment">-- nil</span></span><br><span class="line"><span class="built_in">print</span>(foo1())		<span class="comment">-- a</span></span><br><span class="line"><span class="built_in">print</span>(foo2())		<span class="comment">-- a</span></span><br></pre></td></tr></table></figure>
<p>åº”è¯¥æ„è¯†åˆ°ï¼Œreturnè¯­å¥åé¢çš„å†…å®¹æ˜¯ä¸éœ€è¦åŠ æ‹¬å·çš„ï¼Œå¦‚æœåŠ äº†æ‹¬å·ä¼šå¯¼è‡´ç¨‹åºå‡ºç°é¢å¤–çš„è¡Œä¸ºã€‚å› æ­¤ï¼Œæ— è®ºfç©¶ç«Ÿè¿”å›å‡ ä¸ªå€¼ï¼Œå½¢å¦‚return(f(x))çš„è¯­å¥åªè¿”å›ä¸€ä¸ªå€¼ã€‚åˆæ˜¯è¿™å¯èƒ½æ˜¯æˆ‘ä»¬æ‰€å¸Œæœ›å‡ºç°çš„æƒ…å†µï¼Œä½†æœ‰æ—¶åˆå¯èƒ½ä¸æ˜¯ã€‚</p>
<h2 id="å¯å˜é•¿å‚æ•°å‡½æ•°"><a href="#å¯å˜é•¿å‚æ•°å‡½æ•°" class="headerlink" title="å¯å˜é•¿å‚æ•°å‡½æ•°"></a>å¯å˜é•¿å‚æ•°å‡½æ•°</h2><p>Luaè¯­è¨€ä¸­çš„å‡½æ•°å¯ä»¥æ˜¯å¯å˜é•¿å‚æ•°å‡½æ•°ï¼Œå³å¯ä»¥æ”¯æŒæ•°é‡å¯å˜çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨ä¸€ä¸ªã€ä¸¤ä¸ªæˆ–å¤šä¸ªå‚æ•°è°ƒç”¨è¿‡å‡½æ•°printã€‚è™½ç„¶å‡½æ•°printæ˜¯åœ¨Cè¯­è¨€ä¸­å®šä¹‰çš„ï¼Œä½†ä¹Ÿå¯ä»¥åœ¨Luaè¯­è¨€ä¸­å®šä¹‰å¯å˜é•¿å‚æ•°å‡½æ•°ã€‚<br>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€ç­”çš„ç¤ºä¾‹ï¼Œè¯¥å‡½æ•°è¿”å›æ‰€æœ‰å‚æ•°çš„æ€»å’Œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> <span class="params">(...)</span></span></span><br><span class="line">	<span class="keyword">local</span> s = <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> _, v <span class="keyword">in</span> <span class="built_in">ipairs</span>&#123;...&#125; <span class="keyword">do</span></span><br><span class="line">		s = s + v</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> s </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">3</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">12</span>)) 	<span class="comment">-- 54</span></span><br></pre></td></tr></table></figure>
<p>å‚æ•°åˆ—è¡¨ä¸­çš„ä¸‰ä¸ªç‚¹(â€¦)è¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°æ˜¯å¯å˜é•¿çš„ã€‚å½“è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼ŒLuaå†…éƒ¨ä¼šæŠŠå®ƒæ‰€æœ‰å‚æ•°æ”¶é›†èµ·æ¥ï¼Œæˆ‘ä»¬æŠŠè¿™äº›è¢«æ”¶é›†èµ·æ¥çš„å‚æ•°ç§°ä¸ºå‡½æ•°çš„é¢å¤–å‚æ•°ã€‚å½“å‡½æ•°è¦è®¿é—®è¿™äº›å‚æ•°æ—¶ä»éœ€ç”¨åˆ°ä¸‰ä¸ªç‚¹ï¼Œä½†ä¸åŒçš„æ˜¯æ­¤æ—¶è¿™ä¸‰ä¸ªç‚¹æ˜¯ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼æ¥ä½¿ç”¨çš„ã€‚åœ¨ä¸Šä¾‹ä¸­ï¼Œè¡¨è¾¾å¼{â€¦}çš„ç»“æœæ˜¯ä¸€ä¸ªç”±æ‰€æœ‰å¯å˜é•¿å‚æ•°ç»„æˆçš„åˆ—è¡¨ï¼Œè¯¥å‡½æ•°ä¼šéå†è¯¥åˆ—è¡¨æ¥ç´¯åŠ å…¶ä¸­çš„å…ƒç´ ã€‚<br>æˆ‘ä»¬å°†ä¸‰ä¸ªç‚¹ç»„æˆçš„è¡¨è¾¾å¼ç§°ä¸ºå¯å˜é•¿å‚æ•°è¡¨è¾¾å¼ï¼Œå…¶è¡Œä¸ºç±»ä¼¼äºä¸€ä¸ªå…·æœ‰å¤šä¸ªè¿”å›å€¼çš„å‡½æ•°ï¼Œè¿”å›çš„æ˜¯å½“å‰å‡½æ•°çš„æ‰€æœ‰å¯å˜é•¿å‚æ•°ã€‚<br>å®é™…ä¸Šï¼Œå¯ä»¥é€šè¿‡å˜é•¿å‚æ•°æ¥æ¨¡æ‹ŸLuaä¸­æ™®éçš„å‚æ•°ä¼ é€’æœºåˆ¶ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">funtion foo (a,b,c)</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å†™æˆ</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(...)</span></span></span><br><span class="line">	<span class="keyword">local</span> a,b,c = ...</span><br></pre></td></tr></table></figure>
<p>å–œæ¬¢Perlå‚æ•°ä¼ é€’æœºåˆ¶çš„äººå¯èƒ½ä¼šæ›´å–œæ¬¢ç¬¬äºŒç§å½¢å¼ã€‚<br>å½¢å¦‚ä¸‹åˆ—çš„å‡½æ•°åªæ˜¯å°†è°ƒç”¨å®ƒæ—¶æ‰€ä¼ å…¥çš„æ‰€æœ‰å‚æ•°ç®€å•åœ°è¿”å›ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">id</span> <span class="params">(...)</span></span> <span class="keyword">return</span> ... <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°æ˜¯ä¸€ä¸ªå¤šå€¼æ’ç­‰å¼å‡½æ•°ã€‚ä¸‹åˆ—å‡½æ•°çš„è¡Œä¸ºåˆ™ç±»ä¼¼äºç›´æ¥è°ƒç”¨å‡½æ•°fooï¼Œå”¯ä¸€ä¸åŒä¹‹å¤„æ˜¯åœ¨è°ƒç”¨å‡½æ•°fooä¹‹å‰ä¼šå…ˆæ‰“å°å‡ºä¼ é€’å‡½æ•°fooçš„æ‰€æœ‰å‚æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo1</span><span class="params">( ... )</span></span></span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;calling foo:&quot;</span>,...)</span><br><span class="line">	<span class="keyword">return</span> foo(...)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å½“è·Ÿè¸ªå¯¹æŸä¸ªç‰¹å®šçš„å‡½æ•°è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæŠ€å·§å¾ˆæœ‰ç”¨ã€‚<br>æ¥ä¸‹æ¥å†è®©æˆ‘ä»¬çœ‹å¦å¤–ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„ç¤ºä¾‹ã€‚Luaè¯­è¨€æä¾›äº†ä¸“é—¨ç”¨äºæ ¼å¼åŒ–è¾“å‡ºçš„å‡½æ•°string.formatå’Œè¾“å‡ºæ–‡æœ¬çš„å‡½æ•°io.writeã€‚æˆ‘ä»¬ä¼šå¾ˆè‡ªç„¶åœ°æƒ³åˆ°æŠŠè¿™ä¸¤ä¸ªå‡½æ•°åˆå¹¶ä¸ºä¸€ä¸ªå…·æœ‰å¯å˜é•¿å‚æ•°çš„å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fwirte</span><span class="params">(fmt, ...)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">io</span>.wirte(<span class="built_in">string</span>.<span class="built_in">format</span>(fmt, ...))</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œåœ¨ä¸‰ä¸ªç‚¹å‰æ¸¸ä¸€ä¸ªå›ºå®šçš„å‚æ•°fmtã€‚å…·æœ‰å¯å˜é•¿å‚æ•°çš„å‡½æ•°ä¹Ÿå¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„å›ºå®šå‚æ•°ï¼Œä½†å›ºå®šå‚æ•°å¿…é¡»æ”¾åœ¨å˜é•¿å‚æ•°ä¹‹å‰ã€‚Luaè¯­è¨€ä¼šå…ˆå°†å‰é¢çš„å‚æ•°èµ‹ç»™å›ºå®šå‚æ•°ï¼Œç„¶åå°†å‰©ä½™çš„å‚æ•°ä½œä¸ºå¯å˜é•¿å‚æ•°ã€‚<br>è¦éå†å¯å˜é•¿å‚æ•°ï¼Œå‡½æ•°å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼{â€¦}å°†å¯å˜é•¿å‚æ•°æ”¾åœ¨ä¸€ä¸ªè¡¨ä¸­ï¼Œå°±åƒaddç¤ºä¾‹ä¸­æ‰€ä½œçš„é‚£æ ·ã€‚ä¸è¿‡ï¼Œåœ¨æŸäº›ç½•è§çš„æƒ…å†µä¸‹ï¼Œå¦‚æœå¯å˜é•¿å‚æ•°ä¸­åŒ…å«æ— æ•ˆçš„nilï¼Œé‚£ä¹ˆ{â€¦}è·å¾—çš„è¡¨å¯èƒ½ä¸å†æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åºåˆ—ã€‚æ­¤æ—¶ï¼Œå°±æ²¡æœ‰åŠæ³•åœ¨è¡¨ä¸­åˆ¤æ–­åŸå§‹å‚æ•°ç©¶ç«Ÿæ˜¯ä¸æ˜¯ä»¥nilç»“å°¾çš„ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼ŒLuaè¯­è¨€æä¾›äº†å‡½æ•°table.packã€‚è¯¥å‡½æ•°åƒè¡¨è¾¾å¼{â€¦}ä¸€æ ·ä¿å­˜æ‰€æœ‰çš„å‚æ•°ï¼Œç„¶åå°†å…¶æ”¾åœ¨ä¸€ä¸ªè¡¨ä¸­è¿”å›ï¼Œä½†æ˜¯è¿™ä¸ªè¡¨è¿˜æœ‰ä¸€ä¸ªä¿å­˜äº†å‚æ•°ä¸ªæ•°çš„é¢å¤–å­—æ®µâ€nâ€ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‡½æ•°ä½¿ç”¨äº†å‡½æ•°table.packæ¥æ£€æµ‹å‚æ•°ä¸­æ˜¯å¦æœ‰nilï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nonils</span><span class="params">(...)</span></span></span><br><span class="line">	<span class="keyword">local</span> <span class="built_in">arg</span> = <span class="built_in">table</span>.pack(...)</span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>  , <span class="built_in">arg</span>.n <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">if</span> <span class="built_in">arg</span>[i] == <span class="literal">nil</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="literal">false</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(nonils(<span class="number">2</span>,<span class="number">3</span>,<span class="literal">nil</span>))			<span class="comment">-- false</span></span><br><span class="line"><span class="built_in">print</span>(nonils(<span class="number">2</span>,<span class="number">3</span>))				<span class="comment">-- true</span></span><br><span class="line"><span class="built_in">print</span>(nonils())					<span class="comment">-- true</span></span><br><span class="line"><span class="built_in">print</span>(nonils(<span class="literal">nil</span>))				<span class="comment">-- false</span></span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ç§éå†å‡½æ•°çš„å¯å˜é•¿å‚æ•°çš„æ–¹æ³•æ˜¯ä½¿ç”¨å‡½æ•°selectã€‚å‡½æ•°selectæ€»æ˜¯å…·æœ‰ä¸€ä¸ªå›ºå®šçš„å‚æ•°selectï¼Œä»¥åŠæ•°é‡å¯å˜çš„å‚æ•°ã€‚å¦‚æœselectæ˜¯æ•°å€¼nï¼Œé‚£ä¹ˆå‡½æ•°selectåˆ™è¿”å›ç¬¬nä¸ªå‚æ•°åçš„æ‰€æœ‰å‚æ•°ï¼›å¦åˆ™ï¼Œselectåº”è¯¥æ˜¯å­—ç¬¦ä¸²â€#â€ï¼Œä»¥ä¾¿å‡½æ•°selectè¿”å›é¢å¤–å‚æ•°çš„æ€»æ•°ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">select</span>(<span class="number">1</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>))			<span class="comment">-- a	b	c</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">select</span>(<span class="number">2</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>))			<span class="comment">-- b	c</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">select</span>(<span class="number">3</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>))			<span class="comment">-- c</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">select</span>(<span class="string">&quot;#&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>))			<span class="comment">-- 3</span></span><br></pre></td></tr></table></figure>
<p>é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨éœ€è¦æŠŠè¿”å›å€¼ä¸ªæ•°è°ƒæ•´ä¸º1çš„åœ°æ–¹ä½¿ç”¨å‡½æ•°selectï¼Œå› æ­¤å¯ä»¥æŠŠselect(n,â€¦)è®¤ä¸ºæ˜¯è¿”å›ç¬¬nä¸ªé¢å¤–å‚æ•°çš„è¡¨è¾¾å¼ã€‚<br>æ¥çœ‹ä¸€ä¸ªä½¿ç”¨å‡½æ•°selectçš„å…¸å‹ç¤ºä¾‹ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨è¯¥å‡½æ•°çš„addå‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(...)</span></span></span><br><span class="line">	<span class="keyword">local</span> s = <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, <span class="built_in">select</span>(<span class="string">&quot;#&quot;</span>,...) <span class="keyword">do</span></span><br><span class="line">		s = s + <span class="built_in">select</span>(i , ...)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºå‚æ•°è¾ƒå°‘çš„æƒ…å†µï¼Œç¬¬äºŒä¸ªç‰ˆæœ¬çš„addæ›´å¿«ï¼Œå› ä¸ºè¯¥ç‰ˆæœ¬é¿å…äº†æ¯æ¬¡è°ƒç”¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°è¡¨ã€‚ä¸è¿‡ï¼Œå¯¹äºå‚æ•°è¾ƒå¤šçš„æƒ…å†µï¼Œå¤šæ¬¡å¸¦æœ‰å¾ˆå¤šå‚æ•°è°ƒç”¨å‡½æ•°selectä¼šè¶…è¿‡åˆ›å»ºè¡¨çš„å¼€é”€ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¼šæ›´å¥½ã€‚</p>
<h2 id="å‡½æ•°table-unpack"><a href="#å‡½æ•°table-unpack" class="headerlink" title="å‡½æ•°table.unpack"></a>å‡½æ•°table.unpack</h2><p>å¤šé‡è¿”å›å€¼è¿˜æ¶‰åŠä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°table.unpackã€‚è¯¥å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿”å›å€¼ä¸ºæ•°ç»„å†…çš„æ‰€æœ‰å…ƒç´ ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.<span class="built_in">unpack</span>&#123;<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>&#125;)		<span class="comment">-- 10	20	30</span></span><br><span class="line">a,b = <span class="built_in">table</span>.<span class="built_in">unpack</span>&#123;<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>&#125;		<span class="comment">-- a = 10, b = 20 , 30è¢«ä¸¢å¼ƒ</span></span><br></pre></td></tr></table></figure>
<p>é¡¾åæ€ä¹‰ï¼Œå‡½æ•°table.unpackä¸å‡½æ•°table.packçš„åŠŸèƒ½ç›¸åã€‚packæŠŠå‚æ•°åˆ—è¡¨è½¬æ¢æˆLuaè¯­è¨€ä¸­ä¸€ä¸ªçœŸå®çš„åˆ—è¡¨ï¼Œè€Œunpackåˆ™æŠŠLuaè¯­è¨€ä¸­çš„çœŸå®çš„åˆ—è¡¨è½¬æ¢æˆä¸€ç»„è¿”å›å€¼ï¼Œè¿›è€Œå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°è¢«ä½¿ç”¨ã€‚<br>unpackå‡½æ•°çš„é‡è¦ç”¨é€”ä¹‹ä¸€ä½“ç°åœ¨æ³›å‹è°ƒç”¨æœºåˆ¶ä¸­ã€‚æ³›å‹è°ƒç”¨æœºåˆ¶å…è®¸æˆ‘ä»¬åŠ¨æ€åœ°è°ƒç”¨å…·æœ‰ä»»æ„å‚æ•°çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨IOS Cä¸­ï¼Œæˆ‘ä»¬æ— æ³•ç¼–å†™æ³›å‹è°ƒç”¨çš„ä»£ç ï¼Œåªèƒ½å£°æ˜å¯å˜é•¿å‚æ•°çš„å‡½æ•°æˆ–ä½¿ç”¨å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨ä¸åŒçš„å‡½æ•°ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä»ç„¶ä¸èƒ½è°ƒç”¨å…·æœ‰å¯å˜é‡å‚æ•°çš„å‡½æ•°ï¼Œå› ä¸ºCè¯­è¨€ä¸­çš„æ¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„å®å‚ä¸ªæ•°æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”æ¯ä¸ªå®å‚çš„ç±»å‹ä¹Ÿæ˜¯å›ºå®šçš„ã€‚è€Œåœ¨Luaè¯­è¨€ä¸­ï¼Œå´å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å¦‚æœæˆ‘ä»¬æƒ³é€šè¿‡æ•°ç»„aä¼ å…¥å¯å˜çš„å‚æ•°æ¥è°ƒç”¨å‡½æ•°fï¼Œé‚£ä¹ˆå¯ä»¥å†™æˆï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f(<span class="built_in">table</span>.<span class="built_in">unpack</span>(a))</span><br></pre></td></tr></table></figure>
<p>unpackä¼šè¿”å›aä¸­æ‰€æœ‰çš„å…ƒç´ ï¼Œè€Œè¿™äº›å…ƒç´ åˆè¢«ç”¨ä½œfçš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;ll&quot;</span>))</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç åŠ¨æ€åœ°æ„é€ ä¸€ä¸ªç­‰ä»·çš„è°ƒç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">string</span>.<span class="built_in">find</span></span><br><span class="line">a = &#123;<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;ll&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f(<span class="built_in">table</span>.<span class="built_in">unpack</span>(a)))</span><br></pre></td></tr></table></figure>
<p>é€šå¸¸ï¼Œå‡½æ•°table.unpackä½¿ç”¨é•¿åº¦æ“ä½œç¬¦è·å–è¿”å›å€¼çš„ä¸ªæ•°ï¼Œå› è€Œè¯¥å‡½æ•°åªèƒ½ç”¨äºåºåˆ—ã€‚ä¸è¿‡ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œä¹Ÿå¯ä»¥æ˜¾ç¤ºåœ°é™åˆ¶è¿”å›å…ƒç´ çš„èŒƒå›´ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.<span class="built_in">unpack</span>(&#123;<span class="string">&quot;Sun&quot;</span>,<span class="string">&quot;Mon&quot;</span>,<span class="string">&quot;Tue&quot;</span>,<span class="string">&quot;Wed&quot;</span>&#125;,<span class="number">2</span>,<span class="number">3</span>))		<span class="comment">-- Mon	Tue</span></span><br></pre></td></tr></table></figure>
<p>è™½ç„¶é¢„å®šä¹‰çš„å‡½æ•°unpackæ˜¯ç”¨Cè¯­è¨€ç¼–å†™çš„ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥åˆ©ç”¨é€’å½’åœ¨Luaè¯­è¨€ä¸­å®ç°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unpack</span><span class="params">(t,i,n)</span></span></span><br><span class="line">	i = i <span class="keyword">or</span> <span class="number">1</span></span><br><span class="line">	n = n <span class="keyword">or</span> #t</span><br><span class="line">	<span class="keyword">if</span> i &lt;= n <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">return</span> t[i],<span class="built_in">unpack</span>(t,i+<span class="number">1</span>,n)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œåªä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œæ­¤æ—¶iä¸º1ï¼Œnä¸ºåºåˆ—é•¿åº¦ï¼›ç„¶åï¼Œå‡½æ•°è¿”å›t[1]åŠunpack(t,2,n)è¿”å›çš„æ‰€æœ‰ç»“æœï¼Œè€Œunpack(t,2,n)åˆä¼šè¿”å›t[2]åŠunpack(t,3,n)è¿”å›çš„æ‰€æœ‰ç»“æœï¼Œä¸€æ¬¡ç±»æ¨ï¼Œç›´åˆ°å¤„ç†å®Œnä¸ªå…ƒç´ ä¸ºæ­¢ã€‚</p>
<h2 id="æ­£ç¡®çš„å°¾è°ƒç”¨"><a href="#æ­£ç¡®çš„å°¾è°ƒç”¨" class="headerlink" title="æ­£ç¡®çš„å°¾è°ƒç”¨"></a>æ­£ç¡®çš„å°¾è°ƒç”¨</h2><p>Luaè¯­è¨€ä¸­æœ‰å…³å‡½æ•°çš„å¦ä¸€ä¸ªæœ‰è¶£çš„ç‰¹æ€§æ˜¯ï¼ŒLuaè¯­è¨€æ˜¯æ”¯æŒå°¾è°ƒç”¨æ¶ˆé™¤çš„ã€‚è¿™æ„å‘³ç€Luaè¯­è¨€å¯ä»¥æ­£ç¡®åœ°å°¾é€’å½’ï¼Œè™½ç„¶å°¾è°ƒç”¨æ¶ˆé™¤çš„æ¦‚å¿µå¹¶æ²¡æœ‰ç›´æ¥æ¶‰åŠé€’å½’ã€‚<br>å°¾è°ƒç”¨æ˜¯è¢«å½“ä½œå‡½æ•°è°ƒç”¨ä½¿ç”¨çš„è·³è½¬ã€‚å½“ä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°è€Œæ²¡æœ‰å†è¿›è¡Œå…¶ä»–å·¥ä½œæ—¶ï¼Œå°±è¡Œç¨‹äº†å°¾è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œä¸‹ä¾‹ä»£ç ä¸­å¯¹å‡½æ•°gçš„è°ƒç”¨å°±æ˜¯å°¾è°ƒç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">(x)</span></span> x = x + <span class="number">1</span>;<span class="keyword">return</span> g(x) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å½“å‡½æ•°fè°ƒç”¨å®Œå‡½æ•°gä¹‹åï¼Œfä¸å†éœ€è¦è¿›è¡Œå…¶ä»–çš„å·¥ä½œã€‚è¿™æ ·ï¼Œå½“è¢«è°ƒç”¨çš„å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œç¨‹åºå°±ä¸å†éœ€è¦è¿”å›æœ€åˆçš„è°ƒç”¨è€…ã€‚å› æ­¤ï¼Œåœ¨å°¾è°ƒç”¨åï¼Œç¨‹åºä¹Ÿå°±ä¸éœ€è¦åœ¨è°ƒç”¨æ ˆä¸­ä¿å­˜æœ‰å…³è°ƒç”¨å‡½æ•°çš„ä»»ä½•ä¿¡æ¯ã€‚å½“gè¿”å›æ—¶ï¼Œç¨‹åºçš„æ‰§è¡Œè·¯å¾„ä¼šç›´æ¥è¿”å›åˆ°è°ƒç”¨fçš„ä½ç½®ã€‚åœ¨ä¸€äº›è¯­è¨€çš„å®ç°ä¸­ï¼Œä¾‹å¦‚Luaè¯­è¨€è§£é‡Šå™¨ï¼Œå°±åˆ©ç”¨äº†è¿™ä¸ªç‰¹ç‚¹ï¼Œæ˜¯çš„è¿›è¡Œå°¾è°ƒç”¨æ—¶ä¸ä½¿ç”¨ä»»ä½•é¢å¤–çš„æ ˆç©ºé—´ã€‚æˆ‘ä»¬å°±å°†è¿™ç§å®ç°ç§°ä¸ºå°¾è°ƒç”¨æ¶ˆé™¤ã€‚<br>ç”±äºå°¾è°ƒç”¨ä¸ä¼šä½¿ç”¨æ ˆç©ºé—´ï¼Œæ‰€ä»¥ä¸€ä¸ªç¨‹åºä¸­èƒ½å¤ŸåµŒå¥—çš„å°¾è°ƒç”¨çš„æ•°é‡æ˜¯æ— é™çš„ã€‚ä¾‹å¦‚ï¼Œä¸‹ä¾‹å‡½æ•°æ”¯æŒä»»æ„çš„æ•°å­—ä½œä¸ºå‚æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> <span class="params">(n)</span></span></span><br><span class="line">	<span class="keyword">if</span> n &gt; <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">return</span> foo(n - <span class="number">1</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°æ°¸è¿œä¸ä¼šå‘ç”Ÿæ ˆæº¢å‡ºã€‚<br>å…³äºå°¾è°ƒç”¨æ¶ˆé™¤çš„ä¸€ä¸ªé‡ç‚¹å°±æ˜¯å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªè°ƒç”¨æ˜¯å°¾è°ƒç”¨ã€‚å¾ˆå¤šå‡½æ•°ä¹‹æ‰€æœ‰ä¸æ˜¯å°¾è°ƒç”¨ï¼Œæ˜¯ç”±äºè¿™äº›å‡½æ•°åœ¨è°ƒç”¨ä¹‹åè¿˜è¿›è¡Œäº†å…¶ä»–å·¥ä½œã€‚ä¾‹å¦‚ï¼Œä¸‹ä¾‹ä¸­è°ƒç”¨gå°±ä¸æ˜¯å°¾è°ƒç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">(x)</span></span></span><br><span class="line">	g(x)</span><br><span class="line"><span class="keyword">end</span>	</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç¤ºä¾‹çš„é—®é¢˜åœ¨äºï¼Œå½“è°ƒç”¨å®Œgåï¼Œfåœ¨è¿”å›å‰è¿˜ä¸å¾—ä¸ä¸¢å¼ƒgè¿”å›çš„æ‰€æœ‰ç»“æœã€‚ç±»ä¼¼çš„ï¼Œä»¥ä¸‹çš„æ‰€æœ‰è°ƒç”¨ä¹Ÿéƒ½ä¸ç¬¦åˆå°¾è°ƒç”¨çš„å®šä¹‰:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> g(x) + <span class="number">1</span>				<span class="comment">-- å¿…é¡»è¿›è¡ŒåŠ æ³•</span></span><br><span class="line"><span class="keyword">return</span> x <span class="keyword">or</span> g(x)			<span class="comment">-- å¿…é¡»æŠŠè¿”å›å€¼é™åˆ¶ä¸º1ä¸ª</span></span><br><span class="line"><span class="keyword">return</span> (g(x))				<span class="comment">-- å¿…é¡»æŠŠè¿”å›å€¼é™åˆ¶ä¸º1ä¸ª</span></span><br></pre></td></tr></table></figure>
<p>åœ¨luaè¯­è¨€ä¸­ï¼Œåªæœ‰å½¢å¦‚return func(args)çš„è°ƒç”¨æ‰æ˜¯å°¾è°ƒç”¨ã€‚ä¸è¿‡ï¼Œç”±äºLuaè¯­è¨€ä¼šåœ¨è°ƒç”¨é’±å¯¹funcåŠå…¶å‚æ•°æ±‚å€¼ï¼Œæ‰€ä»¥funcåŠå…¶å‚æ•°éƒ½å¯ä»¥æ˜¯å¤æ‚çš„è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä¾‹å­å°±æ˜¯å°¾è°ƒç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> x[i].foo(x[j] + a * b, i + j)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè¿ç»­æ•™ç¨‹ä¹‹Luaä¸­çš„æ•°å€¼</title>
    <url>/63692.html</url>
    <content><![CDATA[<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•ï¼ˆä¸€ä¸ªå¯é€‰çš„åè¿›åˆ¶éƒ¨åˆ†å¤–åŠ ä¸€ä¸ªå¯é€‰çš„åè¿›åˆ¶æŒ‡æ•°éƒ¨åˆ†ï¼‰ä¹¦å†™æ•°å€¼å¸¸é‡ï¼Œä¾‹å¦‚ï¼š</p>
<span id="more"></span>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="number">4</span>             <span class="comment">--4</span></span><br><span class="line">&gt; <span class="number">0.4</span>			<span class="comment">--0.4</span></span><br><span class="line">&gt; <span class="number">4.57e-3</span>		<span class="comment">--0.00457</span></span><br><span class="line">&gt; <span class="number">0.3e12</span>		<span class="comment">--3.0000000000.0</span></span><br><span class="line">&gt; <span class="number">5E+20</span>			<span class="comment">--5e+20</span></span><br></pre></td></tr></table></figure>
<p>å…·æœ‰åè¿›åˆ¶å°æ•°æˆ–è€…æŒ‡æ•°çš„æ•°å€¼ä¼šè¢«å½“åšæµ®ç‚¹å‹å€¼ï¼Œå¦åˆ™ä¼šè¢«å½“åšæ•´æ•°å€¼ã€‚<br>æ•´å‹æ•°å’Œæµ®ç‚¹æ•°çš„ç±»å‹éƒ½æ˜¯<code>number</code>ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">type</span>(<span class="number">3</span>)			<span class="comment">--number</span></span><br><span class="line">&gt;<span class="built_in">type</span>(<span class="number">3.5</span>)			<span class="comment">--number</span></span><br><span class="line">&gt;<span class="built_in">type</span>(<span class="number">3.0</span>)			<span class="comment">--number</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºæ•´å‹å€¼å’Œæµ®ç‚¹å‹å€¼çš„ç±»å‹éƒ½æ˜¯â€numberâ€ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯å¯ä»¥äº’ç›¸è½¬æ¢çš„ã€‚åŒæ—¶ï¼Œå…·æœ‰ç›¸åŒç®—æœ¯å€¼çš„æ•´å‹å€¼å’Œæµ®ç‚¹å€¼åœ¨Luaè¯­è¨€ä¸­æ˜¯ç›¸ç­‰çš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="number">1</span> == <span class="number">1.0</span> 			<span class="comment">--true</span></span><br><span class="line">&gt;<span class="number">-3</span> == <span class="number">-3.0</span> 		<span class="comment">--ture</span></span><br><span class="line">&gt;<span class="number">0.2e3</span>	== <span class="number">200</span> 		<span class="comment">--ture</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å°‘æ•°æƒ…å†µä¸‹ï¼Œå½“éœ€è¦åŒºåˆ†æ•´å‹å€¼å’Œæµ®ç‚¹å‹å€¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°math.type:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">type</span>(<span class="number">3</span>)			<span class="comment">--integer</span></span><br><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">type</span>(<span class="number">3.0</span>)			<span class="comment">--float</span></span><br></pre></td></tr></table></figure>
<p>åœ¨Lua5.3ä¸­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="number">3</span>			<span class="comment">--3</span></span><br><span class="line">&gt;<span class="number">3.0</span>		<span class="comment">--3.0</span></span><br><span class="line">&gt;<span class="number">1000</span>		<span class="comment">--1000</span></span><br><span class="line">&gt;<span class="number">1e3</span>		<span class="comment">--1000.0</span></span><br></pre></td></tr></table></figure>
<p>Luaè¯­è¨€è¿˜åƒå…¶ä»–è¯­è¨€ä¸€æ ·ä¹Ÿæ”¯æŒ0xå¼€å¤´çš„åå…­è¿›åˆ¶å¸¸é‡ã€‚ä¸å…¶ä»–å¾ˆå¤šå˜æˆè¯­è¨€ä¸é€šï¼ŒLuaè¯­è¨€è¿˜æ”¯æŒåå…­è¿›åˆ¶çš„æµ®ç‚¹æ•°ï¼Œè¿™ç§åå…­è¿›åˆ¶æµ®ç‚¹æ•°éƒ¨åˆ†ç”±å°æ•°éƒ¨åˆ†å’Œä»¥pæˆ–På¼€å¤´çš„æŒ‡æ•°éƒ¨åˆ†ç»„æˆã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="number">0xff</span>		<span class="comment">--255</span></span><br><span class="line">&gt;<span class="number">0x1A3</span>		<span class="comment">--419</span></span><br><span class="line">&gt;<span class="number">0x0</span><span class="number">.2</span>		<span class="comment">--0.125</span></span><br><span class="line">&gt;<span class="number">0x1</span>p<span class="number">-1</span>		<span class="comment">--0.5</span></span><br><span class="line">&gt;<span class="number">0</span>x.bp2		<span class="comment">--42.75</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨å‚æ•°%aå‚æ•°ï¼Œé€šè¿‡å‡½æ•°string.formatå¯¹è¿™ç§æ ¼å¼è¿›è¡Œæ ¼å¼åŒ–è¾“å‡ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%a&quot;</span>,<span class="number">419</span>)		<span class="comment">--0x1.a3p+8</span></span><br><span class="line">&gt;<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%a&quot;</span>,<span class="number">0.1</span>)		<span class="comment">--0x1.999999999999ap-4</span></span><br></pre></td></tr></table></figure>
<p>è™½ç„¶è¿™ç§æ ¼å¼å¾ˆéš¾é˜…è¯»ï¼Œä½†æ˜¯è¿™ç§æ ¼å¼å¯ä»¥ä¿ç•™æ‰€æœ‰æµ®ç‚¹æ•°çš„ç²¾åº¦ï¼Œå¹¶ä¸”æ¯”åè¿›åˆ¶çš„è½¬æ¢é€Ÿåº¦æ›´å¿«ã€‚</p>
<h2 id="ç®—æœ¯è¿ç®—"><a href="#ç®—æœ¯è¿ç®—" class="headerlink" title="ç®—æœ¯è¿ç®—"></a>ç®—æœ¯è¿ç®—</h2><p>é™¤äº†åŠ å‡ä¹˜é™¤ã€å–è´Ÿæ•°ç­‰å¸¸è§çš„ç®—æœ¯è¿ç®—å¤–ï¼ŒLuaè¯­è¨€è¿˜æ”¯æŒå–æ•´é™¤æ³•ã€å–æ¨¡å’ŒæŒ‡æ•°è¿ç®—ã€‚<br>ä¸¤ä¸ªæ•´æ•°å‹å€¼è¿›è¡ŒåŠ å‡ä¹˜é™¤å’Œå–è´Ÿæ“ä½œçš„ç»“æœä»ç„¶æ˜¯æ•´å‹å€¼ã€‚å¯¹äºè¿™äº›ç®—æœ¯è¿ç®—è€Œè¨€ï¼Œæ“ä½œæ•°æ˜¯ç”¨æ•´å‹è¿˜æš—ç¤ºæµ®ç‚¹å‹è¡¨ç¤ºçš„æ•´æ•°éƒ½æ²¡æœ‰åŒºåˆ«ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="number">13</span> + <span class="number">15</span> 		<span class="comment">--28</span></span><br><span class="line">&gt;<span class="number">13.0</span> + <span class="number">15.0</span> 	<span class="comment">--28.0</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯æ•´å‹å€¼ï¼Œé‚£ä¹ˆç»“æœä¹Ÿæ˜¯æ•´å‹å€¼ï¼›å¦åˆ™ï¼Œç»“æœå°±æ˜¯æµ®ç‚¹å‹å€¼ã€‚å½“æ“ä½œæ•°ä¸€ä¸ªæ˜¯æ•´å‹å€¼ä¸€ä¸ªæ˜¯æµ®ç‚¹å‹å€¼æ—¶ï¼ŒLuaè¯­è¨€ä¼šåœ¨è¿›è¡Œç®—æœ¯è¿ç®—å‰å°†æ•´å‹å€¼è½¬æ¢ä¸ºæµ®ç‚¹å‹å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="number">13.0</span> + <span class="number">25</span> 		<span class="comment">--38.0</span></span><br><span class="line">&gt;-(<span class="number">3</span> * <span class="number">6.0</span>)		<span class="comment">--18.0</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºä¸¤ä¸ªæ•´æ•°ç›¸é™¤çš„ç»“æœå¹¶ä¸ä¸€å®šæ˜¯æ•´æ•°ï¼Œå› æ­¤é™¤æ³•ä¸éµå¾ªä¸Šè¿°è§„åˆ™ã€‚ä¸ºäº†é¿å…ä¸¤ä¸ªæ•´å‹å€¼ç›¸é™¤å’Œä¸¤ä¸ªæµ®ç‚¹å‹å€¼ç›¸é™¤å¯¼è‡´ä¸ä¸€æ ·çš„ç»“æœï¼Œé™¤æ³•è¿ç®—æ“ä½œæ°¸è¿œæ˜¯æµ®ç‚¹æ•°ä¸”äº§ç”Ÿæµ®ç‚¹å‹å€¼çš„ç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;3.0 / 2.0				--1.5</span><br><span class="line">&gt;3 / 2					--1.5</span><br></pre></td></tr></table></figure>
<p>Lua5.3é’ˆå¯¹æ•´æ•°é™¤æ³•å¼•å…¥äº†ä¸€ä¸ªç§°ä¸ºflooré™¤æ³•çš„æ–°ç®—æœ¯è¿ç®—ç¬¦&#x2F;&#x2F;ã€‚é¡¾åæ€ä¹‰ï¼Œflooré™¤æ³•ä¼šå¯¹å¾—åˆ°çš„å•†å‘è´Ÿæ— ç©·å–æ•´ï¼Œä»è€Œä¿è¯ç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°ã€‚è¿™æ ·ï¼Œflooré™¤æ³•å°±å¯ä»¥ä¸å…¶ä»–ç®—æœ¯è¿ç®—ä¸€æ ·éµå¾ªåŒæ ·çš„è§„åˆ™ï¼šå¦‚æœæ“ä½œæ•°éƒ½æ˜¯æ•´å‹å€¼ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯æ•´å‹å€¼ï¼Œå¦åˆ™å°±æ˜¯æµ®ç‚¹å‹å€¼</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="number">3</span> // <span class="number">2</span>			<span class="comment">--1</span></span><br><span class="line">&gt;<span class="number">3.0</span> // <span class="number">2</span>		<span class="comment">--1.0</span></span><br><span class="line">&gt;<span class="number">6</span> // <span class="number">2</span>			<span class="comment">--3</span></span><br><span class="line">&gt;<span class="number">6.0</span> // <span class="number">2.0</span> 	<span class="comment">--3.0</span></span><br><span class="line">&gt;<span class="number">-9</span> // <span class="number">2</span>		<span class="comment">--5</span></span><br><span class="line">&gt;<span class="number">1.5</span> // <span class="number">0.5</span>		<span class="comment">--3.0</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢å…¬å¼æ˜¯å–æ¨¡è¿ç®—çš„å®šä¹‰ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a % b == a - ((a // b ) * b )</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ“ä½œæ•°æ˜¯æ•´æ•°ï¼Œé‚£ä¹ˆå–æ¨¡è¿ç®—çš„ç»“æœä¹Ÿæ˜¯æ•´æ•°ã€‚å› æ­¤ï¼Œå–æ¨¡è¿ç®—ä¹Ÿéµä»ä¸ç®—æœ¯è¿ç®—ç›¸åŒçš„è§„å¾‹ï¼Œå³å¦‚æœä¸¤ä¸ªæ“ä½œæ•°å‡æ˜¯æ•´å‹å€¼ï¼Œåˆ™ç»“æœä¸ºæ•´å‹ï¼Œå¦åˆ™ä¸ºæµ®ç‚¹å‹ã€‚<br>å¯¹äºæ•´å‹æ“ä½œæ•°è€Œè¨€ï¼Œå–æ¨¡è¿ç®—çš„å«ä¹‰æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå…¶ç»“æœçš„ç¬¦å·æ°¸è¿œä¸ç¬¬äºŒä¸ªæ“ä½œæ•°çš„ç¬¦å·ä¿æŒä¸€è‡´ã€‚ç‰¹åˆ«åœ°ï¼Œå¯¹äºä»»æ„æŒ‡å®šçš„æ­£å¸¸æ•°Kï¼Œå³ä½¿xæ˜¯è´Ÿæ•°ï¼Œè¡¨è¾¾å¼x%Kçš„ç»“æœä¹Ÿæ°¸è¿œåœ¨[0,K-1]ä¹‹é—´ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä»»æ„æ•´æ•°å€¼iï¼Œè¡¨è¾¾å¼i%2çš„ç»“æœå‡æ˜¯0æˆ–1ã€‚<br>å¯¹äºå®æ•°ç±»å‹çš„æ“ä½œæ•°è€Œè¨€ï¼Œå–æ¨¡è¿ç®—æœ‰ä¸€äº›ä¸åŒã€‚ä¾‹å¦‚ï¼Œx-x%0.01æ°å¥½æ˜¯xä¿ç•™ä¸¤ä½å°æ•°çš„ç»“æœï¼Œx-x%0.001æ°å¥½æ˜¯xä¿ç•™ä¸‰ä½å°æ•°çš„ç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;x = <span class="built_in">math</span>.<span class="built_in">pi</span></span><br><span class="line">&gt;x - x%<span class="number">0.01</span>			<span class="comment">--3.14</span></span><br><span class="line">&gt;x - x%<span class="number">0.001</span>		<span class="comment">--3.141</span></span><br></pre></td></tr></table></figure>
<p>å†æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å–æ¨¡è¿ç®—æ£€æŸ¥æŸè¾†è½¦åœ¨æ‹è¿‡äº†æŒ‡å®šçš„è§’åº¦åæ˜¯å¦èƒ½å¤ŸåŸè·¯è¿”å›ã€‚å‡è®¾ä½¿ç”¨åº¦ä½œä¸ºè§’åº¦çš„å•ä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å…¬å¼:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> tolerance = <span class="number">10</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isturnback</span><span class="params">( angle)</span></span></span><br><span class="line">	angle = angle % <span class="number">360</span></span><br><span class="line">	<span class="keyword">return</span> (<span class="built_in">math</span>.<span class="built_in">abs</span>(angle - <span class="number">180</span>) &lt; tolerance)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°å¯¹è´Ÿçš„è§’åº¦è€Œè¨€ä¹ŸåŒæ ·é€‚ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">print(istrunback(-180))			--turn</span><br></pre></td></tr></table></figure>
<p>å‡è®¾ä½¿ç”¨å¼§åº¦ä½œä¸ºè§’åº¦çš„å•ä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦ç®€å•åœ°ä¿®æ”¹å¸¸é‡çš„å®šä¹‰å³å¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> tolerance = <span class="number">0.17</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isturnback</span><span class="params">( angle)</span></span></span><br><span class="line">	angle = angle % (<span class="number">2</span> * <span class="built_in">math</span>.<span class="built_in">pi</span>)</span><br><span class="line">	<span class="keyword">return</span> (<span class="built_in">math</span>.<span class="built_in">abs</span>(angle - <span class="number">180</span>) &lt; tolerance)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¡¨è¾¾å¼angle%(2*math.pi)å®ç°äº†å°†ä»»æ„èŒƒå›´çš„è§’åº¦å½’ä¸€åŒ–åˆ°[0,2pi]ä¹‹é—´ã€‚</p>
<p>Luaè¡¨è¾¾å¼åŒæ„æ”¯æŒå¹‚è¿ç®—ï¼Œä½¿ç”¨ç¬¦å·<code>^</code>è¡¨ç¤ºï¼Œåƒé™¤æ³•ä¸€æ ·ï¼Œå¹‚è¿ç®—çš„æ“ä½œæ•°ä¹Ÿæ°¸è¿œæ˜¯æµ®ç‚¹ç±»å‹ï¼ˆæ•´å‹å€¼åœ¨å¹‚è¿ç®—æ—¶ä¸èƒ½æ•´é™¤ï¼Œä¾‹å¦‚ï¼Œ$2^{-2}$çš„ç»“æœä¸æ˜¯æ•´å‹æ•°ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨$x^{0.5}$æ¥è®¡ç®—xçš„å¹³æ–¹æ ¹ï¼Œä½¿ç”¨$x^{1&#x2F;3}$æ¥è®¡ç®—xçš„ç«‹æ–¹æ ¹ã€‚</p>
<h2 id="å…³ç³»è¿ç®—"><a href="#å…³ç³»è¿ç®—" class="headerlink" title="å…³ç³»è¿ç®—"></a>å…³ç³»è¿ç®—</h2><p>Luaè¯­è¨€æä¾›äº†ä¸‹åˆ—å…³ç³»è¿ç®—ï¼š<br><code>&lt;</code>,<code>&gt;</code>,<code>&lt;=</code>,<code>&gt;=</code>,<code>==</code>,<code>~=</code><br>è¿™äº›å…³ç³»è¿ç®—çš„ç»“æœéƒ½æ˜¯Booleanç±»å‹ã€‚<br><code>==</code>ç”¨äºç›¸ç­‰æ€§æµ‹è¯•ï¼Œ<code>~=</code>ç”¨äºä¸ç­‰æ€§æµ‹è¯•ã€‚è¿™ä¸¤ä¸ªè¿ç®—ç¬¦å¯ä»¥åº”ç”¨äºä»»æ„ä¸¤ä¸ªå€¼ï¼Œå½“è¿™ä¸¤ä¸ªå€¼çš„ç±»å‹ä¸åŒæ—¶ï¼ŒLuaè¯­è¨€è®¤ä¸ºå®ƒä»¬æ˜¯ä¸ç›¸ç­‰çš„ï¼›å¦åˆ™ï¼Œä¼šæ ¹æ®å®ƒä»¬çš„ç±»å‹å†å¯¹ä¸¤è€…è¿›è¡Œæ¯”è¾ƒã€‚<br>æ¯”è¾ƒæ•°å€¼æ—¶åº”ç”¨æˆ·å¿½ç•¥æ•°å€¼çš„å­ç±»å‹ï¼Œæ•°å€¼ç©¶ç«Ÿæ˜¯ä»¥æ•´å‹è¿˜æ˜¯æµ®ç‚¹å‹ç±»å‹è¡¨ç¤ºå¹¶æ— åŒºåˆ«ï¼Œåªå¨±ç®—æœ¯æœ‰å…³ã€‚</p>
<h2 id="æ•°å­¦åº“"><a href="#æ•°å­¦åº“" class="headerlink" title="æ•°å­¦åº“"></a>æ•°å­¦åº“</h2><p>Luaè¯­è¨€æä¾›äº†æ ‡å‡†æ•°å­¦åº“mathã€‚æ ‡å‡†æ•°å­¦åº“ç”±ä¸€ç»„æ ‡å‡†çš„æ•°å­¦å‡½æ•°ç»„æˆï¼ŒåŒ…æ‹¬ä¸‰è§’å‡½æ•°ã€æŒ‡æ•°å‡½æ•°ã€å–è¯å‡½æ•°ã€æœ€å¤§å’Œæœ€å°å‡½æ•°ã€ç”¨äºç”Ÿæˆä¼ªéšæœºæ•°å‡½æ•°(random)ä»¥åŠå¸¸é‡piå’Œhugeã€‚<br>è¯¦æƒ…å¯è§é“¾æ¥ï¼š<a href="https://blog.csdn.net/Silent_F/article/details/86547290">https://blog.csdn.net/Silent_F/article/details/86547290</a><br>æ‰€æœ‰çš„ä¸‰è§’å‡½æ•°éƒ½ä»¥å¼§åº¦ä¸ºå•ä½ï¼Œå¹¶é€šè¿‡å‡½æ•°degå’Œradè¿›è¡Œè§’åº¦å’Œå¼§åº¦çš„è½¬æ¢ã€‚</p>
<h3 id="éšæœºæ•°å‘ç”Ÿå™¨"><a href="#éšæœºæ•°å‘ç”Ÿå™¨" class="headerlink" title="éšæœºæ•°å‘ç”Ÿå™¨"></a>éšæœºæ•°å‘ç”Ÿå™¨</h3><p>å‡½æ•°math.randomç”¨äºç”Ÿæˆéšæœºæ•°ï¼Œå…±æœ‰ä¸‰ç§è°ƒç”¨æ–¹å¼ã€‚å½“ä¸å¸¦å‚æ•°è°ƒç”¨æ—¶ï¼Œè¯¥å‡½æ•°å°†è¿”å›ä¸€ä¸ªåœ¨[0,1)èŒƒå›´å†…å‡åŒ€åˆ†å¸ƒçš„éšæœºå®æ•°ã€‚å½“ä½¿ç”¨å¸¦æœ‰ä¸€ä¸ªæ•´å‹å€¼nçš„å‚æ•°è°ƒç”¨æ—¶ï¼Œè¯¥å‡½æ•°å°†è¿”å›ä¸€ä¸ªåœ¨[1,n]èŒƒå›´å†…çš„éšæœºæ•´æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨random(6)æ¥æ¨¡æ‹Ÿæ·éª°å­çš„ç»“æœã€‚å½“ä½¿ç”¨å¸¦æœ‰ä¸¤ä¸ªæ•´æ•°å€¼lå’Œuçš„å‚æ•°è°ƒç”¨æ—¶ï¼Œè¯¥å‡½æ•°è¿”å›åœ¨[l,u]èŒƒå›´å†…çš„éšæœºæ•´æ•°ã€‚<br>å‡½æ•°randomseedç”¨äºè®¾ç½®éšæœºæ•°å‘ç”Ÿå™¨çš„ç§å­ï¼Œè¯¥å‡½æ•°çš„å”¯ä¸€å‚æ•°å°±æ˜¯æ•°å€¼ç±»å‹çš„ç§å­ã€‚åœ¨ä¸€ä¸ªç¨‹åºå¯åŠ¨æ—¶ï¼Œç³»ç»Ÿå›ºå®šä½¿ç”¨1ä¸ºç§å­åˆå§‹åŒ–éšæœºæ•°å‘ç”Ÿå™¨ã€‚å¦‚æœä¸è®¾ç½®å…¶ä»–çš„ç§å­ï¼Œé‚£ä¹ˆæ¯æ¬¡ç¨‹åºè¿è¡Œæ—¶éƒ½ä¼šç”Ÿæˆç›¸åŒçš„éšæœºæ•°åºåˆ—ã€‚ä»è°ƒè¯•çš„è§’åº¦çœ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸é”™çš„ç‰¹è¡Œï¼Œç„¶è€Œï¼Œå¯¹äºä¸€ä¸ªæ¸¸æˆæ¥è¯´å´ä¼šå¯¼è‡´ç›¸åŒçš„åœºæ™¯é‡å¤åœ°å‡ºç°ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé€šå¸¸è°ƒç”¨<code>math.randomsee(os.time())</code>æ¥ä½¿å½“å‰ç³»ç»Ÿæ—¶é—´ä½œä¸ºç§å­åˆå§‹åŒ–éšæœºæ•°å‘ç”Ÿå™¨ã€‚</p>
<h3 id="å–è¯å‡½æ•°"><a href="#å–è¯å‡½æ•°" class="headerlink" title="å–è¯å‡½æ•°"></a>å–è¯å‡½æ•°</h3><p>æ•°å­¦åº“æä¾›äº†ä¸‰ä¸ªå–è¯å‡½æ•°:floorã€ceilå’Œmodfã€‚å…¶ä¸­ï¼Œfloorå‘è´Ÿæ— ç©·å–æ•´ï¼Œceilå‘æ­£æ— ç©·å–æ•´ï¼Œmodfå‘é›¶å–æ•´ã€‚å½“å–æ•´ç»“æœèƒ½å¤Ÿç”¨æ•´å‹è¡¨ç¤ºæ—¶ï¼Œè¿”å›ç»“æœä¸ºæ•´å‹å€¼ï¼Œå¦åˆ™è¿”å›æµ®ç‚¹å‹å€¼ã€‚å¤„ç†è¿”å›å–æ•´åçš„å€¼ä¹‰åŠ¡å¤–ï¼Œå‡½æ•°modfè¿˜ä¼šè¿”å›å°æ•°éƒ¨åˆ†ä½œä¸ºç¬¬äºŒä¸ªç»“æœã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">floor</span>(<span class="number">3.3</span>)		<span class="comment">--3</span></span><br><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">floor</span>(<span class="number">-3.3</span>)		<span class="comment">-- -4</span></span><br><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">ceil</span>(<span class="number">3.3</span>)			<span class="comment">-- 4</span></span><br><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">ceil</span>(<span class="number">-3.3</span>)		<span class="comment">-- -3</span></span><br><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">modf</span>(<span class="number">3.3</span>)			<span class="comment">-- 3 	0.3</span></span><br><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">modf</span>(<span class="number">-3.3</span>)		<span class="comment">-- -3 	-0.3</span></span><br><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">floor</span>(<span class="number">2</span>^<span class="number">70</span>)		<span class="comment">--1.1805916207174e+21</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‚æ•°æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•´å‹å€¼ï¼Œé‚£ä¹ˆå®ƒå°†è¢«åŸæ ·è¿”å›ã€‚<br>å¦‚æœæƒ³å°†æ•°å€¼xå‘æœ€è¿‘çš„æ•´æ•°å–æ•´ï¼Œå¯ä»¥å¯¹x+0.5è°ƒç”¨floorå‡½æ•°ã€‚ä¸è¿‡ï¼Œå½“å‚æ•°æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•´æ•°æ—¶ï¼Œç®€å•çš„åŠ æ³•å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x = x^<span class="number">52</span> + <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%d %d&quot;</span> , x , <span class="built_in">math</span>.<span class="built_in">floor</span>(x + <span class="number">0.5</span>)))</span><br><span class="line">	<span class="comment">-- 4503599627370497   4503599627370498</span></span><br></pre></td></tr></table></figure>
<p>$2^{52}$ + 1.5çš„æµ®ç‚¹å€¼è¡¨ç¤ºæ˜¯ä¸ç²¾ç¡®çš„ï¼Œå› æ­¤å†…éƒ¨ä¼šä»¥æˆ‘ä»¬ä¸å¯æ§åˆ¶çš„æ–¹å¼å–æ•´ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å•ç‹¬åœ°å¤„ç†æ•´æ•°å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">round</span><span class="params">(x)</span></span></span><br><span class="line">	<span class="keyword">local</span> f = <span class="built_in">math</span>.<span class="built_in">floor</span>(x)</span><br><span class="line">	<span class="keyword">if</span> x == f <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">return</span> f</span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">math</span>.<span class="built_in">floor</span>(x + <span class="number">0.5</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šä¾‹ä¸­çš„å‡½æ•°æ€»æ˜¯ä¼šå‘ä¸Šå–æ•´åŠä¸ªæ•´æ•°ã€‚å¦‚æœæƒ³è¿›è¡Œæ— åå–æ•´ï¼Œå³å‘è·ç¦»æœ€è¿‘çš„å¶æ•°å–æ•´åŠä¸ªæ•´æ•°ï¼Œä¸Šè¿°å…¬å¼åœ¨x + 0.5æ˜¯å¥‡æ•°çš„æƒ…å†µä¸‹äº§ç”Ÿä¸æ­£ç¡®çš„ç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">floor</span>(<span class="number">3.5</span> + <span class="number">0.5</span>) 		<span class="comment">--4 (ok)</span></span><br><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">floor</span>(<span class="number">2.5</span> + <span class="number">0.5</span>)		<span class="comment">--3 (wrong)</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œè¿˜æ˜¯å¯ä»¥åˆ©ç”¨å–æ•´æ“ä½œæ¥è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼šè¡¨è¾¾å¼<code>(x%2.0 == 0.5)</code>åªæœ‰åœ¨x + 0.5ä¸ºå¥‡æ•°æ—¶ä¸ºçœŸã€‚åŸºäºè¿™äº›æƒ…å†µï¼Œå®šä¹‰ä¸€ä¸ªæ— åå–æ•´å‡½æ•°å°±å¾ˆç®€å•äº†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">round</span><span class="params">(x)</span></span></span><br><span class="line">	<span class="keyword">local</span> f = <span class="built_in">math</span>.<span class="built_in">floor</span>(x)</span><br><span class="line">	<span class="keyword">if</span> (x == f) <span class="keyword">or</span> (x % <span class="number">2.0</span> == <span class="number">0.5</span>) <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">return</span> f</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">math</span>.<span class="built_in">floor</span>(x + <span class="number">0.5</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(round(<span class="number">2.5</span>))		<span class="comment">-- 2</span></span><br><span class="line"><span class="built_in">print</span>(round(<span class="number">3.5</span>))		<span class="comment">-- 4</span></span><br><span class="line"><span class="built_in">print</span>(round(<span class="number">-2.5</span>))		<span class="comment">-- -2</span></span><br><span class="line"><span class="built_in">print</span>(round(<span class="number">-1.5</span>))		<span class="comment">-- -2</span></span><br></pre></td></tr></table></figure>

<h2 id="è¡¨ç¤ºèŒƒå›´"><a href="#è¡¨ç¤ºèŒƒå›´" class="headerlink" title="è¡¨ç¤ºèŒƒå›´"></a>è¡¨ç¤ºèŒƒå›´</h2><p>å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä½¿ç”¨æŸäº›å›ºå®šé•¿åº¦çš„æ¯”ç‰¹ä½æ¥è¡¨è¾¾æ•°å€¼ã€‚å› æ­¤ï¼Œæ•°å€¼çš„è¡¨ç¤ºåœ¨èŒƒå›´å’Œç²¾åº¦ä¸Šéƒ½æ˜¯æœ‰é™åˆ¶çš„ã€‚<br>æ ‡å‡†Luaä½¿ç”¨64ä¸ªæ¯”ç‰¹ä½æ¥å­˜å‚¨æ•´å‹å€¼ï¼Œå…¶æœ€å¤§å€¼ä¸º$2^{63}-1$ï¼Œçº¦ç­‰äº$10^{19}$ï¼›ç²¾ç®€Luaä½¿ç”¨32ä¸ªæ¯”ç‰¹ä½å­˜å‚¨æ•´å‹å€¼ï¼Œå…¶æœ€å¤§å€¼çº¦ä¸º20äº¿ã€‚æ•°å­¦åº“ä¸­çš„å¸¸é‡å®šä¹‰äº†æ•´å‹å€¼çš„æœ€å¤§å€¼(math.maxinteger)å’Œæœ€å°å€¼(math.mininteger)ã€‚<br>64ä½æ•´å‹å€¼ä¸­çš„æœ€å¤§å€¼æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°å€¼ï¼šå…¨çƒè´¢å¯Œæ€»å’Œï¼ˆæŒ‰ç¾åˆ†è®¡ç®—ï¼‰çš„æ•°åƒå€å’Œå…¨çƒäººå£æ€»æ•°çš„æ•°åäº¿å€ã€‚å°½ç®¡è¿™ä¸ªæ•°å€¼å¾ˆå¤§ï¼Œä½†æ˜¯ä»ç„¶æœ‰å¯èƒ½å‘ç”Ÿæº¢å‡ºã€‚å½“æˆ‘ä»¬åœ¨æ•´å‹æ•°æ“ä½œæ—¶å‡ºç°æ¯”minintegeræ›´å°æˆ–è€…æ¯”maxintegeræ›´å¤§çš„æ•°å€¼æ—¶ï¼Œç»“æœå°±ä¼šå›ç¯ã€‚<br>åœ¨æ•°å­¦é¢†åŸŸï¼Œå›ç¯çš„æ„æ€æ˜¯ç»“æœåªèƒ½åœ¨minintegerå’Œmaxintegerä¹‹é—´ï¼Œä¹Ÿå°±æ˜¯å¯¹$2^{64}$å–æ¨¡çš„ç®—æœ¯ç»“æœã€‚åœ¨è®¡ç®—æœºé¢†åŸŸï¼Œå›ç¯çš„æ„æ€æ˜¯ä¸¢å¼ƒæœ€é«˜è¿›ä½ã€‚å‡è®¾æœ€é«˜è¿›ä½å­˜åœ¨ï¼Œå…¶å°†æ˜¯ç¬¬65ä¸ªæ¯”ç‰¹ä½ï¼Œä»£è¡¨$2^{64}$ã€‚å› æ­¤ï¼Œå¿½ç•¥ç¬¬65ä¸ªæ¯”ç‰¹ä½ä¸ä¼šæ”¹å˜å€¼å¯¹$2^{64}$å–æ¨¡çš„ç»“æœã€‚åœ¨Luaè¯­è¨€ä¸­ï¼Œè¿™ç§è¡Œä¸ºå¯¹æ‰€æœ‰æ¶‰åŠæ•´å‹å€¼çš„ç®—æœ¯è¿ç®—éƒ½æ˜¯ä¸€è‡´ä¸”å¯é¢„æµ‹çš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">math</span>.maxinteger + <span class="number">1</span> == <span class="built_in">math</span>.mininteger			<span class="comment">--ture</span></span><br><span class="line">&gt;<span class="built_in">math</span>.mininteger - <span class="number">1</span> == <span class="built_in">math</span>.maxinteger			<span class="comment">--true</span></span><br><span class="line">&gt;-<span class="built_in">math</span>.mininteger == <span class="built_in">math</span>.mininteger			<span class="comment">--true</span></span><br><span class="line">&gt;<span class="built_in">math</span>.mininteger // <span class="number">-1</span> == <span class="built_in">math</span>.mininteger		<span class="comment">--true</span></span><br></pre></td></tr></table></figure>
<p>æœ€å¤§å¯ä»¥è¡¨ç¤ºçš„è¯ä¹¦æ˜¯0x7ffâ€¦fffï¼Œå³é™¤æœ€é«˜ä½ï¼ˆç¬¦å·ä½ï¼Œé›¶ä¸ºéè´Ÿæ•´æ•°ï¼‰å¤–å…¶ä½™æ¯”ç‰¹ä½å‡ä¸º1.å½“æˆ‘ä»¬å¯¹0x7ffâ€¦fffåŠ 1æ—¶ï¼Œå…¶ç»“æœå˜ä¸º0x800â€¦000ï¼Œå³æœ€å°å¯è¡¨ç¤ºçš„æ•´æ•°ã€‚æœ€å°æ•´æ•°æ¯”æœ€å¤§æ•´æ•°çš„è¡¨ç¤ºå¹…åº¦å¤§1ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">math</span>.maxinteger		<span class="comment">--9223372036854775807</span></span><br><span class="line">&gt;<span class="number">0x7fffffffffffffff</span>		<span class="comment">--9223372036854775807</span></span><br><span class="line">&gt;<span class="built_in">math</span>.maxinteger		<span class="comment">--9223372036854775808</span></span><br><span class="line">&gt;<span class="number">0x8000000000000000</span>		<span class="comment">--9223372036854775808</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºæµ®ç‚¹æ•°è€Œè¨€ï¼Œæ ‡å‡†Luaä½¿ç”¨åŒç²¾åº¦ã€‚æ ‡å‡†Luaä½¿ç”¨64ä¸ªæ¯”ç‰¹ä½è¡¨ç¤ºæ‰€æœ‰æ•°å€¼ï¼Œå…¶ä¸­11ä½ä¸ºæŒ‡æ•°ã€‚åŒç²¾åº¦æµ®ç‚¹æ•°å¯ä»¥è¡¨ç¤ºå…·æœ‰å¤§è‡´16ä¸ªæœ‰æ•ˆåè¿›åˆ¶ä½çš„æ•°ï¼ŒèŒƒå›´ä»$-10^{308}$åˆ°$10^{308}$ã€‚ç²¾ç®€Luaä½¿ç”¨32ä¸ªæ¯”ç‰¹ä½è¡¨ç¤ºçš„å•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œå¤§è‡´å…·æœ‰7ä¸ªæœ‰æ•ˆåè¿›åˆ¶ä½ï¼ŒèŒƒå›´ä»$-10^{38}$åˆ°$10^{38}$ã€‚<br>åŒç²¾åº¦æµ®ç‚¹æ•°å¯¹äºå¤§å¤šæ•°å®é™…åº”ç”¨è€Œè¨€æ˜¯è¶³å¤Ÿå¤§çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»äº†è§£ç²¾åº¦çš„é™åˆ¶ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨åä½è¡¨ç¤ºä¸€ä¸ªæ•°ï¼Œé‚£ä¹ˆ1&#x2F;7ä¼šè¢«å–æ•´åˆ°0.142857142ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨åä½è®¡ç®—1&#x2F;7 * 7ï¼Œç»“æœä¼šæ˜¯0.999999994è€Œä¸æ˜¯1ã€‚æ­¤å¤–ï¼Œç”¨åè¿›åˆ¶è¡¨ç¤ºçš„æœ‰é™å°æ•°åœ¨ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºæ—¶å¯èƒ½æ˜¯æ— çº¿å°æ•°ã€‚ä¾‹å¦‚ï¼Œ12.7 -20 + 7.3å³ä¾¿æ˜¯ç”¨åŒç²¾åº¦è¡¨ç¤ºä¹Ÿä¸æ˜¯0ï¼Œè¿™æ˜¯ç”±äº12.7å’Œ7.3çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸æ˜¯æœ‰é™å°æ•°ã€‚<br>ç”±äºæ•´å‹å€¼å’Œæµ®ç‚¹å‹å€¼çš„è¡¨ç¤ºèŒƒå›´ä¸åŒï¼Œå› æ­¤å½“è¶…è¿‡å®ƒä»¬çš„è¡¨ç¤ºèŒƒå›´æ—¶ï¼Œæ•´å‹å€¼å’Œæµ®ç‚¹å‹å€¼çš„ç®—æœ¯è¿ç®—ä¼šäº§ç”Ÿä¸åŒçš„ç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">math</span>.maxinteger + <span class="number">2</span>		<span class="comment">-- -9223372036854775807</span></span><br><span class="line">&gt;<span class="built_in">math</span>.maxinteger + <span class="number">2.0</span>      <span class="comment">-- 9.2233720368548e + 18</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šä¾‹ä¸­ï¼Œä¸¤ä¸ªç»“æœä»æ•°å­¦çš„è§’åº¦çœ‹éƒ½æ˜¯é”™è¯¯çš„ï¼Œè€Œä¸”å®ƒä»¬é”™è¯¯çš„æ–¹å¼ä¸åŒã€‚ç¬¬ä¸€è¡Œå¯¹æœ€å¤§å¯è¡¨ç¤ºæ•´æ•°è¿›è¡Œäº†æ•´å‹æ±‚å’Œï¼Œç»“æœå‘ç”Ÿäº†å›ç¯ã€‚ç¬¬äºŒè¡Œå¯¹æœ€å¤§å¯è¡¨ç¤ºæ•´æ•°è¿›è¡Œäº†æµ®ç‚¹å‹æ±‚å’Œï¼Œç»“æœè¢«å–æ•´æˆäº†ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼Œè¿™å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ¯”è¾ƒè¿ç®—è¯æ˜ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">math</span>.maxinteger + <span class="number">2.0</span> == <span class="built_in">math</span>.maxinteger + <span class="number">1.0</span>   <span class="comment">-- true</span></span><br></pre></td></tr></table></figure>
<p>å°½ç®¡æ¯ä¸€ç§è¡¨ç¤ºæ–¹æ³•éƒ½æœ‰å…¶ä¼˜åŠ¿ï¼Œä½†æ˜¯åªæœ‰æµ®ç‚¹å‹æ‰èƒ½è¡¨ç¤ºå°æ•°ã€‚æµ®ç‚¹æ•°çš„å€¼å¯ä»¥è¡¨ç¤ºå¾ˆå¤§çš„èŒƒå›´ï¼Œä½†æ˜¯æµ®ç‚¹å‹èƒ½å¤Ÿè¡¨ç¤ºçš„æ•´æ•°èŒƒå›´è¢«ç²¾ç¡®åœ°é™åˆ¶[$-2^{53}$,$2^{53}$]ä¹‹é—´ã€‚åœ¨è¿™ä¸ªèŒƒå›´å†…ï¼Œæˆ‘ä»¬åŸºæœ¬å¯ä»¥å¿½ç•¥æ•´å‹å’Œæµ®ç‚¹å‹çš„åŒºåˆ«ï¼›è¶…å‡ºè¿™ä¸ªèŒƒå›´åï¼Œæˆ‘ä»¬åˆ™åº”è¯¥è°¨æ…åœ°æ€è€ƒæ‰€ä½¿ç”¨çš„è¡¨ç¤ºæ–¹å¼ã€‚</p>
<h2 id="æƒ¯ä¾‹"><a href="#æƒ¯ä¾‹" class="headerlink" title="æƒ¯ä¾‹"></a>æƒ¯ä¾‹</h2><p>æˆ‘ä»¬å¯ä»¥ç®€å•åœ°é€šè¿‡å¢åŠ 0.0çš„æ–¹æ³•å°†æ•´å‹å€¼å¼ºåˆ¶è½¬æ¢ä¸ºæµ®ç‚¹å‹å€¼ï¼Œä¸€ä¸ªæ•´å‹å€¼æ€»æ˜¯å¯ä»¥è¢«è½¬æ¢æˆæµ®ç‚¹å‹å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="number">-3</span> + <span class="number">0.0</span> 				<span class="comment">-- -3.0</span></span><br></pre></td></tr></table></figure>
<p>å°äº$2^{53}$çš„æ‰€æœ‰æ•´å‹å€¼çš„è¡¨ç¤ºä¸åŒç²¾åº¦æµ®ç‚¹å‹å€¼çš„è¡¨ç¤ºä¸€æ ·ï¼Œå¯¹äºç»å¯¹å€¼è¶…è¿‡äº†è¿™ä¸ªå€¼çš„æ•´å‹å€¼è€Œè¨€ï¼Œåœ¨å°†å…¶å¼ºåˆ¶è½¬æ¢ä¸ºæµ®ç‚¹å‹å€¼æ—¶å¯èƒ½å¯¼è‡´ç²¾åº¦æŸå¤±ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="number">9007199254740991</span> + <span class="number">0.0</span> == <span class="number">90071992547440991</span>		<span class="comment">--true</span></span><br><span class="line">&gt; <span class="number">9007199254740992</span> + <span class="number">0.0</span> == <span class="number">90071992547440992</span>		<span class="comment">--true</span></span><br><span class="line">&gt; <span class="number">9007199254740993</span> + <span class="number">0.0</span> == <span class="number">90071992547440993</span>		<span class="comment">--false</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æœ€åä¸€è¡Œä¸­ï¼Œ$2^{53} + 1$çš„ç»“æœè¢«å–æ•´ä¸º$2^{53}$ï¼Œæ‰“ç ´äº†ç­‰å¼ï¼Œè¡¨è¾¾å¼ç»“æœä¸ºfalseã€‚<br>é€šè¿‡ä¸é›¶è¿›è¡ŒæŒ‰ä½æˆ–è¿ç®—ï¼Œå¯ä»¥æŠŠæµ®ç‚¹å‹å€¼å¼ºåˆ¶è½¬æ¢ä¸ºæ•´å‹å€¼:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="number">2</span>^<span class="number">53</span>				<span class="comment">-- 9.007199254741e+15 (æµ®ç‚¹å‹å€¼)</span></span><br><span class="line">&gt; <span class="number">2</span>^<span class="number">53</span>|<span class="number">0</span>			<span class="comment">-- 9007199254730992	  (æ•´å‹å€¼)</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å°†æµ®ç‚¹å‹å€¼å¼ºåˆ¶è½¬æ¢ä¸ºæ•´å‹å€¼æ—¶ï¼ŒLuaè¯­è¨€ä¼šæ£€æŸ¥æ•°å€¼æ˜¯å¦ä¸æ•´å‹å€¼è¡¨ç¤ºå®Œå…¨ä¸€è‡´ï¼Œå³æ²¡æœ‰å°æ•°éƒ¨åˆ†ä¸”å…¶å€¼åœ¨æ•´å‹å€¼çš„è¡¨ç¤ºèŒƒå›´å†…ï¼Œå¦‚æœä¸æ»¡è¶³æ¡ä»¶åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="number">3.2</span>|<span class="number">0</span>             <span class="comment">--å°æ•°éƒ¨åˆ†</span></span><br><span class="line"><span class="built_in">stdin</span>:<span class="number">1</span>: number has no integer representation</span><br><span class="line">&gt; <span class="number">2</span>^<span class="number">64</span>|<span class="number">0</span>            <span class="comment">--è¶…å‡ºèŒƒå›´</span></span><br><span class="line"><span class="built_in">stdin</span>:<span class="number">1</span>: number has no integer representation</span><br><span class="line">&gt;<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">1</span>,<span class="number">3.5</span>)</span><br><span class="line"><span class="built_in">stdin</span>:<span class="number">1</span>: bad argument #<span class="number">2</span> to <span class="string">&#x27;random&#x27;</span>ï¼ˆæ•°å€¼æ²¡æœ‰ç”¨æ•´å‹è¡¨ç¤ºï¼‰</span><br></pre></td></tr></table></figure>
<p>å¯¹å°æ•°è¿›è¡Œå–æ•´å¿…é¡»æ˜¾ç¤ºåœ°è°ƒç”¨å–æ•´å‡½æ•°ã€‚<br>å¦ä¸€ç§æŠŠæ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºæ•´å‹å€¼çš„æ–¹å¼æ˜¯ä½¿ç”¨å‡½æ•°math.tointegerï¼Œè¯¥å‡½æ•°ä¼šåœ¨è¾“å…¥å‚æ•°æ— æ³•è½¬æ¢ä¸ºæ•´å‹å€¼æ—¶è¿”å›nil:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">math</span>.tointeger(<span class="number">-258.0</span>)			<span class="comment">-- -258</span></span><br><span class="line">&gt;<span class="built_in">math</span>.tointeger(<span class="number">2</span>^<span class="number">30</span>)			<span class="comment">-- 1073741824</span></span><br><span class="line">&gt;<span class="built_in">math</span>.tointeger(<span class="number">5.01</span>)			<span class="comment">-- nil   (ä¸æ˜¯æ•´æ•°)</span></span><br><span class="line">&gt;<span class="built_in">math</span>.tointeger(<span class="number">2</span>^<span class="number">64</span>)			<span class="comment">-- nil	 (è¶…å‡ºèŒƒå›´)</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‡½æ•°åœ¨éœ€è¦æ£€æŸ¥ä¸€ä¸ªæ•°å­—èƒ½å¦è¢«è½¬æ¢ä¸ºæ•´å‹å€¼æ—¶å°¤ä¸ºæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‡½æ•°åœ¨å¯èƒ½æ—¶ä¼šå°†è¾“å…¥å‚æ•°è½¬æ¢ä¸ºæ•´å‹å€¼ï¼Œå¦åˆ™å°†ä¿æŒåŸæ¥çš„å€¼ä¸å˜ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cond2int</span><span class="params">(x)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">math</span>.tointerger(x) <span class="keyword">or</span> x</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="è¿ç®—ç¬¦ä¼˜å…ˆçº§"><a href="#è¿ç®—ç¬¦ä¼˜å…ˆçº§" class="headerlink" title="è¿ç®—ç¬¦ä¼˜å…ˆçº§"></a>è¿ç®—ç¬¦ä¼˜å…ˆçº§</h2><p>Luaè¯­è¨€ä¸­çš„è¿ç®—ç¬¦ä¼˜å…ˆçº§å¦‚ä¸‹ï¼ˆä»é«˜åˆ°ä½ï¼‰</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">^</span><br><span class="line">ä¸€å…ƒè¿ç®—ç¬¦ï¼ˆ-  #  ~  <span class="keyword">not</span> )</span><br><span class="line">*    /    //    %</span><br><span class="line">+    -</span><br><span class="line">..(è¿ç»­)</span><br><span class="line">&lt;&lt;    &gt;&gt; ï¼ˆæŒ‰ä½ç§»ä½ï¼‰</span><br><span class="line">&amp;ï¼ˆæŒ‰ä½ä¸ï¼‰</span><br><span class="line">~ï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰</span><br><span class="line">|ï¼ˆæŒ‰ä½æˆ–ï¼‰</span><br><span class="line">&lt;    &gt;    &lt;=    &gt;=    ~=    ==</span><br><span class="line"><span class="keyword">and</span></span><br><span class="line"><span class="keyword">or</span></span><br></pre></td></tr></table></figure>
<p>åœ¨äºŒå…ƒè¿ç®—ç¬¦ä¸­ï¼Œé™¤äº†å¹‚è¿ç®—å’Œé“¾æ¥æ“ä½œç¬¦æ˜¯å³ç»“åˆçš„å¤–ï¼Œå…¶ä»–è¿ç®—ç¬¦éƒ½æ˜¯å·¦ç»“åˆçš„ã€‚å› æ­¤ï¼Œä»¥ä¸‹è¡¨è¾¾å¼çš„å·¦å³ä¸¤è¾¹ç­‰ä»·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a + i &lt; b/<span class="number">2</span> + <span class="number">1</span>     &lt;<span class="comment">--&gt; (a + i) &lt; ((b/2) + 1)</span></span><br><span class="line"><span class="number">5</span> + x^<span class="number">2</span>*<span class="number">8</span>			&lt;<span class="comment">--&gt; 5 + ((x^2) * 8)</span></span><br><span class="line">a &lt; y <span class="keyword">and</span> y &lt;= z    &lt;<span class="comment">--&gt; (a &lt; y) and (y &lt;= z)</span></span><br><span class="line">-x^<span class="number">2</span>				&lt;<span class="comment">--&gt; -(x^2)</span></span><br><span class="line">x^y^z				&lt;<span class="comment">--&gt; x^(y^z)</span></span><br></pre></td></tr></table></figure>
<p>å½“ä¸èƒ½ç¡®å®šæŸäº›è¡¨è¾¾å¼çš„è¿ç®—ç¬¦ä¼˜å…ˆçº§æ—¶ï¼Œåº”è¯¥æ˜¾ç¤ºåœ°ç”¨æ‹¬å·æ¥æŒ‡å®šæ‰€å¸Œæœ›çš„è¿ç®—æ¬¡åºã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaä¸­çš„ç¯å¢ƒ(Environment)</title>
    <url>/64510.html</url>
    <content><![CDATA[<p>å…¨å±€å˜é‡åœ¨å¤§å¤šæ•°å˜æˆè¯­è¨€ä¸­æ˜¯è®©äººçˆ±æ¨äº¤ç»‡åˆä¸å¯æˆ–ç¼ºçš„ã€‚ä¸€æ–¹é¢ï¼Œä½¿ç”¨ç®¡å…¨å±€å˜é‡ä¼šæ˜æ˜¾åœ°ä½¿æ— å…³çš„ä»£ç éƒ¨åˆ†çº ç¼ åœ¨ä¸€èµ·ï¼Œå®¹æ˜“å¯¼è‡´ä»£ç å¤æ‚ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å¦ä¸€æ–¹é¢ï¼Œè°¨æ…åœ°ä½¿ç”¨å…¨å±€å˜é‡åˆèƒ½æ›´å¥½åœ°è¡¨è¾¾ç¨‹åºä¸­çœŸæ­£çš„å…¨å±€æ¦‚å¿µï¼›æ­¤å¤–ï¼Œè™½ç„¶å…¨å±€å¸¸é‡çœ‹ä¼¼æ— å®³ï¼Œä½†åƒLuaè¯­è¨€è¿™æ ·çš„åŠ¨æ€è¯­è¨€æ˜¯æ— æ³•åŒºåˆ†å¸¸é‡å’Œå˜é‡çš„ã€‚åƒLuaè¿™æ ·çš„åµŒå…¥å¼è¯­è¨€æ›´å¤æ‚ï¼šè™½ç„¶å…¨å±€å˜é‡æ—¶å†æ•´ä¸ªç¨‹åºä¸­å‡å¯è§çš„å˜é‡ï¼Œä½†ç”±äºLuaè¯­è¨€æ˜¯ç”±å®¿ä¸»åº”ç”¨è°ƒç”¨ä»£ç æ®µçš„ï¼Œå› æ­¤â€œç¨‹åºâ€çš„æ¦‚å¿µä¸æ˜ç¡®ã€‚<br>Luaè¯­è¨€é€šè¿‡ä¸ä½¿ç”¨å…¨å±€å˜é‡çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªéš¾é¢˜ï¼Œä½†åˆä¸é—ä½™åŠ›åœ°åœ¨Luaè¯­è¨€æ±‡æ€»å¯¹å…¨å±€å˜é‡è¿›è¡Œæ¨¡æ‹Ÿã€‚åœ¨ç¬¬ä¸€ç§è¿‘ä¼¼çš„æ¨¡æ‹Ÿä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºLuaè¯­è¨€æŠŠæ‰€æœ‰çš„å…¨å±€å˜é‡ä¿å­˜åœ¨ä¸€ä¸ªç§°ä¸ºå…¨å±€ç¯å¢ƒçš„æ™®é€šè¡¨ä¸­ã€‚<br>ç”±äºä¸éœ€è¦å†ä¸ºå…¨å±€å˜é‡åˆ›é€ ä¸€ç§æ–°çš„æ•°æ®ç»“æ„ï¼Œå› æ­¤ä½¿ç”¨ä¸€ä¸ªè¡¨æ¥ä¿å­˜å…¨å±€å˜é‡çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯ç®€åŒ–äº†Lua è¯­è¨€çš„å†…éƒ¨å®ç°ã€‚å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œå¯ä»¥åƒæ“ä½œå…¶ä»–è¡¨ä¸€æ ·æ“ä½œè¿™ä¸ªè¡¨ã€‚ä¸ºäº†ä¾¿äºå®ç°è¿™ç§æ“ä½œæ–¹å¼ï¼ŒLuaè¯­è¨€å°†å…¨å±€ç¯å¢ƒè‡ªèº«ä¿å­˜åœ¨å…¨å±€å˜é‡_Gä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹ä»£ç è¾“å‡ºäº†å…¨å±€ç¯å¢ƒä¸­æ‰€æœ‰å…¨å±€å˜é‡çš„åç§°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">pairs</span>(<span class="built_in">_G</span>) <span class="keyword">do</span> <span class="built_in">print</span>(n) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="å…·æœ‰åŠ¨æ€åç§°çš„å…¨å±€å˜é‡"><a href="#å…·æœ‰åŠ¨æ€åç§°çš„å…¨å±€å˜é‡" class="headerlink" title="å…·æœ‰åŠ¨æ€åç§°çš„å…¨å±€å˜é‡"></a>å…·æœ‰åŠ¨æ€åç§°çš„å…¨å±€å˜é‡</h2><p>é€šå¸¸ï¼Œèµ‹å€¼æ“ä½œå¯¹äºè®¿é—®å’Œè®¾ç½®å…¨å±€å˜é‡å·²ç»è¶³å¤Ÿäº†ã€‚<br>é€šå¸¸ï¼Œèµ‹å€¼æ“ä½œå¯¹äºè®¿é—®å’Œè®¾ç½®å…¨å±€å˜é‡å·²ç»è¶³å¤Ÿäº†ã€‚ç„¶è€Œï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦æŸäº›å½¢å¼çš„å…ƒå˜æˆã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬éœ€è¦æ“ä½œä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œè¿™ä¸ªå…¨å±€å˜é‡çš„åç§°å´å­˜å‚¨åœ¨å¦ä¸€ä¸ªå˜é‡ä¸­æˆ–è€…ç»ç”±è¿è¡Œæ—¶è®¡ç®—å¾—åˆ°ã€‚ä¸ºäº†è·å–è¿™ä¸ªå˜é‡çš„å€¼ï¼Œè®¸å¤šç¨‹åºå‘˜ä¼šå†™å‡ºä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">value = <span class="built_in">load</span>(<span class="string">&quot;return &quot;</span> .. varname)()</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼Œå¦‚æœvarnameæ˜¯xï¼Œé‚£ä¹ˆå­—ç¬¦ä¸²è¿æ¥çš„ç»“æœå°±æ˜¯â€return xâ€ï¼Œå½“æ‰§è¡Œæ—¶å°±èƒ½å¾—åˆ°æœŸæœ›çš„ç»“æœã€‚ç„¶è€Œï¼Œåœ¨è¿™æ®µä»£ç ä¸­æ¶‰åŠä¸€ä¸ªæ–°ä»£ç æ®µçš„åˆ›å»ºå’Œç¼–è¯‘ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¼€é”€æ˜‚è´µã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç æ¥å®ç°ç›¸åŒçš„æ•ˆæœï¼Œä½†æ•ˆç‡å´æ¯”ä¹‹å‰çš„é«˜å‡ºä¸€ä¸ªæ•°é‡çº§ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">value  = <span class="built_in">_G</span>[varname]</span><br></pre></td></tr></table></figure>
<p>ç”±äºå…¨å±€ç¯å¢ƒæ˜¯ä¸€ä¸ªæ™®é€šçš„è¡¨ï¼Œå› æ­¤å¯ä»¥ç®€å•åœ°ä½¿ç”¨ä¸ªå¯¹åº”çš„é”®ç›´æ¥è¿›è¡Œç´¢å¼•ã€‚<br>ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–å†™_G[varname] &#x3D; valueç»™ä¸€ä¸ªåç§°ä¸ºåŠ¨æ€è®¡ç®—å‡ºçš„å…¨å±€å˜é‡èµ‹å€¼ã€‚ä¸è¿‡ï¼Œè¯·æ³¨æ„ï¼Œæœ‰äº›ç¨‹åºå‘˜å¯¹äºè¿™ç§æœºåˆ¶çš„ä½¿ç”¨å¯èƒ½æœ‰äº›è¿‡åº¦è€Œå†™å‡ºè¯¸å¦‚_G[â€œaâ€] &#x3D; _G[â€œbâ€]è¿™æ ·çš„ä»£ç ï¼Œè€Œè¿™ä»…ä»…æ˜¯a &#x3D; b çš„ä¸€ç§å¤æ‚å†™æ³•ã€‚<br>ä¸Šè¿°é—®é¢˜çš„ä¸€èˆ¬åŒ–å½¢å¼æ˜¯ï¼Œå…è®¸å­—æ®µä½¿ç”¨è¯¸å¦‚â€io.readâ€æˆ–â€a.b.c.dâ€è¿™æ ·çš„åŠ¨æ€åç§°ã€‚å¦‚æœç›´æ¥ä½¿ç”¨_G[â€œio.readâ€]ï¼Œæ˜¾ç„¶æ˜¯ä¸èƒ½ä»è¡¨ioä¸­å¾—åˆ°å­—æ®µreadçš„ã€‚ä½†æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªå‡½æ•°getfieldè®©getfield(â€œio.readâ€)è¿”å›æƒ³è¦çš„ç»“æœã€‚è¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œä»_Gå¼€å§‹é€ä¸ªå­—æ®µåœ°è¿›è¡Œæ±‚å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getfield</span><span class="params">(f)</span></span></span><br><span class="line">	<span class="keyword">local</span> v = <span class="built_in">_G</span></span><br><span class="line">	<span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(f,<span class="string">&quot;[%a_][%w_]*&quot;</span>) <span class="keyword">do</span></span><br><span class="line">		v = v[w]</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> v</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä½¿ç”¨å‡½æ•°gmatchæ¥éå†fä¸­çš„æ‰€æœ‰æ ‡è¯†ç¬¦ã€‚<br>ä¸ä¹‹å¯¹åº”çš„è®¾ç½®å­—æ®µçš„å‡½æ•°ç¨æ˜¾å¤æ‚ã€‚åƒa.b.c.d &#x3D; vè¿™æ ·çš„èµ‹å€¼ç­‰ä»·äºä¸€ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> temp = a.b.c</span><br><span class="line">temp.d = v</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¿…é¡»ä¸€ç›´å–åˆ°æœ€åä¸€ä¸ªåç§°ï¼Œç„¶åå†å•ç‹¬å¤„ç†æœ€åçš„è¿™ä¸ªåç§°ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ å‡½æ•°setfield</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setfield</span><span class="params">(f,v)</span></span></span><br><span class="line">	<span class="keyword">local</span> t = <span class="built_in">_G</span></span><br><span class="line">	<span class="keyword">for</span> w, d <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(f, <span class="string">&quot;([%a_][%w_]*)(%.?)&quot;</span>) <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">if</span> d == <span class="string">&quot;.&quot;</span> <span class="keyword">then</span></span><br><span class="line">			t[w] = t[w] <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">			t = t[w]</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			t[w] = v</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šä¾‹ä¸­ä½¿ç”¨çš„æ¨¡å¼å°†æ•è·å­—æ®µåç§°ä¿å­˜åœ¨å˜é‡wä¸­ï¼Œå¹¶å°†å…¶åå¯é€‰çš„ç‚¹ä¿å­˜åœ¨å˜é‡dä¸­ã€‚å¦‚æœå­—æ®µååæ²¡æœ‰ç‚¹ï¼Œé‚£ä¹ˆè¯¥å­—æ®µå°±æ˜¯æœ€åä¸€ä¸ªåç§°ã€‚<br>ä¸‹é¢çš„ä»£ç é€šè¿‡ä¸Šä¾‹ä¸­çš„å‡½æ•°åˆ›å»ºäº†å…¨å±€è¡¨tå’Œt.xï¼Œå¹¶å°†10èµ‹å€¼ç»™äº†t.x.y:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">setfield(<span class="string">&quot;t.x.y&quot;</span>, <span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(t.x.y)</span><br><span class="line"><span class="built_in">print</span>(getfield(<span class="string">&quot;t.x.y&quot;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="å…¨å±€å˜é‡çš„å£°æ˜"><a href="#å…¨å±€å˜é‡çš„å£°æ˜" class="headerlink" title="å…¨å±€å˜é‡çš„å£°æ˜"></a>å…¨å±€å˜é‡çš„å£°æ˜</h2><p>Luaè¯­è¨€ä¸­çš„å…¨å±€å˜é‡ä¸éœ€è¦å£°æ˜å°±å¯ä»¥ä½¿ç”¨ã€‚è™½ç„¶è¿™ç§è¡Œä¸ºå¯¹äºå°å‹ç¨‹åºæ¥è¯´è¾ƒä¸ºæ–¹ä¾¿ï¼Œä½†åœ¨å¤§å‹ç¨‹åºä¸­ä¸€ä¸ªç®€å•çš„æ‰‹è¯¯å¯èƒ½é€ æˆéš¾ä»¥å‘ç°çš„bugã€‚ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬ä¹æ„çš„è¯ï¼Œä¹Ÿå¯ä»¥æ”¹å˜è¿™ç§è¡Œä¸ºã€‚ç”±äºLuaè¯­è¨€å°†å…¨å±€å˜é‡å­˜æ”¾åœ¨ä¸€ä¸ªæ™®é€šçš„è¡¨ä¸­ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡å…ƒè¡¨æ¥è®¿é—®ä¸å­˜åœ¨å…¨å±€å˜é‡çš„æƒ…å†µã€‚<br>ä¸€ç§æ–¹æ³•æ˜¯ç®€å•åœ°æ£€æµ‹æ‰€æœ‰å¯¹å…¨å±€è¡¨ä¸­ä¸å­˜åœ¨é”®çš„è®¿é—®ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setmetatable</span>(<span class="built_in">_G</span>,&#123;</span><br><span class="line">	<span class="built_in">__newindex</span> = funciton (_,n)</span><br><span class="line">	<span class="built_in">error</span>(<span class="string">&quot;attempt to write to undeclared variable&quot;</span> .. n, <span class="number">2</span>)</span><br><span class="line"><span class="keyword">end</span>,</span><br><span class="line"><span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span><span class="params">(_,n)</span></span></span><br><span class="line">	<span class="built_in">error</span>(<span class="string">&quot;attempt to read undeclared variable &quot;</span> .. n , <span class="number">2</span>)</span><br><span class="line"><span class="keyword">end</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç æ‰§è¡Œåï¼Œæ‰€æœ‰è¯•å›¾å¯¹ä¸å­˜åœ¨å…¨å±€å˜é‡çš„è®¿é—®éƒ½å°†å¼•å‘ä¸€ä¸ªé”™è¯¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">stdin</span>:<span class="number">1</span>:attempt to <span class="built_in">read</span> undeclared variable a </span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å£°æ˜ä¸€ä¸ªæ–°çš„å˜é‡å‘¢ï¼Ÿæ–¹æ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨å‡½æ•°rawset,å®ƒå¯ä»¥ç»•è¿‡å…ƒæ–¹æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">declare</span> <span class="params">(name initval)</span></span></span><br><span class="line">	<span class="built_in">rawset</span>(<span class="built_in">_G</span>,name,initval <span class="keyword">or</span> <span class="literal">false</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œor å’Œfalseä¿è¯æ–°å˜é‡ä¸€å®šä¼šå¾—åˆ°ä¸€ä¸ªä¸ä¸ºnilçš„å€¼ã€‚<br>å¦å¤–ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•æ˜¯æŠŠå¯¹æ–°å…¨å±€å˜é‡çš„èµ‹å€¼é™åˆ¶åœ¨ä»…èƒ½åœ¨å‡½æ•°å†…è¿›è¡Œï¼Œè€Œä»£ç æ®µå¤–å±‚çš„ä»£ç åˆ™è¢«å…è®¸è‡ªæœ‰èµ‹å€¼ã€‚<br>è¦æ£€æŸ¥èµ‹å€¼æ˜¯å¦åœ¨ä¸»ä»£ç æ®µä¸­å¿…é¡»ç”¨åˆ°è°ƒè¯•åº“ã€‚è°ƒç”¨å‡½æ•°debug.getinfo(2,â€Sâ€)å°†è¿”å›ä¸€ä¸ªè¡¨ã€‚å…¶ä¸­çš„å­—æ®µwhatè¡¨ç¤ºè°ƒç”¨å…ƒæ–¹æ³•çš„å‡½æ•°æ˜¯ä¸»ä»£ç æ®µè¿˜æ˜¯æ™®é€šçš„Luaå‡½æ•°è¿˜æ˜¯Cå‡½æ•°ã€‚ä½¿ç”¨è¯¥å‡½æ•°ï¼Œå¯ä»¥å°†__newindexå…ƒæ–¹æ³•é‡å†™ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">__newindex</span> = funciton (t,n,v)</span><br><span class="line">	<span class="keyword">local</span> w = <span class="built_in">debug</span>.<span class="built_in">getinfo</span>(<span class="number">2</span>,<span class="string">&quot;S&quot;</span>).wath</span><br><span class="line">	<span class="keyword">if</span> w ~= <span class="string">&quot;main&quot;</span> <span class="keyword">and</span> w ~= <span class="string">&quot;C&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">error</span> (<span class="string">&quot;attempt to write to undeclared variable&quot;</span> .. n , <span class="number">2</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	rewset(t,n,v)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–°ç‰ˆæœ¬è¿˜å¯ä»¥æ¥å—æ¥è‡ªCä»£ç çš„èµ‹å€¼ï¼Œå› ä¸ºä¸€èˆ¬Cä»£ç éƒ½çŸ¥é“è‡ªå·±ç©¶ç«Ÿåœ¨åšä»€ä¹ˆã€‚<br>å¦‚æœè¦æµ‹è¯•ä¸€ä¸ªå˜é‡æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸èƒ½ç®€å•åœ°å°†å®ƒä¸nilæ¯”è¾ƒã€‚å› ä¸ºå¦‚æœå®ƒä¸ºnilï¼Œé‚£ä¹ˆè®¿é—®å°±å›å¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚è¿™æ˜¯ï¼Œåº”è¯¥ä½¿ç”¨rawgetæ¥ç»•è¿‡å…ƒæ–¹æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">rawset</span>(<span class="built_in">_G</span>, var) == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">	...</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚å‰é¢æ‰€æåˆ°çš„ï¼Œæˆ‘ä»¬ä¸å…è®¸å€¼ä¸ºnilçš„å…¨å±€å˜é‡ï¼Œå› ä¸ºå€¼ä¸ºnilçš„å…¨å±€å˜é‡éƒ½ä¼šè¢«è‡ªåŠ¨åœ°è®¤ä¸ºæœªå£°æ˜ã€‚ä½†æ˜¯ï¼Œè¦å…è®¸å€¼ä¸ºnilçš„å…¨å±€å˜é‡ä¹Ÿä¸éš¾ï¼Œåªéœ€è¦å¼•å…¥ä¸€ä¸ªè¾…åŠ©è¡¨æ¥ä¿å­˜å·²å£°æ˜å˜é‡çš„åç§°å³å¯ã€‚ä¸€æ—¦è°ƒç”¨äº†å…ƒæ–¹æ³•ï¼Œå…ƒæ–¹æ³•å°±ä¼šæ£€æŸ¥è¯¥è¡¨ï¼Œçœ‹å˜é‡æ˜¯å¦æ˜¯æœªå£°æ˜è¿‡çš„ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ æ£€æŸ¥å…¨å±€å˜é‡çš„å£°æ˜</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> declareNames = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setmetatable</span>(<span class="built_in">_G</span>,&#123;</span><br><span class="line">	<span class="built_in">__newindex</span> = funciton(t,n,v)</span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">not</span> declareNames[n] <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">local</span> w = <span class="built_in">debug</span>.<span class="built_in">getinfo</span>(<span class="number">2</span>,<span class="string">&quot;S&quot;</span>).wath </span><br><span class="line">		<span class="keyword">if</span> w ~= <span class="string">&quot;main&quot;</span> <span class="keyword">and</span> w ~= <span class="string">&quot;C&quot;</span> <span class="keyword">then</span></span><br><span class="line">			<span class="built_in">error</span>(<span class="string">&quot;attempt to write to undeclared variable &quot;</span> .. n, <span class="number">2</span>)</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">		declareNames[n] = <span class="literal">true</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="built_in">rawset</span>(t,n,v)</span><br><span class="line"><span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line"><span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span> <span class="params">(_,v)</span></span></span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">not</span> declareNames[n] <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;attempt to read undeclared variable &quot;</span> .. n , <span class="number">2</span>)</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œå³ä½¿åƒ x &#x3D; nilè¿™æ ·çš„èµ‹å€¼ä¹Ÿèƒ½å¤Ÿå£°æ˜å…¨å±€å˜é‡äº†ã€‚<br>ä¸Šè¿°ä¸¤ç§æ–¹æ³•æ‰€å¯¼è‡´çš„å¼€é”€éƒ½åŸºæœ¬å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚åœ¨ç¬¬ä¸€ç§æ–¹æ³•ä¸­ï¼Œåœ¨æ™®é€šæ“ä½œæœŸé—´å…ƒæ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ã€‚åœ¨ç¬¬äºŒç§æ–¹æ³•ä¸­ï¼Œå…ƒæ–¹æ³•åªæœ‰å½“ç¨‹åºè®¿é—®ä¸€ä¸ªå€¼ä¸ºnilçš„å˜é‡æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚</p>
<h2 id="éå…¨å±€ç¯å¢ƒ"><a href="#éå…¨å±€ç¯å¢ƒ" class="headerlink" title="éå…¨å±€ç¯å¢ƒ"></a>éå…¨å±€ç¯å¢ƒ</h2><p>åœ¨Luaè¯­è¨€ä¸­ï¼Œå…¨å±€å˜é‡å¹¶ä¸€å®šéå¾—æ˜¯çœŸæ­£å…¨å±€çš„ã€‚æ­£å¦‚ç¬”è€…æ­¤å‰æ‰€æåˆ°çš„ï¼ŒLuaè¯­è¨€ç”šè‡³æ ¹æœ¬æ²¡æœ‰å…¨å±€å˜é‡ã€‚Luaè¯­è¨€ç«­å°½å…¨åŠ›åœ°è®©ç¨‹åºå‘˜æœ‰å…¨å±€å˜é‡å­˜åœ¨çš„å¹»è§‰ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹Luaè¯­è¨€æ˜¯å¦‚ä½•æ„å»ºè¿™ç§å¹»è§‰çš„ã€‚<br>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å¿˜æ‰å…¨å±€å˜é‡è€Œä»è‡ªç”±åç§°çš„æ¦‚å¿µå¼€å§‹è®¨è®ºã€‚ä¸€ä¸ªè‡ªç”±åç§°æ˜¯æŒ‡æ²¡æœ‰å…³è”åˆ°æ˜¾ç¤ºå£°æ˜ä¸Šçš„åç§°ï¼Œå³å®ƒä¸å‡ºç°åœ¨å¯¹åº”å±€éƒ¨å˜é‡çš„èŒƒå›´å†…ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç æ®µä¸­ï¼Œxå’Œyæ˜¯è‡ªç”±åç§°ï¼Œè€Œzä¸æ˜¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> z = <span class="number">10</span></span><br><span class="line">x = y + z</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å°±åˆ°äº†å…³é”®çš„éƒ¨åˆ†ï¼šLuaè¯­è¨€ç¼–è¯‘å™¨å°†ä»£ç æ®µä¸­çš„æ‰€æœ‰è‡ªç”±åç§°xè½¬æ¢ä¸º_ENV.xã€‚å› æ­¤ï¼Œæ­¤å‰çš„ä»£ç æ®µå®Œå…¨ç­‰ä»·äºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> z = <span class="number">10</span></span><br><span class="line"><span class="built_in">_ENV</span>.x = <span class="built_in">_ENV</span>.y + z</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿™é‡Œæ–°å‡ºç°çš„_ENVå˜é‡åˆç©¶ç«Ÿæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬åˆšæ‰è¯´è¿‡ï¼ŒLuaè¯­è¨€ä¸­æ²¡æœ‰å…¨å±€å˜é‡ã€‚å› æ­¤ï¼Œ_ENVä¸å¯èƒ½æ˜¯å…¨å±€å˜é‡ã€‚åœ¨è¿™é‡Œï¼Œç¼–è¯‘å™¨å®é™…ä¸Šåˆè¿›è¡Œäº†ä¸€æ¬¡å·§å¦™çš„å·¥ä½œã€‚ç¬”è€…å·²ç»æåˆ°è¿‡ï¼ŒLuaè¯­è¨€åŒ…æ‰€æœ‰ä»£ç æ®µéƒ½å½“åšåŒ¿åå‡½æ•°ã€‚æ‰€ä»¥ï¼ŒLuaè¯­è¨€ç¼–è¯‘å™¨å®é™…ä¸Šå°†åŸæ¥çš„ä»£ç æ®µç¼–è¯‘ä¸ºå¦‚ä¸‹å½¢å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">_ENV</span> = some value</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(...)</span></span></span><br><span class="line">	<span class="keyword">local</span> z = <span class="number">10</span></span><br><span class="line">	<span class="built_in">_ENV</span>.x = <span class="built_in">_ENV</span>.y + z</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒLuaè¯­è¨€æ˜¯åœ¨ä¸€ä¸ªåä¸º_ENVçš„é¢„å®šä¹‰ä¸Šå€¼ï¼ˆä¸€ä¸ªå¤–éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œupvalueï¼‰å­˜åœ¨çš„æƒ…å†µä¸‹ç¼–è¯‘æ‰€æœ‰çš„ä»£ç æ®µçš„ã€‚å› æ­¤ï¼Œæ‰€æœ‰çš„å˜é‡è¦ä¹ˆæ˜¯ç»‘å®šåˆ°äº†ä¸€ä¸ªåç§°çš„å±€éƒ¨å˜é‡ï¼Œè¦ä¹ˆæ˜¯_ENVä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œè€Œ_ENVæœ¬èº«æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚<br>_ENVçš„åˆå§‹å€¼å¯ä»¥æ˜¯ä»»æ„çš„è¡¨ã€‚ä»»ä½•ä¸€ä¸ªè¿™æ ·çš„è¡¨éƒ½è¢«ç§°ä¸ºä¸€ä¸ªç¯å¢ƒã€‚ä¸ºäº†ç»´æŒå…¨å±€å˜é‡å­˜åœ¨çš„å¹»è§‰ï¼ŒLuaè¯­è¨€åœ¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªè¡¨æ¥ç”¨ä½œå…¨å±€å˜é‡ã€‚é€šè¿‡ï¼Œå½“åŠ è½½ä¸€ä¸ªä»£ç æ®µæ—¶ï¼Œå‡½æ•°loadä¼šä½¿ç”¨é¢„å®šä¹‰ä¸Šçš„å€¼æ¥åˆå§‹åŒ–å…¨å±€ç¯å¢ƒã€‚å› æ­¤ï¼ŒåŸå§‹çš„ä»£ç æ®µç­‰ä»·äºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">_ENV</span> = the global environment</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(...)</span></span></span><br><span class="line">	<span class="keyword">local</span> z = <span class="number">10</span></span><br><span class="line">	<span class="built_in">_ENV</span>.x = <span class="built_in">_ENV</span>.y + z</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°èµ‹å€¼çš„ç»“æœæ˜¯ï¼Œå…¨å±€ç¯å¢ƒä¸­çš„å­—æ®µxå¾—åˆ°å…¨å±€ç¯å¢ƒä¸­å­—æ®µyåŠ 10çš„ç»“æœã€‚<br>ä¹ä¸€çœ‹ï¼Œè¿™å¯èƒ½åƒæ˜¯æ“ä½œå…¨å±€å˜é‡çš„ä¸€ç§ç›¸å½“æ‹å¼¯æŠ¹è§’çš„æ–¹å¼ã€‚ç¬”è€…ä¹Ÿä¸ä¼šå»äº‰è¾©è¯´è¿™æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œä½†æ˜¯ï¼Œè¿™ç§æ–¹å¼æ¯”é‚£äº›æ›´ç®€å•çš„å®ç°æ–¹æ³•å…·æœ‰æ›´å¤šçš„çµæ´»æ€§ã€‚<br>åœ¨ç»§ç»­å­¦ä¹ å‰ï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹Luaè¯­è¨€ä¸­å¤„ç†å…¨å±€å˜é‡çš„æ–¹å¼ï¼š</p>
<ul>
<li>ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ‰€æœ‰ä»£ç æ®µå‰ï¼Œåœ¨å¤–å±‚åˆ›å»ºå±€éƒ¨å˜é‡_ENVï¼›</li>
<li>ç¼–è¯‘å™¨å°†æ‰€æœ‰è‡ªç”±åç§°varå˜æ¢ä¸º_ENV.varï¼›</li>
<li>å‡½æ•°loadä½¿ç”¨å…¨å±€ç¯å¢ƒåˆå§‹åŒ–ä»£ç æ®µçš„ç¬¬ä¸€ä¸ªä¸Šå€¼ï¼Œå³Luaè¯­è¨€å†…éƒ¨ç»´æŠ¤çš„ä¸€ä¸ªæ™®é€šçš„è¡¨ã€‚<br>å®é™…ä¸Šï¼Œè¿™ä¹Ÿä¸æ˜¯å¤ªå¤æ‚ã€‚<br>æœ‰äº›äººç”±äºè¯•å›¾ä»è¿™äº›è§„åˆ™ä¸­å¼•ç”³å‡ºé¢å¤–çš„â€œé­”æ³•â€è€Œæ„Ÿåˆ°å›°æƒ‘ï¼›å…¶å®ï¼Œè¿™äº›è§„åˆ™å¹¶æ²¡æœ‰é¢å¤–çš„å«ä¹‰ã€‚å°¤å…¶æ˜¯ï¼Œå‰ä¸¤æ¡è§„åˆ™å®Œå…¨æ˜¯ç”±ç¼–è¯‘å™¨è¿›è¡Œçš„ã€‚é™¤äº†æ˜¯ç”±ç¼–è¯‘å™¨é¢„å®šçš„ï¼Œ_ENVåªæ˜¯ä¸€ä¸ªå•çº¯çš„æ™®é€šå˜é‡ã€‚æŠ›å¼€ç¼–è¯‘å™¨ï¼Œåç§°_ENVå¯¹äºLuaè¯­è¨€æ¥è¯´æ ¹æœ¬æ²¡æœ‰ç‰¹æ®Šå«ä¹‰ã€‚ç±»ä¼¼åœ°ï¼Œä»xåˆ°_ENV.xçš„è½¬æ¢æ—¶çº¯ç²¹çš„è¯­æ³•è½¬æ¢ï¼Œæ²¡æœ‰éšè—çš„å«ä¹‰ã€‚å°¤å…¶æ˜¯ï¼Œåœ¨è½¬æ¢åï¼ŒæŒ‰ç…§æ ‡å‡†çš„å¯è§æ€§è§„åˆ™ï¼Œ_ENVå¼•ç”¨çš„æ˜¯æ‰€åœ¨ä½ç½®æ‰€æœ‰å¯è§çš„é¢_ENVå˜é‡ã€‚</li>
</ul>
<h2 id="ä½¿ç”¨-ENV"><a href="#ä½¿ç”¨-ENV" class="headerlink" title="ä½¿ç”¨_ENV"></a>ä½¿ç”¨_ENV</h2><p>ç”±äº_ENVåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å˜é‡ï¼Œå› æ­¤å¯ä»¥å¯¹å…¶èµ‹å€¼æˆ–åƒè®¿é—®å…¶ä»–å˜é‡ä¸€æ ·è®¿é—®å®ƒã€‚èµ‹å€¼è¯­å¥_ENV &#x3D; nilä¼šä½¿å¾—åç»­ä»£ç ä¸èƒ½ç›´æ¥è®¿é—®å…¨å±€å˜é‡ã€‚è¿™å¯ä»¥èµ¢æ¥æ§åˆ¶ä»£ç ä½¿ç”¨å“ªç§å˜é‡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">print</span>, <span class="built_in">sin</span> = <span class="built_in">print</span>,<span class="built_in">math</span>.<span class="built_in">sin</span></span><br><span class="line"><span class="built_in">_ENV</span> = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">13</span>) 		<span class="comment">-- 13</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sin</span>(<span class="number">13</span>))  <span class="comment">-- 0.42016703682664</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">cos</span>(<span class="number">13</span>))  <span class="comment">-- error</span></span><br></pre></td></tr></table></figure>
<p>ä»»ä½•å¯¹è‡ªç”±åç§°çš„èµ‹å€¼éƒ½ä¼šå¼•å‘ç±»ä¼¼çš„é”™è¯¯ã€‚<br>æˆ‘ä»¬å¯ä»¥æ˜¾å¼åœ°ä½¿ç”¨_ENVæ¥ç»•è¿‡å±€éƒ¨å£°æ˜ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="number">13</span>     <span class="comment">-- å…¨å±€çš„</span></span><br><span class="line"><span class="keyword">local</span> a = <span class="number">12</span> </span><br><span class="line"><span class="built_in">print</span>(a)		<span class="comment">-- 12(å±€éƒ¨çš„)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">_ENV</span>.a)   <span class="comment">-- 13(å…¨å±€çš„)</span></span><br></pre></td></tr></table></figure>
<p>ç”¨_Gä¹Ÿå¯ä»¥ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="number">13</span>    <span class="comment">-- å…¨å±€çš„</span></span><br><span class="line"><span class="keyword">local</span> a = <span class="number">12</span> </span><br><span class="line"><span class="built_in">print</span>(a)   <span class="comment">-- 12 å±€éƒ¨çš„</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">_G</span>.a) <span class="comment">-- 13 å±€éƒ¨çš„</span></span><br></pre></td></tr></table></figure>
<p>é€šå¸¸ï¼Œ_Gå’Œ_ENVæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªè¡¨ã€‚ä½†æ˜¯ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå®ƒä»¬æ˜¯å¾ˆä¸ä¸€æ ·çš„å®ä½“ã€‚_ENVæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæ‰€æœ‰å¯¹â€œå…¨å±€å˜é‡â€çš„è®¿é—®å®é™…ä¸Šè®¿é—®çš„éƒ½æ˜¯_ENVã€‚_Gåˆ™æ˜¯ä¸€ä¸ªåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½æ²¡æœ‰ä»»ä½•ç‰¹æ®ŠçŠ¶æ€çš„å…¨å±€å˜é‡ã€‚æŒ‰ç…§å®šä¹‰ï¼Œ_ENVæ°¸è¿œæŒ‡å‘çš„æ˜¯å½“å‰çš„ç¯å¢ƒï¼›è€Œå‡è®¾åœ¨å¯è§ä¸”æ— äººæ”¹å˜è¿‡å…¶å€¼çš„å‰æä¸‹ï¼Œ_Gé€šå¸¸æŒ‡å‘çš„æ˜¯å…¨å±€å˜é‡ã€‚<br>_ENVçš„ä¸»è¦ç”¨é€”æ˜¯ç”¨æ¥æ”¹å˜ä»£ç æ®µä½¿ç”¨çš„ç¯å¢ƒã€‚ä¸€æ—¦æ”¹å˜äº†ç¯å¢ƒï¼Œæ‰€æœ‰çš„å…¨å±€è®¿é—®å°±éƒ½å°†ä½¿ç”¨æ–°è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--å°†å½“å‰çš„ç¯å¢ƒæ”¹ä¸ºä¸€ä¸ªæ–°çš„ç©ºè¡¨</span></span><br><span class="line"><span class="built_in">_ENV</span> = &#123;&#125;</span><br><span class="line">a = <span class="number">1</span>	<span class="comment">-- åœ¨_ENVä¸­åˆ›å»ºå­—æ®µ</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment">-- stdin:4:attempt to call global &#x27;print&#x27; (a nil value)</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ–°ç¯å¢ƒæ˜¯ç©ºçš„ï¼Œå°±ä¼šä¸¢å¤±æ‰€æœ‰çš„å…¨å±€å˜é‡ï¼ŒåŒ…æ‹¬å‡½æ•°printã€‚å› æ­¤ï¼Œåº”è¯¥é¦–å…ˆæŠŠä¸€äº›æœ‰ç”¨çš„å€¼æ”¾å…¥æ–°ç¯å¢ƒï¼Œæ¯”å¦‚å…¨å±€ç¯å¢ƒï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="number">15</span>		<span class="comment">-- åˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡</span></span><br><span class="line"><span class="built_in">_ENV</span> = &#123;g = <span class="built_in">_G</span>&#125;		<span class="comment">-- æ”¹å˜å½“å‰ç¯å¢ƒ</span></span><br><span class="line">a = <span class="number">1</span>		<span class="comment">-- åœ¨_ENVä¸­åˆ›å»ºå­—æ®µ</span></span><br><span class="line">g.<span class="built_in">print</span>(<span class="built_in">_ENV</span>.a,g.a)		<span class="comment">-- 1, 15</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œå½“è®¿é—®â€œå…¨å±€â€çš„gï¼ˆä½äº_ENVè€Œä¸æ˜¯å…¨å±€ç¯å¢ƒä¸­ï¼‰æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å…¨å±€ç¯å¢ƒï¼Œåœ¨å…¶ä¸­èƒ½å¤Ÿæ‰¾åˆ°å‡½æ•°printã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨_Gä»£æ›¿gï¼Œä»è€Œé‡å†™å‰é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="number">15</span>					<span class="comment">-- åˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡</span></span><br><span class="line"><span class="built_in">_ENV</span> = &#123;<span class="built_in">_G</span> = <span class="built_in">_G</span>&#125;		<span class="comment">-- æ”¹å˜çš„å½“å‰ç¯å¢ƒ</span></span><br><span class="line">a = <span class="number">1</span>					<span class="comment">-- åœ¨_ENVä¸­åˆ›å»ºå­—æ®µ</span></span><br><span class="line"><span class="built_in">_G</span>.<span class="built_in">print</span>(<span class="built_in">_ENV</span>.a,_g.a)	<span class="comment">-- 1	15</span></span><br></pre></td></tr></table></figure>
<p>_Gåªæœ‰åœ¨Luaè¯­è¨€åˆ›å»ºåˆå§‹åŒ–çš„å…¨å±€è¡¨å¹¶è®©å­—æ®µ_GæŒ‡å‘å®ƒè‡ªå·±çš„æ—¶å€™ï¼Œæ‰ä¼šå‡ºç°ç‰¹æ®ŠçŠ¶æ€ã€‚Luaè¯­è¨€å¹¶ä¸å…³å¿ƒè¯¥å˜é‡çš„å½“å‰å€¼ã€‚ä¸è¿‡å°½ç®¡å¦‚æ­¤ï¼Œå°±åƒæˆ‘ä»¬åœ¨ä¸Šé¢é‡å†™çš„ç¤ºä¾‹ä¸­æ‰€çœ‹åˆ°çš„é‚£æ ·ï¼Œå°†æŒ‡å‘å…¨å±€ç¯å¢ƒçš„å˜é‡å‘½åä¸ºåŒä¸€ä¸ªåå­—(_G)æ˜¯ä¸€ä¸ªæƒ¯ä¾‹ã€‚<br>å¦ä¸€ç§æŠŠæ—§ç¯å¢ƒè£…å…¥æ–°ç¯å¢ƒçš„æ–¹å¼æ˜¯ä½¿ç”¨ç»§æ‰¿ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line"><span class="keyword">local</span> newgt = &#123;&#125;		<span class="comment">-- åˆ›å»ºæ–°ç¯å¢ƒ</span></span><br><span class="line"><span class="built_in">setmetatable</span>(newgt,&#123;<span class="built_in">__index</span> = <span class="built_in">_G</span>&#125;)</span><br><span class="line"><span class="built_in">_ENV</span> = newgt			<span class="comment">-- è®¾ç½®æ–°ç¯å¢ƒ</span></span><br><span class="line"><span class="built_in">print</span>(a)		<span class="comment">--1 </span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæ–°ç¯å¢ƒä»å…¨å±€ç¯å¢ƒä¸­ç»§æ‰¿äº†å‡½æ•°printå’Œaã€‚ä¸è¿‡ï¼Œä»»ä½•èµ‹å€¼éƒ½ä¼šå‘ç”Ÿåœ¨æ–°è¡¨ä¸­ï¼Œè™½ç„¶æˆ‘ä»¬ä»ç„¶èƒ½é€šè¿‡_Gæ¥ä¿®æ”¹å…¨å±€ç¯å¢ƒä¸­çš„å˜é‡ï¼Œä½†å¦‚æœè¯¯æ”¹å…¨å±€ç¯å¢ƒä¸­çš„å˜é‡ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå½±å“ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ¥æ­¤å‰çš„ä»£ç </span></span><br><span class="line">a = <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(a,<span class="built_in">_G</span>.a)			<span class="comment">-- 10 	1</span></span><br><span class="line"><span class="built_in">_G</span>.a  = <span class="number">20</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">_G</span>.a)				<span class="comment">-- 20</span></span><br></pre></td></tr></table></figure>
<p>ä½œä¸ºä¸€ä¸ªæ™®é€šçš„å˜é‡ï¼Œ_ENVéµå¾ªé€šå¸¸çš„å®šç•Œè§„åˆ™ã€‚ç‰¹åˆ«åœ°ï¼Œåœ¨ä¸€æ®µä»£ç ä¸­å®šä¹‰çš„å‡½æ•°å¯ä»¥æŒ‰ç…§è®¿é—®å…¶ä»–å¤–éƒ¨å˜é‡ä¸€æ ·çš„è§„åˆ™è®¿é—®_ENV:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">_ENV</span> = &#123;<span class="built_in">_G</span> = <span class="built_in">_G</span>&#125;</span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line">	<span class="built_in">_G</span>.<span class="built_in">print</span>(a)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">a = <span class="number">10</span></span><br><span class="line">foo()			<span class="comment">-- 10</span></span><br><span class="line"><span class="built_in">_ENV</span> = &#123;<span class="built_in">_G</span> = <span class="built_in">_G</span>, a = <span class="number">20</span>&#125;</span><br><span class="line">foo()		<span class="comment">-- 20</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå®šä¹‰ä¸€ä¸ªåä¸º_ENVçš„å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆå¯¹è‡ªç”±åç§°çš„å¼•ç”¨å°†ä¼šç»‘å®šç»‘å®šåˆ°è¿™ä¸ªæ–°å˜é‡ä¸Šï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="number">2</span></span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">	<span class="keyword">local</span> <span class="built_in">_ENV</span> - &#123;<span class="built_in">print</span> = <span class="built_in">print</span>,a = <span class="number">14</span>&#125;</span><br><span class="line">	<span class="built_in">print</span>(a)			<span class="comment">-- 14</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(a)			<span class="comment">-- 2</span></span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œï¼Œå¯ä»¥è·Ÿå¾ˆå®¹æ˜“åœ°ä½¿ç”¨ç§æœ‰ç¯å¢ƒå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factory</span><span class="params">(_ENV)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span></span> <span class="keyword">return</span> a <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">f1 = factory&#123;a = <span class="number">6</span>&#125;</span><br><span class="line">f2 = factory&#123;a = <span class="number">7</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(f1())			<span class="comment">-- 6</span></span><br><span class="line"><span class="built_in">print</span>(f2())			<span class="comment">-- 7</span></span><br></pre></td></tr></table></figure>
<p>factoryå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„é—­åŒ…ï¼Œè¿™ä¸ªé—­åŒ…è¿”å›äº†å…¶ä¸­â€œå…¨å±€â€çš„aã€‚æ¯å½“é—­åŒ…è¢«åˆ›å»ºæ—¶ï¼Œé—­åŒ…å¯è§çš„å˜é‡_ENVå°±æˆäº†å¤–éƒ¨factoryå‡½æ•°çš„å‚æ•°_ENVã€‚å› æ­¤ï¼Œæ¯ä¸ªé—­åŒ…éƒ½ä¼šä½¿ç”¨è‡ªå·±çš„å¤–éƒ¨å˜é‡æ¥è®¿é—®å…¶è‡ªç”±åç§°ã€‚<br>ä½¿ç”¨æ™®éçš„å®šç•Œè§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰å‡ ç§æ–¹å¼æ“ä½œç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è®©å¤šä¸ªå‡½æ•°å…±äº«ä¸€ä¸ªå…¬å…±ç¯å¢ƒï¼Œæˆ–è€…è®©ä¸€ä¸ªå‡½æ•°æ”¹å˜å®ƒä¸å…¶ä»–å‡½æ•°å…±äº«çš„ç¯å¢ƒã€‚</p>
<h2 id="ç¯å¢ƒå’Œæ¨¡å—"><a href="#ç¯å¢ƒå’Œæ¨¡å—" class="headerlink" title="ç¯å¢ƒå’Œæ¨¡å—"></a>ç¯å¢ƒå’Œæ¨¡å—</h2><p>æ¨¡å—çš„ç¼ºç‚¹ä¹‹ä¸€åœ¨äºå¾ˆå®¹æ˜“æ±¡æŸ“å…¨å±€ç©ºé—´ï¼Œä¾‹å¦‚åœ¨ç§æœ‰å£°æ˜ä¸­å¿˜è®°localå…³é”®å­—ã€‚ç¯å¢ƒä¸ºè§£å†³è¿™ä¸ªé—®é¢˜æä¾›äº†ä¸€ç§æœ‰è¶£çš„æ–¹å¼ã€‚ä¸€æ—¦æ¨¡å—çš„ä¸»ç¨‹åºæœ‰ä¸€ä¸ªç‹¬å çš„ç¯å¢ƒï¼Œåˆ™ä¸ä»…è¯¥æ¨¡å—æ‰€æœ‰çš„å‡½æ•°å…±äº«äº†è¿™ä¸ªç¯å¢ƒï¼Œè¯¥æ¨¡å—çš„å…¨å±€å˜é‡ä¹Ÿè¿›å…¥åˆ°äº†è¿™ä¸ªç¯å¢ƒä¸­ã€‚æˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„å…¬æœ‰å‡½æ•°å£°æ˜ä¸ºå…¨å±€å˜é‡ï¼Œè¿™æ ·å®ƒä»¬å°±ä¼šè‡ªåŠ¨åœ°è¿›å…¥åˆ†å¼€çš„ç¯å¢ƒä¸­ã€‚æ¨¡å—ç´¢è¦åšçš„å°±æ˜¯å°†è¿™ä¸ªç¯å¢ƒèµ‹å€¼ç»™å˜é‡_ENVã€‚ä¹‹åï¼Œå½“æˆ‘ä»¬å£°æ˜å‡½æ•°addæ—¶ï¼Œå®ƒä¼šå˜æˆM.add:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> M = &#123;&#125;</span><br><span class="line"><span class="built_in">_ENV</span> = M</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(c1,c2)</span></span></span><br><span class="line">	<span class="keyword">return</span> new(c1.r + c2.r, c1.i + c2.i)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨åŒä¸€æ¨¡å—ä¸­çš„å…¶ä»–å‡½æ•°æ—¶ä¸éœ€è¦ä»»ä½•å‰ç¼€ã€‚åœ¨æ­¤å‰çš„ä»£ç ä¸­ï¼Œaddä¼šä»å…¶ç¯å¢ƒä¸­å¾—åˆ°newï¼Œä¹Ÿå°±æ˜¯M.newã€‚<br>è¿™ç§æ–¹æ³•ä¸ºæ¨¡å—æä¾›äº†ä¸€ç§è‰¯å¥½çš„æ”¯æŒï¼Œåªéœ€è¦ç¨‹åºå‘˜å¤šåšä¸€ç‚¹é¢å¤–çš„å·¥ä½œã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå®Œå…¨ä¸éœ€è¦å‰ç¼€ï¼Œå¹¶ä¸”è°ƒç”¨ä¸€ä¸ªå¯¼å‡ºçš„å‡½æ•°ä¸è°ƒç”¨ä¸€ä¸ªç§æœ‰å‡½æ•°æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚å³ä½¿ç¨‹åºå‘˜å¿˜è®°äº†localå…³é”®è¯ï¼Œä¹Ÿä¸ä¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚ç›¸åï¼Œä»–åªæ˜¯è®©ä¸€ä¸ªç§æœ‰å‡½æ•°ç¼–ç¨‹äº†å…¬æœ‰å‡½æ•°è€Œå·²ã€‚<br>ä¸è¿‡å°½ç®¡å¦‚æ­¤ï¼Œç¬”è€…ç›®å‰è¿˜æ˜¯å€¾å‘äºä½¿ç”¨åŸå§‹çš„åŸºæœ¬æ–¹æ³•ï¼Œä¹Ÿè®¸åŸå§‹çš„åŸºæœ¬æ–¹æ³•éœ€è¦æ›´å¤šçš„å·¥ä½œï¼Œä½†ä»£ç ä¼šæ›´åŠ æ¸…æ™°ã€‚ä¸ºäº†é¿å…é”™è¯¯åœ°åˆ›å»ºå…¨å±€å˜é‡ï¼Œç¬”è€…ä½¿ç”¨æŠŠnilèµ‹ç»™_ENVçš„æ–¹å¼ã€‚åœ¨æŠŠ_ENVè®¾ä¸ºnilåï¼Œä»»ä½•å¯¹å…¨å±€å˜é‡çš„å¤åˆ¶éƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è¿™ç§æ–¹å¼çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯æ— é¡»ä¿®æ”¹ä»£ç ä¹Ÿå¯ä»¥åœ¨è€ç‰ˆæœ¬çš„Luaè¯­è¨€ä¸­è¿è¡Œã€‚<br>ä¸ºäº†è®¿é—®å…¶ä»–æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥å£°æ˜ä¸€ä¸ªä¿å­˜å…¨å±€ç¯å¢ƒçš„å±€éƒ¨å˜é‡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> M = &#123;&#125;</span><br><span class="line"><span class="keyword">local</span> <span class="built_in">_G</span> = <span class="built_in">_G</span></span><br><span class="line"><span class="built_in">_ENV</span> = <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨å…¨å±€åç§°å‰åŠ ä¸Š_Gå’Œæ¨¡å—åMå³å¯ã€‚<br>å¦ä¸€ç§æ›´è§„èŒƒçš„è®¿é—®å…¶ä»–æ¨¡å—çš„åšæ³•æ˜¯åªæŠŠéœ€è¦çš„å‡½æ•°æˆ–æ¨¡å—å£°æ˜ä¸ºå±€éƒ¨å˜é‡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ¨¡å—åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">local</span> M = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¯¼å…¥éƒ¨åˆ†ï¼š</span></span><br><span class="line"><span class="comment">-- å£°æ˜è¯¥æ¨¡å—éœ€è¦çš„å¤–éƒ¨å‡½æ•°æˆ–æ¨¡å—ç­‰</span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">sqrt</span> = <span class="built_in">math</span>.<span class="built_in">sqrt</span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">io</span> = <span class="built_in">io</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä»æ­¤ä»¥åä¸èƒ½å†è¿›è¡Œå¤–éƒ¨è®¿é—®</span></span><br><span class="line"><span class="built_in">_ENV</span> = <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼éœ€è¦åšæ›´å¤šçš„å·¥ä½œï¼Œä½†æ˜¯å®ƒèƒ½æ¸…æ™°åœ°åˆ—å‡ºæ¨¡å—çš„ä¾èµ–ã€‚</p>
<h2 id="ENV-å’Œload"><a href="#ENV-å’Œload" class="headerlink" title="_ENV å’Œload"></a>_ENV å’Œload</h2><p>æ­£å¦‚ç¬”è€…æ­¤å‰æåˆ°çš„ï¼Œå‡½æ•°loadé€šå¸¸æŠŠè¢«åŠ è½½ä»£ç æ®µä¸Šçš„å€¼_ENVåˆå§‹åŒ–ä¸ºå…¨å±€ç¯å¢ƒã€‚ä¸è¿‡ï¼Œå‡½æ•°loadè¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„ç¬¬å››ä¸ªå‚æ•°æ¥è®©æˆ‘ä»¬ä¸º_ENVæŒ‡å®šä¸€ä¸ªä¸åŒçš„åˆå§‹å€¼ã€‚<br>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå…¸å‹çš„é…ç½®æ–‡ä»¶ï¼Œè¯¥é…ç½®æ–‡ä»¶å®šä¹‰äº†ç¨‹åºè¦ä½¿ç”¨çš„å‡ ä¸ªå¸¸é‡å’Œå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ–‡ä»¶&#x27;config.lua&#x27;</span></span><br><span class="line">width = <span class="number">200</span></span><br><span class="line">height = <span class="number">300</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç åŠ è½½è¯¥æ–‡ä»¶ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">env = &#123;&#125;</span><br><span class="line"><span class="built_in">loadfile</span>(<span class="string">&quot;config.lua&quot;</span>,<span class="string">&quot;t&quot;</span>,env)()</span><br></pre></td></tr></table></figure>
<p>é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰ä»£ç ä¼šè¿è¡Œåœ¨ç©ºçš„ç¯å¢ƒenvä¸­ï¼Œç±»ä¼¼äºæŸç§æ²™ç›’ã€‚ç‰¹åˆ«åœ°ï¼Œæ‰€æœ‰çš„å®šä¹‰éƒ½ä¼šè¿›å…¥è¿™ä¸ªç¯å¢ƒä¸­ã€‚å³ä½¿å‡ºé”™ï¼Œé…ç½®æ–‡ä»¶ä¹Ÿæ— æ³•å½±å“ä»»ä½•åˆ«çš„ä¸œè¥¿ï¼Œç”šè‡³æ˜¯æ¶æ„çš„ä»£ç ä¹Ÿä¸èƒ½å¯¹å…¶ä»–ä¸œè¥¿é€ æˆä»»ä½•ç ´åã€‚é™¤äº†é€šè¿‡æ¶ˆè€—CPUæ—¶é—´å’Œå†…å­˜æ¥åˆ¶é€ æ‹’ç»æœåŠ¡æ”»å‡»ï¼Œæ¶æ„ä»£ç ä¹Ÿåšä¸äº†ä»€ä¹ˆå…¶ä»–çš„äº‹ã€‚<br>æœ‰æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³é‡å¤è¿è¡Œä¸€æ®µä»£ç æ•°æ¬¡ï¼Œæ¯ä¸€æ¬¡ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„ç¯å¢ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°loadå¯é€‰çš„å‚æ•°å°±æ²¡ç”¨äº†ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬æœ‰å¦å¤–ä¸¤ç§é€‰æ‹©ã€‚<br>ç¬¬ä¸€ç§é€‰æ‹©æ˜¯ä½¿ç”¨è°ƒè¯•åº“ä¸­çš„å‡½æ•°debug.setupvalueã€‚é¡¾åæ€ä¹‰ï¼Œå‡½æ•°setupvalueå…è®¸æ”¹å˜ä»»ä½•æŒ‡å®šå‡½æ•°çš„ä¸Šå€¼ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">load</span>(<span class="string">&quot;b = 10; return a&quot;</span>)</span><br><span class="line">env = &#123;a = <span class="number">20</span>&#125;</span><br><span class="line"><span class="built_in">debug</span>.<span class="built_in">setupvalue</span>(f,<span class="number">1</span>,env)</span><br><span class="line"><span class="built_in">print</span>(f())			<span class="comment">-- 20</span></span><br><span class="line"><span class="built_in">print</span>(env.b)		<span class="comment">-- 10</span></span><br></pre></td></tr></table></figure>
<p>setupvalueçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å®šçš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸Šå€¼çš„ç´¢å¼•ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ–°çš„ä¸Šå€¼ã€‚å¯¹äºè¿™ç§ç”¨æ³•ï¼Œç¬¬äºŒä¸ªå‚æ•°æ°¸è¿œæ˜¯1ï¼šå½“å‡½æ•°è¡¨ç¤ºçš„æ˜¯ä¸€æ®µä»£ç æ—¶ï¼ŒLuaè¯­è¨€å¯ä»¥ä¿è¯å®ƒåªæœ‰ä¸€ä¸ªä¸Šå€¼ä¸”ä¸Šå€¼å°±æ˜¯_ENVã€‚<br>è¿™ç§æ–¹å¼çš„ä¸€ä¸ªå°ç¼ºç‚¹åœ¨äºä¾èµ–è°ƒè¯•åº“ã€‚è°ƒè¯•åº“æ‰“ç ´äº†æœ‰å…³ç¨‹åºçš„ä¸€äº›å¸¸è§å‡è®¾ã€‚ä¾‹å¦‚ï¼Œdebug.setupvalueæ‰“ç ´äº†Luaè¯­è¨€çš„å¯è§æ€§è§„åˆ™ï¼Œè€Œå¯è§æ€§è§„åˆ™å¯ä»¥ä¿è¯æˆ‘ä»¬ä¸èƒ½ä»è¯æ³•å®šç•Œçš„èŒƒå›´å¤–è®¿é—®å±€éƒ¨å˜é‡ã€‚<br>å¦ä¸€ç§åœ¨å‡ ä¸ªä¸åŒç¯å¢ƒä¸­è¿è¡Œä»£ç æ®µçš„æ–¹å¼æ˜¯æ¯æ¬¡åŠ è½½ä»£ç æ—¶ç¨å¾®å¯¹å…¶è¿›è¡Œä¸€ä¸‹ä¿®æ”¹ã€‚å‡è®¾æˆ‘ä»¬åœ¨è¦åŠ è½½çš„ä»£ç æ®µé’±åŠ å…¥ä¸€è¡Œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">_ENV</span> = ...;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œç”±äºLuaè¯­è¨€æŠŠæ‰€æœ‰çš„ä»£ç æ®µéƒ½å½“åšå¯å˜é•¿å‚æ•°å‡½æ•°è¿›è¡Œç¼–è¯‘ï¼Œå› æ­¤ï¼Œå¤šå‡ºçš„è¿™ä¸€è¡Œä»£ç ä¼šæŠŠä¼ ç»™ä»£ç æ®µçš„ç¬¬ä¸€ä¸ªå‚æ•°èµ‹å€¼_ENVï¼Œä»è€ŒæŠŠå‚æ•°è®¾ä¸ºç¯å¢ƒã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">prefix = <span class="string">&quot;_ENV = ...;&quot;</span></span><br><span class="line">f = loadwithprefix(prefix,<span class="built_in">io</span>.<span class="built_in">lines</span>(filename,<span class="string">&quot;*L&quot;</span>))</span><br><span class="line">...</span><br><span class="line">env1 = &#123;&#125;</span><br><span class="line">f(env1)</span><br><span class="line">env2 = &#123;&#125;</span><br><span class="line">f(env2)</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaä¸­æ¨¡å—å’ŒåŒ…</title>
    <url>/15834.html</url>
    <content><![CDATA[<p>é€šå¸¸ï¼ŒLuaè¯­è¨€ä¸ä¼šè®¾ç½®è§„åˆ™ã€‚ç›¸åï¼ŒLuaè¯­è¨€æä¾›çš„æ˜¯è¶³å¤Ÿå¼ºå¤§çš„æœºåˆ¶ä¾›ä¸åŒçš„å¼€å‘è€…å®ç°æœ€é€‚åˆè‡ªå·±çš„è§„åˆ™ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å¯¹äºæ¨¡å—è€Œè¨€å¹¶ä¸æ˜¯ç‰¹åˆ«é€‚ç”¨ã€‚æ¨¡å—ç³»ç»Ÿçš„ä¸»è¦ç›®æ ‡ä¹‹ä¸€å°±æ˜¯å…è®¸ä¸åŒçš„äººå…±äº«ä»£ç ï¼Œç¼ºä¹å…¬å…±è§„åˆ™å°±æ— æ³•å®ç°è¿™æ ·çš„åˆ†äº«ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Luaè¯­è¨€ä»5.1ç‰ˆæœ¬å¼€å§‹ä¸ºæ¨¡å—å’ŒåŒ…å®šä¹‰äº†ä¸€ç³»åˆ—çš„è§„åˆ™ã€‚è¿™äº›è§„åˆ™ä¸éœ€è¦ä»è¯­è¨€ä¸­å¼•å…¥é¢å¤–çš„åŠŸèƒ½ï¼Œç¨‹åºçŒ¿å¯ä»¥ä½¿ç”¨ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å­¦ä¹ åˆ°çš„æœºåˆ¶å®ç°è¿™äº›è§„åˆ™ã€‚ç¨‹åºå‘˜ä¹Ÿå¯ä»¥è‡ªç”±åœ°ä½¿ç”¨ä¸åŒçš„ç­–ç•¥ã€‚å½“ç„¶ï¼Œä¸åŒçš„å®ç°å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºä¸èƒ½ä½¿ç”¨å¤–éƒ¨æ¨¡å—ï¼Œæˆ–è€…æ¨¡å—ä¸èƒ½è¢«å¤–éƒ¨ç¨‹åºä½¿ç”¨ã€‚<br>ä»ç”¨æˆ·è§‚ç‚¹æ¥çœ‹ï¼Œä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€äº›ä»£ç ï¼Œè¿™äº›ä»£ç å¯ä»¥é€šè¿‡å‡½æ•°requireåŠ è½½ï¼Œç„¶ååˆ›å»ºå’Œè¿”å›ä¸€ä¸ªè¡¨ã€‚è¿™ä¸ªè¡¨å°±åƒæ˜¯æŸç§å‘½åç©ºé—´ï¼Œå…¶ä¸­å®šä¹‰çš„å†…å®¹æ˜¯æ¨¡å—ä¸­å¯¼å‡ºçš„ä¸œè¥¿ï¼Œæ¯”å¦‚å‡½æ•°å’Œå¸¸é‡ã€‚<br>ä¾‹å¦‚ï¼Œæ‰€æœ‰çš„æ ‡å‡†åº“éƒ½æ˜¯æ¨¡å—ã€‚æˆ‘ä»¬å¯ä»¥æŒ‰ç…§å¦‚ä¸‹çš„æ–¹å¼ä½¿ç”¨æ•°å­¦åº“ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> m = <span class="built_in">require</span> <span class="string">&quot;math&quot;</span></span><br><span class="line"><span class="built_in">print</span>(m.<span class="built_in">sin</span>(<span class="number">3.14</span>))				<span class="comment">-- 0.0015926529164868</span></span><br></pre></td></tr></table></figure>
<p>ç‹¬ç«‹è§£é‡Šå™¨ä¼šä½¿ç”¨è·Ÿå¦‚ä¸‹ä»£ç ç­‰ä»·çš„æ–¹å¼æå‰åŠ è½½æ‰€æœ‰æ ‡å‡†åº“ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">math</span> = <span class="built_in">require</span> <span class="string">&quot;math&quot;</span></span><br><span class="line"><span class="built_in">string</span> = <span class="built_in">require</span> <span class="string">&quot;string&quot;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§æå‰åŠ è½½ä½¿å¾—æˆ‘ä»¬å¯ä»¥ä¸ç”¨è´¹åŠ²åœ°ç¼–å†™ä»£ç æ¥åŠ è½½æ¨¡å—mathå°±å¯ä»¥ç›´æ¥ä½¿ç”¨å‡½æ•°math.sinã€‚<br>ä½¿ç”¨è¡¨æ¥å®ç°æ¨¡å—çš„æ˜¾è‘—ä¼˜ç‚¹ä¹‹ä¸€æ˜¯ï¼Œè®©æˆ‘ä»¬å¯ä»¥åƒæ“ä½œæ™®é€šè¡¨é‚£æ ·æ“ä½œæ¨¡å—ï¼Œå¹¶ä¸”èƒ½åˆ©ç”¨Luaè¯­è¨€çš„æ‰€æœ‰åŠŸèƒ½å®ç°é¢å¤–çš„åŠŸèƒ½ã€‚åœ¨å¤§å¤šæ•°è¯­è¨€ä¸­ï¼Œæ¨¡å—ä¸æ˜¯ç¬¬ä¸€ç±»å€¼ï¼ˆå³å®ƒä»¬ä¸èƒ½è¢«ä¿å­˜åœ¨å˜é‡ä¸­ï¼Œä¹Ÿä¸èƒ½è¢«å½“ä½œå‚æ•°ä¼ é€’ç»™å‡½æ•°ç­‰ï¼‰ï¼Œæ‰€ä»¥é‚£äº›è¯­è¨€éœ€è¦ä¸ºæ¨¡å—å®ç°ä¸€å¥—ä¸“é—¨çš„æœºåˆ¶ã€‚è€Œåœ¨Luaè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬åˆ™å¯ä»¥è½»æ˜“åœ°å®ç°è¿™äº›åŠŸèƒ½ã€‚<br>ä¾‹å¦‚ï¼Œç”¨æˆ·è°ƒç”¨æ¨¡å—ä¸­çš„å‡½æ•°å°±æœ‰å‡ ç§æ–¹æ³•ã€‚å…¶ä¸­å¸¸è§çš„æ–¹æ³•æ˜¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">mod</span> = <span class="built_in">require</span> <span class="string">&quot;mod&quot;</span></span><br><span class="line"><span class="built_in">mod</span>.foo()</span><br></pre></td></tr></table></figure>
<p>ç”¨æˆ·å¯ä»¥ä¸ºæ¨¡å—è®¾ç½®ä¸€ä¸ªå±€éƒ¨åç§°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> m = <span class="built_in">require</span> <span class="string">&quot;mod&quot;</span></span><br><span class="line">m.foo()</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä¸ºä¸ªåˆ«å‡½æ•°æä¾›ä¸åŒçš„åç§°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> m = <span class="built_in">require</span> <span class="string">&quot;mod&quot;</span></span><br><span class="line"><span class="keyword">local</span> f = m.foo</span><br><span class="line">f()</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥åªå¼•å…¥ç‰¹å®šçš„å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> f = <span class="built_in">require</span> <span class="string">&quot;mod&quot;</span>.foo 			<span class="comment">-- (require(&quot;mod&quot;)).foo</span></span><br><span class="line">f()</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°è¿™äº›æ–¹æ³•çš„å¥½å¤„æ˜¯æ— é¡»è¯­è¨€çš„ç‰¹åˆ«æ”¯æŒï¼Œå®ƒä»¬ä½¿ç”¨çš„éƒ½æ˜¯è¯­è¨€å·²ç»æä¾›çš„åŠŸèƒ½ã€‚</p>
<h2 id="å‡½æ•°-require"><a href="#å‡½æ•°-require" class="headerlink" title="å‡½æ•° require"></a>å‡½æ•° require</h2><p>å°½ç®¡å‡½æ•°requireä¹Ÿåªæ˜¯ä¸€ä¸ªæ²¡ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„çš„æ™®é€šå‡½æ•°ï¼Œä½†åœ¨Luaè¯­è¨€çš„æ¨¡å—å®ç°ä¸­æ‰®æ¼”è€…æ ¸å¿ƒè§’è‰²ã€‚è¦åŠ è½½æ¨¡å—æ—¶ï¼Œåªéœ€è¦ç®€å•åœ°è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œç„¶åä¼ å…¥æ¨¡å—ä½œä¸ºå‚æ•°ã€‚è¯·è®°ä½ï¼Œå½“å‡½æ•°çš„å‚æ•°åªæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡æ—¶æ‹¬å·æ˜¯å¯ä»¥çœç•¥çš„ï¼Œè€Œä¸”ä¸€èˆ¬åœ¨ä½¿ç”¨requireæ—¶æŒ‰ç…§æƒ¯ä¾‹ä¹Ÿä¼šçœæ‹¬å·ã€‚ä¸è¿‡å°½ç®¡å¦‚æ­¤ï¼Œä¸‹é¢è¿™äº›ç”¨æ³•ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> m = <span class="built_in">require</span>(<span class="string">&#x27;math&#x27;</span>)</span><br><span class="line"><span class="keyword">local</span> modname = <span class="string">&#x27;math&#x27;</span></span><br><span class="line"><span class="keyword">local</span> m = <span class="built_in">require</span>(modname)</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°requireå°è¯•å¯¹æ¨¡å—çš„å®šä¹‰åšæœ€å°çš„å‡è®¾ã€‚å¯¹äºå‡½æ•°æ¥è¯´ï¼Œä¸€ä¸ªæ¨¡å—å¯ä»¥æ˜¯å®šä¹‰äº†ä¸€äº›å˜é‡çš„ä»£ç ã€‚å…¸å‹åœ°ï¼Œè¿™äº›ä»£ç è¿”å›ä¸€ä¸ªç”±æ¨¡å—ä¸­å‡½æ•°ç»„æˆçš„è¡¨ã€‚ä¸è¿‡ï¼Œç”±äºè¿™ä¸ªåŠ¨ä½œæ˜¯ç”±æ¨¡å—ä»£ç è€Œä¸æ˜¯ç”±å‡½æ•°requireå®Œæˆçš„ï¼Œæ‰€ä»¥æŸäº›æ¨¡å—å¯èƒ½ä¼šé€‰æ‹©è¿”å›å…¶ä»–çš„å€¼æˆ–è€…ç”šè‡³å¼•å‘å‰¯ä½œç”¨ã€‚<br>é¦–å…ˆï¼Œå‡½æ•°requireåœ¨è¡¨package.loadedä¸­æ£€æŸ¥æ¨¡å—æ˜¯å¦å·²è¢«åŠ è½½ã€‚å¦‚æœæ¨¡å—å·²ç»è¢«åŠ è½½ï¼Œå‡½æ•°requireå°±è¿”å›ç›¸åº”çš„å€¼ã€‚å› æ­¤ï¼Œä¸€æ—¦ä¸€ä¸ªæ¨¡å—è¢«åŠ è½½è¿‡ï¼Œåç»­çš„å¯¹äºåŒä¸€æ¨¡å—çš„æ‰€æœ‰requireè°ƒç”¨éƒ½å°†è¿”å›åŒä¸€ä¸ªå€¼ï¼Œè€Œä¸ä¼šå†è¿è¡Œä»»ä½•ä»£ç ã€‚<br>å¦‚æœæ¨¡å—å°šæœªåŠ è½½ï¼Œé‚£ä¹ˆå‡½æ•°requireåˆ™æœç´¢å…·æœ‰æŒ‡å®šæ¨¡å—åçš„Luaæ–‡ä»¶ï¼ˆæœç´¢è·¯å¾„æœ‰å˜é‡package.pathæŒ‡å®šï¼‰ã€‚å¦‚æœå‡½æ•°requireæ‰¾åˆ°äº†ç›¸åº”çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ç”¨å‡½æ•°loadfileå°†å…¶è¿›è¡ŒåŠ è½½ï¼Œç»“æœæ˜¯ä¸€ä¸ªæˆ‘ä»¬ç§°ä¹‹ä¸ºåŠ è½½å™¨çš„å‡½æ•°ã€‚<br>å¦‚æœå‡½æ•°requireæ‰¾ä¸åˆ°æŒ‡å®šæ¨¡å—åçš„Luaæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±æœç´¢ç›¸åº”åç§°çš„Cæ ‡å‡†åº“ã€‚å¦‚æœæ‰¾åˆ°äº†ä¸€ä¸ªCæ ‡å‡†åº“ï¼Œåˆ™ä½¿ç”¨åº•å±‚å‡½æ•°package.loadlibè¿›è¡ŒåŠ è½½ï¼Œè¿™ä¸ªåº•å±‚å‡½æ•°ä¼šæŸ¥æ‰¾åä¸ºluaopen_modnameçš„å‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒåŠ è½½å‡½æ•°å°±æ˜¯loadlibçš„æ‰§è¡Œç»“æœï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè¢«è¡¨ç¤ºä¸ºLuaå‡½æ•°çš„Cè¯­è¨€å‡½æ•°luaopen_modnameã€‚<br>ä¸ç®¡æ¨¡å—æ˜¯Luaæ–‡ä»¶è¿˜æ˜¯Cæ ‡å‡†åº“ä¸­æ‰¾åˆ°çš„ï¼Œå‡½æ•°requireæ­¤æ—¶éƒ½å…·æœ‰äº†ç”¨äºåŠ è½½å®ƒçš„åŠ è½½å‡½æ•°ã€‚ä¸ºäº†æœ€ç»ˆåŠ è½½æ¨¡å—ï¼Œå‡½æ•°requireå¸¦ç€ä¸¤ä¸ªå‚æ•°è°ƒç”¨åŠ è½½å‡½æ•°ï¼šæ¨¡å—åå’ŒåŠ è½½å‡½æ•°æ‰€åœ¨æ–‡ä»¶åç§°ã€‚å¦‚æœåŠ è½½å‡½æ•°æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆå‡½æ•°requireä¼šè¿”å›è¿™ä¸ªå€¼ï¼Œç„¶åå°†å…¶ä¿å­˜åœ¨è¡¨package.loadedä¸­ï¼Œä»¥ä¾¿äºå°†æ¥åœ¨åŠ è½½åŒä¸€ä¸ªæ¨¡å—æ—¶è¿”å›ç›¸åŒçš„å€¼ã€‚å¦‚æœåŠ è½½å‡½æ•°ä¹ˆæœ‰è¿”å›å€¼ä¸”è¡¨ä¸­çš„package.loadedã€@rep{modname}]ä¸ºç©ºï¼Œå‡½æ•°requireå°±å‡è®¾æ¨¡å—çš„è¿”å›å€¼æ˜¯trueã€‚å¦‚æœæ²¡æœ‰è¿™ç§è¡¥å¿ï¼Œé‚£ä¹ˆåç»­è°ƒç”¨å‡½æ•°requireæ—¶å°†ä¼šé‡å¤åŠ è½½æ¨¡å—ã€‚<br>è¦å¼ºåˆ¶å‡½æ•°requireåŠ è½½åŒä¸€æ¨¡å—ä¸¤æ¬¡ï¼Œå¯ä»¥å…ˆå°†æ¨¡å—ä»package.loadedä¸­åˆ é™¤ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">package</span>.<span class="built_in">loaded</span>.modname = <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹ä¸€æ¬¡åœ¨åŠ è½½è¿™ä¸ªæ¨¡å—æ—¶ï¼Œå‡½æ•°requireå°±ä¼šé‡æ–°åŠ è½½æ¨¡å—ã€‚<br>å¯¹äºå‡½æ•°requireæ¥è¯´ï¼Œä¸€ä¸ªå¸¸è§çš„æŠ±æ€¨æ˜¯å®ƒä¸èƒ½ç»™å¾…åŠ è½½çš„æ¨¡å—ä¼ é€’å‚æ•°ã€‚ä¾‹å¦‚ï¼Œæ•°å­¦æ¨¡å—å¯ä»¥å¯¹è§’åº¦å’Œå¼§åº¦çš„é€‰æ‹©å¢åŠ ä¸€ä¸ªé€‰é¡¹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- é”™è¯¯çš„ä»£ç </span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">math</span> = <span class="built_in">require</span>(<span class="string">&quot;math&quot;</span>,<span class="string">&quot;degree&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„é—®é¢˜åœ¨äºï¼Œå‡½æ•°requireçš„ä¸»è¦ç›®çš„ä¹‹ä¸€å°±æ˜¯é¿å…é‡å¤åŠ è½½æ¨¡å—ï¼Œä¸€æ—¦ä¸€ä¸ªæ¨¡å—è¢«åŠ è½½ï¼Œè¯¥æ¨¡å—å°±ä¼šåœ¨åç»­æ‰€æœ‰è°ƒç”¨requireçš„ç¨‹åºéƒ¨åˆ†è¢«å¤ç”¨ã€‚è¿™æ ·ï¼Œä¸åŒå‚æ•°çš„åŒåæ¨¡å—ä¹‹é—´å°±ä¼šäº§ç”Ÿå†²çªã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">mod</span> = <span class="built_in">require</span> <span class="string">&quot;mod&quot;</span></span><br><span class="line"><span class="built_in">mod</span>.init(<span class="number">0</span>,<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåŠ è½½å‡½æ•°è¿”å›çš„æ˜¯æ¨¡å—æœ¬èº«ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥å†™æˆï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">mod</span> = <span class="built_in">require</span> <span class="string">&quot;mod&quot;</span>.init(<span class="number">0</span>,<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>è¯·è®°ä½ï¼Œæ¨¡å—åœ¨ä»»ä½•æƒ…å†µä¸‹åªåŠ è½½ä¸€æ¬¡ï¼›è‡³äºå¦‚ä½•å¤„ç†å†²çªçš„åŠ è½½ï¼Œå–å†³äºæ¨¡å—è‡ªå·±ã€‚</p>
<h3 id="æ¨¡å—é‡å‘½å"><a href="#æ¨¡å—é‡å‘½å" class="headerlink" title="æ¨¡å—é‡å‘½å"></a>æ¨¡å—é‡å‘½å</h3><p>é€šå¸¸ï¼Œæˆ‘ä»¬é€šè¿‡æ¨¡å—æœ¬æ¥çš„åç§°æ¥ä½¿ç”¨å®ƒä»¬ï¼Œä½†æœ‰æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å°†ä¸€ä¸ªæ¨¡å—æ”¹åä»¥é¿å…å‘½åå†²çªã€‚ä¸€ç‚¹å…¸å‹çš„æƒ…å†µå°±æ˜¯ï¼Œå¤„äºæµ‹è¯•çš„ç›®çš„è€Œéœ€è¦åŠ è½½åŒä¸€æ¨¡å—çš„ä¸åŒç‰ˆæœ¬ã€‚å¯¹äºä¸€ä¸ªLuaè¯­è¨€æ¨¡å—æ¥è¯´ï¼Œå…¶å†…éƒ¨çš„åç§°å¹¶ä¸è¦æ±‚æ˜¯å›ºå®šçš„ï¼Œå› æ­¤é€šå¸¸ä¿®æ”¹.luaæ–‡ä»¶çš„æ–‡ä»¶åå°±å¤Ÿäº†ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å´æ— æ³•ä¿®æ”¹Cæ ‡å‡†åº“çš„äºŒè¿›åˆ¶ç›®æ ‡ä»£ç ä¸­<code>luaopen_*</code>å‡½æ•°çš„åç§°ã€‚ä¸ºäº†è¿›è¡Œè¿™ç§é‡å‘½åï¼Œå‡½æ•°requireè¿ç”¨äº†ä¸€ä¸ªè¿å­—ç¬¦çš„æŠ€å·§ï¼šå¦‚æœä¸€ä¸ªæ¨¡å—åä¸­åŒ…å«è¿å­—ç¬¦ï¼Œé‚£ä¹ˆå‡½æ•°requireå°±ä¼šç”¨è¿å­—ç¬¦ä¹‹å‰çš„å†…å®¹åˆ›å»º<code>luaopen_*</code>å‡½æ•°çš„åç§°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å—çš„åç§°ä¸ºmod-v3.4ï¼Œé‚£ä¹ˆå‡½æ•°requireä¼šè®¤ä¸ºè¯¥æ¨¡å—çš„åŠ è½½å‡½æ•°åº”è¯¥æ˜¯<code>luaopen_mod</code>è€Œä¸æ˜¯luaopen_mod-v3.4ï¼ˆè¿™ä¹Ÿä¸æ˜¯æœ‰æ•ˆçš„Cè¯­è¨€å‡½æ•°åï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ä¸¤ä¸ªåç§°å‡ä¸ºmodçš„æ¨¡å—ï¼ˆæˆ–ç›¸åŒæ¨¡å—çš„ä¸¤ä¸ªä¸åŒç‰ˆæœ¬ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥å¯¹å…¶ä¸­çš„ä¸€ä¸ªè¿›è¡Œé‡å‘½åï¼Œå¦‚mod-v1.å½“è°ƒç”¨m1&#x3D;require â€œmod-v1â€æ—¶ï¼Œå‡½æ•°requireä¼šæ‰¾åˆ°æ”¹ååçš„æ–‡ä»¶mod-v1å¹¶å°†å…¶ä¸­åŸåä¸ºluaopen_modçš„å‡½æ•°ä½œä¸ºåŠ è½½å‡½æ•°ã€‚</p>
<h3 id="æœç´¢è·¯å¾„"><a href="#æœç´¢è·¯å¾„" class="headerlink" title="æœç´¢è·¯å¾„"></a>æœç´¢è·¯å¾„</h3><p>åœ¨æœç´¢ä¸€ä¸ªLuaæ–‡ä»¶æ—¶ï¼Œå‡½æ•°requireä½¿ç”¨çš„è·¯å¾„ä¸å…¸å‹çš„è·¯å¾„ç•¥æœ‰ä¸åŒã€‚å…¸å‹çš„è·¯å¾„æ˜¯å¾ˆå¤šç›®å½•ç»„æˆçš„åˆ—è¡¨ï¼Œå¹¶åœ¨å…¶ä¸­æœç´¢æŒ‡å®šçš„æ–‡ä»¶ã€‚ä¸è¿‡ï¼ŒIOS Cï¼ˆLuaè¯­è¨€ä¾èµ–çš„æŠ½è±¡å¹³å°ï¼‰å¹¶æ²¡æœ‰ç›®å½•çš„æ¦‚å¿µã€‚æ‰€ä»¥ï¼Œå‡½æ•°requireä½¿ç”¨çš„è·¯å¾„æ˜¯ä¸€ç»„æ¨¡å—ï¼Œå…¶ä¸­çš„æ¯é¡¹éƒ½æŒ‡å®šäº†è’‹æ¨¡å—å(å‡½æ•°requireçš„å‚æ•°)è½¬æ¢ä¸ºæ–‡ä»¶åçš„æ–¹å¼ã€‚æ›´å‡†ç¡®åœ°è¯´ï¼Œè¿™ç§è·¯å¾„ä¸­çš„æ¯ä¸€ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªåŒ…å«å¯é€‰é—®å·çš„æ–‡ä»¶åã€‚å¯¹äºæ¯ä¸ªæ¨¡æ¿ï¼Œå‡½æ•°requireä¼šç”¨æ¨¡å—åæ¥æ›¿æ¢æ¯ä¸€ä¸ªé—®å·ï¼Œç„¶åæ£€æŸ¥ç»“æœæ˜¯å¦å­˜åœ¨å¯¹åº”çš„æ–‡ä»¶ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å°è¯•ä¸‹ä¸€ä¸ªæ¨¡æ¿ã€‚è·¯å¾„ä¸­æ¨¡æ¿ä»¥åœ¨å¤§æ‰€è¿°æ“ä½œç³»ç»Ÿä¸­å¾ˆå°‘è¢«ç”¨äºæ–‡ä»¶åçš„åˆ†å·éš”å¼€ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹è·¯å¾„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">?;?.lua;c:\windows\?;/usr/<span class="keyword">local</span>/lua/?/?.lua</span><br></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨è¿™ä¸ªè·¯å¾„æ—¶ï¼Œè°ƒç”¨require â€œsqlâ€å°†å°è¯•æ‰“å¼€å¦‚ä¸‹çš„Luaæ–‡ä»¶ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">sql</span><br><span class="line">sql.lua</span><br><span class="line">c:\windows\sql</span><br><span class="line">/usr/<span class="keyword">local</span>/lua/sql/sql.lua</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°requireåªå¤„ç†åˆ†å·ï¼ˆä½œä¸ºåˆ†éš”å·ï¼‰å’Œé—®å·ï¼Œæ‰€æœ‰å…¶ä»–çš„éƒ¨åˆ†ï¼ˆåŒ…æ‹¬ç›®å½•åˆ†éš”ç¬¦åˆæ–‡ä»¶æ‰©å±•åï¼‰åˆ™ç”±è·¯å¾„è‡ªæœ‰å®šä¹‰ã€‚<br>å‡½æ•°requireç”¨äºæœç´¢Luaæ–‡ä»¶çš„è·¯å¾„æ˜¯å˜é‡package.pathçš„å½“å‰å€¼ã€‚å½“packageæ¨¡å—è¢«åˆå§‹åŒ–åï¼Œå®ƒå°±æŠŠå˜é‡package.pathè®¾ç½®æˆç¯å¢ƒå˜é‡LUA_PATH_5_3çš„å€¼ã€‚å¦‚æœè¿™ä¸ªç¯å¢ƒå˜é‡æ²¡æœ‰è¢«å®šä¹‰ï¼Œé‚£ä¹ˆLuaè¯­è¨€åˆ™å°è¯•å¦ä¸€ä¸ªç¯å¢ƒå˜é‡LUA_PATHã€‚å¦‚æœè¿™ä¸¤ä¸ªç¯å¢ƒå˜é‡éƒ½æ²¡æœ‰è¢«å®šä¹‰ï¼Œé‚£ä¹ˆLuaè¯­è¨€åˆ™ä½¿ç”¨ä¸€ä¸ªç¼–è¯‘æ˜¯å®šä¹‰çš„é»˜è®¤è·¯å¾„ã€‚åœ¨ä½¿ç”¨ä¸€ä¸ªç¯å¢ƒå˜é‡çš„å€¼æ—¶ï¼ŒLuaè¯­è¨€ä¼šå°†å…¶ä¸­æ‰€æœ‰çš„â€;;â€æ›¿æ¢æˆé»˜è®¤è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœLUA_PATH_5_3è®¾ä¸ºâ€mydir&#x2F;r.lua;;â€,é‚£ä¹ˆæœ€ç»ˆè·¯å¾„å°±ä¼šæ˜¯æ¨¡æ¿â€mydir&#x2F;?.luaâ€åè·Ÿé»˜è®¤è·¯å¾„ã€‚<br>æœç´¢Cæ ‡å‡†åº“çš„è·¯å¾„çš„é€»è¾‘ä¸æ­¤ç›¸åŒï¼Œåªä¸è¿‡Cæ ‡å‡†åº“çš„è·¯å¾„æ¥è‡ªå˜é‡package.cpathè€Œä¸æ˜¯package.pathã€‚ç±»ä¼¼åœ°ï¼Œè¿™ä¸ªå˜é‡çš„åˆå§‹å€¼ä¹Ÿæ¥è‡ªç¯å¢ƒå˜é‡LUA_CPATH_5_3æˆ–LUA_CPATHã€‚åœ¨POSIXç³»ç»Ÿä¸­è¿™ä¸ªè·¯å¾„çš„å…¸å‹å€¼å½¢å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">./?.so;/usr/<span class="keyword">local</span>/lib/lua/<span class="number">5.2</span>/?.so</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„å®šä¹‰æ–‡ä»¶æ‰©å±•åçš„è·¯å¾„ã€‚åœ¨ä¸Šä¾‹ä¸­ï¼Œæ‰€æœ‰æ¨¡å—ä½¿ç”¨çš„éƒ½æ˜¯.soï¼Œè€Œåœ¨Windowsæ“ä½œç³»ç»Ÿä¸­æ­¤å…¸å‹è·¯å¾„é€šå¸¸å½¢å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">.\&gt;.dll;C:\Program Files\Lua502\dll\?.dll</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°package.searchpathä¸­å®ç°äº†æœç´¢åº“çš„æ‰€æœ‰è§„åˆ™ï¼Œè¯¥å‡½æ•°çš„å‚æ•°åŒ…æ‹¬æ¨¡å—åå’Œè·¯å¾„ï¼Œç„¶åéµå¾ªä¸Šè¿°è§„åˆ™æ¥æœç´¢æ–‡ä»¶ã€‚å‡½æ•°package.searchpathè¦ä¹ˆè¿”å›ç¬¬ä¸€ä¸ªå­˜åœ¨çš„æ–‡ä»¶çš„æ–‡ä»¶åï¼Œè¦ä¹ˆè¿”å›nilå¤–åŠ æè¿°æ‰€æœ‰æ–‡ä»¶éƒ½æ— æ³•æˆåŠŸæ‰“å¼€çš„é”™è¯¯ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">path</span> = <span class="string">&quot;.\\?.dll;C:\\Programe Files\\Lua502\\dll\\?.dll&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">package</span>.searchpath(<span class="string">&quot;X&quot;</span>,<span class="built_in">path</span>))</span><br><span class="line"><span class="literal">nil</span></span><br><span class="line">			no file <span class="string">&#x27;.\X.dll&#x27;</span></span><br><span class="line">			no file <span class="string">&#x27;C:\Program Files\Lua502\dll\X.dll&#x27;</span></span><br></pre></td></tr></table></figure>
<p>ä½œä¸ºä¸€ä¸ªæœ‰è¶£çš„ç»ƒä¹ ï¼Œæˆ‘ä»¬åœ¨ç¤ºä¾‹ä¸­å®ç°äº†ä¸å‡½æ•°package.searchpathç±»ä¼¼çš„å‡½æ•°ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ï¼Œå®éªŒç­çš„package.searchpath</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">search</span><span class="params">(modname,path)</span></span></span><br><span class="line">	modname = <span class="built_in">string</span>.<span class="built_in">gsub</span>(modname,<span class="string">&quot;%.&quot;</span>,<span class="string">&quot;/&quot;</span>)</span><br><span class="line">	<span class="keyword">local</span> msg = &#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(<span class="built_in">path</span>, <span class="string">&quot;[^;]+&quot;</span>) <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> fname = <span class="built_in">string</span>.<span class="built_in">gsub</span>(c,<span class="string">&quot;?&quot;</span>,modname)</span><br><span class="line">		<span class="keyword">local</span> f = <span class="built_in">io</span>.<span class="built_in">open</span>(fname)</span><br><span class="line">		<span class="keyword">if</span> f <span class="keyword">then</span></span><br><span class="line">			f:<span class="built_in">close</span>()</span><br><span class="line">			<span class="keyword">return</span> fname</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			msg[#msg + <span class="number">1</span>] = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;\n\tno file &#x27;%s&#x27;&quot;</span>,fname);</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span> , <span class="built_in">table</span>.<span class="built_in">concat</span>(msg)			<span class="comment">-- æ²¡æ‰¾åˆ°</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°å‡½æ•°é¦–å…ˆæ›¿æ¢ç›®å½•åˆ†éš”ç¬¦ï¼Œåœ¨æœ¬ä¾‹ä¸­å³æŠŠæ‰€æœ‰çš„ç‚¹æ¢æˆæ–œæ ã€‚ä¹‹åï¼Œè¯¥å‡½æ•°éå†è·¯å¾„ä¸­çš„æ‰€æœ‰ç»„æˆéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€ä¸ªä¸å«åˆ†å·çš„æœ€é•¿åŒ¹é…ã€‚å¯¹äºæ¯ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Œè¯¥å‡½æ•°ä½¿ç”¨æ¨¡å—åæ¥æ›¿æ¢é—®å·å¾—åˆ°æœ€ç»ˆçš„æ–‡ä»¶åï¼Œç„¶åæ£€æŸ¥ç›¸åº”çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœå­˜åœ¨ï¼Œè¯¥å‡½æ•°å…³é—­è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åè¿”å›æ–‡ä»¶çš„åç§°ï¼›å¦åˆ™ï¼Œè¯¥å‡½æ•°ä¿å­˜å¤±è´¥çš„æ–‡ä»¶åç”¨äºå¯èƒ½çš„é”™è¯¯æç¤ºï¼ˆè¯·æ³¨æ„å­—ç¬¦ä¸²ç¼“å†²åŒºåœ¨é¿å…åˆ›å»ºæ— ç”¨çš„é•¿å­—ç¬¦ä¸²æ—¶çš„ä½œç”¨ï¼‰ã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶éƒ½æ‰¾ä¸åˆ°ï¼Œè¯¥å‡½æ•°åˆ™è¿”å›nilåŠæœ€ç»ˆçš„é”™è¯¯ä¿¡æ¯ã€‚</p>
<h3 id="æœç´¢å™¨"><a href="#æœç´¢å™¨" class="headerlink" title="æœç´¢å™¨"></a>æœç´¢å™¨</h3><p>åœ¨ç°å®ä¸­ï¼Œå‡½æ•°requireæ¯”æ­¤å‰æè¿°è¿‡çš„ç¨å¾®å¤æ‚ä¸€ç‚¹ã€‚æœç´¢Luaæ–‡ä»¶å’ŒCæ ‡å‡†åº“çš„æ–¹å¼åªæ˜¯æ›´åŠ é€šç”¨çš„æœç´¢å™¨çš„ä¸¤ä¸ªå®ä¾‹ã€‚ä¸€ä¸ªæœç´¢å™¨æ˜¯ä¸€ä¸ªä»¥æ¨¡å—åä¸ºå‚æ•°ï¼Œä»¥å¯¹åº”æ¨¡å—çš„åŠ è½½å™¨æˆ–nilä¸ºè¿”å›å€¼çš„ç®€å•å‡½æ•°ã€‚<br>æ•°ç»„package.searchersåˆ—å‡ºäº†å‡½æ•°requireä½¿ç”¨çš„æ‰€æœ‰æœç´¢å™¨ã€‚åœ¨å¯»æ‰¾æ¨¡å—æ—¶ï¼Œå‡½æ•°requireä¼ å…¥æ¨¡å—åå¹¶è°ƒç”¨åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªæœç´¢å™¨çŸ¥é“å®ƒä»¬å…¶ä¸­çš„ä¸€ä¸ªæ‰¾åˆ°äº†æŒ‡å®šæ¨¡å—çš„åŠ è½½å™¨ã€‚å¦‚æœæ‰€æœ‰æ‰€æœå™¨éƒ½è¢«è°ƒç”¨å®Œåè¿˜æ‰¾ä¸åˆ°ï¼Œé‚£ä¹ˆå‡½æ•°requireå°±æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚<br>ç”¨ä¸€ä¸ªåˆ—è¡¨æ¥é©±åŠ¨å¯¹ä¸€ä¸ªæ¨¡å—çš„æœç´¢ç»™å‡½æ•°requireæä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³ä¿å­˜è¢«å‹ç¼©åœ¨zipæ–‡ä»¶ä¸­çš„æ¨¡å—ï¼Œåªéœ€è¦æä¾›ä¸€ä¸ªåˆé€‚çš„æœç´¢å™¨ï¼Œç„¶åæŠŠå®ƒå¢åŠ åˆ°è¯¥åˆ—è¡¨ä¸­ã€‚åœ¨é»˜è®¤é…ç½®ä¸­ï¼Œæˆ‘ä»¬æ­¤å‰å­¦ä¹ è¿‡çš„ç”¨äºæœç´¢Luaæ–‡ä»¶å’ŒCæ ‡å‡†åº“çš„æœç´¢å™¨æ’åœ¨åˆ—è¡¨çš„ç¬¬äºŒã€ä¸‰ä½ï¼Œåœ¨å®ƒä»¬ä¹‹å‰æ˜¯é¢„åŠ è½½æœç´¢å™¨ã€‚<br>é¢„åŠ è½½æœç´¢å™¨ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿä¸ºè¦è®°è½½çš„æ¨¡å—å®šä¹‰ä»»æ„çš„åŠ è½½å‡½æ•°ã€‚é¢„åŠ è½½æœç´¢å™¨ä½¿ç”¨ä¸€ä¸ªåä¸ºpackage.preloadçš„è¡¨æ¥æ˜ å°„æ¨¡å—åç§°å’ŒåŠ è½½å‡½æ•°ã€‚å½“æœç´¢æŒ‡å®šçš„æ¨¡å—åæ—¶ï¼Œè¯¥æœç´¢å™¨åªæ˜¯ç®€å•åœ°åœ¨è¡¨ä¸­æœç´¢æŒ‡å®šçš„åç§°ã€‚å¦‚æœå®ƒæ‰¾åˆ°äº†å¯¹åº”çš„å‡½æ•°ï¼Œé‚£ä¹ˆå°±å°†è¯¥å‡½æ•°ä½œä¸ºç›¸åº”æ¨¡å—çš„åŠ è½½å‡½æ•°è¿”å›ï¼›å¦åˆ™ï¼Œåˆ™è¿”å›nilã€‚é¢„åŠ è½½æœç´¢å™¨ä¸ºå¤„ç†éæ ‡åœºæ™¯æä¾›äº†ä¸€ç§é€šç”¨çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªé™æ€é“¾æ¥åˆ°Luaä¸­çš„Cæ ‡å‡†åº“å¯ä»¥å°†å…¶luaopen_å‡½æ•°æ³¨å†Œåˆ°è¡¨preloadä¸­ï¼Œè¿™æ ·luaopen_å‡½æ•°åªæœ‰å½“ç”¨æˆ·åŠ è½½è¿™ä¸ªæ¨¡å—æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚ç”¨è¿™ç§æ–¹å¼ï¼Œç¨‹åºä¸ä¼šä¸ºæ²¡æœ‰ç”¨åˆ°çš„æ¨¡å—æµªè´¹èµ„æºã€‚</p>
<h2 id="Luaè¯­è¨€ä¸­ç¼–å†™æ¨¡å—çš„åŸºæœ¬æ–¹æ³•"><a href="#Luaè¯­è¨€ä¸­ç¼–å†™æ¨¡å—çš„åŸºæœ¬æ–¹æ³•" class="headerlink" title="Luaè¯­è¨€ä¸­ç¼–å†™æ¨¡å—çš„åŸºæœ¬æ–¹æ³•"></a>Luaè¯­è¨€ä¸­ç¼–å†™æ¨¡å—çš„åŸºæœ¬æ–¹æ³•</h2><p>åœ¨luaè¯­è¨€ä¸­åˆ›å»ºæ¨¡å—çš„æœ€ç®€å•æ–¹æ³•æ˜¯ï¼Œåˆ›å»ºä¸€ä¸ªè¡¨å¹¶å°†æ‰€æœ‰éœ€è¦å¯¼å‡ºçš„å‡½æ•°æ”¾å…¥å…¶ä¸­ï¼Œæœ€åè¿”å›ä¸ªè¡¨ã€‚ç¤ºä¾‹å°±æ˜¯è¿™ä¸ªæ–¹æ³•ï¼š</p>
<blockquote>
<p>ä¸€ä¸ªç”¨äºå¤æ•°çš„ç®€å•æ¨¡å—</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> M = &#123;&#125;   <span class="comment">-- æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºä¸€ä¸ªæ–°çš„å¤æ•°</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">new</span><span class="params">(r,i)</span></span></span><br><span class="line">	<span class="keyword">return</span>&#123;r = r , i = i&#125;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">M.new = new 		<span class="comment">-- æŠŠ&#x27;new&#x27;åŠ åˆ°æ¨¡å—ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- constant &#x27;i&#x27;</span></span><br><span class="line">M.i = new(<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">M.add</span><span class="params">(c1,c2)</span></span></span><br><span class="line">	<span class="keyword">return</span> new(c1.r + c2.r,c1.i + c2.i)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">M.sub</span><span class="params">(c1,c2)</span></span></span><br><span class="line">	<span class="keyword">return</span> new(c1.r - c2.r,c1.i - c2.i)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">M.mul</span><span class="params">(c1,c2)</span></span></span><br><span class="line">	<span class="keyword">return</span> new(c1.r*c2.r - c1.i*c2.i,c1.r*c2.i + c1.i*c2.r)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">inv</span><span class="params">(c)</span></span></span><br><span class="line">	<span class="keyword">local</span> n = c.r^<span class="number">2</span> + c.i^<span class="number">2</span></span><br><span class="line">	<span class="keyword">return</span> new(c.r/n,-c.i/n)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">M.div</span><span class="params">(c1,c2)</span></span></span><br><span class="line">	<span class="keyword">return</span> M.mul(c1,inv(c2))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">M.tostring</span><span class="params">(c)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;(%g,%g)&quot;</span>,c.r,c.i)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> M</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„æˆ‘ä»¬æ˜¯å¦‚ä½•é€šè¿‡ç®€å•åœ°æŠŠnewå’Œinvå£°æ˜ä¸ºå±€éƒ¨å˜é‡è€Œä½¿å®ƒä»¬ç§°ä¸ºä»£ç æ®µçš„ç§æœ‰å‡½æ•°çš„ã€‚<br>æœ‰äº›äººä¸å–œæ¬¢æœ€åçš„è¿”å›è¯­å¥ã€‚ä¸€ç§å°†å…¶çœç•¥çš„æ–¹å¼æ˜¯ç›´æ¥æŠŠæ¨¡å—å¯¹åº”çš„è¡¨æ”¾åœ¨package.loadedä¸­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> M = &#123;&#125;</span><br><span class="line"><span class="built_in">package</span>.<span class="built_in">loaded</span>[...] = M</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œå‡½æ•°requireä¼šæŠŠæ¨¡å—çš„åç§°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™åŠ è½½å‡½æ•°ã€‚å› æ­¤ï¼Œè¡¨ç´¢å¼•ä¸­çš„å¯å˜é•¿å‚æ•°è¡¨è¾¾å¼â€¦å…¶å®å°±æ˜¯æ¨¡å—åã€‚åœ¨è¿™ä¸€èµ‹å€¼è¯­å¥åï¼Œæˆ‘ä»¬å°±ä¸å†éœ€è¦åœ¨æ¨¡å—çš„æœ€åè¿”å›Mäº†ï¼šå¦‚æœä¸€ä¸ªæ¨¡å—æ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆå‡½æ•°requireä¼šè¿”å›package.loaded[modname]çš„å½“å‰å€¼ã€‚ä¸è¿‡ï¼Œç¬”è€…è®¤ä¸ºåœ¨æ¨¡å—çš„æœ€ååŠ ä¸Šreturnè¯­å¥æ›´æ¸…æ™°ã€‚å¦‚æœæˆ‘ä»¬å¿˜äº†returnè¯­å¥ï¼Œé‚£ä¹ˆåœ¨æµ‹è¯•æ¨¡å—çš„æ—¶å€™å°±å¾ˆå®¹æ˜“å°±ä¼šå‘ç°é—®é¢˜ã€‚<br>å¦ä¸€ç§ç¼–å†™æ¨¡å—çš„æ–¹æ³•æ˜¯æŠŠæ‰€æœ‰çš„å‡½æ•°å®šä¹‰ä¸ºå±€éƒ¨å˜é‡ï¼Œç„¶ååœ¨æœ€åæ„é€ è¿”å›çš„è¡¨ï¼Œå‚è€ƒç¤ºä¾‹</p>
<blockquote>
<p>ç¤ºä¾‹ï¼šä½¿ç”¨å¯¼å‡ºè¡¨çš„æ¨¡å—</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">new</span><span class="params">(r,i)</span></span> <span class="keyword">return</span> &#123;r = r, i = i&#125; <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> i = complex.new(<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">	new  = new,</span><br><span class="line">	i    = i,</span><br><span class="line">	add  = add,</span><br><span class="line">	<span class="built_in">sub</span>  = <span class="built_in">sub</span>,</span><br><span class="line">	mul  = mul,</span><br><span class="line">	div  = div,</span><br><span class="line">	<span class="built_in">tostring</span> = <span class="built_in">tostring</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼çš„æœ‰ç‚¹åœ¨äºï¼Œæ— é¡»åœ¨æ¯ä¸€ä¸ªæ ‡è¯†ç¬¦å‰å¢åŠ å‰ç¼€M.æˆ–ç±»ä¼¼çš„ä¸œè¥¿ã€‚é€šè¿‡æ˜¾å¼çš„å¯¼å‡ºè¡¨ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä»¥ä¸åœ¨æ¨¡å—ä¸­ç›¸åŒçš„æ–¹å¼å®šä¹‰å’Œä½¿ç”¨å¯¼å‡ºå’Œå†…éƒ¨å‡½æ•°ã€‚è¿™ç§æ–¹å¼çš„ç¼ºç‚¹åœ¨äºï¼Œå¯¼å‡ºè¡¨ä½äºæœ€åä¸æ˜¯æœ€å‰é¢ï¼ˆæŠŠå‰é¢çš„è¯å½“ä½œç®€ç•¥æ–‡æ¡£çš„è¯æ›´æœ‰ç”¨ï¼‰ï¼Œè€Œä¸”ç”±äºå¿…é¡»æŠŠæ¯ä¸ªåå­—éƒ½å†™ä¸¤éï¼Œæ‰€ä»¥å¯¼å‡ºè¡¨æœ‰ç‚¹å†—ä½™ï¼ˆè¿™ä¸€ç‚¹å…¶å®å¯èƒ½ä¼šå˜æˆä¼˜ç‚¹ï¼Œå› ä¸ºè¿™å…è®¸å‡½æ•°åœ¨æ¨¡å—å†…å’Œæ¨¡å—å¤–å…·æœ‰ä¸åŒçš„åç§°ï¼Œä¸è¿‡ç¨‹åºå¾ˆå°‘ä¼šç”¨åˆ°ï¼‰ã€‚<br>ä¸ç®¡æ€æ ·ï¼Œæ— è®ºæ€æ ·å®šä¹‰æ¨¡å—ï¼Œç”¨æˆ·éƒ½èƒ½ç”¨æ ‡å‡†çš„æ–¹æ³•ä½¿ç”¨æ¨¡å—ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> cpx = <span class="built_in">require</span> <span class="string">&quot;complex&quot;</span></span><br><span class="line"><span class="built_in">print</span>(cpx.<span class="built_in">tostring</span>(cpx.add(cpx.new(<span class="number">3</span>,<span class="number">4</span>),cpx.i)))				<span class="comment">-- (3,5)</span></span><br></pre></td></tr></table></figure>
<p>åç»­ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä½•ä½¿ç”¨è¯¸å¦‚å…ƒè¡¨å’Œç¯å¢ƒä¹‹ç±»çš„é«˜çº§Luaè¯­è¨€åŠŸèƒ½æ¥ç¼–å†™æ¨¡å—ã€‚ ä¸è¿‡ï¼Œé™¤äº†å‘ç°ç”±äºå¤±è¯¯è€Œå®šä¹‰çš„å…¨å±€å˜é‡æ—¶åˆä¸€ä¸ªæŠ€å·§å¤–ï¼Œç¬”è€…ç¼–å†™æ¨¡å—æ—¶éƒ½æ˜¯ç”¨åŸºæœ¬åŠŸèƒ½ã€‚</p>
<h2 id="å­æ¨¡å—å’ŒåŒ…"><a href="#å­æ¨¡å—å’ŒåŒ…" class="headerlink" title="å­æ¨¡å—å’ŒåŒ…"></a>å­æ¨¡å—å’ŒåŒ…</h2><p>Luaæ”¯æŒå…·æœ‰å±‚æ¬¡ç»“æ„çš„æ¨¡å—åï¼Œé€šè¿‡ç‚¹æ¥åˆ†éš”åç§°ä¸­çš„å±‚æ¬¡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåä¸ºmod.subçš„æ¨¡å—æ˜¯æ¨¡å—é­”çš„ä¸€ä¸ªå­æ¨¡å—ã€‚ä¸€ä¸ªåŒ…æ˜¯ä¸€æ£µç”±æ¨¡å—ç»„æˆçš„å®Œæ•´çš„æ ‘ï¼Œå®ƒæ˜¯Luaè¯­è¨€ä¸­ç”¨äºå‘è¡Œç¨‹åºçš„å•ä½ã€‚<br>å½“åŠ è½½ä¸€ä¸ªåä¸ºmod.subçš„æ¨¡å—æ—¶ï¼Œå‡½æ•°requireä¸€æ¬¡ä½¿ç”¨åŸå§‹çš„æ¨¡å—åâ€mod.subâ€ä½œä¸ºé”®æ¥æŸ¥è¯¢è¡¨package.loadedå’Œè¡¨package.preloadã€‚è¿™é‡Œï¼Œæ¨¡å—åä¸­çš„ç‚¹åƒæ¨¡å—åä¸­çš„å…¶ä»–å­—ç¬¦ä¸€æ ·ï¼Œæ²¡æœ‰ç‰¹æ®Šå«ä¹‰ã€‚<br>ç„¶è€Œï¼Œå½“æœç´¢ä¸€ä¸ªå®šä¹‰å­æ¨¡å—çš„æ–‡ä»¶æ—¶ï¼Œå‡½æ•°requireä¼šå°†ç‚¹è½¬æ¢ä¸ºå¦ä¸€ä¸ªå­—ç¬¦ï¼Œé€šå¸¸å°±æ˜¯æ“ä½œç³»ç»Ÿçš„ç›®å½•åˆ†éš”ç¬¦ï¼ˆä¾‹å¦‚ï¼ŒPOSIXæ“ä½œç³»ç»Ÿçš„æ–œæ æˆ–Windowsæ“ä½œç³»ç»Ÿçš„åæ–œæ ï¼‰ã€‚è½¬æ¢ä¹‹åï¼Œå‡½æ•°requireä¼šåƒæœç´¢å…¶ä»–åç§°ä¸€æ ·æœç´¢è¿™ä¸ªåç§°ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ç›®å½•åˆ†éš”ç¬¦æ˜¯æ–œæ å¹¶ä¸”æœ‰å¦‚ä¸‹è·¯å¾„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">./?.lua;/usr/<span class="keyword">local</span>/lua/?.lua;/usr/<span class="keyword">local</span>/lua/?/init.lua</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨require â€œa.bâ€ä¼šå°è¯•æ‰“å¼€ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">./a/b.lua</span><br><span class="line">/usr/<span class="keyword">local</span>/lua/a/b.lua</span><br><span class="line">/usr/<span class="keyword">local</span>/lua/a/b/init.lua </span><br></pre></td></tr></table></figure>
<p>è¿™ç§è¡Œä¸ºä½¿å¾—ä¸€ä¸ªåŒ…ä¸­çš„æ‰€æœ‰æ¨¡å—èƒ½å¤Ÿæ”¾åˆ°ä¸€ä¸ªç›®å½•ä¸­ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå…·æœ‰æ¨¡å—pã€p.aå’Œp.bçš„åŒ…å¯¹åº”çš„æ–‡ä»¶å¯ä»¥åˆ†è´æ˜¯p&#x2F;init.luaã€p&#x2F;a.luaå’Œp&#x2F;b.luaï¼Œç›®å½•påˆä½äºå…¶ä»–åˆé€‚çš„ç›®å½•ä¸­ã€‚<br>Luaè¯­è¨€ä½¿ç”¨çš„ç›®å½•åˆ†éš”ç¬¦æ˜¯ç¼–è¯‘æ—¶é…ç½®çš„ï¼Œå¯ä»¥æ˜¯ä»»æ„çš„å­—ç¬¦ä¸²ï¼ˆè¯·è®°ä½ï¼ŒLuaå¹¶ä¸çŸ¥é“ç›®å½•çš„å­˜åœ¨ï¼‰ã€‚ä¾‹å¦‚ï¼Œæ²¡æœ‰ç›®å½•å±‚æ¬¡çš„ç³»ç»Ÿå¯ä»¥ä½¿ç”¨ä¸‹ç”»çº¿ä½œä¸ºâ€ç›®å½•åˆ†éš”ç¬¦â€œï¼Œå› æ­¤è°ƒç”¨require â€œa,bâ€ä¼šæœç´¢æ–‡ä»¶a_b.luaã€‚<br>ä½œä¸ºä¸€ç§é¢å¤–çš„æœºåˆ¶ï¼Œå‡½æ•°requireåœ¨åŠ è½½Cè¯­è¨€ç¼–å†™çš„å­æ¨¡å—æ—¶è¿˜æœ‰å¦å¤–ä¸€ä¸ªæœç´¢å™¨ã€‚å½“è¯¥å‡½æ•°æ‰¾ä¸åˆ°å­æ¨¡å—å¯¹åº”çš„Luaæ–‡ä»¶æˆ–Cæ–‡ä»¶æ—¶ï¼Œå®ƒä¼šå†æ¬¡æœç´¢Cæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼Œä¸è¿‡è¿™æ¬¡å°†æœç´¢åŒ…çš„åç§°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªç¨‹åºè¦åŠ è½½å­æ¨¡å—a.b.cï¼Œæœç´¢å™¨ä¼šæœç´¢æ–‡ä»¶aã€‚å¦‚æœæ‰¾åˆ°äº†Cæ ‡å‡†åº“aï¼Œé‚£ä¹ˆå‡½æ•°requireå°±ä¼šåœ¨è¯¥åº“ä¸­æœç´¢å¯¹åº”çš„åŠ è½½å‡½æ•°luaopen_a_b_cã€‚è¿™ç§æœºåˆ¶å…è®¸ä¸€ä¸ªå‘è¡ŒåŒ…å°†å‡ ä¸ªå­æ¨¡å—ç»„ç»‡ä¸ºä¸€ä¸ªCæ ‡å‡†åº“ï¼Œæ¯ä¸ªå­æ¨¡å—æœ‰å„è‡ªçš„åŠ è½½å‡½æ•°ã€‚<br>ä»Luaè¯­è¨€çš„è§†è§’çœ‹ï¼ŒåŒä¸€ä¸ªåŒ…ä¸­çš„å­æ¨¡å—æ²¡æœ‰æ˜¾å¼çš„å…³è”ã€‚åŠ è½½ä¸€ä¸ªæ¨¡å—å¹¶ä¸ä¼šè‡ªåŠ¨åŠ è½½å®ƒçš„ä»»ä½•å­æ¨¡å—ã€‚åŒæ ·ï¼ŒåŠ è½½å­æ¨¡å—ä¹Ÿä¸ä¼šè‡ªåŠ¨åœ°åŠ è½½å…¶çˆ¶æ¨¡å—ã€‚å½“ç„¶ï¼Œåªè¦åŒ…çš„å®ç°è€…æ„¿æ„ï¼Œä¹Ÿå¯ä»¥åˆ›é€ è¿™ç§å…³è”ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç‰¹å®šçš„æ¨¡å—å¯èƒ½ä¸€å¼€å§‹å°±æ˜¾å¼åœ°åŠ è½½å®ƒçš„ä¸€ä¸ªæˆ–å…¨éƒ¨å­æ¨¡å—ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè¿ç»­æ•™ç¨‹ä¹‹Luaä¸­è¡¨çš„ä½¿ç”¨</title>
    <url>/36871.html</url>
    <content><![CDATA[<p>è¡¨æ˜¯Luaä¸­æœ€ä¸»è¦å’Œå¼ºå¤§çš„æ•°æ®ç»“æœã€‚ä½¿ç”¨è¡¨ï¼ŒLuaè¯­è¨€å¯ä»¥ä»¥ä¸€ç§ç®€å•ã€ç»Ÿä¸€ä¸”é«˜æ•ˆçš„æ–¹å¼è¡¨ç¤ºæ•°ç»„ã€é›†åˆã€è®°å½•å’Œå…¶ä»–å¾ˆå¤šæ•°æ®ç»“æœã€‚Luaè¯­è¨€ä¹Ÿä½¿ç”¨è¡¨æ¥è¡¨ç¤ºåŒ…å’Œå…¶ä»–å¯¹è±¡ã€‚å½“è°ƒç”¨å‡½æ•°math.sinæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½è®¤ä¸ºæ˜¯â€œè°ƒç”¨äº†mathåº“ä¸­å‡½æ•°sinâ€ï¼›è€Œå¯¹äºLuaè¯­è¨€æ¥è¯´ï¼Œå…¶å®é™…å«ä¹‰æ˜¯â€œä»¥å­—ç¬¦ä¸²sinâ€ä¸ºé”®æ£€ç´¢è¡¨mathã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Luaè¯­è¨€ä¸­çš„è¡¨æœ¬è´¨ä¸Šæ˜¯ä¸€ç§è¾…åŠ©æ•°ç»„ã€‚è¿™ç§æ•°ç»„ä¸ä»…å¯ä»¥ä½¿ç”¨æ•°å€¼ä½œä¸ºç´¢å¼•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æˆ–å…¶ä»–ä»»æ„ç±»å‹çš„å€¼ä½œä¸ºç´¢å¼•ï¼ˆnilé™¤å¤–ï¼‰ã€‚<br>æˆ‘ä»¬ä½¿ç”¨æ„é€ å™¨è¡¨è¾¾å¼åˆ›å»ºè¡¨ï¼Œå…¶æœ€ç®€å•çš„å½¢å¼æ˜¯{}:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; a = &#123;&#125;			<span class="comment">--åˆ›å»ºä¸€ä¸ªè¡¨ç„¶åç”¨è¡¨çš„å¼•ç”¨èµ‹å€¼</span></span><br><span class="line">&gt; k = <span class="string">&quot;x&quot;</span></span><br><span class="line">&gt; a[k] = <span class="number">10</span> 		<span class="comment">-- æ–°å…ƒç´ ï¼Œé”®æ˜¯&quot;x&quot;,å€¼æ˜¯10</span></span><br><span class="line">&gt; a[<span class="number">20</span>] = <span class="string">&quot;great&quot;</span>	<span class="comment">-- æ–°å…ƒç´ ï¼Œé”®æ˜¯20ï¼Œå€¼æ˜¯&quot;great&quot;</span></span><br><span class="line">&gt; a[<span class="string">&quot;x&quot;</span>]			<span class="comment">-- 10</span></span><br><span class="line">&gt; k = <span class="number">20</span></span><br><span class="line">&gt; a[k]				<span class="comment">-- &quot;great&quot;</span></span><br><span class="line">&gt; a[<span class="string">&quot;x&quot;</span>] = a[<span class="string">&quot;x&quot;</span>] + <span class="number">1</span> <span class="comment">-- å¢åŠ å…ƒç´ &quot;x&quot;çš„å€¼</span></span><br><span class="line">&gt; a[<span class="string">&quot;x&quot;</span>]</span><br></pre></td></tr></table></figure>
<p>è¡¨æ°¸è¿œæ˜¯åŒ¿åçš„ï¼Œè¡¨æœ¬èº«å’Œä¿å­˜è¡¨çš„å˜é‡ä¹‹é—´æ²¡æœ‰å›ºå®šçš„å…³ç³»ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; a = &#123;&#125;</span><br><span class="line">&gt; a[<span class="string">&quot;x&quot;</span>] = <span class="number">10</span></span><br><span class="line">&gt; b = a					<span class="comment">-- &#x27;b&#x27;å’Œ&#x27;a&#x27;å¼•ç”¨åŒä¸€å¼ è¡¨</span></span><br><span class="line">&gt; b[<span class="string">&quot;x&quot;</span>] = <span class="number">20</span></span><br><span class="line">&gt; a[<span class="string">&quot;x&quot;</span>]				<span class="comment">-- 20</span></span><br><span class="line">&gt; a = <span class="literal">nil</span> 				<span class="comment">-- åªæœ‰&#x27;b&#x27;ä»ç„¶æŒ‡å‘è¡¨</span></span><br><span class="line">&gt; b = <span class="literal">nil</span>				<span class="comment">-- æ²¡æœ‰æŒ‡å‘è¡¨çš„å¼•ç”¨äº†</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºä¸€ä¸ªè¡¨è€Œè¨€ï¼Œå½“ç¨‹åºä¸­ä¸å†æœ‰æŒ‡å‘å®ƒçš„å¼•ç”¨æ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨ä¼šæœ€ç»ˆåˆ é™¤è¿™ä¸ªè¡¨å¹¶é‡ç”¨å…¶å ç”¨çš„å†…å­˜ã€‚</p>
<h2 id="è¡¨ç´¢å¼•"><a href="#è¡¨ç´¢å¼•" class="headerlink" title="è¡¨ç´¢å¼•"></a>è¡¨ç´¢å¼•</h2><p>åŒä¸€ä¸ªè¡¨ä¸­å­˜å‚¨çš„å€¼å¯ä»¥å…·æœ‰ä¸åŒçš„ç±»å‹ç´¢å¼•ï¼Œå¹¶å¯ä»¥æŒ‰éœ€å¢é•¿ä»¥å®¹çº³æ–°çš„å…ƒç´ ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; a = &#123;&#125;		<span class="comment">-- ç©ºçš„è¡¨</span></span><br><span class="line">&gt; <span class="comment">-- åˆ›å»º1000ä¸ªæ–°å…ƒç´ </span></span><br><span class="line">&gt; <span class="keyword">for</span> i = <span class="number">1</span> , <span class="number">1000</span> <span class="keyword">do</span> a[i] = <span class="number">1</span> * <span class="number">2</span> <span class="keyword">end</span></span><br><span class="line">&gt; a[<span class="number">9</span>]			<span class="comment">-- 18</span></span><br><span class="line">&gt; a[<span class="string">&quot;x&quot;</span>] = <span class="number">10</span> 	</span><br><span class="line">&gt; a[<span class="string">&quot;x&quot;</span>]		<span class="comment">-- 10</span></span><br><span class="line">&gt; a[<span class="string">&quot;y&quot;</span>]		<span class="comment">-- nil</span></span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ä¸Šè¿°ä»£ç çš„æœ€åä¸€è¡Œï¼šå¦‚åŒå…¨å±€å˜é‡ä¸€æ ·ï¼Œæœªç»åˆå§‹åŒ–çš„è¡¨å…ƒç´ ä¸ºnilï¼Œå°†nilèµ‹å€¼ç»™è¡¨å…ƒç´ å¯ä»¥å°†å…¶åˆ é™¤ã€‚<br>å½“æŠŠè¡¨å½“åšç»“æ„ä½“ä½¿ç”¨æ—¶ï¼Œå¯ä»¥æŠŠç´¢å¼•å½“ä½œæˆå‘˜åç§°ä½¿ç”¨ã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§æ›´åŠ æ˜“è¯»çš„æ–¹å¼æ”¹å†™å‰è¿°ç¤ºä¾‹çš„æœ€åå‡ è¡Œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; a = &#123;&#125;</span><br><span class="line">&gt; x = <span class="string">&quot;y&quot;</span></span><br><span class="line">&gt; a[x] = <span class="number">10</span> 		<span class="comment">-- æŠŠ10æ”¾åœ¨å­—æ®µ&quot;y&quot;ä¸­</span></span><br><span class="line">&gt; a[x]				<span class="comment">-- 10  å­—æ®µ&quot;y&quot;çš„å€¼</span></span><br><span class="line">&gt; a.x 				<span class="comment">-- nil  å­—æ®µ&quot;x&quot;çš„å€¼ï¼ˆæœªå®šä¹‰ï¼‰</span></span><br><span class="line">&gt; a.y				<span class="comment">-- 10 å­—æ®µ&quot;y&quot;çš„å€¼</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºå¯ä»¥ä½¿ç”¨ä»»æ„ç±»å‹ç´¢å¼•è¡¨ï¼Œæ‰€ä»¥åœ¨ç´¢å¼•è¡¨æ—¶ä¼šé‡åˆ°ç›¸ç­‰æ€§æ¯”è¾ƒæ–¹é¢çš„å¾®å¦™é—®é¢˜ã€‚è™½ç„¶ç¡®å®éƒ½èƒ½ä½¿ç”¨æ•°å­—0å’Œå­—ç¬¦ä¸²â€0â€å¯¹åŒä¸€ä¸ªè¡¨è¿›è¡Œç´¢å¼•ï¼Œä½†è¿™ä¸¤ä¸ªç´¢å¼•çš„å€¼åŠå…¶æ‰€å¯¹åº”çš„å…ƒç´ æ˜¯ä¸åŒçš„ã€‚åŒæ ·ï¼Œå­—ç¬¦ä¸²â€+1â€ã€â€01â€å’Œâ€1â€æŒ‡å‘çš„ä¹Ÿæ˜¯ä¸åŒçš„å…ƒç´ ã€‚å½“ä¸èƒ½ç¡®å®šè¡¨ç´¢å¼•çš„çœŸå®æ•°æ®ç±»å‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ˜¾å¼çš„ç±»å‹è½¬æ¢ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; i = <span class="number">10</span>; j = <span class="string">&quot;10&quot;</span>; k = <span class="string">&quot;+10&quot;</span></span><br><span class="line">&gt; a = &#123;&#125;</span><br><span class="line">&gt; a[i] = <span class="string">&quot;nubmer key&quot;</span></span><br><span class="line">&gt; a[j] = <span class="string">&quot;string key&quot;</span></span><br><span class="line">&gt; a[k] = <span class="string">&quot;another string key&quot;</span></span><br><span class="line">&gt; a[i]			<span class="comment">-- æ•°å€¼ç±»å‹çš„é”®</span></span><br><span class="line">&gt; a[j]			<span class="comment">-- å­—ç¬¦ä¸²ç±»å‹çš„é”®</span></span><br><span class="line">&gt; a[k]			<span class="comment">-- å¦ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„é”®</span></span><br><span class="line">&gt; a[<span class="built_in">tonumber</span>(j)] <span class="comment">-- æ•°å€¼ç±»å‹çš„é”®</span></span><br><span class="line">&gt; a[<span class="built_in">tonumber</span>(k)] <span class="comment">-- æ•°å€¼ç±»å‹çš„é”®</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸æ³¨æ„è¿™ä¸€ç‚¹ï¼Œå°±ä¼šå¾ˆå®¹æ˜“åœ¨ç¨‹åºä¸­å¼•å…¥è¯¡å¼‚çš„Bugã€‚<br>æ•´å‹å’Œæµ®ç‚¹å‹ç±»å‹çš„è¡¨ç´¢å¼•åˆ™ä¸å­˜åœ¨ä¸Šè¿°é—®é¢˜ã€‚ç”±äº2å’Œ2.0çš„å€¼ç›¸ç­‰ï¼Œæ‰€ä»¥å½“å®ƒä»¬è¢«å½“ä½œè¡¨ç´¢å¼•ä½¿ç”¨æ—¶æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªè¡¨å…ƒç´ ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; a = &#123;&#125;</span><br><span class="line">&gt; a[<span class="number">2.0</span>] = <span class="number">10</span></span><br><span class="line">&gt; a[<span class="number">2.1</span>] = <span class="number">20</span></span><br><span class="line">&gt; a[<span class="number">2</span>]		<span class="comment">-- 10 </span></span><br><span class="line">&gt; a[<span class="number">2.1</span>]	<span class="comment">-- 20 </span></span><br></pre></td></tr></table></figure>
<p>æ›´å‡†ç¡®åœ°è¯´ï¼Œå½“è¢«ç”¨ä½œè¡¨ç´¢å¼•æ—¶ï¼Œä»»ä½•èƒ½å¤Ÿè¢«è½¬æ¢ä¸ºæ•´å‹çš„æµ®ç‚¹æ•°éƒ½ä¼šè¢«è½¬æ¢ä¸ºæ•´å‹æ•°ã€‚</p>
<h2 id="è¡¨æ„é€ å™¨"><a href="#è¡¨æ„é€ å™¨" class="headerlink" title="è¡¨æ„é€ å™¨"></a>è¡¨æ„é€ å™¨</h2><p>è¡¨æ„é€ å™¨æ˜¯ç”¨æ¥åˆ›å»ºå’Œåˆå§‹åŒ–è¡¨çš„è¡¨è¾¾å¼ï¼Œä¹Ÿæ˜¯Luaè¯­è¨€ä¸­ç‹¬æœ‰çš„ä¹Ÿæ˜¯æœ€æœ‰ç”¨ã€æœ€çµæ´»çš„æœºåˆ¶ä¹‹ä¸€ã€‚<br>æ­£å¦‚æˆ‘ä»¬æ­¤å‰å·²ç»æåˆ°çš„ï¼Œæœ€ç®€å•çš„æ„é€ å™¨æ˜¯ç©ºæ„é€ å™¨{}ã€‚è¡¨æ„é€ å™¨ä¹Ÿå¯ä»¥è¢«ç”¨æ¥åˆå§‹åŒ–åˆ—è¡¨ï¼Œä¾‹å¦‚ï¼Œä¸‹ä¾‹ä¸­ä½¿ç”¨å­—ç¬¦ä¸²â€Sundayâ€åˆå§‹åŒ–äº†day[1]ã€ä½¿ç”¨å­—ç¬¦ä¸²â€Mondayâ€åˆå§‹åŒ–äº†day[2]ï¼Œä¾æ¬¡ç±»æ¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">days = &#123;<span class="string">&quot;Sunday&quot;</span>,<span class="string">&quot;Monday&quot;</span>,<span class="string">&quot;Tuesday&quot;</span>,<span class="string">&quot;Wndnesday&quot;</span>,<span class="string">&quot;Thursday&quot;</span>,<span class="string">&quot;Friday&quot;</span>,<span class="string">&quot;Saturday&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(days[<span class="number">4</span>])			<span class="comment">-- Wednesday</span></span><br></pre></td></tr></table></figure>
<p>Luaè¯­è¨€è¿˜æä¾›ä¸€ç§åˆå§‹åŒ–è®°å½•å¼è¡¨çš„ç‰¹æ®Šè¯­æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;x = <span class="number">10</span>, y = <span class="number">20</span> &#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ç­‰ä»·äºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;&#125;;</span><br><span class="line">a.x = <span class="number">10</span>;</span><br><span class="line">a.y = <span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡åœ¨ç¬¬ä¸€ç§å†™æ³•ä¸­ï¼Œç”±äºèƒ½å¤Ÿæå‰åˆ¤æ–­è¡¨çš„å¤§å°ï¼Œæ‰€ä»¥è¿è¡Œé€Ÿåº¦æ›´å¿«ã€‚<br>æ— è®ºå“ªç§æ–¹å¼åˆ›å»ºï¼Œéƒ½å¯ä»¥éšæ—¶å¢åŠ æˆ–åˆ é™¤å…ƒç´ ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">w = &#123;x = <span class="number">0</span> ,y = <span class="number">0</span>, label = <span class="string">&quot;console&quot;</span>&#125;</span><br><span class="line">x = &#123;<span class="built_in">math</span>.<span class="built_in">sin</span>(<span class="number">0</span>),<span class="built_in">math</span>.<span class="built_in">sin</span>(<span class="number">1</span>),<span class="built_in">math</span>.<span class="built_in">sin</span>(<span class="number">2</span>)&#125;</span><br><span class="line">w[<span class="number">1</span>] = <span class="string">&quot;another field&quot;</span>			<span class="comment">-- æŠŠé”®1å¢åŠ åˆ°è¡¨&quot;w&quot;ä¸­</span></span><br><span class="line">x.f = w							<span class="comment">-- æŠŠé”®&quot;f&quot;å¢åŠ åˆ°è¡¨&quot;w&quot;ä¸­</span></span><br><span class="line"><span class="built_in">print</span>(w[<span class="string">&quot;x&quot;</span>])					<span class="comment">-- 0</span></span><br><span class="line"><span class="built_in">print</span>(w[<span class="number">1</span>])						<span class="comment">-- another field</span></span><br><span class="line"><span class="built_in">print</span>(x.f[<span class="number">1</span>])					<span class="comment">-- another field</span></span><br><span class="line">w.x = <span class="literal">nil</span> 						<span class="comment">-- åˆ é™¤å­—æ®µ&quot;x&quot;</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œæ­£å¦‚æ­¤å‰æ‰€æåˆ°çš„ï¼Œä½¿ç”¨åˆé€‚çš„æ„é€ å™¨æ¥åˆ›å»ºè¡¨ä¼šæ›´åŠ é«˜æ•ˆå’Œæ˜“è¯»ã€‚<br>åœ¨åŒä¸€ä¸ªæ„é€ å™¨ä¸­ï¼Œå¯ä»¥æ··ç”¨è®°å½•å¼å’Œåˆ—è¡¨å¼å†™æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">polyline = &#123;color = <span class="string">&quot;blue&quot;</span>,</span><br><span class="line">			thickness = <span class="number">2</span>,</span><br><span class="line">			npoints   = <span class="number">4</span>,</span><br><span class="line">			&#123;x = <span class="number">0</span> ,y = <span class="number">0</span> &#125;,		<span class="comment">-- polyline[1]</span></span><br><span class="line">			&#123;x = <span class="number">-10</span>, y = <span class="number">0</span>&#125;,		<span class="comment">-- polyline[2]</span></span><br><span class="line">			&#123;x = <span class="number">-10</span>, y = <span class="number">1</span>&#125;,		<span class="comment">-- polyline[3]</span></span><br><span class="line">			&#123;x = <span class="number">0</span> , y = <span class="number">1</span>&#125;			<span class="comment">-- polyline[4]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°çš„ç¤ºä¾‹ä¹ŸåŒæ—¶å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºåµŒå¥—è¡¨ä»¥è¡¨è¾¾æ›´åŠ å¤æ‚çš„æ•°æ®ç»“æ„ã€‚æ¯ä¸€ä¸ªå…ƒç´ polyline[i]éƒ½æ˜¯ä»£è¡¨ä¸€æ¡è®°å½•çš„è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(polyline[<span class="number">2</span>].x)			<span class="comment">-- -10</span></span><br><span class="line"><span class="built_in">print</span>(polyline[<span class="number">4</span>].y)			<span class="comment">-- 1</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œè¿™ä¸¤ç§æ„é€ å™¨éƒ½æœ‰å„è‡ªçš„å±€é™ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨è¿™ä¸¤ç§æ„é€ å™¨æ—¶ï¼Œä¸èƒ½ä½¿ç”¨è´Ÿæ•°ç´¢å¼•èˆ’é€‚åŒ–è¡¨å…ƒç´ ï¼Œä¸èƒ½ä½¿ç”¨ä¸ç¬¦åˆè§„èŒƒçš„æ ‡è¯†ç¬¦ä½œä¸ºç´¢å¼•ã€‚å¯¹äºè¿™ç±»éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ›´åŠ é€šç”¨çš„æ„é€ å™¨ï¼Œå³é€šè¿‡æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„è¡¨è¾¾å¼æ˜¾å¼åœ°æŒ‡å®šæ¯ä¸€ä¸ªç´¢å¼•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">opnames = &#123;[<span class="string">&quot;+&quot;</span>] = <span class="string">&quot;add&quot;</span>, [<span class="string">&quot;-&quot;</span>] = <span class="string">&quot;sub&quot;</span> ,</span><br><span class="line">		   [<span class="string">&quot;*&quot;</span>] = <span class="string">&quot;mul&quot;</span>, [<span class="string">&quot;/&quot;</span>] = <span class="string">&quot;div&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">i = <span class="number">20</span></span><br><span class="line">s = <span class="string">&quot;-&quot;</span></span><br><span class="line">a = &#123;[i + <span class="number">0</span>] = s, [i + <span class="number">1</span>] = s..s, [i + <span class="number">2</span>] = s..s..s&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(opnames[s])		<span class="comment">-- sub</span></span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">22</span>])			<span class="comment">-- ---</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ„é€ å™¨è™½ç„¶å†—é•¿ï¼Œä½†éå¸¸çµæ´»ï¼Œä¸ç®¡æ˜¯è®°å½•å¼æ„é€ å™¨è¿˜æ˜¯åˆ—è¡¨å¼æ„é€ å™¨å†›å¸ˆå…¶ç‰¹æ®Šå½¢é€‰çš„ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‡ ç§è¡¨è¾¾å¼å°±ç›¸äº’ç­‰ä»·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&#123;x = <span class="number">0</span>, y = <span class="number">0</span>&#125;			<span class="comment">-- &#123;[&quot;xâ€] = 0, [&quot;y&quot;] = 0&#125;</span></span><br><span class="line">&#123;<span class="string">&quot;r&quot;</span>, <span class="string">&quot;g&quot;</span>, <span class="string">&quot;b&quot;</span>&#125;			<span class="comment">-- &#123;[1] = &quot;r&quot;, [2] = &quot;g&quot;, [3] = &quot;b&quot;&#125;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æœ€åä¸€ä¸ªå…ƒç´ åæ€»æ˜¯å¯ä»¥ç´§è·Ÿä¸€ä¸ªé€—å·ã€‚è™½ç„¶æ€»æ˜¯æœ‰æ•ˆï¼Œä½†æ˜¯å¦åŠ æœ€åä¸€ä¸ªé€—å·æ˜¯å¯é€‰çš„ã€‚<br>è¿™ç§çµæ´»æ€§ä½¿å¾—å¼€å‘äººå‘˜åœ¨ç¼–å†™è¡¨æ„é€ å™¨æ—¶ä¸éœ€è¦å¯¹æœ€åä¸€ä¸ªå…ƒç´ è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚<br>æœ€åï¼Œè¡¨æ„é€ å™¨ä¸­çš„é€—å·ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ†å·ä»£æ›¿ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹Luaè¯­è¨€çš„æ—§ç‰ˆæœ¬ã€‚</p>
<h2 id="æ•°ç»„ã€åˆ—è¡¨å’Œåºåˆ—"><a href="#æ•°ç»„ã€åˆ—è¡¨å’Œåºåˆ—" class="headerlink" title="æ•°ç»„ã€åˆ—è¡¨å’Œåºåˆ—"></a>æ•°ç»„ã€åˆ—è¡¨å’Œåºåˆ—</h2><p>å¦‚æœæƒ³è¡¨ç¤ºå¸¸è§çš„æ•°ç»„æˆ–åˆ—è¡¨ï¼Œé‚£ä¹ˆåªéœ€è¦ä½¿ç”¨æ•´å‹ä½œä¸ºç´¢å¼•çš„è¡¨å³å¯ã€‚åŒæ—¶ï¼Œä¹Ÿä¸éœ€è¦é¢„å…ˆå£°æ˜è¡¨çš„å¤§å°ï¼Œåªéœ€è¦ç›´æ¥åˆå§‹åŒ–æˆ‘ä»¬éœ€è¦çš„å…ƒç´ å³å¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a  = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">10</span> <span class="keyword">do</span> </span><br><span class="line">	a [i] = <span class="built_in">io</span>.<span class="built_in">read</span>()</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>é‰´äºèƒ½å¤Ÿä½¿ç”¨ä»»æ„å€¼å¯¹è¡¨è¿›è¡Œç´¢å¼•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»æ„æ•°å­—ä½œä¸ºç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ã€‚ä¸è¿‡ï¼Œåœ¨Luaè¯­è¨€ä¸­ï¼Œæ•°ç»„ç´¢å¼•æŒ‰ç…§æƒ¯ä¾‹æ˜¯ä»1å¼€å§‹çš„ï¼ˆä¸åƒCè¯­è¨€ä»0å¼€å§‹ï¼‰ï¼ŒLuaè¯­è¨€ä¸­çš„å…¶ä»–å¾ˆå¤šæœºåˆ¶ä¹Ÿéµå¾ªè¿™ä¸ªæƒ¯ä¾‹ã€‚<br>åœ¨æ“ä½œè¡¨æ—¶ï¼Œå¾€å¾€å¿…é¡»äº‹å…ˆè·å–åˆ—è¡¨çš„é•¿åº¦ã€‚åˆ—è¡¨çš„é•¿åº¦å¯ä»¥å­˜æ”¾åœ¨å¸¸é‡ä¸­ï¼Œä¹Ÿå¯ä»¥å­˜æ”¾åœ¨å…¶ä»–å˜é‡æˆ–æ•°æ®ç»“æ„ä¸­ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬æŠŠåˆ—è¡¨çš„é•¿åº¦ä¿æŒåœ¨è¡¨ä¸­æŸä¸ªéæ•°å€¼ç±»å‹çš„å­—æ®µä¸­ã€‚å½“ç„¶ï¼Œåˆ—è¡¨çš„é•¿åº¦ç»å¸¸ä¹Ÿæ˜¯éšå½¢çš„ã€‚è¯·æ³¨æ„ï¼Œç”±äºä¸ºåˆå§‹åŒ–çš„å…ƒç´ å‡ä¸ºnilï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨nilå€¼æ¥æ ‡è®°åˆ—è¡¨çš„ç»“æŸã€‚ä¾‹å¦‚ï¼Œå½“å‘ä¸€ä¸ªåˆ—è¡¨ä¸­å†™å…¥äº†10è¡Œæ•°æ®åï¼Œç”±äºè¯¥åˆ—è¡¨çš„æ•°å€¼ç±»å‹çš„ç´¢å¼•ä¸º1,2,â€¦,10ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆå®¹æ˜“åœ°çŸ¥é“åˆ—è¡¨çš„é•¿åº¦å°±æ˜¯10.è¿™ç§æŠ€å·§åªæœ‰åœ¨åˆ—è¡¨ä¸­ä¸å­˜åœ¨ç©ºæ´æ—¶æ‰æœ‰æ•ˆï¼Œæ­¤æ—¶æˆ‘ä»¬æŠŠè¿™ç§æ‰€æœ‰å…ƒç´ éƒ½ä¸ä¸ºnilçš„æ•°ç»„ç§°ä¸ºåºåˆ—ã€‚<br>Luaè¯­è¨€æä¾›äº†è·å–åºåˆ—é•¿åº¦çš„æ“ä½œç¬¦#ã€‚æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€çœ‹åˆ°çš„ï¼Œå¯¹äºå­—ç¬¦ä¸²è€Œè¨€ï¼Œè¯¥æ“ä½œç¬¦è¿”å›å­—ç¬¦ä¸²çš„å­—èŠ‚æ•°ï¼›å¯¹äºè¡¨è€Œè¨€ï¼Œè¯¥æ“ä½œç¬¦è¿”å›è¡¨å¯¹åº”åºåˆ—çš„é•¿åº¦ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç è¾“å‡ºä¸Šä¾‹ä¸­è¯»å…¥çš„å†…å®¹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i = <span class="number">1</span> ,<span class="number">10</span> <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">print</span>(a[i])</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>é•¿åº¦æ“ä½œç¬¦ä¹Ÿæ“ä½œåºåˆ—æä¾›äº†å‡ ç§æœ‰ç”¨çš„å†™æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(a[#a])			<span class="comment">-- è¾“å‡ºåºåˆ—&#x27;a&#x27;çš„æœ€åä¸€ä¸ªå€¼</span></span><br><span class="line">a[#a] = <span class="literal">nil</span>				<span class="comment">-- ç§»é™¤æœ€åä¸€ä¸ªå€¼</span></span><br><span class="line">a[#a + <span class="number">1</span>] = v			<span class="comment">-- æŠŠ&#x27;v&#x27;åŠ åˆ°åºåˆ—çš„æœ€å</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºä¸­é—´å­˜åœ¨ç©ºæ´çš„åˆ—è¡¨è€Œè¨€ï¼Œåºåˆ—é•¿åº¦æ“ä½œç¬¦æ˜¯ä¸å¯é çš„ï¼Œå®ƒåªèƒ½ç”¨äºåºåˆ—ã€‚æ›´å‡†ç¡®åœ°è¯´ï¼Œåºåˆ—æ˜¯ç”±æŒ‡å®šçš„nä¸ªæ­£æ•°æ•°å€¼ç±»å‹çš„é”®æ‰€ç»„æˆé›†åˆ[1,â€¦,n]å½¢æˆçš„è¡¨ã€‚ç‰¹åˆ«åœ°ï¼Œä¸åŒ…å«æ•°å€¼ç±»å‹é”®çš„è¡¨å°±æ˜¯é•¿åº¦ä¸ºé›¶çš„åºåˆ—ã€‚<br>å°†é•¿åº¦æ“ä½œç¬¦ç”¨äºå­˜åœ¨ç©ºæ´çš„åˆ—è¡¨çš„è¡Œä¸ºæ˜¯Luaè¯­è¨€ä¸­å…·æœ‰äº‰è®®çš„å†…å®¹ä¹‹ä¸€ã€‚åœ¨è¿‡å»å‡ å¹´ä¸­ï¼Œå¾ˆå¤šäººå»ºè®®åœ¨æ“ä½œå­˜åœ¨ç©ºæ´çš„åˆ—è¡¨æ—¶ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿæœ‰äººå»ºè®®æ‰©å±•é•¿åº¦æ“ä½œç¬¦çš„è¯­ä¹‰ã€‚ç„¶è€Œï¼Œè¿™äº›å»ºè®®éƒ½æ˜¯è¯´èµ·æ¥å®¹æ˜“åšèµ·æ¥éš¾ã€‚å…¶æ ¹æºåœ¨äºåˆ—è¡¨å®é™…ä¸Šæ˜¯ä¸€ä¸ªè¡¨ï¼Œè€Œå¯¹äºè¡¨æ¥è¯´ï¼Œâ€œé•¿åº¦â€çš„æ¦‚å¿µåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯ä¸å®¹æ˜“ç†è§£çš„ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;&#125;</span><br><span class="line">a[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">a[<span class="number">2</span>] = <span class="literal">nil</span>    <span class="comment">--ä»€ä¹ˆä¹Ÿæ²¡æœ‰åš</span></span><br><span class="line">a[<span class="number">3</span>] = <span class="number">1</span></span><br><span class="line">a[<span class="number">4</span>] = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¿™é‡Œå¯ä»¥å¾ˆå®¹æ˜“ç¡®å®šè¿™æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º4ã€åœ¨ç´¢å¼•2çš„ä½ç½®ä¸Šå­˜åœ¨ç©ºæ´çš„åˆ—è¡¨ã€‚ä¸è¿‡ï¼Œå¯¹äºä¸‹é¢è¿™ä¸ªç±»ä¼¼çš„ç¤ºä¾‹æ˜¯å¦ä¹Ÿå¦‚æ­¤å‘¢ï¼Ÿ</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;&#125;</span><br><span class="line">a[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">a[<span class="number">1000</span>] = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>æ˜¯å¦åº”è¯¥è®¤ä¸ºa æ˜¯ä¸€ä¸ªå…·æœ‰10000ä¸ªå…ƒç´ ï¼Œ9998ä¸ªç©ºæ´çš„åˆ—è¡¨ï¼Ÿå¦‚æœä»£ç è¿›è¡Œäº†å¦‚ä¸‹çš„æ“ä½œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a[<span class="number">10000</span>] = <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆè¯¥åˆ—è¡¨çš„é•¿åº¦ä¼šå˜æˆå¤šå°‘ï¼Ÿç”±äºä»£ç åˆ é™¤äº†æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¯¥åˆ—è¡¨çš„é•¿åº¦æ˜¯ä¸æ˜¯å˜æˆäº†9999ï¼Ÿæˆ–è€…ç”±äºä»£ç åªæ˜¯å°†æœ€åä¸€ä¸ªå…ƒç´ å˜æˆäº†nilï¼Œè¯¥åˆ—è¡¨çš„é•¿åº¦ä»ç„¶æ˜¯10000ï¼Ÿåˆæˆ–è€…è¯¥åˆ—è¡¨çš„é•¿åº¦ç¼©æˆäº†1ï¼Ÿ<br>å¦ä¸€ç§å¸¸è§çš„å»ºè®®æ˜¯è®©#æ“ä½œç¬¦è¿”å›è¡¨ä¸­å…¨éƒ¨å…ƒç´ çš„æ•°é‡ã€‚è™½ç„¶è¿™ç§è¯­ä¹‰å¬èµ·æ¥æ¸…æ™°ä¸”å®šä¹‰æ˜ç¡®ï¼Œä½†å¹¶éç‰¹åˆ«æœ‰ç”¨å’Œç¬¦åˆç›´è§‰ã€‚è¯·è€ƒè™‘ä¸‹æˆ‘ä»¬åœ¨æ­¤è®¨è®ºè¿‡çš„æ‰€æœ‰ä¾‹å­ï¼Œç„¶åæ€è€ƒä¸€ä¸‹è¿™äº›ä¾‹å­è€Œè¨€ï¼Œä¸ºä»€ä¹ˆè®©#æ“ä½œç¬¦è¿”å›è¡¨ä¸­å…¨éƒ¨å…ƒç´ çš„æ•°é‡å¹¶éç‰¹å¤‡æœ‰ç”¨ã€‚<br>æ›´å¤æ‚çš„åˆ—è¡¨æ˜¯ä»¥nilç»“å°¾çš„æƒ…å†µã€‚è¯·é—®å¦‚ä¸‹çš„åˆ—è¡¨çš„é•¿åº¦æ˜¯å¤šå°‘ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="literal">nil</span>,<span class="literal">nil</span>&#125;</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œå¯¹äºLuaè¯­è¨€è€Œè¨€ï¼Œä¸€ä¸ªä¸ºnilçš„å­—æ®µå’Œä¸€ä¸ªä¸å­˜åœ¨çš„å…ƒç´ æ²¡æœ‰åŒºåˆ«ã€‚å› æ­¤ï¼Œä¸Šè¿°åˆ—è¡¨ä¸{10,20,30}æ˜¯ç­‰ä»·çš„ï¼Œå…¶é•¿åº¦ä¸º3ï¼Œè€Œä¸æ˜¯5.<br>å¯ä»¥å°†ä»¥nilç»“å°¾çš„åˆ—è¡¨å½“ä½œä¸€ç§éå¸¸ç‰¹æ®Šçš„æƒ…å†µã€‚ä¸è¿‡ï¼Œå¾ˆå¤šåˆ—è¡¨æ—¶é€šè¿‡é€ä¸ªæ·»åŠ å„ä¸ªå…ƒç´ åˆ›å»ºå‡ºæ¥çš„ã€‚ä»»ä½•æŒ‰ç…§è¿™ç§æ–¹å¼æ„é€ å‡ºæ¥çš„å¸¦æœ‰ç©ºæ´çš„åˆ—è¡¨ï¼Œå…¶æœ€åä¸€å®šå­˜åœ¨ä¸ºnilçš„å€¼ã€‚<br>å°½ç®¡è®¨è®ºäº†è¿™ä¹ˆå¤šï¼Œç¨‹åºä¸­çš„å¤§å¤šæ•°åˆ—è¡¨å…¶å®éƒ½æ˜¯åºåˆ—ã€‚æ­£å› å¦‚æ­¤ï¼Œåœ¨å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨é•¿åº¦æ“ä½œç¬¦æ˜¯å®‰å…¨çš„ã€‚åœ¨ç¡®å®éœ€è¦å¤„ç†å­˜åœ¨ç©ºæ´çš„åˆ—è¡¨æ—¶ï¼Œåº”è¯¥å°†åˆ—è¡¨çš„é•¿åº¦æ˜¾å¼åœ°ä¿å­˜èµ·æ¥ã€‚</p>
<h2 id="éå†è¡¨"><a href="#éå†è¡¨" class="headerlink" title="éå†è¡¨"></a>éå†è¡¨</h2><p>æˆ‘ä»¬å¯ä»¥ç”¨æ˜¯pairsè¿­ä»£å™¨éå†è¡¨ä¸­çš„é”®å€¼å¯¹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = &#123;<span class="number">10</span>, <span class="built_in">print</span>, x = <span class="number">12</span>, k = <span class="string">&quot;hi&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> k ,v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1	10</span></span><br><span class="line"><span class="comment">-- k	hi</span></span><br><span class="line"><span class="comment">-- 2	function:0x420610</span></span><br><span class="line"><span class="comment">-- x 	12</span></span><br></pre></td></tr></table></figure>
<p>å—é™äºè¡¨åœ¨Luaä¸­çš„åº•å±‚å®ç°æœºåˆ¶ï¼Œéå†è¿‡ç¨‹ä¸­å…ƒç´ çš„å‡ºç°é¡ºåºå¯èƒ½æ˜¯éšæœºçš„ï¼Œç›¸åŒçš„ç¨‹åºåœ¨æ¯æ¬¡è¿è¡Œæ—¶ä¹Ÿå¯èƒ½äº§ç”Ÿä¸åŒçš„é¡ºåºã€‚å”¯ä¸€å¯ä»¥ç¡®å®šçš„æ˜¯ï¼Œåœ¨éå†çš„è¿‡ç¨‹ä¸­æ¯ä¸ªå…ƒç´ ä¼šä¸”åªä¼šå‡ºç°ä¸€æ¬¡ã€‚<br>å¯¹äºåˆ—è¡¨è€Œè¨€ï¼Œå¯ä»¥ä½¿ç”¨ipairsè¿­ä»£å™¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = &#123;<span class="number">10</span>, <span class="built_in">print</span>, x = <span class="number">12</span>, k = <span class="string">&quot;hi&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> k ,v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1	10</span></span><br><span class="line"><span class="comment">-- 2	hi</span></span><br><span class="line"><span class="comment">-- 3	function:0x420610</span></span><br><span class="line"><span class="comment">-- 4 	12</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼ŒLuaä¼šç¡®ä¿éå†æ˜¯æŒ‰ç…§é¡ºåºè¿›è¡Œçš„ã€‚<br>å¦ä¸€ç§éå†åºåˆ—çš„æ–¹æ³•æ˜¯ä½¿ç”¨æ•°å€¼å‹forå¾ªç¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = &#123;<span class="number">10</span>, <span class="built_in">print</span>, x = <span class="number">12</span>, k = <span class="string">&quot;hi&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> k = <span class="number">1</span> , #t <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">print</span>(k , t[k])</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1	10</span></span><br><span class="line"><span class="comment">-- 2	hi</span></span><br><span class="line"><span class="comment">-- 3	function:0x420610</span></span><br><span class="line"><span class="comment">-- 4 	12</span></span><br></pre></td></tr></table></figure>
<h2 id="å®‰å…¨è®¿é—®"><a href="#å®‰å…¨è®¿é—®" class="headerlink" title="å®‰å…¨è®¿é—®"></a>å®‰å…¨è®¿é—®</h2><p>è€ƒè™‘å¦‚ä¸‹çš„æƒ…æ™¯ï¼šæˆ‘ä»¬æƒ³ç¡®è®¤åœ¨æŒ‡å®šçš„åº“ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªå‡½æ•°ã€‚å¦‚æœæˆ‘ä»¬ç¡®å®šè¿™ä¸ªåº“ç¡®å®å­˜åœ¨ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ä½¿ç”¨<code>if lib.foo then ...;</code>å¦åˆ™ï¼Œå°±å¾—ä½¿ç”¨å½¢å¦‚<code>if lib and lib.foo then ...</code>çš„è¡¨è¾¾å¼ã€‚<br>å½“è¡¨çš„åµŒå¥—æ·±åº¦å˜å¾—æ¯”è¾ƒæ·±æ—¶ï¼Œè¿™ç§å†™æ³•å°±ä¼šå¾ˆå®¹æ˜“å‡ºé”™ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">zip = company <span class="keyword">and</span> company.director <span class="keyword">and</span> company.director.address <span class="keyword">and</span> company.director.address.zipcode</span><br></pre></td></tr></table></figure>
<p>è¿™ç§å†™æ³•ä¸ä»…å†—é•¿è€Œä¸”ä½æ•ˆï¼Œè¯¥å†™æ³•åœ¨ä¸€æ¬¡æˆåŠŸçš„è®¿é—®ä¸­å¯¹è¡¨è¿›è¡Œäº†6æ¬¡è®¿é—®è€Œé3è¯è®¿é—®ã€‚<br>å¯¹äºè¿™ç§æƒ…æ™¯ï¼Œè¯¸å¦‚C#çš„ä¸€äº›ç¼–ç¨‹è¯­è¨€æä¾›äº†ä¸€ç§å®‰å…¨è®¿é—®æ“ä½œç¬¦ã€‚åœ¨C#ä¸­ï¼Œè¿™ç§å®‰å…¨è®¿é—®æ“ä½œç¬¦è¢«è®°ä¸º<code>?.</code>ã€‚ä¾‹å¦‚ï¼Œå¯¹äºè¡¨è¾¾å¼<code>a?.b</code>ï¼Œå½“aä¸ºnilæ—¶ï¼Œå…¶ç»“æœæ˜¯nilè€Œä¸ä¼šäº§ç”Ÿå¼‚å¸¸ã€‚ä½¿ç”¨è¿™ç§æ“ä½œç¬¦ï¼Œå¯ä»¥å°†ä¸Šä¾‹æ”¹ä¸ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">zip = company?.director?.address?.zipcode</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸Šè¿°çš„æˆå‘˜è®¿é—®è¿‡ç¨‹ä¸­å‡ºç°nilï¼Œå®‰å…¨è®¿é—®æ“ä½œç¬¦ä¼šæ­£ç¡®åœ°å¤„ç†nilå¹¶æœ€ç»ˆè¿”å›nilã€‚<br>Luaè¯­è¨€å¹¶æ²¡æœ‰æä¾›å®‰å…¨è®¿é—®æ“ä½œç¬¦ï¼Œå¹¶ä¸”è®¤ä¸ºä¹Ÿä¸åº”è¯¥æä¾›è¿™ç§æ“ä½œç¬¦ã€‚ä¸€æ–¹é¢ï¼ŒLuaè¯­è¨€åœ¨è®¾è®¡ä¸ŠåŠ›æ±‚ç®€å•ï¼›å¦ä¸€æ–¹é¢ï¼Œè¿™ç§æ“ä½œç¬¦ä¹Ÿæ˜¯éå¸¸æœ‰äº‰è®®çš„ï¼Œå¾ˆå¤šäººå°±æ— ç†ç”±è®¤ä¸ºè¯¥æ“ä½œç¬¦å®¹æ˜“å¯¼è‡´æ— æ„çš„ç¼–ç¨‹é”™è¯¯ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¶ä»–è¯­å¥åœ¨Luaè¯­è¨€ä¸­æ¨¡æ‹Ÿå®‰å…¨è®¿é—®æ“ä½œç¬¦ã€‚<br>å¯¹äºè¡¨è¾¾å¼ <code>a or &#123;&#125;</code>ï¼Œå½“aä¸ºnilæ—¶å…¶ç»“æœæ˜¯ä¸€ä¸ªç©ºè¡¨ã€‚å› æ­¤ï¼Œå¯¹äºè¡¨è¾¾å¼<code>(a or &#123;&#125;).b</code>ï¼Œå½“aä¸ºnilæ—¶å…¶ç»“æœä¹ŸåŒæ ·æ˜¯nilã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†ä¹‹å‰çš„ä¾‹å­é‡å†™ä¸ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">zip = (((company <span class="keyword">or</span> &#123;&#125;).director <span class="keyword">or</span> &#123;&#125;).address <span class="keyword">or</span> &#123;&#125;).zipcode</span><br></pre></td></tr></table></figure>
<p>å†è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†™å¾—æ›´çŸ­æ›´é«˜æ•ˆï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">E = &#123;&#125;</span><br><span class="line">...</span><br><span class="line">zip = (((company <span class="keyword">or</span> E).director <span class="keyword">or</span> E).address <span class="keyword">or</span> E).zipcode</span><br></pre></td></tr></table></figure>
<p>ç¡®å®ï¼Œä¸Šè¿°çš„è¯­æ³•æ¯”å®‰å…¨è®¿é—®æ“ä½œç¬¦æ›´åŠ å¤æ‚ã€‚ä¸è¿‡å°½ç®¡å¦‚æ­¤ï¼Œè¡¨ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µåéƒ½åªè¢«ä½¿ç”¨äº†ä¸€æ¬¡ï¼Œä»è€Œä¿è¯äº†å°½å¯èƒ½å°‘åœ°å¯¹è¡¨è¿›è¡Œè®¿é—®ï¼›åŒæ—¶ï¼Œè¿˜é¿å…äº†å‘è¯­è¨€ä¸­å¼•å…¥æ–°çš„æ“ä½œç¬¦ã€‚</p>
<h2 id="è¡¨æ ‡å‡†åº“"><a href="#è¡¨æ ‡å‡†åº“" class="headerlink" title="è¡¨æ ‡å‡†åº“"></a>è¡¨æ ‡å‡†åº“</h2><p>è¡¨æ ‡å‡†åº“æä¾›äº†æ“ä½œåˆ—è¡¨å’Œåºåˆ—çš„ä¸€äº›å¸¸ç”¨å‡½æ•°ã€‚<br>å‡½æ•°<code>table.insert</code>å‘åºåˆ—çš„æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå…¶ä»–å…ƒç´ ä¾æ¬¡åç§»ã€‚ä¾‹å¦‚ï¼Œå¯¹äºåˆ—è¡¨t &#x3D; {10,20,30}ï¼Œåœ¨è°ƒç”¨table.insert(t,1,15)åå®ƒä¼šå˜æˆ{15,10,20,30}ï¼Œå¦ä¸€ç§ç‰¹æ®Šä½†å¸¸è§çš„æƒ…å†µæ˜¯è°ƒç”¨insertæ—¶ä¸æŒ‡å®šä½ç½®ï¼Œæ­¤æ—¶å‡½æ•°ä¼šåœ¨åºåˆ—çš„æœ€åæ’å…¥æŒ‡å®šçš„å…ƒç´ ï¼Œä¸ä¼šç§»åŠ¨ä»»ä½•å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œä¸‹è¿°ä»£ç ä»æ ‡å‡†è¾“å…¥ä¸­å®‰è¡Œè¯»å…¥å†…å®¹å¹¶å°†å…¶ä¿å­˜åˆ°ä¸€ä¸ªåºåˆ—ä¸­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span> </span><br><span class="line">	<span class="built_in">table</span>.<span class="built_in">insert</span>(t,line)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(#t)</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°<code>table.remove</code>åˆ é™¤åå¹¶è¿”å›åºåˆ—æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œç„¶åå°†å…¶åçš„å…ƒç´ å‘å‰ç§»åŠ¨å¡«å……åˆ é™¤å…ƒç´ åé€ æˆçš„ç©ºæ´ã€‚å¦‚æœåœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶ä¸æŒ‡å®šä½ç½®ï¼Œè¯¥å‡½æ•°ä¼šåˆ é™¤åºåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚<br>å€ŸåŠ©è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°æ ˆã€é˜Ÿåˆ—å’ŒåŒç«¯é˜Ÿåˆ—ã€‚ä»¥æ ˆçš„å®ç°ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨t &#x3D; {}æ¥è¡¨ç¤ºæ ˆï¼ŒPushæ“ä½œå¯ä»¥ä½¿ç”¨table.insert(t,x)å®ç°ï¼ŒPopæ“ä½œå¯ä»¥ä½¿ç”¨table.remove(t)å®ç°ï¼Œè°ƒç”¨table.insert(t,1,x)å¯ä»¥å®ç°åœ¨æ ˆçš„é¡¶éƒ¨è¿›è¡Œæ’å…¥ï¼Œè°ƒç”¨table.remove(t,1)å¯ä»¥ä»æ ˆçš„é¡¶éƒ¨ç§»é™¤ã€‚ç”±äºåä¸¤ä¸ªå‡½æ•°è®¾è®¡è¡¨ä¸­å…¶ä»–å…ƒç´ çš„ç§»åŠ¨ï¼Œæ‰€ä»¥å…¶è¿è¡Œæ•ˆç‡å¹¶ä¸æ˜¯ç‰¹åˆ«çš„é«˜ã€‚å½“ç„¶ï¼Œç”±äºtableæ ‡å‡†åº“ä¸­çš„è¿™äº›å‡½æ•°æ˜¯ä½¿ç”¨Cè¯­è¨€å®ç°çš„ï¼Œæ‰€ä»¥ç§»åŠ¨å…ƒç´ æ‰€æ¶‰åŠå¾ªç¯çš„æ€§èƒ½å¼€é”€ä¹Ÿå¹¶ä¸æ˜¯å¤ªæ˜‚è´µã€‚å› è€Œï¼Œå¯¹äºå‡ ç™¾ä¸ªå…ƒç´ ç»„æˆçš„å°æ•°ç»„æ¥è¯´è¿™ç§å®ç°å·²ç»å¤Ÿäº†ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaä½¿ç”¨åç¨‹å®ç°å¤šçº¿ç¨‹</title>
    <url>/11143.html</url>
    <content><![CDATA[<p>åç¨‹èƒ½å¤Ÿå®ç°ä¸€ç§åä½œå¼å¤šçº¿ç¨‹ã€‚æ¯ä¸ªåç¨‹éƒ½ç­‰ä»·äºä¸€ä¸ªçº¿ç¨‹ã€‚ä¸€å¯¹yield-resumeå¯ä»¥å°†æ‰§è¡Œæƒåœ¨ä¸åŒçº¿ç¨‹ä¹‹é—´åˆ‡æ¢ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä¸è¿‡ï¼Œä¸æ™®é€šçš„å¤šçº¿ç¨‹çš„ä¸åŒï¼Œåç¨‹æ˜¯éæŠ¢å çš„ã€‚å½“ä¸€ä¸ªåç¨‹æ­£åœ¨è¿ä½œæ—¶ï¼Œæ˜¯æ— æ³•ä»å¤–éƒ¨åœæ­¢å®ƒçš„ã€‚åªæœ‰å½“åç¨‹æ˜¾å¼åœ°è¦æ±‚æ—¶å®ƒæ‰ä¼šæŒ‚èµ·æ‰§è¡Œã€‚å¯¹äºæœ‰äº›åº”ç”¨è€Œè¨€ï¼Œè¿™å¹¶æ²¡æœ‰é—®é¢˜ï¼Œè€Œå¯¹äºå¦å¤–ä¸€äº›åº”ç”¨åˆ™ä¸è¡Œã€‚å½“ä¸å­˜åœ¨æŠ¢å æ—¶ï¼Œç¼–ç¨‹ç®€å•å¾—å¤šã€‚ç”±äºåœ¨ç¨‹åºä¸­æ‰€æœ‰çš„çº¿ç¨‹é—´åŒæ­¥éƒ½æ˜¯æ˜¾å¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— é¡»ä¸ºçº¿ç¨‹åŒæ­¥é—®é¢˜æŠ“ç‹‚ï¼Œåªéœ€è¦ç¡®ä¿ä¸€ä¸ªåç¨‹åªåœ¨å®ƒçš„ä¸´ç•ŒåŒºä¹‹å¤–è°ƒç”¨yieldå³å¯ã€‚</p>
<p>ä¸è¿‡ï¼Œå¯¹äºéæŠ¢å å¼å¤šçº¿ç¨‹æ¥è¯´ï¼Œåªè¦æœ‰ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº†é˜»å¡æ“ä½œï¼Œæ•´ä¸ªç¨‹åºåœ¨è¯¥æ“ä½œå®Œæˆå‰éƒ½ä¼šé˜»å¡ã€‚å¯¹äºå¾ˆå¤šåº”ç”¨æ¥è¯´ï¼Œè¿™ç§è¡Œä¸ºæ˜¯æ— æ³•æ¥å—çš„ï¼Œè€Œè¿™ä¹Ÿæ­£æ˜¯å¯¼è‡´è®¸å¤šç¨‹åºå‘˜ä¸æŠŠåç¨‹çœ‹ä½œä¼ ç»Ÿå¤šçº¿ç¨‹çš„ä¸€ç§å®ç°çš„åŸå› ã€‚<br>è®©æˆ‘ä»¬å‡è®¾ä¸€ä¸ªå…¸å‹çš„å¤šçº¿ç¨‹çš„åœºæ™¯ï¼šæˆ‘ä»¬å¸Œæœ›é€šè¿‡HTTPä¸‹è½½å¤šä¸ªè¿œç¨‹æ–‡ä»¶ã€‚ä¸ºäº†ä¸‹è½½å¤šä¸ªè¿œç¨‹æ–‡ä»¶ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆçŸ¥é“å¦‚ä½•ä¸‹è½½ä¸€ä¸ªè¿œç¨‹æ–‡ä»¶ã€‚è¦ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼Œå¿…é¡»å…ˆæ‰“å¼€ä¸€ä¸ªåˆ°å¯¹åº”ç«™ç‚¹çš„è¿æ¥ï¼Œç„¶åå‘é€ä¸‹è½½æ–‡ä»¶çš„è¯·æ±‚ï¼Œæ¥æ”¶æ–‡ä»¶ï¼Œæœ€åå…³é—­è¿æ¥ã€‚åœ¨Luaè¯­è¨€ä¸­ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚é¦–å…ˆï¼ŒåŠ è½½LuaSocketåº“ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> socket = <span class="built_in">require</span> <span class="string">&quot;socket&quot;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œå®šä¹‰ä¸»æœºå’Œè¦ä¸‹è½½çš„æ–‡ä»¶ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»Luaè¯­è¨€å®˜ç½‘ä¸‹è½½Lua5.3æ‰‹å†Œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">host = <span class="string">&quot;www.lua.org&quot;</span></span><br><span class="line">file = <span class="string">&quot;/manual/5.3/manual.html&quot;</span></span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œæ‰“å¼€ä¸€ä¸ªTCPè¿æ¥ï¼Œè¿æ¥åˆ°ç«™ç‚¹çš„80ç«¯å£ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">c = <span class="built_in">assert</span>(socket.connect(host,<span class="number">80</span>))</span><br></pre></td></tr></table></figure>
<p>è¿™æ­¥æ“ä½œè¿”å›ä¸€ä¸ªè¿æ¥å¯¹è±¡ï¼Œå¯ä»¥ç”¨å®ƒæ¥å‘é€ä¸‹è½½æ–‡ä»¶çš„è¯·æ±‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> request = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;GET %s HTTP/1.0\r\nhost: %s\r\n\r\n&quot;</span>,file,host)</span><br><span class="line">c:send(request)</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œä»¥1KBä¸ºä¸€å—è¯»å–æ–‡ä»¶ï¼Œå¹¶å°†æ¯å—å†™å…¥åˆ°æ ‡å‡†è¾“å‡ºä¸­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">repeat</span></span><br><span class="line">	<span class="keyword">local</span> s ,<span class="built_in">status</span>,partial = c:receive(<span class="number">2</span>^<span class="number">10</span>)</span><br><span class="line">	<span class="built_in">io</span>.<span class="built_in">write</span>(s <span class="keyword">or</span> partial)</span><br><span class="line"><span class="keyword">until</span> <span class="built_in">status</span> == <span class="string">&quot;closed&quot;</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°receiveè¦ä¹ˆè¿”å›å®ƒè¯»å–åˆ°çš„å­—ç¬¦ä¸²ï¼Œè¦ä¹ˆåœ¨å‘ç”Ÿé”™è¯¯æ—¶è¿”å›nilå¤–åŠ é”™è¯¯ç åŠå‡ºé”™å‰è¯»å–åˆ°çš„å†…å®¹ã€‚å½“ä¸»æœºå…³é—­è¿æ¥æ—¶ï¼ŒæŠŠè¾“å…¥æµä¸­å‰©ä½™çš„å†…å®¹æ‰“å°å‡ºæ¥ï¼Œç„¶åé€€å‡ºæ¥æ”¶å¾ªç¯ã€‚<br>ä¸‹è½½å®Œæ–‡ä»¶åï¼Œå…³é—­è¿æ¥ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">c:<span class="built_in">close</span>()</span><br></pre></td></tr></table></figure>
<p>æ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå†å›åˆ°ä¸‹è½½å¤šä¸ªæ–‡ä»¶çš„é—®é¢˜ä¸Šã€‚æœ€ç®€å•çš„åšæ³•æ˜¯é€ä¸ªåœ°ä¸‹è½½æ–‡ä»¶ã€‚ä¸è¿‡ï¼Œè¿™ç§ä¸²è¡Œçš„åšæ³•å¤ªæ…¢äº†ï¼Œå®ƒåªèƒ½åœ¨ä¸‹è½½å®Œä¸€ä¸ªæ–‡ä»¶åå†ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ã€‚å½“è¯»å–ä¸€ä¸ªè¿œç¨‹æ–‡ä»¶æ—¶ï¼Œç¨‹åºæŠŠå¤§éƒ¨åˆ†çš„æ—¶é—´è€—è´¹åœ¨äº†ç­‰å¾…æ•°æ®åˆ°è¾¾ä¸Šã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œç¨‹åºå°†æ—¶é—´è€—è´¹åœ¨äº†å¯¹receiveçš„é˜»å¡è°ƒç”¨ä¸Šã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªç¨‹åºèƒ½å¤ŸåŒæ—¶å¹¶è¡Œä¸‹è½½æ‰€æœ‰æ–‡ä»¶çš„è¯ï¼Œå°±ä¼šå¿«å¾ˆå¤šã€‚å½“ä¸€ä¸ªè¿æ¥æ²¡æœ‰å¯ç”¨æ•°æ®æ—¶ï¼Œç¨‹åºä¾¿å¯ä»¥ä»å…¶ä»–è¿æ¥è¯»å–æ•°æ®ã€‚å¾ˆæ˜æ˜¾ï¼Œåç¨‹ä¸ºæ„é€ è¿™ç§å¹¶å‘ä¸‹è½½çš„ä»£ç ç»“æ„æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªä¸‹è½½ä»»åŠ¡åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æ— å¯ç”¨æ•°æ®æ—¶ï¼Œå®ƒå°±å¯ä»¥å°†æ§åˆ¶æƒä¼ é€’ç»™ä¸€ä¸ªç®€å•çš„è°ƒåº¦å™¨ï¼Œè¿™ä¸ªè°ƒåº¦å™¨å†å»è°ƒç”¨å…¶ä»–çš„çº¿ç¨‹ã€‚<br>åœ¨ç”¨åç¨‹é‡å†™ç¨‹åºå‰ï¼Œæˆ‘ä»¬å…ˆæŠŠä¹‹å‰ä¸‹è½½çš„ä»£ç é‡å†™æˆä¸€ä¸ªå‡½æ•°ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ ä¸‹è½½Webé¡µé¢çš„æ•°æ®</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">download</span> <span class="params">(host,file)</span></span></span><br><span class="line">	<span class="keyword">local</span> c = <span class="built_in">assert</span>(socket.connect(host,<span class="number">80</span>))</span><br><span class="line">	<span class="keyword">local</span> count = <span class="number">0</span></span><br><span class="line">	<span class="keyword">local</span> request = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;GET %s HTTP/1.0\r\nhost:%s\r\n\r\n&quot;</span>,file,host)</span><br><span class="line">	c:send(request)</span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> s ,<span class="built_in">status</span> = receive(c)</span><br><span class="line">		count = count + #s</span><br><span class="line">		<span class="keyword">if</span> <span class="built_in">status</span> == <span class="string">&quot;closed&quot;</span> <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	c:<span class="built_in">close</span>()</span><br><span class="line">	<span class="built_in">print</span>(file,count)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºæˆ‘ä»¬å¯¹è¿œç¨‹æ–‡ä»¶çš„å†…å®¹å¹¶ä¸æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥ä¸éœ€è¦å°†æ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ ‡å‡†è¾“å‡ºä¸­ï¼Œåªè¦è®¡ç®—å¹¶è¾“å‡ºæ–‡ä»¶å¤§å°å³å¯ã€‚<br>åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªè¾…åŠ©å‡½æ•°receiverä»è¿æ¥æ¥æ”¶æ•°æ®ã€‚åœ¨ä¸²è¡Œçš„ä¸‹è½½æ–¹å¼ä¸­ï¼Œreceiveçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">receive</span><span class="params">(connection)</span></span></span><br><span class="line">	<span class="keyword">local</span> s,<span class="built_in">status</span>,partial = connection:receive(<span class="number">2</span>^<span class="number">10</span>)</span><br><span class="line">	<span class="keyword">return</span> s <span class="keyword">or</span> partial,<span class="built_in">status</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å¹¶è¡Œçš„å®ç°ä¸­ï¼Œè¿™ä¸ªå‡½æ•°åœ¨æ¥æ”¶æ•°æ®æ—¶ä¸èƒ½é˜»å¡ã€‚å› æ­¤ï¼Œåœ¨æ²¡æœ‰è¶³å¤Ÿçš„å¯ç”¨æ•°æ®æ—¶ï¼Œè¯¥å‡½æ•°ä¼šæŒ‚èµ·ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">receive</span><span class="params">(connection)</span></span></span><br><span class="line">	connection:settimeout(<span class="number">0</span>) <span class="comment">--ä¸é˜»å¡ </span></span><br><span class="line">	<span class="keyword">local</span> s ,<span class="built_in">status</span>,partial = connection:receive(<span class="number">2</span>^<span class="number">10</span>)</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">status</span> == <span class="string">&quot;timeout&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">coroutine</span>.<span class="built_in">yield</span>(connection)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> s <span class="keyword">or</span> partial,<span class="built_in">status</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨settimeout(0)æ˜¯çš„åç»­æ‰€æœ‰å¯¹è¿æ¥è¿›è¡Œçš„æ“ä½œä¸ä¼šåˆ™å¡ã€‚å¦‚æœè¿”å›çŠ¶æ€ä¸ºâ€timeoutâ€ï¼Œå°±è¡¨ç¤ºè¯¥æ“ä½œåœ¨è¿”å›æ—¶è¿˜æœªå®Œæˆã€‚æ­¤æ—¶ï¼Œçº¿ç¨‹å°±ä¼šæŒ‚èµ·ã€‚ä¼ é€’ç»™yieldçš„éå‡å‚æ•°é€šçŸ¥è°ƒåº¦å™¨çº¿ç¨‹ä»åœ¨æ‰§è¡Œä»»åŠ¡ä¸­ã€‚è¯·æ³¨æ„ï¼Œå³ä½¿åœ¨è¶…æ—¶çš„æƒ…å†µä¸‹ï¼Œè¿æ¥ä¹Ÿä¼šè¿”å›è¶…æ—¶å‰å·²è¯»å–åˆ°çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯å˜é‡partialä¸­çš„å†…å®¹ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ è°ƒåº¦å™¨</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">tasks = &#123;&#125;			<span class="comment">-- æ‰€æœ‰æ´»è·ƒä»»åŠ¡çš„åˆ—è¡¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span> <span class="params">(host,file)</span></span></span><br><span class="line">	<span class="keyword">local</span> co = <span class="built_in">coroutine</span>.<span class="built_in">wrap</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">		download(host,file)</span><br><span class="line">	<span class="keyword">end</span>)</span><br><span class="line">	<span class="built_in">table</span>.<span class="built_in">insert</span>(tasks,co)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dispatch</span> <span class="params">()</span></span></span><br><span class="line">	<span class="keyword">local</span> i = <span class="number">1</span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">if</span> tasks[i] == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">			<span class="keyword">if</span> tasks[<span class="number">1</span>] == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			<span class="keyword">end</span></span><br><span class="line">			i = <span class="number">1</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">		<span class="keyword">local</span> res = tasks[i]()</span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> res <span class="keyword">then</span></span><br><span class="line">			<span class="built_in">table</span>.<span class="built_in">remove</span>(tasks,i)</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			i = i + <span class="number">1</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨tasksä¸ºè°ƒåº¦å™¨ä¿å­˜ç€æ‰€æœ‰æ­£åœ¨è¿è¡Œä¸­çš„çº¿ç¨‹çš„åˆ—è¡¨ã€‚å‡½æ•°getä¿è¯æ¯ä¸ªä¸‹è½½ä»»åŠ¡è¿è¡Œåœ¨ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ä¸­ã€‚è°ƒåº¦å™¨æœ¬èº«ä¸»è¦å°±æ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œå®ƒéå†æ‰€æœ‰çš„çº¿ç¨‹ï¼Œé€ä¸ªå”¤é†’å®ƒä»¬ã€‚è°ƒåº¦å™¨è¿˜å¿…é¡»åœ¨çº¿ç¨‹å®Œæˆä»»åŠ¡åï¼Œå°†è¯¥çº¿ç¨‹ä»åˆ—è¡¨ä¸­åˆ é™¤ã€‚åœ¨æ‰€æœ‰çº¿ç¨‹éƒ½å®Œæˆè¿è¡Œåï¼Œè°ƒåº¦å™¨åœæ­¢å¾ªç¯ã€‚<br>æœ€åï¼Œä¸»ç¨‹åºåˆ›å»ºæ‰€æœ‰éœ€è¦çš„çº¿ç¨‹å¹¶è°ƒèµ·è°ƒåº¦å™¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦ä»Luaå®˜ç½‘ä¸‹è½½å‡ ä¸ªå‘è¡ŒåŒ…ï¼Œä¸»ç¨‹åºå¯èƒ½å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">get(<span class="string">&quot;www.lua.org&quot;</span>,<span class="string">&quot;/ftp/lua-5.3.2.tar.gz&quot;</span>)</span><br><span class="line">get(<span class="string">&quot;www.lua.org&quot;</span>,<span class="string">&quot;/ftp/lua-5.3.1.tar.gz&quot;</span>)</span><br><span class="line">get(<span class="string">&quot;www.lua.org&quot;</span>,<span class="string">&quot;/ftp/lua-5.3.0.tar.gz&quot;</span>)</span><br><span class="line">get(<span class="string">&quot;www.lua.org&quot;</span>,<span class="string">&quot;/ftp/lua-5.2.4.tar.gz&quot;</span>)</span><br><span class="line">get(<span class="string">&quot;www.lua.org&quot;</span>,<span class="string">&quot;/ftp/lua-5.2.3.tar.gz&quot;</span>)</span><br><span class="line">dispatch()</span><br></pre></td></tr></table></figure>
<p>åœ¨ç¬”è€…çš„æœºå™¨ä¸Šï¼Œä¸²è¡Œå®ç°èŠ±äº†15ç§’ä¸‹è½½åˆ°è¿™äº›æ–‡ä»¶ï¼Œè€Œåç¨‹å®ç°æ¯”ä¸²è¡Œå®ç°å¿«äº†ä¸‰å€å¤šã€‚<br>å°½ç®¡é€Ÿåº¦æé«˜äº†ï¼Œä½†æœ€åä¸€ç§å®ç°è¿˜æœ‰å¾ˆå¤§çš„ä¼˜åŒ–ç©ºé—´ã€‚å½“è‡³å°‘ç”±ä¸€ä¸ªçº¿ç¨‹æœ‰æ•°æ®å¯è¯»å–æ—¶ä¸ä¼šæœ‰é—®é¢˜ï¼›ç„¶è€Œï¼Œå¦‚æœæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ²¡æœ‰æ•°æ®å¯è¯»ï¼Œè°ƒåº¦ç¨‹åºå°±ä¼šé™·å…¥å¿™ç­‰å¾…ï¼Œä¸æ–­åœ°ä»ä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æ¥æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®å¯è¯»ã€‚è¿™æ ·ï¼Œä¼šå¯¼è‡´åç¨‹ç‰ˆçš„å®ç°æ¯”ä¸²è¡Œç‰ˆå®ç°è€—è´¹å¤šè¾¾3å€çš„CPUæ—¶é—´ã€‚<br>ä¸ºäº†é¿å…è¿™æ ·çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨LuaSocketä¸­çš„å‡½æ•°selectï¼Œè¯¥å‡½æ•°å…è®¸ç¨‹åºé˜»å¡ç›´åˆ°ä¸€ç»„å¥—æ¥å­—çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ã€‚è¦å®ç°è¿™ç§æ”¹åŠ¨ï¼Œåªéœ€è¦ä¿®æ”¹è°ƒåº¦å™¨å³å¯ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ ä½¿ç”¨selectçš„è°ƒåº¦å™¨</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dispatch</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">local</span> i = <span class="number">1</span></span><br><span class="line">	<span class="keyword">local</span> timedout = &#123;&#125;</span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">if</span> tasks[i] == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">			<span class="keyword">if</span> tasks[<span class="number">1</span>] == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			<span class="keyword">end</span></span><br><span class="line">			i = <span class="number">1</span></span><br><span class="line">			timedout =&#123;&#125;</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">		<span class="keyword">local</span> res = tasks[i]()</span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> res <span class="keyword">then</span></span><br><span class="line">			<span class="built_in">table</span>.<span class="built_in">remove</span>(tasks,i)</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			i = i + <span class="number">1</span></span><br><span class="line">			timeout[#timedout + <span class="number">1</span>] = res</span><br><span class="line">			<span class="keyword">if</span> #timedout == #tasks <span class="keyword">then</span></span><br><span class="line">				socket.<span class="built_in">select</span>(timedout)</span><br><span class="line">			<span class="keyword">end</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å¾ªç¯ä¸­ï¼Œæ–°çš„è°ƒåº¦å™¨å°†æ‰€æœ‰è¶…æ—¶çš„è¿æ¥æ”¶é›†åˆ°è¡¨timedoutä¸­ã€‚è¯·è®°ä½ï¼Œå‡½æ•°receiveå°†è¿™ç§è¶…æ—¶çš„è¿æ¥ä¼ é€’ç»™yieldï¼Œç„¶åç”±resumeè¿”å›ã€‚å¦‚æœæ‰€æœ‰çš„è¿æ¥å‡è¶…æ—¶ï¼Œé‚£ä¹ˆè°ƒåº¦å™¨è°ƒç”¨selectç­‰å¾…è¿™äº›è¿æ¥çš„çŠ¶æ€å°±ä¼šå‘ç”Ÿæ”¹å˜ã€‚è¿™ä¸ªæœ€ç»ˆçš„å®ç°ä¸ä¸Šä¸€ä¸ªä½¿ç”¨åç¨‹çš„å®ç°ä¸€æ ·å¿«ã€‚å¦å¤–ï¼Œç”±äºå®ƒä¸ä¼šæœ‰å¿™ç­‰å¾…ï¼Œæ‰€ä»¥ä¸ä¸²è¡Œå®ç°è€—è´¹çš„CPUèµ„æºä¸€æ ·å¤šã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaåç¨‹</title>
    <url>/28748.html</url>
    <content><![CDATA[<p>åç¨‹å¯ä»¥é¢ å€’è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…çš„å…³ç³»ï¼Œè€Œä¸”è¿™ç§çµæ´»æ€§è§£å†³äº†è½¯ä»¶æ¶æ„ä¸­è¢«ç§°ä¸ºâ€œè°æ˜¯è€å¤§â€æˆ–è€…â€è°æ‹¥æœ‰ä¸»å¾ªç¯â€œçš„é—®é¢˜ã€‚è¿™æ­£æ˜¯å¯¹è¯¸å¦‚äº‹ä»¶é©±åŠ¨ç¼–ç¨‹ã€é€šè¿‡æ„é€ å™¨æ„å»ºè¿­ä»£å™¨å’Œåä½œå¼å¤šçº¿ç¨‹ç­‰å‡ ä¸ªçœ‹ä¸Šå»å¹¶ä¸ç›¸å…³çš„é—®é¢˜çš„æ³›åŒ–ï¼Œè€Œåç¨‹ä»¥ç®€å•å’Œé«˜æ•ˆçš„æ–¹å¼è§£å†³äº†è¿™äº›é—®é¢˜ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»å¤šçº¿ç¨‹çš„è§’åº¦çœ‹ï¼Œåç¨‹ä¸çº¿ç¨‹ç±»ä¼¼ï¼šåç¨‹æ˜¯ä¸€ç³»åˆ—çš„å¯æ‰§è¡Œè¯­å¥ï¼Œæ‹¥æœ‰è‡ªå·±çš„æ ˆã€å±€éƒ¨å˜é‡å’ŒæŒ‡ä»¤æŒ‡é’ˆï¼ŒåŒæ—¶åç¨‹åˆä¸å…¶ä»–åç¨‹å…±äº«äº†å…¨å±€å˜é‡å’Œå…¶ä»–å‡ ä¹ä¸€åˆ‡èµ„æºã€‚çº¿ç¨‹ä¸åç¨‹çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œä¸€ä¸ªå¤šçº¿ç¨‹ç¨‹åºå¯ä»¥å¹¶è¡Œè¿è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œè€Œåç¨‹å´éœ€è¦å½¼æ­¤åä½œåœ°è¿è¡Œï¼Œå³åœ¨ä»»æ„æŒ‡å®šçš„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªåç¨‹è¿è¡Œã€‚ä¸”åªæœ‰å½“æ­£åœ¨è¿è¡Œçš„åç¨‹æ˜¾å¼åœ°è¦æ±‚è¢«æŒ‚èµ·æ—¶å…¶æ‰§è¡Œæ‰ä¼šæš‚åœã€‚</p>
<h2 id="åç¨‹åŸºç¡€"><a href="#åç¨‹åŸºç¡€" class="headerlink" title="åç¨‹åŸºç¡€"></a>åç¨‹åŸºç¡€</h2><p>Luaè¯­è¨€ä¸­åç¨‹ç›¸å…³çš„æ‰€æœ‰å‡½æ•°éƒ½è¢«æ”¾åœ¨è¡¨coroutineä¸­ã€‚å‡½æ•°createç”¨äºåˆ›å»ºæ–°åç¨‹ï¼Œè¯¥å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå³åç¨‹è¦æ‰§è¡Œçš„ä»£ç çš„å‡½æ•°ã€‚å‡½æ•°createè¿”å›ä¸€ä¸ªâ€threadâ€ç±»å‹çš„å€¼ï¼Œå³æ–°åç¨‹ã€‚é€šå¸¸ï¼Œå‡½æ•°createçš„å‚æ•°æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="built_in">print</span>(<span class="string">&quot;hi&quot;</span>)<span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(co))			<span class="comment">-- thread</span></span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªåç¨‹æœ‰ä»¥ä¸‹å››ç§çŠ¶æ€ï¼Œå³æŒ‚èµ·ã€è¿è¡Œã€æ­£å¸¸å’Œæ­»äº¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°coroutine.statusæ¥æ£€æŸ¥åç¨‹çš„çŠ¶æ€ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.statye(co))		<span class="comment">-- suspended</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨äº¤äº’æ¨¡å¼ä¸‹è¿è¡Œä¸Šè¿°ä»£ç ï¼Œæœ€å¥½åœ¨æœ€åä¸€è¡ŒåŠ ä¸Šä¸€ä¸ªåˆ†å·æ¥é˜»æ­¢è¾“å‡ºå‡½æ•°resumeçš„è¿”å›å€¼ã€‚åœ¨ä¸Šä¾‹ä¸­ï¼Œåç¨‹ä½“åªæ˜¯ç®€å•åœ°æ‰“å°äº†â€hiâ€åä¾¿ç»ˆæ­¢äº†ï¼Œç„¶ååç¨‹å°±ç¼–ç¨‹äº†æ­»äº¡çŠ¶æ€ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">status</span>(co)) <span class="comment">-- end</span></span><br></pre></td></tr></table></figure>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåç¨‹çœ‹ä¸Šå»ä¹Ÿå°±æ˜¯ä¸€ç§å¤æ‚çš„è°ƒç”¨å‡½æ•°çš„æ–¹å¼ã€‚åç¨‹çš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºå‡½æ•°yieldï¼Œå‡½æ•°å¯ä»¥è®©ä¸€ä¸ªè¿è¡Œä¸­çš„åç¨‹æŒ‚èµ·è‡ªå·±ï¼Œç„¶ååœ¨åç»­æ¢å¤è¿è¡Œã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">10</span> <span class="keyword">do</span></span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;co&quot;</span>,i)</span><br><span class="line">		<span class="built_in">coroutine</span>.<span class="built_in">yield</span>()</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œåç¨‹è¿›è¡Œäº†ä¸€ä¸ªå¾ªç¯ï¼Œåœ¨å¾ªç¯ä¸­è¾“å‡ºæ•°å­—å¹¶åœ¨æ¯æ¬¡æ‰“å°åæŒ‚èµ·ã€‚å½“å”¤é†’åç¨‹åï¼Œå®ƒå°±ä¼šå¼€å§‹æ‰§è¡Œç›´åˆ°é‡è§ç¬¬ä¸€ä¸ªyield:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)	<span class="comment">-- co 	1</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬æŸ¥çœ‹åç¨‹çŠ¶æ€ï¼Œä¼šå‘ç°åç¨‹å¤„äºæŒ‚èµ·çŠ¶æ€ï¼Œå› æ­¤å¯ä»¥å†æ¬¡æ¢å¤è¿è¡Œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">status</span>(co))			<span class="comment">-- suspended</span></span><br></pre></td></tr></table></figure>
<p>ä»åç¨‹çš„è§’åº¦çœ‹ï¼Œåœ¨æŒ‚èµ·æœŸé—´å‘ç”Ÿçš„æ´»åŠ¨éƒ½å‘ç”Ÿåç¨‹è°ƒç”¨yieldæœŸé—´ã€‚å½“æˆ‘ä»¬å”¤é†’åç¨‹æ—¶ï¼Œå‡½æ•°yieldæ‰ä¼šæœ€ç»ˆè¿”å›ï¼Œç„¶ååç¨‹ä¼šç»§ç»­æ‰§è¡Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ªyieldæˆ–æ‰§è¡Œç»“æŸï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)	<span class="comment">-- co 2</span></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)	<span class="comment">-- co 3</span></span><br><span class="line">...</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)	<span class="comment">-- co 10</span></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)	<span class="comment">-- ä¸è¾“å‡ºä»»ä½•æ•°æ®</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æœ€åä¸€æ¬¡è°ƒç”¨resumeæ—¶ï¼Œåç¨‹ä½“æ‰§è¡Œå®Œæ¯•å¹¶è¿”å›ï¼Œæ¯”è¾“å‡ºä»»ä½•æ•°æ®ã€‚å¦‚æœæˆ‘ä»¬è¯•å›¾å†æ¬¡å”¤é†’å®ƒï¼Œå‡½æ•°resumeå°†è¿”å›falseåŠä¸€æ¡é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co))</span><br><span class="line"><span class="comment">-- false cannot resume dead coroutine</span></span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œåƒå‡½æ•°pcallä¸€æ ·ï¼Œå‡½æ•°resumeä¹Ÿè¿è¡Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸­ã€‚å› æ­¤ï¼Œå¦‚æœåç¨‹åœ¨æ‰§è¡Œä¸­å‡ºé”™ï¼ŒLuaè¯­è¨€ä¸ä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œè€Œæ˜¯å°†é”™è¯¯ä¿¡æ¯è¿”å›ç»™å‡½æ•°resumeã€‚<br>å½“åç¨‹Aå”¤é†’åç¨‹Bæ—¶ï¼Œåç¨‹Aæ—¢ä¸æ˜¯æŒ‚èµ·çŠ¶æ€ï¼Œä¹Ÿä¸æ˜¯è¿è¡ŒçŠ¶æ€ã€‚æ‰€ä»¥ï¼Œåç¨‹Aæ­¤æ—¶çš„çŠ¶æ€å°±è¢«ç§°ä¸ºæ­£å¸¸çŠ¶æ€ã€‚<br>Luaè¯­è¨€ä¸­ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æœºåˆ¶æ˜¯é€šè¿‡ä¸€å¯¹resume-yieldæ¥äº¤æ¢æ•°æ®ã€‚ç¬¬ä¸€ä¸ªresumeå‡½æ•°ä¼šæŠŠæ‰€æœ‰çš„é¢å¤–å‚æ•°ä¼ é€’ç»™åç¨‹çš„ä¸»å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">(a,b,c)</span></span></span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;co&quot;</span>,a,b,c+<span class="number">2</span>)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)		<span class="comment">-- co  1 2 5</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å‡½æ•°coroutine.resumeçš„è¿”å›å€¼ä¸­ï¼Œç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸ºtrueæ—¶è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œä¹‹åçš„è¿”å›å€¼å¯¹åº”å‡½æ•°yieldçš„å‚æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">(a,b)</span></span></span><br><span class="line">	<span class="built_in">coroutine</span>.<span class="built_in">yield</span>(a+b,a-b)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="number">20</span>,<span class="number">10</span>))		<span class="comment">-- true 30 10</span></span><br></pre></td></tr></table></figure>
<p>ä¸ä¹‹å¯¹åº”çš„æ˜¯ï¼Œå‡½æ•° coroutine.yieldçš„è¿”å›å€¼æ˜¯å¯¹åº”çš„resumeçš„å‚æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">(x)</span></span></span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;co1&quot;</span>,x)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;co2&quot;</span>,<span class="built_in">coroutine</span>.<span class="built_in">yield</span>())</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="string">&quot;hi&quot;</span>)		<span class="comment">-- co1 hi</span></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="number">4</span>,<span class="number">5</span>)		<span class="comment">-- co2 4 5</span></span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œå½“ä¸€ä¸ªåç¨‹è¿è¡Œç»“æŸæ—¶ï¼Œä¸»å‡½æ•°æ‰€è¿”å›çš„å€¼éƒ½å°†å˜æˆå¯¹åº”å‡½æ•°resumeçš„è¿”å›å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">6</span>,<span class="number">7</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co))		<span class="comment">-- true 6,7</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¾ˆå°‘åœ¨åŒä¸€ä¸ªåç¨‹ä¸­ç”¨åˆ°æ‰€æœ‰è¿™äº›æœºåˆ¶ï¼Œä½†æ¯ç§æœºåˆ¶éƒ½æœ‰å„è‡ªçš„ç”¨å¤„ã€‚<br>è™½ç„¶åç¨‹çš„æ¦‚å¿µå¾ˆå®¹æ˜“ç†è§£ï¼Œä½†æ¶‰åŠçš„ç»†èŠ‚å…¶å®æœ‰å¾ˆå¤šã€‚å› æ­¤ï¼Œå¯¹äºé‚£äº›å·²ç»å¯¹åç¨‹æœ‰ä¸€å®šäº†è§£çš„è¯»è€…æ¥é¦–ï¼Œæœ‰å¿…è¦å†è¿›è¡Œè¿›ä¸€æ­¥å­¦ä¹ å‰å…ˆç†æ¸…ä¸€äº›ç»†èŠ‚ã€‚Luaè¯­è¨€æä¾›çš„æ˜¯æ‰€è°“çš„éå¯¹ç§°åç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦ä¸¤ä¸ªå‡½æ•°æ¥æ§åˆ¶åç¨‹çš„æ‰§è¡Œï¼Œä¸€ä¸ªç”¨äºæŒ‚èµ·åç¨‹çš„æ‰§è¡Œï¼Œå¦å¤–ä¸€ä¸ªç”¨äºæ¢å¤åç¨‹çš„æ‰§è¡Œã€‚è€Œå…¶ä»–ä¸€äº›è¯­è¨€æä¾›çš„æ˜¯å¯¹ç§°åç¨‹ï¼Œåªæä¾›ä¸€ä¸ªå‡½æ•°ç”¨äºåœ¨ä¸€ä¸ªåç¨‹å’Œå¦ä¸€ä¸ªåç¨‹ä¹‹é—´åˆ‡æ¢æ§åˆ¶æƒã€‚<br>ä¸€äº›äººå°†éå¯¹ç§°åç¨‹ç§°ä¸ºsemi-coroutinesã€‚ç„¶è€Œï¼Œå…¶ä»–äººåˆ™ç”¨ç›¸åŒçš„æœ¯è¯­åŠåç¨‹è¡¨ç¤ºåç¨‹çš„ä¸€ç§å—é™åˆ¶ç‰ˆå®ç°ã€‚åœ¨è¿™ç§å®ç°ä¸­ï¼Œä¸€ä¸ªåç¨‹åªèƒ½åœ¨å®ƒæ²¡æœ‰è°ƒç”¨å…¶ä»–å‡½æ•°æ—¶æ‰å¯ä»¥æŒ‚èµ·ï¼Œå³åœ¨è°ƒç”¨æ ˆä¸­æ²¡æœ‰æŒ‚èµ·çš„è°ƒç”¨æ—¶ã€‚æ¢å¥è¯è¯´ï¼Œåªæœ‰è¿™ç§åŠåç¨‹çš„ä¸»å‡½æ•°æ‰èƒ½è®©å‡ºæ‰§è¡Œæƒã€‚</p>
<h2 id="å“ªä¸ªåç¨‹å æ®ä¸»å¾ªç¯"><a href="#å“ªä¸ªåç¨‹å æ®ä¸»å¾ªç¯" class="headerlink" title="å“ªä¸ªåç¨‹å æ®ä¸»å¾ªç¯"></a>å“ªä¸ªåç¨‹å æ®ä¸»å¾ªç¯</h2><p>æœ‰å…³åç¨‹çš„æœ€ç»å…¸å®ä¾‹ä¹‹ä¸€å°±æ˜¯ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ã€‚åœ¨ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ä¸­è®¾è®¡ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªå‡½æ•°ä¸æ–­äº§ç”Ÿå€¼ï¼Œå¦ä¸€ä¸ªå‡½æ•°ä¸æ–­åœ°æ¶ˆè´¹è¿™äº›å€¼ã€‚è¿™ä¸¤ä¸ªå‡½æ•°å¯èƒ½å½¢å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">producer</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> x = <span class="built_in">io</span>.<span class="built_in">read</span>()		<span class="comment">-- äº§ç”Ÿæ–°å€¼</span></span><br><span class="line">		send(x)					<span class="comment">-- å‘ç»™æ¶ˆè´¹è€…</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">consumer</span><span class="params">(  )</span></span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> x = receive()		<span class="comment">-- æ¥æ”¶æ¥è‡ªç”Ÿäº§è€…çš„å€¼</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(x,<span class="string">&quot;\n&quot;</span>)		<span class="comment">-- æ¶ˆè´¹ </span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†ç®€åŒ–è¿™ä¸ªç¤ºä¾‹ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…éƒ½æ˜¯æ— é™å¾ªç¯çš„ï¼›ä¸è¿‡ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å°†å…¶ä¿®æ”¹ä¸ºæ²¡æœ‰æ•°æ®éœ€è¦å¤„ç†æ—¶é€€å‡ºå¾ªç¯ã€‚è¿™é‡Œçš„é—®é¢˜åœ¨äºå¦‚ä½•å°†sendä¸receiveåŒ¹é…èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯â€è°å æ®ä¸»å¾ªç¯â€œé—®é¢˜çš„å…¸å‹ç¤ºä¾‹ã€‚å…¶ä¸­ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…éƒ½å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œå®ƒä»¬å„è‡ªå…·æœ‰è‡ªå·±çš„å¾ªç¯ï¼Œå¹¶ä¸”éƒ½å°†å¯¹æ–¹è§†ä¸ºä¸€ä¸ªå¯è°ƒç”¨çš„æœåŠ¡ã€‚å¯¹äºè¿™ä¸ªç‰¹å®šçš„ç¤ºä¾‹ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå‡½æ•°çš„ç»“æ„ï¼Œå±•å¼€å®ƒçš„å¾ªç¯ä½¿å…¶æˆä¸ºä¸€ä¸ªè¢«åŠ¨çš„ä»£ç†ã€‚ä¸è¿‡ï¼Œåœ¨å…¶ä»–çš„çœŸå®åœºæ™¯ä¸‹ï¼Œè¿™æ ·çš„ä»£ç ç»“æ„æ”¹åŠ¨å¯èƒ½ä¼šå¾ˆä¸å®¹æ˜“ã€‚<br>ç”±äºæˆå¯¹çš„resume-yieldå¯ä»¥é¢ å€’è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…ä¹‹é—´çš„å…³ç³»ï¼Œå› æ­¤åç¨‹æä¾›äº†ä¸€ç§æ— é¡»ä¿®æ”¹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„ä»£ç ç»“æ„å°±èƒ½åŒ¹é…å®ƒä»¬æ‰§è¡Œé¡ºåºçš„ç†æƒ³å·¥å…·ã€‚å½“ä¸€ä¸ªåç¨‹è°ƒç”¨å‡½æ•°yieldæ—¶ï¼Œå®ƒä¸æ˜¯è¿›å…¥äº†ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæŒ‚èµ·çš„è°ƒç”¨ã€‚åŒæ ·åœ°ï¼Œå¯¹å‡½æ•°resumeçš„è°ƒç”¨ä¹Ÿä¸ä¼šå¯åŠ¨ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªå¯¹å‡½æ•°yieldçš„è°ƒç”¨ã€‚è¿™ç§ç‰¹æ€§æ­£å¥½å¯ä»¥ç”¨äºåŒ¹é…sendå’Œreceive,ä½¿å¾—åŒæ–¹éƒ½è®¤ä¸ºè‡ªå·±æ˜¯ä¸»åŠ¨æ–¹è€Œå¯¹æ–¹æ˜¯è¢«åŠ¨æ–¹ã€‚å› æ­¤ï¼Œreceiveå”¤é†’ç”Ÿäº§è€…çš„æ‰§è¡Œä½¿å…¶èƒ½ç”Ÿæˆä¸€ä¸ªæ–°å€¼ï¼Œç„¶åsendåˆ™è®©å‡ºæ‰§è¡Œæƒï¼Œå°†ç”Ÿæˆçš„å€¼ä¼ é€’ç»™æ¶ˆè´¹è€…ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">receive</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">local</span> <span class="built_in">status</span>, value = <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(producer)</span><br><span class="line">	<span class="keyword">return</span> value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">send</span><span class="params">(x)</span></span></span><br><span class="line">	<span class="built_in">coroutine</span>.<span class="built_in">yield</span>(x)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œç”Ÿäº§è€…ç°åœ¨å¿…é¡»è¿è¡Œåœ¨ä¸€ä¸ªåç¨‹é‡Œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">producer - <span class="built_in">coroutine</span>.<span class="built_in">create</span>(producer)</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ç§è®¾è®¡ä¸­ï¼Œç¨‹åºé€šè¿‡è°ƒç”¨æ¶ˆè´¹è€…å¯åŠ¨ã€‚å½“æ¶ˆè´¹è€…éœ€è¦æ–°å€¼æ—¶å°±å”¤é†’ç”Ÿäº§è€…ï¼Œç”Ÿäº§è€…å‘æ¶ˆè´¹è€…è¿”å›æ–°å€¼åæŒ‚èµ·ï¼Œç›´åˆ°æ¶ˆè´¹è€…å†æ¬¡å°†å…¶å”¤é†’ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†è¿™ç§è®¾è®¡ç§°ä¸ºæ¶ˆè´¹è€…é©±åŠ¨å¼çš„è®¾è®¡ã€‚å¦ä¸€ç§æ–¹å¼åˆ™æ˜¯ä½¿ç”¨ç”Ÿäº§è€…é©±åŠ¨å¼çš„è®¾è®¡ï¼Œå…¶ä¸­æ¶ˆè´¹è€…æ˜¯åç¨‹ã€‚è™½ç„¶ä¸Šè¿°ä¸¤ç§è®¾è®¡æ€è·¯çœ‹ä¸Šå»æ˜¯ç›¸åçš„ï¼Œä½†å®é™…ä¸Šå®ƒä»¬çš„æ•´ä½“æ€è·¯ç›¸åŒã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨æ¥æ‰©å±•ä¸Šè¿°è®¾è®¡ã€‚è¿‡æ»¤å™¨ä½äºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´ï¼Œç”¨äºå®Œæˆä¸€äº›å¯¹æ•°æ®è¿›è¡ŒæŸç§å˜æ¢çš„ä»»åŠ¡ã€‚è¿‡æ»¤å™¨å³æ˜¯ä¸€ä¸ªæ¶ˆè´¹è€…åˆæ˜¯ä¸€ä¸ªç”Ÿäº§è€…ï¼Œå®ƒé€šè¿‡å”¤é†’ä¸€ä¸ªç”Ÿäº§è€…æ¥è·å¾—æ–°å€¼ï¼Œç„¶ååˆå°†å˜æ¢åçš„å€¼ä¼ é€’ç»™æ¶ˆè´¹è€…ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‰é¢ä»£ç ä¸­æ·»åŠ ä¸€ä¸ªè¿‡æ»¤å™¨ä»¥å®ç°åœ¨æ¯è¡Œçš„èµ·å§‹å¤„æ’å…¥è¡Œå·ï¼š</p>
<blockquote>
<p>ç¤ºä¾‹  ä½¿ç”¨è¿‡æ»¤å™¨çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">receive</span><span class="params">(prod)</span></span></span><br><span class="line">	<span class="keyword">local</span> <span class="built_in">status</span>, value = <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(prod)</span><br><span class="line">	<span class="keyword">return</span> value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">send</span><span class="params">(x)</span></span></span><br><span class="line">	<span class="built_in">coroutine</span>.<span class="built_in">yield</span>(x)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">producer</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">		<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">			<span class="keyword">local</span>  x = <span class="built_in">io</span>.<span class="built_in">read</span>()</span><br><span class="line">			send(x)</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span><span class="params">(prod)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">		<span class="keyword">for</span> line = <span class="number">1</span>,<span class="built_in">math</span>.<span class="built_in">huge</span> <span class="keyword">do</span></span><br><span class="line">			<span class="keyword">local</span> x = receive(prod)</span><br><span class="line">			x = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%5d %s&quot;</span>,line,x)</span><br><span class="line">			send(x)</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">consumer</span><span class="params">(prod)</span></span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> x = receive(prod)</span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(x,<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">consumer(filter(producer()))</span><br></pre></td></tr></table></figure>
<p>ä»£ç çš„æœ€åä¸€è¡Œåªæ˜¯ç®€å•åœ°åˆ›å»ºå‡ºæ‰€éœ€çš„å„ä¸ªç»„ä»¶ï¼Œå°†è¿™äº›ç»„ä»¶è¿æ¥åœ¨ä¸€èµ·ï¼Œç„¶åå¯åŠ¨æ¶ˆè´¹è€…ã€‚</p>
<h2 id="å°†åç¨‹ç”¨ä½œè¿­ä»£å™¨"><a href="#å°†åç¨‹ç”¨ä½œè¿­ä»£å™¨" class="headerlink" title="å°†åç¨‹ç”¨ä½œè¿­ä»£å™¨"></a>å°†åç¨‹ç”¨ä½œè¿­ä»£å™¨</h2><p>æˆ‘ä»¬å¯ä»¥è®²å¾ªç¯è¿­ä»£å™¨è§†ä¸ºç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼çš„ä¸€ç§ç‰¹ä¾‹ï¼šä¸€ä¸ªè¿­ä»£å™¨ä¼šç”Ÿäº§ç”±å¾ªç¯ä½“æ¶ˆè´¹çš„å†…å®¹ã€‚å› æ­¤ï¼Œç”¨åç¨‹æ¥å®ç°è¿­ä»£å™¨çœ‹ä¸Šå»å°±å¾ˆåˆé€‚ã€‚çš„ç¡®ã€‚åç¨‹ä¸ºå®ç°è¿™ç±»ä»»åŠ¡æä¾›äº†ä¸€ç§å¼ºå¤§çš„å·¥å…·ã€‚åŒæ—¶ï¼Œåç¨‹æœ€å…³é”®çš„ç‰¹è¡Œæ˜¯èƒ½å¤Ÿé¢ å€’è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…ä¹‹é—´çš„å…³ç³»ã€‚æœ‰äº†è¿™ç§ç‰¹æ€§ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™è¿­ä»£å™¨æ—¶å°±æ— é¡»æ‹…å¿ƒå¦‚ä½•ä¿å­˜è¿ç»­è°ƒç”¨ä¹‹é—´çš„çŠ¶æ€äº†ã€‚<br>ä¸ºäº†è¯´æ˜è¿™ç±»ç”¨é€”ï¼Œè®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªéå†æŒ‡å®šæ•°ç»„æ‰€æœ‰æ’åˆ—çš„è¿­ä»£å™¨ã€‚è¦ç›´æ¥ç¼–å†™è¿™ç§è¿­ä»£å™¨å¹¶ä¸å®¹æ˜“ï¼Œä½†å¦‚æœè¦ç¼–å†™ä¸€ä¸ªé€’å½’å‡½æ•°æ¥äº§ç”Ÿæ‰€æœ‰çš„æ’åˆ—åˆ™ä¸æ˜¯å¾ˆéš¾ã€‚æ€è·¯å¾ˆç®€å•ï¼Œåªè¦ä¾æ¬¡å°†æ¯ä¸ªæ•°ç»„å…ƒç´ æ”¾åˆ°æœ€åä¸€ä¸ªä½ç½®ï¼Œç„¶åé€’å½’åœ°ç”Ÿæˆå…¶ä½™å…ƒç´ çš„æ‰€æœ‰æ’åˆ—å³å¯ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ ä¸€ä¸ªç”Ÿæˆæ’åˆ—çš„å‡½æ•°</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">permgen</span><span class="params">(a,n)</span></span></span><br><span class="line">	n = n <span class="keyword">or</span> #a</span><br><span class="line">	<span class="keyword">if</span> n &lt;= <span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">		printResult(a)</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">for</span> i = <span class="number">1</span>, n <span class="keyword">do</span></span><br><span class="line">			a[n],a[i] = a[i], a[n]</span><br><span class="line">			permgen(a,n<span class="number">-1</span>)</span><br><span class="line">			a[n],a[i] = a[i], a[n]</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¿˜éœ€è¦å®šä¹‰ä¸€ä¸ªåˆé€‚çš„å‡½æ•°printResultæ¥è¾“å‡ºç»“æœï¼Œå¹¶ä½¿ç”¨æ°å½“çš„å‚æ•°è°ƒç”¨premgen</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printResult</span><span class="params">(a)</span></span></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, #a <span class="keyword">do</span> <span class="built_in">io</span>.<span class="built_in">write</span>(a[i],<span class="string">&quot;&quot;</span>) <span class="keyword">end</span></span><br><span class="line">	<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">permgen(&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;)</span><br><span class="line"><span class="comment">--	2 3 4 1</span></span><br><span class="line"><span class="comment">--  3 2 4 1</span></span><br><span class="line"><span class="comment">--  3 4 2 1</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">--  2 1 3 4</span></span><br><span class="line"><span class="comment">--  1 2 3 4</span></span><br></pre></td></tr></table></figure>
<p>å½“æœ‰äº†ç”Ÿæˆå™¨ä¹‹åï¼Œå°†å…¶è½¬æ¢ä¸ºè¿­ä»£å™¨å°±å¾ˆå®¹æ˜“äº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æŠŠprintResultæ”¹ä¸ºyield:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">permgen</span><span class="params">(a,n)</span></span></span><br><span class="line">	n = n <span class="keyword">or</span> #a</span><br><span class="line">	<span class="keyword">if</span> n &lt;= <span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">coroutine</span>.<span class="built_in">yield</span>(a)</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		åŒå‰</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå°†ç”Ÿæˆå™¨æ”¾å…¥åç¨‹è¿è¡Œå¹¶åˆ›å»ºè¿­ä»£å‡½æ•°çš„å·¥å‚ã€‚è¿­ä»£å™¨åªæ˜¯ç®€å•åœ°å”¤é†’åç¨‹ï¼Œè®©å…¶ç”Ÿäº§ä¸‹ä¸€ä¸ªæ’åˆ—ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">permutations</span><span class="params">(a)</span></span></span><br><span class="line">	<span class="keyword">local</span> co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>permgen(a) <span class="keyword">end</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">		<span class="keyword">local</span> code ,res = <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)</span><br><span class="line">		<span class="keyword">return</span> res</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æœ‰äº†ä¸Šé¢çš„è¿™äº›ï¼Œåœ¨forå¾ªç¯ä¸­éå†ä¸€ä¸ªæ•°ç»„çš„æ‰€æœ‰æ’åˆ—å°±éå¸¸ç®€å•äº†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> permutations&#123;<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>&#125; <span class="keyword">do</span></span><br><span class="line">	printResult(p)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--	b c a</span></span><br><span class="line"><span class="comment">--	c b a</span></span><br><span class="line"><span class="comment">--	c a b</span></span><br><span class="line"><span class="comment">--	a c b</span></span><br><span class="line"><span class="comment">-- 	b a c </span></span><br><span class="line"><span class="comment">--	a b c</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°permutationsä½¿ç”¨äº†Luaè¯­è¨€ä¸­ä¸€ç§å¸¸è§çš„æ¨¡å¼ï¼Œå°±æ˜¯å”¤é†’å¯¹åº”åç¨‹çš„è°ƒç”¨åŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ã€‚ç”±äºè¿™ç§æ¨¡å¼æ¯”è¾ƒå¸¸è§ï¼Œæ‰€ä»¥Luaè¯­è¨€ä¸“é—¨æä¾›äº†ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°coroutine.wrapæ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚ä¸å‡½æ•°createç±»ä¼¼ï¼Œå‡½æ•°wrapä¹Ÿç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„åç¨‹ã€‚ä½†ä¸åŒçš„æ˜¯ï¼Œå‡½æ•°wrapè¿”å›çš„ä¸æ˜¯åç¨‹æœ¬èº«è€Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ä¼šå”¤é†’åç¨‹ã€‚ä¸åŸå§‹çš„å‡½æ•°resumeä¸åŒï¼Œè¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸æ˜¯é”™è¯¯ä»£ç ï¼Œå½“é‡åˆ°é”™è¯¯æ—¶è¯¥å‡½æ•°ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡½æ•°wrapæ”¹å†™permutations:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">permutations</span><span class="params">(a)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">coroutine</span>.<span class="built_in">wrap</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span> permgen(a) <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>é€šå¸¸ï¼Œå‡½æ•°coroutine.wrapæ¯”å‡½æ•°coroutine.createæ›´æ˜“äºä½¿ç”¨ã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›äº†å¯¹äºæ“ä½œåç¨‹è€Œè¨€æ‰€éœ€çš„åŠŸèƒ½ï¼Œå³ä¸€ä¸ªå”¤é†’åç¨‹çš„å‡½æ•°ã€‚ä¸è¿‡ï¼Œè¯¥å‡½æ•°ç¼ºä¹çµæ´»æ€§ã€‚æˆ‘ä»¬æ— æ³•æ£€æŸ¥é€šè¿‡å‡½æ•°wrapæ‰€åˆ›å»ºçš„åç¨‹çš„çŠ¶æ€ï¼Œä¹Ÿæ— æ³•æ£€æŸ¥è¿è¡Œçš„å¼‚å¸¸ã€‚</p>
<h2 id="äº‹ä»¶é©±åŠ¨å¼ç¼–ç¨‹"><a href="#äº‹ä»¶é©±åŠ¨å¼ç¼–ç¨‹" class="headerlink" title="äº‹ä»¶é©±åŠ¨å¼ç¼–ç¨‹"></a>äº‹ä»¶é©±åŠ¨å¼ç¼–ç¨‹</h2><p>è™½ç„¶ç¬¬ä¸€çœ¼çœ‹ä¸Šå»ä¸æ˜¯ç‰¹åˆ«æ˜æ˜¾ï¼Œä½†å®é™…ä¸Šä¼ ç»Ÿçš„æ—¶é—´é©±åŠ¨ç¼–ç¨‹ä¼´éšçš„å…¸å‹é—®é¢˜å°±æ˜¯è¡ç”Ÿè‡ªwho-is-the-bossé—®é¢˜ã€‚<br>åœ¨å…¸å‹çš„äº‹ä»¶é©±åŠ¨å¹³å°ä¸‹ï¼Œä¸€ä¸ªå¤–éƒ¨çš„å®ä½“å‘æˆ‘ä»¬ç¨‹åºä¸­æ‰€è°“çš„äº‹ä»¶å¾ªç¯æˆ–è¿è¡Œå¾ªç¯ç”Ÿæˆäº‹ä»¶ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬çš„ä»£ç å¾ˆæ˜æ˜¾ä¸æ˜¯ä¸»å¾ªç¯ã€‚æˆ‘ä»¬çš„ç¨‹åºå˜æˆäº†äº‹ä»¶å¾ªç¯çš„é™„å±å“ï¼Œä½¿å¾—æˆ‘ä»¬çš„ç¨‹åºæˆä¸ºäº†ä¸€ç»„æ— é¡»ä»»ä½•æ˜¾å¼å…³è”çš„ã€ç›¸äº’ç‹¬ç«‹çš„äº‹ä»¶å¤„ç†ç¨‹åºçš„é›†åˆã€‚<br>å†ä¸¾ä¸€ä¸ªæ›´åŠ å…·ä½“çš„ä¾‹å­ï¼Œå‡è®¾æœ‰ä¸€ä¸ªä¸libuvç±»ä¼¼çš„å¼‚æ­¥I&#x2F;Oåº“ï¼Œè¯¥åº“ä¸­æœ‰å››ä¸ªä¸æˆ‘ä»¬çš„ç¤ºä¾‹æœ‰å…³çš„å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">lib.runloop();</span><br><span class="line">lib.readline(stream,callback);</span><br><span class="line">lib.writeline(stream,line,callback);</span><br><span class="line">lib.stop();</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå‡½æ•°è¿è¡Œäº‹ä»¶å¾ªç¯ï¼Œåœ¨å…¶ä¸­å¤„ç†æ‰€æœ‰å‘ç”Ÿçš„äº‹ä»¶å¹¶è°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚ä¸€ä¸ªå…¸å‹çš„äº‹ä»¶é©±åŠ¨ç¨‹åºåˆå§‹åŒ–æŸäº›æœºåˆ¶ç„¶åè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±å˜æˆäº†åº”ç”¨çš„ä¸»å¾ªç¯ã€‚ç¬¬äºŒä¸ªå‡½æ•°æŒ‡ç¤ºåº“ä»æŒ‡å®šçš„æµä¸­è¯»å–ä¸€è¡Œï¼Œå¹¶åœ¨è¯»å–å®Œæˆåå¸¦ç€è¯»å–çš„ç»“æœè°ƒç”¨æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚ç¬¬ä¸‰ä¸ªå‡½æ•°ä¸ç¬¬äºŒä¸ªå‡½æ•°ç±»ä¼¼ï¼Œåªæ˜¯è¯¥å‡½æ•°å†™å…¥ä¸€è¡Œã€‚æœ€åä¸€ä¸ªå‡½æ•°æ‰“ç ´äº‹ä»¶å¾ªç¯ï¼Œé€šå¸¸ç”¨äºç»“æŸç¨‹åºã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ å¼‚æ­¥I&#x2F;Oåº“çš„ç®€å•å®ç°</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> cmdQueue = &#123;&#125;		<span class="comment">-- æŒ‚èµ·æ“ä½œçš„é˜Ÿåˆ—</span></span><br><span class="line"><span class="keyword">local</span> lib = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lib.readline</span> <span class="params">(stream,callback)</span></span></span><br><span class="line">	<span class="keyword">local</span> nextCmd = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">		callback(stream:<span class="built_in">read</span>())</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="built_in">table</span>.<span class="built_in">insert</span>(cmdQueue,nextCmd)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lib.writeline</span><span class="params">(stream,line,callback)</span></span></span><br><span class="line">	<span class="keyword">local</span> nextCmd = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">		callback(stream:<span class="built_in">write</span>(line))</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="built_in">table</span>.<span class="built_in">insert</span>(cmdQueue,nextCmd)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lib.stop</span><span class="params">()</span></span></span><br><span class="line">	<span class="built_in">table</span>.<span class="built_in">insert</span>(cmdQueue,<span class="string">&quot;stop&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lib.runloop</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> nextCmd = <span class="built_in">table</span>.<span class="built_in">remove</span>(cmdQueue,<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">if</span> nextCmd == <span class="string">&quot;stop&quot;</span> <span class="keyword">then</span></span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			nextCmd()</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">return</span> lib</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç æ˜¯ä¸€ç§ç®€å•è€Œä¸‘é™‹çš„å®ç°ã€‚è¯¥ç¨‹åºçš„â€äº‹ä»¶é˜Ÿåˆ—â€œå®é™…ä¸Šæ˜¯ä¸€ä¸ªç”±æŒ‚èµ·æ“ä½œç»„æˆçš„åˆ—è¡¨ï¼Œå½“è¿™äº›æ“ä½œè¢«å¼‚æ­¥è°ƒç”¨æ—¶ä¼šäº§ç”Ÿäº‹ä»¶ã€‚å°½ç®¡å¾ˆä¸‘é™‹ï¼Œä½†è¯¥ç¨‹åºè¿˜æ˜¯å®Œæˆäº†ä¹‹å‰æˆ‘ä»¬æåˆ°çš„åŠŸèƒ½ï¼Œä¹Ÿä½¿å¾—æˆ‘ä»¬æ— é¡»ä½¿ç”¨çœŸå®çš„å¼‚æ­¥åº“å°±å¯ä»¥æµ‹è¯•æ¥ä¸‹æ¥çš„ä¾‹å­ã€‚<br>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªä½¿ç”¨è¿™ä¸ªåº“çš„ç®€å•ç¨‹åºï¼Œè¿™ä¸ªç¨‹åºæŠŠè¾“å…¥æµä¸­çš„æ‰€æœ‰è¡Œè¯»å–åˆ°ä¸€ä¸ªè¡¨ä¸­ï¼Œç„¶åå†é€†åºå°†å…¶å†™åˆ°è¾“å‡ºæµä¸­ã€‚å¦‚æœä½¿ç”¨åŒæ­¥I&#x2F;Oï¼Œé‚£ä¹ˆä»£ç å¯èƒ½å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> t = &#123;&#125;</span><br><span class="line"><span class="keyword">local</span> inp = <span class="built_in">io</span>.<span class="built_in">input</span>()</span><br><span class="line"><span class="keyword">local</span> out = <span class="built_in">io</span>.<span class="built_in">output</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> inp:<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">	t[#t + <span class="number">1</span>] = line </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i = #t, <span class="number">1</span> , <span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">	out:<span class="built_in">write</span>(t[i],<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å†ä½¿ç”¨å¼‚æ­¥I&#x2F;Oåº“æŒ‰ç…§æ—¶é—´é©±åŠ¨çš„æ–¹å¼é‡å†™è¿™ä¸ªç¨‹åºã€‚</p>
<blockquote>
<p>ç¤ºä¾‹  ä½¿ç”¨äº‹ä»¶é©±åŠ¨æ–¹å¼é€†åºä¸€ä¸ªæ–‡ä»¶</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> lib = <span class="built_in">require</span> <span class="string">&quot;async-lib&quot;</span></span><br><span class="line"><span class="keyword">local</span> t = &#123;&#125;</span><br><span class="line"><span class="keyword">local</span> inp = <span class="built_in">io</span>.<span class="built_in">input</span>()</span><br><span class="line"><span class="keyword">local</span> out = <span class="built_in">io</span>.<span class="built_in">output</span>()</span><br><span class="line"><span class="keyword">local</span> i </span><br><span class="line"></span><br><span class="line"><span class="comment">-- å†™å…¥è¡Œçš„æ—¶é—´å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">putline</span><span class="params">()</span></span></span><br><span class="line">	i = i - <span class="number">1</span></span><br><span class="line">	<span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">		lib.stop()</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		lib.writeline(out,t[i] .. <span class="string">&quot;\n&quot;</span>,putline)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¯»å–è¡Œçš„äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">getline</span> <span class="params">(line)</span></span></span><br><span class="line">	<span class="keyword">if</span> line <span class="keyword">then</span></span><br><span class="line">		t[#t + <span class="number">1</span>] = line</span><br><span class="line">		lib.readline(inp,getline)</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		i = #t + <span class="number">1</span></span><br><span class="line">		putline()</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">lib.readline(inp,getline)</span><br><span class="line">lib.runloop()</span><br></pre></td></tr></table></figure>
<p>ä½œä¸ºä¸€ç§å…¸å‹çš„äº‹ä»¶é©±åŠ¨åœºæ™¯ï¼Œç”±äºä¸»å¾ªç¯ä½äºåº“ä¸­ï¼Œå› æ­¤æ‰€æœ‰çš„å¾ªç¯éƒ½æ¶ˆå¤±äº†ï¼Œè¿™äº›å¾ªç¯è¢«ä»¥äº‹ä»¶åŒºåˆ†çš„é€’å½’è°ƒç”¨æ‰€å–ä»£ã€‚å°½ç®¡æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨é—­åŒ…ä»¥åç»­ä¼ é€’é£æ ¼è¿›è¡Œæ”¹è¿›ï¼Œä½†ä»ç„¶ä¸èƒ½ç¼–å†™æˆ‘ä»¬è‡ªå·±çš„å¾ªç¯ã€‚å¦‚æœè¦è¿™ä¹ˆåšï¼Œé‚£ä¹ˆå¿…é¡»é€šè¿‡é€’å½’æ¥é‡å†™ã€‚<br>åç¨‹å¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨äº‹ä»¶å¾ªç¯æ¥ç®€åŒ–å¾ªç¯çš„ä»£ç ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨åç¨‹è¿è¡Œä¸»è¦ä»£ç ï¼Œå³åœ¨æ¯æ¬¡è°ƒç”¨åº“æ—¶å°†å›è°ƒå‡½æ•°è®¾ç½®ä¸ºå”¤é†’åç¨‹çš„å‡½æ•°ç„¶åè®©å‡ºæ‰§è¡Œæƒã€‚</p>
<blockquote>
<p>ç¤ºä¾‹  æ˜¯ç”¨å¼‚æ­¥åº“è¿è¡ŒåŒæ­¥ä»£ç </p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> lib = <span class="built_in">require</span> <span class="string">&quot;async-lib&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span><span class="params">(code)</span></span></span><br><span class="line">	<span class="keyword">local</span> co = <span class="built_in">coroutine</span>.<span class="built_in">wrap</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">		code()</span><br><span class="line">		lib.stop()</span><br><span class="line">	<span class="keyword">end</span>)</span><br><span class="line">	co()</span><br><span class="line">	lib.runloop()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">putline</span> <span class="params">(stream,line)</span></span></span><br><span class="line">	<span class="keyword">local</span> co = <span class="built_in">coroutine</span>.<span class="built_in">running</span>()</span><br><span class="line">	<span class="keyword">local</span> callback = (<span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co) <span class="keyword">end</span>)</span><br><span class="line">	lib.writeline(stream,line,callback)</span><br><span class="line">	<span class="built_in">coroutine</span>.<span class="built_in">yield</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getline</span><span class="params">(stream,line)</span></span></span><br><span class="line">	<span class="keyword">local</span> co = <span class="built_in">coroutine</span>.<span class="built_in">running</span>()</span><br><span class="line">	<span class="keyword">local</span> callback = (<span class="function"><span class="keyword">function</span><span class="params">(l)</span></span> <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,l) <span class="keyword">end</span>)</span><br><span class="line">	lib.readline(stream,callback)</span><br><span class="line">	<span class="keyword">local</span> line = <span class="built_in">coroutine</span>.<span class="built_in">yield</span>()</span><br><span class="line">	<span class="keyword">return</span> line </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>é¡¾åæ€ä¹‰ï¼Œrunå‡½æ•°è¿è¡Œé€šè¿‡å‚æ•°ä¼ å…¥çš„åŒæ­¥ä»£ç ã€‚è¯¥å‡½æ•°é¦–å…ˆåˆ›å»ºä¸€ä¸ªåç¨‹æ¥è¿è¡ŒæŒ‡å®šçš„ä»£ç ï¼Œå¹¶åœ¨å®Œæˆååœæ­¢äº‹ä»¶å¾ªç¯ã€‚ç„¶åï¼Œè¯¥å‡½æ•°å”¤é†’åç¨‹ï¼Œè¿›å…¥äº‹ä»¶å¾ªç¯ã€‚<br>å‡½æ•°getlineå’Œputlineæ¨¡æ‹Ÿäº†åŒæ­¥I&#x2F;Oã€‚æ­£å¦‚ä¹‹å‰å¼ºè°ƒçš„ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½è°ƒç”¨äº†æ°å½“çš„å¼‚æ­¥å‡½æ•°ï¼Œè¿™äº›å¼‚æ­¥å‡½æ•°è¢«å½“åšå”¤é†’è°ƒç”¨åç¨‹çš„å›è°ƒå‡½æ•°ä¼ å…¥ã€‚ä¹‹åï¼Œå¼‚æ­¥å‡½æ•°æŒ‚èµ·ï¼Œç„¶åå°†æ§åˆ¶æƒè¿”å›ç»™äº‹ä»¶å¾ªç¯ã€‚ä¸€æ—¦å¼‚æ­¥æ“ä½œå®Œæˆï¼Œäº‹ä»¶å¾ªç¯å°±ä¼šè°ƒç”¨å‡½æ•°æ¥å”¤é†’è§¦å‘å¼‚æ­¥å‡½æ•°çš„åç¨‹ã€‚<br>ä½¿ç”¨è¿™ä¸ªåº“ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¼‚æ­¥åº“ä¸Šè¿è¡ŒåŒæ­¥ä»£ç äº†ã€‚å¦‚ä¸‹ç¤ºä¾‹å†æ¬¡å®ç°äº†é€†åºè¡Œçš„ä¾‹å­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">run(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">local</span> t = &#123;&#125;</span><br><span class="line">	<span class="keyword">local</span> inp = <span class="built_in">io</span>.<span class="built_in">input</span>()</span><br><span class="line">	<span class="keyword">local</span> out = <span class="built_in">io</span>.<span class="built_in">output</span>()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> line = getline(inp)</span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> line <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">		t[#t + <span class="number">1</span>] = line</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i = #t, <span class="number">1</span> ,<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">		putline(out,t[i] .. <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>
<p>é™¤äº†ä½¿ç”¨get&#x2F;putlineæ¥è¿›è¡ŒI&#x2F;Oæ“ä½œå’Œè¿è¡Œåœ¨runä»¥å†…ï¼Œä¸Šè¿°ä»£ç ä¸ä¹‹å‰çš„åŒæ­¥ç¤ºä¾‹ç­‰ä»·ã€‚åœ¨åŒæ­¥ä»£ç ç»“æ„çš„å¤–è¡¨ä¹‹ä¸‹ï¼Œç¨‹åºå…¶å®æ˜¯ä»¥äº‹ä»¶é©±åŠ¨æ¨¡å¼è¿è¡Œçš„ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè¿ç»­æ•™ç¨‹ä¹‹Luaä½å’Œå­—èŠ‚</title>
    <url>/43504.html</url>
    <content><![CDATA[<p>Luaè¯­è¨€å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„æ–¹å¼ä¸å¤„ç†æ–‡æœ¬çš„æ–¹å¼ç±»ä¼¼ã€‚Luaè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²å¯ä»¥åŒ…å«çƒ­è®®å­—èŠ‚ï¼Œå¹¶ä¸”å‡ ä¹æ‰€æœ‰èƒ½å¤Ÿå¤„ç†å­—ç¬¦ä¸²çš„åº“å‡½æ•°ä¹Ÿèƒ½å¤„ç†ä»»æ„å­—èŠ‚ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥å¯¹äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œæ¨¡å¼åŒ¹é…ã€‚ä»¥æ­¤ä¸ºåŸºç¡€ï¼ŒLua5.3ä¸­å¼•å…¥äº†ç”¨äºæ“ä½œäºŒè¿›åˆ¶æ•°æ®çš„é¢å¤–æœºåˆ¶ï¼šé™¤äº†æ•´å‹æ•°å¤–ï¼Œè¯¥ç‰ˆæœ¬è¿˜å¼•å…¥äº†ä½æ“ä½œåŠç”¨äºæ‰“åŒ…&#x2F;è§£åŒ…äºŒè¿›åˆ¶æ•°æ®çš„å‡½æ•°ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h2><p>Luaè¯­è¨€ä»5.3ç‰ˆæœ¬å¼€å§‹æä¾›äº†é’ˆå¯¹æ•°å€¼ç±»å‹çš„ä¸€ç»„æ ‡å‡†ä½è¿ç®—ç¬¦ä¸ç®—æœ¯è¿ç®—ç¬¦ä¸åŒçš„æ˜¯ï¼Œä½è¿ç®—ç¬¦åªèƒ½ç”¨äºæ•´å‹æ•°ã€‚ä½è¿ç®—ç¬¦åŒ…æ‹¬<code>&amp;</code>(æŒ‰ä½ä¸)ã€<code>|</code>(æŒ‰ä½æˆ–)ã€<code>~</code>(æŒ‰ä½å¼‚æˆ–)ã€<code>&gt;&gt;</code>(é€»è¾‘å³ç§»)ã€<code>&lt;&lt;</code>(é€»è¾‘å·¦ç§»)å’Œä¸€å…ƒè¿ç®—ç¬¦<code>~</code>(æŒ‰ä½å–å)ã€‚<br>æ‰€æœ‰çš„ä½è¿ç®—éƒ½é’ˆå¯¹æ„æˆä¸€ä¸ªæ•´å‹æ•°çš„æ‰€æœ‰ä½ã€‚åœ¨æ ‡å‡†Luaä¸­ï¼Œä¹Ÿå°±æ˜¯64ä½ã€‚è¿™å¯¹äºç”¨32ä½æ•´å‹æ•°çš„ç®—æ³•å¯èƒ½ä¼šæˆé—®é¢˜ã€‚ä¸è¿‡ï¼Œè¦æ“ä½œ32ä½æ•´å‹æ•°ä¹Ÿä¸éš¾ã€‚é™¤äº†å³ç§»æ“ä½œå¤–ï¼Œåªè¦å¿½ç•¥é«˜32ä½ï¼Œé‚£ä¹ˆæ‰€æœ‰é’ˆå¯¹64ä½æ•´å‹æ•°çš„æ“ä½œä¸é’ˆå¯¹32ä½æ•´å‹æ•°çš„æ“ä½œéƒ½ä¸€æ ·ã€‚è¿™å¯¹äºåŠ æ³•ã€å‡æ³•å’Œä¹˜æ³•éƒ½æœ‰æ•ˆã€‚å› æ­¤ï¼Œåœ¨æ“ä½œ32ä½æ•´å‹æ•°æ—¶ï¼Œåªéœ€è¦åœ¨è¿›è¡Œå³ç§»å‰æŠ¹å»é«˜32ä½å³å¯ã€‚<br>ä¸¤ä¸ªç§»ä½æ“ä½œéƒ½ä¼šç”¨0å¡«å……ç©ºå‡ºçš„ä½ï¼Œè¿™ç§è¡Œä¸ºé€šå¸¸è¢«ç§°ä¸ºé€»è¾‘ç§»ä½ã€‚Luaè¯­è¨€æ²¡æœ‰æä¾›ç®—æœ¯å³ç§»ï¼Œå³ä½¿ç”¨ç¬¦å·ä½å¡«å……ç©ºå‡ºçš„ä½ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘ä¸‹å–æ•´é™¤æ³•ï¼Œé™¤ä»¥åˆé€‚çš„2çš„æ•´æ•°æ¬¡å¹‚å®ç°ç®—æœ¯å³ç§»ã€‚<br>ç§»ä½æ•°æ˜¯è´Ÿæ•°è¡¨ç¤ºå‘ç›¸åçš„æ–¹å‘ç§»ä½ï¼Œå³a&gt;&gt;nä¸a&lt;&lt;-nç­‰ä»·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%x&quot;</span>,<span class="number">0xff</span> &lt;&lt; <span class="number">12</span>) 			<span class="comment">-- ff000</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%x&quot;</span>,<span class="number">0xff</span> &gt;&gt; <span class="number">-12</span>)			<span class="comment">-- ff000</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœç§»ä½æ•°ç­‰äºæˆ–å¤§äºæ•´å‹è¡¨ç¤ºçš„ä½æ•°ï¼Œç”±äºæ‰€æœ‰çš„ä½éƒ½è¢«ä»ç»“æœä¸­ç§»å‡ºäº†ï¼Œæ‰€æœ‰ç»“æœæ˜¯0ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%x&quot;</span>,<span class="number">-1</span> &lt;&lt; <span class="number">80</span>)		<span class="comment">-- 0</span></span><br></pre></td></tr></table></figure>

<h2 id="æ— ç¬¦å·æ•´å‹æ•°"><a href="#æ— ç¬¦å·æ•´å‹æ•°" class="headerlink" title="æ— ç¬¦å·æ•´å‹æ•°"></a>æ— ç¬¦å·æ•´å‹æ•°</h2><p>æ•´å‹è¡¨ç¤ºä¸­ä½¿ç”¨ä¸€ä¸ªæ¯”ç‰¹æ¥å­˜å‚¨ç¬¦å·ä½ã€‚å› æ­¤ï¼Œ64ä½æ•´å‹æ•°æœ€å¤§å¯ä»¥è¡¨ç¤º2^63^ - 1 è€Œä¸æ˜¯2^64^ -1ã€‚é€šå¸¸ï¼Œè¿™ç‚¹åŒºåˆ«æ˜¯æ— å…³ç´§è¦çš„ã€‚å› ä¸º2^63^ - 1 å·²ç»ç›¸å½“å¤§äº†ã€‚ä¸è¿‡ï¼Œç”±äºæˆ‘ä»¬å¯èƒ½éœ€è¦å¤„ç†ä½¿ç”¨æ— ç¬¦å·æ•´å‹è¡¨ç¤ºçš„å¤–éƒ¨æ•°æ®æˆ–å®ç°ä¸€äº›éœ€è¦64ä½æ•´å‹æ•°çš„ç®—æ³•ï¼Œå› è€Œæœ‰æ—¶ä¹Ÿä¸èƒ½æµªè´¹è¿™ä¸ªç¬¦å·ä½ã€‚å› æ­¤ï¼Œåœ¨ç²¾ç®€Luaä¸­ï¼Œè¿™ç§åŒºåˆ«å¯èƒ½ä¼šå¾ˆé‡è¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨ä¸€ä¸ª32ä½æœ‰ç¬¦å·æ•´å‹æ•°è¡¨ç¤ºæ–‡ä»¶ä¸­çš„ä½ç½®ï¼Œé‚£ä¹ˆèƒ½å¤Ÿæ“ä½œçš„æœ€å¤§æ–‡ä»¶å¤§å°å°±æ˜¯2GBï¼›è€Œä¸€ä¸ªæ— ç¬¦å·æ•´å‹æ•°èƒ½æ“ä½œçš„æœ€å¤§æ–‡ä»¶å¤§å°åˆ™æ˜¯æœ‰ç¬¦å·æ•´å‹æ•°çš„2å€ï¼Œå³4GBã€‚<br>Luaè¯­è¨€ä¸æ˜¾ç¤ºæ”¯æŒæ— ç¬¦å·æ•´å‹æ•°ã€‚ä¸è¿‡å°½ç®¡å¦‚æ­¤ï¼Œåªè¦ç¨åŠ æ³¨æ„ï¼Œåœ¨Luaè¯­è¨€ä¸­å¤„ç†æ— ç¬¦å·æ•´å‹æ•°å¹¶ä¸éš¾ã€‚<br>è™½ç„¶çœ‹ä¸Šå»ä¸å¤ªå‹å¥½ï¼Œä½†å¯ä»¥ç›´æ¥å†™å‡ºæ¯”2^63^-1å¤§çš„å¸¸é‡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x = <span class="number">13835058055282163712</span>		<span class="comment">-- 3 &lt;&lt; 62</span></span><br><span class="line">x 	<span class="comment">-- -4611686018427387904</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„é—®é¢˜å¹¶ä¸åœ¨äºå¸¸é‡æœ¬èº«ï¼Œè€Œåœ¨äºLuaè¯­è¨€è¾“å‡ºå¸¸é‡çš„æ–¹å¼ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰“å°æ•°å€¼æ—¶æ˜¯å°†å…¶ä½œä¸ºæœ‰ç¬¦å·æ•´å‹æ•°è¿›è¡Œå¤„ç†çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€‰é¡¹%uæˆ–%xåœ¨å‡½æ•°string.formatä¸­æŒ‡å®šä»¥æ— ç¬¦å·æ•´å‹æ•°è¿›è¡Œè¾“å‡ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%u&quot;</span>,x)			<span class="comment">-- 1383505855282163712</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;0x%X&quot;</span>,x)			<span class="comment">-- 0xC000000000000000</span></span><br></pre></td></tr></table></figure>
<p>æ ¹æ®æœ‰ç¬¦å·æ•´å‹æ•°çš„è¡¨ç¤ºæ–¹å¼ï¼ŒåŠ æ³•ã€å‡æ³•å’Œä¹˜æ³•æ“ä½œå¯¹äºæœ‰ç¬¦å·æ•´å‹æ•°å’Œæ— ç¬¦å·æ•´å‹æ•°æ˜¯ä¸€æ ·çš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%u&quot;</span>,x)			<span class="comment">-- 1383505855282163712</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%u&quot;</span>,x+<span class="number">1</span>)			<span class="comment">-- 1383505855282163713</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%u&quot;</span>,x<span class="number">-1</span>)			<span class="comment">-- 1383505855282163711</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯¹äºè¿™ä¹ˆå¤§çš„æ•°ï¼Œå³ä¾¿xä¹˜ä»¥2ä¹Ÿä¼šæº¢å‡ºï¼Œæ‰€ä»¥ç¤ºä¾‹ä¸­æ²¡æœ‰æ¼”ç¤ºä¹˜æ³•</p>
</blockquote>
<p>å…³ç³»è¿ç®—å¯¹äºæœ‰ç¬¦å·æ•´å‹æ•°å’Œæ— ç¬¦å·æ•´å‹æ•°æ˜¯ä¸ä¸€æ ·çš„ï¼Œå½“æ¯”è¾ƒå…·æœ‰ä¸åŒç¬¦å·ä½çš„æ•´å‹æ•°æ—¶å°±ä¼šå‡ºç°é—®é¢˜ã€‚å¯¹äºæœ‰ç¬¦å·æ•´å‹æ•°è€Œè¨€ï¼Œç¬¦å·ä½è¢«ç½®ä½çš„æ•´æ•°æ›´å°ï¼Œå› ä¸ºå®ƒä»£è¡¨çš„æ˜¯è´Ÿæ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="number">0x7fffffffffffffff</span> &lt; <span class="number">0x8000000000000000</span>  <span class="comment">-- false</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæŠŠä¸¤ä¸ªæ•´å‹æ•°å½“ä½œæ— ç¬¦å·çš„ï¼Œé‚£ä¹ˆç»“æœæ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ç§ä¸åŒçš„æ“ä½œæ¥æ¯”è¾ƒæ— ç¬¦å·æ•´å‹æ•°ã€‚Lua5.3æä¾›äº†å‡½æ•°math.ultæ¥å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">math</span>.ult(<span class="number">0x7fffffffffffffff</span>,<span class="number">0x8000000000000000</span>)  <span class="comment">-- true</span></span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ç§æ–¹æ³•æ˜¯åœ¨è¿›è¡Œæœ‰ç¬¦å·æ¯”è¾ƒå‰å…ˆç”¨æ©ç æ©å»ä¸¤ä¸ªæ“ä½œæ•°çš„ç¬¦å·ä½ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mask = <span class="number">0x8000000000000000</span></span><br><span class="line">(<span class="number">0x7fffffffffffffff</span> ~mask)&lt;(<span class="number">0x8000000000000000</span> ~mask)		<span class="comment">--true</span></span><br></pre></td></tr></table></figure>
<p>æ— ç¬¦å·é™¤æ³•å’Œæœ‰ç¬¦å·é™¤æ³•ä¹Ÿä¸ä¸€æ ·</p>
<blockquote>
<p>æ— ç¬¦å·é™¤æ³•</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">udiv</span><span class="params">(n,d)</span></span></span><br><span class="line">	<span class="keyword">if</span> d &lt; <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">if</span> <span class="built_in">math</span>.ult(n,d) <span class="keyword">then</span> <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">local</span> q = ((n &gt;&gt; <span class="number">1</span>)//d) &lt;&lt; <span class="number">1</span></span><br><span class="line">	<span class="keyword">local</span> r = n - q * d</span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">math</span>.ult(r,d) <span class="keyword">then</span> q = q + <span class="number">1</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> q</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªæ¯”è¾ƒï¼ˆd&lt;0ï¼‰ç­‰ä»·äºæ¯”è¾ƒdæ˜¯å¦å¤§äº2^63^ã€‚å¦‚æœå¤§äºï¼Œé‚£ä¹ˆå•†åªèƒ½æ˜¯1ï¼ˆå¦‚æœnç­‰äºæˆ–å¤§äºdï¼‰æˆ–0ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬ä½¿è¢«é™¤æ•°é™¤ä»¥2ï¼Œç„¶åé™¤ä»¥é™¤æ•°ï¼Œå†æŠŠç»“æœä¹˜ä»¥2ã€‚å³ç§»1ä½ç­‰ä»·äºé™¤ä»¥2çš„æ— ç¬¦å·é™¤æ³•ï¼Œå…¶ç»“æœæ˜¯ä¸€ä¸ªéè´Ÿçš„æœ‰ç¬¦å·æ•´å‹æ•°ã€‚åç»­çš„å·¦ç§»çº æ­£äº†å•†ï¼Œè¿˜åŸäº†ä¹‹å‰çš„é™¤æ³•ã€‚<br>æ€»ä½“ä¸Šè¯´ï¼Œfloor(floor(n&#x2F;2)&#x2F;d)*2(ç®—æ³•è¿›è¡Œçš„è®¡ç®—)ä¸floor(((n&#x2F;2)&#x2F;d)*2)(æ­£ç¡®çš„ç»“æœï¼‰å¹¶ä¸ç­‰ä»·ï¼Œä¸è¿‡ï¼Œè¦è¯æ˜å®ƒä»¬ä¹‹é—´æœ€å¤šç›¸å·®1å¹¶ä¸å›°éš¾ã€‚å› æ­¤ï¼Œç®—è®¡è®¡ç®—äº†ä½™æ•°ï¼ˆå˜é‡rï¼‰ï¼Œç„¶ååˆ¤æ–­ä½™æ•°æ˜¯å¦æ¯”é™¤æ•°å¤§ï¼Œå¦‚æœä½™æ•°æ¯”é™¤æ•°å¤§åˆ™çº æ­£å•†å³å¯ã€‚<br>æ— ç¬¦å·æ•´å‹æ•°å’Œæµ®ç‚¹å‹æ•°ä¹‹é—´çš„è½¬æ¢éœ€è¦è¿›è¡Œä¸€äº›è°ƒæ•´ã€‚è¦æŠŠä¸€ä¸ªæ— ç¬¦å·æ•´å‹æ•°è½¬æ¢ä¸ºæµ®ç‚¹å‹æ•°ï¼Œå¯ä»¥å…ˆå°†å…¶è½¬æ¢æˆæœ‰ç¬¦å·æ•´å‹æ•°ï¼Œç„¶åé€šè¿‡å–æ¨¡è¿ç®—çº æ­£æ•‘è¿‡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">u = <span class="number">11529215046068469760</span></span><br><span class="line">f = (u + <span class="number">0.0</span>) % <span class="number">2</span>^<span class="number">64</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%.0f&quot;</span>,f)			<span class="comment">-- 11529215046068469760</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºæ ‡å‡†è½¬æ¢æŠŠuå½“åšæœ‰ç¬¦å·æ•´å‹æ•°ï¼Œå› æ­¤è¡¨è¾¾å¼u+0.0çš„å€¼æ˜¯-6917529027641081856ï¼Œè€Œä¹‹åçš„å–æ¨¡æ“ä½œä¼šæŠŠè¿™ä¸ªå€¼é™åˆ¶åœ¨æœ‰ç¬¦å·æ•´å‹æ•°çš„è¡¨ç¤ºèŒƒå›´å†…ã€‚<br>è¦æŠŠä¸€ä¸ªæµ®ç‚¹å‹æ•°è½¬æ¢ä¸ºæ— ç¬¦å·æ•´å‹æ•°ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f = <span class="number">0xA000000000000000</span><span class="number">.0</span>		</span><br><span class="line">u = <span class="built_in">math</span>.tointerger(((f + <span class="number">2</span>^<span class="number">63</span>)%<span class="number">2</span>^<span class="number">64</span>) - <span class="number">2</span>^<span class="number">63</span>)</span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%x&quot;</span>,u)			<span class="comment">-- a000000000000000</span></span><br></pre></td></tr></table></figure>
<p>åŠ æ³•æŠŠä¸€ä¸ªå¤§äº2^63^çš„æ•°è½¬æ¢ä¸ºä¸€ä¸ªå¤§äº2^64^çš„æ•°ï¼Œå–æ¨¡è¿ç®—æŠŠè¿™ä¸ªæ•°é™åˆ¶åˆ°[0,2^63^)èŒƒå›´å†…ï¼Œç„¶åé€šè¿‡å‡æ³•æŠŠç»“æœå˜æˆä¸€ä¸ªâ€œè´Ÿâ€å€¼ã€‚å¯¹äºå°äº2^63^çš„å€¼ï¼ŒåŠ æ³•ç»“æœå°äº2^64^ï¼Œæ‰€ä»¥å–æ¨¡è¿ç®—æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œä¹‹åçš„å‡æ³•åˆ™æŠŠå®ƒæ¢å¤åˆ°äº†ä¹‹å‰çš„å€¼ã€‚</p>
<h2 id="æ‰“åŒ…å’Œè§£åŒ…äºŒè¿›åˆ¶æ•°æ®"><a href="#æ‰“åŒ…å’Œè§£åŒ…äºŒè¿›åˆ¶æ•°æ®" class="headerlink" title="æ‰“åŒ…å’Œè§£åŒ…äºŒè¿›åˆ¶æ•°æ®"></a>æ‰“åŒ…å’Œè§£åŒ…äºŒè¿›åˆ¶æ•°æ®</h2><p>Lua5.3è¿˜å¼•å…¥äº†ä¸€ä¸ªåœ¨äºŒè¿›åˆ¶æ•°å’ŒåŸºæœ¬ç±»å‹å€¼ä¹‹é—´è¿›è¡Œè½¬æ¢çš„å‡½æ•°ã€‚å‡½æ•°string.packä¼šæŠŠå€¼â€œæ‰“åŒ…â€ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œè€Œå‡½æ•°string.unpackåˆ™ä»å­—ç¬¦ä¸²ä¸­æå–è¿™äº›å€¼ã€‚<br>å‡½æ•°string.packå’Œå‡½æ•°string.unpackçš„ç¬¬1ä¸ªå‚æ•°æ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œç”¨äºæè¿°å¦‚ä½•æ‰“åŒ…æ•°æ®ã€‚æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—æ¯éƒ½æè¿°äº†å¦‚ä½•æ‰“åŒ…&#x2F;è§£åŒ…ä¸€ä¸ªå€¼ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="built_in">string</span>.pack(<span class="string">&quot;iii&quot;</span>,<span class="number">3</span>,<span class="number">-27</span>,<span class="number">450</span>)</span><br><span class="line">#s</span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">unpack</span>(<span class="string">&quot;iii&quot;</span>,s)		<span class="comment">-- 3	-27	450	13</span></span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨å‡½æ•°string.packå°†åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ä¸­ä¸º3ä¸ªæ•´å‹æ•°çš„äºŒè¿›åˆ¶ä»£ç ã€‚æ¯ä¸€ä¸ªâ€iâ€ç¼–ç å¯¹ä¸ä¹‹å¯¹åº”çš„å‚æ•°è¿›è¡Œäº†ç¼–ç ï¼Œè€Œå­—ç¬¦ä¸²çš„é•¿åº¦åˆ™æ˜¯ä¸€ä¸ªæ•´å‹æ•°æœ¬èº«å¤§å°çš„3å€ã€‚è°ƒç”¨å‡½æ•°string.unpackå¯¹ç»™å®šå­—ç¬¦ä¸²ä¸­çš„3ä¸ªæ•´å‹æ•°è¿›è¡Œäº†è§£ç å¹¶è¿”å›è§£ç åçš„ç»“æœã€‚<br>ä¸ºäº†ä¾¿äºè¿­ä»£ï¼Œå‡½æ•°string.unpackè¿˜ä¼šè¿”å›æœ€åä¸€ä¸ªè¯»å–çš„å…ƒç´ åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ã€‚ç›¸åº”åœ°ï¼Œè¯¥å‡½æ•°è¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„ç¬¬3ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ç”¨äºæŒ‡å®šå¼€å§‹è¯»å–çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œä¸‹ä¾‹è¾“å‡ºäº†ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ä¸²ä¸­æ‰€æœ‰è¢«æ‰“åŒ…çš„å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&quot;hello\0Lua\0world\0&quot;</span></span><br><span class="line"><span class="keyword">local</span> i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> i &lt;= #s <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">local</span> res</span><br><span class="line">	res, i = <span class="built_in">string</span>.<span class="built_in">unpack</span>(<span class="string">&quot;z&quot;</span>,s,i)</span><br><span class="line">	<span class="built_in">print</span>(res)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- hello</span></span><br><span class="line"><span class="comment">-- Lua</span></span><br><span class="line"><span class="comment">-- world</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºç¼–ç ä¸€ä¸ªæ•´å‹æ•°è€Œè¨€æœ‰å‡ ç§é€‰é¡¹ï¼Œæ¯ä¸€ç§å¯¹åº”äº†ä¸€ç§æ•´å‹å¤§å°ï¼šb(char)ã€h(short)ã€i(int)ã€l(long)å’Œj(ä»£è¡¨Luaè¯­è¨€ä¸­æ•´å‹æ•°çš„å¤§å°)ã€‚è¦æ˜¯ä½¿ç”¨å›ºå®šçš„ã€ä¸æœºå™¨æ— å…³çš„å¤§å°ï¼Œå¯ä»¥åœ¨é€‰é¡¹iååŠ ä¸Šä¸€ä¸ª1~16çš„æ•°ã€‚ä¾‹å¦‚ï¼Œi7ä¼šäº§ç”Ÿ7ä¸ªå­—èŠ‚çš„æ•´å‹æ•°ã€‚æ‰€æœ‰çš„å¤§å°éƒ½ä¼šè¢«æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸€å¤„çš„æƒ…å†µï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x = <span class="built_in">string</span>.pack(<span class="string">&quot;i7&quot;</span>, i &lt;&lt; <span class="number">54</span>)</span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">unpack</span>(<span class="string">&quot;i7&quot;</span>,x)				<span class="comment">-- 18014398509481984	8</span></span><br><span class="line">x = <span class="built_in">string</span>.pack(<span class="string">&quot;i7&quot;</span>,-(<span class="number">1</span> &lt;&lt; <span class="number">54</span>))</span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">unpack</span>(<span class="string">&quot;i7&quot;</span>,x)				<span class="comment">-- -1801439850948		8</span></span><br><span class="line">x = <span class="built_in">string</span>.pack(<span class="string">&quot;i7&quot;</span>,<span class="number">1</span> &lt;&lt; <span class="number">55</span>)</span><br><span class="line"><span class="built_in">stdin</span>:<span class="number">1</span>:bad argument #<span class="number">2</span> to <span class="string">&#x27;pack&#x27;</span>(interger overflow)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥æ‰“åŒ…å’Œè§£åŒ…æ¯”Luaè¯­è¨€åŸç”Ÿæ•´å‹æ•°æ›´å¤§çš„æ•´å‹æ•°ï¼Œä½†æ˜¯åœ¨è§£åŒ…çš„æ—¶å€™å®ƒä»¬çš„å®é™…å€¼å¿…é¡»èƒ½å¤Ÿè¢«Luaè¯­è¨€çš„æ•´å‹æ•°å®¹çº³ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x = <span class="built_in">string</span>.pack(<span class="string">&quot;i12&quot;</span>,<span class="number">2</span>^<span class="number">61</span>)</span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">unpack</span>(<span class="string">&quot;i12&quot;</span>,x)				<span class="comment">-- 23058443009213693952		13</span></span><br><span class="line">x = <span class="string">&quot;aaaaaaaaaaaa&quot;</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">unpack</span>(<span class="string">&quot;i12&quot;</span>,x)</span><br><span class="line"><span class="built_in">stdin</span>:<span class="number">1</span>: <span class="number">12</span>-<span class="built_in">byte</span> integer does <span class="keyword">not</span> fit into Lua integer</span><br></pre></td></tr></table></figure>
<p>æ¯ä¸€ä¸ªé’ˆå¯¹æ•´å‹æ•°çš„é€‰é¡¹éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å¤§å†™ç‰ˆæœ¬ï¼Œå¯¹åº”ç›¸åº”å¤§å°çš„æ— ç¬¦å·æ•´å‹æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x = <span class="string">&quot;\xFF&quot;</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">unpack</span>(<span class="string">&quot;b&quot;</span>,s)		<span class="comment">-- -1 2</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">unpack</span>(<span class="string">&quot;B&quot;</span>,s)		<span class="comment">-- 255 2</span></span><br></pre></td></tr></table></figure>
<p>åŒæ—¶ï¼Œæ— ç¬¦å·æ•´å‹æ•°å¯¹äºsize_tè€Œè¨€è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„é€‰é¡¹Tã€‚<br>æˆ‘ä»¬å¯ä»¥ç”¨3ä¸­è¡¨ç¤ºå½¢å¼æ‰“åŒ…è‡ªä»˜å‡ºï¼š\0ç»“å°¾çš„å­—ç¬¦ä¸²ã€å®šé•¿å­—ç¬¦ä¸²å’Œä½¿ç”¨æ˜¾ç¤ºé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚\0ç»“å°¾çš„å­—ç¬¦ä¸²ä½¿ç”¨é€‰é¡¹zï¼›å®šé•¿å­—ç¬¦ä¸²ä½¿ç”¨é€‰é¡¹cnï¼Œå…¶ä¸­næ˜¯è¢«æ‰“åŒ…å­—ç¬¦ä¸²çš„å­—èŠ‚æ•°ã€‚æ˜¾ç¤ºé•¿åº¦çš„å­—ç¬¦ä¸²åœ¨å­˜å‚¨æ—¶ä¼šåœ¨å­—ç¬¦ä¸²å‰åŠ ä¸Šè¯¥å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€‰é¡¹æ ¼å¼å½¢å¦‚snï¼Œå…¶ä¸­næ˜¯ç”¨äºä¿å­˜å­—ç¬¦ä¸²é•¿åº¦çš„æ— ç¬¦å·æ•´å‹æ•°çš„å¤§å°ã€‚ä¾‹å¦‚ï¼Œé€‰é¡¹s1è¡¨ç¤ºæŠŠå­—ç¬¦ä¸²é•¿åº¦ä¿å­˜åœ¨ä¸€ä¸ªå­—èŠ‚ä¸­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="built_in">string</span>.pack(<span class="string">&quot;s1&quot;</span>,<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, #s <span class="keyword">do</span> <span class="built_in">print</span>((<span class="built_in">string</span>.<span class="built_in">unpack</span>(<span class="string">&quot;B&quot;</span>,s,i))) <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5	(length)</span></span><br><span class="line"><span class="comment">-- 104	(&#x27;h&#x27;)</span></span><br><span class="line"><span class="comment">-- 101	(&#x27;e&#x27;)</span></span><br><span class="line"><span class="comment">-- 108	(&#x27;l&#x27;)</span></span><br><span class="line"><span class="comment">-- 108	(&#x27;l&#x27;)</span></span><br><span class="line"><span class="comment">-- 111	(&#x27;o&#x27;)</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœç”¨äºä¿å­˜é•¿åº¦çš„å­—èŠ‚å®¹çº³ä¸äº†å­—ç¬¦ä¸²é•¿åº¦ï¼Œé‚£ä¹ˆLuaè¯­è¨€ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å•çº¯ä½¿ç”¨é€‰é¡¹sï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¼šè¢«ä»¥è¶³å¤Ÿå®¹çº³ä»»ä½•å­—ç¬¦ä¸²é•¿åº¦çš„size_tç±»å‹ä¿å­˜ã€‚<br>å¯¹äºæµ®ç‚¹å‹æ•°ï¼Œæœ‰3ä¸­é€‰é¡¹ï¼šfç”¨äºå•ç²¾åº¦æµ®ç‚¹æ•°ã€dç”¨äºåŒç²¾åº¦æµ®ç‚¹æ•°ã€nç”¨äºLuaè¯­è¨€æµ®ç‚¹æ•°ã€‚<br>æ ¼å¼å­—ç¬¦ä¸²ä¹Ÿæœ‰ç”¨æ¥æ§åˆ¶å¤§å°ç«¯æ¨¡å¼å’ŒäºŒè¿›åˆ¶æ•°æ®å¯¹é½çš„é€‰é¡¹ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ ¼å¼ä½¿ç”¨çš„æ˜¯æœºå™¨åŸç”Ÿçš„å¤§å°ç«¯æ¨¡å¼ã€‚é€‰é¡¹&gt;æŠŠæ‰€æœ‰åç»­çš„ç¼–ç è½¬æ¢æ”¹ä¸ºå¤§ç«¯æ¨¡å¼æˆ–ç½‘ç»œå­—èŠ‚åºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="built_in">string</span>.pack(<span class="string">&quot;&gt;i4&quot;</span>,<span class="number">1000000</span>)</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, #s <span class="keyword">do</span> <span class="built_in">print</span>((<span class="built_in">string</span>.<span class="built_in">unpack</span>(<span class="string">&quot;B&quot;</span>,s,i))) <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 00</span></span><br><span class="line"><span class="comment">-- 15</span></span><br><span class="line"><span class="comment">-- 66</span></span><br><span class="line"><span class="comment">-- 64</span></span><br></pre></td></tr></table></figure>
<p>é€‰é¡¹&lt;åˆ™æ”¹ä¸ºå°ç«¯æ¨¡å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="built_in">string</span>.pack(<span class="string">&quot;&lt;i2 i2&quot;</span>,<span class="number">500</span>,<span class="number">24</span>)</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, #s <span class="keyword">do</span> <span class="built_in">print</span>((<span class="built_in">string</span>.<span class="built_in">unpack</span>(<span class="string">&quot;B&quot;</span>,s,i))) <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 244</span></span><br><span class="line"><span class="comment">-- 1</span></span><br><span class="line"><span class="comment">-- 24</span></span><br><span class="line"><span class="comment">-- 0</span></span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œé€‰é¡¹&#x3D;æ”¹å›æœºå™¨é»˜è®¤çš„åŸç”Ÿå¤§å°ç«¯æ¨¡å¼ã€‚<br> å¯¹äºå¯¹é½è€Œè¨€ï¼Œé€‰é¡¹!nå¼ºåˆ¶æ•°æ®å¯¹é½åˆ°ä»¥nä¸ºå€æ•°çš„ç´¢å¼•ä¸Šã€‚æ›´å‡†ç¡®åœ°è¯´ï¼Œå¦‚æœæ•°æ®æ¯”nå°ï¼Œé‚£ä¹ˆå¯¹é½åˆ°å…¶è‡ªèº«å¤§å°ä¸Šï¼›å¦åˆ™ï¼Œå¯¹é½åˆ°nä¸Šã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸º!4ï¼Œé‚£ä¹ˆ1å­—èŠ‚æ•´å‹æ•°ä¼šè¢«å†™å…¥ä»¥1ä¸ºå€æ•°çš„ç´¢å¼•ä½ç½®ä¸Šï¼Œ2å­—èŠ‚çš„æ•´å‹æ•°ä¼šè¢«å†™å…¥ä»¥2ä¸ºå€æ•°çš„ç´¢å¼•ä½ç½®ä¸Šï¼Œè€Œ4å­—èŠ‚æˆ–æ›´å¤§çš„æ•´å‹æ•°åˆ™ä¼šè¢«å†™å…¥ä»¥4ä¸ºå€æ•°çš„ç´¢å¼•ä½ç½®ä¸Šï¼Œè€Œé€‰é¡¹!(ä¸å¸¦æ•°å­—)åˆ™æŠŠå¯¹é½è®¾ä¸ºæœºå™¨é»˜è®¤çš„å¯¹é½æ–¹å¼ã€‚<br> å‡½æ•°string.packé€šè¿‡åœ¨ç»“æœå­—ç¬¦ä¸²åˆ°è¾¾åˆé€‚ç´¢å¼•å€¼å‰å¢åŠ 0çš„æ–¹å¼å®ç°å¯¹é½ï¼Œå‡½æ•°string.unpackåœ¨è¯»å–å­—ç¬¦ä¸²æ—¶ä¼šç®€å•åœ°è·³è¿‡è¿™äº›è¡¥ä½ã€‚å¯¹é½åªå¯¹2çš„æ•´æ•°æ¬¡å¹‚æœ‰æ•ˆï¼Œå¦‚æœæŠŠå¯¹é½è®¾ä¸º4ä½†è§†å›¾æ“ä½œ3å­—èŠ‚çš„æ•´å‹æ•°ï¼Œé‚£ä¹ˆLuaè¯­è¨€ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br> æ‰€æœ‰çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²é»˜è®¤å¸¦æœ‰å‰ç¼€â€&#x3D;!1â€ï¼Œå³è¡¨ç¤ºä½¿ç”¨é»˜è®¤å¤§å°ç«¯æ¨¡å¼ä¸”ä¸å¯¹é½ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä»»æ„æ—¶ç‚¹æ”¹å˜å¤§å°ç«¯æ¨¡å¼å’Œå¯¹é½æ–¹å¼ã€‚<br> å¦‚æœéœ€è¦ï¼Œå¯ä»¥æ‰‹å·¥æ·»åŠ è¡¥ä½ã€‚é€‰é¡¹xä»£è¡¨1å­—èŠ‚çš„è¡¥ä½ï¼Œå‡½æ•°string.packä¼šåœ¨ç»“æœå­—ç¬¦ä¸²ä¸­å¢åŠ ä¸€ä¸ª0å­—èŠ‚ï¼Œè€Œå‡½æ•°string.unpackåˆ™ä»ç›®æ ‡å­—ç¬¦ä¸²ä¸­è·³è¿‡1å­—èŠ‚ã€‚</p>
<h2 id="äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="äºŒè¿›åˆ¶æ–‡ä»¶"></a>äºŒè¿›åˆ¶æ–‡ä»¶</h2><p>å‡½æ•°io.inputå’Œio.outputæ€»æ˜¯ä»¥æ–‡æœ¬æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚åœ¨POSIXæ“ä½œç³»ç»Ÿä¸­ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶å’Œæ–‡æœ¬æ–‡ä»¶æ˜¯æ²¡æœ‰å·®åˆ«çš„ã€‚ç„¶åï¼Œåœ¨å…¶ä»–ä¸€äº›åƒWindowsä¹‹ç±»çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œå¿…é¡»ç”¨ç‰¹æ®Šæ–¹å¼æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå³åœ¨io.opençš„æ¨¡å¼å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å­—æ¯bã€‚<br>é€šå¸¸ï¼Œåœ¨è¯»å–äºŒè¿›åˆ¶æ•°æ®æ—¶ï¼Œè¦ä¹ˆä½¿ç”¨æ¨¡å¼â€aâ€å¼€è¯»å–æ•´ä¸ªæ–‡ä»¶ï¼Œè¦ä¹ˆä½¿ç”¨æ¨¡å¼næ¥è¯»å–nä¸ªå­—èŠ‚ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®ƒä¼šæŠŠWindowsæ ¼å¼çš„æ–‡æœ¬æ–‡ä»¶è½¬æ¢ä¸ºPOSIXæ ¼å¼ï¼Œå³æŠŠ\r\nè½¬æ¢ä¸º\n:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> inp = <span class="built_in">assert</span>(<span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">arg</span>[<span class="number">1</span>],<span class="string">&quot;rb&quot;</span>))</span><br><span class="line"><span class="keyword">local</span> out = <span class="built_in">assert</span>(<span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">arg</span>[<span class="number">2</span>],<span class="string">&quot;wb&quot;</span>))</span><br><span class="line"><span class="keyword">local</span> data = inp:<span class="built_in">read</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line">data = <span class="built_in">string</span>.<span class="built_in">gsub</span>(data,<span class="string">&quot;\r\n&quot;</span>,<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">out:<span class="built_in">write</span>(data)</span><br><span class="line"><span class="built_in">assert</span>(out:<span class="built_in">close</span>())</span><br></pre></td></tr></table></figure>
<p>ç”±äºæ ‡å‡†I&#x2F;Oæµæ˜¯ä»¥æ–‡æœ¬æ¨¡å¼æ‰“å¼€çš„ï¼Œæ‰€ä»¥ä¸Šä¾‹ä¸èƒ½ä½¿ç”¨æ ‡å‡†I&#x2F;Oæµã€‚ç›¸åï¼Œè¯¥ç¨‹åºå‡è®¾è¾“å…¥å’Œè¾“å‡ºæ–‡ä»¶çš„åç§°æ˜¯ç”±ç¨‹åºçš„å‚æ•°æŒ‡å®šçš„ã€‚å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤è°ƒç”¨è¯¥ç¨‹åºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">lua prog.lua file.dos file.unix</span><br></pre></td></tr></table></figure>
<p>å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œä¸€ä¸‹çš„ç¨‹åºè¾“å‡ºäº†ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„æ‰€æœ‰å­—ç¬¦ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">io</span>.<span class="built_in">open</span>[<span class="number">1</span>],<span class="string">&quot;rb&quot;</span>))</span><br><span class="line"><span class="keyword">local</span> data = f:<span class="built_in">read</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="keyword">local</span> validchars = <span class="string">&quot;[%g%s]&quot;</span></span><br><span class="line"><span class="keyword">local</span> pattern = <span class="string">&quot;(&quot;</span> .. <span class="built_in">string</span>.<span class="built_in">rep</span>(validchars,<span class="number">6</span>) .. <span class="string">&quot;+)\0&quot;</span></span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(data,pattern) <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">print</span>(w)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç¨‹åºå‡å®šå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªä»¥\0ç»“å°¾çš„ã€åŒ…å«6ä¸ªæˆ–6ä¸ªä»¥ä¸Šæœ‰æ•ˆå­—ç¬¦çš„åºåˆ—ï¼Œå…¶ä¸­æœ‰æ•ˆå­—ç¬¦æ˜¯æŒ‡èƒ½ä¸æ¨¡å¼validcharsåŒ¹é…çš„ä»»æ„å­—ç¬¦ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œè¿™ä¸ªæ¨¡å¼ç”±å¯æ‰“å°å­—ç¬¦ç»„æˆã€‚æˆ‘ä»¬ä½¿ç”¨å‡½æ•°string.repå’Œå­—ç¬¦ä¸²è¿æ¥åˆ›å»ºç”¨äºæ•è·ä»¥\0ç»“å°¾çš„ã€åŒ…å«6ä¸ªæˆ–6ä¸ªä»¥ä¸Šæœ‰æ•ˆå­—ç¬¦validcharsçš„æ¨¡å¼ï¼Œè¿™ä¸ªæ¨¡å¼ä¸­çš„æ‹¬å·ç”¨äºæ•è·ä¸å¸¦\0çš„å­—ç¬¦ä¸²ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè¿ç»­æ•™ç¨‹ä¹‹Luaåƒåœ¾æ”¶é›†</title>
    <url>/3472.html</url>
    <content><![CDATA[<p>Luaè¯­è¨€ä½¿ç”¨è‡ªåŠ¨å†…å­˜ç®¡ç†ã€‚ç¨‹åºå¯ä»¥åˆ›å»ºå¯¹è±¡ï¼Œä½†å´æ²¡æœ‰å‡½æ•°æ¥åˆ é™¤å¯¹è±¡ã€‚Luaè¯­è¨€é€šè¿‡åƒåœ¾æ”¶é›†è‡ªåŠ¨åˆ é™¤ç§°ä¸ºåƒåœ¾çš„å¯¹è±¡ï¼Œä»è€Œå°†ç¨‹åºå‘˜ä»å†…å­˜ç®¡ç†çš„ç»å¤§éƒ¨åˆ†è´Ÿæ‹…ä¸­è§£æ”¾å‡ºæ¥ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>æ›´é‡è¦çš„æ˜¯ï¼Œå°†ç¨‹åºå‘˜ä»ä¸å†…å­˜ç®¡ç†ç›¸å…³çš„å¤§å¤šæ•°Bugä¸­è§£æ”¾å‡ºæ¥ã€‚ä¾‹å¦‚æ— æ•ˆæŒ‡é’ˆå’Œå†…å­˜æ³„éœ²ç­‰é—®é¢˜ã€‚<br>åœ¨ä¸€ä¸ªç†æƒ³çš„ç¯å¢ƒä¸­ï¼Œåƒåœ¾æ”¶é›†å™¨å¯¹ç¨‹åºå‘˜æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œå°±åƒä¸€ä¸ªå¥½çš„æ¸…æ´å·¥ä¸ä¼šå’Œå…¶ä»–å·¥äººæ‰“äº¤é“ä¸€æ ·ã€‚ä¸è¿‡ï¼Œæœ‰æ—¶å³ä½¿æ˜¯æ™ºèƒ½çš„åƒåœ¾æ”¶é›†å™¨ä¹Ÿä¼šéœ€è¦æˆ‘ä»¬çš„è¾…åŠ©ã€‚åœ¨æŸäº›å…³é”®çš„æ€§èƒ½é˜¶æ®µï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†å…¶åœæ­¢ï¼Œæˆ–è€…è®©åªåœ¨ç‰¹å®šçš„æ—¶é—´è¿è¡Œã€‚å¦å¤–ï¼Œä¸€ä¸ªåƒåœ¾æ”¶é›†å™¨åªèƒ½æ”¶é›†å®ƒç¡®å®šæ˜¯åƒåœ¾çš„å†…å®¹ï¼Œè€Œä¸èƒ½çŒœæµ‹æˆ‘ä»¬æŠŠä»€ä¹ˆå½“ä½œåƒåœ¾ã€‚æ²¡æœ‰åƒåœ¾æ”¶é›†å™¨èƒ½å¤Ÿåšåˆ°è®©æˆ‘ä»¬å®Œå…¨ä¸ç”¨æ“å¿ƒèµ„æºç®¡ç†çš„é—®é¢˜ï¼Œæ¯”å¦‚é©»ç•™å†…å­˜å’Œå¤–éƒ¨èµ„æºã€‚<br>å¼±å¼•ç”¨è¡¨ã€ææ„å™¨å’Œå‡½æ•°collectgarbageæ˜¯åœ¨Luaè¯­è¨€ä¸­ç”¨æ¥è¾…åŠ©åƒåœ¾æ”¶é›†å™¨çš„ä¸»è¦æœºåˆ¶ã€‚å¼±å¼•ç”¨è¡¨å…è®¸æ”¶é›†Luaè¯­è¨€ä¸­è¿˜å¯ä»¥è¢«ç¨‹åºè®¿é—®çš„å¯¹è±¡ï¼›ææ„å™¨å…è®¸æ”¶é›†ä¸åœ¨åƒåœ¾æ”¶é›†å™¨ç›´æ¥æ§åˆ¶ä¸‹çš„å¤–éƒ¨å¯¹è±¡ï¼›å‡½æ•°collectgarbageåˆ™å…è®¸æˆ‘ä»¬æ§åˆ¶åƒåœ¾æ”¶é›†å™¨çš„æ­¥é•¿ã€‚</p>
<h2 id="å¼±å¼•ç”¨è¡¨"><a href="#å¼±å¼•ç”¨è¡¨" class="headerlink" title="å¼±å¼•ç”¨è¡¨"></a>å¼±å¼•ç”¨è¡¨</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œæ•°ç»„çš„æœ‰æ•ˆéƒ¨åˆ†æ€»æ˜¯å‘é¡¶éƒ¨æ‰©å±•çš„ï¼Œä½†Luaè¯­è¨€å´ä¸çŸ¥é“ã€‚å¦‚æœå¼¹å‡ºä¸€ä¸ªå…ƒç´ æ—¶åªæ˜¯ç®€å•åœ°é€’å‡é¡¶éƒ¨ç´¢å¼•ï¼Œé‚£ä¹ˆè¿™ä¸ªä»ç„¶ç•™åœ¨æ•°ç»„ä¸­çš„å¯¹è±¡å¯¹äºLuaè¯­è¨€æ¥è¯´å¹¶ä¸æ˜¯åƒåœ¾ã€‚åŒç†ï¼Œå³ä½¿æ˜¯ç¨‹åºä¸ä¼šå†ç”¨åˆ°çš„ã€å­˜å‚¨åœ¨å…¨å±€å˜é‡ä¸­çš„å¯¹è±¡ï¼Œå¯¹äºLuaè¯­è¨€æ¥è¯´ä¹Ÿä¸æ˜¯åƒåœ¾ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œéƒ½éœ€è¦æˆ‘ä»¬å°†è¿™äº›å¯¹è±¡æ‰€åœ¨çš„ä½ç½®èµ‹å€¼ä¸ºnilï¼Œä»¥ä¾¿è¿™äº›ä½ç½®ä¸ä¼šé”å®šå¯é‡Šæ”¾çš„å¯¹è±¡ã€‚<br>ä¸è¿‡ï¼Œç®€å•åœ°æ¸…é™¤å¼•ç”¨å¯èƒ½è¿˜ä¸å¤Ÿã€‚åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œè¿˜éœ€è¦ç¨‹åºå’Œåƒåœ¾æ”¶é›†å™¨ä¹‹é—´çš„åä½œã€‚ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯ï¼Œå½“æˆ‘ä»¬è¦ä¿å­˜æŸäº›ç±»å‹çš„æ´»è·ƒå¯¹è±¡çš„åˆ—è¡¨æ—¶ã€‚è¿™ä¸ªéœ€è¦çœ‹ä¸Šå»ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ¯ä¸ªæ–°å¯¹è±¡æ’å…¥æ•°ç»„å³å¯ï¼›ä½†æ˜¯ï¼Œä¸€æ—¦ä¸€ä¸ªå¯¹è±¡æˆä¸ºäº†æ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå°±å†ä¹Ÿæ— æ³•è¢«å›æ”¶ï¼è™½ç„¶å·²ç»æ²¡æœ‰å…¶ä»–ä»»ä½•åœ°æ–¹åœ¨å¼•ç”¨å®ƒï¼Œä½†æ•°ç»„ä¾ç„¶åœ¨å¼•ç”¨å®ƒã€‚é™¤éæˆ‘ä»¬å‘Šè¯‰Luaè¯­è¨€æ•°ç»„å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ä¸åº”è¯¥é˜»ç¢å¯¹æ­¤å¯¹è±¡çš„å›æ”¶ï¼Œå¦åˆ™Luaè¯­è¨€æœ¬èº«æ˜¯æ— ä»çŸ¥æ™“çš„ã€‚<br>å¼±å¼•ç”¨è¡¨å°±æ˜¯è¿™æ ·ä¸€ä¸ªç”¨æ¥å‘ŠçŸ¥Luaè¯­è¨€ä¸€ä¸ªå¼•ç”¨ä¸åº”é˜»æ­¢ä¸€ä¸ªå¯¹è±¡å›æ”¶çš„æœºåˆ¶ã€‚æ‰€è°“æ‰€å¼•ç”¨æ˜¯ä¸€ç§ä¸åœ¨åƒåœ¾æ”¶é›†å™¨è€ƒè™‘èŒƒå›´å†…çš„å¯¹è±¡å¼•ç”¨ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå¼±å¼•ç”¨è¡¨å°±æ˜¯å…ƒç´ å‡ä¸ºå¼±å¼•ç”¨çš„è¡¨ï¼Œè¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªå¯¹è±¡åªè¢«ä¸€ä¸ªå¼±å¼•ç”¨æŒæœ‰ï¼Œé‚£ä¹ˆLuaè¯­è¨€æœ€ç»ˆä¼šå›æ”¶è¿™ä¸ªå¯¹è±¡ã€‚<br>è¡¨ç”±é”®å€¼å¯¹ç»„æˆï¼Œå…¶ä¸¤è€…éƒ½å¯ä»¥å®¹çº³ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œåƒåœ¾æ”¶é›†å™¨ä¸ä¼šå›æ”¶ä¸€ä¸ªåœ¨å¯è®¿é—®çš„è¡¨ä¸­ä½œä¸ºé”®æˆ–å€¼çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”®å’Œå€¼éƒ½æ˜¯å¼ºå¼•ç”¨ï¼Œå®ƒä»¬ä¼šé˜»æ­¢å¯¹å…¶æ‰€æŒ‡å‘å¯¹è±¡çš„å›æ”¶ã€‚åœ¨ä¸€ä¸ªå¼±å¼•ç”¨è¡¨ä¸­ï¼Œé”®å’Œå€¼éƒ½å¯ä»¥æ˜¯å¼±å¼•ç”¨çš„ã€‚è¿™å°±æ„å‘³ç€æœ‰ä¸‰ç§ç±»å‹çš„å¼±å¼•ç”¨è¡¨ï¼Œå³å…·æœ‰å¼±å¼•ç”¨é”®çš„è¡¨ã€å…·æœ‰å¼±å¼•ç”¨å€¼çš„è¡¨åŠåŒæ—¶å…·æœ‰å¼±å¼•ç”¨é”®å’Œå€¼çš„è¡¨ã€‚ä¸è®ºæ˜¯å“ªç§ç±»å‹çš„å¼±å¼•ç”¨è¡¨ï¼Œåªè¦æœ‰ä¸€ä¸ªé”®æˆ–å€¼è¢«å›æ”¶äº†ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ•´ä¸ªé”®å€¼å¯¹éƒ½ä¼šè¢«ä»è¡¨ä¸­åˆ é™¤ã€‚<br>ä¸€ä¸ªè¡¨æ˜¯å¦ä¸ºå¼±å¼•ç”¨è¡¨æ˜¯ç”±å…¶å…ƒè¡¨ä¸­çš„__modeå­—æ®µå†³å®šçš„ã€‚å½“è¿™ä¸ªå­—æ®µå­˜åœ¨æ—¶ï¼Œå…¶å€¼åº”ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼šå¦‚æœè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯â€kâ€ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨çš„é”®æ˜¯å¼±å¼•ç”¨çš„ï¼›å¦‚æœè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯â€vâ€ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨çš„å€¼æ˜¯å¼±å¼•ç”¨çš„ï¼›å¦‚æœè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯â€kvâ€ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨çš„é”®å’Œå€¼éƒ½æ˜¯å¼±å¼•ç”¨çš„ã€‚ä¸‹é¢çš„ç¤ºä¾‹è™½ç„¶æœ‰äº›å¯ä»¥ï¼Œä½†æ¼”ç¤ºäº†å¼±å¼•ç”¨è¡¨çš„åŸºæœ¬è¡Œä¸ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;&#125;</span><br><span class="line">mt = &#123;<span class="built_in">__mode</span> = <span class="string">&quot;k&quot;</span>&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(a,mt)		<span class="comment">-- ç°åœ¨&#x27;a&#x27;çš„é”®æ˜¯å¼±å¼•ç”¨çš„äº†</span></span><br><span class="line">key = &#123;&#125;</span><br><span class="line">a[key] = <span class="number">1</span>				<span class="comment">-- åˆ›å»ºç¬¬ä¸€ä¸ªé”®</span></span><br><span class="line">key = &#123;&#125;</span><br><span class="line">a[key] = <span class="number">2</span>				<span class="comment">-- åˆ›å»ºç¬¬äºŒä¸ªé”®</span></span><br><span class="line"><span class="built_in">collectgarbage</span>()		<span class="comment">-- å¼ºåˆ¶è¿›è¡Œåƒåœ¾å›æ”¶</span></span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(a) <span class="keyword">do</span> <span class="built_in">print</span>(v) <span class="keyword">end</span>		<span class="comment">-- 2</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œç¬¬äºŒå¥èµ‹å€¼key &#x3D; {}è¦†ç›–äº†æŒ‡å‘ç¬¬ä¸€ä¸ªé”®çš„ç´¢å¼•ã€‚è°ƒç”¨collectgarbageå¼ºåˆ¶åƒåœ¾æ”¶é›†å™¨è¿›è¡Œä¸€æ¬¡å®Œæ•´çš„åƒåœ¾æ‰‹æœºã€‚ç”±äºå·²ç»æ²¡æœ‰æŒ‡å‘ç¬¬ä¸€ä¸ªé”®çš„å…¶ä»–å¼•ç”¨ä¸ªï¼Œå› æ­¤Luaè¯­è¨€ä¼šå›æ”¶è¿™ä¸ªé”®å¹¶ä»è¡¨ä¸­åˆ é™¤å¯¹åº”çš„å…ƒç´ ã€‚ç„¶è€Œï¼Œç”±äºç¬¬äºŒä¸ªé”®ä»ç„¶è¢«å˜é‡keyæ‰€å¼•ç”¨ï¼Œå› æ­¤Luaä¸ä¼šå›æ”¶å®ƒã€‚<br>è¯·æ³¨æ„ï¼Œåªæœ‰å¯¹è±¡å¯ä»¥ä»å¼±å¼•ç”¨è¡¨ä¸­è¢«ç§»é™¤ï¼Œè€Œåƒæ•°å­—å’Œå¸ƒå°”è¿™æ ·çš„â€œå€¼â€æ˜¯ä¸å¯å›æ”¶çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨è¡¨aä¸­æ’å…¥ä¸€ä¸ªæ•°å€¼ç±»å‹çš„é”®ï¼Œé‚£ä¹ˆåƒåœ¾æ”¶é›†å™¨æ°¸è¿œä¸ä¼šå›æ”¶å®ƒã€‚å½“ç„¶ï¼Œå¦‚æœåœ¨ä¸€ä¸ªå€¼ä¸ºå¼±å¼•ç”¨çš„å¼±å¼•ç”¨è¡¨ä¸­ï¼Œä¸€ä¸ªæ•°å€¼ç±»å‹é”®ç›¸å…³è”çš„å€¼è¢«å›æ”¶äº†ï¼Œé‚£ä¹ˆæ•´ä¸ªå…ƒç´ éƒ½ä¼šä»è¿™ä¸ªå¼±å¼•ç”¨è¡¨ä¸­è¢«åˆ é™¤ã€‚<br>å­—ç¬¦ä¸²åœ¨è¿™é‡Œè¡¨ç°äº†ä¸€äº›ç»†å¾®çš„å·®åˆ«ï¼Œè™½ç„¶ä»å®ç°çš„è§’åº¦çœ‹å­—ç¬¦ä¸²æ˜¯å¯å›æ”¶çš„ï¼Œä½†å­—ç¬¦ä¸²åˆä¸å…¶ä»–çš„å¯å›æ”¶å¯¹è±¡ä¸åŒã€‚å…¶ä»–çš„å¯¹è±¡ï¼Œä¾‹å¦‚è¡¨å’Œé—­åŒ…ï¼Œéƒ½æ˜¯è¢«æ˜¾å¼åˆ›å»ºçš„ã€‚ä¾‹å¦‚ï¼Œå½“Luaè¯­è¨€å¯¹è¡¨è¾¾å¼{}æ±‚å€¼æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°è¡¨ã€‚</p>
<h2 id="è®°å¿†å‡½æ•°"><a href="#è®°å¿†å‡½æ•°" class="headerlink" title="è®°å¿†å‡½æ•°"></a>è®°å¿†å‡½æ•°</h2><p>ç©ºé—´æ¢æ—¶é—´æ˜¯ä¸€ç§å¸¸è§çš„ç¼–ç¨‹æŠ€å·§ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®°å¿†å‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œåœ¨åç»­ä½¿ç”¨ç›¸åŒå‚æ•°å†æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ç›´æ¥è¿”å›ä¹‹å‰è®°å¿†çš„ç»“æœï¼Œæ¥åŠ å¿«å‡½æ•°çš„è¿è¡Œé€Ÿåº¦ã€‚<br>å‡è®¾æœ‰ä¸€ä¸ªé€šç”¨çš„æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨æ¥æ”¶çš„è¯·æ±‚æ˜¯ä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºçš„Luaè¯­è¨€ä»£ç ã€‚æ¯å½“æœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œå®ƒå°±å¯¹å­—ç¬¦ä¸²è¿è¡Œloadå‡½æ•°ï¼Œç„¶åå†è°ƒç”¨ç¼–è¯‘åçš„å‡½æ•°ã€‚ä¸è¿‡ï¼Œå‡½æ•°loadçš„å¼€é”€å¾ˆæ˜‚è´µï¼Œè€Œä¸”å‘é€ç»™æœåŠ¡å™¨çš„æŸäº›å‘½ä»¤çš„å‡ºç°é¢‘ç‡å¯èƒ½å¾ˆé«˜ã€‚è¿™æ ·ï¼Œä¸å…¶æ¯æ¬¡æ”¶åˆ°ä¸€æ¡è¯¸å¦‚â€closeconnection()â€è¿™æ ·çš„å¸¸è§å‘½ä»¤å°±é‡å¤åœ°è°ƒç”¨å‡½æ•°loadï¼Œè¿˜ä¸å¦‚è®©æœåŠ¡å™¨ç”¨ä¸€ä¸ªè¾…åŠ©è¡¨è®°å¿†æ‰€æœ‰å‡½æ•°loadçš„æ‰§è¡Œç»“æœã€‚åœ¨è°ƒç”¨å‡½æ•°loadå‰ï¼ŒæœåŠ¡å™¨å…ˆåœ¨è¡¨ä¸­æ£€æŸ¥æŒ‡å®šçš„å­—ç¬¦ä¸²æ˜¯å¦å·²ç»è¢«å¤„ç†è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±è°ƒç”¨å‡½æ•°loadå¹¶å°†è¿”å›å€¼ä¿å­˜åˆ°è¡¨ä¸­ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ç§è¡Œä¸ºå°è£…ä¸ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> results = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mem_loadstring</span><span class="params">(s)</span></span></span><br><span class="line">	<span class="keyword">local</span> res = results[s]</span><br><span class="line">	<span class="keyword">if</span> res == nli <span class="keyword">then</span></span><br><span class="line">		res = <span class="built_in">assert</span>(laod(s))</span><br><span class="line">		results[s] = res</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> res</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ¨¡å¼èŠ‚çœçš„å¼€é”€éå¸¸å¯è§‚ã€‚ä½†æ˜¯ï¼Œå®ƒä¹Ÿå¯èƒ½å¯¼è‡´ä¸æ˜“å¯Ÿè§‰çš„èµ„æºæµªè´¹ã€‚è™½ç„¶æœ‰äº›å‘½ä»¤ä¼šé‡å¤å‡ºç°ï¼Œä½†ä¹Ÿæœ‰å¾ˆå¤šå‘½ä»¤å¯èƒ½å°±å‡ºç°ä¸€æ¬¡ã€‚æ¸æ¸åœ°ï¼Œè¡¨resultsä¼šå †ç§¯ä¸ŠæœåŠ¡å™¨æ”¶åˆ°çš„æ‰€æœ‰å‘½ä»¤åŠç¼–è¯‘ç»“æœï¼›åœ¨è¿è¡Œä¸€æ®µè¶³å¤Ÿé•¿çš„æ—¶é—´åï¼Œè¿™ç§è¡Œä¸ºä¼šè€—å°½æœåŠ¡å™¨çš„å†…å­˜ã€‚<br>å¼±å¼•ç”¨è¡¨ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ¡ˆï¼Œå¦‚æœè¡¨resultså…·æœ‰å¼±å¼•ç”¨çš„å€¼ï¼Œé‚£ä¹ˆæ¯ä¸ªåƒåœ¾æ”¶é›†å‘¨æœŸéƒ½ä¼šåˆ é™¤æ‰€æœ‰é‚£ä¸ªæ—¶åˆ»æœªä½¿ç”¨çš„ç¼–è¯‘ç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> results = &#123;&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(results,&#123;<span class="built_in">__mode</span> = <span class="string">&quot;v&quot;</span>&#125;)		<span class="comment">-- è®©å€¼ç§°ä¸ºå¼±å¼•ç”¨</span></span><br><span class="line">funciton mem_loadstring(s)</span><br><span class="line"><span class="comment">--ä¸‹é¢å†…å®¹åŒå‰</span></span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šï¼Œå› ä¸ºç´¢å¼•æ°¸è¿œæ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¦‚æœæ„¿æ„çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è®©è¿™ä¸ªè¡¨å˜æˆå®Œå…¨å¼±å¼•ç”¨çš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setmetatable</span>(results,&#123;<span class="built_in">__mode</span> = <span class="string">&quot;kv&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆè¾¾åˆ°çš„æ•ˆæœæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚<br>è®°å¿†æŠ€æœ¯è¿˜å¯ä»¥ç”¨æ¥ç¡®ä¿æŸç±»å¯¹è±¡çš„å”¯ä¸€æ€§ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä¸€ä¸ªç³»ç»Ÿç”¨å…·æœ‰ä¸‰ä¸ªç›¸åŒå–å€¼èŒƒå›´çš„å­—æ®µredã€greenå’Œblueçš„è¡¨æ¥è¡¨ç¤ºé¢œè‰²ï¼Œä¸€ä¸ªç®€å•çš„é¢œè‰²å·¥å‚å‡½æ•°æ¯è¢«è°ƒç”¨ä¸€æ¬¡å°±ç”Ÿæˆä¸€ä¸ªé¢œè‰²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createRGB</span><span class="params">(r,g,b)</span></span></span><br><span class="line">	<span class="keyword">return</span> &#123;red = r, green = g ,blue = b&#125;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è®°å¿†æŠ€æœ¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸ºç›¸åŒçš„é¢œè‰²å¤ç”¨ç›¸åŒçš„è¡¨ã€‚è¦ä¸ºæ¯ä¸€ç§é¢œè‰²åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„é”®ï¼Œåªéœ€è¦ä½¿ç”¨åˆ†éš”ç¬¦æŠŠé¢œè‰²çš„ç´¢å¼•è¿æ¥èµ·æ¥å³å¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> results = &#123;&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(results,&#123;<span class="built_in">__mode</span> = <span class="string">&quot;v&quot;</span>&#125;)		<span class="comment">-- è®©å€¼ç§°ä¸ºå¼±å¼•ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createRGB</span><span class="params">( r,g,b )</span></span></span><br><span class="line">	<span class="keyword">local</span> key = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%d-%d-%d&quot;</span>,r,g,b)</span><br><span class="line">	<span class="keyword">local</span> color = results[key]</span><br><span class="line">	<span class="keyword">if</span> color == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">		color = &#123;red = r, green = g, blue = b&#125;</span><br><span class="line">		results[key] = color</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> color</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§å®ç°çš„ä¸€ä¸ªæœ‰è¶£ç»“æœæ˜¯ï¼Œç”±äºä¸¤ç§é¢œè‰²å­˜åœ¨çš„é¢œè‰²å¿…å®šæ˜¯ç”±åŒä¸€ä¸ªè¡¨æ¥è¡¨ç¤ºï¼Œæ‰€ä»¥ç”¨æˆ·å¯ä»¥ä½¿ç”¨åŸºæœ¬çš„ç›¸ç­‰è¿ç®—ç¬¦æ¯”è¾ƒä¸¤ç§é¢œè‰²ã€‚å› ä¸ºéšç€æ—¶é—´çš„è¿ç§»åƒåœ¾æ”¶é›†å™¨ä¼šæ¸…ç†è¡¨resultsï¼Œæ‰€ä»¥ä¸€ç§æŒ‡å®šçš„é¢œè‰²åœ¨ä¸åŒçš„æ—¶é—´å†…å¯èƒ½ç”±ä¸åŒçš„è¡¨æ¥è¡¨ç¤ºã€‚ä¸è¿‡ï¼Œåªè¦ä¸€ç§é¢œè‰²æ­£åœ¨è¢«ä½¿ç”¨ï¼Œå®ƒå°±ä¸ä¼šä»resultsä¸­è¢«ç§»é™¤ã€‚å› æ­¤ï¼Œä¸€ç§é¢œè‰²ä¸ä¸€ç§æ–°é¢œè‰²ç›¸æ¯”å·²ç»å­˜åœ¨äº†å¤šé•¿æ—¶é—´ï¼Œè¿™ç§é¢œè‰²å¯¹åº”çš„è¡¨ä¹Ÿå­˜åœ¨äº†å¯¹åº”é•¿åº¦çš„æ—¶é—´ï¼Œä¹Ÿå¯ä»¥è¢«æ–°é¢œè‰²å¤ç”¨ã€‚</p>
<h2 id="å¯¹è±¡å±æ€§"><a href="#å¯¹è±¡å±æ€§" class="headerlink" title="å¯¹è±¡å±æ€§"></a>å¯¹è±¡å±æ€§</h2><p>å¼±å¼•ç”¨è¡¨çš„å¦å¤–ä¸€ç§é‡è¦åº”ç”¨æ˜¯å°†å±æ€§ä¸å¯¹è±¡å…³è”èµ·æ¥ã€‚åœ¨å„ç§å„æ ·çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æŠŠæŸç§å±æ€§ç»‘å®šåˆ°æŸä¸ªå¯¹è±¡ï¼Œä¾‹å¦‚å‡½æ•°åã€è¡¨çš„é»˜è®¤å€¼åŠæ•°ç»„çš„å¤§å°ç­‰ã€‚<br>å½“å¯¹è±¡æ˜¯ä¸€ä¸ªè¡¨æ—¶ï¼Œå¯ä»¥é€šè¿‡é€‚å½“çš„å”¯ä¸€é”®æŠŠå±æ€§å­˜å‚¨åœ¨è¿™ä¸ªè¡¨è‡ªèº«ä¸­ã€‚ä¸è¿‡ï¼Œå¦‚æœå¯¹è±¡ä¸æ˜¯ä¸€ä¸ªè¡¨ï¼Œé‚£ä¹ˆå®ƒå°±ä¸èƒ½ä¿å­˜å®ƒè‡ªå·±çš„å±æ€§ã€‚å¦å¤–ï¼Œå³ä½¿æ˜¯è¡¨ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿä¸æƒ³æŠŠå±æ€§ä¿å­˜åœ¨åŸå§‹çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå½“æƒ³ä¿æŒå±æ€§çš„ç§æœ‰æ€§æ—¶ï¼Œæˆ–ä¸æƒ³è®©å±æ€§å¹²æ‰°è¡¨çš„éå†æ—¶ï¼Œå°±éœ€è¦ç”¨å…¶ä»–åŠæ³•æ¥å…³è”å¯¹è±¡å’Œå±æ€§ã€‚<br>å½“ç„¶ï¼Œå¤–éƒ¨è¡¨ä¸ºå¯¹è±¡å’Œå±æ€§çš„æ˜ å°„æä¾›äº†ä¸€ç§ç†æ€§çš„æ–¹æ³•ï¼Œå³å¯¹å¶è¡¨ç¤ºï¼Œå…¶ä¸­å°†å¯¹è±¡ç”¨ä½œé”®ã€å°†å¯¹è±¡çš„å±æ€§ç”¨ä½œå€¼ã€‚ç”±äºLuaè¯­è¨€å…è®¸ä½¿ç”¨ä»»æ„ç±»å‹çš„å¯¹è±¡ä½œä¸ºé”®ï¼Œå› æ­¤ä¸€ä¸ªå¤–éƒ¨è¡¨å¯ä»¥ä¿å­˜ä»»æ„ç±»å‹å¯¹è±¡çš„å±æ€§ã€‚æ­¤å¤–ï¼Œå­˜å‚¨åœ¨å¤–éƒ¨è¡¨ä¸­çš„å±æ€§ä¸ä¼šå¹²æ‰°å…¶ä»–å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥åƒè¡¨æœ¬èº«ä¸€æ ·æ˜¯ç§æœ‰çš„ã€‚<br>ä¸è¿‡ï¼Œè¿™ä¸ªçœ‹ä¼¼å®Œç¾çš„æ–¹æ¡ˆæœ‰ä¸€ä¸ªé‡å¤§ç¼ºé™·ï¼šä¸€æ—¦æˆ‘ä»¬æŠŠä¸€ä¸ªå¯¹è±¡å½“ä½œè¡¨ä¸­çš„ä¸€ä¸ªé”®ï¼Œé‚£ä¹ˆå°±æ˜¯å¼•ç”¨äº†å®ƒã€‚Luaè¯­è¨€æ— æ³•å›æ”¶ä¸€ä¸ªæ­£åœ¨è¢«ç”¨ä½œé”®çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„è¡¨æ¥æ˜ å°„å‡½æ•°å’Œå‡½æ•°åï¼Œé‚£ä¹ˆè¿™äº›å‡½æ•°å°±æ°¸è¿œæ— æ³•è¢«å›æ”¶ã€‚</p>
<h2 id="å›é¡¾å…·æœ‰é»˜è®¤å€¼çš„è¡¨"><a href="#å›é¡¾å…·æœ‰é»˜è®¤å€¼çš„è¡¨" class="headerlink" title="å›é¡¾å…·æœ‰é»˜è®¤å€¼çš„è¡¨"></a>å›é¡¾å…·æœ‰é»˜è®¤å€¼çš„è¡¨</h2><p>åœ¨ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå¼±å¼•ç”¨è¡¨æ¥æ˜ å°„æ¯ä¸€ä¸ªè¡¨å’Œå®ƒçš„é»˜è®¤å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> defaults = &#123;&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(defaults,&#123;<span class="built_in">__mode</span> = <span class="string">&quot;k&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">local</span> mt = &#123;<span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span><span class="params">(t)</span></span> <span class="keyword">return</span> defaults[t] <span class="keyword">end</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setDefault</span> <span class="params">(t,d)</span></span></span><br><span class="line">	defaults[t] = d</span><br><span class="line">	<span class="built_in">setmetatable</span>(t,mt)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯å¯¹å¶è¡¨ç¤ºçš„ä¸€ç§å…¸å‹åº”ç”¨ï¼Œå…¶ä¸­ä½¿ç”¨äº†defaults[t]æ¥è¡¨ç¤ºt.defaultsã€‚å¦‚æœè¡¨defaultsæ²¡æœ‰å¼±å¼•ç”¨çš„é”®ï¼Œé‚£ä¹ˆæ‰€æœ‰å…·æœ‰é»˜è®¤å€¼çš„è¡¨å°±ä¼šæ°¸è¿œå­˜åœ¨ä¸‹å»ã€‚<br>åœ¨ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬å¯¹ä¸åŒçš„é»˜è®¤å€¼ä½¿ç”¨äº†ä¸åŒçš„å…ƒç´ ï¼Œåœ¨é‡åˆ°é‡å¤çš„é»˜è®¤å€¼æ—¶ä¼šå¤ç”¨ç›¸åŒçš„å…ƒè¡¨ã€‚è¿™æ˜¯è®°å¿†æŠ€æœ¯çš„ä¸€ç§å…¸å‹åº”ç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> metas = &#123;&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(metas,&#123;<span class="built_in">__mode</span> = <span class="string">&quot;v&quot;</span>&#125;)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setDefault</span><span class="params">(t,d)</span></span></span><br><span class="line">	<span class="keyword">local</span> mt = metas[d]</span><br><span class="line">	<span class="keyword">if</span> mt == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">		mt = &#123;<span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="keyword">return</span> d <span class="keyword">end</span>&#125;</span><br><span class="line">		metas[d] = mt</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="built_in">setmetatable</span>(t,mt)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨å¼±å¼•ç”¨çš„å€¼ä½¿å¾—ä¸å†è¢«ä½¿ç”¨çš„å…ƒè¡¨èƒ½å¤Ÿå›æ”¶ã€‚<br>è¿™ä¸¤ç§å®ç°å“ªç§æ›´å¥½å–å†³äºå…·ä½“çš„æƒ…å†µã€‚è¿™ä¸¤ç§å®ç°å…·æœ‰ç±»ä¼¼çš„å¤æ‚åº¦å’Œæ€§èƒ½è¡¨ç°ï¼Œç¬¬ä¸€ç§å®ç°éœ€è¦ä¸ºæ¯ä¸ªå…·æœ‰é»˜è®¤å€¼çš„è¡¨åˆ†é…å‡ ä¸ªå­—èŠ‚çš„å†…å­˜ï¼Œè€Œç¬¬äºŒç§å®ç°åˆ™éœ€è¦ä¸ºæ¯ä¸ªä¸åŒçš„é»˜è®¤å€¼åˆ†é…è‹¥å¹²å†…å­˜ã€‚å› æ­¤ï¼Œå¦‚æœåº”ç”¨ä¸­æœ‰ä¸Šåƒä¸ªå…·æœ‰å°‘é‡ä¸åŒé»˜è®¤å€¼çš„è¡¨ï¼Œé‚£ä¹ˆç¬¬äºŒç§å®ç°æ˜æ˜¾æ›´å¥½ã€‚ä¸è¿‡ï¼Œå¦‚æœåªæœ‰å°‘é‡å…±äº«é»˜è®¤å€¼çš„è¡¨ï¼Œé‚£ä¹ˆå°±åº”è¯¥é€‰æ‹©ç¬¬ä¸€ç§å®ç°ã€‚</p>
<h2 id="ç¬è¡¨"><a href="#ç¬è¡¨" class="headerlink" title="ç¬è¡¨"></a>ç¬è¡¨</h2><p>ä¸€ç§æ£˜æ‰‹çš„æƒ…å†µæ˜¯ï¼Œä¸€ä¸ªå…·æœ‰å¼±å¼•ç”¨é”®çš„è¡¨ä¸­çš„å€¼åˆå¼•ç”¨äº†å¯¹åº”çš„é”®ã€‚<br>è¿™ç§æƒ…å†µçœ‹ä¸Šå»æ›´åŠ å¸¸è§ã€‚ä¸€ä¸ªå…¸å‹çš„ç¤ºä¾‹æ˜¯å¸¸é‡å‡½æ•°å·¥å‚ã€‚è¿™ç§å·¥å‚çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªè¢«è°ƒç”¨æ—¶è¿”å›ä¼ å…¥å¯¹è±¡çš„å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factory</span><span class="params">(o)</span></span></span><br><span class="line">	<span class="keyword">return</span> (<span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="keyword">return</span> o <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§å·¥å‚æ—¶å®ç°è®°å¿†çš„ä¸€ç§å¾ˆå¥½çš„æ‰‹æ®µï¼Œå¯ä»¥é¿å…åœ¨é—­åŒ…å·²ç»å­˜åœ¨æ—¶åˆåˆ›å»ºæ–°çš„é—­åŒ…ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹  ä½¿ç”¨è®°å¿†æŠ€æœ¯çš„å¸¸é‡å‡½æ•°å·¥å‚</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span> </span><br><span class="line">	<span class="keyword">local</span> mem = &#123;&#125;</span><br><span class="line">	<span class="built_in">setmetatable</span>(mem, &#123;<span class="built_in">__mode</span> = <span class="string">&quot;k&quot;</span>&#125;)</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">factory</span><span class="params">(o)</span></span></span><br><span class="line">		<span class="keyword">local</span> res = mem[o]</span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> res <span class="keyword">then</span></span><br><span class="line">			res = (<span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="keyword">return</span> o <span class="keyword">end</span>)</span><br><span class="line">			mem[o] = res</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">		<span class="keyword">return</span> res</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œè¿™é‡Œå¦æœ‰ç„æœºã€‚è¯·æ³¨æ„ï¼Œè¡¨memä¸­ä¸ä¸€ä¸ªå¯¹è±¡å…³è”çš„å€¼å›æŒ‡äº†å®ƒè‡ªå·±çš„é”®ã€‚è™½ç„¶è¡¨ä¸­çš„é”®æ˜¯å¼±å¼•ç”¨çš„ï¼Œä½†æ˜¯è¡¨ä¸­çš„å€¼å´ä¸æ˜¯å¼±å¼•ç”¨çš„ã€‚ä»ä¸€ä¸ªå¼±å¼•ç”¨è¡¨çš„æ ‡å‡†ç†è§£çœ‹ï¼Œè®°å¿†è¡¨ä¸­æ²¡æœ‰ä»»ä½•ä¸œè¥¿ä¼šè¢«ç§»é™¤ã€‚ç”±äºå€¼ä¸æ˜¯å¼±å¼•ç”¨çš„ï¼Œæ‰€ä»¥å¯¹äºæ¯ä¸€ä¸ªå‡½æ•°æ¥è¯´éƒ½å­˜åœ¨ä¸€ä¸ªå¼ºå¼•ç”¨ã€‚æ¯ä¸€ä¸ªå‡½æ•°éƒ½æŒ‡å‘å…¶å¯¹åº”çš„å¯¹è±¡ï¼Œå› è€Œå¯¹äºæ¯ä¸€ä¸ªé”®æ¥è¯´éƒ½å­˜åœ¨ä¸€ä¸ªå¼ºåº”ç”¨ã€‚å› æ­¤ï¼Œå³ä½¿æœ‰å¼±å¼•ç”¨çš„é”®ï¼Œè¿™äº›å¯¹è±¡ä¹Ÿä¸ä¼šè¢«å›æ”¶ã€‚<br>ä¸è¿‡ï¼Œè¿™ç§ä¸¥æ ¼çš„ç†è§£ä¸æ˜¯ç‰¹åˆ«æœ‰ç”¨ã€‚å¤§å¤šæ•°äººå¸Œæœ›ä¸€ä¸ªè¡¨ä¸­çš„å€¼åªèƒ½é€šè¿‡å¯¹åº”çš„é”®æ¥è®¿é—®ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸ºä¹‹å‰çš„æƒ…å†µæ˜¯æŸç§ç¯ï¼Œå…¶ä¸­é—­åŒ…å¼•ç”¨äº†æŒ‡å›é—­åŒ…çš„å¯¹è±¡ã€‚<br>Luaè¯­è¨€é€šè¿‡ç¬è¡¨çš„æ¦‚å¿µæ¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚åœ¨Luaè¯­è¨€ä¸­ï¼Œä¸€ä¸ªå…·æœ‰å¼±å¼•ç”¨é”®å’Œå¼ºå¼•ç”¨å€¼çš„è¡¨æ˜¯ä¸€ä¸ªç¬è¡¨ã€‚åœ¨ä¸€ä¸ªé¡ºè¡¨ä¸­ï¼Œä¸€ä¸ªé”®çš„å¯è®¿é—®æ€§æ§åˆ¶ç€å¯¹åº”å€¼çš„å¯è®¿é—®æ€§ã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œè€ƒè™‘ç¬è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ŒæŒ‡å‘çš„vçš„å¼•ç”¨åªæœ‰å½“å­˜åœ¨æŸäº›æŒ‡å‘kçš„å…¶ä»–å¤–éƒ¨å¼•ç”¨å­˜åœ¨æ—¶æ‰æ˜¯å¼ºå¼•ç”¨ï¼Œå¦åˆ™ï¼Œå³ä½¿vå¼•ç”¨äº†kï¼Œåƒåœ¾æ”¶é›†å™¨æœ€ç»ˆä¼šæ”¶é›†kå¹¶æŠŠå…ƒç´ ä»è¡¨ä¸­ç§»é™¤ã€‚</p>
<h2 id="ææ„å™¨"><a href="#ææ„å™¨" class="headerlink" title="ææ„å™¨"></a>ææ„å™¨</h2><p>è™½ç„¶åƒåœ¾æ”¶é›†å™¨çš„ç›®æ ‡æ˜¯å›æ”¶å¯¹è±¡ï¼Œä½†æ˜¯å®ƒå¯ä»¥å¸®åŠ©ç¨‹åºå‘˜æ¥é‡Šæ”¾å¤–éƒ¨èµ„æºã€‚å¤„äºè¿™ç§ç›®çš„ï¼Œå‡ ç§ç¼–ç¨‹è¯­è¨€æä¾›äº†ææ„å™¨ã€‚ææ„å™¨æ˜¯ä¸€ä¸ªä¸å¯¹è±¡å…³è”çš„å‡½æ•°ï¼Œå½“è¯¥å¯¹è±¡å³å°†è¢«å›æ”¶æ—¶è¯¥å‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚<br>Luaè¯­è¨€é€šè¿‡å…ƒæ–¹æ³•__gcå®ç°ææ„å™¨ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">o = &#123;x = <span class="string">&quot;hi&quot;</span>&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(o,&#123;<span class="built_in">__gc</span> = <span class="function"><span class="keyword">function</span><span class="params">(o)</span></span> <span class="built_in">print</span>(o.x) <span class="keyword">end</span>&#125;)</span><br><span class="line">o = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">collectgarbage</span>()		<span class="comment">-- nil</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªå¸¦æœ‰__gcå…ƒæ–¹æ³•å…ƒè¡¨çš„è¡¨ã€‚ç„¶åï¼ŒæŠ¹å»ä¸è¿™ä¸ªè¡¨çš„å”¯ä¸€è”ç³»ï¼Œå†å¼ºåˆ¶è¿›è¡Œä¸€æ¬¡å®Œæ•´çš„åƒåœ¾å›æ”¶ã€‚åœ¨åƒåœ¾å›æ”¶æœŸé—´ï¼ŒLuaè¯­è¨€å‘ç°è¡¨å·²ç»ä¸å†æ˜¯å¯è®¿é—®çš„äº†ï¼Œå› æ­¤è°ƒç”¨è¡¨çš„ææ„å™¨ï¼Œä¹Ÿå°±æ˜¯å…ƒæ–¹æ³•__gcã€‚<br>Luaè¯­è¨€ä¸­ï¼Œææ„å™¨çš„ä¸€ä¸ªå¾®å¦™ä¹‹å¤„åœ¨äºâ€œå°†ä¸€ä¸ªå¯¹è±¡æ ‡è®°ä¸ºéœ€è¦ææ„â€çš„æ¦‚å¿µã€‚é€šè¿‡ç»™å¯¹è±¡è®¾ç½®ä¸€ä¸ªå…·æœ‰éç©º__gcå…ƒæ–¹æ³•çš„å…ƒè¡¨ï¼Œå°±å¯ä»¥æŠŠä¸€ä¸ªå¯¹è±¡æ ‡è®°ä¸ºéœ€è¦è¿›è¡Œææ„å¤„ç†ã€‚å¦‚æœä¸æ ‡è®°å¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹è±¡å°±ä¸ä¼šè¢«ææ„ã€‚æˆ‘ä»¬ç¼–å†™çš„å¤§å¤šæ•°ä»£ç ä¼šæ­£å¸¸è¿è¡Œï¼Œä½†ä¼šå‘ç”ŸæŸäº›å¥‡æ€ªçš„è¡Œä¸ºï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">o = &#123;x = <span class="string">&quot;hi&quot;</span>&#125;</span><br><span class="line">mt = &#123;&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(o,mt)</span><br><span class="line">mt.<span class="built_in">__gc</span> = <span class="function"><span class="keyword">function</span><span class="params">(o)</span></span> <span class="built_in">print</span>(o.x) <span class="keyword">end</span></span><br><span class="line">o = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">collectgarbage</span>()		<span class="comment">-- (print nothing)</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬ç¡®å®è¦ç»™å¯¹è±¡oè®¾ç½®äº†å…ƒè¡¨ï¼Œä½†æ˜¯è¿™ä¸ªå…ƒè¡¨æ²¡æœ‰__gcæ–¹æ³•ï¼Œå› æ­¤å¯¹è±¡æ²¡æœ‰è¢«æ ‡è®°ä¸ºéœ€è¦è¿›è¡Œææ„å¤„ç†ã€‚å³ä½¿æˆ‘ä»¬åç»­ç»™å…ƒè¡¨å¢åŠ äº†å…ƒæ–¹æ³•__gcï¼ŒLuaè¯­è¨€ä¹Ÿå‘ç°ä¸äº†è¿™ç§èµ‹å€¼çš„ç‰¹æ®Šä¹‹å¤„ï¼Œå› æ­¤ä¸ä¼šæŠŠå¯¹è±¡æ ‡è®°ä¸ºéœ€è¦è¿›è¡Œææ„å¤„ç†ã€‚<br>æ­£å¦‚æˆ‘ä»¬æ‰€æåˆ°çš„ï¼Œè¿™å¾ˆå°‘ä¼šæœ‰é—®é¢˜ã€‚åœ¨è®¾ç½®å…ƒè¡¨åï¼Œå¾ˆå°‘ä¼šæ”¹å˜å…ƒæ–¹æ³•ã€‚å¦‚æœçœŸçš„éœ€è¦åœ¨åç»­è®¾ç½®å…ƒæ–¹æ³•ï¼Œé‚£ä¹ˆå¯ä»¥ç»™å­—æ®µ__gcå…ˆèµ‹ä¸€ä¸ªä»»æ„å€¼ä½œä¸ºå ä½ç¬¦ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">o = &#123;x = <span class="string">&quot;hi&quot;</span>&#125;</span><br><span class="line">mt = &#123;<span class="built_in">__gc</span> = <span class="literal">true</span>&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(o,mt)</span><br><span class="line">mt.<span class="built_in">__gc</span> = <span class="function"><span class="keyword">function</span><span class="params">(o)</span></span> <span class="built_in">print</span>(o.x) <span class="keyword">end</span></span><br><span class="line">o = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">collectgarbage</span>()		<span class="comment">-- nil</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œç”±äºå…ƒè¡¨æœ‰äº†__gcå­—æ®µï¼Œå› æ­¤å¯¹è±¡ä¼šè¢«æ­£ç¡®åœ°æ ‡è®°ä¸ºéœ€è¦ææ„å¤„ç†ã€‚å¦‚æœåç»­å†è®¾ç½®å…ƒæ–¹æ³•ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œåªè¦å…ƒæ–¹æ³•æ—¶ä¸€ä¸ªæ­£ç¡®çš„å‡½æ•°ï¼ŒLuaè¯­è¨€å°±èƒ½å¤Ÿè°ƒç”¨å®ƒã€‚<br>å½“åƒåœ¾æ”¶é›†å™¨åœ¨åŒä¸€ä¸ªå‘¨æœŸä¸­ææ„å¤šä¸ªå¯¹è±¡æ—¶ï¼Œå®ƒä¼šæŒ‰ç…§å¯¹è±¡è¢«æ ‡è®°ä¸ºéœ€è¦ææ„å¤„ç†çš„é¡ºåºé€†åºè°ƒç”¨è¿™äº›å¯¹è±¡çš„ææ„å™¨ã€‚è¯·è€ƒè™‘å¦‚ä¸‹çš„ç¤ºä¾‹ï¼Œè¯¥ç¤ºä¾‹åˆ›å»ºäº†ä¸€ä¸ªç”±å¸¦æœ‰ææ„å™¨çš„å¯¹è±¡æ‰€ç»„æˆçš„é“¾è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mt = &#123;<span class="built_in">__gc</span> = <span class="function"><span class="keyword">function</span><span class="params">(o)</span></span> <span class="built_in">print</span>(o[<span class="number">1</span>]) <span class="keyword">end</span>&#125;</span><br><span class="line">list = <span class="literal">nil</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span> , <span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">	list = <span class="built_in">setmetatable</span>(&#123;i,link = list&#125;,mt)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">list = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">collectgarbage</span>()</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªè¢«ææ„çš„å¯¹è±¡æ˜¯3ï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€ä¸ªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚<br>ä¸€ç§å¸¸è§çš„è¯¯è§£æ˜¯è®¤ä¸ºæ­£åœ¨è¢«å›æ”¶çš„å¯¹è±¡ä¹‹é—´çš„å…³è”ä¼šå½±å“å¯¹è±¡ææ„çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œæœ‰äº›äººå¯èƒ½è®¤ä¸ºä¸Šä¾‹ä¸­çš„å¯¹è±¡2å¿…é¡»åœ¨å¯¹è±¡1ä¹‹å‰è¢«ææ„ï¼Œå› ä¸ºå­˜åœ¨ä»2åˆ°1çš„å…³è”ã€‚ä½†æ˜¯ï¼Œå…³è”ä¼šè¡Œç¨‹ç¯ã€‚æ‰€ä»¥ï¼Œå…³è”å¹¶ä¸ä¼šå½±å“ææ„å™¨æ‰§è¡Œçš„é¡ºåºã€‚<br>æœ‰å…³ææ„å™¨çš„å¦ä¸ªä¸€å¾®å¦™ä¹‹å¤„æ˜¯å¤è‹ã€‚å½“ä¸€ä¸ªææ„å™¨è¢«è°ƒç”¨æ—¶ï¼Œå®ƒçš„å‚æ•°æ˜¯æ­£åœ¨è¢«ææ„çš„å¯¹è±¡ã€‚å› æ­¤ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šè‡³å°‘åœ¨ææ„æœŸé—´é‡æ–°ç¼–ç¨‹æ´»è·ƒçš„ã€‚ç¬”è€…æŠŠè¿™ç§°ä¸ºä¸´æ—¶å¤è‹ã€‚åœ¨ææ„å™¨æ‰§è¡ŒæœŸé—´ï¼Œæˆ‘ä»¬æ— æ³•é˜»æ­¢ææ„å™¨æŠŠè¯¥å¯¹è±¡å­˜å‚¨åœ¨å…¨å±€å˜é‡ä¸­ï¼Œä½¿å¾—è¯¥å¯¹è±¡åœ¨ææ„å™¨è¿”å›åä»ç„¶å¯ä»¥è®¿é—®ï¼Œç¬”è€…æŠŠè¿™ç§°ä¸ºæ°¸ä¹…å¤è‹ã€‚</p>
<p>å¤è‹å¿…é¡»æ˜¯å¯ä¼ é€’çš„ã€‚è€ƒè™‘å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">A = &#123;x = <span class="string">&quot;this is A&quot;</span>&#125;</span><br><span class="line">B = &#123;f = A&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(B,&#123;<span class="built_in">__gc</span> = <span class="function"><span class="keyword">function</span><span class="params">(o)</span></span> <span class="built_in">print</span>(o.f.x) <span class="keyword">end</span>&#125;)</span><br><span class="line">A,B = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">collectgarbage</span>() 		<span class="comment">-- this is A</span></span><br></pre></td></tr></table></figure>
<p>Bçš„ææ„å™¨è®¿é—®äº†Aï¼Œå› æ­¤Aåœ¨Bææ„å‰ä¸èƒ½è¢«å›æ”¶ï¼ŒLuaè¯­è¨€åœ¨è¿è¡Œææ„å™¨ä¹‹å‰å¿…é¡»åŒæ—¶å¤è‹Bå’ŒAã€‚<br>ç”±äºå¤è‹çš„å­˜åœ¨ï¼ŒLuaè¯­è¨€ä¼šåœ¨ä¸¤ä¸ªé˜¶æ®µä¸­å›æ”¶å…·æœ‰ææ„å™¨çš„å¯¹è±¡ã€‚å½“åƒåœ¾æ”¶é›†å™¨é¦–æ¬¡å‘ç”ŸæŸä¸ªå…·æœ‰ææ„å™¨çš„å¯¹è±¡ä¸å¯è¾¾æ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨å°±æŠŠè¿™ä¸ªå¯¹è±¡å¤è‹å¹¶å°†å…¶æ”¾å…¥ç­‰å¾…è¢«ææ„çš„é˜Ÿåˆ—ä¸­ã€‚ä¸€æ—¦ææ„å™¨å¼€å§‹æ‰§è¡Œï¼ŒLuaè¯­è¨€å°±å°†å¯¹è¯¥å¯¹è±¡æ ‡è®°ä¸ºå·²è¢«ææ„ã€‚å½“ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å™¨åˆå‘ç°è¿™ä¸ªå¯¹è±¡ä¸å¯è¾¾æ—¶ï¼Œå®ƒå°±å°†è¿™ä¸ªå¯¹è±¡åˆ é™¤ã€‚å¦‚æœæƒ³ä¿è¯æˆ‘ä»¬ç¨‹åºä¸­çš„æ‰€æœ‰åƒåœ¾éƒ½è¢«çœŸæ­£åœ°é‡Šæ”¾äº†çš„è¯ï¼Œé‚£ä¹ˆå¿…é¡»è°ƒç”¨collectgarbageä¸¤æ¬¡ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨æ‰ä¼šåˆ é™¤ç¬¬ä¸€æ¬¡è°ƒç”¨ä¸­è¢«ææ„çš„å¯¹è±¡ã€‚<br>ç”±äºLuaè¯­è¨€åœ¨ææ„å¯¹è±¡ä¸Šè®¾ç½®äº†æ ‡è®°ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡çš„ææ„å™¨éƒ½ä¼šç²¾ç¡®åœ°è¿è¡Œä¸€æ¬¡ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ç›´åˆ°ç¨‹åºè¿è¡Œç»“æŸè¿˜æ²¡æœ‰è¢«å›æ”¶ï¼Œé‚£ä¹ˆLuaè¯­è¨€å°±ä¼šåœ¨æ•´ä¸ªLuaè™šæ‹Ÿæœºå…³é—­åè°ƒç”¨å®ƒçš„ææ„å™¨ã€‚è¿™ç§ç‰¹è¡Œåœ¨Luaè¯­è¨€ä¸­å®ç°äº†æŸç§å½¢å¼çš„atexitå‡½æ•°ï¼Œå³åœ¨ç¨‹åºç»ˆç»“å‰ç«‹å³è¿è¡Œçš„å‡½æ•°ã€‚æˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ææ„å™¨çš„è¡¨ï¼Œç„¶åæŠŠå®ƒé”šå®šåœ¨æŸå¤„ï¼Œä¾‹å¦‚é”šå®šåˆ°å…¨å±€è¡¨ä¸­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> t = &#123;<span class="built_in">__gc</span> = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;finishing Lua program&quot;</span>)</span><br><span class="line">	<span class="keyword">end</span>&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(t,t)</span><br><span class="line"><span class="built_in">_G</span>[<span class="string">&quot;*AA*&quot;</span>] = t</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ä¸€ä¸ªæœ‰è¶£çš„æŠ€å·§ä¼šå…è®¸ç¨‹åºåœ¨æ¯æ¬¡å®Œæˆåƒåœ¾å›æ”¶åè°ƒç”¨æŒ‡å®šçš„å‡½æ•°ã€‚ç”±äºææ„å™¨åªè¿è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥è¿™ç§æŠ€å·§æ˜¯è®©æ¯ä¸ªææ„å™¨åˆ›å»ºä¸€ä¸ªç”¨æ¥è¿è¡Œä¸‹ä¸€ä¸ªææ„å™¨çš„æ–°å¯¹è±¡ï¼Œå‚è€ƒç¤ºä¾‹ï¼š</p>
<blockquote>
<p>ç¤ºä¾‹ åœ¨æ¯æ¬¡GCåè¿è¡Œä¸€ä¸ªå‡½æ•°</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="keyword">local</span> mt = &#123;<span class="built_in">__gc</span> = <span class="function"><span class="keyword">function</span><span class="params">(o)</span></span></span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;new cycle&quot;</span>)</span><br><span class="line">		<span class="built_in">setmetatable</span>(&#123;&#125;,<span class="built_in">getmetatable</span>(o))</span><br><span class="line">	<span class="keyword">end</span>&#125;</span><br><span class="line">	<span class="built_in">setmetatable</span>(&#123;&#125;,mt)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">collectgarbage</span>()		<span class="comment">-- ä¸€æ¬¡åƒåœ¾æ”¶é›†</span></span><br><span class="line"><span class="built_in">collectgarbage</span>()		<span class="comment">-- ä¸€æ¬¡åƒåœ¾æ”¶é›†</span></span><br><span class="line"><span class="built_in">collectgarbage</span>()		<span class="comment">-- ä¸€æ¬¡åƒåœ¾æ”¶é›†</span></span><br></pre></td></tr></table></figure>
<p>å…·æœ‰ææ„å™¨çš„å¯¹è±¡å’Œå¼±å¼•ç”¨è¡¨ä¹‹é—´çš„äº¤äº’ä¹Ÿæœ‰äº›å¾®å¦™ã€‚åœ¨æ¯ä¸ªåƒåœ¾æ”¶é›†å‘¨æœŸå†…ï¼Œåƒåœ¾æ”¶é›†å™¨ä¼šåœ¨è°ƒç”¨ææ„å™¨å‰æ¸…ç†å¼±åº”ç”¨è¡¨ä¸­çš„å€¼ï¼Œåœ¨è°ƒç”¨ææ„å™¨ä¹‹åå†æ¸…ç†é”®ã€‚è¿™ç§è¡Œä¸ºçš„åŸç†åœ¨äºæˆ‘ä»¬ç»å¸¸ä½¿ç”¨å¸¦æœ‰å¼±å¼•ç”¨é”®çš„è¡¨æ¥ä¿å­˜å¯¹è±¡çš„å±æ€§ï¼Œå› æ­¤ï¼Œææ„å™¨å¯èƒ½éœ€è¦è®¿é—®é‚£äº›å±æ€§ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬ä¹Ÿä¼šä½¿ç”¨å…·æœ‰å¼±å¼•ç”¨å€¼çš„è¡¨æ¥é‡ç”¨æ´»è·ƒçš„å¯¹è±¡ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ­£åœ¨è¢«ææ„çš„å¯¹è±¡å°±ä¸å†æœ‰ç”¨äº†ã€‚</p>
<h2 id="åƒåœ¾æ”¶é›†å™¨"><a href="#åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨"></a>åƒåœ¾æ”¶é›†å™¨</h2><p>ä¸€ç›´åˆ°Lua5.0ï¼ŒLuaè¯­è¨€ä½¿ç”¨çš„éƒ½æ˜¯ä¸€ä¸ªç®€å•çš„æ ‡è®°-æ¸…é™¤å¼åƒåœ¾æ”¶é›†å™¨ã€‚è¿™ç§æ”¶é›†å™¨åˆè¢«ç§°ä¸ºâ€œstop-the-worldï¼ˆå…¨å±€æš‚åœï¼‰â€å¼çš„æ”¶é›†å™¨ï¼Œæ„å‘³ç€Luaè¯­è¨€ä¼šæ—¶ä¸æ—¶åœ°åœæ­¢ä¸»ç¨‹åºçš„è¿è¡Œæ¥æ‰§è¡Œä¸€æ¬¡å®Œæ•´çš„åƒåœ¾æ”¶é›†å‘¨æœŸã€‚æ¯ä¸€ä¸ªåƒåœ¾æ”¶é›†å‘¨æœŸç”±å››ä¸ªé˜¶æ®µç»„æˆï¼šæ ‡è®°ã€æ¸…ç†ã€æ¸…é™¤å’Œææ„ã€‚<br>æ ‡è®°é˜¶æ®µæŠŠæ ¹èŠ‚ç‚¹é›†åˆæ ‡è®°ä¸ºæ´»è·ƒï¼Œæ ¹ç»“ç‚¹é›†åˆç”±Luaè¯­è¨€å¯ä»¥ç›´æ¥è®¿é—®çš„å¯¹è±¡ç»„æˆã€‚åœ¨Luaè¯­è¨€ä¸­ï¼Œè¿™ä¸ªé›†åˆåªåŒ…æ‹¬Cæ³¨å†Œè¡¨ã€‚<br>ä¿å­˜åœ¨ä¸€ä¸ªæ´»è·ƒå¯¹è±¡ä¸­çš„å¯¹è±¡æ˜¯ç¨‹åºå¯è¾¾çš„ï¼Œå› æ­¤ä¹Ÿä¼šè¢«æ ‡è®°æ´»è·ƒã€‚å½“æ‰€æœ‰å¯è¾¾å¯¹è±¡éƒ½è¢«æ ‡è®°ä¸ºæ´»è·ƒåï¼Œæ ‡è®°é˜¶æ®µå®Œæˆã€‚<br>åœ¨å¼€å§‹æ¸…é™¤é˜¶æ®µå‰ï¼ŒLuaè¯­è¨€å…ˆæ‰§è¡Œæ¸…ç†é˜¶æ®µï¼Œåœ¨è¿™ä¸ªé˜¶æ®µä¸­å¤„ç†ææ„å™¨å’Œå¼±å¼•ç”¨è¡¨ã€‚é¦–å…ˆï¼ŒLuaè¯­è¨€éå†æ‰€æœ‰è¢«æ ‡è®°ä¸ºéœ€è¦è¿›è¡Œææ„ã€ä½†åˆæ²¡æœ‰è¢«æ ‡è®°ä¸ºæ´»è·ƒçŠ¶æ€çš„å¯¹è±¡ã€‚è¿™äº›æ²¡æœ‰æ ‡è®°ä¸ºæ´»è·ƒçŠ¶æ€çš„å¯¹è±¡ä¼šè¢«æ ‡è®°ä¸ºæ´»è·ƒï¼Œå¹¶è¢«æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„åˆ—è¡¨ä¸­ï¼Œè¿™ä¸ªåˆ—è¡¨ä¼šåœ¨ææ„é˜¶æ®µç”¨åˆ°ã€‚ç„¶åï¼ŒLuaè¯­è¨€éå†å¼±å¼•ç”¨è¡¨å¹¶ä»ä¸­ç§»é™¤é”®æˆ–å€¼æœªè¢«æ ‡è®°çš„å…ƒç´ ã€‚<br>æ¸…ç†é˜¶æ®µéå†æ‰€æœ‰å¯¹è±¡ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰è¢«æ ‡è®°ä¸ºæ´»è·ƒï¼ŒLuaè¯­è¨€å°±å°†å…¶å›æ”¶ï¼Œå¦åˆ™ï¼ŒLuaè¯­è¨€æ¸…ç†æ ‡è®°ï¼Œç„¶åå‡†å¤‡è¿›è¡Œä¸‹ä¸€ä¸ªæ¸…ç†å‘¨æœŸã€‚<br>æœ€åï¼Œåœ¨ææ„é˜¶æ®µï¼ŒLuaè¯­è¨€è°ƒç”¨æ¸…ç†é˜¶æ®µè¢«åˆ†ç¦»å‡ºçš„å¯¹è±¡çš„ææ„å™¨ã€‚<br>ä½¿ç”¨çœŸæ­£çš„åƒåœ¾æ”¶é›†å™¨æ„å‘³ç€Luaè¯­è¨€èƒ½å¤Ÿå¤„ç†å¯¹è±¡å¼•ç”¨ä¹‹é—´çš„ç¯ã€‚åœ¨ä½¿ç”¨ç¯å½¢æ•°æ®ç»“æ„æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦èŠ±è´¹å¤–çš„ç²¾åŠ›ï¼Œå®ƒä»¬ä¼šåƒå…¶ä»–æ•°æ®ä¸€æ ·è¢«å›æ”¶ã€‚<br>Lua5.1ä½¿ç”¨äº†å¢é‡å¼åƒåœ¾æ”¶é›†å™¨ã€‚è¿™ç§åƒåœ¾æ”¶é›†å™¨åƒè€ç‰ˆçš„åƒåœ¾æ”¶é›†å™¨ä¸€æ ·æ‰§è¡Œç›¸åŒçš„æ­¥éª¤ï¼Œä½†æ˜¯ä¸éœ€è¦åœ¨åƒåœ¾æ”¶é›†æœŸé—´åœæ­¢ä¸»ç¨‹åºçš„è¿è¡Œã€‚ç›¸åï¼Œå®ƒä¸è§£é‡Šå™¨ä¸€èµ·äº¤æ›¿è¿è¡Œã€‚æ¯å½“è§£é‡Šå™¨åˆ†é…äº†ä¸€å®šæ•°é‡çš„å†…å­˜æ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨ä¹Ÿæ‰§è¡Œä¸€å°æ­¥ï¼ˆè¿™æ„å‘³ç€ï¼Œåœ¨åƒåœ¾æ”¶é›†å™¨å·¥ä½œæœŸé—´ï¼Œè§£é‡Šå™¨å¯èƒ½ä¼šæ”¹å˜ä¸€ä¸ªå¯¹è±¡çš„å¯è¾¾æ€§ã€‚ä¸ºäº†ä¿è¯åƒåœ¾æ”¶é›†å™¨çš„æ­£ç¡®æ€§ï¼Œåƒåœ¾æ”¶é›†å™¨ä¸­çš„æœ‰äº›æ“ä½œå…·æœ‰å‘ç°å±é™©æ”¹åŠ¨å’Œçº æ­£æ‰€æ¶‰åŠå¯¹è±¡æ ‡è®°çš„å†…å­˜å±éšœï¼‰ã€‚<br>Lua5.2å¼•å…¥äº†ç´§æ€¥åƒåœ¾æ”¶é›†ã€‚å½“å†…å­˜åˆ†é…å¤±è´¥æ—¶ï¼ŒLuaè¯­è¨€ä¼šå¼ºåˆ¶è¿›è¡Œä¸€æ¬¡å®Œæ•´çš„åƒåœ¾æ”¶é›†ï¼Œç„¶åå†æ¬¡å°è¯•åˆ†é…ã€‚è¿™äº›ç´§æ€¥æƒ…å†µå¯ä»¥å‘ç”Ÿåœ¨Luaè¯­è¨€è¿›è¡Œå†…å­˜åˆ†é…çš„ä»»æ„æ—¶åˆ»ï¼ŒåŒ…æ‹¬Luaè¯­è¨€å¤„äºä¸ä¸€è‡´çš„ä»£ç æ‰§è¡ŒçŠ¶æ€æ—¶ï¼Œå› æ­¤ï¼Œè¿™äº›æ”¶é›†åŠ¨ä½œä¸èƒ½è¿è¡Œææ„å™¨ã€‚</p>
<h2 id="æ§åˆ¶åƒåœ¾æ”¶é›†çš„æ­¥é•¿"><a href="#æ§åˆ¶åƒåœ¾æ”¶é›†çš„æ­¥é•¿" class="headerlink" title="æ§åˆ¶åƒåœ¾æ”¶é›†çš„æ­¥é•¿"></a>æ§åˆ¶åƒåœ¾æ”¶é›†çš„æ­¥é•¿</h2><p>é€šè¿‡å‡½æ•°collectgarbageå¯ä»¥å¯¹åƒåœ¾æ”¶é›†å™¨è¿›è¡Œä¸€äº›é¢å¤–çš„æ§åˆ¶ï¼Œè¯¥å‡½æ•°å®é™…ä¸Šæ˜¯å‡ ä¸ªå‡½æ•°çš„é›†åˆä½“ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„å­—ç¬¦ä¸²ï¼Œç”¨æ¥è¯´æ˜è¿›è¡Œä½•ç§æ“ä½œï¼›æœ‰äº›é€‰é¡¹ä½¿ç”¨ä¸€ä¸ªæ•´å‹ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œç§°ä¸ºdataã€‚<br>ç¬¬ä¸€ä¸ªå‚æ•°çš„é€‰é¡¹åŒ…æ‹¬å¦‚ä¸‹ä¸ƒä¸ªã€‚<br>â€œstopâ€:åœæ­¢åƒåœ¾æ”¶é›†å™¨ï¼ŒçŸ¥é“ä½¿ç”¨é€‰é¡¹â€restartâ€å†æ¬¡è°ƒç”¨collectgarbageã€‚<br>â€œrestartâ€:é‡å¯åƒåœ¾æ”¶é›†å™¨ã€‚<br>â€œcollectâ€:æ‰§è¡Œä¸€æ¬¡å®Œæ•´çš„åƒåœ¾æ”¶é›†ï¼Œå›æ”¶å’Œææ„æ‰€æœ‰ä¸å¯è¾¾çš„å¯¹è±¡ã€‚è¿™æ˜¯é»˜è®¤çš„é€‰é¡¹ã€‚<br>â€œstepâ€:æ‰§è¡ŒæŸäº›åƒåœ¾æ”¶é›†å·¥ä½œï¼Œç¬¬äºŒä¸ªå‚æ•°dataæŒ‡æ˜å·¥ä½œé‡ï¼Œå³åœ¨åˆ†é…äº†dataå­—èŠ‚ååƒåœ¾æ”¶é›†å™¨åº”è¯¥åšä»€ä¹ˆã€‚<br>â€œcountâ€:ä»¥KBä¸ºå•ä½è¿”å›å½“å‰è‡ªå·±å·²ç”¨å†…å­˜æ•°ï¼Œè¯¥ç»“æœæ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œä¹˜ä»¥1024å¾—åˆ°çš„å°±æ˜¯ç²¾ç¡®çš„å­—èŠ‚æ•°ã€‚è¯¥å€¼åŒ…æ‹¬äº†å°šæœªè¢«å›æ”¶çš„æ­»å¯¹è±¡ã€‚<br>â€œsetpauseâ€:è®¾ç½®æ”¶é›†å™¨çš„stepmulå‚æ•°ã€‚å‚æ•°dataç»™å‡ºæ–°å€¼ï¼Œä¹Ÿæ˜¯ä»¥ç™¾åˆ†æ¯”ä¸ºå•ä½ã€‚<br>ä¸¤ä¸ªå‚æ•°pauseå’Œstepmulæ§åˆ¶ç€åƒåœ¾æ”¶é›†å™¨çš„è§’è‰²ã€‚ä»»ä½•åƒåœ¾æ”¶é›†å™¨éƒ½æ˜¯ä½¿ç”¨CPUæ—¶é—´æ¢å†…å­˜ç©ºé—´ã€‚åœ¨æç«¯æƒ…å†µä¸‹ï¼Œåƒåœ¾æ”¶é›†å™¨å¯èƒ½æ ¹æœ¬ä¸ä¼šè¿è¡Œã€‚ä½†æ˜¯ï¼Œä¸è€—è´¹CPUæ—¶é—´æ˜¯ä»¥å·¨å¤§çš„å†…å­˜æ¶ˆè€—ä¸ºä»£ä»·çš„ã€‚åœ¨å¦å¤–ä¸€ç§æç«¯çš„æƒ…å†µä¸‹ï¼Œæ”¶é›†å™¨å¯èƒ½æ¯è¿›è¡Œä¸€æ¬¡èµ‹å€¼å°±å¾—è¿è¡Œä¸€æ¬¡å®Œæ•´çš„åƒåœ¾æ”¶é›†ã€‚ç¨‹åºèƒ½å¤Ÿä½¿ç”¨å°½å¯èƒ½å°‘çš„å†…å­˜ï¼Œä½†æ˜¯æ˜¯ä»¥å·¨å¤§çš„CPUæ¶ˆè€—ä¸ºä»£ä»·çš„ã€‚pauseå’Œstepmulçš„é»˜è®¤å€¼æ­£å¼è¯•å›¾åœ¨è¿™ä¸¤ä¸ªæç«¯ä¹‹é—´æ‰¾åˆ°çš„å¯¹å¤§å¤šæ•°åº”ç”¨æ¥è¯´è¶³å¤Ÿå¥½çš„å¹³è¡¡ç‚¹ã€‚ä¸è¿‡ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯å€¼å¾—è¯•ç€å¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ–ã€‚<br>å‚æ•°pauseç”¨äºæ§åˆ¶åƒåœ¾æ”¶é›†å™¨åœ¨ä¸€æ¬¡æ‰‹æœºå®Œæˆåç­‰å¾…å¤šä¹…å†å¼€å§‹æ–°çš„ä¸€æ¬¡æ‰‹æœºã€‚å½“å€¼ä¸ºé›¶æ—¶ï¼Œè¡¨ç¤ºLuaè¯­è¨€åœ¨ä¸Šä¸€æ¬¡åƒåœ¾å›æ”¶ç»“æŸåç«‹å³å¼€å§‹ä¸€æ¬¡æ–°çš„æ”¶é›†ã€‚å½“å€¼ä¸º200%æ—¶è¡¨ç¤ºåœ¨é‡å¯åƒåœ¾æ”¶é›†å™¨å‰ç­‰å¾…å†…å­˜ä½¿ç”¨ç¿»ç•ªã€‚å¦‚æœæƒ³æ¶ˆè€—æ›´å¤šçš„CPUæ—¶é—´æ¢å–æ›´ä½çš„å†…å­˜æ¶ˆè€—ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠè¿™ä¸ªå€¼è®¾ç½®å¾—å°ä¸€ç‚¹ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠè¿™ä¸ªå€¼è®¾åœ¨0åˆ°200%ä¹‹é—´ã€‚<br>å‚æ•°stepmulæ§åˆ¶å¯¹äºæ¯åˆ†é…1KBå†…å­˜ï¼Œåƒåœ¾æ”¶é›†å™¨åº”è¯¥è¿›è¡Œå¤šå°‘å·¥ä½œã€‚è¿™ä¸ªå€¼è¶Šé«˜ï¼Œåƒåœ¾æ”¶é›†å™¨ä½¿ç”¨çš„å¢é‡è¶Šå°ã€‚ä¸€ä¸ªåƒ10000000%ä¸€æ ·å·¨å¤§çš„å€¼ä¼šè®©æ”¶é›†å™¨è¡¨ç°å¾—åƒä¸€ä¸ªéå¢é‡çš„åƒåœ¾æ”¶é›†å™¨ã€‚é»˜è®¤å€¼æ˜¯200%ï¼Œåœ°äº100%çš„å€¼ä¼šè®©æ”¶é›†å™¨è¿è¡Œå¾—å¾ˆæ…¢ï¼Œä»¥è‡³äºå¯èƒ½ä¸€æ¬¡æ”¶é›†ä¹Ÿå®Œä¸æˆã€‚<br>å‡½æ•°collectgarbageçš„å¦å¤–ä¸€äº›å‚æ•°ç”¨æ¥åœ¨åƒåœ¾æ”¶é›†å™¨è¿è¡Œæ—¶æ§åˆ¶å®ƒçš„è¡Œä¸ºã€‚åŒæ ·ï¼Œå¯¹äºå¤§å¤šæ•°ç¨‹åºå‘˜æ¥è¯´ï¼Œé»˜è®¤å€¼å·²ç»è¶³å¤Ÿå¥½äº†ï¼Œä½†æ˜¯å¯¹äºä¸€äº›ç‰¹æ®Šçš„åº”ç”¨ï¼Œç”¨æ‰‹å·¥æ§åˆ¶å¯èƒ½ä¼šæ›´å¥½ï¼Œæ¸¸æˆå°±ç»å¸¸éœ€è¦è¿™ç§ç±»å‹çš„æ§åˆ¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³è®©åƒåœ¾æ”¶é›†åœ¨æŸäº›é˜¶æ®µè¿è¡Œï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡è°ƒç”¨å‡½æ•°collectgarbage(â€œstopâ€)åœæ­¢åƒåœ¾æ”¶é›†å™¨ï¼Œç„¶åå†è°ƒç”¨collectgarbage(â€œrestartâ€)é‡æ–°å¯åŠ¨åƒåœ¾æ”¶é›†å™¨ã€‚åœ¨ä¸€äº›å…·æœ‰å‘¨æœŸæ€§ä¼‘çœ é˜¶æ®µçš„ä»£ç ä¸­ï¼Œå¯ä»¥è®©åƒåœ¾æ”¶é›†å™¨åœæ­¢ï¼Œç„¶ååœ¨ç¨‹åºä¼‘çœ æœŸé—´è°ƒç”¨collectgarbage(â€œstepâ€,n)ã€‚è¦è®¾ç½®åœ¨æ¯ä¸€ä¸ªä¼‘çœ æœŸé—´è¿›è¡Œå¤šå°‘å·¥ä½œï¼Œè¦ä¹ˆä¸ºnå®éªŒæ€§åœ°é€‰æ‹©ä¸€ä¸ªæ°å½“çš„å€¼ï¼Œè¦ä¹ˆæŠŠnè®¾æˆé›¶ï¼Œç„¶ååœ¨ä¸€ä¸ªå¾ªç¯ä¸­è°ƒç”¨å‡½æ•°collectgarbageç›´åˆ°ä¼‘çœ ç»“æŸã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè¿ç»­æ•™ç¨‹ä¹‹Luaåå°„</title>
    <url>/52447.html</url>
    <content><![CDATA[<p>åå°„æ˜¯ç¨‹åºç”¨æ¥æ£€æŸ¥å’Œä¿®æ”¹å…¶è‡ªèº«æŸäº›éƒ¨åˆ†çš„èƒ½åŠ›ã€‚åƒLuaè¯­è¨€è¿™æ ·çš„åŠ¨æ€è¯­è¨€æ”¯æŒå‡ ç§åå°„æœºåˆ¶ï¼šç¯å¢ƒå…è®¸è¿è¡Œæ—¶è§‚å¯Ÿå…¨å±€å˜é‡ï¼›</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>è¯¸å¦‚typeå’Œpairsè¿™æ ·çš„å‡½æ•°å…è®¸è¿è¡Œæ—¶æ£€æŸ¥å’Œéå†æœªçŸ¥æ•°æ®ç»“æ„ï¼›è¯¸å¦‚loadå’Œrequireè¿™æ ·çš„å‡½æ•°å…è®¸ç¨‹åºåœ¨è‡ªèº«ä¸­è¿½åŠ ä»£ç æˆ–æ›´æ–°ä»£ç ã€‚ä¸è¿‡ï¼Œè¿˜æœ‰å¾ˆå¤šæ–¹é¢ä»ç„¶æ˜¯ç¼ºå¤±çš„ï¼šç¨‹åºä¸èƒ½æ£€æŸ¥å±€éƒ¨å˜é‡ï¼Œå¼€å‘äººå‘˜ä¸èƒ½è·Ÿè¸ªä»£ç çš„æ‰§è¡Œï¼Œå‡½æ•°ä¹Ÿä¸çŸ¥é“æ˜¯è¢«è°è°ƒç”¨çš„ï¼Œç­‰ç­‰ã€‚è°ƒè¯•åº“å¡«è¡¥äº†ä¸Šè¿°ç¼ºé™·ã€‚<br>è°ƒè¯•åº“æ˜¯ç”±ä¸¤ç±»å‡½æ•°ç»„æˆï¼šè‡ªçœå‡½æ•°å’Œé’©å­ã€‚è‡ªçœå‡½æ•°å…è®¸æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸ªæ­£åœ¨è¿è¡Œä¸­çš„ç¨‹åºçš„å‡ ä¸ªæ–¹é¢ï¼Œä¾‹å¦‚æ´»åŠ¨å‡½æ•°çš„é¢æ ˆã€å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»£ç è¡Œã€å±€éƒ¨å˜é‡çš„åç§°å’Œå€¼ã€‚é’©å­åˆ™å…è®¸æˆ‘ä»¬è·Ÿè¸ªä¸€ä¸ªç¨‹åºçš„æ‰§è¡Œã€‚<br>è™½ç„¶åå­—é‡Œå¸¦æœ‰â€è°ƒè¯•â€œçš„å­—çœ¼ï¼Œä½†è°ƒè¯•åº“æä¾›çš„å¹¶ä¸æ˜¯Luaè¯­è¨€çš„è°ƒè¯•å™¨ã€‚ä¸è¿‡ï¼Œè°ƒè¯•åº“æä¾›äº†ç¼–å†™æˆ‘ä»¬è‡ªå·±çš„è°ƒè¯•å™¨æ‰€éœ€è¦çš„ä¸åŒå±‚æ¬¡çš„æ‰€æœ‰åº•å±‚æœºåˆ¶ã€‚<br>è°ƒè¯•åº“ä¸å…¶ä»–åº“ä¸åŒï¼Œå¿…é¡»è¢«æ…é‡åœ°ä½¿ç”¨ã€‚é¦–å…ˆï¼Œè°ƒè¯•åº“ä¸­çš„æŸäº›åŠŸèƒ½çš„æ€§èƒ½ä¸é«˜ã€‚å…¶æ¬¡ï¼Œè°ƒè¯•åº“ä¼šæ‰“ç ´è¯­è¨€çš„ä¸€äº›å›ºæœ‰è§„åˆ™ï¼Œä¾‹å¦‚ä¸èƒ½ä»ä¸€ä¸ªå±€éƒ¨å˜é‡çš„è¯æ³•å®šç•ŒèŒƒå›´å¤–è®¿é—®è¿™ä¸ªå±€éƒ¨å˜é‡ã€‚è™½ç„¶è°ƒè¯•åº“ä½œä¸ºæ ‡å‡†åº“ç›´æ¥å¯ç”¨ï¼Œä½†ç¬”è€…å»ºè®®åœ¨ä½¿ç”¨è°ƒè¯•åº“çš„ä»£ç æ®µä¸­æ˜¾ç¤ºåœ°åŠ è½½è°ƒè¯•åº“ã€‚</p>
<h2 id="è‡ªçœæœºåˆ¶"><a href="#è‡ªçœæœºåˆ¶" class="headerlink" title="è‡ªçœæœºåˆ¶"></a>è‡ªçœæœºåˆ¶</h2><p>è°ƒè¯•åº“ä¸­ä¸»è¦çš„è‡ªçœå‡½æ•°æ˜¯getinfoï¼Œè¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–ä¸€ä¸ªæ ˆå±‚æ¬¡ã€‚å½“ä¸ºæŸä¸ªå‡½æ•°fooè°ƒç”¨debug.getinfo(foo)æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªåŒ…å«ä¸è¯¥å‡½æ•°æœ‰å…³çš„ä¸€äº›æ•°æ®çš„è¡¨ã€‚è¿™ä¸ªè¡¨å¯èƒ½å…·æœ‰ä»¥ä¸‹å­—æ®µï¼š<br>  <strong>source:</strong>  è¯¥å­—æ®µç”¨äºè¯´æ˜å‡½æ•°å®šä¹‰çš„ä½ç½®ã€‚å¦‚æœå‡½æ•°å®šä¹‰åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼ˆé€šè¿‡è°ƒç”¨loadï¼‰ï¼Œé‚£ä¹ˆsourceå°±æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²ï¼›å¦‚æœå‡½æ•°å®šä¹‰åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆsourceå°±æ˜¯ä½¿ç”¨@ä½œä¸ºå‰ç¼€çš„æ–‡ä»¶åã€‚<br> <strong>short_src:</strong> è¯¥å­—æ®µæ˜¯sourceçš„ç²¾ç®€ç‰ˆæœ¬ï¼Œå¯¹äºé”™è¯¯ä¿¡æ¯ååˆ†æœ‰ç”¨ã€‚<br> <strong>linedefined:</strong> è¯¥å­—æ®µæ˜¯è¯¥å‡½æ•°å®šä¹‰åœ¨æºä»£ç ä¸­ç¬¬ä¸€è¡Œçš„è¡Œå·ã€‚<br>  <strong>lastlinedefined:</strong> è¯¥å­—æ®µæ˜¯è¯¥å‡½æ•°å®šä¹‰åœ¨æºä»£ç ä¸­æœ€åä¸€è¡Œçš„è¡Œå·ã€‚<br> <strong>what:</strong> è¯¥å­—æ®µç”¨äºè¯´æ˜å‡½æ•°çš„ç±»å‹ã€‚å¦‚æœfooæ˜¯ä¸€ä¸ªæ™®é€šçš„Luaå‡½æ•°ï¼Œåˆ™ä¸ºâ€œLuaâ€ï¼›å¦‚æœæ˜¯ä¸€ä¸ªCå‡½æ•°ï¼Œåˆ™ä¸ºâ€œCâ€;å¦‚æœæ˜¯ä¸€ä¸ªLuaè¯­è¨€ä»£ç æ®µçš„ä¸»è¦éƒ¨åˆ†ï¼Œåˆ™ä¸ºâ€œmainâ€ã€‚<br> <strong>name:</strong> è¯¥å­—æ®µæ˜¯è¯¥å‡½æ•°çš„ä¸€ä¸ªé€‚å½“çš„åç§°ï¼Œä¾‹å¦‚ä¿å­˜è¯¥å‡½æ•°çš„å…¨å±€å˜é‡çš„åç§°ã€‚<br> <strong>namewhat:</strong> è¯¥å­—æ®µç”¨äºè¯´æ˜ä¸Šä¸€ä¸ªå­å¼¹çš„å«ä¹‰ï¼Œå¯èƒ½æ˜¯â€globalâ€ã€â€localâ€ã€â€methodâ€ã€â€filedâ€æˆ–â€â€(ç©ºå­—ç¬¦ä¸²)ã€‚ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºLuaåŸå› æ‰¾ä¸åˆ°è¯¥å‡½æ•°çš„åç§°ã€‚<br> <strong>nups:</strong> è¯¥å­—æ®µæ˜¯è¯¥å‡½æ•°çš„ä¸Šå€¼çš„ä¸ªæ•°ã€‚<br> <strong>nparams:</strong> è¯¥å­—æ®µæ˜¯è¯¥å‡½æ•°çš„å‚æ•°ä¸ªæ•°ã€‚<br> <strong>isvararg:</strong> è¯¥å­—æ®µè¡¨æ˜è¯¥å‡½æ•°æ˜¯å¦ä¸ºå¯å˜é•¿å‚æ•°å‡½æ•°ã€‚<br> <strong>activelines:</strong> è¯¥å­—æ®µæ˜¯ä¸€ä¸ªåŒ…å«è¯¥å‡½æ•°æ‰€æœ‰æ´»è·ƒè¡Œçš„é›†åˆã€‚æ´»è·ƒè¡Œæ—¶æŒ‡é™¤ç©ºè¡Œå’ŒåªåŒ…å«æ³¨é‡Šçš„å¤–è¡Œçš„å…¶ä»–è¡Œã€‚<br> <strong>func:</strong> è¯¥å­—æ®µæ˜¯è¯¥å‡½æ•°æœ¬èº«ã€‚<br> å½“fooæ˜¯ä¸€ä¸ªCå‡½æ•°æ—¶ï¼ŒLuaè¯­è¨€æ²¡æœ‰å¤šå°‘å…³äºè¯¥å‡½æ•°çš„ä¿¡æ¯ã€‚å¯¹äºè¿™ç§å‡½æ•°ï¼Œåªæœ‰å­—æ®µwhatã€nameã€namewhatã€nupså’Œfuncæ˜¯æœ‰æ„ä¹‰çš„ã€‚<br>å½“ä½¿ç”¨ç»™ä¸€ä¸ªæ•°å­—nä½œä¸ºå‚æ•°è°ƒç”¨å‡½æ•°debug.getinfo(n)æ—¶ï¼Œå¯ä»¥å¾—åˆ°æœ‰å…³ç›¸åº”æ ˆå±‚æ¬¡ä¸Šæ´»è·ƒå‡½æ•°çš„æ•°æ®ã€‚æ ˆå±‚æ¬¡æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä»£è¡¨æŸä¸ªæ—¶åˆ»ä¸Šæ´»è·ƒçš„ç‰¹å®šå‡½æ•°ã€‚è°ƒç”¨getinfoçš„å‡½æ•°Açš„å±‚æ¬¡æ˜¯1ï¼Œè€Œè°ƒç”¨Açš„å‡½æ•°çš„å±‚æ¬¡æ˜¯2ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœnå¤§äºæ ˆä¸­æ´»è·ƒå‡½æ•°çš„æ•°é‡ï¼Œé‚£ä¹ˆå‡½æ•°debug.getinfoè¿”å›nilã€‚å½“é€šè¿‡å¸¦æœ‰æ ˆå±‚æ¬¡çš„debug.getinfoæŸ¥è¯¢ä¸€ä¸ªæ´»è·ƒå‡½æ•°æ—¶ï¼Œè¿”å›çš„è¡¨ä¸­æµ·æ²¹ä¸¤ä¸ªé¢å¤–å­—æ®µï¼šcurrentlineï¼Œè¡¨ç¤ºå½“å‰è¯¥å‡½æ•°æ­£åœ¨æ‰§è¡Œçš„ä»£ç æ‰€åœ¨çš„è¡Œï¼›istailcallï¼Œå¦‚æœä¸ºçœŸåˆ™è¡¨ç¤ºå‡½æ•°æ˜¯è¢«å°¾è°ƒç”¨æ‰€è°ƒèµ·ã€‚<br>å­—æ®µnameæœ‰äº›ç‰¹æ®Šã€‚è¯·æ³¨æ„ï¼Œç”±äºå‡½æ•°åœ¨Luaè¯­è¨€ä¸­æ˜¯ç¬¬ä¸€ç±»å€¼ï¼Œå› æ­¤å‡½æ•°æ—¢å¯ä»¥æ²¡æœ‰åç§°ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªåç§°ã€‚Luaè¯­è¨€ä¼šé€šè¿‡æ£€æŸ¥è°ƒç”¨è¯¥å‡½æ•°çš„ä»£ç æ¥çœ‹å‡½æ•°æ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„ï¼Œè¿›è€Œå°è¯•æ‰¾åˆ°è¯¥å‡½æ•°çš„åç§°ã€‚è¿™ç§æ–¹æ³•åªæœ‰åœ¨ä»¥ä¸€ä¸ªæ•°å­—ä¸ºå‚æ•°è°ƒç”¨getinfoæ—¶æ‰ä¼šèµ·ä½œç”¨ï¼Œå³æˆ‘ä»¬åªèƒ½è·å–å…³äºæŸä¸€å…·ä½“è°ƒç”¨çš„ä¿¡æ¯ã€‚<br>å‡½æ•°getinfoçš„æ•ˆç‡ä¸é«˜ã€‚Luaè¯­è¨€ä»¥ä¸€ç§ä¸å½±å“ç¨‹åºæ‰§è¡Œçš„å½¢å¼æ¥ä¿å­˜è°ƒè¯•ä¿¡æ¯ï¼Œè‡³äºè·å–è¿™äº›è°ƒè¯•ä¿¡æ¯çš„æ•ˆç‡åˆ™æ˜¯æ¬¡è¦çš„ã€‚ä¸ºäº†å®ç°æ›´å¥½çš„æ€§èƒ½ï¼Œå‡½æ•°getinfoæœ‰ä¸€ä¸ªå¯é€‰çš„ç¬¬äºŒå‚æ•°ï¼Œè¯¥å‚æ•°ç”¨äºæŒ‡å®šå¸Œæœ›è·å–å“ªäº›ä¿¡æ¯ã€‚é€šè¿‡è¿™ä¸ªå‚æ•°ï¼Œå‡½æ•°getinfoå°±ä¸ä¼šæµªè´¹æ—¶é—´å»æ”¶é›†ç”¨æˆ·ä¸éœ€è¦çš„æ•°æ®ã€‚è¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ä¸­æ¯ä¸ªå­—æ¯ä»£è¡¨é€‰æ‹©ä¸€ç»„å­—æ®µï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<hr>
<p>n é€‰æ‹©nameå’Œnamewhat<br>f é€‰æ‹©func<br>S é€‰æ‹©sourceã€short_srcã€whatã€linedefinedå’Œlastlinedefined<br>l é€‰æ‹©currentline<br>L é€‰æ‹©activelines<br>u é€‰æ‹©nupã€nparamså’Œisvararg</p>
<hr>
<p>ä¸‹é¢è¿™ä¸ªå‡½æ•°æ¼”ç¤ºäº†å‡½æ•°debug.getinfoçš„ç”¨æ³•ï¼Œå®ƒæ‰“å°å‡ºäº†æ´»è·ƒæ ˆçš„æ ˆå›æº¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">funciton <span class="built_in">traceback</span>()</span><br><span class="line">	<span class="keyword">for</span> level = <span class="number">1</span>, <span class="built_in">math</span>.<span class="built_in">huge</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> info = <span class="built_in">debug</span>.<span class="built_in">getinfo</span>(level,<span class="string">&quot;Sl&quot;</span>)</span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> info <span class="keyword">then</span> back <span class="keyword">end</span></span><br><span class="line">		<span class="keyword">if</span> info.what == <span class="string">&quot;C&quot;</span> <span class="keyword">then</span></span><br><span class="line">			<span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%d\tC function&quot;</span>,level))</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%d\t[%s]:%d&quot;</span>,level,</span><br><span class="line">				info.short_src, info.currentline))</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¦æ”¹è¿›è¿™ä¸ªå‡½æ•°å¹¶ä¸éš¾ï¼Œåªéœ€è¦è®©å‡½æ•°getinfoè¿”å›æ›´å¤šæ•°æ®å³å¯ã€‚å®äº‹ä¸Šï¼Œè°ƒè¯•åº“ä¹Ÿæä¾›äº†è¿™æ ·ä¸€ä¸ªæ”¹è¿›ç‰ˆæœ¬ï¼Œå³å‡½æ•°tracebackã€‚ä¸æˆ‘ä»¬çš„ç‰ˆæœ¬ä¸åŒçš„æ˜¯ï¼Œå‡½æ•°debug.tracebackä¸ä¼šæ‰“å°ç»“æœï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªåŒ…å«æ ˆå›æº¯çš„å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">print</span>(<span class="built_in">debug</span>.<span class="built_in">traceback</span>())</span><br><span class="line">stack <span class="built_in">traceback</span>:</span><br><span class="line">	<span class="built_in">stdin</span>:<span class="number">1</span>:<span class="keyword">in</span> main chunk</span><br><span class="line">	[C]:<span class="keyword">in</span> ?</span><br></pre></td></tr></table></figure>
<h3 id="è®¿é—®å±€éƒ¨å˜é‡"><a href="#è®¿é—®å±€éƒ¨å˜é‡" class="headerlink" title="è®¿é—®å±€éƒ¨å˜é‡"></a>è®¿é—®å±€éƒ¨å˜é‡</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°debug.getlocalæ¥æ£€æŸ¥ä»»æ„æ´»è·ƒå‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯è¦æŸ¥è¯¢å‡½æ•°çš„æ ˆå±‚æ¬¡ï¼Œå¦ä¸€ä¸ªæ˜¯å˜é‡çš„ç´¢å¼•ã€‚è¯¥å‡½æ•°è¿”å›ä¸¤ä¸ªå€¼ï¼Œå˜é‡åå’Œå˜é‡çš„å½“å‰å€¼ã€‚å¦‚æœå˜é‡ç´¢å¼•å¤§äºæ´»è·ƒå˜é‡çš„æ•°é‡ï¼Œé‚£ä¹ˆå‡½æ•°getlocalè¿”å›nilã€‚å¦‚æœæ ˆå±‚æ¬¡æ— æ•ˆï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br>Luaè¯­è¨€æŒ‰å±€éƒ¨å˜é‡åœ¨å‡½æ•°ä¸­çš„å‡ºç°é¡ºåºå¯¹å®ƒä»¬è¿›è¡Œç¼–å·ï¼Œä½†ç¼–å·åªé™äºåœ¨å‡½æ•°å½“å‰ä½œç”¨åŸŸä¸­æ´»è·ƒçš„å˜é‡ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(a,b)</span></span></span><br><span class="line">	<span class="keyword">local</span> x </span><br><span class="line">	<span class="keyword">do</span> <span class="keyword">local</span> c = a - b <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">local</span> a = <span class="number">1</span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> name ,value = <span class="built_in">debug</span>.<span class="built_in">getlocal</span>(<span class="number">1</span>,a)</span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> name <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">		<span class="built_in">print</span>(name , value)</span><br><span class="line">		a = a + <span class="number">1</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨foo(10,20)ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a	<span class="number">10</span></span><br><span class="line">b 	<span class="number">20</span></span><br><span class="line">x 	<span class="literal">nil</span></span><br><span class="line">a 	<span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>ç´¢å¼•ä¸º1çš„å˜é‡aï¼Œç´¢å¼•ä¸º2çš„å˜é‡bï¼Œç´¢å¼•ä¸º3çš„å˜é‡æ˜¯xï¼Œç´¢å¼•ä¸º4çš„å˜é‡æ—¶å†…å±‚çš„aã€‚åœ¨getlocalè¢«è°ƒç”¨çš„æ—¶å€™ï¼Œcå·²ç»å®Œæˆäº†ä½œç”¨åŸŸï¼Œè€Œnameå’Œvalueè¿˜æœªå‡ºç°äºä½œç”¨åŸŸã€‚<br>ä»Lua5.2å¼€å§‹ï¼Œå€¼ä¸ºè´Ÿçš„ç´¢å¼•è·å–å¯å˜é•¿å‚æ•°å‡½æ•°çš„é¢å¤–å‚æ•°ï¼Œç´¢å¼•-1æŒ‡å‘ç¬¬ä¸€ä¸ªé¢å¤–å‚æ•°ã€‚æ­¤æ—¶ï¼Œå˜é‡çš„åç§°æ°¸è¿œæ˜¯â€(*vararg)â€ã€‚<br>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å‡½æ•°debug.setlocalæ”¹å˜å±€éƒ¨å˜é‡çš„å€¼ï¼Œè¯¥å‡½æ•°çš„å‰ä¸¤ä¸ªå‚æ•°ä¸getlocalç›¸åŒï¼Œåˆ†åˆ«æ˜¯æ ˆå±‚æ¬¡å’Œå˜é‡ç´¢å¼•ï¼Œè€Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¯¥å±€éƒ¨å˜é‡çš„æ–°å€¼ã€‚è¯¥å‡½æ•°çš„è¿”å›å€¼æ˜¯å˜é‡åï¼Œå¦‚æœå˜é‡ç´¢å¼•è¶…å‡ºäº†èŒƒå›´åˆ™è¿”å›nilã€‚</p>
<h3 id="è®¿é—®éå±€éƒ¨å˜é‡"><a href="#è®¿é—®éå±€éƒ¨å˜é‡" class="headerlink" title="è®¿é—®éå±€éƒ¨å˜é‡"></a>è®¿é—®éå±€éƒ¨å˜é‡</h3><p>æµ‹è¯•åº“è¿˜æä¾›äº†å‡½æ•°getupvalueï¼Œè¯¥å‡½æ•°å…è®¸æˆ‘ä»¬è®¿é—®ä¸€ä¸ªè¢«Luaå‡½æ•°æ‰€ä½¿ç”¨çš„éå±€éƒ¨å˜é‡ã€‚ä¸å±€éƒ¨å˜é‡ä¸åŒï¼Œè¢«ä¸€ä¸ªå‡½æ•°æ‰€å¼•ç”¨çš„éå±€éƒ¨å˜é‡å³ä½¿åœ¨å¼•ç”¨å®ƒçš„å‡½æ•°å·²ç»ä¸æ´»è·ƒçš„æƒ…å†µä¸‹ä¹Ÿä¼šä¸€ç›´å­˜åœ¨ã€‚å› æ­¤ï¼Œå‡½æ•°getupvalueçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯æ ˆå±‚æ¬¡ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å‡½æ•°getupvalueçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å˜é‡ç´¢å¼•ï¼ŒLuaè¯­è¨€æŒ‰ç…§å‡½æ•°å¼•ç”¨éå±€éƒ¨å˜é‡çš„é¡ºåºå¯¹å®ƒä»¬ç¼–å·ï¼Œä½†ç”±äºä¸€ä¸ªå‡½æ•°ä¸èƒ½ç”¨åŒä¸€ä¸ªåç§°è®¿é—®ä¸¤ä¸ªéå±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥è¿™ä¸ªé¡ºåºæ˜¯æ— å…³ç´§è¦çš„ã€‚<br>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å‡½æ•°debug.setupvalueæ›´æ–°éå±€éƒ¨å˜é‡çš„å€¼ã€‚å°±åƒè¯»è€…å¯èƒ½é¢„æƒ³çš„ä¸€æ ·ï¼Œè¯¥å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼šä¸€ä¸ªé—­åŒ…ã€ä¸€ä¸ªå˜é‡ç´¢å¼•å’Œä¸€ä¸ªæ–°å€¼ã€‚ä¸å‡½æ•°setlocalä¸€æ ·ï¼Œè¯¥å‡½æ•°è¿”å›å˜é‡åï¼Œå¦‚æœç´¢å¼•è¶…å‡ºèŒƒå›´åˆ™è¿”å›nilã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ è·å–å˜é‡çš„å€¼</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getvarvalue</span><span class="params">(name,level,isenv)</span></span></span><br><span class="line">	<span class="keyword">local</span> value</span><br><span class="line">	<span class="keyword">local</span> found = <span class="literal">false</span></span><br><span class="line">	level = (level <span class="keyword">or</span> <span class="number">1</span>) + <span class="number">1</span></span><br><span class="line">	<span class="comment">--å°è¯•å±€éƒ¨å˜é‡</span></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span> , <span class="built_in">math</span>.<span class="built_in">huge</span> <span class="keyword">do</span></span><br><span class="line">		lcoal n, v = <span class="built_in">debug</span>,<span class="built_in">getlocal</span> (level,i)</span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> n <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">		<span class="keyword">if</span> n == name <span class="keyword">then</span></span><br><span class="line">			value = v</span><br><span class="line">			found = <span class="literal">true</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">if</span> found <span class="keyword">then</span> <span class="keyword">return</span> <span class="string">&quot;local&quot;</span>, value <span class="keyword">end</span></span><br><span class="line">	<span class="comment">--å°è¯•éå±€éƒ¨å˜é‡</span></span><br><span class="line">	<span class="keyword">local</span> fun = <span class="built_in">debug</span>.<span class="built_in">getinfo</span>(level,<span class="string">&quot;f&quot;</span>).func</span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, <span class="built_in">math</span>.<span class="built_in">huge</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> n,v = <span class="built_in">debug</span>.<span class="built_in">getupvalue</span>(func,i)</span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> n <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">		<span class="keyword">if</span> n == name <span class="keyword">then</span> <span class="keyword">return</span> <span class="string">&quot;upvalue&quot;</span>, v <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">if</span> isenv <span class="keyword">then</span> <span class="keyword">return</span> <span class="string">&quot;noenv&quot;</span> <span class="keyword">end</span>	<span class="comment">--é¿å…å¾ªç¯</span></span><br><span class="line">	<span class="comment">--æ²¡æ‰¾åˆ°ï¼›ä»ç¯å¢ƒä¸­è·å–å€¼</span></span><br><span class="line">	<span class="keyword">local</span> _, env = getvarvalue(<span class="string">&quot;_ENV&quot;</span>,level,<span class="literal">true</span>)</span><br><span class="line">	<span class="keyword">if</span> env <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;global&quot;</span> , env[name]</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;noenv&quot;</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="keyword">local</span> a = <span class="number">4</span>; <span class="built_in">print</span>(getvarvalue(<span class="string">&quot;a&quot;</span>))		<span class="comment">-- local 4</span></span><br><span class="line">&gt; a = <span class="string">&quot;xx&quot;</span>;<span class="built_in">print</span>(getvarvalue(<span class="string">&quot;a&quot;</span>))			<span class="comment">-- global xx</span></span><br></pre></td></tr></table></figure>
<p>å‚æ•°levelæŒ‡æ˜åœ¨é‚£ä¸ªæ ˆå±‚æ¬¡ä¸­å¯»æ‰¾å‡½æ•°ï¼Œ1æ„å‘³ç€ç›´æ¥çš„è°ƒç”¨è€…ã€‚ä»£ç ä¸­å¤šåŠ 1å°†å±‚æ¬¡çº æ­£ä¸ºåŒ…æ‹¬getvarvalueè‡ªå·±ã€‚<br>è¯¥å‡½æ•°é¦–å…ˆæŸ¥æ‰¾å±€éƒ¨å˜é‡ã€‚å¦‚æœæœ‰å¤šä¸ªå±€éƒ¨å˜é‡çš„åç§°ä¸ç»™å®šçš„åç§°ç›¸åŒï¼Œåˆ™è·å–å…·æœ‰æœ€å¤§ç´¢å¼•çš„é‚£ä¸ªå±€éƒ¨å˜é‡ã€‚å› æ­¤ï¼Œå‡½æ•°å¿…é¡»æ‰§è¡Œå®Œæ•´ä¸ªå¾ªç¯ã€‚å¦‚æœæ‰¾ä¸åˆ°æŒ‡å®šåç§°çš„å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆå°±æŸ¥æ‰¾éå±€éƒ¨å˜é‡ã€‚ä¸ºäº†éå†éå±€éƒ¨å˜é‡ï¼Œè¯¥å‡½æ•°ä½¿ç”¨debug.getinfoå‡½æ•°è·å–è°ƒç”¨é—­åŒ…ï¼Œç„¶åéå†éå±€éƒ¨å˜é‡ã€‚æœ€åï¼Œå¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°æŒ‡å®šåå­—çš„éå±€éƒ¨å˜é‡ï¼Œå°±æ£€ç´¢å…¨å±€å˜é‡ï¼šè¯¥å‡½æ•°é€’å½’åœ°è°ƒç”¨è‡ªå·±æ¥è®¿é—®åˆé€‚çš„_ENVå˜é‡å¹¶åœ¨ç›¸åº”ç¯å¢ƒä¸­æŸ¥æ‰¾æŒ‡å®šçš„åå­—ã€‚<br>å‚æ•°isenvé¿å…äº†ä¸€ä¸ªè¯¡å¼‚çš„é—®é¢˜ã€‚è¯¥å‚æ•°ç”¨äºè¯´æ˜æˆ‘ä»¬æ˜¯å¦å¤„äºä¸€ä¸ªä»_ENVå˜é‡ä¸­æŸ¥è¯¢å…¨å±€åç§°çš„é€’å½’è°ƒç”¨ä¸­ã€‚ä¸€ä¸ªä¸ä½¿ç”¨å…¨å±€å˜é‡çš„å‡½æ•°å¯èƒ½æ²¡æœ‰ä¸Šå€¼_ENVã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¯•å›¾æŠŠ_ENVå½“åšå…¨å±€å˜é‡æ¥æŸ¥è¯¢ï¼Œé‚£ä¹ˆç”±äºæˆ‘ä»¬éœ€è¦_ENVæ¥å¾—åˆ°å…¶è‡ªèº«çš„å€¼ï¼Œæ‰€ä»¥å¯èƒ½ä¼šé™·å…¥æ— é™é€’å½’å¾ªç¯ã€‚å› æ­¤ï¼Œå½“isenvä¸ºçœŸä¸”å‡½æ•°getvarvalueæ‰¾ä¸åˆ°å±€éƒ¨å˜é‡æˆ–ä¸Šå€¼æ—¶ï¼Œgetvarvalueå°±ä¸åº”è¯¥å†å°è¯•å…¨å±€å˜é‡ã€‚</p>
<h3 id="è®¿é—®å…¶ä»–åç¨‹"><a href="#è®¿é—®å…¶ä»–åç¨‹" class="headerlink" title="è®¿é—®å…¶ä»–åç¨‹"></a>è®¿é—®å…¶ä»–åç¨‹</h3><p>è°ƒè¯•åº“ä¸­çš„æ‰€æœ‰è‡ªçœå‡½æ•°éƒ½èƒ½å¤Ÿæ¥å—ä¸€ä¸ªå¯é€‰çš„åç¨‹ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¿™æ ·å°±å¯ä»¥ä»å¤–éƒ¨æ¥æ£€æŸ¥è¿™ä¸ªåç¨‹ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä½¿ç”¨å¦‚ä¸‹çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">local</span> x = <span class="number">10</span></span><br><span class="line">	<span class="built_in">coroutine</span>.<span class="built_in">yield</span>()</span><br><span class="line">	<span class="built_in">error</span>(<span class="string">&quot;some error&quot;</span>)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">debug</span>.<span class="built_in">traceback</span>(co))</span><br></pre></td></tr></table></figure>
<p>å¯¹å‡½æ•°tracebackçš„è°ƒç”¨ä½œç”¨åœ¨åç¨‹coä¸Šï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">stack traceback:</span><br><span class="line">	[C]:in function &#x27;yield&#x27;</span><br><span class="line">	temp:3:in function &lt;temp:1&gt;</span><br></pre></td></tr></table></figure>
<p>ç”±äºåç¨‹å’Œä¸»ç¨‹åºè¿è¡Œåœ¨ä¸åŒçš„æ ˆä¸Šï¼Œæ‰€ä»¥å›æº¯æ²¡æœ‰è·Ÿè¸ªåˆ°å¯¹å‡½æ•°resumeçš„è°ƒç”¨ã€‚<br>å½“åç¨‹å¼•å‘é”™è¯¯æ—¶å¹¶ä¸ä¼šè¿›è¡Œæ ˆå±•å¼€ï¼Œè¿™å°±æ„å‘³ç€å¯ä»¥åœ¨é”™è¯¯å‘ç”Ÿåæ£€æŸ¥é”™è¯¯ã€‚ç»§ç»­ä¸Šé¢çš„ç¤ºä¾‹ï¼Œå¦‚æœå†æ¬¡å”¤é†’åç¨‹ï¼Œå®ƒä¼šæç¤ºå¼•èµ·äº†ä¸€ä¸ªé”™è¯¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co))		<span class="comment">-- false temp:4:some error</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œå¦‚æœè¾“å‡ºæ ˆå›æº¯ï¼Œä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">stack <span class="built_in">traceback</span>:</span><br><span class="line">	[C]:<span class="keyword">in</span> <span class="function"><span class="keyword">function</span> &#x27;<span class="title">error</span>&#x27;</span></span><br><span class="line"><span class="function">	<span class="title">temp</span>:4:<span class="title">in</span> <span class="title">function</span> &lt;<span class="title">temp</span>:1&gt;</span></span><br></pre></td></tr></table></figure>
<p>å³ä½¿åœ¨é”™è¯¯å‘ç”Ÿåï¼Œä¹Ÿå¯ä»¥æ£€æŸ¥åç¨‹ä¸­çš„å±€éƒ¨å˜é‡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">debug</span>.<span class="built_in">getlocal</span>(co,<span class="number">1</span>,<span class="number">1</span>))		<span class="comment">-- x 10</span></span><br></pre></td></tr></table></figure>

<h2 id="é’©å­"><a href="#é’©å­" class="headerlink" title="é’©å­"></a>é’©å­</h2><p>è°ƒè¯•åº“ä¸­çš„é’©å­æœºåˆ¶å…è®¸ç”¨æˆ·æ³¨å†Œä¸€ä¸ªé’©å­å‡½æ•°ï¼Œè¿™ä¸ªé’©å­å‡½æ•°ä¼šåœ¨ç¨‹åºè¿è¡Œä¸­æŸä¸ªç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶è¢«è°ƒç”¨ã€‚æœ‰å››ç§æ—¶é—´èƒ½å¤Ÿè§¦å‘ä¸€ä¸ªé’©å­ï¼š</p>
<ul>
<li>æ¯å½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶äº§ç”Ÿçš„calläº‹ä»¶ï¼›</li>
<li>æ¯å½“å‡½æ•°è¿”å›æ—¶äº§ç”Ÿçš„returnäº‹ä»¶ï¼›</li>
<li>æ¯å½“å¼€å§‹æ‰§è¡Œä¸€è¡Œæ–°ä»£ç æ—¶äº§ç”Ÿçš„lineäº‹ä»¶ï¼›</li>
<li>æ‰§è¡Œå®Œåˆ¶å®šæ•°é‡çš„æŒ‡ä»¤åäº§ç”Ÿçš„countäº‹ä»¶ã€‚<br>Luaè¯­è¨€ç”¨ç»™ä¸€ä¸ªæè¿°å¯¼è‡´é’©å­å‡½æ•°è¢«è°ƒç”¨çš„äº‹ä»¶çš„å­—ç¬¦ä¸²ä¸ºå‚æ•°æ¥è°ƒç”¨é’©å­å‡½æ•°ï¼ŒåŒ…æ‹¬â€callâ€ã€â€returnâ€ã€â€lineâ€æˆ–â€countâ€ã€‚å¯¹äºlineäº‹ä»¶æ¥è¯´ï¼Œè¿˜æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œå³æ–°è¡Œå·ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é’©å­å‡½æ•°å†…éƒ¨è°ƒç”¨å‡½æ•°debug.getinfoæ¥è·å–æ›´å¤šçš„ä¿¡æ¯ã€‚<br>è¦æ³¨å†Œä¸€ä¸ªé’©å­ï¼Œéœ€è¦ç”¨ä¸¤ä¸ªæˆ–ä¸‰ä¸ªå‚æ•°æ¥è°ƒç”¨å‡½æ•°debug.sethook:ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é’©å­å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æè¿°è¦ç›‘æ§äº‹ä»¶çš„æ©ç å­—ç¬¦ä¸²ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç”¨äºæè¿°ä»¥ä½•ç§é¢‘åº¦è·å–countäº‹ä»¶çš„å¯é€‰æ•°å­—ã€‚å¦‚æœè¦ç›‘æ§callã€returnå’Œlineäº‹ä»¶ï¼Œé‚£ä¹ˆéœ€è¦æŠŠè¿™å‡ ä¸ªäº‹ä»¶çš„é¦–å­—æ¯æ”¾å…¥æ©ç å­—ç¬¦ä¸²ã€‚å¦‚æœè¦ç›‘æ§countäº‹ä»¶ï¼Œåˆ™åªéœ€è¦åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­æŒ‡å®šä¸€ä¸ªè®¡æ•°å™¨ã€‚å¦‚æœè¦å…³é—­é’©å­ï¼Œåªéœ€ä¸å¸¦ä»»ä½•å‚æ•°ç¬¬è°ƒç”¨å‡½æ•°sethookå³å¯ã€‚<br>ä½œä¸ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œä»¥ä¸‹ä»£ç å®‰è£…äº†ä¸€ä¸ªç®€å•çš„è·Ÿè¸ªå™¨ï¼Œå®ƒä¼šè¾“å‡ºè§£é‡Šå™¨æ‰§è¡Œçš„æ¯ä¸€è¡Œä»£ç ï¼š<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">debug</span>.<span class="built_in">sethook</span>(<span class="built_in">print</span>,<span class="string">&quot;l&quot;</span>)</span><br></pre></td></tr></table></figure>
è¿™å¥è°ƒç”¨åªæ˜¯ç®€å•åœ°æŠŠå‡½æ•°printå®‰è£…ä¸ºä¸€ä¸ªé’©å­å‡½æ•°ï¼Œå¹¶å‘Šè¯‰Luaè¯­è¨€åœ¨lineäº‹ä»¶å‘ç”Ÿæ—¶è°ƒç”¨å®ƒã€‚ä¸€ä¸ªæ›´ç²¾å·§çš„è·Ÿè¸ªå™¨å¯ä»¥ä½¿ç”¨å‡½æ•°getinfoè·å–å½“å‰æ–‡ä»¶åå¹¶æ·»åŠ åˆ°è¾“å‡ºä¸­ï¼š<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trace</span><span class="params">(event,line)</span></span></span><br><span class="line">	<span class="keyword">local</span> s = <span class="built_in">debug</span>.<span class="built_in">getinfo</span>(<span class="number">2</span>).short_src</span><br><span class="line">	<span class="built_in">print</span>(s .. <span class="string">&quot;:&quot;</span> .. line)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">debug</span>.<span class="built_in">sethook</span>(trace,<span class="string">&quot;l&quot;</span>)</span><br></pre></td></tr></table></figure>
ä¸é’©å­ä¸€èµ·è¢«ä½¿ç”¨çš„ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å‡½æ•°debug.debugã€‚è¿™ä¸ªç®€å•çš„å‡½æ•°å¯ä»¥æä¾›ä¸€ä¸ªèƒ½å¤Ÿæ‰§è¡Œä»»æ„Luaè¯­è¨€å‘½ä»¤çš„æç¤ºç¬¦ï¼Œå…¶ç­‰ä»·äºå¦‚ä¸‹çš„ä»£ç ï¼š<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debug1</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;debug&gt; &quot;</span>)</span><br><span class="line">		<span class="keyword">local</span> line = <span class="built_in">io</span>.<span class="built_in">read</span>()</span><br><span class="line">		<span class="keyword">if</span> line == <span class="string">&quot;cont&quot;</span> <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">		<span class="built_in">assert</span>(<span class="built_in">load</span>(line))()</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
å½“ç”¨æˆ·è¾“å…¥â€å‘½ä»¤â€œcontæ—¶ï¼Œå‡½æ•°è¿”å›ã€‚è¿™ç§æ ‡å‡†çš„å®ç°ååˆ†ç®€å•ï¼Œå¹¶ä¸”åœ¨å…¨å±€ç¯å¢ƒä¸­è¿è¡Œå‘½ä»¤ï¼Œä½äºæ­£åœ¨è¢«è°ƒè¯•ä»£ç çš„å®šç•ŒèŒƒå›´ä¹‹å¤–ã€‚</li>
</ul>
<h2 id="è°ƒä¼˜"><a href="#è°ƒä¼˜" class="headerlink" title="è°ƒä¼˜"></a>è°ƒä¼˜</h2><p>é™¤äº†è°ƒè¯•ï¼Œåå°„çš„å¦å¤–ä¸€ä¸ªå¸¸è§ç”¨æ³•æ˜¯ç”¨äºè°ƒä¼˜ï¼Œå³ç¨‹åºä½¿ç”¨èµ„æºçš„è¡Œä¸ºåˆ†æã€‚å¯¹äºæ—¶é—´ç›¸å…³çš„è°ƒä¼˜ï¼Œæœ€å¥½ä½¿ç”¨Cæ¥å£ï¼Œå› ä¸ºæ¯æ¬¡é’©å­è°ƒç”¨å‡½æ•°å¼€é”€å¤ªå¤§ä»è€Œå¯èƒ½å¯¼è‡´æµ‹è¯•ç»“æœæ— æ•ˆã€‚ä¸è¿‡ï¼Œå¯¹äºè®¡æ•°æ€§è´¨çš„è°ƒä¼˜ï¼ŒLuaä»£ç å°±å¯ä»¥åšå¾—å¾ˆå¥½ã€‚<br>æ€§èƒ½è°ƒä¼˜å·¥å…·çš„ä¸»è¦æ•°æ®ç»“æ„æ˜¯ä¸¤ä¸ªè¡¨ï¼Œå…¶ä¸­ä¸€ä¸ªè¡¨å°†å‡½æ•°å’Œå®ƒä»¬çš„è°ƒç”¨è®¡æ•°å…³è”èµ·æ¥ï¼Œå¦ä¸€ä¸ªè¡¨å…³è”å‡½æ•°å’Œå‡½æ•°åã€‚è¿™ä¸¤ä¸ªè¡¨çš„ç´¢å¼•éƒ½æ˜¯å‡½æ•°è‡ªèº«ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> Counters = &#123;&#125;</span><br><span class="line"><span class="keyword">local</span> Names = &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥åœ¨æ€§èƒ½åˆ†æå®Œæˆåå†è·å–å‡½æ•°çš„åç§°ï¼Œä½†æ˜¯å¦‚æœèƒ½åœ¨ä¸€ä¸ªå‡½æ•°Få¤„äºæ´»åŠ¨çŠ¶æ€æ—¶è·å–å…¶åç§°å¯èƒ½ä¼šå¾—åˆ°æ›´å¥½çš„ç»“æœã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨å‡½æ•°Få¤„äºæ´»åŠ¨çŠ¶æ€æ—¶ï¼ŒLuaè¯­è¨€å¯ä»¥é€šè¿‡åˆ†ææ­£åœ¨è°ƒç”¨å‡½æ•°Fçš„ä»£ç æ¥æ‰¾å‡ºå‡½æ•°Fçš„åç§°ã€‚<br>ç°åœ¨ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªé’©å­å‡½æ•°ï¼Œè¯¥é’©å­å‡½æ•°çš„ä»»åŠ¡æ˜¯è·å–å½“å‰æ­£åœ¨è¢«è°ƒç”¨çš„å‡½æ•°ï¼Œå¹¶é€’å¢ç›¸åº”çš„è®¡æ•°å™¨ï¼Œå†æ”¶é›†å‡½æ•°åã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ ç”¨äºè®¡ç®—è°ƒç”¨æ¬¡æ•°çš„é’©å­</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">hook</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">local</span> f = <span class="built_in">debug</span>.<span class="built_in">getinfo</span>(<span class="number">2</span>,<span class="string">&quot;f&quot;</span>).func </span><br><span class="line">	<span class="keyword">local</span> count = Counters[f]</span><br><span class="line">	<span class="keyword">if</span> count == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">		Counters[f] = <span class="number">1</span></span><br><span class="line">		Names[f] = <span class="built_in">debug</span>.<span class="built_in">getinfo</span>(<span class="number">2</span>,<span class="string">&quot;Sn&quot;</span>)</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		Counters[f] = count + <span class="number">1</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œè¿è¡Œå¸¦æœ‰é’©å­çš„ç¨‹åºã€‚å‡è®¾æˆ‘ä»¬è¦åˆ†æçš„ç¨‹åºä½äºä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä¸”ç”¨æˆ·é€šè¿‡å‚æ•°æŠŠè¯¥æ–‡ä»¶åä¼ é€’ä¸ªæ€§èƒ½åˆ†æå™¨ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">% lua profile main-prog</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œæ€§èƒ½åˆ†æå™¨å°±å¯ä»¥ä»arg[1]ä¸­å¾—åˆ°æ–‡ä»¶åã€è®¾ç½®é’©å­å¹¶è¿è¡Œæ–‡ä»¶ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">loadfile</span>(<span class="built_in">arg</span>[<span class="number">1</span>]))</span><br><span class="line"><span class="built_in">debug</span>.<span class="built_in">sethook</span>(hook,<span class="string">&quot;c&quot;</span>)</span><br><span class="line">f()</span><br><span class="line"><span class="built_in">debug</span>.<span class="built_in">sethook</span>()</span><br></pre></td></tr></table></figure>
<p>æœ€åä¸€æ­¥æ˜¯æ˜¾ç¤ºç»“æœã€‚</p>
<blockquote>
<p>ç¤ºä¾‹  è·å–ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°å</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getname</span> <span class="params">(func)</span></span></span><br><span class="line">	<span class="keyword">local</span> n = Names[func]</span><br><span class="line">	<span class="keyword">if</span> n.what == <span class="string">&quot;C&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">return</span> n.name </span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">local</span> lc = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s]:%d&quot;</span>,n.short_src, n.linedefined)</span><br><span class="line">	<span class="keyword">if</span> n.what ~= <span class="string">&quot;main&quot;</span> <span class="keyword">and</span> n.namewhat ~= <span class="string">&quot;&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%s (%s)&quot;</span>,lc, n.name)</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> lc</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æœ‰Luaè¯­è¨€ä¸­çš„å‡½æ•°åä¸æ˜¯ç‰¹åˆ«ç¡®å®šï¼Œæ‰€ä»¥æˆ‘ä»¬ç»™æ¯ä¸ªå‡½æ•°å†åŠ ä¸Šä½ç½®ä¿¡æ¯ï¼Œä»¥file:fileè¿™æ ·çš„å½¢å¼ç»™å‡ºã€‚å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰åç§°ï¼Œé‚£ä¹ˆå°±åªä½¿ç”¨å®ƒçš„ä½ç½®ã€‚å¦‚æœå‡½æ•°æ˜¯Cå‡½æ•°ï¼Œé‚£ä¹ˆå°±åªä½¿ç”¨å®ƒçš„åç§°ï¼ˆå› ä¸ºæ²¡æœ‰ä½ç½®ï¼‰ã€‚åœ¨ä¸Šè¿°å‡½æ•°å®šä¹‰åï¼Œæˆ‘ä»¬è¾“å‡ºæ¯ä¸ªå‡½æ•°åŠå…¶è®¡æ•°å™¨çš„å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> func,count <span class="keyword">in</span> <span class="built_in">pairs</span>(Counters) <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">print</span>(getname(func),count)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="æ²™ç›’"><a href="#æ²™ç›’" class="headerlink" title="æ²™ç›’"></a>æ²™ç›’</h2><p>ç”±äºLuaè¯­è¨€é€šè¿‡åº“å‡½æ•°å®Œæˆæ‰€æœ‰ä¸å¤–éƒ¨ä¸–ç•Œçš„é€šä¿¡ï¼Œå› æ­¤ä¸€æ—¦ç§»é™¤äº†è¿™äº›å‡½æ•°ä¹Ÿå°±æ’é™¤äº†ä¸€ä¸ªè„šæœ¬èƒ½å¤Ÿå½±å“å¤–éƒ¨ç¯å¢ƒçš„å¯èƒ½ã€‚ä¸è¿‡å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬ä»ç„¶å¯èƒ½ä¼šè¢«æ¶ˆè€—å¤§é‡CPUæ—¶é—´æˆ–å†…å­˜çš„è„šæœ¬è¿›è¡Œæ‹’ç»æœåŠ¡Dosæ”»å‡»ã€‚åå°„ï¼Œä»¥è°ƒè¯•é’©å­çš„å½¢å¼ï¼Œæä¾›äº†ä¸€ç§é¿å…è¿™ç§æ”»å‡»çš„æœ‰è¶£æ–¹å¼ã€‚<br>é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨countæ—¶é—´é’©å­æ¥é™åˆ¶ä¸€æ®µä»£ç èƒ½å¤Ÿæ‰§è¡Œçš„æŒ‡ä»¤æ•°ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹  ä¸€ä¸ªä½¿ç”¨é’©å­çš„ç®€å•æ²™ç›’</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">debug</span> = <span class="built_in">require</span> <span class="string">&quot;debug&quot;</span></span><br><span class="line"><span class="keyword">local</span> steplimit = <span class="number">1000</span></span><br><span class="line"><span class="keyword">local</span> count = <span class="number">0</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">setp</span><span class="params">()</span></span></span><br><span class="line">	count = count + <span class="number">1</span></span><br><span class="line">	<span class="keyword">if</span> count &gt; steplimit <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;script uses too much CPU&quot;</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">loadfile</span>(<span class="built_in">arg</span>[<span class="number">1</span>],<span class="string">&quot;t&quot;</span>,&#123;&#125;))</span><br><span class="line"></span><br><span class="line"><span class="built_in">debug</span>.<span class="built_in">sethook</span>(step,<span class="string">&quot;&quot;</span>,<span class="number">100</span>)</span><br><span class="line">f()</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç¨‹åºåŠ è½½äº†æŒ‡å®šçš„æ–‡ä»¶ï¼Œè®¾ç½®äº†é’©å­ï¼Œç„¶åè¿è¡Œæ–‡ä»¶ã€‚è¯¥ç¨‹åºæŠŠé’©å­è®¾ç½®ä¸ºç›‘å¬countäº‹ä»¶ï¼Œä½¿å¾—Luaè¯­è¨€æ¯æ‰§è¡Œ100æ¡æ‰§è¡Œå°±è°ƒç”¨ä¸€æ¬¡é’©å­å‡½æ•°ã€‚é’©å­åªæ˜¯é€’å¢ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç„¶åæ£€æŸ¥å…¶æ˜¯å¦è¶…è¿‡äº†æŸä¸ªå›ºå®šçš„é™åˆ¶ã€‚è¿™æ ·åšä¹‹åè¿˜ä¼šæœ‰é—®é¢˜ä¹ˆï¼Ÿ<br>å½“ç„¶æœ‰é—®é¢˜ã€‚æˆ‘ä»¬è¿˜å¿…é¡»é™åˆ¶æ‰€åŠ è½½çš„ä»£ç æ®µçš„å¤§å°ï¼šä¸€æ®µå¾ˆé•¿çš„ä»£ç åªè¦è¢«åŠ è½½å°±å¯èƒ½æ¶ˆè€—å°½å†…å­˜ã€‚å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œç¨‹åºå¯ä»¥é€šè¿‡å°‘é‡æŒ‡ä»¤æ¶ˆè€—å¤§é‡çš„å†…å­˜ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> s = <span class="string">&quot;123456789012345&quot;</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>,<span class="number">36</span> <span class="keyword">do</span> s = s .. s <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°çš„å‡ è¡Œä»£ç ç”¨ä¸åˆ°150è¡Œçš„æŒ‡ä»¤å°±è¯•å›¾åˆ›å»ºä¸€ä¸ª1å­—èŠ‚çš„å­—ç¬¦ä¸²ã€‚æ˜¾ç„¶ï¼Œå•çº¯é™åˆ¶æŒ‡ä»¤æ•°é‡å’Œç¨‹åºå¤§å°æ˜¯ä¸å¤Ÿçš„ã€‚<br>ä¸€ç§æ”¹è¿›æ˜¯æ£€æŸ¥å’Œé™åˆ¶å‡½æ•°stepä½¿ç”¨çš„å†…å­˜ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹  æ§åˆ¶å†…å­˜ä½¿ç”¨</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æœ€å¤§èƒ½å¤Ÿä½¿ç”¨çš„å†…å­˜ï¼ˆå•ä½ KBï¼‰</span></span><br><span class="line"><span class="keyword">local</span> memlimit = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æœ€å¤§èƒ½å¤Ÿæ‰§è¡Œçš„&quot;steps&quot;</span></span><br><span class="line"><span class="keyword">local</span> steplimit = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">checkmem</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">collectgarbage</span>(<span class="string">&quot;count&quot;</span>) &gt; memlimit <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;script uses too much memory&quot;</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> count = <span class="number">0</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">step</span><span class="params">()</span></span></span><br><span class="line">	checkmem()</span><br><span class="line">	count = count + <span class="number">1</span></span><br><span class="line">	<span class="keyword">if</span> count &gt; steplimit <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;script uses too much CPU&quot;</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºé€šè¿‡å°‘é‡æŒ‡ä»¤å°±å¯ä»¥æ¶ˆè€—å¾ˆå¤šå†…å­˜ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥è®¾ç½®ä¸€ä¸ªå¾ˆä½çš„é™åˆ¶æˆ–ä»¥å¾ˆå°çš„æ­¥è¿›æ¥è°ƒç”¨é’©å­å‡½æ•°ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œä¸€ä¸ªç¨‹åºç”¨40è¡Œä»¥å†…çš„æŒ‡ä»¤å°±èƒ½æŠŠä¸€ä¸ªå­—ç¬¦ä¸²çš„å¤§å°å¢åŠ ä¸Šåƒå€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¦ä¹ˆä»¥æ¯”40æ¡æŒ‡ä»¤æ›´é«˜çš„é¢‘ç‡è°ƒç”¨é’©å­ï¼Œè¦ä¹ˆæŠŠå†…å­˜é™åˆ¶è®¾ä¸ºæˆ‘ä»¬èƒ½å¤Ÿæ‰¿å—çš„æœ€å¤§å€¼çš„ä¸€åƒåˆ†ä¹‹ä¸€ã€‚<br>ä¸€ä¸ªå¾®å¦™çš„é—®é¢˜æ˜¯å­—ç¬¦ä¸²æ ‡å‡†åº“ã€‚æˆ‘ä»¬å¯ä»¥å¯¹å­—ç¬¦ä¸²è°ƒç”¨è¯¥åº“ä¸­çš„æ‰€æœ‰å‡½æ•°ã€‚å› æ­¤ï¼Œå³ä½¿ç¯å¢ƒä¸­æ²¡æœ‰è¿™äº›å‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è°ƒç”¨å®ƒä»¬ï¼šå­—ç¬¦ä¸²å¸¸é‡æŠŠå®ƒä»¬â€œèµ°ç§â€åˆ°äº†æˆ‘ä»¬çš„æ²™ç›’ä¸­ã€‚å­—ç¬¦ä¸²æ ‡å‡†åº“ä¸­æ²¡æœ‰å‡½æ•°èƒ½å¤Ÿå½±å“å¤–éƒ¨ä¸–ç•Œï¼Œä½†æ˜¯å®ƒä»¬ç»•è¿‡äº†æˆ‘ä»¬çš„æŒ‡ä»¤è®¡æ•°å™¨ã€‚å­—ç¬¦ä¸²æ ‡å‡†åº“ä¸­çš„æœ‰äº›å‡½æ•°å¯¹äºDoSæ”»å‡»è€Œè¨€å¯èƒ½ä¼šéå¸¸å±é™©ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ ä½¿ç”¨é’©å­é˜»æ­¢å¯¹æœªæˆæƒå‡½æ•°çš„è®¿é—®</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">debug</span> = <span class="built_in">require</span> <span class="string">&quot;debug&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> steplimit = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> validfunc = &#123;</span><br><span class="line">	[<span class="built_in">string</span>.<span class="built_in">upper</span>] = <span class="literal">true</span>,</span><br><span class="line">	[<span class="built_in">string</span>.<span class="built_in">lower</span>] = <span class="literal">true</span>,</span><br><span class="line">	... <span class="comment">-- å…¶ä»–æˆæƒçš„å‡½æ•°</span></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">hook</span><span class="params">(event)</span></span></span><br><span class="line"> 	<span class="keyword">if</span> event == <span class="string">&quot;call&quot;</span> <span class="keyword">then</span></span><br><span class="line"> 		<span class="keyword">local</span> info = <span class="built_in">debug</span>.<span class="built_in">getinfo</span>(<span class="number">2</span>,<span class="string">&quot;fn&quot;</span>)</span><br><span class="line"> 		<span class="keyword">if</span> <span class="keyword">not</span> validfunc[info.func] <span class="keyword">then</span></span><br><span class="line"> 			<span class="built_in">error</span>(<span class="string">&quot;calling bad function :&quot;</span> .. (info.name <span class="keyword">or</span> <span class="string">&quot;?&quot;</span>))</span><br><span class="line"> 		<span class="keyword">end</span></span><br><span class="line"> 	<span class="keyword">end</span></span><br><span class="line"> 	count = count + <span class="number">1</span></span><br><span class="line"> 	<span class="keyword">if</span> count &gt; steplimit <span class="keyword">then</span></span><br><span class="line"> 		<span class="built_in">error</span>(<span class="string">&quot;script uses too much CPU&quot;</span>)</span><br><span class="line"> 	<span class="keyword">end</span></span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">-- åŠ è½½ä»£ç æ®µ</span></span><br><span class="line"> <span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">loadfile</span>(<span class="built_in">arg</span>[<span class="number">1</span>],<span class="string">&quot;t&quot;</span>,&#123;&#125;))</span><br><span class="line"> <span class="built_in">debug</span>.<span class="built_in">sethook</span>(hook,<span class="string">&quot;&quot;</span>,<span class="number">100</span>)</span><br><span class="line"> f()</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œè¡¨validfuncè¡¨ç¤ºä¸€ä¸ªåŒ…å«ç¨‹åºæ‰€èƒ½å¤Ÿè°ƒç”¨çš„å‡½æ•°çš„é›†åˆã€‚å‡½æ•°hookä½¿ç”¨è°ƒè¯•åº“æ¥è®¿é—®æ­£åœ¨è¢«è°ƒç”¨çš„å‡½æ•°ï¼Œç„¶åæ£€æŸ¥å‡½æ•°æ˜¯å¦åœ¨é›†åˆvalidfuncä¸­ã€‚<br>å¯¹äºä»»ä½•ä¸€ç§æ²™ç›’çš„å®ç°è€Œè¨€ï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯æ²™ç›’å†…å…è®¸ä½¿ç”¨å“ªäº›å‡½æ•°ã€‚ç”¨äºæ•°æ®æè¿°çš„æ²™ç›’å¯ä»¥é™åˆ¶æ‰€æœ‰æˆ–å¤§éƒ¨åˆ†å‡½æ•°ï¼›å…¶ä»–çš„æ²™ç›’åˆ™éœ€è¦æ›´åŠ å®½å®¹ï¼Œä¹Ÿè®¸åº”è¯¥å¯¹æŸäº›å‡½æ•°æä¾›å®ƒä»¬è‡ªå·±å¸¦é™åˆ¶çš„å®ç°ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè¿ç»­æ•™ç¨‹ä¹‹Luaå­—ç¬¦ä¸²</title>
    <url>/57396.html</url>
    <content><![CDATA[<p>å­—ç¬¦ä¸²ç”¨äºæ–‡æœ¬ã€‚Luaè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²å³å¯ä»¥è¡¨ç¤ºå•ä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸€æ•´æœ¬ä¹¦ç±ã€‚åœ¨Luaè¯­è¨€ä¸­ï¼Œæ“ä½œ100Kæˆ–è€…1Mä¸ªå­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²çš„ç¨‹åºä¹Ÿå¾ˆå¸¸è§ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Luaè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜å€¼ã€‚æˆ‘ä»¬ä¸èƒ½åƒåœ¨Cè¯­è¨€ä¸­é‚£æ ·ç›´æ¥æ”¹å˜æŸä¸ªå­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²çš„æ–¹å¼æ¥è¾¾åˆ°ä¿®æ”¹çš„ç›®çš„ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot;one string&quot;</span></span><br><span class="line">b = <span class="built_in">string</span>.<span class="built_in">gsub</span>(a,<span class="string">&quot;one&quot;</span>,<span class="string">&quot;another&quot;</span>) <span class="comment">--æ”¹å˜å­—ç¬¦ä¸²ä¸­çš„æŸäº›éƒ¨åˆ†</span></span><br><span class="line"><span class="built_in">print</span>(a)				<span class="comment">--one string</span></span><br><span class="line"><span class="built_in">print</span>(b)				<span class="comment">--another string</span></span><br></pre></td></tr></table></figure>
<p>åƒLuaè¯­è¨€ä¸­çš„å…¶ä»–å¯¹è±¡ä¸€æ ·ï¼ŒLuaè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²ä¹Ÿæ˜¯è‡ªåŠ¨å†…å­˜ç®¡ç†çš„å¯¹è±¡ä¹‹ä¸€ã€‚è¿™æ„å‘³ç€Luaè¯­è¨€ä¼šè´Ÿè´£å­—ç¬¦ä¸²çš„åˆ†é…å’Œé‡Šæ”¾ï¼Œå¼€å‘äººå‘˜æ— é¡»å…³æ³¨ã€‚<br>å¯ä»¥ä½¿ç”¨é•¿åº¦æ“ä½œç¬¦(#)è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">print</span>(#a)			<span class="comment">--5</span></span><br><span class="line"><span class="built_in">print</span>(#<span class="string">&quot;good bye&quot;</span>)  <span class="comment">--8</span></span><br></pre></td></tr></table></figure>
<p>è¯¥æ“ä½œç¬¦è¿”å›å­—ç¬¦ä¸²å ç”¨çš„å­—èŠ‚æ•°ï¼Œåœ¨æŸäº›ç¼–ç ä¸­ï¼Œè¿™ä¸ªå€¼å¯èƒ½ä¸å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„ä¸ªæ•°ä¸åŒã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿æ¥æ“ä½œç¬¦<code>..</code>ï¼ˆä¸¤ä¸ªç‚¹ï¼‰æ¥è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥ã€‚å¦‚æœæ“ä½œæ•°ä¸­å­˜åœ¨æ•°å€¼ï¼Œé‚£ä¹ˆLuaè¯­è¨€ä¼šå…ˆæŠŠæ•°å€¼è½¬æ¢æˆå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="string">&quot;Hello&quot;</span> .. <span class="string">&quot;World&quot;</span> 		<span class="comment">-- Hello World</span></span><br><span class="line">&gt; <span class="string">&quot;result is &quot;</span> .. <span class="number">3</span>			<span class="comment">-- result is 3</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æŸäº›è¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²è¿æ¥ä½¿ç”¨çš„æ˜¯åŠ å·ï¼Œä½†å®é™…ä¸Š3+5å’Œ3..5æ˜¯ä¸ä¸€æ ·çš„ã€‚<br>åº”è¯¥æ³¨æ„ï¼Œåœ¨Luaè¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜é‡ã€‚å­—ç¬¦ä¸²è¿æ¥æ€»æ˜¯åˆ›å»ºä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè€Œä¸ä¼šæ”¹å˜åŸæ¥ä½œä¸ºæ“ä½œæ•°çš„å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; a = <span class="string">&quot;Hello&quot;</span></span><br><span class="line">&gt; a .. <span class="string">&quot;World&quot;</span>      <span class="comment">-- Hello World</span></span><br><span class="line">&gt; a 				<span class="comment">-- Hello</span></span><br></pre></td></tr></table></figure>

<h2 id="å­—ç¬¦ä¸²å¸¸é‡"><a href="#å­—ç¬¦ä¸²å¸¸é‡" class="headerlink" title="å­—ç¬¦ä¸²å¸¸é‡"></a>å­—ç¬¦ä¸²å¸¸é‡</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€å¯¹åŒå¼•å·æˆ–å•å¼•å·æ¥å£°æ˜å­—ç¬¦ä¸²å¸¸é‡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot; a line &quot;</span></span><br><span class="line">b = <span class="string">&#x27; another line&#x27;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨åŒå¼•å·å’Œå•å¼•å·å£°æ˜å­—ç¬¦ä¸²æ˜¯ç­‰ä»·çš„ã€‚å®ƒä»¬ä¸¤è€…å”¯ä¸€çš„åŒºåˆ«åœ¨äºï¼Œä½¿ç”¨åŒå¼•å·å£°æ˜çš„å­—ç¬¦ä¸²ä¸­å‡ºç°å•å¼•å·æ—¶ï¼Œå•å¼•å·å¯ä»¥ä¸ç”¨è½¬ä¹‰ï¼›ä½¿ç”¨å•å¼•å·å£°æ˜çš„å­—ç¬¦ä¸²ä¸­å‡ºç°åŒå¼•å·æ—¶ï¼ŒåŒå¼•å·å¯ä»¥ä¸ç”¨è½¬ä¹‰ã€‚<br>Luaè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²æ”¯æŒä¸‹åˆ—Cè¯­è¨€é£æ ¼çš„è½¬ä¹‰å­—ç¬¦ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">\a			å“é“ƒï¼ˆbellï¼‰</span><br><span class="line">\b			é€€æ ¼ï¼ˆback spaceï¼‰</span><br><span class="line">\f			æ¢é¡µï¼ˆform feedï¼‰</span><br><span class="line">\n			æ¢è¡Œï¼ˆnewlineï¼‰</span><br><span class="line">\r			å›è½¦ï¼ˆcarriage <span class="keyword">return</span>ï¼‰</span><br><span class="line">\t			æ°´å¹³åˆ¶è¡¨ç¬¦ï¼ˆhorizontal tabï¼‰</span><br><span class="line">\v			å‚ç›´åˆ¶è¡¨ç¬¦ï¼ˆvertical tabï¼‰</span><br><span class="line">\\			åæ–œæ ï¼ˆbackslashï¼‰</span><br><span class="line">\<span class="string">&quot;			åŒå¼•å·ï¼ˆdouble quoteï¼‰</span></span><br><span class="line"><span class="string">\&#x27;			å•å¼•å·ï¼ˆsingle quoteï¼‰</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹è¿°ç¤ºä¾‹å±•ç¤ºäº†è½¬ä¹‰å­—ç¬¦çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">print</span>(<span class="string">&quot;one line \n next line \n\&quot;in quotes\&quot;,&#x27;in quotes&#x27; &quot;</span>)</span><br><span class="line">one line</span><br><span class="line"><span class="built_in">next</span> line</span><br><span class="line"><span class="string">&quot;in quotes&quot;</span> , <span class="string">&#x27;in quotes&#x27;</span></span><br><span class="line">&gt;<span class="built_in">print</span>(<span class="string">&#x27;a backslash inside quotes:\&#x27; \\\ &#x27;</span><span class="string">&#x27;)</span></span><br><span class="line"><span class="string">a backslash inside quotes: &#x27;</span>\<span class="string">&#x27;</span></span><br><span class="line"><span class="string">&gt;print(&quot;a simpler way: &#x27;</span>\\<span class="string">&#x27; &quot;)</span></span><br><span class="line"><span class="string">a simpler way: &#x27;</span>\<span class="string">&#x27;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œè¿˜å¯ä»¥é€šè¿‡è½¬ä¹‰\addå’Œ\xhhæ¥å£°æ˜å­—ç¬¦ã€‚å…¶ä¸­ï¼Œaddæ˜¯ç”±æœ€å¤š3ä¸ªåè¿›åˆ¶æ•°å­—ç»„æˆçš„åºåˆ—ï¼Œhhæ˜¯ç”±ä¸¤ä¸ªä¸”å¿…é¡»æ˜¯ä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—ç»„æˆçš„åºåˆ—ã€‚</p>
<h2 id="é•¿å­—ç¬¦ä¸²-å¤šè¡Œå­—ç¬¦ä¸²"><a href="#é•¿å­—ç¬¦ä¸²-å¤šè¡Œå­—ç¬¦ä¸²" class="headerlink" title="é•¿å­—ç¬¦ä¸²&#x2F;å¤šè¡Œå­—ç¬¦ä¸²"></a>é•¿å­—ç¬¦ä¸²&#x2F;å¤šè¡Œå­—ç¬¦ä¸²</h2><p>åƒé•¿æ³¨é‡Š&#x2F;å¤šè¡Œæ³¨é‡Šä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ä¸€å¯¹åŒæ‹¬å·æ¥å£°æ˜é•¿åº¦å­—ç¬¦ä¸²&#x2F;å¤šè¡Œå­—ç¬¦ä¸²å¸¸é‡ã€‚è¢«æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„å†…å®¹å¯ä»¥åŒ…å«å¾ˆå¤šè¡Œï¼Œå¹¶ä¸”å†…å®¹ä¸­çš„è½¬ä¹‰åºåˆ—ä¸ä¼šè¢«è½¬ä¹‰ã€‚æ­¤å¤–ï¼Œå¦‚æœå¤šè¡Œå­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯æ¢è¡Œç¬¦ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¢è¡Œç¬¦ä¼šè¢«å¿½ç•¥ã€‚å¤šè¡Œå­—ç¬¦ä¸²åœ¨å£°æ˜åŒ…å«å¤§æ®µä»£ç çš„å­—ç¬¦ä¸²æ—¶éå¸¸æ–¹ä¾¿ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">page = <span class="string">[[</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">	&lt;title&gt; An HTML Page&lt;/title&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">	&lt;a href = &quot;http://www.lua.org&quot;&gt;Lua&lt;a&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">]]</span></span><br></pre></td></tr></table></figure>
<p>æœ‰æ—¶å­—ç¬¦ä¸²ä¸­å¯èƒ½æœ‰ç±»ä¼¼a &#x3D; b[c[i]]è¿™æ ·çš„å†…å®¹ï¼Œæˆ–è€…ï¼Œå­—ç¬¦ä¸²ä¸­å¯èƒ½æœ‰è¢«æ³¨é‡Šæ‰çš„ä»£ç ã€‚ä¸ºäº†åº”å¯¹è¿™äº›æƒ…å†µï¼Œå¯ä»¥åœ¨ä¸¤ä¸ªå·¦æ–¹æ‹¬å·ä¹‹é—´åŠ ä¸Šä»»æ„æ•°é‡çš„ç­‰å·ï¼Œå¦‚[&#x3D;&#x3D;&#x3D;[ã€‚è¿™æ ·ï¼Œå­—ç¬¦ä¸²å¸¸é‡åªæœ‰åœ¨é‡åˆ°äº†åŒ…å«äº†ç›¸åŒæ•°é‡ç­‰å·çš„ä¸¤ä¸ªå³æ‹¬å·æ—¶æ‰ä¼šç»“æŸã€‚Luaè¯­è¨€çš„è¯­æ³•æ‰«æå™¨ä¼šå¿½ç•¥æ‰€å«ç­‰å·æ•°é‡ä¸ç›¸åŒçš„æ–¹æ‹¬å·ã€‚é€šè¿‡é€‰æ‹©æ°å½“æ•°é‡çš„ç­‰å·ï¼Œå°±å¯ä»¥åœ¨æ— é¡»ä¿®æ”¹åŸå­—ç¬¦ä¸²çš„æƒ…å†µä¸‹å£°æ˜ä»»æ„çš„å­—ç¬¦ä¸²å¸¸é‡äº†ã€‚<br>å¯¹æ³¨é‡Šè€Œè¨€ï¼Œè¿™ç§æœºåˆ¶ä¹ŸåŒæ ·æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨â€“[&#x3D;å’Œ]&#x3D;]æ¥è¿›è¡Œé•¿æ³¨é‡Šï¼Œä»è€Œé™ä½äº†å¯¹å†…éƒ¨å·²ç»åŒ…å«æ³¨é‡Šçš„ä»£ç è¿›è¡Œæ³¨é‡Šçš„éš¾åº¦ã€‚<br>å½“ä»£ç ä¸­éœ€è¦ä½¿ç”¨å¸¸é‡æ–‡æœ¬æ—¶ï¼Œä½¿ç”¨é•¿å­—ç¬¦ä¸²æ˜¯ä¸€ç§ç†æƒ³çš„é€‰æ‹©ã€‚ä½†æ˜¯ï¼Œå¯¹äºéæ–‡æœ¬çš„å¸¸é‡æˆ‘ä»¬ä¸åº”è¯¥æ»¥ç”¨é•¿å­—ç¬¦ä¸²ã€‚è™½ç„¶Luaè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²å¸¸é‡å¯ä»¥åŒ…å«ä»»æ„å­—èŠ‚ï¼Œä½†æ˜¯æ»¥ç”¨è¿™ä¸ªç‰¹è¡Œå¹¶ä¸æ˜æ™ºã€‚åŒæ—¶ï¼Œåƒâ€\r\nâ€ä¸€æ ·çš„EOFåºåˆ—åœ¨è¢«è¯»å–çš„æ—¶å€™å¯èƒ½ä¼šè¢«å½’ä¸€åŒ–æˆâ€\nâ€ã€‚ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œæœ€å¥½å°±æ˜¯æŠŠè¿™äº›å¯èƒ½å¼•èµ·æ­§ä¹‰çš„äºŒè¿›åˆ¶æ•°æ®ç”¨åè¿›åˆ¶æˆ–åå…­è¿›åˆ¶çš„æ•°å€¼è½¬ä¹‰ç³»åˆ—è¿›è¡Œè¡¨ç¤ºï¼Œä¾‹å¦‚â€\x13\x01\xA1\xBBâ€ã€‚ä¸è¿‡ï¼Œç”±äºè¿™ç§è½¬ä¹‰è¡¨ç¤ºè¡Œç¨‹çš„å­—ç¬¦ä¸²å¾€å¾€å¾ˆé•¿ï¼Œæ‰€ä»¥å¯¹äºé•¿å­—ç¬¦ä¸²æ¥è¯´ä»å¯èƒ½æ˜¯ä¸ªé—®é¢˜ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œä»Lua5.2å¼€å§‹å¼•å…¥äº†è½¬ä¹‰åºåˆ—\zï¼Œè¯¥è½¬ä¹‰ç¬¦ä¼šè·³è¿‡å…¶åçš„æ‰€æœ‰ç©ºç™½å­—ç¬¦ï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦ã€‚ä¸‹åˆ—ä¸­æ¼”ç¤ºäº†è¯¥è½¬ä¹‰ç¬¦çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">data = <span class="string">&quot;\x00\x01\x02\x03\x04\x05\x06\x07\z</span></span><br><span class="line"><span class="string">		\x08\x09\x0A\x0B\x0C\x0D\x0E\x0F&quot;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€è¡Œæœ€åçš„\zä¼šè·³è¿‡å…¶åçš„EOFå’Œç¬¬äºŒè¡Œçš„åˆ¶è¡¨ç¬¦ï¼Œå› æ­¤æœ€ç»ˆå¾—åˆ°çš„å­—ç¬¦ä¸²ä¸­ï¼Œ\x08å®é™…ä¸Šæ˜¯ç´§è·Ÿç€\x07çš„ã€‚</p>
<h2 id="å¼ºåˆ¶ç±»å‹è½¬æ¢"><a href="#å¼ºåˆ¶ç±»å‹è½¬æ¢" class="headerlink" title="å¼ºåˆ¶ç±»å‹è½¬æ¢"></a>å¼ºåˆ¶ç±»å‹è½¬æ¢</h2><p>Luaè¯­è¨€åœ¨è¿è¡Œæ—¶æä¾›äº†æ•°å€¼å’Œå­—ç¬¦ä¸²ä¹‹é—´çš„è‡ªåŠ¨è½¬æ¢ã€‚é’ˆå¯¹å­—ç¬¦ä¸²çš„æ‰€æœ‰ç®—æœ¯æ“ä½œä¼šå°è¯•å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼ã€‚Luaè¯­è¨€ä¸ä»…ä»…åœ¨ç®—æœ¯æ“ä½œæ—¶è¿›è¡Œè¿™ç§å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè¿˜ä¼šåœ¨ä»»ä½•éœ€è¦æ•°å€¼çš„æƒ…å†µä¸‹è¿›è¡Œï¼Œä¾‹å¦‚å‡½æ•°math.sinçš„å‚æ•°ã€‚<br>ç›¸åï¼Œå½“Luaè¯­è¨€å‘ç°åœ¨éœ€è¦å­—ç¬¦ä¸²çš„åœ°æ–¹å‡ºç°äº†æ•°å€¼æ—¶ï¼Œå®ƒå°±ä¼šæŠŠæ•°å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">10</span> .. <span class="number">20</span> )  	<span class="comment">--1020</span></span><br></pre></td></tr></table></figure>
<p>å½“åœ¨æ•°å€¼åç´§æ¥ç€ä½¿ç”¨å­—ç¬¦ä¸²è¿æ¥æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ç©ºæ ¼å°†å®ƒä»¬åˆ†å¼€ï¼Œå¦åˆ™Luaè¯­è¨€ä¼šæŠŠç¬¬ä¸€ä¸ªç‚¹å½“æˆå°æ•°ç‚¹ã€‚<br>å¾ˆå¤šäººè®¤ä¸ºè‡ªåŠ¨å¼ºåˆ¶ç±»å‹è½¬æ¢ç®—ä¸ä¸Šæ˜¯Luaè¯­è¨€ä¸­çš„ä¸€é¡¹å¥½è®¾è®¡ã€‚ä½œä¸ºåŸåˆ™ä¹‹ä¸€ï¼Œå»ºè®®æœ€å¥½ä¸è¦å®Œå…¨å¯„å¸Œæœ›äºè‡ªåŠ¨å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚è™½ç„¶åœ¨æŸäº›åœºæ™¯ä¸‹è¿™ç§æœºåˆ¶å¾ˆä¾¿åˆ©ï¼Œä½†åŒæ—¶ä¹Ÿç»™è¯­è¨€å’Œé€‚ç”¨è¿™ç§æœºåˆ¶çš„ç¨‹åºå¸¦æ¥äº†å¤æ‚æ€§ã€‚<br>ä½œä¸ºè¿™ç§â€äºŒç±»çŠ¶æ€â€çš„è¡¨ç°ä¹‹ä¸€ï¼ŒLua5.3æ²¡æœ‰å®ç°å¼ºåˆ¶ç±»å‹è½¬æ¢å¨±æ•´å‹çš„é›†æˆï¼Œè€Œæ˜¯é‡‡ç”¨äº†å¦ä¸€ç§æ›´ç®€å•å’Œå¿«é€Ÿçš„å®ç°æ–¹å¼ï¼šç®—æœ¯è¿ç®—çš„è§„åˆ™å°±æ˜¯åªæœ‰åœ¨ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯æ•´å‹å€¼æ—¶ç»“æœæ‰æ˜¯æ•´å‹ã€‚å› æ­¤ï¼Œç”±äºå­—ç¬¦ä¸²ä¸æ˜¯æ•´å‹å€¼ï¼Œæ‰€ä»¥ä»»ä½•æœ‰å­—ç¬¦ä¸²å‚ä¸çš„ç®—æœ¯è¿ç®—éƒ½ä¼šè¢«å½“åšæµ®ç‚¹è¿ç®—å¤„ç†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="string">&quot;10&quot;</span> + <span class="number">1</span>          <span class="comment">--11.0</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœéœ€è¦æ˜¾ç¤ºåœ°å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢æˆæ•°å€¼ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å‡½æ•°tonumberã€‚å½“è¿™ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹ä¸èƒ½è¡¨ç¤ºä¸ºæœ‰æ•ˆæ•°å­—æ—¶è¯¥å‡½æ•°è¿”å›nilï¼›å¦åˆ™ï¼Œè¯¥å‡½æ•°å°±æŒ‰ç…§Luaè¯­æ³•æ‰«æå™¨çš„è§„åˆ™è¿”å›å¯¹åº”çš„æ•´å‹å€¼æˆ–æµ®ç‚¹ç±»å‹å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; tounmber(<span class="string">&quot; -3 &quot;</span>)			<span class="comment">-- -3</span></span><br><span class="line">&gt; tounmber(<span class="string">&quot; 10e4 &quot;</span>)		<span class="comment">-- 100000.0</span></span><br><span class="line">&gt; tounmber(<span class="string">&quot; 10e &quot;</span>)         <span class="comment">-- nil (not a valid number)</span></span><br><span class="line">&gt; tounmber(<span class="string">&quot; 0x1.3p - 4&quot;</span>)   <span class="comment">-- 0.07421875</span></span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°tonumberä½¿ç”¨çš„æ˜¯åè¿›åˆ¶ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æŒ‡æ˜ä½¿ç”¨äºŒè¿›åˆ¶åˆ°ä¸‰åå…­è¿›åˆ¶ä¹‹é—´çš„ä»»æ„è¿›åˆ¶ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; tounmber(<span class="string">&quot;100101&quot;</span>, <span class="number">2</span>)			<span class="comment">-- 37</span></span><br><span class="line">&gt; tounmber(<span class="string">&quot;fff&quot;</span> ,<span class="number">16</span>)			<span class="comment">-- 4095</span></span><br><span class="line">&gt; tounmber(<span class="string">&quot;-ZZ&quot;</span>,<span class="number">36</span>)      	<span class="comment">-- -1295</span></span><br><span class="line">&gt; tounmber(<span class="string">&quot;987&quot;</span>,<span class="number">8</span>)   			<span class="comment">-- nli</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æœ€åä¸€è¡Œï¼Œå¯¹äºåˆ¶å®šçš„è¿›åˆ¶è€Œè¨€ï¼Œä¼ å…¥çš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªæ— æ•ˆå€¼ï¼Œå› æ­¤å‡½æ•°tonumberè¿”å›nilã€‚<br>è°ƒç”¨å‡½æ•°tonumberå¯ä»¥å°†æ•°å€¼è½¬æ¢æˆå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">tostring</span>(<span class="number">10</span>) == <span class="string">&quot;10&quot;</span>)   <span class="comment">--true</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°çš„è¿™ç§è½¬æ¢æ€»æ˜¯æœ‰æ•ˆï¼Œä½†æˆ‘ä»¬éœ€è¦è®°ä½ï¼Œä½¿ç”¨è¿™ç§è½¬æ¢æ—¶å¹¶ä¸èƒ½æ§åˆ¶è¾“å‡ºå­—ç¬¦ä¸²çš„æ ¼å¼ã€‚</p>
<h2 id="å­—ç¬¦ä¸²æ ‡å‡†åº“"><a href="#å­—ç¬¦ä¸²æ ‡å‡†åº“" class="headerlink" title="å­—ç¬¦ä¸²æ ‡å‡†åº“"></a>å­—ç¬¦ä¸²æ ‡å‡†åº“</h2><p>Luaè¯­è¨€è§£é‡Šå™¨æœ¬èº«å¤„ç†å­—ç¬¦ä¸²çš„åŠŸèƒ½æ˜¯ååˆ†æœ‰é™çš„ã€‚ä¸€ä¸ªç¨‹åºèƒ½å¤Ÿåˆ›å»ºå­—ç¬¦ä¸²ã€è¿æ¥å­—ç¬¦ä¸²ã€æ¯”è¾ƒå­—ç¬¦ä¸²å’Œè·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä½†æ˜¯ï¼Œå®ƒå¹¶ä¸èƒ½æå–å­—ç¬¦ä¸²çš„å­ä¸²æˆ–æ£€è§†å­—ç¬¦ä¸²çš„å†…å®¹ã€‚Luaè¯­è¨€å¤„ç†å­—ç¬¦ä¸²çš„å®Œæ•´èƒ½åŠ›æ¥è‡ªå…¶å­—ç¬¦ä¸²æ ‡å‡†åº“ã€‚<br>å­—ç¬¦ä¸²æ ‡å‡†åº“ä¸­çš„ä¸€äº›å‡½æ•°éå¸¸ç®€å•ï¼šå‡½æ•°string.len(s)è¿”å›å­—ç¬¦ä¸²sçš„é•¿åº¦ï¼Œç­‰ä»·äº#sã€‚å‡½æ•°string.rep(s,n)è¿”å›å°†å­—ç¬¦ä¸²sé‡å¤néçš„ç»“æœã€‚å¯ä»¥é€šè¿‡è°ƒç”¨string.rep(â€œaâ€,$2^{20}$)åˆ›å»ºä¸€ä¸ª1MBå¤§å°çš„å­—ç¬¦ä¸²ã€‚å‡½æ•°string.reverseç”¨äºå­—ç¬¦ä¸²ç¿»è½¬ã€‚å‡½æ•°string.lower(s)è¿”å›ä¸€ä»½sçš„å‰¯æœ¬ï¼Œå…¶ä¸­æ‰€æœ‰çš„å¤§å†™å­—æ¯éƒ½è¢«è½¬æ¢æˆå°å†™å­—æ¯ï¼Œè€Œå…¶ä»–å­—ç¬¦åˆ™ä¿æŒä¸å˜ã€‚å‡½æ•°string.upperä¸ä¹‹ç›¸åï¼Œè¯¥å‡½æ•°ä¼šå°†å°å†™å­—æ¯è½¬æ¢æˆå¤§å†™å­—æ¯ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">rep</span>(<span class="string">&quot;abc&quot;</span>,<span class="number">3</span>)			<span class="comment">-- æ¸¸æˆå¼€å‘abcabc</span></span><br><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">reverse</span>(<span class="string">&quot;A Long Line!&quot;</span>)	<span class="comment">-- !eniL gnoL A</span></span><br><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">lower</span>(<span class="string">&quot;A Long Line!&quot;</span>)		<span class="comment">-- a long line!</span></span><br><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">upper</span>(<span class="string">&quot;A Long Line!&quot;</span>)		<span class="comment">-- A LONG LINE!</span></span><br></pre></td></tr></table></figure>
<p>ä½œä¸ºä¸€ç§å…¸å‹çš„åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç åœ¨å¿½ç•¥å¤§å°å†™å·®å¼‚çš„åŸåˆ™ä¸‹æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span>.<span class="built_in">lower</span>(a) &lt; <span class="built_in">string</span>.<span class="built_in">lower</span>(b)</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°string.sub(s,i,j)ä»å­—ç¬¦ä¸²sä¸­æå–ç¬¬iä¸ªåˆ°ç¬¬jä¸ªå­—ç¬¦ã€‚è¯¥å‡½æ•°ä¹Ÿæ”¯æŒè´Ÿæ•°ç´¢å¼•ï¼Œè´Ÿæ•°ç´¢å¼•ä»å­—ç¬¦ä¸²çš„ç»“å°¾å¼€å§‹è®¡æ•°ï¼šç´¢å¼•-1ä»£è¡¨å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œç´¢å¼•-2ä»£è¡¨å€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œä¾æ­¤ç±»æ¨ã€‚è¿™æ ·ï¼Œå¯¹å­—ç¬¦ä¸²sè°ƒç”¨å‡½æ•°string.sub(s,1,j)å¾—åˆ°çš„æ˜¯å­—ç¬¦ä¸²sä¸­é•¿åº¦ä¸ºjçš„å‰ç¼€ï¼Œè°ƒç”¨string.sub(s,j,-1)å¾—åˆ°çš„æ˜¯å­—ç¬¦ä¸²sä»ç¬¬jä¸ªå­—ç¬¦å¼€å§‹çš„åç¼€ï¼Œè°ƒç”¨string.sub(s,2,-2)è¿”å›çš„æ˜¯å»æ‰å­—ç¬¦ä¸²sä¸­ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­—ç¬¦çš„ç»“æœã€‚<br>è¯·æ³¨æ„ï¼ŒLuaè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ã€‚å’ŒLuaè¯­è¨€ä¸­çš„æ‰€æœ‰å…¶ä»–å‡½æ•°ä¸€æ ·ï¼Œå‡½æ•°string.subä¸ä¼šæ”¹å˜åŸæœ‰å­—ç¬¦ä¸²çš„å€¼ï¼Œå®ƒåªä¼šè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ã€‚ä¸€ç§å¸¸è§çš„è¯¯è§£æ˜¯ä»¥ä¸ºstring.sub(s,2,-2)è¿”å›çš„æ˜¯ä¿®æ”¹åçš„sã€‚å¦‚æœéœ€è¦ä¿®æ”¹åŸå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå¿…é¡»æŠŠå¿ƒçš„å€¼èµ‹å€¼ç»™å®ƒï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="built_in">string</span>.<span class="built_in">sub</span>(s,<span class="number">2</span>,<span class="number">-2</span>)</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°string.char å’Œstring.byteç”¨äºè½¬æ¢å­—ç¬¦ä¸²åŠå…¶å†…éƒ¨æ•°å€¼è¡¨ç¤ºã€‚å‡½æ•°string.charæ¥æ”¶é›¶ä¸ªæˆ–å¤šä¸ªè¯ä¹¦ä½œä¸ºå‚æ•°ï¼Œç„¶åå°†æ¯ä¸ªæ•´æ•°è½¬æ¢æˆå¯¹åº”çš„å­—ç¬¦ï¼Œæœ€åè¿”å›ç”±è¿™äº›å­—ç¬¦è¿æ¥è€Œæˆçš„å­—ç¬¦ä¸²ã€‚å‡½æ•°string.byte(s,i)è¿”å›å­—ç¬¦ä¸²sä¸­ç¬¬i ä¸ªå­—ç¬¦çš„å†…éƒ¨æ•°å€¼è¡¨ç¤ºï¼Œè¯¥å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ã€‚è°ƒç”¨string.byte(s)è¿”å›å­—ç¬¦ä¸²sä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦çš„å†…éƒ¨æ•°å€¼è¡¨ç¤ºã€‚åœ¨ä¸‹é¢ä¾‹å­ä¸­ï¼Œå‡å®šå­—ç¬¦ä¸²æ˜¯ç”¨ASCIIè¡¨ç¤ºçš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">char</span>(<span class="number">97</span>))			<span class="comment">-- a</span></span><br><span class="line">i = <span class="number">99</span>; <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">char</span>(i,i+<span class="number">7</span>,i+<span class="number">2</span>))		<span class="comment">-- cde</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;abc&quot;</span>))			<span class="comment">-- 97</span></span><br><span class="line">pring(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;abc&quot;</span> , <span class="number">2</span>))		<span class="comment">-- 98</span></span><br><span class="line">pring(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;abc&quot;</span> , <span class="number">-1</span>))		<span class="comment">-- 99</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æœ€åä¸€è¡Œä¸­ï¼Œä½¿ç”¨è´Ÿæ•°ç´¢å¼•æ¥è®¿é—®å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦ã€‚<br>è°ƒç”¨string.byte(s,i,j)è¿”å›ç´¢å¼•iåˆ°jä¹‹é—´çš„æ‰€æœ‰å­—ç¬¦çš„æ•°å­—è¡¨ç¤ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;abc&quot;</span>,<span class="number">1</span>,<span class="number">2</span>)     <span class="comment">-- 97 98</span></span><br></pre></td></tr></table></figure>
<p>ä¸€ç§å¸¸è§çš„å†™æ³•æ˜¯{string.byte(s,1,-1)}ï¼Œè¯¥è¡¨è¾¾å¼ä¼šåˆ›å»ºä¸€ä¸ªç”±å­—ç¬¦ä¸²sä¸­çš„æ‰€æœ‰å­—ç¬¦ä»£ç ç»„æˆçš„è¡¨ã€‚<br>å‡½æ•°string.formatæ˜¯ç”¨äºè¿›è¡Œå­—ç¬¦ä¸²æ ¼å¼åŒ–å’Œå°†æ•°å€¼è¾“å‡ºä¸ºå­—ç¬¦ä¸²çš„å¼ºå¤§å·¥å…·ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå‚æ•°çš„å‰¯æœ¬ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªæŒ‡ç¤ºç¬¦éƒ½ä¼šè¢«æ›¿æ¢ä¸ºä½¿ç”¨å¯¹åº”æ ¼å¼åŒ–åçš„å¯¹åº”å‚æ•°ã€‚æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­çš„æŒ‡ç¤ºç¬¦ä¸Cè¯­è¨€ä¸­å‡½æ•°printfçš„è§„åˆ™ç±»ä¼¼ï¼Œä¸€ä¸ªæŒ‡ç¤ºç¬¦ç”±ä¸€ä¸ªç™¾åˆ†å·å’Œä¸€ä¸ªä»£è¡¨æ ¼å¼åŒ–æ–¹å¼çš„å­—æ¯ç»„æˆï¼šdä»£è¡¨ä¸€ä¸ªåè¿›åˆ¶æ•´æ•°ã€xä»£è¡¨ä¸€ä¸ªåå…­è¿›åˆ¶æ•´æ•°ã€fä»£è¡¨ä¸€ä¸ªæµ®ç‚¹æ•°ã€sä»£è¡¨å­—ç¬¦ä¸²ç­‰ç­‰ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;x = %d y = %d&quot;</span>,<span class="number">10</span> ,<span class="number">20</span>)			<span class="comment">-- x = 10 y = 20</span></span><br><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;x = %x&quot;</span>, <span class="number">200</span>)					<span class="comment">-- x = c8</span></span><br><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;x = 0x%x&quot;</span>, <span class="number">200</span>)				<span class="comment">-- x = 0xC8</span></span><br><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;x = %f&quot;</span>, <span class="number">200</span>)					<span class="comment">-- x = 200.000000</span></span><br><span class="line">&gt; tag, title = <span class="string">&quot;h1&quot;</span>, <span class="string">&quot;a title&quot;</span></span><br><span class="line">&gt; <span class="built_in">string</span>.foramt(<span class="string">&quot;&lt;%s&gt;%s&lt;/%s&gt;&quot;</span>,tag,title,tag)	<span class="comment">-- &lt;h1&gt; a title&lt;/h1&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ç™¾åˆ†å·å’Œå­—æ¯ä¹‹é—´å¯ä»¥åŒ…å«ç”¨äºæ§åˆ¶æ ¼å¼ç»†èŠ‚çš„å…¶ä»–é€‰é¡¹ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªæµ®ç‚¹æ•°ä¸­å°æ•°çš„ä½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.foramt(<span class="string">&quot;pi = %.4f&quot;</span>, <span class="built_in">math</span>.<span class="built_in">pi</span>))			<span class="comment">-- pi = 3.1416</span></span><br><span class="line">d = <span class="number">5</span>; m = <span class="number">11</span>; y = <span class="number">1990</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%02d/%02d/%04d&quot;</span>, d, m, y))		<span class="comment">-- 05/11/1990</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šä¾‹ä¸­ï¼Œ%.4fè¡¨ç¤ºå°æ•°ç‚¹åä¿ç•™4ä½å°æ•°ï¼›%02dè¡¨ç¤ºä¸€ä¸ªåè¿›åˆ¶æ•°è‡³å°‘ç”±ä¸¤ä¸ªæ•°å­—ç»„æˆï¼Œä¸è¶³ä¸¤ä¸ªæ•°å­—çš„ç”¨0è¡¥é½ï¼Œè€Œ%2dåˆ™è¡¨ç¤ºç”¨ç©ºæ ¼æ¥è¡¥é½ã€‚å…³äºè¿™äº›æŒ‡ç¤ºç¬¦çš„å®Œæ•´æè¿°å¯ä»¥å‚è€ƒCè¯­è¨€printfå‡½æ•°çš„ç›¸å…³æ–‡æ¡£ã€‚<br>å¯ä»¥ä½¿ç”¨å†’å·æ“ä½œç¬¦åƒè°ƒç”¨å­—ç¬¦ä¸²çš„ä¸€ä¸ªæ–¹æ³•é‚£æ ·è°ƒç”¨å­—ç¬¦ä¸²ä¸­æ ‡å‡†åº“ä¸­çš„æ‰€æœ‰å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œstring.sub(s,i,j)å¯ä»¥é‡å†™æˆs:sub(i,j)ï¼Œstring.upper(s)å¯ä»¥é‡å†™æˆs:supper()ã€‚<br>å­—ç¬¦ä¸²æ ‡å‡†åº“è¿˜åŒ…æ‹¬äº†å‡ ä¸ªåŸºäºæ¨¡å¼åŒ¹é…çš„å‡½æ•°ã€‚å‡½æ•°string.findç”¨äºåœ¨æŒ‡å®šçš„å­—ç¬¦ä¸²ä¸­è¿›è¡Œæ¨¡å¼æœç´¢ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;hello world&quot;</span> , <span class="string">&quot;wor&quot;</span>)		<span class="comment">-- 7 9</span></span><br><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;hello world&quot;</span> , <span class="string">&quot;war&quot;</span>)		<span class="comment">-- nil</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¯¥å‡½æ•°åœ¨æŒ‡å®šçš„å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°äº†åŒ¹é…çš„æ¨¡å¼ï¼Œåˆ™è¿”å›æ¨¡å¼çš„å¼€å§‹å’Œç»“æŸä½ç½®ï¼Œå¦åˆ™è¿”å›nilã€‚å‡½æ•°string.gsub(Global SUBstitution)åˆ™æŠŠæ‰€æœ‰åŒ¹é…çš„æ¨¡å¼ç”¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²æ›¿æ¢ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;hello world&quot;</span>, <span class="string">&quot;l&quot;</span> , <span class="string">&quot;.&quot;</span>)			<span class="comment">-- he..o wor.d 3</span></span><br><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;hello world&quot;</span>, <span class="string">&quot;ll&quot;</span> , <span class="string">&quot;..&quot;</span>)       <span class="comment">-- he..o world 1</span></span><br><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;hello world&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;.&quot;</span>)			<span class="comment">-- hello world 0</span></span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°è¿˜ä¼šåœ¨ç¬¬äºŒä¸ªè¿”å›å€¼ä¸­è¿”å›å‘ç”Ÿæ›¿æ¢çš„æ¬¡æ•°ã€‚</p>
<h2 id="Unicodeç¼–ç "><a href="#Unicodeç¼–ç " class="headerlink" title="Unicodeç¼–ç "></a>Unicodeç¼–ç </h2><p>UTF-8æ˜¯Webç¯å¢ƒä¸­ç”¨äºUnicodeçš„ä¸»è¦ç¼–ç ä¹‹ä¸€ã€‚ç”±äºUTF-8ç¼–ç å¨±ASCIIç¼–ç éƒ¨åˆ†å…¼å®¹ï¼Œæ‰€ä»¥UTF-8å¯¹äºLuaæ¥è¯´æ˜¯ä¸€ç§ç†æƒ³çš„ç¼–ç æ–¹å¼ã€‚è¿™ç§å…¼å®¹æ€§ä¿è¯äº†ç”¨äºASCIIå­—ç¬¦ä¸²çš„ä¸€äº›å­—ç¬¦æ“ä½œæŠ€å·§æ— é¡»ä¿®æ”¹å°±å¯ä»¥ç”¨äºUTF-8å­—ç¬¦ä¸²ã€‚<br>UTF-8ä½¿ç”¨å˜é•¿çš„å¤šä¸ªå­—èŠ‚æ¥ç¼–ç ä¸€ä¸ªUnicodeå­—ç¬¦ã€‚ä¾‹å¦‚ï¼ŒUTF-8ç¼–ç ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚çš„65æ¥ä»£è¡¨Aï¼Œä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚çš„215-144ä»£è¡¨å¸Œä¼¯æ¥è¯­å­—ç¬¦Alephã€‚UTF-8ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºæ‰€æœ‰ASCIIèŒƒå›´å†…çš„å­—ç¬¦ï¼ˆå°äº128ï¼‰ã€‚å¯¹äºå…¶ä»–å­—ç¬¦ï¼Œåˆ™ä½¿ç”¨å­—èŠ‚åºåˆ—è¡¨ç¤ºï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå­—èŠ‚çš„èŒƒå›´æ—¶[194,244]ï¼Œè€Œåç»­çš„å­—èŠ‚èŒƒå›´æ—¶[128,191]ã€‚æ›´å‡†ç¡®åœ°è¯´ï¼Œå¯¹äºä¸¤ä¸ªå­—èŠ‚ç»„æˆçš„åºåˆ—ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„èŒƒå›´æ˜¯[194,223]ï¼›å¯¹äºä¸‰ä¸ªå­—èŠ‚ç»„æˆçš„åºåˆ—æ¥è¯´ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„èŒƒå›´æ˜¯[224,239]ï¼›å¯¹äºå››ä¸ªå­—èŠ‚ç»„æˆçš„åºåˆ—æ¥è¯´ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„èŒƒå›´æ˜¯[240,224]ï¼Œè¿™äº›èŒƒå›´äº’ç›¸ä¹‹é—´å‡ä¸é‡å ã€‚è¿™ç§ç‰¹ç‚¹ä¿è¯äº†ä»»æ„å­—ç¬¦å¯¹åº”çš„å­—èŠ‚åºåˆ—ä¸ä¼šåœ¨å…¶ä»–å­—ç¬¦å¯¹åº”çš„å­—èŠ‚åºåˆ—ä¸­å‡ºç°ã€‚ç‰¹åˆ«åœ°ï¼Œä¸€ä¸ªå°äº128çš„å­—èŠ‚æ°¸è¿œä¸ä¼šåœ¨å¤šå­—èŠ‚åºåˆ—ä¸­ï¼Œå®ƒåªä¼šä»£è¡¨ä¸ä¹‹å¯¹åº”çš„ASCIIå­—ç¬¦ã€‚<br>Luaè¯­è¨€ä¸­çš„ä¸€äº›æœºåˆ¶å¯¹UTF-8å­—ç¬¦ä¸²æ¥è¯´åŒæ ·â€œæœ‰æ•ˆâ€ã€‚ç”±äºLuaè¯­è¨€ä½¿ç”¨8ä¸ªå­—èŠ‚æ¥ç¼–ç å­—ç¬¦ï¼Œæ‰€ä»¥å¯ä»¥åƒæ“ä½œå…¶ä»–å­—ç¬¦ä¸²ä¸€æ ·è¯»å†™å’Œå­˜å‚¨UTF-8å­—ç¬¦ä¸²ã€‚å­—ç¬¦ä¸²å¸¸é‡ä¹Ÿå¯ä»¥åŒ…å«UTF-8æ•°æ®ã€‚å­—ç¬¦ä¸²è¿æ¥UTF-8å­—ç¬¦ä¸²åŒæ ·é€‚ç”¨ã€‚å¯¹å­—ç¬¦ä¸²æ¯”è¾ƒä¼šæŒ‰ç…§Unicodeç¼–ç ä¸­çš„å­—ç¬¦ä»£ç é¡ºåºè¿›è¡Œã€‚<br>Luaè¯­è¨€çš„æ“ä½œç³»ç»Ÿåº“å’Œè¾“å…¥è¾“å‡ºåº“æ˜¯ä¸å¯¹åº”ç³»ç»Ÿä¹‹é—´çš„ä¸»è¦æ¥å£ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯å¦æ”¯æŒUTF-8å–å†³äºå¯¹åº”çš„æ“ä½œç³»ç»Ÿã€‚ä¾‹å¦‚ï¼Œåœ¨Linuxæ“ä½œç³»ç»Ÿä¸‹æ–‡ä»¶åè¦ä½¿ç”¨UTF-8ç¼–ç ï¼Œè€Œåœ¨Windowsæ“ä½œç³»ç»Ÿä¸‹æ–‡ä»¶åä½¿ç”¨UTF-16ç¼–ç ã€‚å› æ­¤ï¼Œå¦‚æœè¦åœ¨Windowsæ“ä½œç³»ç»Ÿä¸­å¤„ç†Unicodeæ–‡ä»¶åï¼Œè¦ä¹ˆä½¿ç”¨é¢å¤–çš„åº“ï¼Œè¦ä¹ˆå°±ä¿®æ”¹Luaè¯­è¨€çš„æ ‡å‡†åº“ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaæ•™ç¨‹ä¹‹Luaæ‰“ä¹±æ•°ç»„æ’åº</title>
    <url>/52859.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">randomTable</span><span class="params">(_table, _num)</span></span> </span><br><span class="line">    <span class="keyword">local</span> _result = &#123;&#125;</span><br><span class="line">    <span class="keyword">local</span> _index = <span class="number">1</span></span><br><span class="line">    <span class="keyword">local</span> _num = _num <span class="keyword">or</span> #_table</span><br><span class="line">    <span class="keyword">while</span> #_table ~= <span class="number">0</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> ran = <span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">0</span>, #_table)</span><br><span class="line">        <span class="keyword">if</span> _table[ran] ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">            _result[_index] = _table[ran]</span><br><span class="line">            <span class="built_in">table</span>.<span class="built_in">remove</span>(_table,ran)</span><br><span class="line">            _index = _index + <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> _index &gt; _num <span class="keyword">then</span> </span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">end</span> </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> _result</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaæ•°æ®æ–‡ä»¶å’Œåºåˆ—åŒ–</title>
    <url>/7981.html</url>
    <content><![CDATA[<p>åœ¨å¤„ç†æ•°æ®æ–‡ä»¶æ—¶ï¼Œå†™æ•°æ®é€šå¸¸æ¯”è¯»æ•°æ®ç®€å•å¾ˆå¤šã€‚å½“å‘ä¸€ä¸ªæ–‡ä»¶ä¸­å†™æ—¶ï¼Œæˆ‘ä»¬æ‹¥æœ‰ç»å¯¹çš„æ§åˆ¶æƒï¼›ä½†æ˜¯ï¼Œå½“ä»ä¸€ä¸ªæ–‡ä»¶ä¸­è¯»æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ä¼šè¯»ä»€ä¹ˆä¸œè¥¿ã€‚ä¸€ä¸ªå¥å£®çš„ç¨‹åºé™¤äº†èƒ½å¤Ÿå¤„ç†ä¸€ä¸ªåˆæ³•æ–‡ä»¶ä¸­æ‰€åŒ…å«çš„æ‰€æœ‰ç±»å‹çš„æ•°æ®å¤–ï¼Œè¿˜åº”è¯¥èƒ½å¤Ÿä¼˜é›…åœ°å¤„ç†é”™è¯¯çš„æ–‡ä»¶ã€‚å› æ­¤ï¼Œç¼–å†™ä¸€ä¸ªå¥å£®çš„å¤„ç†è¾“å…¥çš„ç¨‹åºæ€»æ˜¯æ¯”è¾ƒå›°éš¾çš„ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Luaè¯­è¨€è‡ª1993å¹´å‘å¸ƒä»¥æ¥ï¼Œå…¶ä¸»è¦ç”¨é€”ä¹‹ä¸€å°±æ˜¯æè¿°æ•°æ®ã€‚åœ¨é‚£ä¸ªå¹´ä»£ï¼Œä¸»è¦çš„æ–‡æœ¬æ•°æ®æè¿°è¯­è¨€ä¹‹ä¸€æ˜¯SGMLã€‚å¯¹äºå¾ˆå¤šäººæ¥è¯´ï¼ŒSGMLæ—¢è‡ƒè‚¿åˆå¤æ‚ã€‚åœ¨1998å¹´ï¼Œæœ‰äº›äººå°†å…¶ç®€åŒ–æˆXMLï¼Œä½†ä»¥æˆ‘ä»¬çš„çœ¼å…‰çœ‹ä»ç„¶è‡ƒè‚¿åˆå¤æ‚ã€‚æœ‰äº›äººè·Ÿæˆ‘ä»¬çš„è§‚ç‚¹ä¸€ç›´ï¼Œè¿›è€Œåœ¨2001å¹´å¼€å‘äº†JSONã€‚JSONåŸºäºJavaScriptï¼Œç±»ä¼¼äºä¸€ç§ç²¾ç®€è¿‡çš„Luaè¯­è¨€æ•°æ®æ–‡ä»¶ã€‚ä¸€æ–¹é¢ï¼ŒJSONçš„ä¸€å¤§ä¼˜åŠ¿åœ¨äºå®ƒæ˜¯å›½é™…æ ‡å‡†ï¼ŒåŒ…æ‹¬Luaè¯­è¨€åœ¨å†…çš„å¤šç§è¯­è¨€éƒ½å…·æœ‰æ“ä½œJSONæ–‡ä»¶çš„æ ‡å‡†åº“ã€‚å¦ä¸€æ–¹é¢ï¼ŒLuaè¯­è¨€æ•°æ®æ–‡ä»¶çš„è¯»å–æ›´åŠ å®¹æ˜“å’Œçµæ´»ã€‚<br>ä½¿ç”¨ä¸€é—¨å…¨åŠŸèƒ½çš„ç¼–ç¨‹è¯­è¨€æ¥æè¿°æ•°æ®ç¡®å®éå¸¸çµæ´»ï¼Œä½†ä¹Ÿä¼šå¸¦æ¥ä¸¤ä¸ªé—®é¢˜ã€‚é—®é¢˜ä¹‹ä¸€åœ¨äºå®‰å…¨æ€§ï¼Œè¿™æ˜¯å› ä¸ºâ€œæ•°æ®â€æ–‡ä»¶èƒ½å¤Ÿè‚†æ„åœ°åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­è¿è¡Œã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ²™ç›’ä¸­è¿è¡Œç¨‹åºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br>å¦ä¸€ä¸ªé—®é¢˜æ˜¯æ€§èƒ½é—®é¢˜ã€‚Luaè¯­è¨€ä¸ä»…è¿è¡Œå¾—å¿«ï¼Œç¼–è¯‘ä¹Ÿå¾ˆå¿«ã€‚ä¾‹å¦‚ï¼Œåœ¨ç¬”è€…çš„æ–°æœºå™¨ä¸Šï¼ŒLua5.3å¯ä»¥åœ¨4ç§’ä»¥å†…ï¼Œå ç”¨240MBå†…å­˜ï¼Œå®Œæˆ1000ä¸‡æ¡èµ‹å€¼è¯­å¥çš„è¯»å–ã€ç¼–è¯‘å’Œè¿è¡Œã€‚ä½œä¸ºå¯¹æ¯”ï¼ŒPerl5.18éœ€è¦21ç§’ã€å ç”¨6GBå†…å­˜ï¼ŒPython2.7å’ŒPython3.4ç›´æ¥å´©æºƒï¼ŒNode.js0.10.25åœ¨è¿è¡Œ8ç§’åæŠ›å‡ºâ€œå†…å­˜æº¢å‡ºâ€å¼‚å¸¸ï¼ŒRhino1.7åœ¨è¿è¡Œ6åˆ†é’Ÿåä¹ŸæŠ›å‡ºäº†â€œå†…å­˜æº¢å‡ºâ€å¼‚å¸¸ã€‚</p>
<h2 id="æ•°æ®æ–‡ä»¶"><a href="#æ•°æ®æ–‡ä»¶" class="headerlink" title="æ•°æ®æ–‡ä»¶"></a>æ•°æ®æ–‡ä»¶</h2><p>å¯¹äºæ–‡ä»¶æ ¼å¼æ¥è¯´ï¼Œè¡¨æ„é€ å™¨æä¾›äº†ä¸€ç§æœ‰è¶£çš„æ›¿ä»£æ–¹æ³•ã€‚åªéœ€åœ¨å†™å…¥æ•°æ®æ—¶åšä¸€ç‚¹é¢å¤–çš„å·¥ä½œï¼Œå°±èƒ½ä½¿å¾—è¯»æ•°æ®å˜å¾—å®¹æ˜“ã€‚è¿™ç§æŠ€å·§å°±æ˜¯å°†æ•°æ®æ–‡ä»¶å†™æˆLuaä»£ç ï¼Œå½“è¿™äº›ä»£ç è¿è¡Œæ—¶ï¼Œç¨‹åºä¹Ÿå°±æŠŠæ•°æ®é‡å»ºäº†ã€‚ä½¿ç”¨è¡¨æ„é€ å™¨æ—¶ï¼Œè¿™äº›ä»£ç æ®µçœ‹ä¸Šå»ä¼šéå¸¸åƒæ˜¯ä¸€ä¸ªæ™®é€šçš„æ•°æ®æ–‡ä»¶ã€‚<br>ä¸‹é¢é€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥è¿›ä¸€æ­¥å±•ç¤ºå¤„ç†æ•°æ®æ–‡ä»¶çš„æ–¹å¼ã€‚å¦‚æœæ•°æ®æ–‡ä»¶ä½¿ç”¨çš„æ˜¯è¯¸å¦‚CSVæˆ–XMLç­‰é¢„å…ˆå®šä¹‰å¥½çš„æ ¼å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½å¤Ÿé€‰æ‹©çš„æ–¹æ³•ä¸å¤šã€‚ä¸è¿‡ï¼Œå¦‚æœå¤„ç†çš„æ˜¯å¤„äºè‡ªèº«éœ€æ±‚è€Œåˆ›å»ºçš„æ•°æ®æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†Luaè¯­è¨€çš„æ„é€ å™¨ç”¨äºæ ¼å¼å®šä¹‰ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬æŠŠæ¯æ¡æ•°æ®è®°å½•è¡¨ç¤ºä¸ºä¸€ä¸ªLuaæ„é€ å™¨ã€‚è¿™æ ·ï¼ŒåŸæ¥ç±»ä¼¼</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Donald E. Knuth,Literate Programming,CSLI,<span class="number">1992</span></span><br><span class="line">Jon Bentley,More Programming Pearls, Addison-Wesley,<span class="number">1990</span></span><br></pre></td></tr></table></figure>
<p>çš„æ•°æ®æ–‡ä»¶å°±å¯ä»¥æ”¹ä¸ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Entry&#123;<span class="string">&quot;Donald E. Knuth&quot;</span>,<span class="string">&quot;Literate Programming&quot;</span>,<span class="string">&quot;CSLI&quot;</span>,<span class="number">1992</span>&#125;</span><br><span class="line">Entry&#123;<span class="string">&quot;Jon Bentley&quot;</span>,<span class="string">&quot;More Programming Pearls&quot;</span>,<span class="string">&quot;Addison-Wesley&quot;</span>,<span class="number">1990</span>&#125;</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼ŒEntry{code}ä¸Entry({code})æ˜¯ç›¸åŒçš„ï¼Œåè€…ä»¥è¡¨ä½œä¸ºå”¯ä¸€çš„å‚æ•°æ¥è°ƒç”¨å‡½æ•°Entryã€‚å› æ­¤ï¼Œä¸Šé¢è¿™æ®µæ•°æ®ä¹Ÿæ˜¯ä¸€ä¸ªLuaç¨‹åºã€‚å½“éœ€è¦è¯»å–è¯¥æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªåˆæ³•çš„Entryï¼Œç„¶åè¿è¡Œè¿™ä¸ªç¨‹åºå³å¯ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ç”¨äºè®¡ç®—æŸä¸ªæ•°æ®æ–‡ä»¶ä¸­æ•°æ®æ¡ç›®çš„ä¸ªæ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> count = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Entry</span><span class="params">()</span></span> count = count + <span class="number">1</span> <span class="keyword">end</span></span><br><span class="line"><span class="built_in">dofile</span>(<span class="string">&quot;data&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;number of entries:&quot;</span> .. count)</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„ç¨‹åºè·å–æŸä¸ªæ•°æ®æ–‡ä»¶ä¸­æ‰€æœ‰ä½œè€…çš„å§“åï¼Œç„¶åæ‰“å°å‡ºè¿™äº›å§“åï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> authors = &#123;&#125;		<span class="comment">-- ä¿å­˜ä½œè€…å§“åçš„é›†åˆ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Entry</span> <span class="params">(b)</span></span> authors[b[<span class="number">1</span>]] = <span class="literal">true</span> <span class="keyword">end</span></span><br><span class="line"><span class="built_in">dofile</span>(<span class="string">&quot;data&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> <span class="built_in">pairs</span>(authors) <span class="keyword">do</span> <span class="built_in">print</span>(name) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œä¸Šè¿°çš„ä»£ç æ®µä¸­ä½¿ç”¨äº†äº‹ä»¶é©±åŠ¨çš„æ–¹å¼ï¼šå‡½æ•°Entryä½œä¸ºä¸€ä¸ªå›è°ƒå‡½æ•°ä¼šåœ¨å‡½æ•°dofileå¤„ç†æ•°æ®æ–‡ä»¶ä¸­çš„æ¯ä¸ªæ¡ç›®æ—¶è¢«è°ƒç”¨ã€‚<br>å½“æ–‡ä»¶çš„å¤§å°å¹¶ä¸æ˜¯å¤ªå¤§æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é”®å€¼å¯¹çš„è¡¨ç¤ºæ–¹æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Entry&#123;</span><br><span class="line">	author = <span class="string">&quot;Donald E. Knuth&quot;</span>,</span><br><span class="line">	title = <span class="string">&quot;Literate Programming&quot;</span>,</span><br><span class="line">	publisher = <span class="string">&quot;CSLI&quot;</span>,</span><br><span class="line">	year = <span class="number">1992</span></span><br><span class="line">&#125;</span><br><span class="line">Entry&#123;</span><br><span class="line">	author = <span class="string">&quot;Jon Bentley&quot;</span>,</span><br><span class="line">	title = <span class="string">&quot;More Programming Pearls&quot;</span>,</span><br><span class="line">	year = <span class="number">1990</span>,</span><br><span class="line">	pyblisher = <span class="string">&quot;Addison-Wesley&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ ¼å¼æ˜¯æ‰€è°“çš„è‡ªæè¿°æ•°æ®æ ¼å¼ï¼Œå…¶ä¸­æ•°æ®çš„æ¯ä¸ªå­—æ®µéƒ½å…·æœ‰ä¸€ä¸ªå¯¹åº”å…¶å«ä¹‰çš„ç®€ç•¥æè¿°ã€‚è‡ªæè¿°æ•°æ®æ¯”CSVæˆ–å…¶ä»–å‹ç¼©æ ¼å¼çš„å¯è¯»æ€§æ›´å¥½ï¼›åŒæ—¶ï¼Œå½“éœ€è¦ä¿®æ”¹æ—¶ï¼Œè‡ªæè¿°æ•°æ®ä¹Ÿå·²äºæ‰‹å·¥ç¼–è¾‘ï¼›æ­¤å¤–ï¼Œè‡ªæè¿°æ•°æ®è¿˜å…è®¸æˆ‘ä»¬åœ¨ä¸æ”¹å˜æ•°æ®æ–‡ä»¶çš„æƒ…å†µä¸‹å¯¹åŸºæœ¬æ•°æ®æ ¼å¼è¿›è¡Œç»†å¾®çš„ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬æƒ³è¦å¢åŠ ä¸€ä¸ªæ–°å­—æ®µæ—¶ï¼Œåªéœ€è¦å¯¹è¯»å–æ•°æ®æ–‡ä»¶çš„ç¨‹åºç¨åŠ ä¿®æ”¹ï¼Œä½¿å…¶åœ¨æ–°å­—æ®µä¸å­˜åœ¨æ—¶ä½¿ç”¨é»˜è®¤å€¼ã€‚<br>æ­¤æ—¶ï¼Œå­—æ®µçš„æ¬¡åºå°±æ— å…³ç´§è¦äº†ã€‚å³ä½¿æœ‰äº›è®°å½•æ²¡æœ‰ä½œè€…å­—æ®µï¼Œæˆ‘ä»¬ä¹Ÿåªéœ€è¦ä¿®æ”¹Entryå‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Entry</span><span class="params">(b)</span></span></span><br><span class="line">	authors[b.author <span class="keyword">or</span> <span class="string">&quot;unknown&quot;</span>] = <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h2><p>æˆ‘ä»¬å¸¸å¸¸éœ€è¦å°†æŸäº›æ•°æ®åºåˆ—åŒ–&#x2F;ä¸²è¡ŒåŒ–ï¼Œå³å°†æ•°æ®è½¬æ¢ä¸ºå­—èŠ‚æµåŠ¨æˆ–å­—ç¬¦æµï¼Œä»¥ä¾¿å°†å…¶å­˜å‚¨åˆ°æ–‡ä»¶ä¸­æˆ–è€…é€šè¿‡ç½‘ç»œä¼ è¾“ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†åºåˆ—åŒ–åçš„æ•°æ®è¡¨ç¤ºä¸ºLuaä»£ç ï¼Œå½“è¿™äº›ä»£ç è¿è¡Œæ—¶ï¼Œè¢«åºåˆ—åŒ–çš„æ•°æ®å°±å¯ä»¥åœ¨è¯»å–ç¨‹åºä¸­å¾—åˆ°é‡å»ºã€‚<br>é€šå¸¸ï¼Œå¦‚æœæƒ³è¦æ¢å¤ä¸€ä¸ªå…¨å±€å˜é‡çš„å€¼ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šä½¿ç”¨å½¢å¦‚varname &#x3D; expè¿™æ ·çš„ä»£ç ã€‚å…¶ä¸­ï¼Œexpæ˜¯ç”¨äºåˆ›å»ºè¿™ä¸ªå€¼çš„Luaä»£ç ï¼Œè€Œvarnameæ˜¯ä¸€ä¸ªç®€å•çš„æ ‡è¯†ç¬¦ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å­¦ä¹ å¦‚ä½•ç¼–å†™åˆ›å»ºå€¼çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªæ•°å€¼ç±»å‹è€Œè¨€ï¼Œå¯ä»¥ç®€å•åœ°ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">serialize</span><span class="params">(o)</span></span></span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">type</span>(o) == <span class="string">&quot;number&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">tostring</span>(o))</span><br><span class="line">	<span class="keyword">else</span> other cases</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œç”¨åè¿›åˆ¶æ ¼å¼ä¿å­˜æµ®ç‚¹æ•°å¯èƒ½æŸå¤±ç²¾åº¦ã€‚æ­¤æ—¶ï¼Œå¯ä»¥åˆ©ç”¨åå…­è¿›åˆ¶æ ¼å¼æ¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨æ ¼å¼â€%aâ€å¯ä»¥ä¿ç•™è¢«è¯»å–æµ®ç‚¹å‹æ ‘æ´é¢åŸå§‹ç²¾åº¦ã€‚æ­¤å¤–ï¼Œç”±äºä»Lua5.3å¼€å§‹å°±å¯¹æµ®ç‚¹ç±»å‹å’Œæ•´æ•°ç±»å‹è¿›è¡Œäº†åŒºåˆ†ï¼Œå› æ­¤é€šè¿‡ä½¿ç”¨æ­£ç¡®çš„å­ç±»å‹å°±èƒ½å¤Ÿæ¢å¤å®ƒä»¬çš„å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> fmt = &#123;integer = <span class="string">&quot;%d&quot;</span>,float = <span class="string">&quot;%a&quot;</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">serialize</span><span class="params">(o)</span></span></span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">type</span>(o) == <span class="string">&quot;number&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(fmt[<span class="built_in">math</span>.<span class="built_in">type</span>(o)],o))</span><br><span class="line">	<span class="keyword">else</span> other cases</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå­—ç¬¦ä¸²ç±»å‹çš„å€¼ï¼Œæœ€ç®€å•çš„åºåˆ—åŒ–æ–¹å¼å½¢å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">type</span>(o) == <span class="string">&quot;string&quot;</span> <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;&#x27;&quot;</span>,o,<span class="string">&quot;&#x27;&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œå­—ç¬¦ä¸²åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œé‚£ä¹ˆç»“æœå°±ä¼šæ˜¯é”™è¯¯çš„ã€‚<br>ä¹Ÿè®¸æœ‰äººä¼šå‘Šè¯‰è¯»è€…é€šè¿‡ä¿®æ”¹å¼•å·æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">type</span>(o) == <span class="string">&quot;string&quot;</span> <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;[[&quot;</span>,o,<span class="string">&quot;]]&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼Œè¦å½“å¿ƒä»£ç è¯¸å¦‚ï¼å¦‚æœæŸä¸ªæ¶æ„ç”¨æˆ·è®¾æ³•ä½¿è¯»è€…çš„ç¨‹åºä¿å­˜äº†å½¢å¦‚<code>&quot;]]..os.execute(&#39;rm *&#39;)..[[&quot;</code>è¿™æ ·çš„å†…å®¹ï¼Œé‚£ä¹ˆæœ€ç»ˆè¢«ä¿å­˜ä¸‹æ¥çš„ä»£ç å°†å˜æˆï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">varname = <span class="string">[[]]</span> .. <span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&#x27;rm *&#x27;</span>)..<span class="string">[[]]</span></span><br></pre></td></tr></table></figure>
<p>ä¸€æ—¦è¿™æ ·çš„â€œæ•°æ®â€è¢«åŠ è½½ï¼Œå°±ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„åæœã€‚<br>æˆ‘ä¹ˆå¯ä»¥ä½¿ç”¨ä¸€ç§å®‰å…¨çš„æ–¹æ³•æ¥æ‹¬ä½ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£å°±æ˜¯ä½¿ç”¨å‡½æ•°string.formatçš„â€%qâ€é€‰é¡¹ï¼Œè¯¥é€‰é¡¹è¢«è®¾è®¡ä¸ºä¸€ç§èƒ½å¤Ÿè®©Luaè¯­è¨€å®‰å…¨åœ°ååºåˆ—åŒ–å­—ç¬¦ä¸²çš„æ–¹å¼æ¥åºåˆ—åŒ–å­—ç¬¦ä¸²ï¼Œå®ƒä½¿ç”¨åŒå¼•å·æ‹¬ä½å­—ç¬¦ä¸²å¹¶æ­£ç¡®åœ°è½¬ä¹‰å…¶ä¸­çš„åŒå¼•å·å’Œæ¢è¡Œç¬¦ç­‰å…¶ä»–å­—ç¬¦ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&#x27;a &quot;problematic&quot; \\ string&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>,a))		<span class="comment">--&quot;a \&quot;problematic\&quot; \\ string&quot;</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä½¿ç”¨è¿™ä¸ªç‰¹è¡Œï¼Œå‡½æ•°serializeå°†å˜ä¸ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">serialize</span><span class="params">(o)</span></span></span><br><span class="line">	it <span class="built_in">type</span>(o) == <span class="string">&quot;number&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(fmt[<span class="built_in">math</span>.<span class="built_in">type</span>(o)],o))</span><br><span class="line">	<span class="keyword">elseif</span> <span class="built_in">type</span>(o) == <span class="string">&quot;string&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>,o))</span><br><span class="line">	<span class="keyword">else</span> other cases</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Lua5.3.3å¯¹æ ¼å¼é€‰é¡¹â€%qâ€è¿›è¡Œäº†æ‰©å±•ï¼Œä½¿å…¶ä¹Ÿå¯ä»¥ç”¨äºæ•°å€¼ã€nilå’ŒBooleanç±»å‹ï¼Œè¿›è€Œä½¿å®ƒä»¬èƒ½å¤Ÿæ­£ç¡®åœ°è¢«åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å› æ­¤ï¼Œä»Lua5.3.3å¼€å§‹ï¼Œæˆ‘ä»¬è¿˜èƒ½å¤Ÿå†å¯¹å‡½æ•°serializeè¿›è¡Œè¿›ä¸€æ­¥çš„ç®€åŒ–å’Œå‘å±•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">serialize</span><span class="params">(o)</span></span></span><br><span class="line">	<span class="keyword">local</span> t = <span class="built_in">type</span>(o)</span><br><span class="line">	<span class="keyword">if</span> t == <span class="string">&quot;number&quot;</span> <span class="keyword">or</span> t == <span class="string">&quot;string&quot;</span> <span class="keyword">or</span> t == <span class="string">&quot;boolean&quot;</span> <span class="keyword">or</span> t == <span class="string">&quot;nil&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>,o))</span><br><span class="line">	<span class="keyword">else</span> other cases</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ç§ä¿å­˜å­—ç¬¦ä¸²çš„æ–¹å¼æ˜¯ä½¿ç”¨ä¸»è¦ç”¨äºé•¿å­—ç¬¦ä¸²çš„<code>[=[...]=]</code>ã€‚ä¸è¿‡ï¼Œè¿™ç§æ–¹å¼ä¸»è¦æ˜¯ä¸ºä¸ç”¨æ”¹å˜å­—ç¬¦ä¸²å¸¸é‡çš„æ‰‹å†™ä»£ç æä¾›çš„ã€‚åœ¨è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œåƒå‡½æ•°string.formaté‚£æ ·ä½¿ç”¨â€%qâ€é€‰é¡¹æ¥è½¬ä¹‰æœ‰é—®é¢˜çš„å­—ç¬¦æ›´åŠ ç®€å•ã€‚<br>å°½ç®¡å¦‚æ­¤ï¼Œå¦‚æœè¦åœ¨è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ä¸­ä½¿ç”¨<code>[=[...]=]</code>ï¼Œé‚£ä¹ˆè¿˜å¿…é¡»æ³¨æ„å‡ ä¸ªç»†èŠ‚ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»é€‰æ‹©æ°å½“æ•°é‡çš„ç­‰å·ï¼Œè¿™ä¸ªæ°å½“çš„æ•°é‡åº”æ¯”åŸå­—ç¬¦ä¸²ä¸­å‡ºç°çš„æœ€é•¿ç­‰å·åºåˆ—çš„é•¿åº¦å¤§1.ç”±äºåœ¨å­—ç¬¦ä¸²ä¸­å‡ºç°é•¿ç­‰å·åºåˆ—å¾ˆå¸¸è§ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥æŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨ä»¥æ–¹æ‹¬å·å¼€å¤´çš„ç­‰å·åºåˆ—ä¸Šã€‚å…¶æ¬¡ï¼ŒLuaè¯­è¨€æ€»æ˜¯ä¼šå¿½ç•¥é•¿å­—ç¬¦ä¸²å¼€å¤´çš„æ¢è¡Œç¬¦ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡ä¸€ç§ç®€å•æ–¹å¼ï¼Œå³æ€»æ˜¯åœ¨å­—ç¬¦ä¸²å¼€å¤´å¤šå¢åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ï¼š å¼•ç”¨ä»»æ„å­—ç¬¦ä¸²å¸¸é‡</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quote</span><span class="params">(s)</span></span></span><br><span class="line">	<span class="comment">--å¯»æ‰¾æœ€é•¿ç­‰å·åºåˆ—çš„é•¿åº¦</span></span><br><span class="line">	<span class="keyword">local</span> n = <span class="number">-1</span></span><br><span class="line">	<span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(s,<span class="string">&quot;]=*&quot;</span>) <span class="keyword">do</span></span><br><span class="line">		n = <span class="built_in">math</span>.<span class="built_in">max</span>(n,#w - <span class="number">1</span>)     <span class="comment">-- -1ç”¨äºç§»é™¤&#x27;]&#x27;</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">-- ç”Ÿæˆä¸€ä¸ªå…·æœ‰&#x27;n&#x27;+1ä¸ªç­‰å·çš„å­—ç¬¦ä¸²</span></span><br><span class="line">	<span class="keyword">local</span> eq = <span class="built_in">string</span>.<span class="built_in">rep</span>(<span class="string">&quot;=&quot;</span>,n + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">-- åˆ›å»ºè¢«å¼•èµ·æ¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot; [%s[\n%s]%s &quot;</span> , eq,s,eq)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°å¯ä»¥æ¥æ”¶ä»»æ„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›æŒ‰é•¿å­—ç¬¦ä¸²å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–åçš„ç»“æœã€‚å‡½æ•°gmatchåˆ›å»ºä¸€ä¸ªéå†å­—ç¬¦ä¸²sä¸­æ‰€æœ‰åŒ¹é…æ¨¡å¼â€™]&#x3D;*â€™ä¹‹å¤„çš„è¿­ä»£å™¨ï¼ˆå³å³æ–¹æ‹¬å·åè·Ÿé›¶ä¸ªæˆ–å¤šä¸ªç­‰å·ï¼‰ã€‚åœ¨æ¯ä¸ªåŒ¹é…çš„åœ°æ–¹ï¼Œå¾ªç¯ä¼šç”¨å½“å‰æ‰€é‡åˆ°çš„æœ€å¤§ç­‰å·æ•°é‡æ›´æ–°å˜é‡nã€‚å¾ªç¯ç»“æŸåï¼Œä½¿ç”¨å‡½æ•°string.repé‡å¤ç­‰å·n+1æ¬¡ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆä¸€ä¸ªæ¯”åŸå­—ç¬¦ä¸²ä¸­å‡ºç°çš„æœ€é•¿ç­‰å·åºåˆ—çš„é•¿åº¦å¤§1çš„ç­‰å·åºåˆ—ã€‚æœ€åï¼Œä½¿ç”¨å‡½æ•°strig.formatå°†sæ”¾å…¥ä¸€å¯¹å…·æœ‰æ­£ç¡®æ•°é‡ç­‰å·çš„æ‹¬å·ä¸­ï¼Œå¹¶åœ¨å­—ç¬¦ä¸²sçš„å¼€å¤´æ’å…¥ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚</p>
<h3 id="ä¿å­˜ä¸å¸¦å¾ªç¯çš„è¡¨"><a href="#ä¿å­˜ä¸å¸¦å¾ªç¯çš„è¡¨" class="headerlink" title="ä¿å­˜ä¸å¸¦å¾ªç¯çš„è¡¨"></a>ä¿å­˜ä¸å¸¦å¾ªç¯çš„è¡¨</h3><p>æ¥ä¸‹æ¥ï¼Œæ›´éš¾ä¸€ç‚¹çš„éœ€æ±‚æ˜¯ä¿å­˜è¡¨ã€‚ä¿å­˜è¡¨æœ‰å‡ ç§æ–¹æ³•ï¼Œé€‰ç”¨å“ªç§æ–¹æ³•å–å†³äºå¯¹å…·ä½“è¡¨ç»“æ„çš„å‡è®¾ï¼Œä½†æ²¡æœ‰ä¸€ç§ç®—æ³•ä½¿ç”¨ä¸æ‰€æœ‰çš„æƒ…å†µã€‚å¯¹äºç®€å•çš„è¡¨æ¥è¯´ï¼Œä¸ä»…å¯ä»¥ä½¿ç”¨æ›´ç®€å•çš„ç®—æ³•ï¼Œè€Œä¸”è¾“å‡ºä¹Ÿä¼šæ›´ç®€æ´å’Œæ¸…æ™°ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ï¼šä¸ä½¿ç”¨å¾ªç¯åºåˆ—åŒ–è¡¨</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">serialize</span><span class="params">(o)</span></span></span><br><span class="line">	<span class="keyword">local</span> t = <span class="built_in">type</span>(o)</span><br><span class="line">	<span class="keyword">if</span> t == <span class="string">&quot;number&quot;</span> <span class="keyword">or</span> t == <span class="string">&quot;string&quot;</span> <span class="keyword">or</span> t == <span class="string">&quot;boolean&quot;</span> <span class="keyword">or</span> t == <span class="string">&quot;nil&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>,o))</span><br><span class="line">	<span class="keyword">elseif</span> t == <span class="string">&quot;table&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;&#123;\n&quot;</span>)</span><br><span class="line">			<span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(o) <span class="keyword">do</span></span><br><span class="line">				<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;&quot;</span>,k,<span class="string">&quot; = &quot;</span>)</span><br><span class="line">				serialize(v)</span><br><span class="line">				<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;,\n&quot;</span>)</span><br><span class="line">			<span class="keyword">end</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;&#125;\n&quot;</span>)</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;cannot serialize a &quot;</span> .. <span class="built_in">type</span>(o))</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å°½ç®¡è¿™ä¸ªå‡½æ•°å¾ˆç®€å•ï¼Œä½†å®ƒå´å¯ä»¥åˆç†åœ°æ»¡è¶³éœ€æ±‚ã€‚åªè¦è¡¨ç»“æ„æ˜¯ä¸€æ£µæ ‘ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ç”šè‡³èƒ½å¤„ç†åµŒå¥—çš„è¡¨ã€‚<br>ä¸Šä¾‹ä¸­çš„å‡½æ•°å‡è®¾äº†è¡¨ä¸­çš„æ‰€æœ‰é”®éƒ½æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦ï¼Œå¦‚æœä¸€ä¸ªè¡¨çš„é”®æ˜¯æ•°å­—æˆ–è€…ä¸æ˜¯åˆæ³•çš„Luaæ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰é—®é¢˜ã€‚è§£å†³è¯¥é—®é¢˜çš„ä¸€ç§ç®€å•æ–¹æ³•æ˜¯åƒä¸‹åˆ—ä»£ç ä¸€æ ·å¤„ç†æ¯ä¸ªé”®ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot; [%s] = &quot;</span>,serialize(k)))</span><br></pre></td></tr></table></figure>
<p>ç»è¿‡è¿™æ ·çš„ä¿®æ”¹åï¼Œæˆ‘ä»¬æé«˜äº†è¯¥å‡½æ•°çš„å¥å£®æ€§ï¼Œä½†å´ç‰ºç‰²äº†ç»“æœæ–‡ä»¶çš„ç¾è§‚æ€§ã€‚è€ƒè™‘å¦‚ä¸‹çš„è°ƒç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">serialize&#123;a = <span class="number">12</span>, b = <span class="string">&#x27;Lua&#x27;</span>,key = <span class="string">&#x27;another &quot;one&quot;&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬1ç‰ˆçš„å‡½æ•°serializeä¼šè¾“å‡ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">a = <span class="number">12</span>,</span><br><span class="line">b = <span class="string">&#x27;Lua&#x27;</span></span><br><span class="line">key = <span class="string">&quot;another \&quot;one\&quot;&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ä¹‹å¯¹æ¯”ï¼Œç¬¬2ç‰ˆçš„å‡½æ•°serializeåˆ™ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">[<span class="string">&quot;a&quot;</span>] = <span class="number">12</span>,</span><br><span class="line">[<span class="string">&quot;b&quot;</span>] = <span class="string">&quot;Lua&quot;</span>,</span><br><span class="line">[<span class="string">&quot;key&quot;</span>] = <span class="string">&quot;another \&quot;one\&quot;&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡æµ‹è¯•æ¯ä¸ªé”®æ˜¯å¦éœ€è¦æ–¹æ‹¬å·ï¼Œå¯ä»¥åœ¨å¥å£®æ€§å’Œç¾è§‚æ€§ä¹‹é—´å¾—åˆ°å¹³è¡¡ã€‚</p>
<h3 id="ä¿å­˜å¸¦æœ‰å¾ªç¯çš„è¡¨"><a href="#ä¿å­˜å¸¦æœ‰å¾ªç¯çš„è¡¨" class="headerlink" title="ä¿å­˜å¸¦æœ‰å¾ªç¯çš„è¡¨"></a>ä¿å­˜å¸¦æœ‰å¾ªç¯çš„è¡¨</h3><p>ç”±äºè¡¨æ„é€ å™¨ä¸èƒ½åˆ›å»ºå¸¦å¾ªç¯çš„æˆ–å…±äº«å­è¡¨çš„è¡¨ï¼Œæ‰€ä»¥å¦‚æœè¦å¤„ç†è¡¨ç¤ºé€šè¿‡æ‹“æ‰‘ç»“æ„çš„è¡¨ï¼Œå°±éœ€è¦é‡‡ç”¨ä¸åŒçš„æ–¹æ³•ã€‚æˆ‘ä»¬éœ€è¦å¼•å…¥åç§°æ¥è¡¨ç¤ºå¾ªç¯ã€‚å› æ­¤ï¼Œä¸‹é¢çš„å‡½æ•°æŠŠå€¼å¤–åŠ å…¶åç§°ä¸€èµ·ä½œä¸ºå‚æ•°ã€‚å¦å¤–ï¼Œè¿˜å¿…é¡»ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„è¡¨æ¥å­˜å‚¨å·²ä¿å­˜è¡¨çš„åç§°ï¼Œä»¥ä¾¿åœ¨å‘ç°å¾ªç¯æ—¶å¯¹å…¶è¿›è¡Œå¤ç”¨ã€‚è¿™ä¸ªé¢å¤–çš„è¡¨ä½¿ç”¨æ­¤å‰å·²è¢«ä¿å­˜çš„è¡¨ä½œä¸ºé”®ï¼Œä»¥è¡¨çš„åç§°ä½œä¸ºå€¼ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ï¼šä¿å­˜å¸¦æœ‰å¾ªç¯çš„è¡¨</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">basicSerialize</span><span class="params">(o)</span></span></span><br><span class="line">	<span class="comment">-- å‡è®¾&#x27;o&#x27;æ˜¯ä¸€ä¸ªæ•°å­—æˆ–å­—ç¬¦ä¸²</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">format</span> (<span class="string">&quot;%q&quot;</span>,o)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">save</span> <span class="params">(name,value,saved)</span></span></span><br><span class="line">	saved = saved <span class="keyword">or</span> &#123;&#125;			<span class="comment">-- åˆå§‹å€¼</span></span><br><span class="line">	<span class="built_in">io</span>.<span class="built_in">write</span>(name,<span class="string">&quot; = &quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">type</span>(value) == <span class="string">&quot;number&quot;</span> <span class="keyword">or</span> <span class="built_in">type</span>(value) == <span class="string">&quot;string&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(basicSerialize(value),<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">	<span class="keyword">elseif</span> <span class="built_in">type</span>(value) == <span class="string">&quot;table&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">if</span> saved[value] <span class="keyword">then</span>				<span class="comment">-- å€¼æ˜¯å¦è¢«ä¿å­˜ï¼Ÿ</span></span><br><span class="line">			<span class="built_in">io</span>.<span class="built_in">write</span>(saved[value],<span class="string">&quot;\n&quot;</span>)		<span class="comment">-- ä½¿ç”¨ä¹‹å‰çš„åç§°</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			saved[value] = name		<span class="comment">-- ä¿å­˜åç§°ä¾›åç»­ä½¿ç”¨</span></span><br><span class="line">			<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;&#123;&#125;\n&quot;</span>)		<span class="comment">-- åˆ›å»ºæ–°è¡¨</span></span><br><span class="line">			<span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(value) <span class="keyword">do</span> <span class="comment">-- ä¿å­˜è¡¨çš„å­—æ®µ</span></span><br><span class="line">				k = basicSerialize(k)</span><br><span class="line">				<span class="keyword">local</span> fname = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%s[%s]&quot;</span>,name,k)</span><br><span class="line">				save(fname,v,saved)</span><br><span class="line">			<span class="keyword">end</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;cannot save a &quot;</span> .. <span class="built_in">type</span>(value))</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å°†è®¾è¦åºåˆ—åŒ–åªä½¿ç”¨å­—ç¬¦ä¸²æˆ–æ•°å€¼ä½œä¸ºé”®ã€‚å‡½æ•°basicSerializeç”¨äºå¯¹è¿™äº›åŸºæœ¬ç±»å‹è¿›è¡Œåºåˆ—åŒ–å¹¶è¿”å›åºåˆ—åŒ–åçš„ç»“æœï¼Œå¦ä¸€ä¸ªå‡½æ•°saveåˆ™å®Œæˆå…·ä½“çš„å·¥ä½œï¼Œå…¶å‚æ•°savedå°±æ˜¯ä¹‹å‰æ‰€è¯´çš„ç”¨äºå­˜å‚¨å·²ä¿å­˜è¡¨çš„è¡¨ã€‚ä¾‹å¦‚ï¼Œå‡è®¾è¦åˆ›å»ºä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;x = <span class="number">1</span>, y = <span class="number">2</span>;&#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;&#125;</span><br><span class="line">a[<span class="number">2</span>] = a <span class="comment">-- å¾ªç¯</span></span><br><span class="line">a.z = a[<span class="number">1</span>]	<span class="comment">-- å…±äº«å­è¡¨</span></span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨save(â€œaâ€,a)ä¼šå°†å…¶ä¿å­˜ä¸ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;&#125;</span><br><span class="line">a[<span class="number">1</span>] = &#123;&#125;</span><br><span class="line">a[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">3</span></span><br><span class="line">a[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">4</span></span><br><span class="line">a[<span class="number">1</span>][<span class="number">3</span>] = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">a[<span class="number">2</span>] = a</span><br><span class="line">a[<span class="string">&quot;y&quot;</span>] = <span class="number">2</span></span><br><span class="line">a[<span class="string">&quot;x&quot;</span>] = <span class="number">1</span></span><br><span class="line">a[<span class="string">&quot;z&quot;</span>] = a[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>å–å†³äºè¡¨çš„éå†æƒ…å†µï¼Œè¿™äº›èµ‹å€¼è¯­å¥çš„å®é™…æ‰§è¡Œé¡ºåºå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚ä¸è¿‡å°½ç®¡å¦‚æ­¤ï¼Œä¸Šè¿°ç®—æ³•èƒ½å¤Ÿä¿è¯ä»»ä½•æ–°å®šä¹‰èŠ‚ç‚¹ä¸­æ‰€ç”¨åˆ°èŠ‚ç‚¹éƒ½æ˜¯å·²ç»è¢«å®šä¹‰è¿‡çš„ã€‚<br>å¦‚æœæƒ³ä¿å­˜å…·æœ‰å…±äº«éƒ¨åˆ†çš„å‡ ä¸ªè¡¨ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è°ƒç”¨å‡½æ•°saveæ—¶ä½¿ç”¨ç›¸åŒçš„è¡¨savedå‡½æ•°ï¼Œä¾‹å¦‚ï¼Œå‡è®¾æœ‰å¦‚ä¸‹ä¸¤ä¸ªè¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;&#123;<span class="string">&quot;one&quot;</span>,<span class="string">&quot;two&quot;</span>&#125;,<span class="number">3</span>&#125;</span><br><span class="line">b = &#123;k = a[<span class="number">1</span>]&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä»¥ç‹¬ç«‹çš„æ–¹å¼ä¿å­˜è¿™äº›è¡¨ï¼Œé‚£ä¹ˆç»“æœä¸­ä¸ä¼šæœ‰å…±åŒçš„éƒ¨åˆ†ã€‚ä¸è¿‡ï¼Œå¦‚æœè°ƒç”¨saveå‡½æ•°æ—¶ä½¿ç”¨åŒä¸€ä¸ªè¡¨savedï¼Œé‚£ä¹ˆç»“æœå°±ä¼šå…±äº«å…±åŒçš„éƒ¨åˆ†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> t = &#123;&#125;</span><br><span class="line">save(<span class="string">&quot;a&quot;</span>,a,t)</span><br><span class="line">save(<span class="string">&quot;b&quot;</span>,b,t)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- a = &#123;&#125;</span></span><br><span class="line"><span class="comment">-- a[1] = &#123;&#125;</span></span><br><span class="line"><span class="comment">-- a[1][1] = &quot;one&quot;</span></span><br><span class="line"><span class="comment">-- a[1][2] = &quot;two&quot;</span></span><br><span class="line"><span class="comment">-- a[2] = 3</span></span><br><span class="line"><span class="comment">-- b = &#123;&#125;</span></span><br><span class="line"><span class="comment">-- b[&quot;k&quot;] = a[1]</span></span><br></pre></td></tr></table></figure>
<p>åœ¨Luaè¯­è¨€ä¸­ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›æ¯”è¾ƒå¸¸è§çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¿å­˜ä¸€ä¸ªå€¼æ—¶ä¸æŒ‡å®šå…¨å±€åç§°è€Œæ˜¯é€šè¿‡ä¸€æ®µä»£ç æ¥åˆ›å»ºä¸€ä¸ªå±€éƒ¨å€¼å¹¶å°†å…¶è¿”å›ï¼Œä¹Ÿå¯ä»¥åœ¨å¯èƒ½çš„æ—¶å€™ä½¿ç”¨åˆ—è¡¨çš„è¯­æ³•ç­‰ç­‰ã€‚Luaé¢„å‹ç»™æˆ‘ä»¬æä¾›äº†æ„å»ºè¿™äº›æœºåˆ¶çš„å·¥å…·ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaæ•°æ®ç»“æ„</title>
    <url>/42473.html</url>
    <content><![CDATA[<p>Luaè¯­è¨€ä¸­çš„è¡¨å¹¶ä¸æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒä»¬æ˜¯å…¶ä»–æ•°æ®ç»“æ„çš„åŸºç¡€ã€‚æˆ‘ä»¬å¯ä»¥ç”¨Luaè¯­è¨€ä¸­çš„è¡¨æ¥å®ç°å…¶ä»–è¯­è¨€æä¾›çš„æ•°æ®ç»“æ„ï¼Œå¦‚æ•°ç»„ã€è®°å½•ã€åˆ—è¡¨ã€é˜Ÿåˆ—ã€é›†åˆç­‰ã€‚è€Œä¸”ï¼Œç”¨Luaè¯­è¨€ä¸­çš„è¡¨å®ç°è¿™äº›æ•°æ®ç»“æ„è¿˜å¾ˆé«˜æ•ˆã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åœ¨åƒCå’ŒPascalè¿™æ ·æ›´åŠ ä¼ ç»Ÿçš„è¯­è¨€ä¸­ï¼Œé€šå¸¸ä½¿ç”¨æ•°ç»„å’Œåˆ—è¡¨æ¥å®ç°å¤§å¤šæ•°æ•°æ®ç»“æ„ã€‚è™½ç„¶åœ¨Luaè¯­è¨€ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨æ¥å®ç°æ•°ç»„å’Œåˆ—è¡¨ï¼Œä½†è¡¨å®é™…ä¸Šæ¯”æ•°ç»„å’Œåˆ—è¡¨å¼ºå¤§å¾ˆå¤šã€‚ä½¿ç”¨è¡¨æ—¶ï¼Œå¾ˆå¤šç®—æ³•å¯ä»¥è¢«ç®€åŒ–ã€‚ä¾‹å¦‚ï¼Œç”±äºè¡¨æœ¬èº«å°±æ”¯æŒä»»æ„æ•°æ®ç±»å‹çš„ç›´æ¥è®¿é—®ï¼Œå› æ­¤æˆ‘ä»¬å¾ˆå°‘åœ¨Luaè¯­è¨€ä¸­ç¼–å†™æœç´¢ç®—æ³•ã€‚</p>
<h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>åœ¨Luaè¯­è¨€ä¸­ï¼Œç®€å•åœ°ä½¿ç”¨æ•´æ•°æ¥ç´¢å¼•è¡¨å³å¯å®ç°æ•°ç»„ã€‚å› æ­¤ï¼Œæ•°ç»„çš„å¤§å°ä¸ç”¨éå¾—æ˜¯å›ºå®šçš„ï¼Œè€Œæ˜¯å¯ä»¥æŒ‰éœ€å¢é•¿çš„ã€‚é€šå¸¸ï¼Œåœ¨åˆå§‹åŒ–æ•°ç»„æ—¶å°±é—´æ¥åœ°å®šä¹‰äº†æ•°ç»„çš„å¤§å°ã€‚ä¾‹å¦‚ï¼Œåœ¨æ‰§è¡Œäº†ä»¥ä¸‹çš„ä»£ç åï¼Œä»»ä½•è®¿é—®èŒƒå›´1~1000ä¹‹å¤–çš„å…ƒç´ éƒ½ä¼šè¿”å›nilè€Œä¸æ˜¯0ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> a = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">1000</span> <span class="keyword">do</span> </span><br><span class="line">	a[i] = <span class="number">0</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>é•¿åº¦è¿ç®—ç¬¦ï¼ˆ#ï¼‰æ­£æ˜¯åŸºäºæ­¤æ¥è®¡ç®—æ•°ç»„å¤§å°çš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(#a)</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨0ã€1æˆ–å…¶ä»–ä»»ä½•å€¼æ¥ä½œä¸ºæ•°ç»„çš„èµ·å§‹ç´¢å¼•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">-5</span> , <span class="number">5</span> <span class="keyword">do</span></span><br><span class="line">	a[i] = <span class="number">0</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œåœ¨Luaè¯­è¨€ä¸­ä¸€èˆ¬ä»¥1ä½œä¸ºæ•°ç»„çš„èµ·å§‹ç´¢å¼•ï¼ŒLuaè¯­è¨€çš„æ ‡å‡†åº“å’Œé•¿åº¦è¿ç®—ç¬¦éƒ½éµå¾ªè¿™ä¸ªæƒ¯ä¾‹ã€‚å¦‚æœæ•°ç»„çš„ç´¢å¼•ä¸ä»1å¼€å§‹ï¼Œé‚£å°±ä¸èƒ½ä½¿ç”¨è¿™äº›æœºåˆ¶ã€‚<br>å¯ä»¥é€šè¿‡è¡¨æ„é€ å™¨åœ¨ä¸€å¥è¡¨è¾¾å¼ä¸­åŒæ—¶åˆ›å»ºå’Œåˆå§‹åŒ–æ•°ç»„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">squares = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">54</span>,<span class="number">23</span>,<span class="number">23</span>,<span class="number">12</span>&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§è¡¨æ„é€ å™¨æ ¹æ®éœ€æ±‚è¦å¤šå¤§å°±èƒ½å¤šå¤§ã€‚åœ¨Luaè¯­è¨€ä¸­ï¼Œåˆ©ç”¨æ•°æ®æè¿°æ–‡ä»¶åˆ›å»ºåŒ…å«å‡ ç™¾ä¸‡ä¸ªå…ƒç´ ç»„æˆçš„æ„é€ å™¨å¾ˆå¸¸è§ã€‚</p>
<h2 id="çŸ©é˜µåŠå¤šç»´æ•°ç»„"><a href="#çŸ©é˜µåŠå¤šç»´æ•°ç»„" class="headerlink" title="çŸ©é˜µåŠå¤šç»´æ•°ç»„"></a>çŸ©é˜µåŠå¤šç»´æ•°ç»„</h2><p>åœ¨Luaè¯­è¨€ä¸­ï¼Œæœ‰ä¸¤ç§æ–¹å¼æ¥è¡¨ç¤ºçŸ©é˜µã€‚ç¬¬ä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªä¸è§„åˆ™æ•°ç»„ï¼Œå³æ•°ç»„çš„æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ‰€æœ‰å…ƒç´ å‡æ˜¯å¦ä¸€ä¸ªè¡¨çš„è¡¨ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥åˆ›å»ºä¸€ä¸ªå…¨0å…ƒç´ çš„N*Mç»´çŸ©é˜µï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> mt = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span> , N <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">local</span> row = &#123;&#125;</span><br><span class="line">	mt[i] = row</span><br><span class="line">	<span class="keyword">for</span> j = <span class="number">1</span>, M <span class="keyword">do</span></span><br><span class="line">		row[j] = <span class="number">0</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºè¡¨åœ¨Luaè¯­è¨€ä¸­æ˜¯ä¸€ç§å¯¹è±¡ï¼Œå› æ­¤åœ¨åˆ›å»ºçŸ©é˜µæ—¶å¿…é¡»æ˜¾ç¤ºåœ°åˆ›å»ºæ¯ä¸€è¡Œã€‚ä¸€æ–¹é¢ï¼Œè¿™æ¯”åœ¨Cè¯­è¨€ä¸­ç›´æ¥å£°æ˜ä¸€ä¸ªå¤šç»´æ•°ç»„æ›´åŠ å…·ä½“ï¼›å¦ä¸€æ–¹é¢ï¼Œè¿™ä¹Ÿç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šçš„çµæ´»æ€§ã€‚ä¾‹å¦‚ï¼Œåªéœ€å°†å‰ä¾‹ä¸­çš„å†…å±‚å¾ªç¯æ”¹ä¸ºfor j &#x3D; 1,i do â€¦ endå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸‰è§’çŸ©é˜µã€‚ä½¿ç”¨è¿™å¥—ä»£ç ï¼Œä¸‰è§’çŸ©é˜µè¾ƒåŸæ¥çš„çŸ©é˜µå¯ä»¥èŠ‚çº¦ä¸€åŠçš„å†…å­˜ã€‚<br>åœ¨Luaä¸­è¡¨ç¤ºçŸ©é˜µçš„ç¬¬äºŒç§æ–¹å¼æ˜¯å°†ä¸¤ä¸ªç´¢å¼•åˆå¹¶ä¸ºä¸€ä¸ªã€‚å…¸å‹æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡å°†ç¬¬ä¸€ä¸ªç´¢å¼•ä¹˜ä»¥ä¸€ä¸ªåˆé€‚çš„å¸¸é‡å†åŠ ä¸Šç¬¬äºŒä¸ªç´¢å¼•æ¥å®ç°è¿™ç§æ•ˆæœã€‚åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„ä»£ç æ¥åˆ›å»ºä¸€ä¸ªå…¨0å…ƒç´ çš„N*Mç»´çŸ©é˜µï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> mt = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, N <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">local</span> aux = (i <span class="number">-1</span>) * M </span><br><span class="line">	<span class="keyword">for</span> j = <span class="number">1</span>, M <span class="keyword">do</span></span><br><span class="line">		mt[aux = j] = <span class="number">0</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åº”ç”¨ç¨‹åºä¸­ç»å¸¸ä¼šç”¨åˆ°ç¨€ç–çŸ©é˜µï¼Œè¿™ç§çŸ©é˜µä¸­çš„å¤§å¤šæ•°å…ƒç´ æ˜¯0æˆ–nilã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é‚»æ¥çŸ©é˜µæ¥è¡¨ç¤ºå›¾ã€‚å½“çŸ©é˜µå‡ºå…ƒç´ çš„å€¼ä¸ºxæ—¶ï¼Œè¡¨ç¤ºå›¾ä¸­çš„èŠ‚ç‚¹må’Œnæ˜¯ç›¸è¿çš„ï¼Œè¿æ¥çš„æƒé‡ä¸ºxï¼›è‹¥ä¸Šè¿°çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¸ç›¸è¿ï¼Œé‚£ä¹ˆçŸ©é˜µçš„ (m,n)å¤„å…ƒç´ çš„å€¼ä¸ºnilã€‚å¦‚æœè¦è¡¨ç¤ºä¸€ä¸ªå…·æœ‰1ä¸‡ä¸ªèŠ‚ç‚¹çš„å›¾ï¼Œé‚£ä¹ˆéœ€è¦ä¸€ä¸ªåŒ…å«1äº¿ä¸ªå…ƒç´ çš„çŸ©é˜µï¼Œä½†æ˜¯å…¶ä¸­å¤§çº¦åªæœ‰5ä¸‡ä¸ªå…ƒç´ ä¸ä¸ºnilã€‚è®¸å¤šæœ‰å…³æ•°æ®ç»“æ„çš„ä¹¦ç±éƒ½ä¼šæ·±å…¥åœ°è®¨è®ºå¦‚ä½•å®ç°è¿™ç§ç¨€ç–çŸ©é˜µè€Œä¸å¿…æµªè´¹800MBå†…å­˜ç©ºé—´ï¼Œä½†åœ¨Luaè¯­è¨€ä¸­å´å¾ˆå°‘éœ€è¦ç”¨åˆ°é‚£äº›æŠ€å·§ã€‚è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬ä½¿ç”¨è¡¨å®ç°æ•°ç»„è€Œè¡¨æœ¬æ¥å°±æ˜¯ç¨€ç–çš„ã€‚åœ¨ç¬¬ä¸€ç§å®ç°ä¸­ï¼Œéœ€è¦1ä¸‡ä¸ªè¡¨ï¼Œæ¯ä¸ªè¡¨5ä¸ªå…ƒç´ ï¼Œæ€»å…±5ä¸‡ä¸ªå…ƒç´ ã€‚åœ¨ç¬¬äºŒç§å®ç°ä¸­ï¼Œåªéœ€è¦ä¸€ä¸ªè¡¨ï¼Œå…¶ä¸­åŒ…å«5ä¸‡ä¸ªå…ƒç´ ã€‚æ— è®ºå“ªç§å®ç°ï¼Œéƒ½æ˜¯åªénilçš„å…ƒç´ æ‰å ç”¨ç©ºé—´ã€‚<br>ç”±äºåœ¨æœ‰æ•ˆå…ƒç´ ä¹‹é—´å­˜åœ¨ç©ºé—´ï¼Œå› æ­¤ä¸èƒ½å¯¹ç¨€ç–ä¸¾ç€ä½¿ç”¨é•¿åº¦è¿ç®—ç¬¦ã€‚è¿™æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œå³ä½¿æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨é•¿åº¦è¿ç®—ç¬¦ï¼Œæœ€å¥½ä¹Ÿä¸è¦é‚£ä¹ˆåšã€‚å¯¹äºå¤§å¤šæ•°é’ˆå¯¹ç¨€ç–çŸ©é˜µçš„æ“ä½œæ¥è¯´ï¼Œéå†ç©ºå…ƒç´ æ˜¯éå¸¸ä½æ•ˆçš„ã€‚ç›¸åï¼Œå¯ä»¥ä½¿ç”¨pairsæ¥åªéå†énilçš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä½•è¿›è¡Œç”±ä¸è§„åˆ™æ•°ç»„è¡¨ç¤ºçš„ç¨€ç–çŸ©é˜µçš„çŸ©é˜µä¹˜æ³•ã€‚<br>å‡è®¾çŸ©é˜µa[M,K]ä¹˜ä»¥çŸ©é˜µb[K,N]çš„ç»“æœä¸ºçŸ©é˜µc[M,N]ï¼Œå¸¸è§çš„çŸ©é˜µç›¸ä¹˜ç®—æ³•å½¢å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, M <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">for</span> j = <span class="number">1</span>, N <span class="keyword">do</span></span><br><span class="line">		c[i][j] = <span class="number">0</span></span><br><span class="line">		<span class="keyword">for</span> k = <span class="number">1</span>,K <span class="keyword">do</span></span><br><span class="line">			c[i][j] = c[i][j] + a[i][k] * b[k][j]</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¤–å±‚çš„ä¸¤ä¸ªå¾ªç¯éå†äº†æ•´ä¸ªç»“æœçŸ©é˜µï¼Œç„¶åä½¿ç”¨å†…å±‚å¾ªç¯è®¡ç®—æ¯ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚<br>å¯¹äºä½¿ç”¨ä¸è§„åˆ™çŸ©é˜µå®ç°çš„ç¨€ç–çŸ©é˜µï¼Œå†…å±‚å¾ªç¯ä¼šæœ‰é—®é¢˜ã€‚ç”±äºå†…å±‚å¾ªç¯éå†çš„æ˜¯ä¸€åˆ—bè€Œä¸æ˜¯ä¸€è¡Œï¼Œå› æ­¤ä¸èƒ½å†æ­¤å¤„ä½¿ç”¨pairsï¼šè¿™ä¸ªå¾ªç¯å¿…é¡»éå†æ¯ä¸€è¡Œæ¥æ£€æŸ¥å¯¹åº”çš„è¡Œæ˜¯å¦åœ¨å¯¹åº”åˆ—ä¸­æœ‰å…ƒç´ ã€‚é™¤äº†éå†äº†å°‘é‡é0å…ƒç´ ä»¥å¤–ï¼Œè¿™ä¸ªå¾ªç¯è¿˜éå†äº†æ‰€æœ‰çš„0å…ƒç´ ã€‚ï¼ˆç”±äºä¸çŸ¥é“å…ƒç´ çš„ç©ºé—´ä½ç½®ï¼Œæ‰€ä»¥åœ¨å…¶ä»–åœºæ™¯ä¸‹éå†ä¸€åˆ—å¯ä¹Ÿèƒ½ä¼šæœ‰é—®é¢˜ã€‚ï¼‰<br>ä»¥ä¸‹çš„ç®—æ³•ä¸ä¹‹å‰çš„ç¤ºä¾‹éå¸¸ç±»ä¼¼ï¼Œä½†æ˜¯è¯¥ç®—æ³•è°ƒæ¢äº†ä¸¤ä¸ªå†…å±‚å¾ªç¯çš„é¡ºåºã€‚é€šè¿‡è¿™ä¸ªç®€å•çš„è°ƒæ•´ï¼Œè¯¥ç®—æ³•é¿å…äº†éå†åˆ—ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, M <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">for</span> k = <span class="number">1</span> , K <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">for</span> j = <span class="number">1</span>, N <span class="keyword">do</span></span><br><span class="line">			c[i][j] = c[i][j] + a[i][k] * b [k][j]</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œä¸­é—´çš„ä¸€å±‚å¾ªç¯éå†è¡Œa[i]ï¼Œè€Œå†…å±‚å¾ªç¯éå†è¡Œb[k]ã€‚è¿™ä¸¤ä¸ªéå†éƒ½å¯ä»¥ä½¿ç”¨pairsæ¥å®ç°éå†é0å…ƒç´ ã€‚ç”±äºä¸€ä¸ªç©ºçš„ç¨€ç–çŸ©é˜µæœ¬èº«å°±æ˜¯ä½¿ç”¨0å¡«å……çš„ï¼Œæ‰€ä»¥å¯¹ç»“æœçŸ©é˜µcçš„åˆå§‹åŒ–æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚<br>ä¸‹é¢ä»£ç æˆ˜å£«äº†ä¸Šè¿°ç®—æ³•çš„å®Œæ•´å®ç°ï¼Œå…¶ä¸­ä½¿ç”¨äº†pairsæ¥å¤„ç†ç¨€ç–çŸ©é˜µçš„å…ƒç´ ã€‚è¿™ç§å®ç°åªè®¿é—®énilå…ƒç´ ï¼ŒåŒæ—¶ç»“æœä¹Ÿæ˜¯ç¨€ç–çŸ©é˜µã€‚æ­¤å¤–ï¼Œä¸‹é¢çš„ä»£ç è¿˜åˆ å»äº†ç»“æœä¸­å¶ç„¶ä¸º0çš„å…ƒç´ ã€‚</p>
<blockquote>
<p>ç¨€ç–çŸ©é˜µç›¸ä¹˜</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mult</span><span class="params">(a,b)</span></span></span><br><span class="line">	<span class="keyword">local</span> c = &#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, #a <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> resultline = &#123;&#125;</span><br><span class="line">		<span class="keyword">for</span> k ,va <span class="keyword">in</span> <span class="built_in">pairs</span>(a[i]) <span class="keyword">do</span></span><br><span class="line">			<span class="keyword">for</span> j , vb <span class="keyword">in</span> <span class="built_in">pairs</span>(b[k]) <span class="keyword">do</span></span><br><span class="line">				<span class="keyword">local</span> res = (resultline[j] <span class="keyword">or</span> <span class="number">0</span> ) + va * vb</span><br><span class="line">				resultline[j] = (res ~= <span class="number">0</span>) <span class="keyword">and</span> res  <span class="keyword">or</span> <span class="literal">nil</span></span><br><span class="line">			<span class="keyword">end</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">		c[i] = resultline</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> c</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h2><p>ç”±äºè¡¨æ˜¯åŠ¨æ€å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨Luaè¯­è¨€ä¸­å¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°é“¾è¡¨ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªèŠ‚ç‚¹ç”¨ä¸€ä¸ªè¡¨æ¥è¡¨ç¤ºï¼Œé“¾æ¥åˆ™ä¸ºä¸€ä¸ªåŒ…å«æŒ‡å‘å…¶ä»–è¡¨çš„å¼•ç”¨çš„ç®€å•è¡¨å­—æ®µã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬å®ç°ä¸€ä¸ªå•é“¾è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰ä¸¤ä¸ªå­—æ®µvalueå’Œnextã€‚æœ€ç®€å•çš„å˜é‡å°±æ˜¯æ ¹èŠ‚ç‚¹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">list = <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<p>è¦åœ¨è¡¨å¤´æ’å…¥ä¸€ä¸ªå€¼ä¸ºvçš„å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">list = &#123;<span class="built_in">next</span> = list, value = v&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼éå†é“¾è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> l = list</span><br><span class="line"><span class="keyword">while</span> l <span class="keyword">do</span></span><br><span class="line">	visit l.value</span><br><span class="line">	l = l.<span class="built_in">next</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¯¸å¦‚åŒå‘é“¾è¡¨æˆ–ç¯å½¢è¡¨ç­‰å…¶ä»–ç±»å‹çš„é“¾è¡¨ä¹Ÿå¾ˆå®¹æ˜“å®ç°ã€‚ä¸è¿‡ï¼Œç”±äºé€šå¸¸æ— é¡»é“¾è¡¨å³å¯ç”¨æ›´ç®€å•çš„æ–¹å¼æ¥è¡¨ç¤ºæ•°æ®ï¼Œæ‰€ä»¥åœ¨Luaè¯­è¨€ä¸­å¾ˆå°‘éœ€è¦ç”¨åˆ°è¿™äº›æ•°æ®ç»“æ„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ— ç•Œæ•°ç»„æ¥è¡¨ç¤ºæ ˆã€‚</p>
<h2 id="é˜Ÿåˆ—åŠåŒç«¯é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—åŠåŒç«¯é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—åŠåŒç«¯é˜Ÿåˆ—"></a>é˜Ÿåˆ—åŠåŒç«¯é˜Ÿåˆ—</h2><p>åœ¨Luaè¯­è¨€ä¸­å®ç°é˜Ÿåˆ—çš„ä¸€ç§ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨tableæ ‡å‡†åº“ä¸­çš„å‡½æ•°insertå’Œremoveã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ï¼š ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listNew</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">return</span> &#123;first = <span class="number">0</span> ,last = <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pushFisrt</span><span class="params">(list,value)</span></span></span><br><span class="line">	<span class="keyword">local</span> first = list.first - <span class="number">1</span></span><br><span class="line">	list.first = first</span><br><span class="line">	list[first] = value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pushLast</span> <span class="params">(list ,value)</span></span></span><br><span class="line">	<span class="keyword">local</span> last = list.last + <span class="number">1</span></span><br><span class="line">	list.last = last</span><br><span class="line">	list[last] = value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">popFirst</span><span class="params">(list)</span></span></span><br><span class="line">	<span class="keyword">local</span> first = list.first</span><br><span class="line">	<span class="keyword">if</span> first &gt; list.last <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;list is empty&quot;</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">local</span> value = list[first]</span><br><span class="line">	list[first] = <span class="literal">nil</span></span><br><span class="line">	list.first = first + <span class="number">1</span></span><br><span class="line">	<span class="keyword">return</span> value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">popLast</span><span class="params">(list)</span></span></span><br><span class="line">	<span class="keyword">local</span> last = list.last</span><br><span class="line">	<span class="keyword">if</span> list.first &gt; last <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;list is empty&quot;</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">local</span> value = list[last]</span><br><span class="line">	list[last] = <span class="literal">nil</span></span><br><span class="line">	list.last = last  - <span class="number">1</span></span><br><span class="line">	<span class="keyword">return</span> value</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå¸Œæœ›ä¸¥æ ¼åœ°éµå¾ªé˜Ÿåˆ—çš„è§„èŒƒä½¿ç”¨è¿™ä¸ªç»“æ„ï¼Œé‚£ä¹ˆå°±åªèƒ½è°ƒç”¨pushLastå’ŒpopFirstå‡½æ•°ï¼Œfirstå’Œlastéƒ½ä¼šä¸æ–­å¢é•¿ã€‚ä¸è¿‡ï¼Œç”±äºæˆ‘ä»¬åœ¨Luaè¯­è¨€ä¸­ä½¿ç”¨è¡¨æ¥è¡¨ç¤ºæ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ—¢å¯ä»¥åœ¨1-20çš„èŒƒå›´å†…å¯¹æ•°ç»„è¿›è¡Œç´¢å¼•ï¼Œä¹Ÿå¯ä»¥åœ¨16777201-16777220çš„èŒƒå›´å†…ç´¢å¼•æ•°ç»„ã€‚å¯¹äºä¸€ä¸ª64ä¸ºæ•´å‹æ•°è€Œè¨€ï¼Œä»¥æ¯ç§’1000ä¸‡æ¬¡çš„é€Ÿåº¦è¿›è¡Œæ’å…¥ä¹Ÿéœ€è¦è¿è¡Œ3ä¸‡å¹´æ‰ä¼šå‘ç”Ÿæº¢å‡ºçš„é—®é¢˜ã€‚</p>
<h2 id="åå‘è¡¨"><a href="#åå‘è¡¨" class="headerlink" title="åå‘è¡¨"></a>åå‘è¡¨</h2><p>æˆ‘ä»¬å¾ˆå°‘åœ¨Luaè¯­è¨€ä¸­è¿›è¡Œç´¢å¼•æ“ä½œã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨è¢«ç§°ä¸ºç´¢å¼•è¡¨æˆ–åå‘è¡¨çš„æ•°æ®ç»“æ„ã€‚<br>å‡è®¾æœ‰ä¸€ä¸ªå­˜æ”¾äº†ä¸€å‘¨æ¯ä¸€å¤©åç§°çš„è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">days = &#123;<span class="string">&quot;Sunday&quot;</span>,<span class="string">&quot;Monday&quot;</span>,<span class="string">&quot;Tuesday&quot;</span>,<span class="string">&quot;Wednesday&quot;</span>,<span class="string">&quot;Thursday&quot;</span>,<span class="string">&quot;Friday&quot;</span>,<span class="string">&quot;Saturday&quot;</span>&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³è¦å°†ä¸€å‘¨æ¯ä¸€å¤©çš„åç§°è½¬æ¢ä¸ºå…¶åœ¨ä¸€å‘¨é‡Œçš„ä½ç½®ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ç´¢å¼•è¿™è¡¨æ¥å¯»æ‰¾æŒ‡å®šçš„åç§°ã€‚ä¸è¿‡ï¼Œä¸€ç§æ›´é«˜æ•ˆçš„æ–¹å¼æ˜¯æ„é€ ä¸€ä¸ªæ–¹å‘è¡¨ï¼Œå‡å®šä¸ºrevDaysï¼Œè¯¥è¡¨ä¸­çš„ç´¢å¼•ä¸ºä¸€å‘¨æ¯ä¸€å¤©çš„åç§°è€Œå€¼ä¸ºå…¶åœ¨ä¸€å‘¨é‡Œçš„ä½ç½®ã€‚è¿™ä¸ªè¡¨å½¢å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">revDays = &#123;[<span class="string">&quot;Sunday&quot;</span>] = <span class="number">1</span> ,[<span class="string">&quot;Monday&quot;</span>] = <span class="number">2</span>,[<span class="string">&quot;Tuesday&quot;</span>] = <span class="number">3</span>,[<span class="string">&quot;Wednesday&quot;</span>] = <span class="number">4</span>,[<span class="string">&quot;Thursday&quot;</span>] = <span class="number">5</span>,[<span class="string">&quot;Friday&quot;</span>] = <span class="number">6</span>,[<span class="string">&quot;Saturday&quot;</span>] = <span class="number">7</span>&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œåªéœ€è¦ç›´æ¥åœ¨åå‘è¡¨ä¸­æ ¹æ®åç§°è¿›è¡Œç´¢å¼•å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x = <span class="string">&quot;Tuesday&quot;</span></span><br><span class="line"><span class="built_in">print</span>(revDays[x])				<span class="comment">-- 3</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œè¿™ä¸ªåå‘è¡¨ä¸åŒæ‰‹å·¥å£°æ˜ï¼Œå¯ä»¥ä»åŸå§‹çš„è¡¨ä¸­è‡ªåŠ¨åœ°æ„é€ å‡ºæ–¹å‘æ ‡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">revDays = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(days) <span class="keyword">do</span> </span><br><span class="line">	revDays[v] = k</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šä¾‹ä¸­çš„å¾ªç¯ä¼šå¯¹æ¯ä¸ªå…ƒç´ daysè¿›è¡Œèµ‹å€¼ï¼Œå˜é‡kè·å–åˆ°çš„æ˜¯é”®(1,2,â€¦)è€Œå˜é‡vè·å–åˆ°çš„æ˜¯å€¼(â€œSundayâ€,â€Mondayâ€,â€¦)ã€‚</p>
<h2 id="é›†åˆä¸åŒ…"><a href="#é›†åˆä¸åŒ…" class="headerlink" title="é›†åˆä¸åŒ…"></a>é›†åˆä¸åŒ…</h2><p> å‡è®¾æˆ‘ä»¬æƒ³åˆ—å‡ºä¸€ä¸ªç¨‹åºæºä»£ç ä¸­çš„æ‰€æœ‰æ ‡è¯†ç¬¦ï¼ŒåŒæ—¶è¿‡æ»¤æ‰å…¶ä¸­çš„ä¿ç•™å­—ã€‚ä¸€äº›Cç¨‹åºå‘˜å¯èƒ½å€¾å‘äºä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„æ¥è¡¨ç¤ºä¿ç•™å­—é›†åˆï¼Œç„¶åæœç´¢è¿™ä¸ªæ•°ç»„æ¥å†³å®šæŸä¸ªå•è¯æ˜¯å¦å±äºè¯¥é›†åˆã€‚ä¸ºäº†æé«˜æœç´¢çš„é€Ÿåº¦ï¼Œä»–ä»¬è¿˜å¯èƒ½ä½¿ç”¨äºŒå‰æ ‘æ¥è¡¨ç¤ºè¯¥é›†åˆã€‚<br>åœ¨Luaè¯­è¨€ä¸­ï¼Œè¿˜å¯ä»¥ç”¨ä¸€ä¸­é«˜æ•ˆä¸”ç®€å•çš„æ–¹å¼æ¥è¡¨ç¤ºè¿™ç±»é›†åˆï¼Œå³é›†åˆå…ƒç´ ä½œä¸ºç´¢å¼•æ”¾å…¥è¡¨ä¸­ã€‚é‚£ä¹ˆï¼Œå¯¹äºæŒ‡å®šçš„å…ƒç´ æ— é¡»å†æœç´¢è¡¨ï¼Œåªéœ€è¦è¯¥å…ƒç´ æ£€ç´¢è¡¨å¹¶æ£€æŸ¥ç»“æœæ˜¯å¦ä¸ºnilå³å¯ã€‚ä»¥ä¸Šè¿°éœ€æ±‚ä¸ºä¾‹ï¼Œä»£ç å½¢å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">reserved = &#123;[<span class="string">&quot;while&quot;</span>] = <span class="literal">true</span>, [<span class="string">&quot;if&quot;</span>] = <span class="literal">true</span>,[<span class="string">&quot;else&quot;</span>] = <span class="literal">true</span>,[<span class="string">&quot;do&quot;</span>] =<span class="literal">true</span>,&#125;</span><br><span class="line">	<span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(s,<span class="string">&quot;[%a_][%w_]*&quot;</span>) <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> reserved[w] <span class="keyword">then</span></span><br><span class="line">			<span class="keyword">do</span> something with <span class="string">&#x27;w&#x27;</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥æ„é€ é›†åˆï¼Œä½¿å¾—åˆå§‹åŒ–è¿‡ç¨‹æ›´æ¸…æ™°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set</span><span class="params">(list)</span></span></span><br><span class="line">	<span class="keyword">local</span> set = &#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> _, l <span class="keyword">in</span> <span class="built_in">ipairs</span>(list) <span class="keyword">do</span></span><br><span class="line">		set[l] = <span class="literal">true</span> </span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> set</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">reserved = Set&#123;<span class="string">&quot;while&quot;</span>,<span class="string">&quot;end&quot;</span>,<span class="string">&quot;function&quot;</span>,<span class="string">&quot;local&quot;</span>,&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªé›†åˆæ¥ä¿å­˜æ ‡è¯†ç¬¦ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> ids = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(s,<span class="string">&quot;[%a_][%w_]*&quot;</span>) <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">not</span> reserved[w] <span class="keyword">then</span></span><br><span class="line">		ids[w] = <span class="literal">true</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- è¾“å‡ºæ¯ä¸€ä¸ªæ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">pairs</span>(ids) <span class="keyword">do</span> </span><br><span class="line">	<span class="built_in">print</span>(w)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åŒ…(bag)ï¼Œä¹Ÿè¢«ç§°ä¸ºå¤šé‡é›†åˆï¼Œä¸æ™®é€šé›†åˆçš„ä¸åŒä¹‹å¤„åœ¨äºå…¶ä¸­çš„å…ƒç´ å¯ä»¥å‡ºç°å¤šæ¬¡ã€‚åœ¨Luaè¯­è¨€ä¸­ï¼ŒåŒ…çš„ç®€å•è¡¨ç¤ºç±»ä¼¼äºæ­¤å‰é›†åˆçš„è¡¨ç¤ºï¼Œåªä¸è¿‡å…¶ä¸­çš„æ¯ä¸€ä¸ªé”®éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„è®¡æ•°å™¨ã€‚å¦‚æœè¦æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥é€’å¢å…¶è®¡æ•°å™¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insert</span> <span class="params">(bag,element)</span></span></span><br><span class="line">	bag[element] = (bag[element] <span class="keyword">or</span> <span class="number">0</span>) + <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥é€’å‡å…¶è®¡æ•°å™¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">remove</span> <span class="params">(bag,element)</span></span></span><br><span class="line">	<span class="keyword">local</span> count = bag[element]</span><br><span class="line">	bag[element] = (count <span class="keyword">and</span> count &gt; <span class="number">1</span>) <span class="keyword">and</span> count - <span class="number">1</span> <span class="keyword">or</span> <span class="literal">nil</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åªæœ‰å½“è®¡æ•°å™¨å­˜åœ¨ä¸”å¤§äº0æ—¶æˆ‘ä»¬æ‰ä¼šä¿ç•™è®¡æ•°å™¨ã€‚</p>
<h2 id="å­—ç¬¦ä¸²ç¼“å†²åŒº"><a href="#å­—ç¬¦ä¸²ç¼“å†²åŒº" class="headerlink" title="å­—ç¬¦ä¸²ç¼“å†²åŒº"></a>å­—ç¬¦ä¸²ç¼“å†²åŒº</h2><p>å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€æ®µå¤„ç†å­—ç¬¦ä¸²çš„ç¨‹åºï¼Œæ¯”å¦‚é€è¡Œåœ°è¯»å–ä¸€ä¸ªæ–‡ä»¶ã€‚å…¸å‹çš„ä»£ç å¯èƒ½å½¢å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> buff = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">	buff = buff .. line .. <span class="string">&quot;\n&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è™½ç„¶è¿™æ®µLuaè¯­è¨€ä»£ç çœ‹ä¼¼èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œä½†å®é™…ä¸Šåœ¨å¤„ç†å¤§æ–‡ä»¶æ—¶å´å¯èƒ½å¯¼è‡´å·¨å¤§çš„æ€§èƒ½å¼€é”€ã€‚<br>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸ºäº†ææ¸…æ¥šåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè®©æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹è¯»å–å¾ªç¯ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚å‡è®¾æ¯è¡Œæœ‰20å­—èŠ‚ï¼Œå½“æˆ‘ä»¬è¯»å–äº†å¤§æ¦‚2500è¡Œåï¼Œbuffå°±ä¼šå˜æˆä¸€ä¸ª50KBå¤§å°çš„å­—ç¬¦ä¸²ã€‚åœ¨Luaè¯­è¨€ä¸­è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥<code>buff..line..&quot;\n&quot;</code>æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ª50020å­—èŠ‚çš„æ–°å­—ç¬¦ä¸²ï¼Œç„¶åä»buffä¸­å¤åˆ¶50000å­—èŠ‚ä¸­åˆ°è¿™ä¸ªæ–°å­—ç¬¦ä¸²ä¸­ã€‚è¿™æ ·ï¼Œå¯¹äºåç»­çš„æ¯ä¸€è¡Œï¼ŒLuaè¯­è¨€éƒ½éœ€è¦ç§»åŠ¨å¤§æ¦‚50KBä¸”è¿˜åœ¨ä¸æ–­å¢é•¿çš„å†…å­˜ã€‚å› æ­¤ï¼Œè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯äºŒæ¬¡æ–¹çš„ã€‚åœ¨è¯»å–äº†100è¡Œä»¥åï¼ŒLuaè¯­è¨€å°±å·²ç»ç§»åŠ¨äº†è‡³å°‘5MBå†…å­˜ã€‚å½“Luaè¯­è¨€å®Œæˆäº†350KBçš„è¯»å–åï¼Œå®ƒå·²ç»è‡³å°‘ç§»åŠ¨äº†50GBçš„æ•°æ®ã€‚<br>å¯¹äºè¾ƒå°çš„å­—ç¬¦ä¸²ï¼Œä¸Šè¿°å¾ªç¯å¹¶æ²¡ä»€ä¹ˆé—®é¢˜ã€‚å½“è¯»å–æ•´ä¸ªæ–‡ä»¶æ—¶ï¼ŒLuaè¯­è¨€æä¾›äº†å¸¦æœ‰å‚æ•°çš„å‡½æ•°io.read(â€œaâ€)æ¥ä¸€æ¬¡æ€§è¯»å–æ•´ä¸ªæ–‡ä»¶ã€‚ä¸è¿‡ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¿…é¡»é¢å¯¹è¿™ä¸ªé—®é¢˜ã€‚Javaæä¾›äº†StringBufferç±»è¿˜è§£å†³è¿™ä¸ªé—®é¢˜ï¼›è€Œåœ¨Luaè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªè¡¨å½“åšå­—ç¬¦ä¸²ç¼“å†²åŒºï¼Œå…¶å…³é”®æ˜¯ä½¿ç”¨å‡½æ•°table.concatï¼Œè¿™ä¸ªå‡½æ•°ä¼šå°†æŒ‡å®šåˆ—è¡¨ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²è¿æ¥èµ·æ¥å¹¶è¿”å›è¿æ¥åçš„ç»“æœã€‚ä½¿ç”¨å‡½æ•°concatå¯ä»¥è¿™æ ·é‡å†™ä¸Šè¿°å¾ªç¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> t = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">	t[#t + <span class="number">1</span>] = line .. <span class="string">&quot;\n&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">local</span> s = <span class="built_in">table</span>.<span class="built_in">concat</span>(t)</span><br></pre></td></tr></table></figure>
<p>ä¹‹å‰çš„ä»£ç è¯»å–åŒæ ·çš„æ–‡ä»¶éœ€è¦è¶…è¿‡åŠåˆ†é’Ÿï¼Œè€Œä¸Šè¿°å®ç°åˆ™åªéœ€è¦ä¸åˆ°0.05ç§’ã€‚æˆ‘ä»¬è¿˜å¯ä»¥åšå¾—æ›´å¥½ã€‚å‡½æ•°concatè¿˜æœ‰ç¬¬2ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šæ’åœ¨å­—ç¬¦ä¸²é—´çš„åˆ†éš”ç¬¦ã€‚æœ‰äº†è¿™ä¸ªåˆ†éš”ç¬¦ï¼Œæˆ‘ä»¬å°±ä¸å¿…åœ¨æ¯è¡Œåæ’å…¥æ¢è¡Œç¬¦äº†ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> t = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">	t[#t + <span class="number">1</span>] = line</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">s = <span class="built_in">table</span>.<span class="built_in">concat</span>(t,<span class="string">&quot;\n&quot;</span>) .. <span class="string">&quot;\n&quot;</span></span><br></pre></td></tr></table></figure>
<p>è™½ç„¶å‡½æ•°concatèƒ½å¤Ÿåœ¨å­—ç¬¦ä¸²ä¹‹é—´æ’å…¥åˆ†éš”ç¬¦ï¼Œä½†æˆ‘ä»¬è¿˜éœ€è¦å¢é˜¿åŸºæœ€åä¸€ä¸ªæ¢è¡Œç¬¦ã€‚æœ€åä¸€æ¬¡å­—ç¬¦ä¸²è¿æ¥åˆ›å»ºäº†ç»“æœå­—ç¬¦ä¸²çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œè¿™ä¸ªå‰¯æœ¬å¯èƒ½å·²ç»ç›¸å½“é•¿äº†ã€‚è™½ç„¶æ²¡æœ‰ç›´æ¥çš„é€‰é¡¹èƒ½å¤Ÿè®©å‡½æ•°concatæ’å…¥è¿™ä¸ªé¢å¤–çš„åˆ†éš”ç¬¦ï¼Œä½†æˆ‘ä»¬å¯ä»¥æƒ³åŠæ³•ç»•è¿‡ï¼Œåªéœ€åœ¨å­—ç¬¦ä¸²tåé¢æ·»åŠ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²å°±è¡Œäº†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t[#t + <span class="number">1</span>] = <span class="string">&quot;&quot;</span></span><br><span class="line">s = <span class="built_in">table</span>.<span class="built_in">concat</span>(t,<span class="string">&quot;\n&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€æœŸæœ›çš„é‚£æ ·ï¼Œå‡½æ•°concatä¼šåœ¨ç»“æœå­—ç¬¦ä¸²çš„é¢æœ€åæ·»åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚</p>
<h2 id="å›¾å½¢"><a href="#å›¾å½¢" class="headerlink" title="å›¾å½¢"></a>å›¾å½¢</h2><p>åƒå…¶ä»–ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸€çœ¼ä¸ªï¼ŒLuaè¯­è¨€ä¹Ÿå…è®¸å¼€å‘äººå‘˜ä½¿ç”¨å¤šç§å®ç°è¡¨ç¤ºå›¾ï¼Œæ¯ç§å®ç°éƒ½æœ‰å…¶æ‰€ä½¿ç”¨çš„ç‰¹å®šç®—æ³•ã€‚<br>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç”±ä¸¤ä¸ªå­—æ®µç»„æˆçš„è¡¨æ¥è¡¨ç¤ºæ¯ä¸ªèŠ‚ç‚¹ï¼Œå³name(èŠ‚ç‚¹åç§°)å’Œadj(ä¸æ­¤èŠ‚ç‚¹é‚»æ¥çš„èŠ‚ç‚¹å’Œé›†åˆ)ã€‚ç”±äºæˆ‘ä»¬ä¼šä»ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­åŠ è½½å›¾å¯¹åº”çš„æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦èƒ½å¤Ÿæ ¹æ®èŠ‚ç‚¹çš„åç§°æ¥å¯»æ‰¾æŒ‡å®šèŠ‚ç‚¹çš„æ–¹æ³•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªé¢å¤–çš„è¡¨æ¥å»ºç«‹èŠ‚ç‚¹å’ŒèŠ‚ç‚¹åç§°ä¹‹é—´çš„æ˜ å°„ã€‚å‡½æ•°name2nodeå¯ä»¥æ ¹æ®æŒ‡å®šèŠ‚ç‚¹çš„åç§°è¿”å›å¯¹åº”çš„èŠ‚ç‚¹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">name2node</span><span class="params">(graph,name)</span></span></span><br><span class="line">	<span class="keyword">local</span> node = graph[name]</span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">not</span> node <span class="keyword">then</span></span><br><span class="line">		node = &#123;name = name ,adj = &#123;&#125;&#125;</span><br><span class="line">		graph[name] = node </span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> node </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¤ºä¾‹ï¼šä»æ–‡ä»¶ä¸­åŠ è½½å›¾</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readgraph</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">local</span> graph = &#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">		<span class="comment">-- æŠŠä¸€è¡Œåˆ†å‰²ä¸ºä¸¤ä¸ªåå­—</span></span><br><span class="line">		<span class="keyword">local</span> namefrom, nameto = <span class="built_in">string</span>.<span class="built_in">match</span>(line,<span class="string">&quot;(%S+)%s+(%S+)&quot;</span>)</span><br><span class="line">		<span class="comment">-- æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹</span></span><br><span class="line">		<span class="keyword">local</span> from = name2node(graph,namefrom)</span><br><span class="line">		<span class="keyword">local</span> to = name2node(graph,nameto)</span><br><span class="line">		<span class="comment">-- æŠŠâ€˜toâ€™å¢åŠ åˆ°é‚»æ¥é›†åˆ&#x27;from&#x27;ä¸­</span></span><br><span class="line">		from.adj[to] = <span class="literal">true</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> graph</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°é€è¡Œåœ°è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶çš„æ¯ä¸€è¡Œä¸­æœ‰ä¸¤ä¸ªèŠ‚ç‚¹çš„åç§°ï¼Œè¡¨ç¤ºä»ç¬¬1ä¸ªèŠ‚ç‚¹åˆ°ç¬¬2ä¸ªèŠ‚ç‚¹æœ‰ä¸€æ¡è¾¹ã€‚å¯¹äºæ¯ä¸€è¡Œï¼Œè°ƒç”¨å‡½æ•°string.matchå°†ä¸€è¡Œä¸­çš„ä¸¤ä¸ªèŠ‚ç‚¹çš„åç§°åˆ†å¼€ï¼Œç„¶åæ ¹æ®åç§°æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹ï¼Œæœ€åå°†è¿™äº›èŠ‚ç‚¹è¿æ¥åœ¨ä¸€èµ·ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ï¼šå¯»æ‰¾ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findpath</span><span class="params">(curr,to,path,visited)</span></span></span><br><span class="line">	<span class="built_in">path</span> = <span class="built_in">path</span> <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">	visited = visited <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">	<span class="keyword">if</span> visited[curr] <span class="keyword">then</span>   <span class="comment">-- æ˜¯å¦èŠ‚ç‚¹å·²è¢«è®¿é—®</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>			<span class="comment">-- ä¸å­˜åœ¨è·¯å¾„</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	visited[curr] = <span class="literal">true</span>    <span class="comment">-- æ ‡è®°èŠ‚ç‚¹ä¸ºå·²è¢«è®¿é—®</span></span><br><span class="line">	<span class="built_in">path</span>[#<span class="built_in">path</span> + <span class="number">1</span>] = curr	<span class="comment">-- å¢åŠ åˆ°è·¯å¾„ä¸­</span></span><br><span class="line">	<span class="keyword">if</span> curr == to <span class="keyword">then</span>		<span class="comment">-- æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">path</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> node <span class="keyword">in</span> <span class="built_in">pairs</span>(curr.adj) <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> p = findpath(node,to ,<span class="built_in">path</span>,visited)</span><br><span class="line">		<span class="keyword">if</span> p <span class="keyword">then</span></span><br><span class="line">			<span class="keyword">return</span> p</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="built_in">table</span>.<span class="built_in">remove</span>(<span class="built_in">path</span>)		<span class="comment">-- ä»è·¯å¾„ä¸­åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°findpathä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†æœç´¢ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„ã€‚è¯¥å‡½æ•°çš„ç¬¬1ä¸ªå‚æ•°æ˜¯å½“å‰èŠ‚ç‚¹ï¼Œç¬¬2ä¸ªå‚æ•°æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œç¬¬3ä¸ªå‚æ•°ç”¨äºä¿å­˜ä»èµ·ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„ï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸ºæ‰€æœ‰å·²è¢«è®¿é—®èŠ‚ç‚¹çš„å‡ ä½•ã€‚<br>ä¸ºäº†æµ‹è¯•ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæ‰“å°ä¸€æ¡è·¯å¾„çš„å‡½æ•°ï¼Œå†ç¼–å†™ä¸€äº›ä»£ç è®©ä¸Šè¿°æ‰€æœ‰ä»£ç è·‘èµ·æ¥ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printpath</span><span class="params">(path)</span></span></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, #<span class="built_in">path</span> <span class="keyword">do</span> </span><br><span class="line">		<span class="built_in">print</span>(<span class="built_in">path</span>[i].name)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">g = readgraph()</span><br><span class="line">a = name2node(g,<span class="string">&quot;a&quot;</span>)</span><br><span class="line">b = name2node(g,<span class="string">&quot;b&quot;</span>)</span><br><span class="line">p = findpath(a,b)</span><br><span class="line"><span class="keyword">if</span> p <span class="keyword">then</span> printpath(p) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaæ—¥æœŸå’Œæ—¶é—´</title>
    <url>/11458.html</url>
    <content><![CDATA[<p>Luaè¯­è¨€çš„æ ‡å‡†åº“æä¾›äº†ä¸¤ä¸ªç”¨äºæ“ä½œæ—¥æœŸå’Œæ—¶é—´çš„å‡½æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°åœ¨Cè¯­è¨€æ ‡å‡†åº“ä¸­ä¹Ÿå­˜åœ¨ï¼Œæä¾›çš„æ˜¯åŒæ ·çš„åŠŸèƒ½ã€‚è™½ç„¶è¿™ä¸¤ä¸ªå‡½æ•°çœ‹ä¸Šå»å¾ˆç®€å•ï¼Œä½†ä¾æ—§å¯ä»¥åŸºäºè¿™äº›ç®€å•çš„åŠŸèƒ½å®Œæˆå¾ˆå¤šå¤æ‚çš„å·¥ä½œã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Luaè¯­è¨€é’ˆå¯¹æ—¥æœŸå’Œæ—¶é—´ä½¿ç”¨ä¸¤ç§è¡¨ç¤ºæ–¹å¼ã€‚ç¬¬1ä¸­è¡¨ç¤ºæ–¹å¼æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¿™ä¸ªæ•°å­—é€šå¸¸æ˜¯ä¸€ä¸ªæ•´å‹æ•°ã€‚å°½ç®¡å¹¶éIOS Cæ‰€å¿…éœ€çš„ï¼Œä½†åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­è¿™ä¸ªæ•°å­—æ—¶è‡ªä¸€ä¸ªè¢«ç§°ä¸ºçºªå…ƒçš„å›ºå®šæ—¥æœŸåè‡³ä»Šçš„ç§’æ•°ã€‚ç‰¹åˆ«åœ°ï¼Œåœ¨POSIXå’ŒWindowsç³»ç»Ÿä¸­å›½è¿™ä¸ªå›ºå®šæ—¥æœŸå‡æ˜¯Jan 01,1970,0:00 UTCã€‚<br>Luaè¯­è¨€é’ˆå¯¹æ—¥æœŸå’Œæ—¶é—´æä¾›çš„ç¬¬2ä¸­è¡¨ç¤ºæ–¹å¼æ˜¯ä¸€ä¸ªè¡¨ã€‚æ—¥æœŸè¡¨å…·æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„å­—æ®µï¼šyearã€monthã€dayã€hourã€minã€secã€wdayã€yadyå’Œisdstï¼Œé™¤isdstä»¥å¤–çš„æ‰€æœ‰å­—æ®µå‡ä¸ºæ•´å‹å€¼ã€‚å‰6ä¸ªå­—æ®µçš„å«ä¹‰éå¸¸æ˜æ˜¾ï¼Œè€Œwdayå­—æ®µè¡¨ç¤ºæœ¬å‘¨ä¸­çš„ç¬¬å‡ å¤©ï¼ˆç¬¬1å¤©ä¸ºæ˜ŸæœŸå¤©ï¼‰ï¼›ydayè¡¨ç¤ºå½“å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼ˆç¬¬1å¤©æ˜¯1æœˆ1æ—¥ï¼‰ï¼›isdstå­—æ®µè¡¨ç¤ºå¸ƒå°”ç±»å‹ï¼Œå¦‚æœä½¿ç”¨å¤æ—¶ä»¤åˆ™ä¸ºçœŸã€‚ä¾‹å¦‚ï¼ŒSep 16,1998,23:48:10ï¼ˆæ˜ŸæœŸä¸‰ï¼‰å¯¹åº”çš„è¡¨æ˜¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&#123;year = <span class="number">1998</span>,month = <span class="number">9</span>,day = <span class="number">16</span>,yday = <span class="number">259</span>,wday = <span class="number">4</span>,hour = <span class="number">23</span>,<span class="built_in">min</span> = <span class="number">48.</span>sec = <span class="number">10</span>,isdst = <span class="literal">false</span>&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¥æœŸè¡¨ä¸­ä¸åŒ…æ‹¬æ—¶åŒºï¼Œç¨‹åºéœ€è¦è´Ÿè´£ç»“åˆç›¸åº”çš„æ—¶åŒºå¯¹å…¶æ­£ç¡®è§£æã€‚</p>
<h2 id="å‡½æ•°os-time"><a href="#å‡½æ•°os-time" class="headerlink" title="å‡½æ•°os.time"></a>å‡½æ•°os.time</h2><p>ä¸å¸¦ä»»ä½•å‚æ•°è°ƒç”¨å‡½æ•°os.time,ä¼šä»¥æ•°å­—å½¢å¼è¿”å›å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">os</span>.<span class="built_in">time</span>()	   <span class="comment">-- 1587123725</span></span><br></pre></td></tr></table></figure>
<p>å¯¹åº”çš„æ—¶é—´æ˜¯April 17,2020,19:42:05ã€‚åœ¨ä¸€ä¸ªPOSIXç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›åŸºæœ¬çš„æ•°å­—è¿ç®—åˆ†ç¦»è¿™ä¸ªæ•°å­—ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">date</span> = <span class="number">1587123725</span></span><br><span class="line"><span class="keyword">local</span> day2year = <span class="number">265.242</span>			 ä¸€å¹´çš„å¤©æ•°</span><br><span class="line"><span class="keyword">local</span> sec2hour = <span class="number">60</span> * <span class="number">60</span>			 ä¸€å°æ—¶çš„ç§’æ•°</span><br><span class="line"><span class="keyword">local</span> sec2day  = sec2hour * <span class="number">24</span>       ä¸€å¤©çš„ç§’æ•°</span><br><span class="line"><span class="keyword">local</span> sec2year = sec2day * day2year  ä¸€å¹´çš„ç§’æ•°</span><br><span class="line"></span><br><span class="line"> å¹´</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">date</span> // sec2year + <span class="number">1970</span>)</span><br><span class="line"></span><br><span class="line"> å°æ—¶</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">date</span> % sec2day // sec2hour)</span><br><span class="line"></span><br><span class="line"> åˆ†é’Ÿ</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">date</span> % sec2hour // <span class="number">60</span>)</span><br><span class="line"></span><br><span class="line"> ç§’</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">date</span> % <span class="number">60</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä»¥ä¸€ä¸ªæ—¥æœŸè¡¨ä½œä¸ºå‚æ•°è°ƒç”¨os.timeï¼Œé‚£ä¹ˆæ”¹å‡½æ•°ä¼šè¿”å›è¯¥è¡¨ä¸­æ‰€æè¿°æ—¥æœŸå’Œæ—¶é—´å¯¹åº”çš„æ•°å­—ã€‚yearã€monthå’Œdayå­—æ®µæ˜¯å¿…éœ€çš„ï¼Œhourã€minå’Œsecå­—æ®µå¦‚æœæ²¡æœ‰æä¾›çš„è¯åˆ™é»˜è®¤ä¸º12:00:00ï¼Œå…¶ä½™å­—æ®µåˆ™ä¼šè¢«å¿½ç•¥ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">2020</span>,month = <span class="number">4</span>,day = <span class="number">17</span>,hour = <span class="number">19</span>,<span class="built_in">min</span> = <span class="number">42</span>,sec = <span class="number">5</span>&#125;)		 <span class="number">1587123725</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">1970</span>,month = <span class="number">1</span>,day = <span class="number">1</span>, hour = <span class="number">0</span>&#125;)							 <span class="number">10800</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">1970</span>,month = <span class="number">1</span>,day = <span class="number">1</span>, hour = <span class="number">0</span>,sec = <span class="number">1</span>&#125;)					 <span class="number">10801</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">1970</span>,month = <span class="number">1</span>,day = <span class="number">1</span>&#125;)									 <span class="number">54000</span></span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œ10800æ˜¯3ä¸ªå°æ—¶çš„ç§’æ•°ï¼Œ54000åˆ™æ˜¯10800åŠ ä¸Š12ä¸ªå°æ—¶çš„ç§’æ•°ã€‚</p>
<h2 id="å‡½æ•°os-date"><a href="#å‡½æ•°os-date" class="headerlink" title="å‡½æ•°os.date"></a>å‡½æ•°os.date</h2><p>å‡½æ•°os.dateåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯å‡½æ•°os.timeçš„åå‡½æ•°ï¼Œå®ƒå¯ä»¥å°†ä¸€ä¸ªè¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´çš„æ•°å­—è½¬æ¢ä¸ºæŸäº›é«˜çº§çš„è¡¨ç¤ºå½¢å¼ï¼Œè¦ä¹ˆæ˜¯æ—¥æœŸè¡¨è¦ä¹ˆæ˜¯å­—ç¬¦ä¸²ã€‚è¯¥å‡½æ•°çš„ç¬¬1ä¸ªå‚æ•°æ˜¯æè¿°æœŸæœ›è¡¨ç¤ºå½¢å¼çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œç¬¬2ä¸ªå‚æ•°æ˜¯æ•°å­—å½¢å¼çš„æ—¥æœŸå’Œæ—¶é—´ã€‚<br>è¦ç”Ÿæˆä¸€ä¸ªæ—¥æœŸè¡¨ï¼Œå¯ä»¥ä½¿ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²â€*tâ€ã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨å‡½æ•°os.date(â€œ*tâ€,1587123725)ä¼šè¿”å›ä¸‹åˆ—è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&#123;year = <span class="number">2020</span>,month = <span class="number">9</span>,day = <span class="number">16</span>,yday = <span class="number">108</span>,wday = <span class="number">6</span>,hour = <span class="number">19</span>,<span class="built_in">min</span> = <span class="number">42</span>,sec = <span class="number">5</span>,isdst = <span class="literal">false</span>&#125;</span><br></pre></td></tr></table></figure>
<p>å¤§è‡´ä¸Šï¼Œå¯¹äºä»»ä½•æœ‰æ•ˆçš„æ—¶é—´tï¼Œos.time(os.date(â€œ*tâ€,t)) &#x3D;&#x3D; tå‡æˆç«‹ã€‚<br>é™¤äº†isdst,ç»“æœä¸­çš„å…¶ä½™å­—æ®µå‡ä¸ºæ•´å‹æ•°ä¸”èŒƒå›´åˆ†åˆ«æ˜¯ï¼š</p>
<hr>
<p>year   ä¸€æ•´å¹´<br>month  1<del>12<br>day    1</del>31<br>hour   0<del>23<br>min    0</del>59<br>sec    0<del>60<br>wday   1</del>7<br>yday   1~366</p>
<hr>
<p>å¯¹äºå…¶ä»–æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œå‡½æ•°os.dateä¼šå°†æ—¥æœŸæ ¼å¼åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²æ˜¯æ ¹æ®æŒ‡å®šçš„æ—¶é—´å’Œæ—¥æœŸä¿¡æ¯å¯¹ç‰¹å®šçš„æŒ‡ç¤ºç¬¦è¿›è¡Œäº†æ›¿æ¢çš„ç»“æœã€‚æ‰€æœ‰çš„æŒ‡ç¤ºç¬¦éƒ½ä»¥ç™¾åˆ†å·å¼€å¤´ç´§è·Ÿä¸€ä¸ªå­—æ¯ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;a %A in %B&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%d/%m/%Y&quot;</span>,<span class="number">1587123725</span>))      <span class="number">17</span>/<span class="number">4</span>/<span class="number">2020</span></span><br></pre></td></tr></table></figure>
<p>æ‰€æœ‰çš„è¡¨ç°å½¢å¼å–å†³äºå½“å‰çš„åŒºåŸŸè®¾ç½®ã€‚<br>ä¸‹è¡¨åˆ—å‡ºäº†ä¸»è¦çš„æŒ‡ç¤ºç¬¦ã€‚</p>
<hr>
<p>%aæ˜ŸæœŸå‡ çš„ç®€å†™<br>%Aæ˜ŸæœŸå‡ çš„å…¨å<br>%bæœˆä»½çš„ç®€å†™<br>%Bæœˆä»½çš„å…¨å<br>%cæ—¥æœŸå’Œæ—¶é—´<br>%dä¸€ä¸ªæœˆä¸­çš„ç¬¬å‡ å¤©[01<del>31]<br>%H24å°æ—¶åˆ¶ä¸­çš„å°æ—¶æ•°[00</del>23]<br>%I12å°æ—¶åˆ¶ä¸­çš„å°æ—¶æ•°[01<del>12]<br>%jä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©[001</del>365]<br>%mæœˆä»½[1<del>12]<br>%Måˆ†é’Ÿ[0</del>59]<br>%pâ€amâ€æˆ–â€pmâ€<br>%Sç§’æ•°[0<del>60]<br>%wæ˜ŸæœŸ[0</del>6 &#x3D; Sunday ~ Saturday]<br>%Wä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨[0<del>53]<br>%xæ—¥æœŸ<br>%Xæ—¶é—´<br>%yä¸¤ä½æ•°çš„å¹´ä»½[0</del>99]<br>%Yå®Œæ•´çš„å¹´ä»½<br>%zæ—¶åŒº<br>%%ç™¾åˆ†å·</p>
<hr>
<p>å¯¹äºæ•°å€¼ï¼Œè¡¨ä¸­ä¹Ÿç»™å‡ºäº†å®ƒä»¬çš„æœ‰æ•ˆèŒƒå›´ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ¼”ç¤ºå¦‚ä½•åˆ›å»ºIOS 8601æ ¼å¼æ—¥æœŸå’Œæ—¶é—´çš„ç¤ºä¾‹ï¼š<br>ç”¨å‡½æ•°os.date(â€œ*tâ€,1587123725)ä¼šè¿”å›ä¸‹åˆ—è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&#123;year = <span class="number">2020</span>,month = <span class="number">9</span>,day = <span class="number">16</span>,yday = <span class="number">108</span>,wday = <span class="number">6</span>,hour = <span class="number">19</span>,<span class="built_in">min</span> = <span class="number">42</span>,sec = <span class="number">5</span>,isdst = <span class="literal">false</span>&#125;</span><br><span class="line">```lua</span><br><span class="line">t = <span class="number">1587123725</span>	<span class="comment">-- IOS 8601æ ¼å¼çš„æ—¥æœŸ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y-%m-%d&quot;</span>,t))	 <span class="number">2020</span><span class="number">-04</span><span class="number">-17</span></span><br><span class="line"> IOS <span class="number">8601</span>æ ¼å¼çš„æ—¥æœŸå’Œæ—¶é—´</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y-%m-%dT%H:%M:%S&quot;</span>,t))	 <span class="number">2020</span><span class="number">-04</span><span class="number">-17</span>T19:<span class="number">42</span>:<span class="number">05</span></span><br><span class="line"> IOS <span class="number">8601</span>æ ¼å¼çš„åºæ•°æ—¥æœŸ</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y-%j&quot;</span>,t))			</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ ¼å¼åŒ–å­—ç¬¦ä¸²ä»¥å¹å·å¼€å¤´ï¼Œé‚£ä¹ˆå‡½æ•°os.dateä¼šä»¥UTCæ ¼å¼å¯¹å…¶è¿›è¡Œè§£æï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"> çºªå…ƒ</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;!%c&quot;</span>,<span class="number">0</span>))		 Zhu Jan <span class="number">1</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="number">1970</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸å¸¦ä»»ä½•å‚æ•°è°ƒç”¨å‡½æ•°os.dateï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¼šä½¿ç”¨æ ¼å¼%cï¼Œå³ä»¥ä¸€ç§åˆç†çš„æ ¼å¼è¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ã€‚è¯·æ³¨æ„ï¼Œ%xã€%Xå’Œ%cä¼šæ ¹æ®ä¸åŒçš„åŒºåŸŸå’Œç³»ç»Ÿè€Œå‘ç”Ÿå˜åŒ–ã€‚å¦‚æœéœ€è¦è¯¸å¦‚dd&#x2F;mm&#x2F;yyyyè¿™æ ·çš„å›ºå®šè¡¨ç¤ºå½¢å¼ï¼Œé‚£ä¹ˆå°±å¿…é¡»æ˜¾ç¤ºåœ°ä½¿ç”¨è¯¸å¦‚â€%d&#x2F;%m&#x2F;%Yâ€è¿™æ ·çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚</p>
<h2 id="æ—¥æœŸå’Œæ—¶é—´å¤„ç†"><a href="#æ—¥æœŸå’Œæ—¶é—´å¤„ç†" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´å¤„ç†"></a>æ—¥æœŸå’Œæ—¶é—´å¤„ç†</h2><p>å½“å‡½æ•°os.dateåˆ›å»ºæ—¥æœŸè¡¨æ—¶ï¼Œè¯¥è¡¨çš„æ‰€æœ‰å­—æ®µå‡åœ¨æœ‰æ•ˆçš„èŒƒå›´å†…ã€‚å½“æˆ‘ä»¬ç»™å‡½æ•°os.timeä¼ å…¥ä¸€ä¸ªæ—¥æœŸè¡¨æ—¶ï¼Œå…¶ä¸­çš„å­—æ®µå¹¶ä¸éœ€è¦å½’ä¸€åŒ–ã€‚è¿™ä¸ªç‰¹è¡Œå¯¹äºæ—¥æœŸå’Œæ—¶é—´å¤„ç†éå¸¸é‡è¦ã€‚<br>ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾æƒ³çŸ¥é“ä»å½“å‰å‘åæ•°40å¤©çš„æ—¥æœŸï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç è¿›è¡Œè®¡ç®—ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = <span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;*t&quot;</span>)		</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y/%m/%d&quot;</span>,<span class="built_in">os</span>.<span class="built_in">time</span>(t)))		 <span class="number">2020</span>/<span class="number">04</span>/<span class="number">17</span></span><br><span class="line">t.day = t.day + <span class="number">40</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y/%m/%d&quot;</span>,<span class="built_in">os</span>.<span class="built_in">time</span>(t)))		 <span class="number">2020</span>/<span class="number">05</span>/<span class="number">27</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬æŠŠæ•°å­—è¡¨ç¤ºçš„æ—¶é—´è½¬æ¢æˆæ—¥æœŸè¡¨ï¼Œé‚£ä¹ˆå°±èƒ½å¾—åˆ°æ—¥æœŸå’Œæ—¶é—´çš„å½’ä¸€åŒ–å½¢å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = <span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;*t&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(t.day,t.month)		 <span class="number">26</span> <span class="number">2</span></span><br><span class="line">t.day = t.day - <span class="number">40</span> 	</span><br><span class="line"><span class="built_in">print</span>(t.day,t.month)		 <span class="number">-14</span> <span class="number">2</span></span><br><span class="line">t = <span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;*t&quot;</span>,<span class="built_in">os</span>.<span class="built_in">time</span>(t))</span><br><span class="line"><span class="built_in">print</span>(t.day,t.month)		 <span class="number">17</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œä¹Ÿå¯ä»¥å¯¹æ•°å­—å½¢å¼çš„æ—¶é—´å¢åŠ æˆ–å‡å°‘34356000ï¼ˆ40å¤©å¯¹åº”çš„ç§’æ•°ï¼‰ã€‚ä¸è¿‡ï¼Œç”±äºæ ‡å‡†Cå¹¶ä¸è¦æ±‚æ•°å€¼è¡¨ç¤ºçš„æ—¶é—´æ˜¯ä»çºªå…ƒå¼€å§‹çš„ï¼Œå› æ­¤æ ‡å‡†Cå¹¶ä¸ä¿è¯è¿™ç§æ“ä½œçš„æ­£ç¡®æ€§ã€‚æ­¤å¤–ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å¢åŠ çš„æ˜¯æœˆä»½è€Œéå¤©æ•°ï¼Œç”±äºä¸åŒçš„æœˆä»½å…·æœ‰ä¸åŒçš„å¤©æ•°ï¼Œé‚£ä¹ˆç›´æ¥æ“ä½œç§’æ•°å°±ä¼šæœ‰é—®é¢˜ã€‚è€Œä»¥å½’ä¸€åŒ–çš„æ–¹å¼å¤„ç†åˆ™æ²¡æœ‰è¿™äº›é—®é¢˜ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = <span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;*t&quot;</span>)	<span class="comment">-- è·å–å½“å‰æ—¶é—´</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y/%m/%d&quot;</span>.<span class="built_in">os</span>.<span class="built_in">time</span>(t)))		 <span class="number">2020</span>/<span class="number">04</span>/<span class="number">17</span></span><br><span class="line">t.month = t.month + <span class="number">6</span>		 ä»å½“å¤©å¼€å§‹å¾€å<span class="number">6</span>ä¸ªæœˆ</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y/%m/%d&quot;</span>.<span class="built_in">os</span>.<span class="built_in">time</span>(t)))		 <span class="number">2020</span>/<span class="number">10</span>/<span class="number">17</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æ“ä½œæ—¥æœŸæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»è¦å°å¿ƒã€‚è™½ç„¶å½’ä¸€åŒ–æ˜¯æ˜¾è€Œæ˜“è§çš„æ–¹å¼è¿›è¡Œçš„ï¼Œä½†æ˜¯ä¹Ÿå¯èƒ½ä¼šæœ‰ä¸€äº›ä¸æ˜æ˜¾çš„åæœã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®¡ç®—March 31ä¹‹åçš„ä¸€ä¸ªæœˆï¼Œå°†ä¼šå¾—åˆ°April 31ï¼Œè€Œå®é™…ä¸Šåº”è¯¥è¢«å½’ä¸€åŒ–ä¸ºMay 1ã€‚å°½ç®¡è¿™å¬ä¸Šå»å¾ˆè‡ªç„¶ï¼Œä½†å®é™…ä¸Šå¦‚æœä»ç»“æœï¼ˆMay 1ï¼‰ä¸­å‡å»ä¸€ä¸ªæœˆï¼Œå¾—åˆ°çš„ç¡®å®April 1è€Œä¸æ˜¯åŸæ¥çš„March 31ã€‚è¯·æ³¨æ„ï¼Œè¿™ç§ä¸ä¸€è‡´æ˜¯æ—¥å†æœºåˆ¶å¯¼è‡´çš„ç»“æœï¼Œä¸Luaè¯­è¨€æ— å…³ã€‚<br>å‡½æ•°os.difftimeç”¨æ¥è®¡ç®—ä¸¤ä¸ªæ—¶é—´ä¹‹é—´çš„å·®å€¼ï¼Œè¯¥å‡½æ•°ä»¥ç§’ä¸ºå•ä½è¿”å›ä¸¤ä¸ªæŒ‡å®šæ•°å­—å½¢å¼è¡¨ç¤ºçš„æ—¶é—´çš„å·®å€¼ã€‚å¯¹äºå¤§å¤šæ•°ç³»ç»Ÿè€Œè¨€ï¼Œè¿™ä¸ªå·®å€¼å°±æ˜¯ä¸€ä¸ªæ—¶é—´ç›¸å¯¹äºå¦ä¸€ä¸ªæ—¶é—´çš„å‡æ³•ç»“æœã€‚ä½†æ˜¯ï¼Œä¸å‡æ³•ä¸åŒï¼Œå‡½æ•°os.difftimeçš„è¡Œä¸ºåœ¨ä»»ä½•ç³»ç»Ÿä¸­éƒ½æ˜¯ç¡®å®šçš„ã€‚ä»¥ä¸‹ç¤ºä¾‹è®¡ç®—äº†Lua5.2å’ŒLua5.3å‘å¸ƒæ—¶é—´ä¹‹é—´é—´éš”çš„å¤©æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> t5_3 = <span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">2015</span>,month = <span class="number">1</span>,day = <span class="number">12</span>&#125;)</span><br><span class="line"><span class="keyword">local</span> t5_2 = <span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">2011</span>,month = <span class="number">12</span>,day = <span class="number">16</span>&#125;)</span><br><span class="line"><span class="keyword">local</span> d = <span class="built_in">os</span>.<span class="built_in">difftime</span>(t5_3,t5_2)</span><br><span class="line"><span class="built_in">print</span>(d//(<span class="number">24</span> * <span class="number">3600</span>))     <span class="number">1123.0</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å‡½æ•°difftimeå¯ä»¥è·å–æŒ‡å®šæ—¥æœŸå’Œç›¸å¯¹ä»»æ„æ—¶åˆ»çš„ç§’æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">myepoch = <span class="built_in">os</span>.<span class="built_in">time</span>&#123;year = <span class="number">2000</span>,month = <span class="number">1</span>,day = <span class="number">1</span>,hour = <span class="number">0</span>&#125;</span><br><span class="line">now = <span class="built_in">os</span>.<span class="built_in">time</span>&#123;year = <span class="number">2015</span>,month = <span class="number">11</span>,day = <span class="number">20</span>&#125;</span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">difftime</span>(now,myepoch)			 <span class="number">501336000.0</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡å½’ä¸€åŒ–ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å°†ç”¨ç§’è¡¨ç¤ºçš„æ—¶é—´è½¬æ¢ä¸ºåˆæ³•çš„æ•°å­—å½¢å¼è¡¨ç¤ºçš„æ—¶é—´ï¼Œå³æˆ‘ä»¬ä»¥åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å¼€å§‹æ—¶åˆ»çš„æ—¥æœŸè¡¨å¹¶å°†æ—¥æœŸè¡¨ä¸­çš„ç§’æ•°è®¾ç½®ä¸ºæƒ³è¦è½¬æ¢çš„æ•°å­—ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">T = &#123;year = <span class="number">2000</span>,month = <span class="number">1</span>,day = <span class="number">1</span>,hour = <span class="number">0</span>&#125;</span><br><span class="line">t.sec = <span class="number">501336000</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%d/%m/%Y&quot;</span>,<span class="built_in">os</span>.<span class="built_in">time</span>(T))		 <span class="number">20</span>/<span class="number">11</span>/<span class="number">2015</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å‡½æ•°os.difftimeæ¥è®¡ç®—ä¸€æ®µä»£ç çš„æ‰§è¡Œæ—¶é—´ã€‚ä¸è¿‡ï¼Œå¯¹äºè¿™ä¸ªéœ€æ±‚æ›´å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨å‡½æ•°os.clockï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ç¨‹åºæ¶ˆè€—çš„CPUæ—¶é—´ï¼ˆå•ä½æ˜¯ç§’ï¼‰ã€‚å‡½æ•°os.clockåœ¨æ€§èƒ½æµ‹è¯•ä¸­çš„å…¸å‹ç”¨æ³•å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> x = <span class="built_in">os</span>.<span class="built_in">clock</span>()</span><br><span class="line"><span class="keyword">local</span> s = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>,<span class="number">100000</span> <span class="keyword">do</span> s = s + i <span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;elapsed time: %.2f\n&quot;</span>,<span class="built_in">os</span>.<span class="built_in">clock</span>() - x))</span><br></pre></td></tr></table></figure>
<p>ä¸å‡½æ•°os.timeä¸åŒï¼Œå‡½æ•°os.clocké€šå¸¸å…·æœ‰æ¯”ç§’æ›´é«˜çš„ç²¾åº¦ï¼Œå› æ­¤è¿”å›å€¼ä¸ºä¸€ä¸ªæµ®ç‚¹æ•°ã€‚å…·ä½“çš„ç²¾åº¦ä¸å¹³å°ç›¸å…³ï¼Œåœ¨POSIXç³»ç»Ÿä¸­é€šå¸¸æ˜¯1æ¯«ç§’ã€‚</p>
<p>@[toc]<br>Luaè¯­è¨€çš„æ ‡å‡†åº“æä¾›äº†ä¸¤ä¸ªç”¨äºæ“ä½œæ—¥æœŸå’Œæ—¶é—´çš„å‡½æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°åœ¨Cè¯­è¨€æ ‡å‡†åº“ä¸­ä¹Ÿå­˜åœ¨ï¼Œæä¾›çš„æ˜¯åŒæ ·çš„åŠŸèƒ½ã€‚è™½ç„¶è¿™ä¸¤ä¸ªå‡½æ•°çœ‹ä¸Šå»å¾ˆç®€å•ï¼Œä½†ä¾æ—§å¯ä»¥åŸºäºè¿™äº›ç®€å•çš„åŠŸèƒ½å®Œæˆå¾ˆå¤šå¤æ‚çš„å·¥ä½œã€‚<br>Luaè¯­è¨€é’ˆå¯¹æ—¥æœŸå’Œæ—¶é—´ä½¿ç”¨ä¸¤ç§è¡¨ç¤ºæ–¹å¼ã€‚ç¬¬1ä¸­è¡¨ç¤ºæ–¹å¼æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¿™ä¸ªæ•°å­—é€šå¸¸æ˜¯ä¸€ä¸ªæ•´å‹æ•°ã€‚å°½ç®¡å¹¶éIOS Cæ‰€å¿…éœ€çš„ï¼Œä½†åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­è¿™ä¸ªæ•°å­—æ—¶è‡ªä¸€ä¸ªè¢«ç§°ä¸ºçºªå…ƒçš„å›ºå®šæ—¥æœŸåè‡³ä»Šçš„ç§’æ•°ã€‚ç‰¹åˆ«åœ°ï¼Œåœ¨POSIXå’ŒWindowsç³»ç»Ÿä¸­å›½è¿™ä¸ªå›ºå®šæ—¥æœŸå‡æ˜¯Jan 01,1970,0:00 UTCã€‚<br>Luaè¯­è¨€é’ˆå¯¹æ—¥æœŸå’Œæ—¶é—´æä¾›çš„ç¬¬2ä¸­è¡¨ç¤ºæ–¹å¼æ˜¯ä¸€ä¸ªè¡¨ã€‚æ—¥æœŸè¡¨å…·æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„å­—æ®µï¼šyearã€monthã€dayã€hourã€minã€secã€wdayã€yadyå’Œisdstï¼Œé™¤isdstä»¥å¤–çš„æ‰€æœ‰å­—æ®µå‡ä¸ºæ•´å‹å€¼ã€‚å‰6ä¸ªå­—æ®µçš„å«ä¹‰éå¸¸æ˜æ˜¾ï¼Œè€Œwdayå­—æ®µè¡¨ç¤ºæœ¬å‘¨ä¸­çš„ç¬¬å‡ å¤©ï¼ˆç¬¬1å¤©ä¸ºæ˜ŸæœŸå¤©ï¼‰ï¼›ydayè¡¨ç¤ºå½“å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼ˆç¬¬1å¤©æ˜¯1æœˆ1æ—¥ï¼‰ï¼›isdstå­—æ®µè¡¨ç¤ºå¸ƒå°”ç±»å‹ï¼Œå¦‚æœä½¿ç”¨å¤æ—¶ä»¤åˆ™ä¸ºçœŸã€‚ä¾‹å¦‚ï¼ŒSep 16,1998,23:48:10ï¼ˆæ˜ŸæœŸä¸‰ï¼‰å¯¹åº”çš„è¡¨æ˜¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&#123;year = <span class="number">1998</span>,month = <span class="number">9</span>,day = <span class="number">16</span>,yday = <span class="number">259</span>,wday = <span class="number">4</span>,hour = <span class="number">23</span>,<span class="built_in">min</span> = <span class="number">48.</span>sec = <span class="number">10</span>,isdst = <span class="literal">false</span>&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¥æœŸè¡¨ä¸­ä¸åŒ…æ‹¬æ—¶åŒºï¼Œç¨‹åºéœ€è¦è´Ÿè´£ç»“åˆç›¸åº”çš„æ—¶åŒºå¯¹å…¶æ­£ç¡®è§£æã€‚</p>
<h2 id="å‡½æ•°os-time-1"><a href="#å‡½æ•°os-time-1" class="headerlink" title="å‡½æ•°os.time"></a>å‡½æ•°os.time</h2><p>ä¸å¸¦ä»»ä½•å‚æ•°è°ƒç”¨å‡½æ•°os.time,ä¼šä»¥æ•°å­—å½¢å¼è¿”å›å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">os</span>.<span class="built_in">time</span>()	    <span class="number">1587123725</span></span><br></pre></td></tr></table></figure>
<p>å¯¹åº”çš„æ—¶é—´æ˜¯April 17,2020,19:42:05ã€‚åœ¨ä¸€ä¸ªPOSIXç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›åŸºæœ¬çš„æ•°å­—è¿ç®—åˆ†ç¦»è¿™ä¸ªæ•°å­—ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">date</span> = <span class="number">1587123725</span></span><br><span class="line"><span class="keyword">local</span> day2year = <span class="number">265.242</span>			 ä¸€å¹´çš„å¤©æ•°</span><br><span class="line"><span class="keyword">local</span> sec2hour = <span class="number">60</span> * <span class="number">60</span>			 ä¸€å°æ—¶çš„ç§’æ•°</span><br><span class="line"><span class="keyword">local</span> sec2day  = sec2hour * <span class="number">24</span>       ä¸€å¤©çš„ç§’æ•°</span><br><span class="line"><span class="keyword">local</span> sec2year = sec2day * day2year  ä¸€å¹´çš„ç§’æ•°</span><br><span class="line"></span><br><span class="line"> å¹´</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">date</span> // sec2year + <span class="number">1970</span>)</span><br><span class="line"></span><br><span class="line"> å°æ—¶</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">date</span> % sec2day // sec2hour)</span><br><span class="line"></span><br><span class="line"> åˆ†é’Ÿ</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">date</span> % sec2hour // <span class="number">60</span>)</span><br><span class="line"></span><br><span class="line"> ç§’</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">date</span> % <span class="number">60</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä»¥ä¸€ä¸ªæ—¥æœŸè¡¨ä½œä¸ºå‚æ•°è°ƒç”¨os.timeï¼Œé‚£ä¹ˆæ”¹å‡½æ•°ä¼šè¿”å›è¯¥è¡¨ä¸­æ‰€æè¿°æ—¥æœŸå’Œæ—¶é—´å¯¹åº”çš„æ•°å­—ã€‚yearã€monthå’Œdayå­—æ®µæ˜¯å¿…éœ€çš„ï¼Œhourã€minå’Œsecå­—æ®µå¦‚æœæ²¡æœ‰æä¾›çš„è¯åˆ™é»˜è®¤ä¸º12:00:00ï¼Œå…¶ä½™å­—æ®µåˆ™ä¼šè¢«å¿½ç•¥ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">2020</span>,month = <span class="number">4</span>,day = <span class="number">17</span>,hour = <span class="number">19</span>,<span class="built_in">min</span> = <span class="number">42</span>,sec = <span class="number">5</span>&#125;)		 <span class="number">1587123725</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">1970</span>,month = <span class="number">1</span>,day = <span class="number">1</span>, hour = <span class="number">0</span>&#125;)							 <span class="number">10800</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">1970</span>,month = <span class="number">1</span>,day = <span class="number">1</span>, hour = <span class="number">0</span>,sec = <span class="number">1</span>&#125;)					 <span class="number">10801</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">1970</span>,month = <span class="number">1</span>,day = <span class="number">1</span>&#125;)									 <span class="number">54000</span></span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œ10800æ˜¯3ä¸ªå°æ—¶çš„ç§’æ•°ï¼Œ54000åˆ™æ˜¯10800åŠ ä¸Š12ä¸ªå°æ—¶çš„ç§’æ•°ã€‚</p>
<h2 id="å‡½æ•°os-date-1"><a href="#å‡½æ•°os-date-1" class="headerlink" title="å‡½æ•°os.date"></a>å‡½æ•°os.date</h2><p>å‡½æ•°os.dateåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯å‡½æ•°os.timeçš„åå‡½æ•°ï¼Œå®ƒå¯ä»¥å°†ä¸€ä¸ªè¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´çš„æ•°å­—è½¬æ¢ä¸ºæŸäº›é«˜çº§çš„è¡¨ç¤ºå½¢å¼ï¼Œè¦ä¹ˆæ˜¯æ—¥æœŸè¡¨è¦ä¹ˆæ˜¯å­—ç¬¦ä¸²ã€‚è¯¥å‡½æ•°çš„ç¬¬1ä¸ªå‚æ•°æ˜¯æè¿°æœŸæœ›è¡¨ç¤ºå½¢å¼çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œç¬¬2ä¸ªå‚æ•°æ˜¯æ•°å­—å½¢å¼çš„æ—¥æœŸå’Œæ—¶é—´ã€‚<br>è¦ç”Ÿæˆä¸€ä¸ªæ—¥æœŸè¡¨ï¼Œå¯ä»¥ä½¿ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²â€*tâ€ã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨å‡½æ•°os.date(â€œ*tâ€,1587123725)ä¼šè¿”å›ä¸‹åˆ—è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&#123;year = <span class="number">2020</span>,month = <span class="number">9</span>,day = <span class="number">16</span>,yday = <span class="number">108</span>,wday = <span class="number">6</span>,hour = <span class="number">19</span>,<span class="built_in">min</span> = <span class="number">42</span>,sec = <span class="number">5</span>,isdst = <span class="literal">false</span>&#125;</span><br></pre></td></tr></table></figure>
<p>å¤§è‡´ä¸Šï¼Œå¯¹äºä»»ä½•æœ‰æ•ˆçš„æ—¶é—´tï¼Œos.time(os.date(â€œ*tâ€,t)) &#x3D;&#x3D; tå‡æˆç«‹ã€‚<br>é™¤äº†isdst,ç»“æœä¸­çš„å…¶ä½™å­—æ®µå‡ä¸ºæ•´å‹æ•°ä¸”èŒƒå›´åˆ†åˆ«æ˜¯ï¼š</p>
<hr>
<p>year    ä¸€æ•´å¹´<br>month   1<del>12<br>day     1</del>31<br>hour    0<del>23<br>min     0</del>59<br>sec     0<del>60<br>wday    1</del>7<br>yday    1~366</p>
<hr>
<p>å¯¹äºå…¶ä»–æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œå‡½æ•°os.dateä¼šå°†æ—¥æœŸæ ¼å¼åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²æ˜¯æ ¹æ®æŒ‡å®šçš„æ—¶é—´å’Œæ—¥æœŸä¿¡æ¯å¯¹ç‰¹å®šçš„æŒ‡ç¤ºç¬¦è¿›è¡Œäº†æ›¿æ¢çš„ç»“æœã€‚æ‰€æœ‰çš„æŒ‡ç¤ºç¬¦éƒ½ä»¥ç™¾åˆ†å·å¼€å¤´ç´§è·Ÿä¸€ä¸ªå­—æ¯ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;a %A in %B&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%d/%m/%Y&quot;</span>,<span class="number">1587123725</span>))     <span class="number">17</span>/<span class="number">4</span>/<span class="number">2020</span></span><br></pre></td></tr></table></figure>
<p>æ‰€æœ‰çš„è¡¨ç°å½¢å¼å–å†³äºå½“å‰çš„åŒºåŸŸè®¾ç½®ã€‚<br>ä¸‹è¡¨åˆ—å‡ºäº†ä¸»è¦çš„æŒ‡ç¤ºç¬¦ã€‚</p>
<hr>
<p>%aæ˜ŸæœŸå‡ çš„ç®€å†™<br>%Aæ˜ŸæœŸå‡ çš„å…¨å<br>%bæœˆä»½çš„ç®€å†™<br>%Bæœˆä»½çš„å…¨å<br>%cæ—¥æœŸå’Œæ—¶é—´<br>%dä¸€ä¸ªæœˆä¸­çš„ç¬¬å‡ å¤©[01<del>31]<br>%H24å°æ—¶åˆ¶ä¸­çš„å°æ—¶æ•°[00</del>23]<br>%I12å°æ—¶åˆ¶ä¸­çš„å°æ—¶æ•°[01<del>12]<br>%jä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©[001</del>365]<br>%mæœˆä»½[1<del>12]<br>%Måˆ†é’Ÿ[0</del>59]<br>%pâ€amâ€æˆ–â€pmâ€<br>%Sç§’æ•°[0<del>60]<br>%wæ˜ŸæœŸ[0</del>6 &#x3D; Sunday ~ Saturday]<br>%Wä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨[0<del>53]<br>%xæ—¥æœŸ<br>%Xæ—¶é—´<br>%yä¸¤ä½æ•°çš„å¹´ä»½[0</del>99]<br>%Yå®Œæ•´çš„å¹´ä»½<br>%zæ—¶åŒº<br>%%ç™¾åˆ†å·</p>
<hr>
<p>å¯¹äºæ•°å€¼ï¼Œè¡¨ä¸­ä¹Ÿç»™å‡ºäº†å®ƒä»¬çš„æœ‰æ•ˆèŒƒå›´ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ¼”ç¤ºå¦‚ä½•åˆ›å»ºIOS 8601æ ¼å¼æ—¥æœŸå’Œæ—¶é—´çš„ç¤ºä¾‹ï¼š<br>ç”¨å‡½æ•°os.date(â€œ*tâ€,1587123725)ä¼šè¿”å›ä¸‹åˆ—è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&#123;year = <span class="number">2020</span>,month = <span class="number">9</span>,day = <span class="number">16</span>,yday = <span class="number">108</span>,wday = <span class="number">6</span>,hour = <span class="number">19</span>,<span class="built_in">min</span> = <span class="number">42</span>,sec = <span class="number">5</span>,isdst = <span class="literal">false</span>&#125;</span><br><span class="line">```lua</span><br><span class="line">t = <span class="number">1587123725</span>	 IOS <span class="number">8601</span>æ ¼å¼çš„æ—¥æœŸ</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y-%m-%d&quot;</span>,t))	 <span class="number">2020</span><span class="number">-04</span><span class="number">-17</span></span><br><span class="line"> IOS <span class="number">8601</span>æ ¼å¼çš„æ—¥æœŸå’Œæ—¶é—´</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y-%m-%dT%H:%M:%S&quot;</span>,t))	 <span class="number">2020</span><span class="number">-04</span><span class="number">-17</span>T19:<span class="number">42</span>:<span class="number">05</span></span><br><span class="line"> IOS <span class="number">8601</span>æ ¼å¼çš„åºæ•°æ—¥æœŸ</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y-%j&quot;</span>,t))			</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ ¼å¼åŒ–å­—ç¬¦ä¸²ä»¥å¹å·å¼€å¤´ï¼Œé‚£ä¹ˆå‡½æ•°os.dateä¼šä»¥UTCæ ¼å¼å¯¹å…¶è¿›è¡Œè§£æï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"> çºªå…ƒ</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;!%c&quot;</span>,<span class="number">0</span>))		 Zhu Jan <span class="number">1</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> <span class="number">1970</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸å¸¦ä»»ä½•å‚æ•°è°ƒç”¨å‡½æ•°os.dateï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¼šä½¿ç”¨æ ¼å¼%cï¼Œå³ä»¥ä¸€ç§åˆç†çš„æ ¼å¼è¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ã€‚è¯·æ³¨æ„ï¼Œ%xã€%Xå’Œ%cä¼šæ ¹æ®ä¸åŒçš„åŒºåŸŸå’Œç³»ç»Ÿè€Œå‘ç”Ÿå˜åŒ–ã€‚å¦‚æœéœ€è¦è¯¸å¦‚dd&#x2F;mm&#x2F;yyyyè¿™æ ·çš„å›ºå®šè¡¨ç¤ºå½¢å¼ï¼Œé‚£ä¹ˆå°±å¿…é¡»æ˜¾ç¤ºåœ°ä½¿ç”¨è¯¸å¦‚â€%d&#x2F;%m&#x2F;%Yâ€è¿™æ ·çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚</p>
<h2 id="æ—¥æœŸå’Œæ—¶é—´å¤„ç†-1"><a href="#æ—¥æœŸå’Œæ—¶é—´å¤„ç†-1" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´å¤„ç†"></a>æ—¥æœŸå’Œæ—¶é—´å¤„ç†</h2><p>å½“å‡½æ•°os.dateåˆ›å»ºæ—¥æœŸè¡¨æ—¶ï¼Œè¯¥è¡¨çš„æ‰€æœ‰å­—æ®µå‡åœ¨æœ‰æ•ˆçš„èŒƒå›´å†…ã€‚å½“æˆ‘ä»¬ç»™å‡½æ•°os.timeä¼ å…¥ä¸€ä¸ªæ—¥æœŸè¡¨æ—¶ï¼Œå…¶ä¸­çš„å­—æ®µå¹¶ä¸éœ€è¦å½’ä¸€åŒ–ã€‚è¿™ä¸ªç‰¹è¡Œå¯¹äºæ—¥æœŸå’Œæ—¶é—´å¤„ç†éå¸¸é‡è¦ã€‚<br>ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾æƒ³çŸ¥é“ä»å½“å‰å‘åæ•°40å¤©çš„æ—¥æœŸï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç è¿›è¡Œè®¡ç®—ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = <span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;*t&quot;</span>)		</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y/%m/%d&quot;</span>,<span class="built_in">os</span>.<span class="built_in">time</span>(t)))		 <span class="number">2020</span>/<span class="number">04</span>/<span class="number">17</span></span><br><span class="line">t.day = t.day + <span class="number">40</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y/%m/%d&quot;</span>,<span class="built_in">os</span>.<span class="built_in">time</span>(t)))		 <span class="number">2020</span>/<span class="number">05</span>/<span class="number">27</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬æŠŠæ•°å­—è¡¨ç¤ºçš„æ—¶é—´è½¬æ¢æˆæ—¥æœŸè¡¨ï¼Œé‚£ä¹ˆå°±èƒ½å¾—åˆ°æ—¥æœŸå’Œæ—¶é—´çš„å½’ä¸€åŒ–å½¢å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = <span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;*t&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(t.day,t.month)		 <span class="number">26</span> <span class="number">2</span></span><br><span class="line">t.day = t.day - <span class="number">40</span> 	</span><br><span class="line"><span class="built_in">print</span>(t.day,t.month)		 <span class="number">-14</span> <span class="number">2</span></span><br><span class="line">t = <span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;*t&quot;</span>,<span class="built_in">os</span>.<span class="built_in">time</span>(t))</span><br><span class="line"><span class="built_in">print</span>(t.day,t.month)		 <span class="number">17</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œä¹Ÿå¯ä»¥å¯¹æ•°å­—å½¢å¼çš„æ—¶é—´å¢åŠ æˆ–å‡å°‘34356000ï¼ˆ40å¤©å¯¹åº”çš„ç§’æ•°ï¼‰ã€‚ä¸è¿‡ï¼Œç”±äºæ ‡å‡†Cå¹¶ä¸è¦æ±‚æ•°å€¼è¡¨ç¤ºçš„æ—¶é—´æ˜¯ä»çºªå…ƒå¼€å§‹çš„ï¼Œå› æ­¤æ ‡å‡†Cå¹¶ä¸ä¿è¯è¿™ç§æ“ä½œçš„æ­£ç¡®æ€§ã€‚æ­¤å¤–ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å¢åŠ çš„æ˜¯æœˆä»½è€Œéå¤©æ•°ï¼Œç”±äºä¸åŒçš„æœˆä»½å…·æœ‰ä¸åŒçš„å¤©æ•°ï¼Œé‚£ä¹ˆç›´æ¥æ“ä½œç§’æ•°å°±ä¼šæœ‰é—®é¢˜ã€‚è€Œä»¥å½’ä¸€åŒ–çš„æ–¹å¼å¤„ç†åˆ™æ²¡æœ‰è¿™äº›é—®é¢˜ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = <span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;*t&quot;</span>)	 è·å–å½“å‰æ—¶é—´</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y/%m/%d&quot;</span>.<span class="built_in">os</span>.<span class="built_in">time</span>(t)))		 <span class="number">2020</span>/<span class="number">04</span>/<span class="number">17</span></span><br><span class="line">t.month = t.month + <span class="number">6</span>		 ä»å½“å¤©å¼€å§‹å¾€å<span class="number">6</span>ä¸ªæœˆ</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y/%m/%d&quot;</span>.<span class="built_in">os</span>.<span class="built_in">time</span>(t)))		 <span class="number">2020</span>/<span class="number">10</span>/<span class="number">17</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æ“ä½œæ—¥æœŸæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»è¦å°å¿ƒã€‚è™½ç„¶å½’ä¸€åŒ–æ˜¯æ˜¾è€Œæ˜“è§çš„æ–¹å¼è¿›è¡Œçš„ï¼Œä½†æ˜¯ä¹Ÿå¯èƒ½ä¼šæœ‰ä¸€äº›ä¸æ˜æ˜¾çš„åæœã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®¡ç®—March 31ä¹‹åçš„ä¸€ä¸ªæœˆï¼Œå°†ä¼šå¾—åˆ°April 31ï¼Œè€Œå®é™…ä¸Šåº”è¯¥è¢«å½’ä¸€åŒ–ä¸ºMay 1ã€‚å°½ç®¡è¿™å¬ä¸Šå»å¾ˆè‡ªç„¶ï¼Œä½†å®é™…ä¸Šå¦‚æœä»ç»“æœï¼ˆMay 1ï¼‰ä¸­å‡å»ä¸€ä¸ªæœˆï¼Œå¾—åˆ°çš„ç¡®å®April 1è€Œä¸æ˜¯åŸæ¥çš„March 31ã€‚è¯·æ³¨æ„ï¼Œè¿™ç§ä¸ä¸€è‡´æ˜¯æ—¥å†æœºåˆ¶å¯¼è‡´çš„ç»“æœï¼Œä¸Luaè¯­è¨€æ— å…³ã€‚<br>å‡½æ•°os.difftimeç”¨æ¥è®¡ç®—ä¸¤ä¸ªæ—¶é—´ä¹‹é—´çš„å·®å€¼ï¼Œè¯¥å‡½æ•°ä»¥ç§’ä¸ºå•ä½è¿”å›ä¸¤ä¸ªæŒ‡å®šæ•°å­—å½¢å¼è¡¨ç¤ºçš„æ—¶é—´çš„å·®å€¼ã€‚å¯¹äºå¤§å¤šæ•°ç³»ç»Ÿè€Œè¨€ï¼Œè¿™ä¸ªå·®å€¼å°±æ˜¯ä¸€ä¸ªæ—¶é—´ç›¸å¯¹äºå¦ä¸€ä¸ªæ—¶é—´çš„å‡æ³•ç»“æœã€‚ä½†æ˜¯ï¼Œä¸å‡æ³•ä¸åŒï¼Œå‡½æ•°os.difftimeçš„è¡Œä¸ºåœ¨ä»»ä½•ç³»ç»Ÿä¸­éƒ½æ˜¯ç¡®å®šçš„ã€‚ä»¥ä¸‹ç¤ºä¾‹è®¡ç®—äº†Lua5.2å’ŒLua5.3å‘å¸ƒæ—¶é—´ä¹‹é—´é—´éš”çš„å¤©æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> t5_3 = <span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">2015</span>,month = <span class="number">1</span>,day = <span class="number">12</span>&#125;)</span><br><span class="line"><span class="keyword">local</span> t5_2 = <span class="built_in">os</span>.<span class="built_in">time</span>(&#123;year = <span class="number">2011</span>,month = <span class="number">12</span>,day = <span class="number">16</span>&#125;)</span><br><span class="line"><span class="keyword">local</span> d = <span class="built_in">os</span>.<span class="built_in">difftime</span>(t5_3,t5_2)</span><br><span class="line"><span class="built_in">print</span>(d//(<span class="number">24</span> * <span class="number">3600</span>))     <span class="number">1123.0</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å‡½æ•°difftimeå¯ä»¥è·å–æŒ‡å®šæ—¥æœŸå’Œç›¸å¯¹ä»»æ„æ—¶åˆ»çš„ç§’æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">myepoch = <span class="built_in">os</span>.<span class="built_in">time</span>&#123;year = <span class="number">2000</span>,month = <span class="number">1</span>,day = <span class="number">1</span>,hour = <span class="number">0</span>&#125;</span><br><span class="line">now = <span class="built_in">os</span>.<span class="built_in">time</span>&#123;year = <span class="number">2015</span>,month = <span class="number">11</span>,day = <span class="number">20</span>&#125;</span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">difftime</span>(now,myepoch)			 <span class="number">501336000.0</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡å½’ä¸€åŒ–ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å°†ç”¨ç§’è¡¨ç¤ºçš„æ—¶é—´è½¬æ¢ä¸ºåˆæ³•çš„æ•°å­—å½¢å¼è¡¨ç¤ºçš„æ—¶é—´ï¼Œå³æˆ‘ä»¬ä»¥åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å¼€å§‹æ—¶åˆ»çš„æ—¥æœŸè¡¨å¹¶å°†æ—¥æœŸè¡¨ä¸­çš„ç§’æ•°è®¾ç½®ä¸ºæƒ³è¦è½¬æ¢çš„æ•°å­—ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">T = &#123;year = <span class="number">2000</span>,month = <span class="number">1</span>,day = <span class="number">1</span>,hour = <span class="number">0</span>&#125;</span><br><span class="line">t.sec = <span class="number">501336000</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%d/%m/%Y&quot;</span>,<span class="built_in">os</span>.<span class="built_in">time</span>(T))		 <span class="number">20</span>/<span class="number">11</span>/<span class="number">2015</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å‡½æ•°os.difftimeæ¥è®¡ç®—ä¸€æ®µä»£ç çš„æ‰§è¡Œæ—¶é—´ã€‚ä¸è¿‡ï¼Œå¯¹äºè¿™ä¸ªéœ€æ±‚æ›´å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨å‡½æ•°os.clockï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ç¨‹åºæ¶ˆè€—çš„CPUæ—¶é—´ï¼ˆå•ä½æ˜¯ç§’ï¼‰ã€‚å‡½æ•°os.clockåœ¨æ€§èƒ½æµ‹è¯•ä¸­çš„å…¸å‹ç”¨æ³•å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> x = <span class="built_in">os</span>.<span class="built_in">clock</span>()</span><br><span class="line"><span class="keyword">local</span> s = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>,<span class="number">100000</span> <span class="keyword">do</span> s = s + i <span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;elapsed time: %.2f\n&quot;</span>,<span class="built_in">os</span>.<span class="built_in">clock</span>() - x))</span><br></pre></td></tr></table></figure>
<p>ä¸å‡½æ•°os.timeä¸åŒï¼Œå‡½æ•°os.clocké€šå¸¸å…·æœ‰æ¯”ç§’æ›´é«˜çš„ç²¾åº¦ï¼Œå› æ­¤è¿”å›å€¼ä¸ºä¸€ä¸ªæµ®ç‚¹æ•°ã€‚å…·ä½“çš„ç²¾åº¦ä¸å¹³å°ç›¸å…³ï¼Œåœ¨POSIXç³»ç»Ÿä¸­é€šå¸¸æ˜¯1æ¯«ç§’ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaæ¨¡å—å¼•å…¥importå’Œrequireçš„åŒºåˆ«</title>
    <url>/57048.html</url>
    <content><![CDATA[<p>Lua ä¸­å¼•å…¥ä¸€ä¸ªæ¨¡å—ï¼Œå¯ä»¥é‡‡ç”¨ä¸¤ç§æ–¹å¼ï¼š<code>import </code>å’Œ<code>require</code>æ–¹å¼ï¼Œå…·ä½“çš„åŒºåˆ«åœ¨äºï¼š</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="è½½å…¥ä¸€ä¸ªæ¨¡å—"><a href="#è½½å…¥ä¸€ä¸ªæ¨¡å—" class="headerlink" title="è½½å…¥ä¸€ä¸ªæ¨¡å—"></a>è½½å…¥ä¸€ä¸ªæ¨¡å—</h3><p><code>import() </code>ä¸ <code>require() </code>åŠŸèƒ½ç›¸åŒï¼Œä½†å…·æœ‰ä¸€å®šç¨‹åº¦çš„è‡ªåŠ¨åŒ–ç‰¹æ€§ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹çš„ç›®å½•ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">app/</span><br><span class="line">app/classes/</span><br><span class="line">app/classes/MyClass.lua</span><br><span class="line">app/classes/MyClassBase.lua</span><br><span class="line">app/classes/data/Data1.lua</span><br><span class="line">app/classes/data/Data2.lua</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>MyClass ä¸­éœ€è¦è½½å…¥ MyClassBase å’Œ MyClassDataã€‚å¦‚æœç”¨ require()ï¼ŒMyClass å†…çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">local</span> MyClassBase = <span class="built_in">require</span>(<span class="string">&quot;app.classes.MyClassBase&quot;</span>)</span><br><span class="line"><span class="keyword">local</span> MyClass = class(<span class="string">&quot;MyClass&quot;</span>, MyClassBase)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> Data1 = <span class="built_in">require</span>(<span class="string">&quot;app.classes.data.Data1&quot;</span>)</span><br><span class="line"><span class="keyword">local</span> Data2 = <span class="built_in">require</span>(<span class="string">&quot;app.classes.data.Data2&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å‡å¦‚æˆ‘ä»¬å°† MyClass åŠå…¶ç›¸å…³æ–‡ä»¶æ¢ä¸€ä¸ªç›®å½•å­˜æ”¾ï¼Œé‚£ä¹ˆå°±å¿…é¡»ä¿®æ”¹ MyClass ä¸­çš„ require() å‘½ä»¤ï¼Œå¦åˆ™å°†æ‰¾ä¸åˆ°æ¨¡å—æ–‡ä»¶ã€‚</p>
<p>è€Œä½¿ç”¨ import()ï¼Œæˆ‘ä»¬åªéœ€è¦å¦‚ä¸‹å†™ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">local</span> MyClassBase = import(<span class="string">&quot;.MyClassBase&quot;</span>)</span><br><span class="line"><span class="keyword">local</span> MyClass = class(<span class="string">&quot;MyClass&quot;</span>, MyClassBase)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> Data1 = import(<span class="string">&quot;.data.Data1&quot;</span>)</span><br><span class="line"><span class="keyword">local</span> Data2 = import(<span class="string">&quot;.data.Data2&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å½“åœ¨æ¨¡å—åå‰é¢æœ‰ä¸€ä¸ªâ€.â€ æ—¶ï¼Œimport() ä¼šä»å½“å‰æ¨¡å—æ‰€åœ¨ç›®å½•ä¸­æŸ¥æ‰¾å…¶ä»–æ¨¡å—ã€‚å› æ­¤ MyClass åŠå…¶ç›¸å…³æ–‡ä»¶ä¸ç®¡å­˜æ”¾åˆ°ä»€ä¹ˆç›®å½•é‡Œï¼Œæˆ‘ä»¬éƒ½ä¸å†éœ€è¦ä¿®æ”¹ MyClass ä¸­çš„ import() å‘½ä»¤ã€‚è¿™åœ¨å¼€å‘ä¸€äº›é‡å¤ä½¿ç”¨çš„åŠŸèƒ½ç»„ä»¶æ—¶ï¼Œä¼šéå¸¸æ–¹ä¾¿ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨æ¨¡å—åå‰æ·»åŠ å¤šä¸ªâ€.â€ ï¼Œè¿™æ · import() ä¼šä»æ›´ä¸Šå±‚çš„ç›®å½•å¼€å§‹æŸ¥æ‰¾æ¨¡å—ã€‚</p>
<p>ä¸è¿‡ import() åªæœ‰åœ¨æ¨¡å—çº§åˆ«è°ƒç”¨ï¼ˆä¹Ÿå°±æ˜¯æ²¡æœ‰å°† import() å†™åœ¨ä»»ä½•å‡½æ•°ä¸­ï¼‰æ—¶ï¼Œæ‰èƒ½å¤Ÿè‡ªåŠ¨å¾—åˆ°å½“å‰æ¨¡å—åã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaæ¨¡å¼åŒ¹é…</title>
    <url>/47260.html</url>
    <content><![CDATA[<p>ä¸å…¶ä»–å‡ ç§è„šæœ¬è¯­è¨€ä¸é€šï¼ŒLuaè¯­è¨€æ—¢æ²¡æœ‰ä½¿ç”¨POSIXæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¹Ÿæ²¡æœ‰ä½¿ç”¨Perlæ­£åˆ™è¡¨è¾¾å¼æ¥è¿›è¡Œæ¨¡å¼åŒ¹é…ã€‚ä¹‹æ‰€ä»¥è¿™æ ·åšçš„ä¸»è¦åŸå› åœ¨äºå¤§å°é—®é¢˜ï¼šä¸€ä¸ªå…¸å‹çš„POSIXæ­£åˆ™è¡¨è¾¾å¼å®ç°éœ€è¦è¶…è¿‡4000è¡Œä»£ç ï¼Œè¿™æ¯”æ‰€æœ‰Luaè¯­è¨€æ ‡å‡†åº“æ€»å¤§å°çš„ä¸€åŠè¿˜å¤§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒLuaè¯­è¨€æ¨¡å¼åŒ¹é…çš„å®ç°ä»£ç åªæœ‰ä¸åˆ°600è¡Œã€‚å°½ç®¡Luaè¯­è¨€çš„æ¬§å¼åŒ¹é…åšä¸åˆ°å®Œæ•´POSIXå®ç°çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä½†æ˜¯Luaè¯­è¨€çš„æ¨¡å¼åŒ¹é…ä»ç„¶éå¸¸å¼ºå¤§ï¼ŒåŒæ—¶è¿˜å…·æœ‰ä¸€äº›ä¸æ ‡å‡†POSIXä¸åŒä½†åˆå¯ä¸ä¹‹åª²ç¾çš„åŠŸèƒ½ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>



<h2 id="æ¨¡å¼åŒ¹é…çš„ç›¸å…³å‡½æ•°"><a href="#æ¨¡å¼åŒ¹é…çš„ç›¸å…³å‡½æ•°" class="headerlink" title="æ¨¡å¼åŒ¹é…çš„ç›¸å…³å‡½æ•°"></a>æ¨¡å¼åŒ¹é…çš„ç›¸å…³å‡½æ•°</h2><p>å­—ç¬¦ä¸²æ ‡å‡†åº“æä¾›äº†åŸºäºæ¨¡å¼çš„4ä¸ªå‡½æ•°ã€‚æˆ‘ä»¬å·²ç»åˆæ­¥äº†è§£è¿‡å‡½æ•°findå’Œgsubï¼Œå…¶ä½™ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«æ˜¯matchå’Œgmatchã€‚</p>
<h3 id="å‡½æ•°string-find"><a href="#å‡½æ•°string-find" class="headerlink" title="å‡½æ•°string.find"></a>å‡½æ•°string.find</h3><p>å‡½æ•°string.findç”¨äºåœ¨æŒ‡å®šçš„ç›®æ ‡å­—ç¬¦ä¸²ä¸­æœç´¢æŒ‡å®šçš„æ¨¡å¼ã€‚æœ€ç®€å•çš„æ¨¡å¼å°±æ˜¯ä¸€ä¸ªå•è¯ï¼Œå®ƒæ™ºæ…§åŒ¹é…åˆ°è¿™ä¸ªå•è¯æœ¬èº«ã€‚ä¾‹å¦‚ï¼Œæ¨¡å¼â€™helloâ€™ä¼šåœ¨ç›®æ ‡è‡ªæœè£…ä¸­æ‰€æœå­ä¸²â€helloâ€ã€‚å‡½æ•°string.findæ‰¾åˆ°ä¸€ä¸ªæ¨¡å¼åï¼Œä¼šè¿”å›ä¸¤ä¸ªå€¼ï¼šåŒ¹é…åˆ°æ¨¡å¼å¼€å§‹ä½ç½®çš„ç´¢å¼•å’Œç»“æŸä½ç½®çš„ç´¢å¼•ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•åŒ¹é…ï¼Œåˆ™è¿”å›nilï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&quot;hello world&quot;</span></span><br><span class="line">i,j = <span class="built_in">string</span>.<span class="built_in">find</span>(s,<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(i,j)				<span class="comment">-- 1	5</span></span><br><span class="line">	<span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(s,i,j)) <span class="comment">-- hello</span></span><br><span class="line">	<span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">find</span>(s,<span class="string">&quot;world&quot;</span>))	<span class="comment">--	7	11</span></span><br><span class="line">	i,j = <span class="built_in">string</span>.<span class="built_in">find</span>(s,<span class="string">&quot;l&quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(i,j)			<span class="comment">-- 3	3</span></span><br><span class="line">	<span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">find</span>(s,<span class="string">&quot;lll&quot;</span>))		<span class="comment">-- nil</span></span><br></pre></td></tr></table></figure>
<p>åŒ¹é…æˆåŠŸåï¼Œå¯ä»¥ä»¥å‡½æ•°findè¿”å›çš„ç»“æœä¸ºå‚æ•°è°ƒç”¨å‡½æ•°string.subæ¥è·å–ç›®æ ‡å­—ç¬¦ä¸²åŒ¹é…ç›¸åº”æ¨¡å¼çš„å­ä¸²ã€‚å¯¹äºç®€å•çš„æ¨¡å¼æ¥è¯´ï¼Œè¿™ä¸€èˆ¬å°±æ˜¯æ¨¡å¼æœ¬èº«ã€‚<br>å‡½æ•°string.findå…·æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ã€‚ç¬¬3ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç´¢å¼•ï¼Œç”¨äºè¯´æ˜ä»ç›®æ ‡å­—ç¬¦ä¸²çš„å“ªä¸ªä½ç½®å¼€å§‹æœç´¢ã€‚ç¬¬4ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºè¯´æ˜æ˜¯å¦è¿›è¡Œç®€å•æœç´¢ã€‚æ‰€è°“ç®€å•æ‰€æœ‰å°±æ˜¯å¿½ç•¥æ¨¡å¼è€Œåœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­è¿›è¡Œå•çº¯çš„â€œæŸ¥æ‰¾å­å­—ç¬¦ä¸²â€çš„åŠ¨ä½œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;a[word]&quot;</span>,<span class="string">&quot;[&quot;</span>)</span><br><span class="line"><span class="built_in">stdin</span>:<span class="number">1</span>:malformed pattern (missing <span class="string">&#x27;]&#x27;</span>)</span><br><span class="line">&gt; <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;a [word]&quot;</span>,<span class="string">&quot;[&quot;</span>,<span class="number">1</span>,<span class="literal">true</span>) 		<span class="comment">-- 3	3</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºâ€™[â€˜åœ¨æ¨¡å¼ä¸­å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå› æ­¤ç¬¬1ä¸ªå‡½æ•°è°ƒç”¨ä¼šæŠ¥é”™ã€‚åœ¨ç¬¬2ä¸ªå‡½æ•°è°ƒç”¨ä¸­ï¼Œå‡½æ•°åªæ˜¯æŠŠâ€™[â€˜å½“ä½œç®€å•å­—ç¬¦ä¸²ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœæ²¡æœ‰ç¬¬3ä¸ªå‚æ•°ï¼Œæ˜¯ä¸èƒ½ä¼ å…¥ç¬¬4ä¸ªå¯é€‰å‚æ•°çš„ã€‚</p>
<h3 id="å‡½æ•°string-match"><a href="#å‡½æ•°string-match" class="headerlink" title="å‡½æ•°string.match"></a>å‡½æ•°string.match</h3><p>ç”±äºå‡½æ•°string.matchä¹Ÿç”¨äºåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æœç´¢æ¨¡å¼ï¼Œå› æ­¤å®ƒä¸å‡½æ•°string.findéå¸¸ç›¸ä¼¼ã€‚ä¸è¿‡ï¼Œå‡½æ•°string.matchè¿”å›çš„æ˜¯ç›®æ ‡å­—ç¬¦ä¸²ä¸­ä¸æ¨¡å¼ç›¸åŒ¹é…çš„é‚£éƒ¨åˆ†å­ä¸²ï¼Œè€Œéè¯¥æ¨¡å¼æ‰€åœ¨çš„ä½ç½®ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">match</span>(<span class="string">&quot;hello world&quot;</span>,<span class="string">&quot;hello&quot;</span>))			<span class="comment">-- hello</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºè¯¸å¦‚â€™helloâ€™è¿™æ ·å›ºå®šçš„æ¨¡å¼ï¼Œä½¿ç”¨è¿™ä¸ªå‡½æ•°å¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚ç„¶è€Œï¼Œå½“æ¨¡å¼æ˜¯å˜é‡æ—¶ï¼Œè¿™ä¸ªå‡½æ•°çš„å¼ºå¤§ä¹‹å¤„å°±æ˜¾ç°å‡ºæ¥äº†ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">date</span> = <span class="string">&quot;Today is 15/4/2020&quot;</span></span><br><span class="line">d = <span class="built_in">string</span>.<span class="built_in">match</span>(<span class="built_in">date</span>,<span class="string">&quot;%d + /%d + /%d +&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(d)		<span class="comment">-- 15/4/2020</span></span><br></pre></td></tr></table></figure>

<h3 id="å‡½æ•°string-gmatch"><a href="#å‡½æ•°string-gmatch" class="headerlink" title="å‡½æ•°string.gmatch"></a>å‡½æ•°string.gmatch</h3><p> å‡½æ•°string.gmatchè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡è¿”å›çš„å‡½æ•°å¯ä»¥éå†ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ‰€æœ‰å‡ºç°çš„æŒ‡å®šæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ç¤ºä¾‹å¯ä»¥æ‰¾å‡ºå­—ç¬¦ä¸²sä¸­å‡ºç°çš„æ‰€æœ‰å•è¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&quot;some string&quot;</span></span><br><span class="line">words = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(s,<span class="string">&quot;%a+&quot;</span>) <span class="keyword">do</span> </span><br><span class="line">	words[#words + <span class="number">1</span>] = w</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¨¡å¼"><a href="#æ¨¡å¼" class="headerlink" title="æ¨¡å¼"></a>æ¨¡å¼</h2><p> å¤§å¤šæ•°æ¨¡å¼åŒ¹é…åº“éƒ½æ˜¯ç”¨åæ–œæ ä½œä¸ºè½¬ä¹‰ç¬¦ã€‚ç„¶åï¼Œè¿™ç§æ–¹å¼å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ä¸è‰¯çš„åæœã€‚å¯¹äºLuaè¯­è¨€çš„è§£æå™¨è€Œè¨€ï¼Œæ¨¡å¼ä»…ä»…æ˜¯æ™®é€šçš„å­—ç¬¦ä¸²ã€‚æ¨¡å¼ä¸å…¶ä»–çš„å­—ç¬¦ä¸²ä¸€æ ·éµå¾ªç›¸åŒçš„è§„åˆ™ï¼Œå¹¶ä¸ä¼šè¢«ç‰¹æ®Šå¯¹å¾…ï¼›åªæœ‰æ¨¡å¼åŒ¹é…ç›¸å…³çš„å‡½æ•°æ‰ä¼šæŠŠå®ƒä»¬å½“åšæ¨¡å¼è¿›è¡Œè§£æã€‚ç”±äºåæ–œæ æ˜¯Luaè¯­è¨€ä¸­çš„è½¬ä¹‰ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥é¿å…å®ƒä¼ é€’ç»™ä»»ä½•å‡½æ•°ã€‚æ¨¡å¼æœ¬èº«å°±éš¾ä»¥é˜…è¯»ï¼Œåˆ°å¤„æŠŠâ€œ\â€æ¢æˆâ€œ\â€å°±æ›´åŠ ç«ä¸Šæµ‡æ²¹äº†ã€‚<br> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæ‹¬å·æŠŠæ¨¡å¼æ‹¬èµ·æ¥æ„æˆçš„é•¿å­—ç¬¦ä¸²æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç„¶è€Œï¼Œé•¿å­—ç¬¦ä¸²çš„å†™æ³•å¯¹äºé€šå¸¸æ¯”è¾ƒçŸ­çš„æ¨¡å¼è€Œè¨€åˆå¾€å¾€æ˜¾å¾—å†—é•¿ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä¼šå¤±å»åœ¨æ¨¡å¼å†…è¿›è¡Œè½¬ä¹‰çš„èƒ½åŠ›ã€‚<br> Luaè¯­è¨€çš„è§£å†³æ–¹æ¡ˆæ›´åŠ ç®€å•ï¼šLuaè¯­è¨€ä¸­çš„æ¨¡å¼ä½¿ç”¨ç™¾åˆ†å·ä½œä¸ºè½¬ä¹‰ç¬¦ã€‚æ€»ä½“ä¸Šï¼Œæ‰€æœ‰è¢«è½¬ä¹‰çš„å­—æ¯éƒ½å…·æœ‰æŸäº›ç‰¹æ®Šå«ä¹‰ï¼Œè€Œæ‰€æœ‰è¢«è½¬ç§»çš„éå­—æ¯åˆ™ä»£è¡¨å…¶æœ¬èº«ã€‚<br> æˆ‘ä»¬é¦–å…ˆæ¥å­¦ä¹ å­—ç¬¦åˆ†ç±»çš„æ¨¡å¼ã€‚æ‰€è°“å­—ç¬¦åˆ†ç±»ï¼Œå°±æ˜¯æ¨¡å¼ä¸­èƒ½å¤Ÿä¸ä¸€ä¸ªç‰¹å®šé›†åˆä¸­çš„ä»»æ„å­—ç¬¦ç›¸åŒ¹é…çš„ä¸€é¡¹ã€‚ä¾‹å¦‚ï¼Œåˆ†ç±»%dåŒ¹é…çš„æ˜¯ä»»æ„æ•°å­—ã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡å¼â€™%d%d&#x2F;%d%&#x2F;d%d%d%dâ€™æ¥åŒ¹é…dd&#x2F;mm&#x2F;yyyyæ ¼å¼çš„æ—¥æœŸï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&quot;Deadline is 15/04/2020, firm</span></span><br><span class="line"><span class="string">date = &quot;</span>%d%d/%d%d/%d%d%d%d<span class="string">&quot;</span></span><br><span class="line"><span class="string">print(string.match(s,date))		-- 15/04/2020</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹è¡¨åˆ—å‡ºäº†æ‰€æœ‰é¢„ç½®çš„å­—ç¬¦ä¸²åˆ†ç±»åŠå…¶å¯¹åº”çš„å«ä¹‰ï¼š</p>
<hr>
<p>.					  ä»»æ„å­—ç¬¦<br>%a				  å­—æ¯<br>%c				  æ§åˆ¶å­—ç¬¦<br>%d				  æ•°å­—<br>%g				  é™¤ç©ºæ ¼å¤–çš„å¯æ‰“å°å­—ç¬¦	<br>%l				  å°å†™å­—æ¯<br>%p				  æ ‡ç‚¹ç¬¦å·<br>%s				  ç©ºç™½å­—ç¬¦<br>%u				  å¤§å†™å­—æ¯<br>%w				  å­—æ¯å’Œæ•°å­—<br>%x				  åå…­è¿›åˆ¶æ•°å­—</p>
<hr>
<p> è¿™äº›ç±»çš„å¤§å†™å½¢å¼è¡¨ç¤ºç±»çš„è¡¥é›†ã€‚ä¾‹å¦‚ï¼Œ<code>%A</code>ä»£è¡¨ä»»æ„éå­—æ¯çš„å­—ç¬¦ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>((<span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;hello, up-down!&quot;</span>,<span class="string">&quot;%A&quot;</span>,<span class="string">&quot;.&quot;</span>))) <span class="comment">-- hello..up.down.</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¾“å‡ºå‡½æ•°gsubçš„è¿”å›ç»“æœæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†é¢å¤–çš„æ‹¬å·æ¥ä¸¢å¼ƒç¬¬äºŒä¸ªç»“æœï¼Œä¹Ÿå°±æ˜¯ç‰¹æ¢å‘ç”Ÿçš„æ¬¡æ•°ã€‚<br> å½“åœ¨æ¨¡å¼ä¸­ä½¿ç”¨æ—¶ï¼Œè¿˜æœ‰ä¸€äº›è¢«ç§°ä¸ºé­”æ³•å­—ç¬¦çš„å­—ç¬¦å…·æœ‰ç‰¹æ®Šå«ä¹‰ã€‚Luaè¯­è¨€çš„æ¨¡å¼æ‰€ä½¿ç”¨çš„é­”æ³•å­—ç¬¦åŒ…æ‹¬ï¼š<br><code>()</code> <code>.</code> <code>%</code> <code>+</code> <code>-</code> <code>*</code> <code>?</code> <code>[</code> <code>]</code> <code>^</code> <code>$</code><br>æ­£å¦‚æˆ‘ä»¬ä¹‹å‰å·²ç»çœ‹åˆ°çš„ï¼Œç™¾åˆ†å·åŒæ ·å¯ä»¥ç”¨äºè¿™äº›é­”æ³•å­—ç¬¦çš„è½¬ä¹‰ã€‚å› æ­¤ï¼Œ<code>%?</code>åŒ¹é…ä¸€ä¸ªé—®å·ï¼Œ<code>%%</code>åŒ¹é…ä¸€ä¸ªç™¾åˆ†å·ã€‚æˆ‘ä»¬ä¸ä»…å¯ä»¥ç”¨ç™¾åˆ†å·å¯¹é­”æ³•å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œè¿˜å¯ä»¥å°†å…¶ç”¨äºå…¶ä»–æ‰€æœ‰å­—æ¯å’Œæ•°å­—å¤–çš„å­—ç¬¦ã€‚å½“ä¸ç¡®å®šæ˜¯å¦éœ€è¦è½¬ä¹‰æ—¶ï¼Œä¸ºäº†ä¿é™©èµ·è§å°±å¯ä»¥ä½¿ç”¨è½¬ä¹‰ç¬¦ã€‚<br> å¯ä»¥ä½¿ç”¨å­—ç¬¦é›†æ¥åˆ›å»ºè‡ªå®šä¹‰çš„å­—ç¬¦åˆ†ç±»ï¼Œåªéœ€è¦åœ¨æ–¹æ‹¬å·å†…å°†å•ä¸ªå­—ç¬¦å’Œå­—ç¬¦åˆ†ç±»ç»„åˆèµ·æ¥å³å¯ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦é›†<code>[%w_]</code>åŒ¹é…æ‰€æœ‰ä»¥ä¸‹ç”»çº¿ç»“å°¾çš„å­—æ¯å’Œæ•°å­—ï¼Œ<code>[01]</code>åŒ¹é…äºŒè¿›åˆ¶æ•°å­—ï¼Œ<code>[%[%]]</code>åŒ¹é…æ–¹æ‹¬å·ã€‚å¦‚æœæƒ³è¦ç»Ÿè®¡ä¸€æ®µæ–‡æœ¬ä¸­å…ƒéŸ³çš„æ•°é‡ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">_,nvow = <span class="built_in">string</span>.<span class="built_in">gsub</span>(text,<span class="string">&quot;[AEIOUaeiou]&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥åœ¨å­—ç¬¦é›†ä¸­åŒ…å«ä¸€æ®µå­—ç¬¦èŒƒå›´ï¼Œåšæ³•æ˜¯å†™å‡ºå­—ç¬¦èŒƒå›´çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å’Œæœ€åä¸€ä¸ªå­—ç¬¦å¹¶ç”¨æ¨ªçº¿å°†å®ƒä»¬è¿æ¥åœ¨ä¸€èµ·ã€‚ç”±äºå¤§å¤šæ•°å¸¸ç”¨çš„å­—ç¬¦èŒƒå›´éƒ½è¢«é¢„å…ˆå®šä¹‰äº†ï¼Œæ‰€ä»¥è¿™ä¸ªåŠŸèƒ½å¾ˆå°‘è¢«ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œ<code>%d</code>ç›¸å½“äº<code>[0,9]</code>ï¼Œ<code>%x</code>ç›¸å½“äº<code>[0-9a-fA-F]</code>ã€‚ä¸è¿‡ï¼Œå¦‚æœéœ€è¦æŸ¥æ‰¾ä¸€ä¸ªå…«è¿›åˆ¶çš„æ•°å­—ï¼Œé‚£ä¹ˆä½¿ç”¨<code>[0-7]</code>å°±æ¯”æ˜¾ç¤ºåœ°æšä¸¾<code>[01234567]</code>å¼ºå¤šäº†ã€‚<br> åœ¨å­—ç¬¦é›†å‰åŠ ä¸€ä¸ªè¡¥å­—ç¬¦^å°±å¯ä»¥å¾—åˆ°è¿™ä¸ªå­—ç¬¦é›†å¯¹åº”çš„è¡¥é›†ï¼šæ¨¡å¼<code>[^\n]</code>åˆ™ä»£è¡¨é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„å…¶ä»–å­—ç¬¦ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦è®°å¾—å¯¹äºç®€å•çš„åˆ†ç±»æ¥è¯´å¯ä»¥ä½¿ç”¨å¤§å†™å½¢å¼æ¥è·å¾—å¯¹åº”çš„è¡¥é›†ï¼š<code>$S</code>æ˜¾ç„¶è¦æ¯”<code>[^%s]</code>æ›´ç®€å•ã€‚<br> è¿˜å¯ä»¥é€šè¿‡æè¿°æ¨¡å¼ä¸­é‡å¤å’Œå¯é€‰éƒ¨åˆ†çš„ä¿®é¥°ç¬¦æ¥è®©æ¨¡å¼æ›´åŠ æœ‰ç”¨ã€‚Luaè¯­è¨€ä¸­çš„æ¨¡å¼æä¾›äº†4ä¸­ä¿®é¥°ç¬¦ï¼š</p>
<hr>
<p><code>+</code>  é‡å¤ä¸€æ¬¡æˆ–å¤šæ¬¡<br><code>*</code>  é‡å¤é›¶æ¬¡æˆ–å¤šæ¬¡<br><code>-</code>  é‡å¤é›¶æ¬¡æˆ–å¤šæ¬¡ï¼ˆæœ€å°åŒ¹é…ï¼‰<br><code>?</code>  å¯é€‰ï¼ˆå‡ºç°é›¶æ¬¡æˆ–ä¸€æ¬¡ï¼‰</p>
<hr>
<p> ä¿®é¥°ç¬¦ + åŒ¹é…åŸå§‹å­—ç¬¦ä¸²åˆ†ç±»ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œå®ƒæ€»æ˜¯è·å–ä¸æ¨¡å¼ç›¸åŒ¹é…çš„æœ€é•¿åºåˆ—ã€‚ä¾‹å¦‚ï¼Œæ¨¡å¼â€™%a+â€™ä»£è¡¨ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>((<span class="built_in">string</span>.gusb(<span class="string">&quot;one , and two; and three&quot;</span>, <span class="string">&quot;%a+&quot;</span>,<span class="string">&quot;word&quot;</span>)))</span><br><span class="line"><span class="comment">-- word, word word; word word</span></span><br></pre></td></tr></table></figure>
<p>æ¨¡å¼â€™%d+â€™åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">match</span>(<span class="string">&quot;the number 1298 is event&quot;</span>,<span class="string">&quot;%d+&quot;</span>))	<span class="comment">-- 1298</span></span><br></pre></td></tr></table></figure>
<p> ä¿®é¥°ç¬¦ * ç±»ä¼¼äºä¿®é¥°ç¬¦+ï¼Œä½†æ˜¯å®ƒè¿˜æ¥å—å¯¹åº”å­—ç¬¦åˆ†ç±»å‡ºç°é›¶æ¬¡çš„æƒ…å†µã€‚è¯¥ä¿®é¥°ç¬¦ä¸€ä¸ªå…¸å‹çš„ç”¨æ³•å°±æ˜¯åœ¨æ¨¡å¼çš„éƒ¨åˆ†ä¹‹é—´åŒ¹é…å¯é€‰çš„ç©ºæ ¼ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†åŒ¹é…åƒï¼ˆï¼‰æˆ–ï¼ˆï¼‰è¿™æ ·çš„ç©ºæ‹¬å·å¯¹ï¼Œå°±å¯ä»¥ä½¿ç”¨æ¨¡å¼<code>&#39;%(%s*%)&#39;</code>ï¼Œå…¶ä¸­çš„<code>&#39;%s*&#39;</code>åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªç©ºæ ¼ã€‚å¦ä¸€ä¸ªç¤ºä¾‹æ˜¯ç”¨æ¨¡å¼<code>&#39;[_%a][_%w]*&#39;</code>åŒ¹é…Luaç¨‹åºä¸­çš„æ ‡è¯†ç¬¦ï¼šæ ‡è¯†ç¬¦æ˜¯ä¸€ä¸ªç”±å­—æ¯æˆ–ä¸‹ç”»çº¿å¼€å¤´ï¼Œå¹¶ç´§è·Ÿé›¶ä¸ªæˆ–å¤šä¸ªç”±ä¸‹ç”»çº¿ã€å­—æ¯æˆ–æ•°å­—ç»„æˆçš„åºåˆ—ã€‚<br> ä¿®é¥°ç¬¦-å’Œä¿®é¥°ç¬¦ * ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç”¨äºåŒ¹é…åŸå§‹å­—ç¬¦åˆ†ç±»çš„é›¶æ¬¡æˆ–å¤šæ¬¡å‡ºç°ã€‚ä¸è¿‡ï¼Œè·Ÿä¿®é¥°ç¬¦ * æ€»æ˜¯åŒ¹é…èƒ½åŒ¹é…çš„æœ€é•¿åºåˆ—ä¸åŒï¼Œä¿®é¥°ç¬¦-åªä¼šåŒ¹é…æœ€çŸ­åºåˆ—ã€‚è™½ç„¶æœ‰æ—¶å®ƒä»¬ä¸¤è€…å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¸‹è¿™ä¸¤è€…ä¼šå¯¼è‡´æˆªç„¶ä¸åŒçš„ç»“æœã€‚ä¾‹å¦‚ï¼Œå½“è¯•å›¾ç”¨æ¨¡å¼<code>&#39;[_%a][_%w]-&#39;</code>æŸ¥æ‰¾æ ‡è¯†ç¬¦æ—¶ï¼Œç”±äº<code>[_%w]-</code>æ€»æ˜¯åŒ¹é…ç©ºåºåˆ—ï¼Œæ‰€ä»¥æˆ‘ä»¬åªä¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªå­—æ¯ã€‚åˆå¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦åˆ æ‰æŸCè¯­è¨€ç¨‹åºä¸­çš„æ‰€æœ‰æ³¨é‡Šï¼Œé€šå¸¸ä¼šé¦–å…ˆå°è¯•ä½¿ç”¨<code>&#39;/%*.*%*/&#39;</code>ã€‚ç„¶è€Œï¼Œç”±äº<code>&#39;.*</code>ä¼šå°½å¯èƒ½é•¿åœ°åŒ¹é…ï¼Œå› æ­¤ç¨‹åºä¸­çš„ç¬¬ä¸€ä¸ª<code>&quot;/*&quot;</code>åªä¼šä¸æœ€åä¸€ä¸ª<code>&quot;*/&quot;</code>ç›¸åŒ¹é…ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">test = <span class="string">&quot;int x; /* x */ int y; /* y * /&quot;</span></span><br><span class="line"><span class="built_in">print</span>((<span class="built_in">string</span>.<span class="built_in">gsub</span>(test,<span class="string">&quot;/%*.*%*/&quot;</span>, <span class="string">&quot;&quot;</span>)))</span><br><span class="line"><span class="comment">-- int x</span></span><br></pre></td></tr></table></figure>
<p>ç›¸åï¼Œæ¨¡å¼â€™.-â€˜åˆ™åªä¼šåŒ¹é…åˆ°æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªâ€*&#x2F;â€œï¼Œè¿™æ ·å°±èƒ½å¾—åˆ°æœŸæœ›çš„ç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">test = <span class="string">&quot;int x; /* x */ int y; /* y * /&quot;</span></span><br><span class="line"><span class="built_in">print</span>((<span class="built_in">string</span>.<span class="built_in">gsub</span>(test,<span class="string">&quot;/%*.-*%*/&quot;</span>, <span class="string">&quot;&quot;</span>)))</span><br><span class="line"><span class="comment">-- int x;	int y</span></span><br></pre></td></tr></table></figure>
<p> æœ€åä¸€ä¸ªä¿®é¥°ç¬¦ï¼Ÿå¯ç”¨äºåŒ¹é…ä¸€ä¸ªå¯é€‰çš„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³åœ¨ä¸€æ®µæ–‡æœ¬ä¸­å¯»æ‰¾ä¸€ä¸ªè¯ä¹¦ï¼Œè€Œè¿™ä¸ªè¯ä¹¦å¯èƒ½åŒ…æ‹¬ä¸€ä¸ªå¯é€‰çš„ç¬¦å·ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨æ¨¡å¼<code>[+-]?%d+</code>æ¥å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼Œè¯¥æ¨¡å¼å¯ä»¥åŒ¹é…åƒâ€œ-12â€ã€â€œ23â€å’Œâ€œ+1009â€è¿™æ ·çš„æ•°å­—ã€‚å…¶ä¸­å­—ç¬¦åˆ†ç±»<code>[+-]</code>åŒ¹é…åŠ å·æˆ–å‡å·ï¼Œè€Œå…¶åçš„é—®å·åˆ™ä»£è¡¨è¿™ä¸ªç¬¦å·æ˜¯å¯é€‰çš„ã€‚<br> ä¸å…¶ä»–ç³»ç»Ÿä¸åŒçš„æ˜¯ï¼ŒLuaè¯­è¨€ä¸­çš„ä¿®é¥°ç¬¦åªèƒ½ä½œç”¨äºä¸€ä¸ªå­—ç¬¦æ¨¡å¼ï¼Œè€Œæ— æ³•ä½œç”¨äºä¸€ç»„åˆ†ç±»ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¸èƒ½å†™å‡ºåŒ¹é…ä¸€ä¸ªå¯é€‰çš„å•è¯çš„æ¨¡å¼ã€‚é€šå¸¸ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›é«˜çº§æŠ€å·§æ¥ç»•å¼€è¿™ä¸ªé™åˆ¶ã€‚<br> ä»¥è¡¥å­—ç¬¦^å¼€å¤´çš„æ¨¡å¼è¡¨ç¤ºä»ç›®æ ‡å­—ç¬¦ä¸²å¼€å¤´å¼€å§‹åŒ¹é…ã€‚ç±»ä¼¼åœ°ï¼Œä»¥$ç»“å°¾çš„æ¨¡å¼è¡¨ç¤ºåŒ¹é…åˆ°ç›®æ ‡å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚æˆ‘ä»¬å¯ä»¥åŒæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ªæ ‡è®°æ¥é™åˆ¶åŒ¹é…æŸ¥æ‰¾å’Œé”šå®šæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹çš„ä»£ç å¯ä»¥ç”¨æ¥æ£€æŸ¥å­—ç¬¦ä¸²sæ˜¯å¦ä»¥æ•°å­—å¼€å¤´ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">string</span>.<span class="built_in">find</span>(s,<span class="string">&quot;^%d&quot;</span>) <span class="keyword">then</span> ...</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹çš„ä»£ç ç”¨æ¥æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºä¸€ä¸ªæ²¡æœ‰å¤šä½™å‰ç¼€å­—ç¬¦å’Œåç¼€å­—ç¬¦çš„æ•´æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">string</span>.<span class="built_in">find</span>(s.<span class="string">&quot;^[+-]?%d+$&quot;</span>) <span class="keyword">then</span> ...</span><br></pre></td></tr></table></figure>
<p>^å’Œ$å­—ç¬¦åªæœ‰ä½äºæ¨¡å¼çš„å¼€å¤´å’Œç»“å°¾æ—¶æ‰å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼›å¦åˆ™ï¼Œå®ƒä»¬ä»…ä»…å°±æ˜¯ä¸å…¶èº«ç›¸åŒ¹é…çš„æ™®é€šå­—ç¬¦ã€‚<br> æ¨¡å¼<code>%b</code>åŒ¹é…æˆå¯¹çš„å­—ç¬¦ä¸²ï¼Œå®ƒçš„å†™æ³•æ˜¯<code>%bxy</code>ï¼Œå…¶ä¸­xå’Œyæ˜¯ä»»æ„ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ï¼Œxä½œä¸ºèµ·å§‹ç¬¦è€Œyä½œä¸ºç»“æŸå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œæ¨¡å¼<code>%b()</code>åŒ¹é…ä»¥å·¦æ‹¬å·å¼€å§‹å¹¶ä»¥å¯¹åº”å³æ‹¬å·ç»“æŸçš„å­ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&quot;a (enclosed (in) parentheses line&quot;</span></span><br><span class="line"><span class="built_in">print</span>((<span class="built_in">string</span>.<span class="built_in">gsub</span>ï¼ˆs,<span class="string">&quot;%b()&quot;</span>,<span class="string">&quot;&quot;</span>))			<span class="comment">-- a line</span></span><br></pre></td></tr></table></figure>
<p>é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>%b()</code>ã€<code>%b[]</code>ã€<code>%b&#123;&#125;</code>æˆ–<code>%b&lt;&gt;</code>ç­‰ä½œä¸ºæ¨¡å¼ï¼Œä½†å®é™…ä¸Šå¯ä»¥ç”¨ä»»æ„ä¸åŒçš„å­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦ã€‚<br> æœ€åï¼Œæ¨¡å¼<code>%f[char-set]</code>ä»£è¡¨å‰ç½®æ¨¡å¼ã€‚è¯¥æ¨¡å¼åªæœ‰åœ¨åä¸€ä¸ªå­—ç¬¦ä½äºchar-setå†…è€Œå‰ä¸€ä¸ªå­—ç¬¦ä¸åœ¨æ—¶åŒ¹é…ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&quot;the anthem is then theme&quot;</span></span><br><span class="line"><span class="built_in">print</span>((<span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&quot;%f[%w]the%f[%W]&quot;</span>,<span class="string">&quot;one&quot;</span>)))			<span class="comment">-- one anthem is one theme</span></span><br></pre></td></tr></table></figure>
<p>æ¨¡å¼<code>%f[%w]</code>åŒ¹é…ä½äºä¸€ä¸ªéå­—æ¯æˆ–æ•°å­—çš„å­—ç¬¦å’Œä¸€ä¸ªå­—æ¯æˆ–æ•°å­—çš„å­—ç¬¦ä¹‹é—´çš„å‰ç½®ï¼Œè€Œæ¨¡å¼<code>%f[%W]</code>åˆ™åŒ¹é…ä¸€ä¸ªå­—æ¯æˆ–æ•°å­—çš„å­—ç¬¦å’Œä¸€ä¸ªéå­—æ¯æˆ–æ•°å­—çš„å­—ç¬¦ä¹‹é—´çš„å‰ç½®ã€‚å› æ­¤ï¼ŒæŒ‡å®šçš„æ¨¡å¼åªä¼šåŒ¹é…å®Œæ•´çš„å­—ç¬¦ä¸²â€theâ€ã€‚è¯·æ³¨æ„ï¼Œå³ä½¿å­—ç¬¦é›†åªæœ‰ä¸€ä¸ªåˆ†ç±»ï¼Œä¹Ÿå¿…é¡»æŠŠå®ƒç”¨æ‹¬å·æ‹¬èµ·æ¥ã€‚<br> å‰ç½®æ¨¡å¼æŠŠç›®æ ‡å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦å‰å’Œæœ€åä¸€ä¸ªå­—ç¬¦åçš„ä½ç½®å½“æˆç©ºå­—ç¬¦ã€‚åœ¨å‰ä¾‹ä¸­ï¼Œç¬¬ä¸€ä¸ªâ€theâ€åœ¨ä¸å±äºé›†åˆ<code>[%W]</code>çš„ç©ºå­—ç¬¦å’Œå±äºé›†åˆ<code>[%W]</code>çš„tä¹‹é—´åŒ¹é…äº†ä¸€ä¸ªå‰ç½®ã€‚</p>
<h2 id="æ•è·"><a href="#æ•è·" class="headerlink" title="æ•è·"></a>æ•è·</h2><p> æ•è·æœºåˆ¶å…è®¸æ ¹æ®ä¸€ä¸ªæ¨¡å¼ä»ç›®æ ‡å­—ç¬¦ä¸²ä¸­æŠ½å‡ºä¸è¯¥æ¨¡å¼åŒ¹é…çš„å†…å®¹æ¥ç”¨äºåç»­ç”¨é€”ï¼Œå¯ä»¥é€šè¿‡æŠŠæ¨¡å¼ä¸­éœ€è¦æ•è·çš„éƒ¨åˆ†æ”¾åˆ°ä¸€å¯¹åœ†æ‹¬å·å†…æ¥æŒ‡å®šæ•è·ã€‚<br> å¯¹äºå…·æœ‰æ•è·çš„æ¨¡å¼ï¼Œå‡½æ•°string.matchä¼šå°†æ‰€æœ‰æ•è·åˆ°çš„å€¼ä½œä¸ºå•ç‹¬çš„ç»“æœè¿”å›ï¼›æ¢å¥è¯è¯´ï¼Œè¯¥å‡½æ•°å°†å­—ç¬¦ä¸²åˆ‡åˆ†æˆå¤šä¸ªè¢«æ•è·çš„éƒ¨åˆ†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">pair = <span class="string">&quot;name = Anna&quot;</span></span><br><span class="line">key,value = <span class="built_in">string</span>.<span class="built_in">match</span>(pair, <span class="string">&quot;(%a+)%s*=%s*(%a+)&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(key,value)		<span class="comment">-- name Anna</span></span><br></pre></td></tr></table></figure>
<p>æ¨¡å¼<code>%a+</code>è¡¨ç¤ºä¸€ä¸ªéç©ºçš„å­—æ¯åºåˆ—ï¼Œæ¨¡å¼<code>%s*</code>è¡¨ç¤ºä¸€ä¸ªå¯èƒ½ä¸ºç©ºçš„ç©ºç™½åºåˆ—ã€‚å› æ­¤ï¼Œä¸Šä¾‹ä¸­çš„è¿™ä¸ªæ¨¡å¼è¡¨ç¤ºä¸€ä¸ªå­—æ¯åºåˆ—ã€ç´§è·Ÿç€ç©ºç™½åºåˆ—ã€ä¸€ä¸ªç­‰å·ã€ç©ºç™½åºåˆ—ä»¥åŠå¦ä¸€ä¸ªå­—æ¯åºåˆ—ã€‚æ¨¡å¼ä¸­çš„ä¸¤ä¸ªå­—æ¯ç³»åˆ—è¢«åˆ†åˆ«æ”¾åœ¨åœ†æ‹¬å·ä¸­ï¼Œå› æ­¤åœ¨åŒ¹é…æ—¶å°±èƒ½æ•è·åˆ°å®ƒä»¬ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç±»ä¼¼çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">date</span> = <span class="string">&quot;Today is 15/4/2020&quot;</span></span><br><span class="line">d,m,y = <span class="built_in">string</span>.<span class="built_in">match</span>(<span class="built_in">date</span>,<span class="string">&quot;(%d+)/(%d+)/(%d+)&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(d,m,y)		<span class="comment">-- 15 4 2020</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨äº†3ä¸ªæ•è·ï¼Œæ¯ä¸ªæ•è·å¯¹åº”ä¸€ä¸ªæ•°å­—åºåˆ—ã€‚<br> åœ¨æ¨¡å¼ä¸­ï¼Œå½¢å¦‚<code>%n</code>çš„åˆ†ç±»ï¼Œè¡¨ç¤ºåŒ¹é…ç¬¬nä¸ªæ•è·çš„å‰¯æœ¬ã€‚ä¸¾ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œå‡è®¾æƒ³åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å¯»æ‰¾ä¸€ä¸ªç”±å•å¼•å·æˆ–åŒå¼•å·æ‹¬èµ·æ¥çš„å­ä¸²ã€‚é‚£ä¹ˆå¯èƒ½ä¼šå°è¯•ä½¿ç”¨æ¨¡å¼â€™[â€œ â€˜].-[â€œ â€˜]â€™ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå¼•å·åé¢è·Ÿä»»æ„å†…å®¹åŠå¦å¤–ä¸€ä¸ªå¼•å·ï¼›ä½†æ˜¯ï¼Œè¿™ç§æ¨¡å¼åœ¨å¤„ç†åƒâ€itâ€™s all rightâ€è¿™æ ·çš„å­—ç¬¦ä¸²æ—¶ä¼šæœ‰é—®é¢˜ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥æ•è·ç¬¬ä¸€ä¸ªå¼•å·ç„¶åç”¨å®ƒæ¥æŒ‡æ˜ç¬¬äºŒä¸ªå¼•å·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="string">[[then he said:&quot;it&#x27;s all right&quot;!]]</span></span><br><span class="line">q, quotedPart = <span class="built_in">string</span>.<span class="built_in">match</span>(s,<span class="string">&quot;([\&quot;&#x27;])(.-)%1&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(quotedPart)			<span class="comment">-- it&#x27;s all right</span></span><br><span class="line"><span class="built_in">print</span>(q)					<span class="comment">-- &quot;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬1ä¸ªæ•è·æ˜¯å¼•å·æœ¬èº«ï¼Œç¬¬2ä¸ªæ•è·æ˜¯å¼•å·ä¸­çš„å†…å®¹ã€‚<br>ä¸‹ä¾‹æ˜¯ä¸€ä¸ªç±»ä¼¼çš„ç¤ºä¾‹ï¼Œç”¨äºåŒ¹é…Luaè¯­è¨€ä¸­çš„é•¿å­—ç¬¦ä¸²çš„æ¨¡å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">%[(=*)%[(.-)%]%<span class="number">1</span>%]</span><br></pre></td></tr></table></figure>
<p>å®ƒæ‰€åŒ¹é…çš„å†…å®¹ä¾æ¬¡æ˜¯ï¼šä¸€ä¸ªå·¦æ–¹æ‹¬å·ã€é›¶ä¸ªæˆ–å¤šä¸ªç­‰å·ã€å¦ä¸€ä¸ªå·¦æ–¹æ‹¬å·ã€ä»»æ„å†…å®¹ï¼ˆå­—ç¬¦ä¸²çš„å†…å®¹ï¼‰ã€ä¸€ä¸ªå³æ–¹æ‹¬å·ã€ç›¸åŒæ•°é‡çš„ç­‰å·åŠå¦ä¸€ä¸ªå³æ–¹æ‹¬å·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">p = <span class="string">&quot;%[(=*)%[(.-)%]%1%]&quot;</span></span><br><span class="line">s = <span class="string">&quot;a = [ = [[[ something ]] ] == ] ] =];print(a)&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">match</span>(s,p))   <span class="comment">-- [[something]] ] == ]</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬1ä¸ªæ•è·æ˜¯ç­‰å·åºåˆ—ï¼Œç¬¬2ä¸ªæ•è·æ˜¯å­—ç¬¦ä¸²å†…å®¹ã€‚<br> è¢«æ•è·å¯¹è±¡çš„ç¬¬3ä¸ªç”¨é€”æ˜¯åœ¨å‡½æ•°gsubçš„æ›¿ä»£å­—ç¬¦ä¸²ä¸­ã€‚åƒæ¨¡å¼ä¸€æ ·ï¼Œæ›¿ä»£å­—ç¬¦ä¸²åŒæ ·å¯ä»¥åŒ…æ‹¬åƒâ€%nâ€ä¸€æ ·çš„å­—ç¬¦åˆ†ç±»ï¼Œå½“å‘ç”Ÿæ›¿æ¢æ—¶ä¼šè¢«æ›¿æ¢ä¸ºç›¸åº”çš„æ•è·ã€‚ç‰¹åˆ«åœ°ï¼Œâ€œ%0â€æ„å‘³ç€æ•´ä¸ªåŒ¹é…ï¼Œå¹¶ä¸”æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„ç™¾åˆ†å·å¿…é¡»è¢«è½¬ä¹‰ä¸ºâ€œ%%â€ã€‚ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ä¼šé‡å¤å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—æ¯ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªè¢«é‡å¤çš„å­—æ¯ä¹‹é—´æ’å…¥ä¸€ä¸ªå‡å·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>((<span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;hello Lua!&quot;</span>,<span class="string">&quot;%a&quot;</span>,<span class="string">&quot;%0-%0&quot;</span>)))		<span class="comment">-- h-he-el-ll-lo-o L-Lu-ua-a!</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹ä¾‹äº¤æ¢äº†ç›¸é‚»çš„å­—ç¬¦ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>((<span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;hello Lua!&quot;</span>,<span class="string">&quot;(.)(.)&quot;</span>,<span class="string">&quot;%2%1&quot;</span>)))  <span class="comment">-- ehll ouLa	</span></span><br></pre></td></tr></table></figure>

<h2 id="æ›¿æ¢"><a href="#æ›¿æ¢" class="headerlink" title="æ›¿æ¢"></a>æ›¿æ¢</h2><p> æ­£å¦‚æˆ‘ä»¬æ­¤å‰å·²ç»çœ‹åˆ°çš„ï¼Œå‡½æ•°string.gsubçš„ç¬¬3ä¸ªå‚æ•°ä¸ä»…å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–è¡¨ã€‚å½“ç¬¬3ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°string.gsubä¼šåœ¨æ¯æ¬¡æ‰¾åˆ°åŒ¹é…æ—¶è°ƒç”¨è¯¥å‡½æ•°ï¼Œå‚æ•°æ˜¯æ•è·åˆ°çš„å†…å®¹è€Œè¿”å›å€¼åˆ™è¢«ä½œä¸ºæ›¿æ¢å­—ç¬¦ä¸²ã€‚å½“ç¬¬3ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè¡¨æ—¶ï¼Œå‡½æ•°string.gsubä¼šæŠŠç¬¬ä¸€ä¸ªæ•è·åˆ°çš„å†…å®¹ä½œä¸ºå»ºï¼Œç„¶åå°†è¡¨ä¸­å¯¹åº”è¯¥é”®çš„å€¼ä½œä¸ºæ›¿æ¢å­—ç¬¦ä¸²ã€‚å¦‚æœå‡½æ•°çš„è¿”å›å€¼ä¸ºnilæˆ–è¡¨ä¸­ä¸åŒ…å«è¿™ä¸ªé”®æˆ–è¡¨ä¸­é”®çš„å¯¹åº”å€¼ä¸ºnilï¼Œé‚£ä¹ˆå‡½æ•°gsubä¸æ”¹å˜è¿™ä¸ªåŒ¹é…ã€‚<br> å…ˆä¸¾ä¸€ä¸ªä¾‹å­ï¼Œä¸‹è¿°å‡½æ•°ç”¨äºå˜é‡å±•å¼€ï¼Œå®ƒä¼šæŠŠå­—ç¬¦ä¸²ä¸­æ‰€æœ‰å‡ºç°çš„$varnameæ›¿æ¢ä¸ºå…¨å±€å˜é‡varnameçš„å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">expand</span><span class="params">(s)</span></span></span><br><span class="line">	<span class="keyword">return</span> (<span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&quot;$(%w+)&quot;</span>,<span class="built_in">_G</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">name = <span class="string">&quot;Lua&quot;</span>;<span class="built_in">status</span> = <span class="string">&quot;great&quot;</span></span><br><span class="line"><span class="built_in">print</span>(expand(<span class="string">&quot;$name is %status, isn&#x27;t it?&quot;</span>))	<span class="comment">-- Lua is great ,isn&#x27;t it?</span></span><br></pre></td></tr></table></figure>
<p>ï¼ˆ_Gæ˜¯é¢„å…ˆå®šä¹‰çš„åŒ…æ‹¬æ‰€æœ‰å…¨å±€å˜é‡çš„è¡¨ï¼‰å¯¹äºæ¯ä¸ªä¸<code>$(%w_)</code>åŒ¹é…åˆ°çš„åœ°æ–¹ï¼Œå‡½æ•°gsubéƒ½ä¼šåœ¨å…¨å±€è¡¨_Gä¸­æŸ¥æ‰¾æ•è·åˆ°çš„åå­—ï¼Œå¹¶ç”¨æ‰¾åˆ°çš„ç»“æœæ›¿æ¢å­—ç¬¦ä¸²ä¸­ç›¸åŒ¹é…çš„éƒ¨åˆ†ï¼›å¦‚æœè¡¨ä¸­æ²¡æœ‰å¯¹åº”çš„é”®ï¼Œåˆ™ä¸è¿›è¡Œæ›¿æ¢ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(expand(<span class="string">&quot;$othername is $status, isn&#x27;t it?&quot;</span>))	<span class="comment">-- $othername is great,isn&#x27;t it?</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸ç¡®å®šæ˜¯å¦åˆ¶å®šå˜é‡å…·æœ‰å­—ç¬¦ä¸²å€¼ï¼Œé‚£ä¹ˆå¯ä»¥å¯¹å®ƒä»¬çš„å€¼è°ƒç”¨å‡½æ•°tostringã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå‡½æ•°æ¥è¿”å›è¦æ›¿æ¢çš„å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">expand</span><span class="params">(s)</span></span></span><br><span class="line">	<span class="keyword">return</span> (<span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&quot;$(%w+)&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">(n)</span></span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">tostring</span>(<span class="built_in">_G</span>[n])</span><br><span class="line">	<span class="keyword">end</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(expand(<span class="string">&quot;print = $print; a = $a&quot;</span>))		<span class="comment">-- print = function:0x8050; a = nil</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å‡½æ•°expandä¸­ï¼Œå¯¹äºæ‰€æœ‰åŒ¹é…<code>$(%w+)</code>çš„åœ°æ–¹ï¼Œå‡½æ•°gsubéƒ½ä¼šè°ƒç”¨ç»™å®šçš„å‡½æ•°ï¼Œä¼ å…¥æ•è·åˆ°çš„åå­—ä½œä¸ºå‚æ•°ï¼Œå¹¶ä½¿ç”¨è¿”å›å­—ç¬¦ä¸²æ›¿æ¢åŒ¹é…åˆ°çš„å†…å®¹ã€‚</p>
<h3 id="URLç¼–ç "><a href="#URLç¼–ç " class="headerlink" title="URLç¼–ç "></a>URLç¼–ç </h3><p>æˆ‘ä»¬çš„ä¸‹ä¸€ä¸ªç¤ºä¾‹ä¸­å°†ç”¨åˆ°URLç¼–ç ï¼Œä¹Ÿå°±æ˜¯HTTPæ‰€ä½¿ç”¨çš„åœ¨URLä¸­ä¼ é€’å‚æ•°çš„ç¼–ç æ–¹å¼ã€‚è¿™ç§ç¼–ç æ–¹å¼ä¼šå°†ç‰¹æ®Šå­—ç¬¦ç¼–ç ä¸ºâ€%xxâ€çš„å½¢å¼ï¼Œå…¶ä¸­xxæ˜¯å¯¹åº”å­—ç¬¦çš„åå…­è¿›åˆ¶ã€‚æ­¤å¤–ï¼ŒURLç¼–ç è¿˜ä¼šå°†ç©ºæ ¼è½¬æ¢ä¸ºåŠ å·ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²<code>a + b = c</code>çš„URLç¼–ç ä¸º<code>a%2Bb+%3D+c</code>ã€‚æœ€åï¼ŒURLç¼–ç ä¼šå°†å¯¹å‚æ•°ååŠå…¶å€¼ç”¨ç­‰å·è¿æ¥èµ·æ¥ï¼Œç„¶åå°†æ¯å¯¹name &#x3D; valueç”¨&amp;è¿æ¥èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œå€¼<br><code>name = &quot;al&quot;</code>;<code>query = &quot;a+b = c&quot;</code>;<code>q = &quot;yes or no&quot;</code><br>å¯¹åº”çš„URLç¼–ç ä¸º<code>name=al&amp;query=a%2Bb+%3D+c&amp;q=yes+or+no</code>ã€‚<br>ç°åœ¨ï¼Œå‡è®¾è¦å°†è¿™ä¸ªURLè§£ç å¹¶å°†å…¶ä¸­çš„é”®å€¼å¯¹ä¿å­˜åˆ°ä¸€ä¸ªè¡¨å†…ï¼Œä»¥ç›¸åº”çš„é”®ä½œä¸ºç´¢å¼•ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä¸€ä¸‹å‡½æ•°å®ŒæˆåŸºæœ¬çš„è§£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unescape</span><span class="params">(s)</span></span></span><br><span class="line">	s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&quot;+&quot;</span>,<span class="string">&quot; &quot;</span>)</span><br><span class="line">	s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&quot;%%(%x%x)&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">(h)</span></span></span><br><span class="line">		<span class="keyword">return</span> sting.<span class="built_in">char</span>(<span class="built_in">tonumber</span>(h,<span class="number">16</span>))</span><br><span class="line">	<span class="keyword">end</span>)</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(unescape(<span class="string">&quot;a%2Bb+%3D+c&quot;</span>))			<span class="comment">-- a + b = c</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªgsubå‡½æ•°å°†å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰åŠ å·æ›¿æ¢ä¸ºç©ºæ ¼ï¼Œç¬¬äºŒä¸ªgsubå‡½æ•°åˆ™åŒ¹é…æ‰€æœ‰ä»¥ç™¾åˆ†å·å¼€å¤´çš„ä¸¤ä½åå…­è¿›åˆ¶æ•°ï¼Œå¹¶å¯¹æ¯å¤„åŒ¹é…è°ƒç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚è¿™ä¸ªåŒ¿åå‡½æ•°ä¼šå°†åå…­è¿›åˆ¶è½¬æ¢æˆä¸€ä¸ªæ•°å­—å¹¶è¿”å›å…¶å¯¹åº”çš„å­—ç¬¦ã€‚<br>å¯ä»¥ä½¿ç”¨å‡½æ•°gmatchæ¥å¯¹é”®å€¼å¯¹name &#x3D; valueè¿›è¡Œè§£ç ã€‚ç”±äºé”®åå’Œå€¼éƒ½ä¸èƒ½åŒ…å«&amp;æˆ–&#x3D;ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ¨¡å¼<code>[^&amp;=]+</code>æ¥åŒ¹é…å®ƒä»¬ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">cgi = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">decode</span><span class="params">(s)</span></span></span><br><span class="line">	<span class="keyword">for</span> name, value <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(s,<span class="string">&quot;([^&amp;=]+)=([^&amp;=]+)&quot;</span>) <span class="keyword">do</span></span><br><span class="line">		neme = unescape(name)</span><br><span class="line">		value = unescape(value)</span><br><span class="line">		cgi[name] = value</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨å‡½æ•°gmatchä¼šåŒ¹é…æ‰€æœ‰æ ¼å¼ä¸ºname&#x3D;valueçš„é”®å€¼å¯¹ã€‚å¯¹äºæ¯ç»„é”®å€¼å¯¹ï¼Œè¿­ä»£å™¨ä¼šè¿”å›å¯¹åº”çš„æ•è·ï¼Œæ•è·åˆ°çš„å†…å®¹ä¹Ÿå°±æ˜¯nameå’Œvalueçš„å€¼ã€‚å¾ªç¯ä½“å†…åªæ˜¯ç®€å•åœ°å¯¹ä¸¤ä¸ªå­—ç¬¦ä¸²è°ƒç”¨å‡½æ•°unescapeï¼Œç„¶åå°†ç»“æœä¿å­˜åˆ°è¡¨cgiä¸­ã€‚<br>å¯¹åº”çš„ç¼–ç å‡½æ•°ä¹Ÿå¾ˆå®¹æ˜“ç¼–å†™ã€‚å…ˆå†™ä¸€ä¸ªescapeå‡½æ•°ï¼Œç”¨å®ƒå°†æ‰€æœ‰çš„ç‰¹æ®Šå­—ç¬¦ç¼–ç ä¸ºç™¾åˆ†å·ç´§è·Ÿå¯¹åº”çš„åå…­è¿›åˆ¶å½¢å¼ï¼Œç„¶åæŠŠç©ºæ ¼æ›¿æ¢æˆåŠ å·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function escape(s)</span><br><span class="line">	s - string.gsub(s,&quot;[&amp;=+%%%c]&quot;,function(c)</span><br><span class="line">		return string.format(&quot;%%%02X&quot;,string.byte(c))</span><br><span class="line">	end)</span><br><span class="line">	s = string.gsub(s,&quot; &quot;,&quot;+&quot;)</span><br><span class="line">	return s</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>encodeå‡½æ•°ä¼šéå†æ•´ä¸ªå¾…ç¼–ç çš„è¡¨ï¼Œç„¶åæ„é€ å‡ºæœ€ç»ˆçš„å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encode</span><span class="params">(t)</span></span></span><br><span class="line">	<span class="keyword">local</span> b = &#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span></span><br><span class="line">		b[#b + <span class="number">1</span>] = (escape(k) .. <span class="string">&quot;=&quot;</span> .. escape(v))</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="comment">-- å°†bä¸­æ‰€æœ‰å…ƒç´ è¿æ¥åœ¨ä¸€èµ·ï¼Œä½¿ç”¨&quot;&amp;&quot;åˆ†éš”</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">table</span>.<span class="built_in">concat</span>(b,<span class="string">&quot;&amp;&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">t = &#123;name = <span class="string">&quot;al&quot;</span>,query = <span class="string">&quot;a+b=c&quot;</span> , q = <span class="string">&quot;yes or no&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(encode(t)) 	<span class="comment">-- q = yes+or+no&amp;query=a%2Bb+%3D+c&amp;name=al</span></span><br></pre></td></tr></table></figure>

<h3 id="åˆ¶è¡¨ç¬¦å±•å¼€"><a href="#åˆ¶è¡¨ç¬¦å±•å¼€" class="headerlink" title="åˆ¶è¡¨ç¬¦å±•å¼€"></a>åˆ¶è¡¨ç¬¦å±•å¼€</h3><p>åœ¨Luaè¯­è¨€ä¸­ï¼Œåƒ<code>()</code>è¿™æ ·çš„ç©ºç™½æ•è·å…·æœ‰ç‰¹æ®Šå«ä¹‰ã€‚è¯¥æ¨¡å¼å¹¶ä¸ä»£è¡¨æ•è·ç©ºå†…å®¹ï¼Œè€Œæ˜¯æ•è·æ¨¡å¼åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(strig.<span class="built_in">match</span>(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;()ll()&quot;</span>))   <span class="comment">-- 3    5</span></span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ªå…³äºä½ç½®æ•è·çš„è‰¯å¥½ç¤ºä¾‹æ˜¯åœ¨å­—ç¬¦ä¸²ä¸­è¿›è¡Œåˆ¶è¡¨ç¬¦å±•å¼€ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">expandTabs</span><span class="params">(s,tab)</span></span></span><br><span class="line">	tab = tab <span class="keyword">or</span> <span class="number">8</span> 	<span class="comment">-- åˆ¶è¡¨ç¬¦çš„&quot;å¤§å°&quot;ï¼ˆé»˜è®¤æ˜¯8ï¼‰</span></span><br><span class="line">	<span class="keyword">local</span> corr = <span class="number">0</span> 	<span class="comment">-- ä¿®æ­£é‡</span></span><br><span class="line">	s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&quot;()\t&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">(p)</span></span></span><br><span class="line">		<span class="keyword">local</span> sp = tab - (p - <span class="number">1</span> + corr)%tab)</span><br><span class="line">		corr = corr - <span class="number">1</span> + sp</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">rep</span>(<span class="string">&quot;&quot;</span>,sp)</span><br><span class="line">	<span class="keyword">end</span>)</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°gsubä¼šåŒ¹é…å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„åˆ¶è¡¨ç¬¦å¹¶æ•è·å®ƒä»¬çš„ä½ç½®ã€‚å¯¹äºæ¯ä¸ªåˆ¶è¡¨ç¬¦ï¼ŒåŒ¿åå‡½æ•°ä¼šæ ¹æ®å…¶æ‰€åœ¨ä½ç½®è®¡ç®—å‡ºéœ€è¦å¤šå°‘ä¸ªç©ºæ ¼æ‰èƒ½æ°å¥½å‡‘å¤Ÿä¸€åˆ—ï¼ˆæ•´æ•°ä¸ªtabï¼‰ï¼šè¯¥å‡½æ•°å…ˆå°†ä½ç½®å‡å»1ä»¥ä»0å¼€å§‹è®¡æ•°ï¼Œç„¶ååŠ ä¸Šcorrå‡‘æ•´ä¹‹å‰çš„æŒ‡æ ‡ç¬¦ï¼ˆæ¯ä¸€ä¸ªè¢«å±•å¼€çš„æŒ‡æ ‡ç¬¦éƒ½ä¼šå½±å“åç»­åˆ¶è¡¨ç¬¦çš„ä½ç½®ï¼‰ã€‚ä¹‹åï¼Œè¯¥å‡½æ•°æ›´æ–°ä¸‹ä¸€ä¸ªåˆ¶è¡¨ç¬¦çš„ä¿®æ­£é‡ï¼šä¸ºæ­£åœ¨è¢«å»æ‰çš„åˆ¶è¡¨ç¬¦å‡1ï¼Œå†åŠ ä¸Šè¦å¢åŠ çš„ç©ºæ ¼æ•°spã€‚æœ€åï¼Œè¿™ä¸ªå‡½æ•°è¿”å›ç”±æ›¿ä»£åˆ¶è¡¨ç¬¦çš„åˆé€‚æ•°é‡çš„ç©ºæ ¼ç»„æˆçš„å­—ç¬¦ä¸²ã€‚<br>ä¸ºäº†å®Œæ•´èµ·è§ï¼Œè®©æˆ‘ä»¬å†çœ‹ä¸‹å¦‚ä½•å®ç°é€†å‘æ“ä½œï¼Œå³å°†ç©ºæ ¼è½¬æ¢ä¸ºåˆ¶è¡¨ç¬¦ã€‚ç¬¬ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡ç©ºæ•è·æ¥å¯¹ä½ç½®è¿›è¡Œæ“ä½œï¼Œä½†è¿˜æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼šå³åœ¨å­—ç¬¦ä¸²ä¸­æ¯éš”8ä¸ªå­—ç¬¦æ’å…¥ä¸€ä¸ªæ ‡è®°ï¼Œç„¶åå°†å‰é¢æœ‰ç©ºæ ¼çš„æ ‡è®°æ›¿æ¢ä¸ºåˆ¶è¡¨ç¬¦ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unexpandTabs</span><span class="params">(s,tab)</span></span></span><br><span class="line">	tab = tab <span class="keyword">or</span> <span class="number">8</span></span><br><span class="line">	s = expandTabs(s,tab)</span><br><span class="line">	<span class="keyword">local</span> pat = <span class="built_in">string</span>.<span class="built_in">rep</span>(<span class="string">&quot;.&quot;</span>,tab)			<span class="comment">-- è¾…åŠ©æ¨¡å¼</span></span><br><span class="line">	s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s,pat,<span class="string">&quot;%0\1&quot;</span>)			<span class="comment">-- åœ¨æ¯8ä¸ªå­—ç¬¦åæ·»åŠ ä¸€ä¸ªæ ‡è®°\1</span></span><br><span class="line">	s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&quot;+\1&quot;</span>,<span class="string">&quot;\t&quot;</span>)			<span class="comment">-- å°†æ‰€æœ‰ä»¥æ­¤æ ‡è®°ç»“å°¾çš„ç©ºæ ¼åºåˆ—éƒ½æ›¿æ¢ä¸ºåˆ¶è¡¨ç¬¦\t</span></span><br><span class="line">	s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&quot;\1&quot;</span>,<span class="string">&quot;&quot;</span>)				<span class="comment">-- å°†å‰©ä¸‹çš„æ ‡è®°\1åˆ é™¤</span></span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‡½æ•°é¦–å…ˆå¯¹å­—ç¬¦ä¸²è¿›è¡Œäº†åˆ¶è¡¨ç¬¦å±•å¼€ä»¥ç§»é™¤å…¶ä¸­æ‰€æœ‰çš„åˆ¶è¡¨ç¬¦ï¼Œç„¶åæ„é€ å‡ºä¸€ä¸ªç”¨äºåŒ¹é…æ‰€æœ‰8ä¸ªå­—ç¬¦åºåˆ—çš„è¾…åŠ©æ¨¡å¼ï¼Œå†åˆ©ç”¨è¿™ä¸ªæ¨¡å¼åœ¨æ¯8ä¸ªå­—ç¬¦åæ·»åŠ ä¸€ä¸ªæ ‡è®°ã€‚æ¥ç€ï¼Œå®ƒå°†æ‰€æœ‰ä»¥æ­¤æ ‡è®°ç»“å°¾çš„ç©ºæ ¼åºåˆ—éƒ½æ›¿æ¢ä¸ºåˆ¶è¡¨ç¬¦ã€‚æœ€åï¼Œå°†å‰©ä¸‹çš„æ ‡è®°åˆ é™¤ã€‚</p>
<h2 id="è¯€çª"><a href="#è¯€çª" class="headerlink" title="è¯€çª"></a>è¯€çª</h2><p>æ¨¡å¼åŒ¹é…æ˜¯è¿›è¡Œå­—ç¬¦ä¸²å¤„ç†çš„å¼ºå¤§å·¥å…·ä¹‹ä¸€ã€‚è™½ç„¶é€šè¿‡å¤šæ¬¡è°ƒç”¨å‡½æ•°string.gsubå°±å¯ä»¥å®Œæˆè®¸å¤šå¤æ‚çš„æ“ä½œï¼Œä½†æ˜¯è¿˜æ˜¯åº”è¯¥è°¨æ…åœ°ä½¿ç”¨å‡½æ•°ã€‚<br>æ¨¡å¼åŒ¹é…æ›¿ä»£ä¸äº†ä¼ ç»Ÿçš„è§£æå™¨ã€‚å¯¹äºé‚£äº›ç”¨åå³å¼ƒçš„ç¨‹åºæ¥è¯´ï¼Œæˆ‘ä»¬ç¡®å®å¯ä»¥åœ¨æºä»£ç ä¸­åšä¸€äº›æœ‰ç”¨çš„æ“ä½œï¼Œä½†å´å¾ˆéš¾æ„å»ºå‡ºé«˜è´¨é‡çš„äº§å“ã€‚<br>é€šå¸¸ï¼Œåœ¨Luaç¨‹åºä¸­ä½¿ç”¨æ¨¡å¼åŒ¹é…æ—¶çš„æ•ˆç‡æ˜¯è¶³å¤Ÿé«˜çš„ï¼Œä½†ä»ç„¶éœ€è¦æ³¨æ„ï¼Œåº”è¯¥æ°¸è¿œä½¿ç”¨å°½å¯èƒ½çš„ç²¾ç¡®çš„æ¨¡å¼ï¼Œä¸ç²¾ç¡®çš„æ¨¡å¼ä¼šæ¯”ç²¾ç¡®çš„æ¨¡å¼æ…¢å¾ˆå¤šã€‚ä¸€ä¸ªæç«¯çš„ä¾‹å­æ˜¯æ¨¡å¼<code>(.-)%$</code>ï¼Œå®ƒç”¨äºè·å–å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ª$å­—ç¬¦å‰çš„æ‰€æœ‰å†…å®¹ã€‚å¦‚æœç›®æ ‡å­—ç¬¦ä¸²ä¸­æœ‰$ç¬¦å·ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¨¡å¼å·¥ä½œå¾ˆæ­£å¸¸ï¼›ä½†æ˜¯ï¼Œå¦‚æœå­—ç¬¦ä¸²ä¸­æ²¡æœ‰$ç¬¦å·ï¼Œé‚£ä¹ˆåŒ¹é…ç®—æ³•å°±ä¼šå—é™ä»å­—ç¬¦ä¸²èµ·å§‹ä½ç½®å¼€å§‹åŒ¹é…ï¼Œç›´è‡³ä¸ºäº†æœç´¢$ç¬¦å·è€Œéå†å®Œæ•´å­—ç¬¦ä¸²ã€‚å½“åˆ°è¾¾å­—ç¬¦ä¸²ç»“å°¾æ—¶ï¼Œè¿™æ¬¡ä»å­—ç¬¦ä¸²èµ·å§‹ä½ç½®å¼€å§‹çš„æ¨¡å¼åŒ¹é…å°±å¤±è´¥äº†ã€‚ä¹‹åï¼Œæ¨¡å¼åŒ¹é…ç®—æ³•åˆä»å­—ç¬¦ä¸²çš„ç¬¬äºŒä¸ªä½ç½®å¼€å§‹ç¬¬äºŒæ¬¡æœç´¢ï¼Œç»“æœä»ç„¶æ˜¯æ— æ³•åŒ¹é…è¿™ä¸ªæ¨¡å¼ã€‚è¿™ä¸ªåŒ¹é…è¿‡ç¨‹ä¼šåœ¨å­—ç¬¦ä¸²çš„æ¯ä¸ªä½ç½®ä¸Šè¿›è¡Œä¸€æ¬¡ï¼Œä»è€Œå¯¼è‡´O(n^2^)çš„æ—¶é—´å¤æ‚åº¦ã€‚<br>æ­¤å¤–ï¼Œè¿˜è¦ç•™å¿ƒç©ºæ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯é‚£äº›åŒ¹é…ç©ºå­—ç¬¦ä¸²çš„æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¯•å›¾ä½¿ç”¨æ¨¡å¼<code>%a*</code>æ¥åŒ¹é…åå­—ï¼Œé‚£ä¹ˆ å°±ä¼šå‘ç°åˆ°å¤„éƒ½æ˜¯åå­—ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">i,j = <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;;$% **#$hello13&quot;</span>,<span class="string">&quot;%a*&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(i,j)			<span class="comment">-- 1   0 </span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹æ±‡ä¸­ï¼Œå‡½æ•°string.findåœ¨å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®æ­£ç¡®åœ°æ‰¾åˆ°ä¸€ä¸ªç©ºçš„å­—æ¯åºåˆ—ã€‚<br>åœ¨æ¨¡å¼çš„ç»“æŸå¤„ä½¿ç”¨ä¿®é¥°ç¬¦-æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºè¿™æ ·åªä¼šåŒ¹é…åˆ°ç©ºå­—ç¬¦ä¸²ã€‚è¯¥ä¿®é¥°ç¬¦æ€»æ˜¯éœ€è¦åœ¨å…¶åè·Ÿä¸Šå…¶ä»–çš„ä¸œè¥¿æ¥é™åˆ¶æ‰©å±•çš„èŒƒå›´ã€‚åŒæ ·ï¼Œå«æœ‰â€.*â€çš„æ¨¡å¼ä¹Ÿéå¸¸å®¹æ˜“å‡ºé”™ï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºè¿™ç§æ¨¡å¼å¯èƒ½ä¼šåŒ¹é…åˆ°è¶…å‡ºæˆ‘ä»¬é¢„æœŸèŒƒå›´çš„å†…å®¹ã€‚<br>æœ‰æ—¶ï¼Œç”¨Luaè¯­è¨€æ¥æ„é€ ä¸€ä¸ªæ¨¡å¼ä¹Ÿå¾ˆæœ‰ç”¨ã€‚æˆ‘ä»¬å·²ç»åœ¨å°†ç©ºæ ¼è½¬æ¢ä¸ºåˆ¶è¡¨ç¬¦çš„ç¨‹åºä¸­ä½¿ç”¨è¿‡è¿™ä¸ªæŠ€å·§ã€‚æ¥ä¸‹æ¥å†çœ‹å¦å¤–ä¸€ä¸ªç¤ºä¾‹ï¼Œè€ƒè™‘å¦‚ä½•æ‰¾å‡ºä¸€ä¸ªæ–‡æœ¬ä¸­è¾ƒé•¿çš„è¡Œï¼ˆæ¯”å¦‚è¶…å‡º70ä¸ªå­—ç¬¦çš„è¡Œï¼‰ã€‚è¾ƒé•¿çš„è¡Œå°±æ˜¯ä¸€ä¸ªå…·æœ‰70ä¸ªæˆ–æ›´å¤šå­—ç¬¦çš„åºåˆ—ï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦éƒ½ä¸ä¸ºæ¢è¡Œç¬¦ï¼Œå› è€Œå¯ä»¥ä½¿ç”¨å­—ç¬¦åˆ†ç±»<code>[^\n]</code>æ¥åŒ¹é…é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„å…¶ä»–å•ä¸ªå­—ç¬¦ã€‚è¿™æ ·ï¼Œå°±èƒ½å¤Ÿé€šè¿‡æŠŠè¿™ä¸ªåŒ¹é…å•ä¸ªå­—ç¬¦çš„æ¨¡å¼é‡å¤70æ¬¡æ¥åŒ¹é…è¾ƒé•¿çš„è¡Œã€‚é™¤äº†æ‰‹å†™ä»¥å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å‡½æ•°string.repæ¥åˆ›å»ºè¿™ä¸ªæ¨¡å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">pattern = <span class="built_in">string</span>.ret(<span class="string">&quot;[^\n]&quot;</span>,<span class="number">70</span> .. <span class="string">&quot;+&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾è¦è¿›è¡Œå¤§å°å†™æ— å…³çš„æŸ¥æ‰¾ã€‚ä¸€ç§æ–¹æ³•å°±æ˜¯å°†æ¨¡å¼ä¸­çš„æ‰€æœ‰å­—æ¯xç”¨<code>[xX]</code>æ›¿æ¢ï¼Œå³åŒæ—¶åŒ…å«åŸå­—æ¯å¤§å°å†™å½¢å¼çš„å­—ç¬¦åˆ†ç±»ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‡½æ•°æ¥è‡ªåŠ¨åœ°å®Œæˆè¿™ç§æ›¿æ¢ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">oncase</span><span class="params">(s)</span></span></span><br><span class="line">	s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&quot;%a&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">(c)</span></span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;[&quot;</span> .. <span class="built_in">string</span>.<span class="built_in">lower</span>(c) .. <span class="built_in">string</span>.<span class="built_in">upper</span>(c)..<span class="string">&quot;]&quot;</span></span><br><span class="line">	<span class="keyword">end</span>)</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(nocase(<span class="string">&quot;Hi there!&quot;</span>))		<span class="comment">-- [hH][iI][tT][hH][eE][rR][eE]!</span></span><br></pre></td></tr></table></figure>
<p>æœ‰æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†æ‰€æœ‰å‡ºç°çš„s1æ›¿æ¢ä¸ºs2ï¼Œè€Œä¸ç®¡å…¶ä¸­æ˜¯å¦åŒ…å«é­”æ³•å­—ç¬¦ã€‚å¦‚æœå­—ç¬¦ä¸²s1å’Œs2æ˜¯å¸¸é‡ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ç¼–å†™å­—ç¬¦ä¸²æ—¶å¯¹é­”æ³•å­—ç¬¦è¿›è¡Œåˆç†çš„è½¬ä¹‰ï¼›ä½†å¦‚æœå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨å¦ä¸€ä¸ªgsubå‡½æ•°æ¥è¿›è¡Œè½¬ä¹‰ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s1 = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s1,<span class="string">&quot;(%W)&quot;</span>,<span class="string">&quot;%%%1&quot;</span>)</span><br><span class="line">s2 = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s2,<span class="string">&quot;%%&quot;</span>,<span class="string">&quot;%%%%&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿›è¡Œå­—ç¬¦ä¸²æœç´¢æ—¶ï¼Œæˆ‘ä»¬å¯¹æ‰€æœ‰å­—æ¯å’Œæ•°å­—å¤–çš„å­—ç¬¦è¿›è¡Œäº†è½¬ä¹‰ï¼ˆå³å¤§å†™çš„Wï¼‰ã€‚è€Œåœ¨æ›¿æ¢å­—ç¬¦ä¸²ä¸­ï¼Œæˆ‘ä»¬åªå¯¹ç™¾åˆ†å·è¿›è¡Œäº†è½¬ä¹‰ã€‚<br>æ¨¡å¼åŒ¹é…çš„å¦ä¸€ä¸ªæœ‰ç”¨çš„æŠ€å·§å°±æ˜¯ï¼Œåœ¨è¿›è¡Œå®é™…å·¥ä½œå‰å¯¹ç›®æ ‡å­—ç¬¦ä¸²è¿›è¡Œé¢„å¤„ç†ã€‚å‡è®¾æƒ³æŠŠä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ‰€æœ‰è¢«åŒå¼•å·(â€œ)å¼•èµ·æ¥çš„å†…å®¹æ”¹ä¸ºå¤§å†™ï¼Œä½†åˆå…è®¸å†…å®¹ä¸­åŒ…å«è½¬ä¹‰çš„å¼•å·(â€œ&quot;â€œ):</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">follows a typical <span class="built_in">string</span>:<span class="string">&quot;This is \&quot;great\&quot;!&quot;</span>.</span><br></pre></td></tr></table></figure>
<p>å¤„ç†è¿™ç§æƒ…å†µçš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯å…ˆå¯¹æ–‡æœ¬è¿›è¡Œé¢„å¤„ç†ï¼Œå°†æ‰€æœ‰å¯èƒ½å¯¼è‡´æ­§ä¹‰çš„å†…å®¹ç¼–ç æˆåˆ«çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è®²<code>&quot;\&quot;&quot;</code>ç¼–ç æˆ<code>&quot;\1&quot;</code>ã€‚ä¸è¿‡ï¼Œå¦‚æœåŸæ–‡ä¸­æœ¬èº«å°±å«æœ‰<code>&quot;\1&quot;</code>ï¼Œé‚£ä¹ˆå°±ä¼šé‡åˆ°é—®é¢˜ã€‚å¦ä¸€ç§å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜çš„ç®€å•åšæ³•æ˜¯å°†æ‰€æœ‰<code>&quot;\x&quot;</code>ç¼–ç ä¸º<code>&quot;\ddd&quot;</code>ï¼Œå…¶ä¸­dddä¸ºå­—ç¬¦xçš„åå…­è¿›åˆ¶è¡¨ç¤ºå½¢å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">code</span><span class="params">(s)</span></span></span><br><span class="line">	<span class="keyword">return</span> (<span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&quot;\\(.)&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">(x)</span></span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;\\%03d&quot;</span>,<span class="built_in">string</span>.<span class="built_in">byte</span>(x))</span><br><span class="line">	<span class="keyword">end</span>))</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œç”±äºåŸå­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„<code>&quot;\ddd&quot;</code>éƒ½è¿›è¡Œäº†ç¼–ç ï¼Œæ‰€ä»¥ç¼–ç åå­—ç¬¦ä¸²ä¸­çš„<code>&quot;\ddd&quot;</code>åºåˆ—ä¸€å®šéƒ½æ˜¯ç¼–ç é€ æˆçš„ã€‚è¿™æ ·ï¼Œè§£ç ä¹Ÿå°±å¾ˆç®€å•äº†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">decode</span><span class="params">(s)</span></span></span><br><span class="line">	<span class="keyword">return</span> (<span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&quot;\\(%d%d%d)&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">(d)</span></span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;\\&quot;</span> .. <span class="built_in">string</span>.<span class="built_in">char</span>(<span class="built_in">tonumber</span>(d))</span><br><span class="line">	<span class="keyword">end</span>))</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å®ŒæˆæŠŠä¸€ä¸ªå­—ç¬¦ä¸²ä¸­è¢«åŒå¼•å·(â€œ)å¼•èµ·æ¥çš„å†…å®¹æ”¹ä¸ºå¤§å†™çš„éœ€æ±‚ã€‚ç”±äºç¼–ç åçš„å­—ç¬¦ä¸²ä¸­ä¸åŒ…å«ä»»ä½•è½¬ä¹‰çš„å¼•å·<code>(&quot;\&quot;&quot;)</code>ï¼Œæ‰€ä»¥å°±å¯ä»¥ç›´æ¥ä½¿ç”¨<code>&quot;._&quot;</code>æ¥æŸ¥æ‰¾ä½äºä¸€å¯¹å¼•å·ä¸­çš„å†…å®¹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="string">[[follows a typical string:&quot;This is \&quot;great\&quot;!&quot;.]]</span></span><br><span class="line">s = code(s)</span><br><span class="line">s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s,<span class="string">&#x27;&quot;.-&quot;&#x27;</span>,<span class="built_in">string</span>.<span class="built_in">upper</span>)</span><br><span class="line">s = decode(s)</span><br><span class="line"><span class="built_in">print</span>(s)	<span class="comment">-- follows a typical string:&quot;THIS IS \&quot;GREAT\&quot;!&quot;.</span></span><br></pre></td></tr></table></figure>
<p>æˆ–è€…å†™æˆï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(decode(<span class="built_in">string</span>.<span class="built_in">gsub</span>(code(s),<span class="string">&#x27;&quot;.-&quot;&#x27;</span>,<span class="built_in">string</span>.<span class="built_in">upper</span>)))</span><br></pre></td></tr></table></figure>
<p>æ˜¯å¦èƒ½å¤Ÿå°†æ¨¡å¼åŒ¹é…å‡½æ•°ç”¨äºUTF-8å­—ç¬¦ä¸²å–å†³äºæ¨¡å¼æœ¬èº«ã€‚ç”±äºUTF-8çš„ä¸»è¦ç‰¹å¾ä¹‹ä¸€å°±æ˜¯ä»»æ„å­—ç¬¦çš„ç¼–ç ä¸ä¼šå‡ºç°åœ¨åˆ«çš„å­—ç¬¦çš„ç¼–ç ä¸­ï¼Œå› æ­¤æ–‡æœ¬ç±»çš„æ¨¡å¼ä¸€èˆ¬å¯ä»¥æ­£å¸¸å·¥ä½œã€‚å­—ç¬¦åˆ†ç±»å’Œå­—ç¬¦é›†åªå¯¹ASCIIå­—ç¬¦æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å¯¹UTF-8å­—å­—ç¬¦ä¸²ä½¿ç”¨æ¨¡å¼â€™%sâ€™ï¼Œä½†å®ƒåªèƒ½åŒ¹é…ASCIIç©ºæ ¼ï¼Œè€Œä¸èƒ½åŒ¹é…è¯¸å¦‚HTMLç©ºæ ¼æˆ–è’™å¤æ–‡å…ƒéŸ³åˆ†éš”ç¬¦ç­‰å…¶ä»–çš„Uicodeç©ºæ ¼ã€‚<br>æ°å½“çš„æ¨¡å¼èƒ½å¤Ÿä¸ºå¤„ç†Unicodeå¸¦æ¥é¢å¤–çš„èƒ½åŠ›ã€‚ä¸€ä¸ªä¼˜ç§€çš„ä¾‹å­æ˜¯é¢„å®šä¹‰æ¨¡å¼utf8.charpatternï¼Œè¯¥æ¨¡å¼åªç²¾ç¡®åœ°åŒ¹é…ä¸€ä¸ªUTF-8å­—ç¬¦ã€‚utf8æ ‡å‡†åº“ä¸­å°±æ˜¯æŒ‰ç…§ä¸‹é¢çš„æ–¹æ³•å®šä¹‰è¿™ä¸ªæ¨¡å¼çš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">utf8.charpattern = [\<span class="number">0</span>-\x7F\xC2-\xF4][\x80-\xBF]*</span><br></pre></td></tr></table></figure>
<p>è¯¥æ¨¡å¼çš„ç¬¬1éƒ¨åˆ†åŒ¹é…ASCIIå­—ç¬¦æˆ–å¤šå­—èŠ‚åºåˆ—çš„å…¶å®å­—èŠ‚ã€‚ç¬¬2éƒ¨åˆ†åˆ™åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªåç»­çš„è‡ªå·±ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaçš„å…ƒè¡¨å’Œå…ƒæ–¹æ³•</title>
    <url>/62511.html</url>
    <content><![CDATA[<p>é€šå¸¸ï¼ŒLuaè¯­è¨€ä¸­çš„æ¯ç§ç±»å‹çš„å€¼éƒ½æœ‰ä¸€å¥—å¯é¢„è§çš„æ“ä½œé›†åˆã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°å­—ç›¸åŠ ï¼Œå¯ä»¥è¿æ¥å­—ç¬¦ï¼Œè¿˜å¯ä»¥åœ¨è¡¨ä¸­æ’å…¥é”®å€¼å¯¹ç­‰ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ— æ³•å°†ä¸¤ä¸ªè¡¨ç›¸åŠ ï¼Œæ— æ³•å¯¹å‡½æ•°åšæ¯”è¾ƒï¼Œä¹Ÿçºè°ƒç”¨ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé™¤éä½¿ç”¨å…ƒè¡¨ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å…ƒè¡¨å¯ä»¥ä¿®æ”¹ä¸€ä¸ªå€¼åœ¨é¢å¯¹ä¸€ä¸ªæœªçŸ¥æ“ä½œæ—¶çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œå‡è®¾aå’Œbéƒ½æ˜¯è¡¨ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡å…ƒè¡¨å®šä¹‰Luaè¯­è¨€å¦‚ä½•è®¡ç®—è¡¨è¾¾å¼a+bã€‚å½“Luaè¯­è¨€è¯•å›¾å°†ä¸¤ä¸ªè¡¨ç›¸åŠ æ—¶ï¼Œå®ƒä¼šå…ˆæ£€æŸ¥ä¸¤è€…ä¹‹ä¸€æ˜¯å¦æœ‰å…ƒè¡¨ä¸”è¯¥å…ƒè¡¨ä¸­æ˜¯å¦æœ‰<code>__add</code>å­—æ®µã€‚å¦‚æœLuaè¯­è¨€æ‰¾åˆ°äº†è¯¥å­—æ®µï¼Œå°±è°ƒç”¨è¯¥å­—æ®µå¯¹åº”çš„å€¼ï¼Œå³æ‰€è°“çš„å…ƒæ–¹æ³•ï¼Œåœ¨æœ¬ä¾‹ä¸­å°±æ˜¯ç”¨äºè®¡ç®—è¡¨çš„å’Œçš„å‡½æ•°ã€‚<br>å¯ä»¥è®¤ä¸ºï¼Œå…ƒè¡¨æ˜¯é¢å‘å¯¹è±¡é¢†åŸŸä¸­çš„å—é™åˆ¶ç±»ã€‚åƒç±»ä¸€æ ·ï¼Œå…ƒè¡¨å®šä¹‰çš„æ˜¯å®ä¾‹çš„è¡Œä¸ºã€‚ä¸è¿‡ï¼Œç”±äºå…ƒè¡¨åªèƒ½ç»™å‡ºé¢„å…ˆå®šä¹‰çš„æ“ä½œé›†åˆçš„è¡Œä¸ºï¼Œæ‰€ä»¥å…ƒè¡¨è¢«ç±»æ›´å—é™ï¼›åŒæ—¶ï¼Œå…ƒè¡¨ä¹Ÿä¸æ”¯æŒç»§æ‰¿ã€‚<br>Luaè¯­è¨€ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½å¯ä»¥æœ‰å…ƒè¡¨ã€‚æ¯ä¸€ä¸ªè¡¨å’Œç”¨æˆ·æ•°æ®ç±»å‹éƒ½å…·æœ‰å„è‡ªç‹¬ç«‹çš„å…ƒè¡¨ï¼Œè€Œå…¶ä»–ç±»å‹çš„å€¼åˆ™å…±äº«å¯¹åº”ç±»å‹æ‰€å±çš„åŒä¸€ä¸ªå…ƒè¡¨ã€‚Luaè¯­è¨€åœ¨åˆ›å»ºæ–°è¡¨æ—¶ä¸å¸¦å…ƒè¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = &#123;&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getmetatable</span>(t))   <span class="comment">-- nil</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨å‡½æ•°setmetatableæ¥è®¾ç½®æˆ–ä¿®æ”¹ä»»æ„è¡¨çš„å…ƒè¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t1 = &#123;&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(t,t1)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getmetatable</span>(t) == t1)		<span class="comment">--true</span></span><br></pre></td></tr></table></figure>
<p>åœ¨Luaè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬åªèƒ½ä¸ºè¡¨è®¾ç½®å…ƒè¡¨ï¼›å¦‚æœè¦ä¸ºå…¶ä»–ç±»å‹çš„å€¼è®¾ç½®å…ƒè¡¨ï¼Œåˆ™å¿…é¡»é€šè¿‡Cä»£ç æˆ–è°ƒè¯•åº“å®Œæˆï¼ˆè¯¥é™åˆ¶å­˜åœ¨çš„ä¸»è¦åŸå› æ˜¯ä¸ºäº†é˜²æ­¢è¿‡åº¦ä½¿ç”¨å¯¹æŸç§ç±»å‹çš„æ‰€æœ‰å€¼ç”Ÿæ•ˆçš„å…ƒè¡¨ã€‚Luaè¯­è¨€è€ç‰ˆæœ¬ä¸­çš„ç»éªŒè¡¨æ˜ï¼Œè¿™æ ·çš„å…¨å±€è®¾ç½®ç»å¸¸å¯¼è‡´ä¸å¯é‡ç”¨çš„ä»£ç ï¼‰ã€‚å­—ç¬¦ä¸²æ ‡å‡†åº“ä¸ºæ‰€æœ‰çš„å­—ç¬¦ä¸²éƒ½è®¾ç½®äº†åŒä¸€ä¸ªå…ƒè¡¨ï¼Œè€Œå…¶ä»–ç±»å‹åœ¨é»˜è®¤æƒ…å†µä¸­éƒ½æ²¡æœ‰å…ƒè¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">getmetatable</span>(<span class="string">&quot;hi&quot;</span>))		<span class="comment">-- table:0x80772e0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getmetatable</span>(<span class="string">&quot;xuxu&quot;</span>))     <span class="comment">-- table:0x80772e0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getmetatable</span>(<span class="number">10</span>))			<span class="comment">-- nil</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getmetatable</span>(<span class="built_in">print</span>))		<span class="comment">-- nil</span></span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªè¡¨å¯ä»¥æˆä¸ºä»»æ„å€¼çš„å…ƒè¡¨ï¼›ä¸€ç»„ç›¸å…³çš„è¡¨ä¹Ÿå¯ä»¥å…±äº«ä¸€ä¸ªæè¿°äº†å®ƒä»¬å…±åŒè¡Œä¸ºçš„é€šç”¨å…ƒè¡¨ï¼›ä¸€ä¸ªè¡¨è¿˜å¯ä»¥æˆä¸ºå®ƒè‡ªå·±çš„å…ƒè¡¨ï¼Œç”¨äºæè¿°å…¶è‡ªèº«ç‰¹æœ‰çš„è¡Œä¸ºã€‚æ€»ä¹‹ï¼Œä»»ä½•é…ç½®éƒ½æ˜¯åˆæ³•çš„ã€‚</p>
<h2 id="ç®—æœ¯è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•"><a href="#ç®—æœ¯è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•" class="headerlink" title="ç®—æœ¯è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•"></a>ç®—æœ¯è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•</h2><p>å‡è®¾æœ‰ä¸€ä¸ªç”¨è¡¨æ¥è¡¨ç¤ºé›†åˆçš„æ¨¡å—ï¼Œè¯¥æ¨¡å—è¿˜æœ‰ä¸€äº›ç”¨æ¥è®¡ç®—é›†åˆå¹¶é›†å’Œäº¤é›†ç­‰çš„å‡½æ•°ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ï¼šä¸€ä¸ªç”¨äºé›†åˆçš„ç®€å•æ¨¡å—</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> Set = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä½¿ç”¨æŒ‡å®šçš„åˆ—è¡¨åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set.new</span><span class="params">(l)</span></span></span><br><span class="line">	<span class="keyword">for</span> _, v inpairs(l) <span class="keyword">do</span> set[v] = <span class="literal">true</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> set</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set.union</span><span class="params">(a,b)</span></span></span><br><span class="line">	<span class="keyword">local</span> res = Set.new&#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">pairs</span>(a) <span class="keyword">do</span> res[k] = <span class="literal">true</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">pairs</span>(b) <span class="keyword">do</span> res[k] = <span class="literal">true</span> <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set.intersection</span><span class="params">(a,b)</span></span></span><br><span class="line">	<span class="keyword">local</span> res = Set.new&#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">pairs</span>(a) <span class="keyword">do</span></span><br><span class="line">		res[k] = b[k]</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> res</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å°†é›†åˆè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set.tostring</span><span class="params">(set)</span></span></span><br><span class="line">	<span class="keyword">local</span> l = &#123;&#125;		<span class="comment">-- ä¿å­˜é›†åˆä¸­æ‰€æœ‰å…ƒç´ çš„åˆ—è¡¨</span></span><br><span class="line">	<span class="keyword">for</span> e <span class="keyword">in</span> <span class="built_in">pairs</span>(set) <span class="keyword">do</span></span><br><span class="line">		l[#l + <span class="number">1</span>] = <span class="built_in">tostring</span>(e)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;&#123;&quot;</span> .. <span class="built_in">table</span>.<span class="built_in">concat</span>(l.<span class="string">&quot;,&quot;</span>)..<span class="string">&quot;&#125;&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> Set </span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œå‡è®¾æƒ³ä½¿ç”¨åŠ æ³•æ“ä½œç¬¦æ¥è®¡ç®—ä¸¤ä¸ªé›†åˆçš„å¹¶é›†ï¼Œé‚£ä¹ˆå¯ä»¥è®©æ‰€æœ‰è¡¨ç¤ºé›†åˆçš„è¡¨å…±äº«ä¸€ä¸ªå…ƒè¡¨ã€‚è¿™ä¸ªå…ƒè¡¨ä¸­å®šä¹‰äº†è¿™äº›è¡¨åº”è¯¥å¦‚ä½•æ‰§è¡ŒåŠ æ³•æ“ä½œã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ™®é€šçš„è¡¨ï¼Œè¿™ä¸ªè¡¨è¢«ç”¨ä½œé›†åˆçš„å…ƒè¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> mt = &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œä¿®æ”¹ç”¨äºåˆ›å»ºé›†åˆçš„å‡½æ•°<code>Set.new</code>ã€‚åœ¨æ–°ç‰ˆæœ¬ä¸­åªå¤šäº†ä¸€è¡Œï¼Œå³å°†mtè®¾ç½®ä¸ºå‡½æ•°Set.newæ‰€åˆ›å»ºçš„è¡¨çš„å…ƒè¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set.new</span><span class="params">(l)</span></span>		<span class="comment">-- ç¬¬äºŒä¸ªç‰ˆæœ¬</span></span><br><span class="line">	<span class="keyword">local</span> set = &#123;&#125;</span><br><span class="line">	<span class="built_in">setmetatable</span>(set,mt)</span><br><span class="line">	<span class="keyword">for</span> _, v <span class="keyword">in</span> inpairs(l) <span class="keyword">do</span> set[v] = <span class="literal">true</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> set</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æ­¤ä¹‹åï¼Œæ‰€æœ‰ç”±Set.newåˆ›å»ºçš„é›†åˆéƒ½å…·æœ‰äº†ä¸€ä¸ªç›¸åŒçš„å…ƒè¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s1 = Set.new&#123;<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">50</span>&#125;</span><br><span class="line">s2 = Set.new&#123;<span class="number">30</span>,<span class="number">1</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getmetatable</span>(s1))			<span class="comment">-- table:0x00672B60</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getmetatable</span>(s2))			<span class="comment">-- table:0x00672B60</span></span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œå‘å…ƒè¡¨ä¸­åŠ å…¥å…ƒæ–¹æ³•<code>__add</code>ï¼Œä¹Ÿå°±æ˜¯ç”¨äºæè¿°å¦‚ä½•å®ŒæˆåŠ æ³•çš„å­—æ®µï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mt.<span class="built_in">__add</span> = Set.union</span><br></pre></td></tr></table></figure>
<p>æ­¤åï¼Œåªè¦Luaè¯­è¨€è¯•å›¾å°†ä¸¤ä¸ªé›†åˆç›¸åŠ ï¼Œå®ƒå°±ä¼šè°ƒç”¨å‡½æ•°Set.unionï¼Œå¹¶å°†ä¸¤ä¸ªæ“ä½œæ•°ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚<br>é€šè¿‡å…ƒæ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨åŠ æ³•è¿ç®—ç¬¦æ¥è®¡ç®—é›†åˆçš„å¹¶é›†äº†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s3 = s1 + s2</span><br><span class="line"><span class="built_in">print</span>(Set.<span class="built_in">tostring</span>(s3))				<span class="comment">--&#123;1,10,20,30,50&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç±»ä¼¼åœ°ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¹˜æ³•è¿ç®—ç¬¦æ¥è®¡ç®—é›†åˆçš„äº¤é›†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mt.<span class="built_in">__mul</span> = Set.intersection</span><br><span class="line"><span class="built_in">print</span>(Set.<span class="built_in">tostring</span>(s1 + s2)*s1)		<span class="comment">-- &#123;10,20,30,50&#125;</span></span><br></pre></td></tr></table></figure>
<p>æ¯ç§ç®—æœ¯è¿ç®—ç¬¦éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å…ƒæ–¹æ³•ã€‚é™¤äº†åŠ æ³•å’Œä¹˜æ³•å¤–ï¼Œè¿˜æœ‰å‡æ³•(__sub)ã€é™¤æ³•(__div)ã€flooré™¤æ³•(__idiv)ã€è´Ÿæ•°(__unm)ã€å–æ¨¡(__mod)å’Œå¹‚è¿ç®—(__pow)ã€‚ç±»ä¼¼åœ°ï¼Œä½æ“ä½œä¹Ÿæœ‰å…ƒæ–¹æ³•ï¼šæŒ‰ä½ä¸(__band)ã€æŒ‰ä½æˆ–(__bor)ã€æŒ‰ä½å¼‚æˆ–(__bxor)ã€æŒ‰ä½å–å(__bnot)ã€å‘å·¦ç§»ä½(__shl)å’Œå‘å³ä½ç§»(__shr)ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å­—æ®µ<code>__concat</code>æ¥å®šä¹‰è¿æ¥è¿ç®—ç¬¦çš„è¡Œä¸ºã€‚<br>å½“æˆ‘ä»¬æŠŠä¸¤ä¸ªé›†åˆç›¸åŠ æ—¶ï¼Œä½¿ç”¨å“ªä¸ªå…ƒç´ æ˜¯ç¡®å®šçš„ã€‚ç„¶è€Œï¼Œå½“ä¸€ä¸ªè¡¨è¾¾å¼ä¸­æ··åˆäº†ä¸¤ç§å…·æœ‰ä¸åŒå…ƒç´ çš„å€¼æ—¶ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = Set.new&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">s = s + <span class="number">8</span></span><br></pre></td></tr></table></figure>
<p>Luaè¯­è¨€ä¼šæŒ‰ç…§å¦‚ä¸‹æ­¥éª¤æ¥æŸ¥æ‰¾å…ƒæ–¹æ³•ï¼šå¦‚æœç¬¬ä¸€ä¸ªå€¼æœ‰å…ƒè¡¨ä¸”å…ƒè¡¨ä¸­å­˜åœ¨æ‰€éœ€çš„å…ƒæ–¹æ³•ï¼Œé‚£ä¹ˆLuaè¯­è¨€å°±ä½¿ç”¨è¿™ä¸ªå…ƒæ–¹æ³•ï¼Œä¸ç¬¬äºŒä¸ªå€¼æ— å…³ï¼›å¦‚æœç¬¬äºŒä¸ªå€¼æœ‰å…ƒè¡¨ä¸”å…ƒè¡¨ä¸­å­˜åœ¨æ‰€éœ€çš„å…ƒæ–¹æ³•ï¼ŒLuaè¯­è¨€å°±ä½¿ç”¨è¿™ä¸ªå…ƒæ–¹æ³•ï¼›å¦åˆ™ï¼ŒLuaè¯­è¨€å°±æŠ›å‡ºå¼‚å¸¸ã€‚å› æ­¤ï¼Œä¸Šä¾‹ä¼šè°ƒç”¨Set.unionï¼Œè€Œè¡¨è¾¾å¼10+så’Œâ€helloâ€+såŒç†ï¼ˆç”±äºæ•°å€¼å’Œå­—ç¬¦ä¸²éƒ½æ²¡æœ‰å…ƒæ–¹æ³•__addï¼‰ã€‚<br>Luaè¯­è¨€ä¸å…³å¿ƒè¿™äº›æ··æ·†ç±»å‹ï¼Œä½†æˆ‘ä»¬åœ¨å®ç°ä¸­éœ€è¦å…³å¿ƒæ··åˆç±»å‹ã€‚å¦‚æœæˆ‘ä»¬æ‰§è¡Œäº†s &#x3D; s + 8ï¼Œé‚£ä¹ˆåœ¨Set.unionå†…éƒ¨å°±ä¼šå‘ç”Ÿé”™è¯¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">bad argument #<span class="number">1</span> to <span class="string">&#x27;pairs&#x27;</span> (<span class="built_in">table</span> expected , got number)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³è¦å¾—åˆ°æ›´æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯ï¼Œåˆ™å¿…é¡»åœ¨è¯•å›¾è¿›è¡Œæ“ä½œå‰æ˜¾å¼åœ°æ£€æŸ¥æ“ä½œæ•°çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set.union</span><span class="params">(a,b)</span></span></span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">getmetatable</span>(a) ~= mt <span class="keyword">or</span> <span class="built_in">getmetatable</span>(b) ~= mt <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;attempt to &#x27;add&#x27; a set with a non-set value&quot;</span>,<span class="number">2</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	åŒå‰</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œå‡½æ•°errorçš„ç¬¬äºŒä¸ªå‚æ•°è¯´æ˜äº†å‡ºé”™çš„åŸå› ä½äºè°ƒç”¨è¯¥å‡½æ•°çš„ä»£ç ä¸­ã€‚</p>
<h2 id="å…³ç³»è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•"><a href="#å…³ç³»è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•" class="headerlink" title="å…³ç³»è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•"></a>å…³ç³»è¿ç®—ç›¸å…³çš„å…ƒæ–¹æ³•</h2><p>å…ƒè¡¨è¿˜å…è®¸æˆ‘ä»¬åˆ¶å®šå…³ç³»è¿ç®—ç¬¦çš„å«ä¹‰ï¼Œå…¶ä¸­çš„å…ƒæ–¹æ³•åŒ…æ‹¬ç­‰äº(__eq)ã€å°äº(__lt)å’Œå°äºç­‰äº(__le)ã€‚å…¶ä»–ä¸‰ä¸ªå…³ç³»è¿ç®—ç¬¦æ²¡æœ‰å•ç‹¬çš„å…ƒæ–¹æ³•ï¼ŒLuaè¯­è¨€ä¼šå°†<code>a~=b</code>è½¬æ¢ä¸º<code>not(a == b),a&gt;b</code>è½¬æ¢ä¸º<code>b&lt;a,a&gt;=b</code>è½¬æ¢ä¸º<code>b&lt;=a</code>ã€‚<br>åœ¨Luaè¯­è¨€çš„è€ç‰ˆæœ¬ä¸­ï¼ŒLuaè¯­è¨€ä¼šé€šè¿‡å°†<code>a&lt;=b</code>è½¬æ¢ä¸º<code>not (b&lt;a)</code>æ¥æŠŠæ‰€æœ‰çš„å…³ç³»è¿ç®—ç¬¦è½¬åŒ–ä¸ºä¸€ä¸ªå…³ç³»è¿ç®—ç¬¦ã€‚ä¸è¿‡ï¼Œè¿™ç§è½¬åŒ–åœ¨é‡åˆ°éƒ¨åˆ†æœ‰åºæ—¶å°±ä¼šä¸æ­£ç¡®ã€‚æ‰€è°“éƒ¨åˆ†æœ‰åºæ˜¯æŒ‡ï¼Œå¹¶éæ‰€æœ‰ç±»å‹çš„å…ƒç´ éƒ½èƒ½å¤Ÿè¢«æ­£ç¡®åœ°æ’åºã€‚ä¾‹å¦‚ï¼Œç”±äº<em>Not a Number(NaN)<em>çš„å­˜åœ¨ï¼Œå¤§å¤šæ•°è®¡ç®—æœºä¸­çš„æµ®ç‚¹æ•°å°±ä¸æ˜¯å®Œå…¨å¯ä»¥æ’åºçš„ã€‚æ ¹æ®IEEE 754æ ‡å‡†ï¼ŒNaNä»£è¡¨æœªå®šä¹‰çš„å€¼ï¼Œä¾‹å¦‚</em>O&#x2F;O</em>çš„ç»“æœå°±æ˜¯NaNã€‚æ ‡å‡†è§„å®šä»»ä½•æ¶‰åŠNaNçš„æ¯”è¾ƒéƒ½åº”è¿”å›å‡ï¼Œè¿™å°±æ„å‘³ç€NaN&lt;&#x3D;xæ°¸è¿œä¸ºå‡ï¼Œx&lt;NaNä¹Ÿä¸ºå‡ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>a&lt;=b</code>åˆ°<code>not(b&lt;a)</code>çš„è½¬åŒ–ä¹Ÿå°±ä¸åˆæ³•äº†ã€‚<br>åœ¨é›†åˆçš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿé¢ä¸´ç±»ä¼¼çš„é—®é¢˜ã€‚&lt;&#x3D;æ˜¾è€Œæ˜“è§ä¸”æœ‰ç”¨çš„å«ä¹‰é›†åˆåŒ…å«ï¼š<code>a&lt;=b</code>é€šå¸¸æ„å‘³ç€aæ˜¯bçš„ä¸€ä¸ªå­é›†ã€‚ç„¶è€Œï¼Œæ ¹æ®éƒ¨åˆ†æœ‰åºçš„å®šä¹‰ï¼Œ<code>a&lt;=b</code>å’Œ<code>b&lt;a</code>å¯èƒ½åŒæ—¶ä¸ºå‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°±å¿…é¡»å®ç°<code>__le</code>ï¼ˆå°äºç­‰äºï¼Œå­é›†å…³ç³»ï¼‰å’Œ<code>__lt</code>ï¼ˆå°äºï¼ŒçœŸå­é›†å…³ç³»ï¼‰ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mt.<span class="built_in">__le</span> = <span class="function"><span class="keyword">function</span> <span class="params">(a,b)</span></span> 		<span class="comment">-- å­é›†</span></span><br><span class="line">	<span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">pairs</span>(a) <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> b[k] <span class="keyword">then</span> <span class="keyword">return</span> <span class="literal">false</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">mt.<span class="built_in">__lt</span> = <span class="function"><span class="keyword">function</span> <span class="params">(a,b)</span></span>		<span class="comment">-- çœŸå­é›†</span></span><br><span class="line">	<span class="keyword">return</span> a&lt;= b <span class="keyword">and</span> <span class="keyword">not</span> (b &lt;= a)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡é›†åˆåŒ…å«æ¥å®šä¹‰é›†åˆç›¸ç­‰:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mt.<span class="built_in">__eq</span> = <span class="function"><span class="keyword">function</span> <span class="params">(a,b)</span></span></span><br><span class="line">	<span class="keyword">return</span> a &lt;= b <span class="keyword">and</span> b &lt;= a</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æœ‰åŠ›è¿™äº›å®šä¹‰åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¯”è¾ƒé›†åˆäº†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s1 = Set.new&#123;<span class="number">2</span>,<span class="number">4</span>&#125;</span><br><span class="line">s2 = Set.new&#123;<span class="number">4</span>,<span class="number">10</span>,<span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(s1 &lt;= s2)			<span class="comment">-- true</span></span><br><span class="line"><span class="built_in">print</span>(s1 &lt; s2)			<span class="comment">-- true</span></span><br><span class="line"><span class="built_in">print</span>(s1 &gt;= s1)			<span class="comment">-- true</span></span><br><span class="line"><span class="built_in">print</span>(s1 &gt; s1)			<span class="comment">-- false</span></span><br><span class="line"><span class="built_in">print</span>(s1 == s2 * s1)	<span class="comment">-- true</span></span><br></pre></td></tr></table></figure>
<p>ç›¸ç­‰æ¯”è¾ƒæœ‰ä¸€äº›é™åˆ¶ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„ç±»å‹ä¸åŒï¼Œé‚£ä¹ˆç›¸ç­‰æ¯”è¾ƒæ“ä½œä¸ä¼šè°ƒç”¨ä»»ä½•å…ƒæ–¹æ³•è€Œç›´æ¥è¿”å›falseã€‚å› æ­¤ï¼Œä¸ç®¡å…ƒæ–¹æ³•å¦‚ä½•ï¼Œé›†åˆæ°¸è¿œä¸ç­‰äºæ•°å­—ã€‚</p>
<h2 id="åº“å®šä¹‰ç›¸å…³çš„å…ƒæ–¹æ³•"><a href="#åº“å®šä¹‰ç›¸å…³çš„å…ƒæ–¹æ³•" class="headerlink" title="åº“å®šä¹‰ç›¸å…³çš„å…ƒæ–¹æ³•"></a>åº“å®šä¹‰ç›¸å…³çš„å…ƒæ–¹æ³•</h2><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è§è¿‡çš„æ‰€æœ‰å…ƒæ–¹æ³•é’ˆå¯¹çš„éƒ½æ˜¯æ ¸å¿ƒLuaè¯­è¨€ã€‚Luaè¯­è¨€è™šæ‹Ÿæœºä¼šæ£€æµ‹ä¸€ä¸ªæ“ä½œä¸­è®¾è®¡çš„å€¼æ˜¯å¦æœ‰å­˜åœ¨å¯¹åº”å…ƒæ–¹æ³•çš„å…ƒè¡¨ã€‚ä¸è¿‡ï¼Œç”±äºå…ƒè¡¨æ˜¯ä¸€ä¸ªæ™®é€šçš„è¡¨ï¼Œæ‰€ä»¥ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚å› æ­¤ï¼Œç¨‹åºåº“åœ¨å…ƒè¡¨ä¸­å®šä¹‰å’Œä½¿ç”¨å®ƒä»¬è‡ªå·±çš„å­—æ®µä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„æ—¶é—´ã€‚<br>å‡½æ•°tostringå°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ã€‚æ­£å¦‚æˆ‘ä»¬æ­¤å‰æ‰€çœ‹åˆ°çš„ï¼Œå‡½æ•°tostringèƒ½å°†è¡¨è¡¨ç¤ºä¸€ç§ç®€å•çš„æ–‡æœ¬æ ¼å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(&#123;&#125;)			<span class="comment">--table:0x8062ac0</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°printæ€»æ˜¯è°ƒç”¨tostringæ¥è¿›è¡Œæ ¼å¼åŒ–è¾“å‡ºã€‚ä¸è¿‡ï¼Œå½“å¯¹å€¼è¿›è¡Œæ ¼å¼åŒ–æ—¶ï¼Œå‡½æ•°tostringä¼šé¦–å…ˆæ£€æŸ¥å€¼æ˜¯å¦æœ‰ä¸€ä¸ªå…ƒæ–¹æ³•<code>__tostring</code>ã€‚å¦‚æœæœ‰ï¼Œå‡½æ•°tostringå°±è°ƒç”¨è¿™ä¸ªå…ƒæ–¹æ³•æ¥å®Œæˆå·¥ä½œï¼Œå°†å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ ç»™è¯¥å‡½æ•°ï¼Œç„¶åæŠŠå…ƒæ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºå‡½æ•°tostringçš„è¿”å›å€¼ã€‚<br>åœ¨ä¹‹å‰é›†åˆçš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®šä¹‰äº†ä¸€ä¸ªå°†é›†åˆè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²çš„å‡½æ•°ã€‚å› æ­¤ï¼Œåªéœ€è¦åœ¨å…ƒè¡¨ä¸­è®¾ç½®__tostringå­—æ®µï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mt.<span class="built_in">__tostring</span> = Set.<span class="built_in">tostring</span></span><br></pre></td></tr></table></figure>
<p>ä¹‹åï¼Œå½“ä»¥ä¸€ä¸ªé›†åˆä½œä¸ºå‚æ•°è°ƒç”¨å‡½æ•°printæ—¶ï¼Œprintå°±ä¼šè°ƒç”¨å‡½æ•°tostringï¼Œtostringåˆä¼šè°ƒç”¨Set.tostring:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s1 = Set.new&#123;<span class="number">10</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(s1)			<span class="comment">-- &#123;4,5,10&#125;</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°setmetatableå’Œgetmetatableä¹Ÿç”¨åˆ°äº†å…ƒæ–¹æ³•ï¼Œç”¨äºä¿æŠ¤å…ƒè¡¨ã€‚å‡è®¾æƒ³è¦ä¿æŠ¤æˆ‘ä»¬çš„é›†åˆï¼Œå°±è¦ä½¿ç”¨æˆ·æ—¢ä¸èƒ½çœ‹åˆ°ä¹Ÿä¸èƒ½ä¿®æ”¹é›†åˆçš„å…ƒè¡¨ã€‚å¦‚æœåœ¨å…ƒè¡¨ä¸­è®¾ç½®__metatableå­—æ®µï¼Œé‚£ä¹ˆgetmetatableä¼šè¿”å›è¿™ä¸ªå­—æ®µçš„å€¼ï¼Œè€Œsetmetatableåˆ™ä¼šå¼•å‘ä¸€ä¸ªé”™è¯¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mt.<span class="built_in">__metatable</span> = <span class="string">&quot;not yopur business&quot;</span></span><br><span class="line"></span><br><span class="line">s1 = Set.new&#123;&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getmetatable</span>(s1))				<span class="comment">-- not your business</span></span><br><span class="line"><span class="built_in">setmetatable</span>(s1,&#123;&#125;)</span><br><span class="line">	<span class="built_in">stdin</span>:<span class="number">1</span>:cannot change protected metatable</span><br></pre></td></tr></table></figure>
<p>ä»Lua5.2å¼€å§‹ï¼Œå‡½æ•°pairsä¹Ÿæœ‰äº†å¯¹åº”çš„å…ƒæ–¹æ³•ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¡¨è¢«éå†çš„æ–¹å¼å’Œä¸ºéè¡¨çš„å¯¹è±¡å¢åŠ éå†è¡Œä¸ºã€‚å½“ä¸€ä¸ªå¯¹è±¡æ‹¥æœ‰__pairså…ƒæ–¹æ³•æ—¶ï¼Œpairsä¼šè°ƒç”¨è¿™ä¸ªå…ƒæ–¹æ³•æ¥å®Œæˆéå†ã€‚</p>
<h2 id="è¡¨ç›¸å…³çš„å…ƒæ–¹æ³•"><a href="#è¡¨ç›¸å…³çš„å…ƒæ–¹æ³•" class="headerlink" title="è¡¨ç›¸å…³çš„å…ƒæ–¹æ³•"></a>è¡¨ç›¸å…³çš„å…ƒæ–¹æ³•</h2><p>ç®—æœ¯è¿ç®—ç¬¦ã€ä½è¿ç®—ç¬¦å’Œå…³ç³»è¿ç®—ç¬¦çš„å…ƒæ–¹æ³•éƒ½å®šä¹‰äº†å„ç§é”™è¯¯æƒ…å†µçš„è¡Œä¸ºï¼Œä½†å®ƒä»¬éƒ½æ²¡æœ‰æ”¹å˜è¯­è¨€çš„æ­£å¸¸è¡Œä¸ºã€‚Luaè¯­è¨€è¿˜æä¾›äº†ä¸€ç§æ”¹å˜è¡¨åœ¨ä¸¤ç§æ­£å¸¸æƒ…å†µä¸‹çš„è¡Œä¸ºçš„æ–¹å¼ï¼Œå³è®¿é—®å’Œä¿®æ”¹è¡¨ä¸­ä¸å­˜åœ¨çš„å­—æ®µã€‚</p>
<h3 id="indexå…ƒæ–¹æ³•"><a href="#indexå…ƒæ–¹æ³•" class="headerlink" title="__indexå…ƒæ–¹æ³•"></a>__indexå…ƒæ–¹æ³•</h3><p>æ­£å¦‚æˆ‘ä»¬æ­¤å‰æ‰€çœ‹åˆ°çš„ï¼Œå½“è®¿é—®ä¸€ä¸ªè¡¨ä¸­ä¸å­˜åœ¨çš„å­—æ®µæ—¶ä¼šå¾—åˆ°nilã€‚è¿™æ˜¯æ­£ç¡®çš„ï¼Œä½†ä¸æ˜¯å®Œæ•´çš„çœŸç›¸ã€‚å®é™…ä¸Šï¼Œè¿™äº›è®¿é—®ä¼šå¼•å‘è§£é‡Šå™¨æŸ¥æ‰¾ä¸€ä¸ªåä¸º<code>__index</code>çš„å…ƒæ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªå…ƒæ–¹æ³•ï¼Œé‚£ä¹ˆåƒä¸€èˆ¬æƒ…å†µä¸‹ä¸€æ ·ï¼Œç»“æœå°±æ˜¯nilï¼›å¦åˆ™ï¼Œåˆ™ç”±è¿™ä¸ªå…ƒæ–¹æ³•æ¥æä¾›æœ€ç»ˆç»“æœã€‚<br>ä¸‹é¢ä»‹ç»ä¸€ä¸ªå…³äºç»§æ‰¿çš„åŸå‹ç¤ºä¾‹ã€‚å‡è®¾æˆ‘ä»¬è¦åˆ›å»ºå‡ ä¸ªè¡¨æ¥æè¿°çª—å£ï¼Œæ¯ä¸ªè¡¨ä¸­å¿…é¡»æè¿°çª—å£çš„ä¸€äº›å‚æ•°ï¼Œä¾‹å¦‚ä½ç½®ã€å¤§å°åŠä¸»é¢˜é¢œè‰²ç­‰ã€‚æ‰€æœ‰çš„è¿™äº›å‚æ•°éƒ½æœ‰é»˜è®¤å€¼ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›åœ¨åˆ›å»ºçª—å£å¯¹è±¡æ—¶åªéœ€è¦ç»™å‡ºé‚£äº›ä¸åŒäºé»˜è®¤å€¼çš„å‚æ•°å³å¯ã€‚ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªæ„é€ å™¨æ¥å¡«å……ä¸å­˜åœ¨çš„å­—æ®µï¼Œç¬¬äºŒç§æ–¹æ³•æ˜¯è®©æ–°çª—å£ä»ä¸€ä¸ªåŸå‹çª—å£ç»§æ‰¿æ‰€æœ‰ä¸å­˜åœ¨çš„å­—æ®µã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å£°æ˜ä¸€ä¸ªåŸå‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºå…·æœ‰é»˜è®¤å€¼çš„åŸå‹</span></span><br><span class="line">prototype = &#123;x = <span class="number">0</span>, y = <span class="number">0</span> ,width = <span class="number">100</span>,height = <span class="number">100</span>&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œå£°æ˜ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè®©æ„é€ å‡½æ•°åˆ›å»ºå…±äº«åŒä¸€ä¸ªå…ƒè¡¨çš„æ–°çª—å£ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> mt = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">new</span><span class="params">(o)</span></span></span><br><span class="line">	<span class="built_in">setmetatable</span>(o,mt)</span><br><span class="line">	<span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥å®šä¹‰å…ƒæ–¹æ³•__index:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mt.<span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span><span class="params">(_,key)</span></span></span><br><span class="line">	<span class="keyword">return</span> prototype[key]</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™æ®µä»£ç åï¼Œåˆ›å»ºä¸€ä¸ªæ–°çª—å£ï¼Œå¹¶æŸ¥è¯¢ä¸€ä¸ªåˆ›å»ºæ—¶æ²¡æœ‰æŒ‡å®šçš„å­—æ®µï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">w = new&#123;x = <span class="number">10</span>,y = <span class="number">20</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(w.width) 		<span class="comment">-- 100</span></span><br></pre></td></tr></table></figure>
<p>Luaè¯­è¨€ä¼šå‘ç°wä¸­æ²¡æœ‰å¯¹åº”çš„å­—æ®µâ€widthâ€ï¼Œä½†å´æœ‰ä¸€ä¸ªå¸¦æœ‰<code>__index</code>å…ƒæ–¹æ³•çš„å…ƒè¡¨ã€‚å› æ­¤ï¼ŒLuaè¯­è¨€ä¼šä»¥wï¼ˆè¡¨ï¼‰å’Œâ€widthâ€ï¼ˆä¸å­˜åœ¨çš„é”®ï¼‰ä¸ºå‚æ•°æ¥è°ƒç”¨è¿™ä¸ªå…ƒæ–¹æ³•ã€‚å…ƒæ–¹æ³•éšåä¼šç”¨è¿™ä¸ªé”®æ¥æ£€ç´¢åŸå‹å¹¶è¿”å›ç»“æœã€‚<br>åœ¨Luaè¯­è¨€ä¸­ï¼Œä½¿ç”¨å…ƒæ–¹æ³•<code>__index</code>æ¥å®ç°ç»§æ‰¿æ˜¯å¾ˆæ™®é€šçš„æ–¹æ³•ã€‚è™½ç„¶è¢«å«ä½œæ–¹æ³•ï¼Œä½†å…ƒæ–¹æ³•<code>__index</code>ä¸ä¸€å®šå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨ã€‚å½“å…ƒæ–¹æ³•æ˜¯ä¸€ä¸ªå‡½æ•°æ—¶ï¼ŒLuaè¯­è¨€ä¼šä»¥è¡¨å’Œä¸å­˜åœ¨çš„é”®ä¸ºå‚æ•°è°ƒç”¨è¯¥å‡½æ•°ï¼Œæ­£å¦‚æˆ‘ä»¬åˆšåˆšæ‰€çœ‹åˆ°çš„ã€‚å½“å…ƒæ–¹æ³•æ˜¯ä¸€ä¸ªè¡¨æ—¶ï¼ŒLuaè¯­è¨€å°±è®¿é—®è¿™ä¸ªè¡¨ã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬æ­¤å‰çš„ç¤ºä¾‹ä¸­ï¼Œå¯ä»¥æŠŠ<code>__index</code>ç®€å•åœ°å£°æ˜ä¸ºå¦‚ä¸‹æ ·å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mt.<span class="built_in">__index</span> = prototype</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œå½“Luaè¯­è¨€æŸ¥æ‰¾å…ƒè¡¨çš„__indexå­—æ®µæ—¶ï¼Œä¼šå‘ç°å­—æ®µçš„å€¼æ˜¯è¡¨prototypeã€‚å› æ­¤ï¼ŒLuaè¯­è¨€å°±ä¼šåœ¨è¿™ä¸ªè¡¨ä¸­ç»§ç»­æŸ¥æ‰¾ï¼Œå³ç­‰ä»·åœ°æ‰§è¡Œprototype[â€œwidthâ€]ï¼Œå¹¶å¾—åˆ°é¢„æœŸçš„ç»“æœã€‚<br>å°†ä¸€ä¸ªè¡¨ç”¨ä½œ__indexå…ƒæ–¹æ³•ä¸ºå®ç°å•ç»§æ‰¿æä¾›äº†ä¸€ç§ç®€å•å¿«æ·çš„æ–¹æ³•ã€‚è™½ç„¶å°†å‡½æ•°ç”¨ä½œå…ƒæ–¹æ³•å¼€é”€æ›´æ˜‚è´µï¼Œä½†å‡½æ•°å´æ›´åŠ çµæ´»ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°æ¥å®ç°å¤šç»§æ‰¿ã€ç¼“å­˜åŠå…¶ä»–ä¸€äº›å˜ä½“ã€‚<br>å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨è®¿é—®ä¸€ä¸ªè¡¨æ—¶ä¸è°ƒç”¨__indexå…ƒæ–¹æ³•ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å‡½æ•°rawgetã€‚è°ƒç”¨rawget(t,i)ä¼šå¯¹è¡¨tè¿›è¡ŒåŸå§‹çš„è®¿é—®ï¼Œå³åœ¨ä¸è€ƒè™‘å…ƒè¡¨çš„æƒ…å†µä¸‹å¯¹è¡¨è¿›è¡Œç®€å•çš„è®¿é—®ã€‚è¿›è¡Œä¸€æ¬¡åŸå§‹è®¿é—®å¹¶ä¸ä¼šåŠ å¿«ä»£ç çš„æ‰§è¡Œï¼ˆä¸€æ¬¡å‡½æ•°è°ƒç”¨çš„å¼€é”€å°±ä¼šæŠ¹æ€ç”¨æˆ·æ‰€ä½œçš„è¿™äº›åŠªåŠ›ï¼‰ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬åç»­ä¼šçœ‹åˆ°ï¼Œæœ‰æ—¶ç¡®å®ä¼šç”¨åˆ°åŸå§‹è®¿é—®ã€‚</p>
<h3 id="newindexå…ƒæ–¹æ³•"><a href="#newindexå…ƒæ–¹æ³•" class="headerlink" title="__newindexå…ƒæ–¹æ³•"></a>__newindexå…ƒæ–¹æ³•</h3><p>å…ƒæ–¹æ³•<code>__newindex</code>ä¸<code>__index</code>ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå‰è€…ç”¨äºè¡¨çš„æ›´æ–°è€Œåè€…ç”¨äºè¡¨çš„æŸ¥è¯¢ã€‚å½“å¯¹ä¸€ä¸ªè¡¨ä¸­ä¸å­˜åœ¨çš„ç´¢å¼•èµ‹å€¼æ—¶ï¼Œè§£é‡Šå™¨å°±ä¼šæŸ¥æ‰¾<code>__newindex</code>å…ƒæ–¹æ³•ï¼šå¦‚æœè¿™ä¸ªå…ƒæ–¹æ³•å­˜åœ¨ï¼Œé‚£ä¹ˆè§£é‡Šå™¨å°±è°ƒç”¨å®ƒè€Œä¸æ‰§è¡Œèµ‹å€¼ã€‚åƒå…ƒæ–¹æ³•__indexä¸€æ ·ï¼Œå¦‚æœè¿™ä¸ªå…ƒæ–¹æ³•æ—¶ä¸€ä¸ªè¡¨ï¼Œè§£é‡Šå™¨å°±åœ¨æ­¤è¡¨ä¸­æ‰§è¡Œèµ‹å€¼ï¼Œè€Œä¸æ˜¯åœ¨åŸå§‹çš„è¡¨ä¸­è¿›è¡Œå¤åˆ¶ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªåŸå§‹å‡½æ•°å…è®¸æˆ‘ä»¬ç»•è¿‡å…ƒæ–¹æ³•ï¼šè°ƒç”¨rawset(t,k,v)æ¥ç­‰ä»·äº<code>t[k] =v</code>ï¼Œä½†ä¸æ¶‰åŠä»»ä½•å…ƒæ–¹æ³•ã€‚<br>ç»„åˆä½¿ç”¨å…ƒæ–¹æ³•__indexå’Œ__newindexå¯ä»¥å®ç°Luaè¯­è¨€ä¸­çš„ä¸€äº›å¼ºå¤§çš„ç»“æ„ï¼Œä¾‹å¦‚åªè¯»çš„è¡¨ã€å…·æœ‰é»˜è®¤å€¼çš„è¡¨å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ç»§æ‰¿ã€‚</p>
<h3 id="å…·æœ‰é»˜è®¤å€¼çš„è¡¨"><a href="#å…·æœ‰é»˜è®¤å€¼çš„è¡¨" class="headerlink" title="å…·æœ‰é»˜è®¤å€¼çš„è¡¨"></a>å…·æœ‰é»˜è®¤å€¼çš„è¡¨</h3><p>ä¸€ä¸ªæ™®é€šè¡¨ä¸­æ‰€æœ‰å­—æ®µçš„é»˜è®¤å€¼éƒ½æ˜¯nilã€‚é€šè¿‡å…ƒè¡¨ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä¿®æ”¹è¿™ä¸ªé»˜è®¤å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setDefualut</span><span class="params">(t,d)</span></span></span><br><span class="line">	<span class="keyword">local</span> mt = &#123;<span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span> <span class="keyword">return</span> d <span class="keyword">end</span>&#125;</span><br><span class="line">	<span class="built_in">setmetatable</span>(t,mt)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">tab = &#123;x = <span class="number">10</span>, y = <span class="number">20</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(tab.x,tab.z)			<span class="comment">-- 10  nil</span></span><br><span class="line">setDefualut(tab,<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(tab.x,tab.z)		<span class="comment">-- 10  0 </span></span><br></pre></td></tr></table></figure>
<p>åœ¨è°ƒç”¨setDefaultåï¼Œä»»ä½•å¯¹è¡¨tabä¸­ä¸å­˜åœ¨å­—æ®µçš„è®¿é—®éƒ½å°†è°ƒç”¨å®ƒçš„__indexå…ƒæ–¹æ³•ï¼Œè€Œè¿™ä¸ªå…ƒæ–¹æ³•ä¼šè¿”å›é›¶ï¼ˆè¿™ä¸ªå…ƒæ–¹æ³•ä¸­çš„å€¼æ˜¯dï¼‰ã€‚<br>å‡½æ•°setDefaultä¸ºæ‰€æœ‰éœ€è¦é»˜è®¤å€¼çš„è¡¨åˆ›é˜¿é‡‘ä¸€ä¸ªæ–°çš„é—­åŒ…å’Œä¸€ä¸ªæ–°çš„å…ƒè¡¨ã€‚å¦‚æœæˆ‘ä»¬æœ‰å¾ˆå¤šéœ€è¦é»˜è®¤å€¼çš„è¡¨ï¼Œé‚£ä¹ˆå¼€é”€ä¼šæ¯”è¾ƒå¤§ã€‚ç„¶è€Œï¼Œç”±äºå…·æœ‰é»˜è®¤å€¼dçš„å…ƒè¡¨æ˜¯äºå…ƒæ–¹æ³•å…³è”åœ¨ä¸€èµ·çš„ï¼Œæ‰€æœ‰æˆ‘ä»¬ä¸èƒ½æŠŠåŒæ„ä¸ªå…ƒè¡¨ç”¨äºå…·æœ‰ä¸åŒé»˜è®¤çš„è¡¨ã€‚ä¸ºäº†èƒ½å¤Ÿä½¿æ‰€æœ‰çš„è¡¨éƒ½ä½¿ç”¨åŒä¸€ä¸ªå…ƒè¡¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„å­—æ®µå°†æ¯ä¸ªè¡¨çš„é»˜è®¤å€¼å­˜æ”¾åˆ°è¡¨è‡ªèº«ä¸­ã€‚å¦‚æœä¸æ‹…å¿ƒå‘½åå†²çªçš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å½¢å¦‚<code>___</code>è¿™æ ·çš„é”®ä½œä¸ºé¢å¤–çš„å­—æ®µï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> mt = &#123;<span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span><span class="params">(t)</span></span> <span class="keyword">return</span> t.___ <span class="keyword">end</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setDefualut</span><span class="params">(t,d)</span></span></span><br><span class="line">	t,___ = d</span><br><span class="line">	<span class="built_in">setmetatable</span>(t,mt)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬åªåœ¨setDefaultå¤–åˆ›å»ºäº†ä¸€æ¬¡å…ƒè¡¨mtåŠå¯¹åº”çš„å…ƒæ–¹æ³•ã€‚<br>å¦‚æœæ‹…å¿ƒå‘½åå†²çªï¼Œè¦ç¡®ä¿è¿™ä¸ªç‰¹æ®Šé”®çš„å”¯ä¸€æ€§ä¹Ÿå¾ˆå®¹æ˜“ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„æ’é™¤è¡¨ï¼Œç„¶åå°†å®ƒä½œä¸ºé”®å³å¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> key = &#123;&#125;</span><br><span class="line"><span class="keyword">local</span> mt = &#123;<span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span> <span class="params">(t)</span></span> <span class="keyword">return</span> t[key] <span class="keyword">end</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setDefualut</span><span class="params">(t,d)</span></span></span><br><span class="line">	t[key] = d</span><br><span class="line">	<span class="built_in">setmetatable</span>(t,mt)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥å°†æ¯ä¸ªè¡¨ä¸å…¶é»˜è®¤å€¼å…³è”èµ·æ¥ï¼Œç§°ä¸ºå¯¹å¶è¡¨ç¤ºï¼Œå³ä½¿ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„è¡¨ï¼Œè¯¥è¡¨çš„é”®ä¸ºå„ç§è¡¨ï¼Œå€¼ä¸ºè¿™äº›è¡¨çš„é»˜è®¤å€¼ã€‚ä¸è¿‡ï¼Œä¸ºäº†æ­£ç¡®åœ°å®ç°è¿™ç§åšæ³•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ç§ç‰¹æ®Šçš„è¡¨ï¼Œç§°ä¸ºå¼±å¼•ç”¨è¡¨ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æš‚æ—¶ä¸ä¼šä½¿ç”¨å¼±å¼•ç”¨è¡¨ã€‚<br>å¦ä¸€ç§ä¸ºå…·æœ‰ç›¸åŒé»˜è®¤å€¼çš„è¡¨å¤ç”¨åŒä¸€ä¸ªå…ƒè¡¨çš„æ–¹å¼æ˜¯è®°å¿†å…ƒè¡¨ã€‚ä¸è¿‡ï¼Œè¿™ä¹Ÿéœ€è¦ç”¨åˆ°å¼±å¼•ç”¨è¡¨ã€‚</p>
<h3 id="è·Ÿè¸ªå¯¹è¡¨çš„è®¿é—®"><a href="#è·Ÿè¸ªå¯¹è¡¨çš„è®¿é—®" class="headerlink" title="è·Ÿè¸ªå¯¹è¡¨çš„è®¿é—®"></a>è·Ÿè¸ªå¯¹è¡¨çš„è®¿é—®</h3><p>å‡è®¾æˆ‘ä»¬è¦è·Ÿè¸ªå¯¹æŸä¸ªè¡¨çš„æ‰€æœ‰è®¿é—®ã€‚ç”±äº__indexå’Œ__newindexå…ƒæ–¹æ³•éƒ½æ˜¯åœ¨è¡¨ä¸­çš„ç´¢å¼•ä¸å­˜åœ¨æ—¶æ‰æœ‰ç”¨ï¼Œå› æ­¤ï¼Œæ•è·å¯¹ä¸€ä¸ªè¡¨è®¿é—®çš„å”¯ä¸€æ–¹å¼æ˜¯ä¿æŒè¡¨æ˜¯ç©ºçš„ã€‚å¦‚æœè¦ç›‘æ§å¯¹ä¸€ä¸ªè¡¨çš„æ‰€æœ‰è®¿é—®ï¼Œé‚£ä¹ˆéœ€è¦ä¸ºçœŸæ­£çš„è¡¨åˆ›å»ºä¸€ä¸ªä»£ç†ã€‚è¿™ä¸ªä»£ç†æ˜¯ä¸€ä¸ªç©ºçš„è¡¨ï¼Œå…·æœ‰ç”¨äºè·Ÿè¸ªæ‰€æœ‰è®¿é—®å¹¶å°†è®¿é—®é‡å®šå‘åˆ°åŸæ¥çš„è¡¨æ ¼çš„åˆç†å…ƒæ–¹æ³•ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ï¼š è·Ÿè¸ªå¯¹æ ‡çš„è®¿é—®</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">track</span><span class="params">(t)</span></span></span><br><span class="line">	<span class="keyword">local</span> proxy = &#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">-- ä¸ºä»£ç†åˆ›å»ºå…ƒè¡¨</span></span><br><span class="line">	<span class="keyword">local</span> mt = &#123;</span><br><span class="line">		<span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span><span class="params">(_,k)</span></span></span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;*access to element&quot;</span> .. <span class="built_in">tostring</span>(k))</span><br><span class="line">		<span class="keyword">return</span> t[k]			<span class="comment">-- è®¿é—®åŸæ¥çš„è¡¨</span></span><br><span class="line">	<span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">	<span class="built_in">__newindex</span> = <span class="function"><span class="keyword">function</span> <span class="params">(_,k,v)</span></span></span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;*update to element &quot;</span> .. <span class="built_in">tostring</span>(k) .. <span class="string">&quot; to &quot;</span> ..<span class="built_in">tostring</span>(v))</span><br><span class="line">		t[k] = v      <span class="comment">-- æ›´æ–°åŸæ¥çš„è¡¨</span></span><br><span class="line">	<span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">	__pairs = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(_,k)</span></span>			<span class="comment">--è¿­ä»£å‡½æ•°</span></span><br><span class="line">			<span class="keyword">local</span> nextkey,nextvalue = <span class="built_in">next</span>(t,k)</span><br><span class="line">			<span class="keyword">if</span> nextkey ~= <span class="literal">nil</span> <span class="keyword">then</span> 		<span class="comment">-- é¿å…æœ€åä¸€ä¸ªå€¼</span></span><br><span class="line">				<span class="built_in">print</span>(<span class="string">&quot;*traversing element &quot;</span> .. <span class="built_in">tostring</span>(nextkey))</span><br><span class="line">			<span class="keyword">end</span></span><br><span class="line">			<span class="keyword">return</span> nextkey,nextvalue</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">	<span class="built_in">__len</span> = <span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="keyword">return</span> #t <span class="keyword">end</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">setmetatable</span>(proxy,mt)</span><br><span class="line">	<span class="keyword">return</span> proxy</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹å±•ç¤ºäº†ä¸Šè¿°ä»£ç çš„ç”¨æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = &#123;&#125;				<span class="comment">-- ä»»æ„ä¸€ä¸ªè¡¨</span></span><br><span class="line">t = track(t)</span><br><span class="line">t[<span class="number">2</span>] = <span class="string">&quot;hello&quot;</span>		<span class="comment">-- *update of element 2 to hello</span></span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">2</span>])		</span><br><span class="line"><span class="comment">-- *access to elemetn 2</span></span><br><span class="line"><span class="comment">-- hello</span></span><br></pre></td></tr></table></figure>
<p>å…ƒæ–¹æ³•__indexå’Œ__newindexæŒ‰ç…§æˆ‘ä»¬è®¾è®¡çš„è§„åˆ™è·Ÿè¸ªæ¯ä¸€ä¸ªè®¿é—®å¹¶å°†å…¶é‡å®šå‘åˆ°åŸæ¥çš„è¡¨ä¸­ã€‚å…ƒæ–¹æ³•__pairsä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿåƒéå†åŸæ¥çš„è¡¨ä¸€æ ·éå†ä»£ç†ï¼Œä»è€Œè·Ÿè¸ªæ‰€æœ‰çš„è®¿é—®ã€‚æœ€åï¼Œè¿œæ–¹__lené€šè¿‡ä»£ç†å®ç°äº†é•¿åº¦æ“ä½œç¬¦ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = track(&#123;<span class="number">10</span>,<span class="number">20</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(#t)</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span> <span class="built_in">pairs</span>(k,v) <span class="keyword">end</span></span><br><span class="line"><span class="comment">-- *traversing element 1</span></span><br><span class="line"><span class="comment">-- 1	10</span></span><br><span class="line"><span class="comment">-- *traversing element 2</span></span><br><span class="line"><span class="comment">-- 2	10</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³è¦åŒæ—¶ç›‘æ§å‡ ä¸ªè¡¨ï¼Œå¹¶ä¸éœ€è¦ä¸ºæ¯ä¸ªè¡¨åˆ›å»ºä¸åŒçš„å…ƒè¡¨ã€‚ç›¸åï¼Œåªè¦ä»¥æŸç§å½¢å¼å°†æ¯ä¸ªä»£ç†ä¸å…¶åŸå§‹è¡¨æ˜ å°„èµ·æ¥ï¼Œå¹¶ä¸”è®©æ‰€æœ‰çš„ä»£ç†å…±äº«ä¸€ä¸ªå…¬å…±çš„å…ƒè¡¨å³å¯ã€‚</p>
<h3 id="åªè¯»çš„è¡¨"><a href="#åªè¯»çš„è¡¨" class="headerlink" title="åªè¯»çš„è¡¨"></a>åªè¯»çš„è¡¨</h3><p>ä½¿ç”¨ä»£ç†çš„æ¦‚å¿µå¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°åªè¯»çš„è¡¨ï¼Œéœ€è¦åšçš„åªæ˜¯è·Ÿè¸ªå¯¹è¡¨çš„æ›´æ–°æ“ä½œå¹¶æŠ›å‡ºå¼‚å¸¸å³å¯ã€‚å¯¹äºå…ƒæ–¹æ³•__indexï¼Œç”±äºæˆ‘ä»¬ä¸éœ€è¦è·Ÿè¸ªæŸ¥è¯¢ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨åŸæ¥çš„è¡¨æ¥ä»£æ›¿å‡½æ•°ã€‚è¿™æ ·åšæ¯”æŠŠæ‰€æœ‰çš„æŸ¥è¯¢é‡å®šå‘åˆ°åŸæ¥çš„è¡¨ä¸Šæ›´ç®€å•ä¹Ÿæ›´æœ‰æ•ˆç‡ã€‚ä¸è¿‡ï¼Œè¿™ç§åšæ³•è¦æ±‚ä¸ºæ¯ä¸ªåªè¯»ä»£ç†åˆ›å»ºä¸€ä¸ªæ–°çš„å…ƒè¡¨ï¼Œå…¶ä¸­__indexå…ƒæ–¹æ³•æŒ‡å‘åŸæ¥çš„è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readOnly</span><span class="params">(t)</span></span></span><br><span class="line">	<span class="keyword">local</span> proxy = &#123;&#125;</span><br><span class="line">	<span class="keyword">local</span> mt = &#123;</span><br><span class="line">		<span class="built_in">__index</span> = t,</span><br><span class="line">		<span class="built_in">__newindex</span> = <span class="function"><span class="keyword">function</span><span class="params">(t,k,v)</span></span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;attempt to update a read-only table&quot;</span>, <span class="number">2</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">setmetatable</span>(proxy,mt)</span><br><span class="line">	<span class="keyword">return</span> proxy</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä½œä¸ºç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºæ˜ŸæœŸçš„åªè¯»è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">days = readOnly&#123;<span class="string">&quot;Sunday&quot;</span>,<span class="string">&quot;Monday&quot;</span>,<span class="string">&quot;Tuesday&quot;</span>,<span class="string">&quot;Wednesday&quot;</span>,<span class="string">&quot;Thrsday&quot;</span>,<span class="string">&quot;Friday&quot;</span>,<span class="string">&quot;Saturday&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(days[<span class="number">1</span>])			<span class="comment">-- Sunday</span></span><br><span class="line">days[<span class="number">2</span>] = <span class="string">&quot;Nodya&quot;</span></span><br><span class="line"><span class="comment">-- stdin:1:attempt to update a read-only table</span></span><br></pre></td></tr></table></figure>






]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaçš„æ·±æ‹·è´å’Œæµ…æ‹·è´</title>
    <url>/29648.html</url>
    <content><![CDATA[<p>ä»Šå¤©åœ¨å†™æ¸¸æˆçš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸€ä¸ªæ•°æ®é—®é¢˜ï¼Œå°±å¼€å§‹æŸ¥èµ„æ–™</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»£ç å¦‚ä¸‹</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--- Deep copies a table into a new table.</span></span><br><span class="line"><span class="comment">-- Tables used as keys are also deep copied, as are metatables</span></span><br><span class="line"><span class="comment">-- @param orig The table to copy</span></span><br><span class="line"><span class="comment">-- @return Returns a copy of the input table</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">deep_copy</span><span class="params">(orig)</span></span></span><br><span class="line">  <span class="keyword">local</span> copy</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">type</span>(orig) == <span class="string">&quot;table&quot;</span> <span class="keyword">then</span></span><br><span class="line">    copy = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> orig_key, orig_value <span class="keyword">in</span> <span class="built_in">next</span>, orig, <span class="literal">nil</span> <span class="keyword">do</span></span><br><span class="line">      copy[deep_copy(orig_key)] = deep_copy(orig_value)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">setmetatable</span>(copy, deep_copy(<span class="built_in">getmetatable</span>(orig)))</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    copy = orig</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> copy</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- Copies a table into a new table.</span></span><br><span class="line"><span class="comment">-- neither sub tables nor metatables will be copied.</span></span><br><span class="line"><span class="comment">-- @param orig The table to copy</span></span><br><span class="line"><span class="comment">-- @return Returns a copy of the input table</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">shallow_copy</span><span class="params">(orig)</span></span></span><br><span class="line">  <span class="keyword">local</span> copy</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">type</span>(orig) == <span class="string">&quot;table&quot;</span> <span class="keyword">then</span></span><br><span class="line">    copy = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> orig_key, orig_value <span class="keyword">in</span> <span class="built_in">pairs</span>(orig) <span class="keyword">do</span></span><br><span class="line">      copy[orig_key] = orig_value</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">else</span> <span class="comment">-- number, string, boolean, etc</span></span><br><span class="line">    copy = orig</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> copy</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¾‹å­å¦‚ä¸‹ï¼š<br>æ·±æ‹·è´</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> a = &#123; aa = <span class="number">1</span>, bb = <span class="number">2</span>, cc = &#123; dd = &#123; ee = <span class="number">3</span> &#125; &#125; &#125;</span><br><span class="line"><span class="comment">--local b = deep_copy(a)</span></span><br><span class="line"><span class="keyword">local</span> b = shallow_copy(a)</span><br><span class="line">b.cc.dd.ee = <span class="number">111</span></span><br><span class="line">b.bb = <span class="number">111</span></span><br><span class="line">ngx.say(cjson.encode(a))</span><br><span class="line">ngx.say(cjson.encode(b))</span><br></pre></td></tr></table></figure>
<p>ç»“æœï¼š{â€œaaâ€:1,â€bbâ€:2,â€ccâ€:{â€œddâ€:{â€œeeâ€:111}}}<br>{â€œaaâ€:1,â€bbâ€:111,â€ccâ€:{â€œddâ€:{â€œeeâ€:111}}}</p>
<p>æµ…æ‹·è´</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> men = &#123; mkey = <span class="number">555</span> &#125;</span><br><span class="line"><span class="keyword">local</span> a = &#123; aa = <span class="number">1</span>, bb = <span class="number">2</span>, cc = &#123; dd = &#123; ee = &#123; ff = <span class="number">3</span> &#125; &#125; &#125; &#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(a, &#123; <span class="built_in">__index</span> = men &#125;)</span><br><span class="line"><span class="keyword">local</span> b = deep_copy(a)</span><br><span class="line"></span><br><span class="line">ngx.say(a.cc.dd.ee.ff)</span><br><span class="line">ngx.say(a.mkey)</span><br><span class="line">ngx.say(b.mkey)</span><br></pre></td></tr></table></figure>
<p>3<br>555<br>555</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaçš„æ§åˆ¶ç»“æ„</title>
    <url>/16666.html</url>
    <content><![CDATA[<p>Luaè¯­è¨€æä¾›äº†ä¸€ç»„ç²¾ç®€ä¸”å¸¸ç”¨çš„æ§åˆ¶ç»“æ„ï¼ŒåŒ…æ‹¬ç”¨äºæ¡ä»¶æ‰§è¡Œçš„ifä»¥åŠç”¨æˆ·å¾ªç¯çš„whileã€repeatå’Œforã€‚æ‰€æœ‰çš„æ§åˆ¶ç»“æ„è¯­æ³•ä¸Šéƒ½æœ‰ä¸€ä¸ªæ˜¾ç¤ºçš„ç»ˆç»“ç¬¦ï¼šendç”¨äºç»ˆç»“ifã€foråŠwhileç»“æ„ï¼Œuntilç”¨äºç»ˆç»“repeatç»“æ„ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>æ§åˆ¶ç»“æ„çš„æ¡ä»¶è¡¨è¾¾å¼çš„ç»“æœå¯ä»¥æ˜¯ä»»ä½•å€¼ã€‚Luaè¯­è¨€å°†æ‰€æœ‰ä¸æ˜¯falseå’Œnilçš„å€¼å½“åšçœŸã€‚</p>
<h3 id="if-then-else"><a href="#if-then-else" class="headerlink" title="if then else"></a>if then else</h3><p>if è¯­å¥å…ˆæµ‹è¯•å…¶æ¡ä»¶ï¼Œå¹¶æ ¹æ®æ¡ä»¶æ˜¯å¦æ»¡è¶³æ‰§è¡Œç›¸åº”çš„thenéƒ¨åˆ†æˆ–elseéƒ¨åˆ†ã€‚elseéƒ¨åˆ†æ˜¯å¯é€‰çš„ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> a&lt;<span class="number">0</span> <span class="keyword">then</span> a == <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> a &lt;b <span class="keyword">then</span> <span class="keyword">return</span> a <span class="keyword">else</span> <span class="keyword">return</span> b <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> line &gt; MAXLINES <span class="keyword">then</span></span><br><span class="line">	showpage()</span><br><span class="line">	line = <span class="number">0</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦ç¼–å†™åµŒå¥—çš„ifè¯­å¥ï¼Œå¯ä»¥ä½¿ç”¨elseifã€‚å®ƒç±»ä¼¼äºåœ¨elseåé¢ç´§è·Ÿä¸€ä¸ªifï¼Œä½†å¯ä»¥é¿å…é‡å¤ä½¿ç”¨endï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> op == <span class="string">&quot;+&quot;</span> <span class="keyword">then</span></span><br><span class="line">	r = a + b</span><br><span class="line"><span class="keyword">elseif</span> op == <span class="string">&quot;-&quot;</span> <span class="keyword">then</span></span><br><span class="line">	r = a - b</span><br><span class="line"><span class="keyword">elseif</span> op == <span class="string">&quot;*&quot;</span> <span class="keyword">then</span></span><br><span class="line">	r = a * b</span><br><span class="line"><span class="keyword">elseif</span> op == <span class="string">&quot;/&quot;</span> <span class="keyword">then</span></span><br><span class="line">	r = a / b</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">error</span>(<span class="string">&quot;invalid operation&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºLuaè¯­è¨€ä¸æ”¯æŒswitchè¯­å¥ï¼Œæ‰€ä»¥è¿™ç§ä¸€è¿ä¸²çš„else-ifè¯­å¥æ¯”è¾ƒå¸¸è§ã€‚</p>
<h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><p>å½“æ¡ä»¶ä¸ºçœŸæ—¶whileå¾ªç¯ä¼šé‡å¤æ‰§è¡Œå…¶å¾ªç¯ä½“ã€‚Luaè¯­è¨€å…ˆæµ‹è¯•whileè¯­å¥çš„æ¡ä»¶ï¼Œè‹¥æ¡ä»¶ä¸ºå‡åˆ™å¾ªç¯ç»“æŸï¼›å¦åˆ™ï¼ŒLuaä¼šæ‰§è¡Œå¾ªç¯ä½“å¹¶ä¸æ–­åœ°é‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> a[i] <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">print</span>(a[i])</span><br><span class="line">	i = i + <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h3><p>repeat-untilè¯­å¥ä¼šé‡å¤æ‰§è¡Œå…¶å¾ªç¯ä½“çŸ¥é“æ¡ä»¶ä¸ºçœŸæ—¶ç»“æŸã€‚ç”±äºæ¡ä»¶æµ‹è¯•åœ¨å¾ªç¯ä½“ä¹‹åæ‰§è¡Œï¼Œæ‰€ä»¥å¾ªç¯ä½“è‡³å°‘ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- è¾“å‡ºç¬¬ä¸€ä¸ªéç©ºçš„è¡Œ</span></span><br><span class="line"><span class="keyword">local</span> line </span><br><span class="line"><span class="keyword">repeat</span></span><br><span class="line">	line = <span class="built_in">io</span>.<span class="built_in">read</span>()</span><br><span class="line"><span class="keyword">until</span> line ~= <span class="string">&quot; &quot;</span></span><br><span class="line"><span class="built_in">print</span>(line)</span><br></pre></td></tr></table></figure>
<p>å’Œå¤§å¤šæ•°å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸åŒï¼Œåœ¨Luaè¯­è¨€ä¸­ï¼Œå¾ªç¯ä½“å†…å£°æ˜çš„å±€éƒ¨å˜é‡çš„ä½œç”¨äºåŒ…æ‹¬æµ‹è¯•æ¡ä»¶ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä½¿ç”¨Newton-Raphsonæ³•è®¡ç®—&quot;x&quot;çš„å¹³æ–¹æ ¹</span></span><br><span class="line"><span class="keyword">local</span> sqr = x / <span class="number">2</span></span><br><span class="line"><span class="keyword">repeat</span> </span><br><span class="line">	sqr = (sqr + x / sqr) /<span class="number">2</span></span><br><span class="line">	<span class="keyword">local</span> <span class="built_in">error</span> = <span class="built_in">math</span>.<span class="built_in">abs</span>(sqr^<span class="number">2</span> - x)</span><br><span class="line"><span class="keyword">until</span> <span class="built_in">error</span> &lt; x/ <span class="number">10000</span>  <span class="comment">-- å±€éƒ¨å˜é‡&#x27;error&#x27;æ­¤æ—¶ä»ç„¶å¯è§</span></span><br></pre></td></tr></table></figure>

<h3 id="æ•°å€¼å‹for"><a href="#æ•°å€¼å‹for" class="headerlink" title="æ•°å€¼å‹for"></a>æ•°å€¼å‹for</h3><p>for è¯­å¥æœ‰ä¸¤ç§å½¢å¼ï¼šæ•°å€¼å‹forå’Œæ³›å‹forã€‚<br>æ•°å€¼å‹forçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> var = exp1 , exp2, exp3 <span class="keyword">do</span></span><br><span class="line">	something</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ç§å¾ªç¯ä¸­ï¼Œvarçš„å€¼ä»exp1å˜åŒ–åˆ°exp2ä¹‹å‰çš„æ¯æ¬¡å¾ªç¯ä¼šæ‰§è¡Œsomethingã€‚å¹¶ä¸”åœ¨æ¯æ¬¡å¾ªç¯ç»“æŸåå°†æ­¥é•¿exp3å¢åŠ åˆ°varä¸Šã€‚ç¬¬ä¸‰ä¸ªè¡¨è¾¾å¼exp3æ˜¯å¯é€‰çš„ï¼Œè‹¥ä¸å­˜åœ¨ï¼ŒLuaè¯­è¨€ä¼šé»˜è®¤æ­¥é•¿å€¼ä¸º1.å¦‚æœä¸æƒ³ç»™å¾ªç¯è®¾ç½®ä¸Šé™ï¼Œå¯ä»¥ä½¿ç”¨å¸¸é‡math.huge:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, <span class="built_in">math</span>.<span class="built_in">huge</span> <span class="keyword">do</span> </span><br><span class="line">	<span class="keyword">if</span> (<span class="number">0.3</span>*i^<span class="number">3</span> - <span class="number">20</span>*i^<span class="number">2</span> - <span class="number">500</span> &gt;= <span class="number">0</span> ) <span class="keyword">then</span></span><br><span class="line">		pirnt(i)</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†æ›´å¥½åœ°ä½¿ç”¨forå¾ªç¯ï¼Œè¿˜éœ€è¦äº†è§£ä¸€äº›ç»†èŠ‚ã€‚é¦–å…ˆï¼Œåœ¨å¾ªç¯å¼€å§‹å‰ï¼Œä¸‰ä¸ªè¡¨è¾¾å¼éƒ½ä¼šè¿è¡Œä¸€æ¬¡ï¼›å…¶æ¬¡ï¼Œæ§åˆ¶å˜é‡æ˜¯è¢«forè¯­å¥è‡ªåŠ¨å£°æ˜çš„å±€éƒ¨å˜é‡ï¼Œä¸”å…¶ä½œç”¨èŒƒå›´ä»…é™äºå¾ªç¯ä½“å†…ã€‚ä¸€ç§å…¸å‹çš„é”™è¯¯æ˜¯è®¤ä¸ºæ§åˆ¶å˜é‡åœ¨å¾ªç¯ç»“æŸåä»ç„¶å­˜åœ¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i = <span class="number">1</span> , <span class="number">10</span> <span class="keyword">do</span> <span class="built_in">print</span>(i) <span class="keyword">end</span></span><br><span class="line"><span class="built_in">max</span> = i 			<span class="comment">-- å¯èƒ½ä¼šå‡ºé”™</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœéœ€è¦åœ¨å¾ªç¯ç»“æŸåä½¿ç”¨æ§åˆ¶å˜é‡çš„å€¼ï¼Œåˆ™å¿…é¡»å°†æ§åˆ¶å˜é‡çš„å€¼ä¿å­˜åˆ°å¦ä¸€ä¸ªå˜é‡ä¸­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­å¯»æ‰¾ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="keyword">local</span> found = <span class="literal">nil</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span> , #a <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">if</span> a[i] &lt; <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">		found = i</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(found)</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œä¸è¦æ”¹å˜æ§åˆ¶å˜é‡çš„å€¼ï¼Œéšæ„æ”¹å˜æ§åˆ¶å˜é‡çš„å€¼å¯èƒ½äº§ç”Ÿä¸å¯é¢„çŸ¥çš„ç»“æœã€‚å¦‚æœè¦åœ¨å¾ªç¯æ­£å¸¸ç»“æŸå‰åœæ­¢forï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨breakè¯­å¥ã€‚</p>
<h3 id="æ³›å‹for"><a href="#æ³›å‹for" class="headerlink" title="æ³›å‹for"></a>æ³›å‹for</h3><p>æ³›å‹foréå†è¿­ä»£å‡½æ•°è¿”å›çš„æ‰€æœ‰å€¼ã€‚ä¾‹å¦‚æˆ‘ä»¬å·²ç»åœ¨å¾ˆå¤šç¤ºä¾‹ä¸­çœ‹åˆ°è¿‡çš„pairsã€ipairså’Œio.linesç­‰ã€‚è™½ç„¶æ³›å‹forçœ‹ä¼¼ç®€å•ï¼Œä½†å®ƒçš„åŠŸèƒ½éå¸¸å¼ºå¤§ã€‚ä½¿ç”¨æ°å½“çš„è¿­ä»£å™¨å¯ä»¥åœ¨ä¿è¯ä»£ç å¯è¯»æ€§çš„æƒ…å†µä¸‹éå†å‡ ä¹æ‰€æœ‰çš„æ•°æ®ç»“æ„ã€‚<br>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±ç¼–å†™è¿­ä»£å™¨ã€‚å°½ç®¡æ³›å‹forçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œä½†ç¼–å†™è¿­ä»£å‡½æ•°å´æœ‰ä¸å°‘ç»†èŠ‚éœ€è¦æ³¨æ„ã€‚<br>ä¸æ•°å€¼å‹forä¸åŒï¼Œæ³›å‹forå¯ä»¥ä½¿ç”¨å¤šä¸ªå˜é‡ï¼Œè¿™äº›å˜é‡åœ¨æ¯æ¬¡å¾ªç¯æ—¶éƒ½ä¼šæ›´æ–°ã€‚å½“ç¬¬ä¸€ä¸ªå˜é‡å˜ä¸ºnilæ—¶ï¼Œå¾ªç¯ç»ˆæ­¢ã€‚åƒæ•°å€¼å‹forä¸€æ ·ï¼Œæ§åˆ¶å˜é‡æ—¶å¾ªç¯ä½“ä¸­çš„å±€éƒ¨å˜é‡ï¼Œæˆ‘ä»¬ä¹Ÿä¸åº”è¯¥åœ¨å¾ªç¯ä¸­æ”¹å˜å…¶å€¼ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaç¼–è¯‘æ‰§è¡Œå’Œé”™è¯¯</title>
    <url>/21815.html</url>
    <content><![CDATA[<p>è™½ç„¶æˆ‘ä»¬æŠŠLuaè¯­è¨€æˆä¸ºè§£é‡Šå‹è¯­è¨€ï¼Œä½†Luaè¯­è¨€æ€»æ˜¯åœ¨è¿è¡Œä»£ç å‰å…ˆé¢„ç¼–è¯‘æºç ä¸ºä¸­é—´ä»£ç ï¼ˆè¿™æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œå¾ˆå¤šè§£é‡Šå‹è¯­è¨€ä¹Ÿè¿™æ ·åšï¼‰ã€‚ç¼–è¯‘é˜¶æ®µçš„å­˜åœ¨å¬ä¸Šå»è¶…å‡ºäº†è§£é‡Šå‹è¯­è¨€çš„èŒƒç•´ï¼Œä½†è§£é‡Šå‹è¯­è¨€çš„åŒºåˆ†å¹¶ä¸åœ¨ä¸æºç æ˜¯å¦è¢«ç¼–è¯‘ï¼Œè€Œåœ¨äºæ˜¯å¦æœ‰èƒ½åŠ›ï¼ˆä¸”è½»æ˜“åœ°ï¼‰æ‰§è¡ŒåŠ¨æ€ç”Ÿæˆçš„ä»£ç ã€‚å¯ä»¥è®¤ä¸ºï¼Œæ­£æ˜¯ç”±äºè¯¸å¦‚dofileè¿™æ ·å‡½æ•°çš„çš„å­˜åœ¨ï¼Œæ‰ä½¿å¾—Luaè¯­è¨€èƒ½å¤Ÿè¢«ç§°ä¸ºè§£é‡Šå‹è¯­è¨€ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><p>æ­¤å‰ï¼Œæˆ‘ä»¬å·²ç»ä»‹ç»è¿‡å‡½æ•°dofileï¼Œå®ƒæ˜¯è¿è¡ŒLuaä»£ç æ®µçš„ä¸»è¦æ–¹å¼ä¹‹ä¸€ã€‚å®é™…ä¸Šï¼Œå‡½æ•°dofileæ˜¯ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œå‡½æ•°loadfileæ‰å®Œæˆäº†çœŸæ­£çš„æ ¸å¿ƒå·¥ä½œã€‚ä¸å‡½æ•°dofileç±»ä¼¼ï¼Œå‡½æ•°loadfileä¹Ÿæ˜¯ä»æ–‡ä»¶ä¸­åŠ è½½Luaä»£ç æ®µï¼Œä½†å®ƒä¸ä¼šè¿è¡Œä»£ç ï¼Œè€Œæ˜¯åªæ˜¯ç¼–è¯‘ä»£ç ï¼Œç„¶åå°†ç¼–è¯‘åçš„ä»£ç æ®µä½œä¸ºä¸€ä¸ªå‡½æ•°è¿”å›ã€‚æ­¤å¤–ï¼Œä¸å‡½æ•°dofileä¸åŒï¼Œå‡½æ•°loadfileåªè¿”å›é”™è¯¯ç è€Œä¸æŠ›å‡ºå¼‚å¸¸ã€‚å¯ä»¥è®¤ä¸ºï¼Œå‡½æ•°dofileå°±æ˜¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dofile</span> <span class="params">(filename)</span></span></span><br><span class="line">	<span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">loadfile</span>(filename))</span><br><span class="line">	<span class="keyword">return</span> f()</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œå¦‚æœå‡½æ•°loadfileæ‰§è¡Œå¤±è´¥ï¼Œé‚£ä¹ˆå‡½æ•°assertä¼šå¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚<br>å¯¹äºç®€å•çš„éœ€æ±‚è€Œè¨€ï¼Œç”±äºå‡½æ•°dofileåœ¨ä¸€æ¬¡è°ƒç”¨ä¸­å°±åšå®Œäº†æ‰€æœ‰å·¥ä½œï¼Œæ‰€ä»¥æ”¹å‡½æ•°éå¸¸æ˜“ç”¨ã€‚ä¸è¿‡ï¼Œå‡½æ•°loadfileæ›´çµæ´»ã€‚åœ¨å‘ç”Ÿé”™è¯¯çš„æƒ…å†µä¸­ï¼Œå‡½æ•°loadfileä¼šè¿”å›nilåŠé”™è¯¯ä¿¡æ¯ï¼Œä»¥å…è®¸æˆ‘ä»¬æŒ‰è‡ªå®šä¹‰çš„æ–¹å¼æ¥å¤„ç†é”™è¯¯ã€‚æ­¤å¤–ï¼Œå¦‚æœéœ€è¦å¤šæ¬¡è¿è¡Œä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆåªéœ€è¦è°ƒç”¨ä¸€æ¬¡loadfileå‡½æ•°åå†å¤šæ¬¡è°ƒç”¨å®ƒçš„è¿”å›ç»“æœå³å¯ã€‚ç”±äºåªç¼–è¯‘ä¸€æ¬¡æ–‡ä»¶ï¼Œå› æ­¤è¿™ç§æ–¹å¼çš„å¼€é”€è¦æ¯”å¤šæ¬¡è°ƒç”¨å‡½æ•°dofileå°å¾—å¤šï¼ˆç¼–è¯‘åœ¨æŸç§ç¨‹åº¦ä¸Šç›¸æ¯”å…¶ä»–æ“ä½œå¼€é”€æ›´å¤§ï¼‰ã€‚<br>å‡½æ•°loadä¸å‡½æ•°loadfileç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºè¯¥å‡½æ•°ä»ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–å‡½æ•°ä¸­è¯»å–ä»£ç æ®µï¼Œè€Œä¸æ˜¯ä»æ–‡ä»¶ä¸­è¯»å–ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">load</span>(<span class="string">&quot;i = i + 1&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™å¥è¯ä»£ç æ‰§è¡Œåï¼Œå˜é‡få°±ä¼šå˜æˆä¸€ä¸ªè¢«è°ƒç”¨æ—¶æ‰§è¡Œi &#x3D; i + 1çš„å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">i = <span class="number">0</span> </span><br><span class="line">f();<span class="built_in">print</span>(i)		<span class="comment">-- 1</span></span><br><span class="line">f();<span class="built_in">print</span>(i)		<span class="comment">-- 2</span></span><br></pre></td></tr></table></figure>
<p>å°½ç®¡å‡½æ•°loadçš„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½†è¿˜æ˜¯åº”è¯¥è°¨æ…åœ°ä½¿ç”¨ã€‚ç›¸å½“äºå…¶ä»–å¯é€‰çš„å‡½æ•°è€Œè¨€ï¼Œè¯¥å‡½æ•°çš„å¼€é”€è¾ƒå¤§å¹¶ä¸”å¯èƒ½ä¼šå¼•èµ·è¯¡å¼‚çš„é—®é¢˜ã€‚è¯·å…ˆç¡®å®šå½“ä¸‹å·²ç»æ‰¾ä¸åˆ°æ›´ç®€å•çš„è§£å†³æ–¹å¼åå†ä½¿ç”¨è¯¥å‡½æ•°ã€‚<br>å¦‚æœè¦ç¼–å†™ä¸€ä¸ªç”¨åå³å¼ƒçš„dostringå‡½æ•°ï¼ˆä¾‹å¦‚åŠ è½½å¹¶è¿è¡Œä¸€è¡Œä»£ç ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨å‡½æ•°loadçš„è¿”å›å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">load</span>(s)()</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œå¦‚æœä»£ç ä¸­æœ‰è¯­æ³•é”™è¯¯ï¼Œå‡½æ•°loadå°±ä¼šè¿”å›ä½ æ¥å’Œå½¢å¦‚â€attempt to call a nil valueâ€çš„é”™è¯¯ä¿¡æ¯ã€‚ä¸ºäº†æ›´æ¸…æ¥šåœ°å±•ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæœ€å¥½ä½¿ç”¨å‡½æ•°assert:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">assert</span>(<span class="built_in">load</span>(s))()</span><br></pre></td></tr></table></figure>
<p>é€šå¸¸ï¼Œç”¨å‡½æ•°loadæ¥åŠ è½½å­—ç¬¦ä¸²å¸¸é‡æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹çš„ä¸¤è¡Œä»£ç åŸºæœ¬ç­‰ä»·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">load</span>(<span class="string">&quot;i = i + 1&quot;</span>)</span><br><span class="line"></span><br><span class="line">f = <span class="function"><span class="keyword">function</span><span class="params">()</span></span> i = i + <span class="number">1</span> <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œç”±äºç¬¬2è¡Œä»£ç ä¼šä¸å…¶å¤–å±‚çš„å‡½æ•°ä¸€èµ·è¢«ç¼–è¯‘ï¼Œæ‰€ä»¥å…¶æ‰§è¡Œé€Ÿåº¦è¦å¿«å¾—å¤šã€‚ä¸ä¹‹å¯¹æ¯”ï¼Œç¬¬ä¸€æ®µä»£ç åœ¨è°ƒç”¨å‡½æ•°loadæ—¶ä¼šè¿›è¡Œä¸€æ¬¡ç‹¬ç«‹çš„ç¼–è¯‘ã€‚</p>
<p>ç”±äºå‡½æ•°loadåœ¨ç¼–è¯‘æ—¶ä¸æ¶‰åŠè¯æ³•å®šç•Œï¼Œæ‰€ä»¥ä¸Šè¿°ç¤ºä¾‹çš„ä¸¤æ®µä»£ç å¯èƒ½å¹¶ä¸å®Œå…¨ç­‰ä»·ã€‚ä¸ºäº†æ¸…æ´—åœ°å±•ç¤ºå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œè®©æˆ‘ä»¬ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">i = <span class="number">32</span></span><br><span class="line"><span class="keyword">local</span> i = <span class="number">0</span></span><br><span class="line">f = <span class="built_in">load</span>(<span class="string">&quot;i = i +1;print(i)&quot;</span>)</span><br><span class="line">g = <span class="function"><span class="keyword">function</span><span class="params">()</span></span> i = i + <span class="number">1</span>; <span class="built_in">print</span>(i) <span class="keyword">end</span></span><br><span class="line">f()			<span class="comment">-- 33</span></span><br><span class="line">g()			<span class="comment">-- 1</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°gåƒæˆ‘ä»¬æ‰€é¢„æœŸåœ°é‚£æ ·æ“ä½œå±€éƒ¨å˜é‡iï¼Œä½†å‡½æ•°fæ“ä½œçš„å´æ˜¯å…¨å±€å˜é‡iï¼Œè¿™æ˜¯ç”±äºå‡½æ•°loadæ€»æ˜¯åœ¨å…¨å±€ç¯å¢ƒä¸­ç¼–è¯‘ä»£ç æ®µã€‚<br>å‡½æ•°loadæœ€å…¸å‹çš„ç”¨æ³•æ˜¯æ‰§è¡Œå¤–éƒ¨ä»£ç ï¼ˆå³é‚£äº›æ¥è‡ªç¨‹åºæœ¬èº«ä¹‹å¤–çš„ä»£ç æ®µï¼‰æˆ–åŠ¨æ€ç”Ÿæˆçš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³è¿è¡Œç”¨æˆ·å®šä¹‰çš„å‡½æ•°ï¼Œç”±ç”¨æˆ·è¾“å…¥å‡½æ•°çš„ä»£ç åè°ƒç”¨å‡½æ•°loadå¯¹å…¶æ±‚å€¼ã€‚è¯·æ³¨æ„ï¼Œå‡½æ•°loadæœŸæœ›çš„è¾“å…¥æ˜¯ä¸€æ®µç¨‹åºï¼Œä¹Ÿå°±æ˜¯ä¸€ç³»åˆ—çš„è¯­å¥ã€‚å¦‚æœéœ€è¦å¯¹è¡¨è¾¾å¼æ±‚å€¼ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¡¨è¾¾å¼å‰æ·»åŠ returnï¼Œè¿™æ ·æ‰èƒ½æ„æˆä¸€æ¡è¿”å›æŒ‡å®šè¡¨è¾¾å¼å€¼çš„è¯­å¥ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> <span class="string">&quot;enter your expression:&quot;</span></span><br><span class="line"><span class="keyword">local</span> line = <span class="built_in">io</span>.<span class="built_in">read</span>()</span><br><span class="line"><span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">load</span>(<span class="string">&quot;return &quot;</span> .. line))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;the value of your expression is&quot;</span> .. fun())</span><br></pre></td></tr></table></figure>
<p>ç”±äºå‡½æ•°loadæ‰€è¿”å›çš„å‡½æ•°å°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œå› æ­¤å¯ä»¥åå¤å¯¹å…¶è¿›è¡Œè°ƒç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> <span class="string">&quot;enter function to be plotted (with variable &#x27;x&#x27;):&quot;</span></span><br><span class="line"><span class="keyword">local</span> line = <span class="built_in">io</span>.<span class="built_in">read</span>()</span><br><span class="line"><span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">load</span>(<span class="string">&quot;return &quot;</span> .. line ))</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">20</span> <span class="keyword">do</span></span><br><span class="line">	x = i <span class="comment">-- å…¨å±€çš„&#x27;x&#x27;ï¼ˆå½“å‰ä»£ç æ®µå†…å¯è§ï¼‰</span></span><br><span class="line">	<span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">rep</span>(<span class="string">&quot;*&quot;</span>,f()))</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è¯»å–å‡½æ•°ä½œä¸ºå‡½æ•°loadçš„ç¬¬1ä¸ªå‚æ•°ã€‚è¯»å–å‡½æ•°æ—¶ä»¥åˆ†å‡ æ¬¡è¿”å›ä¸€æ®µç¨‹åºï¼Œå‡½æ•°loadä¼šä¸æ–­åœ°è°ƒç”¨è¯»å–å‡½æ•°çŸ¥é“è¯»å–å‡½æ•°è¿”å›nilï¼ˆè¡¨ç¤ºç¨‹åºæ®µç»“æŸï¼‰ã€‚ä½œä¸ºç¤ºä¾‹ï¼Œä»¥ä¸‹çš„è°ƒç”¨ä¸å‡½æ•°loadfileç­‰ä»·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">load</span>(<span class="built_in">io</span>.<span class="built_in">lines</span>(filename,<span class="string">&quot;*L&quot;</span>))</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨io.lines(filename.â€*Lâ€)è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¯æ¬¡è¢«è°ƒç”¨æ—¶å°±ä»æŒ‡å®šæ–‡ä»¶è¿”å›ä¸€è¡Œã€‚å› æ­¤ï¼Œå‡½æ•°loadä¼šä¸€è¡Œä¸€è¡Œåœ°ä»æ–‡ä»¶ä¸­è¯»å‡ºä¸€æ®µç¨‹åºã€‚ä»¥ä¸‹çš„ç‰ˆæœ¬ä¸ä¹‹ç›¸ä¼¼ä½†æ•ˆç‡ç¨é«˜ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">load</span>(<span class="built_in">io</span>.<span class="built_in">lines</span>(filename,<span class="number">1024</span>))</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼Œå‡½æ•°io.linesè¿”å›çš„è¿­ä»£å™¨ä¼šä»¥1024å­—èŠ‚ä¸ºå—è¯»å–æºæ–‡ä»¶ã€‚<br>Luaè¯­è¨€å°†æ‰€æœ‰ç‹¬ç«‹çš„ä»£ç æ®µå½“åšåŒ¿åå¯å˜é•¿å‚æ•°å‡½æ•°çš„å‡½æ•°ä½“ã€‚ä¾‹å¦‚ï¼Œload(â€œa &#x3D; 1â€)çš„è¿”å›å€¼ä¸ä»¥ä¸‹è¡¨è¾¾å¼ç­‰ä»·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> a = <span class="number">1</span> <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åƒå…¶ä»–ä»»ä½•å‡½æ•°ä¸€æ ·ï¼Œä»£ç æ®µä¸­å¯ä»¥å£°æ˜å±€éƒ¨å˜é‡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">load</span>(<span class="string">&quot;local a = 10;pirnt(a + 20&quot;</span>)</span><br><span class="line">f()			<span class="comment">-- 30</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¿™ä¸ªç‰¹è¡Œï¼Œå¯ä»¥åœ¨ä¸ä½¿ç”¨å…¨å±€å˜é‡xçš„æƒ…å†µä¸‹é‡å†™ä¹‹å‰è¿è¡Œç”¨æˆ·å®šä¹‰å‡½æ•°çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> <span class="string">&quot;enter function to be plotted(with variable &#x27;x&#x27;):&quot;</span></span><br><span class="line"><span class="keyword">local</span> line = <span class="built_in">io</span>.<span class="built_in">read</span>()</span><br><span class="line"><span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">load</span>(<span class="string">&quot;local x = ...;return &quot;</span> .. line))</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">20</span> <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">rep</span>(<span class="string">&quot;*&quot;</span>,f(i)))</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œåœ¨ä»£ç æ®µå¼€å¤´å¢åŠ äº†â€local x &#x3D; â€¦â€ æ¥å°†xå£°æ˜ä¸ºå±€éƒ¨å˜é‡ã€‚ä¹‹åä½¿ç”¨å‚æ•°iè°ƒç”¨å‡½æ•°fï¼Œå‚æ•°iå°±æ˜¯å¯å˜é•¿å‚æ•°è¡¨è¾¾å¼çš„å€¼(â€¦)ã€‚<br>å‡½æ•°loadå’Œå‡½æ•°loadfileä»æ¥ä¸å¼•å‘é”™è¯¯ã€‚å½“æœ‰é”™è¯¯å‘ç”Ÿæ—¶ï¼Œå®ƒä»¬ä¼šè¿”å›nilåŠé”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">load</span>(<span class="string">&quot;i i&quot;</span>))			<span class="comment">-- nil [string &quot;i i&quot;]:1: &#x27;=&#x27; expected near &#x27;i&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œè¿™äº›å‡½æ•°æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ï¼Œå®ƒä»¬æ—¢ä¸æ”¹å˜ååˆ›å»ºå˜é‡ï¼Œä¹Ÿä¸å‘æ–‡ä»¶å†™å…¥ç­‰ã€‚è¿™äº›å‡½æ•°åªæ˜¯å°†ç¨‹åºæ®µç¼–è¯‘ä¸ºä¸€ç§ä¸­é—´å½¢å¼ï¼Œç„¶åå°†ç»“æœä½œä¸ºåŒ¿åå‡½æ•°è¿”å›ã€‚ä¸€ç§å¸¸è§çš„è¯¯è§£æ˜¯è®¤ä¸ºåŠ è½½ä¸€æ®µç¨‹åºä¹Ÿå°±æ˜¯å®šä¹‰äº†å‡½æ•°ï¼Œä½†å®é™…ä¸Šåœ¨Luaè¯­è¨€ä¸­å‡½æ•°å®šä¹‰æ˜¯åœ¨è¿è¡Œæ—¶è€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶å‘ç”Ÿçš„ä¸€ç§èµ‹å€¼æ“ä½œã€‚ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶foo.lua:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ–‡ä»¶foo.lua</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(x)</span></span></span><br><span class="line">	<span class="built_in">print</span>(x)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å½“æ‰§è¡Œ</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">loadfile</span>(<span class="string">&quot;foo.lua&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>æ—¶ï¼Œç¼–è¯‘fooçš„å‘½ä»¤å¹¶æ²¡æœ‰å®šä¹‰fooï¼Œåªæœ‰è¿è¡Œä»£ç æ‰ä¼šå®šä¹‰å®ƒï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">loadfile</span>(<span class="string">&quot;foo.lua&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(foo)			<span class="comment">-- nil</span></span><br><span class="line">f()					<span class="comment">-- è¿è¡Œä»£ç </span></span><br><span class="line">foo(<span class="string">&quot;ok&quot;</span>)			<span class="comment">-- ok</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§è¡Œä¸ºå¯èƒ½çœ‹ä¸Šå»æœ‰äº›å¥‡æ€ªï¼Œä½†å¦‚æœä¸ä½¿ç”¨è¯­æ³•ç³–å¯¹å…¶è¿›è¡Œé‡å†™åˆ™çœ‹ä¸Šå»ä¼šæ¸…æ™°å¾ˆå¤šï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ–‡ä»¶&#x27;foo.lua&#x27;</span></span><br><span class="line">foo = <span class="function"><span class="keyword">function</span><span class="params">(x)</span></span></span><br><span class="line">	<span class="built_in">print</span>(x)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœçº¿ä¸Šäº§å“çº§åˆ«çš„ç¨‹åºéœ€è¦æ‰§è¡Œå¤–éƒ¨ä»£ç ï¼Œé‚£ä¹ˆåº”è¯¥å¤„ç†åŠ è½½ç¨‹åºæ®µæ—¶æŠ¥å‘Šçš„æ‰€æœ‰é”™è¯¯ã€‚æ­¤å¤–ï¼Œä¸ºäº†é¿å…ä¸æ„‰å¿«çš„å‰¯ä½œç”¨å‘ç”Ÿï¼Œå¯èƒ½è¿˜åº”è¯¥åœ¨ä¸€ä¸ªå—ä¿æŠ¤çš„ç¯å¢ƒä¸­æ‰§è¡Œè¿™äº›ä»£ç ã€‚</p>
<h2 id="é¢„ç¼–è¯‘çš„ä»£ç "><a href="#é¢„ç¼–è¯‘çš„ä»£ç " class="headerlink" title="é¢„ç¼–è¯‘çš„ä»£ç "></a>é¢„ç¼–è¯‘çš„ä»£ç </h2><p>ç”Ÿæˆé¢„ç¼–è¯‘æ–‡ä»¶ï¼ˆä¹Ÿè¢«ç§°ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰æœ€ç®€å•çš„æ–¹å¼æ˜¯ï¼Œä½¿ç”¨æ ‡å‡†å‘è¡Œç‰ˆä¸­é™„å¸¦çš„luacç¨‹åºã€‚ä¾‹å¦‚ï¼Œä¸‹åˆ—å‘½ä»¤ä¼šåˆ›å»ºæ–‡ä»¶prog.luaçš„é¢„ç¼–è¯‘ç‰ˆæœ¬prog.lc:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">$ luac -o prog.lc prog.lua</span><br></pre></td></tr></table></figure>
<p>Luaè§£æå™¨ä¼šåƒæ‰§è¡Œæ™®é€šLuaä»£ç ä¸€æ ·æ‰§è¡Œè¿™ä¸ªæ–°æ–‡ä»¶ï¼Œå®Œæˆä¸åŸæ¥ä»£ç å®Œå…¨ä¸€è‡´çš„åŠ¨ä½œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">$ lua prog.lc</span><br></pre></td></tr></table></figure>
<p>å‡ ä¹åœ¨Luaè¯­è¨€ä¸­æ‰€æœ‰èƒ½å¤Ÿä½¿ç”¨æºç çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨é¢„ç¼–è¯‘ä»£ç ã€‚ç‰¹åˆ«åœ°ï¼Œå‡½æ•°loadfileå’Œå‡½æ•°loadéƒ½å¯ä»¥æ¥å—é¢„ç¼–è¯‘ä»£ç ã€‚<br>æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨Luaè¯­è¨€ä¸­å®ç°ä¸€ä¸ªæœ€ç®€å•çš„Luacï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">p = <span class="built_in">loadfile</span>(<span class="built_in">arg</span>[<span class="number">1</span>])</span><br><span class="line">f = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">arg</span>[<span class="number">2</span>],<span class="string">&quot;wb&quot;</span>)</span><br><span class="line">f:<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>(p))</span><br><span class="line">f:<span class="built_in">close</span>()</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå…³é”®å‡½æ•°æ˜¯string.dumpï¼Œè¯¥å‡½æ•°çš„å…¥å‚æ˜¯ä¸€ä¸ªLuaå‡½æ•°ï¼Œè¿”å›å€¼æ˜¯ä¼ å…¥å‡½æ•°å¯¹åº”çš„å­—ç¬¦ä¸²å½¢å¼çš„é¢„ç¼–è¯‘ä»£ç ã€‚<br>luacç¨‹åºæä¾›äº†ä¸€äº›æœ‰æ„æ€çš„é€‰é¡¹ã€‚ç‰¹åˆ«åœ°ï¼Œé€‰é¡¹-lä¼šåˆ—å‡ºç¼–è¯‘å™¨ä¸ºæŒ‡å®šä»£ç æ®µç”Ÿæˆçš„æ“ä½œç ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ luac -lçš„è¾“å‡ºç¤ºä¾‹</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">main&lt;<span class="built_in">stdin</span>:<span class="number">0</span>,o&gt; (<span class="number">7</span> instructions, <span class="number">28</span>bytes at <span class="number">0x988cb30</span>)</span><br><span class="line"><span class="number">0</span> + params, <span class="number">2</span> slots, <span class="number">0</span> upvalues, o locals, <span class="number">4</span> constants, <span class="number">0</span> functions</span><br><span class="line"><span class="number">1</span> [<span class="number">1</span>] GETGLOBAL	<span class="number">0</span> <span class="number">-2</span>	; x</span><br><span class="line"><span class="number">2</span> [<span class="number">1</span>] GETGLOBAL <span class="number">1</span> <span class="number">-3</span>	; y</span><br><span class="line"><span class="number">3</span> [<span class="number">1</span>] ADD	    <span class="number">0</span>  <span class="number">0</span>  <span class="number">1</span></span><br><span class="line"><span class="number">4</span> [<span class="number">1</span>] GETGLOBAL <span class="number">1</span> <span class="number">-4</span>	; x</span><br><span class="line"><span class="number">5</span> [<span class="number">1</span>] USB       <span class="number">0</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line"><span class="number">6</span> [<span class="number">1</span>] SETGLOBAL <span class="number">0</span> <span class="number">-1</span>	; a</span><br><span class="line"><span class="number">7</span> [<span class="number">1</span>] RETURN    <span class="number">0</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>é¢„ç¼–è¯‘å½¢å¼çš„ä»£ç ä¸ä¸€å®šæ¯”æºä»£ç æ›´å°ï¼Œä½†æ˜¯å´åŠ è½½å¾—æ›´å¿«ã€‚é¢„ç¼–è¯‘å½¢å¼çš„ä»£ç çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¯ä»¥é¿å…ç”±äºæ„å¤–è€Œä¿®æ”¹æºç ã€‚ç„¶è€Œï¼Œä¸æºä»£ç ä¸åŒï¼Œè“„æ„æŸåæˆ–æ„é€ çš„äºŒè¿›åˆ¶ä»£ç å¯èƒ½ä¼šè®©Luaè§£æå™¨å¥”æºƒæˆ–ç”šè‡³æ‰§è¡Œç”¨æˆ·æä¾›çš„æœºå™¨ç ã€‚å½“è¿è¡Œä¸€èˆ¬çš„ä»£ç æ—¶é€šå¸¸æ— é¡»æ‹…å¿ƒï¼Œä½†åº”è¯¥é¿å…è¿è¡Œä»¥é¢„ç¼–è¯‘å½¢å¼ç»™å‡ºçš„éå—ä¿¡ä»£ç ã€‚è¿™ç§éœ€æ±‚ï¼Œå‡½æ•°loadæ­£å¥½æœ‰ä¸€ä¸ªé€‰é¡¹å¯ä»¥é€‚ç”¨ã€‚<br>é™¤äº†å¿…éœ€çš„ç¬¬1ä¸ªå‚æ•°å¤–ï¼Œå‡½æ•°loadè¿˜æœ‰3ä¸ªå¯é€‰å‚æ•°ã€‚ç¬¬2ä¸ªå‚æ•°æ˜¯ç¨‹åºæ®µçš„åç§°ï¼Œåªåœ¨é”™è¯¯ä¿¡æ¯ä¸­è¢«ç”¨åˆ°ã€‚ç¬¬4ä¸ªå‚æ•°æ˜¯ç¯å¢ƒã€‚ç¬¬3ä¸ªå‚æ•°æ­£æ˜¯æˆ‘ä»¬è¿™é‡Œå…³å¿ƒçš„ï¼Œå®ƒæ§åˆ¶äº†å…è®¸åŠ è½½çš„ä»£ç æ®µçš„ç±»å‹ã€‚å¦‚æœè¯¥å‚æ•°å­˜åœ¨ï¼Œåˆ™åªèƒ½æ˜¯å¦‚ä¸‹çš„å­—ç¬¦ä¸²ï¼šå­—ç¬¦ä¸²â€tâ€å…è®¸åŠ è½½æ–‡æœ¬ç±»å‹çš„ä»£ç æ®µï¼Œå­—ç¬¦ä¸²â€bâ€åªå…è®¸åŠ è½½äºŒè¿›åˆ¶ç±»å‹çš„ä»£ç æ®µï¼Œå­—ç¬¦ä¸²â€btâ€å…è®¸åŒæ—¶åŠ è½½ä¸Šè¿°ä¸¤ç§ç±»å‹çš„ä»£ç æ®µã€‚</p>
<h2 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h2><p>äººäººçš†éš¾å…çŠ¯é”™è¯¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å°½å¯èƒ½åœ°å¤„ç†é”™è¯¯ã€‚ç”±äºluaè¯­è¨€æ˜¯ä¸€ç§ç»å¸¸è¢«åµŒå…¥åœ¨åº”ç”¨ç¨‹åºä¸­çš„æ‰©å±•è¯­è¨€ï¼Œæ‰€ä»¥å½“é”™è¯¯å‘ç”Ÿæ—¶å¹¶ä¸èƒ½ç®€å•åœ°å¥”æºƒæˆ–é€€å‡ºã€‚ç›¸åï¼Œåªè¦é”™è¯¯å‘ç”Ÿï¼ŒLuaè¯­è¨€å°±å¿…é¡»æä¾›å¤„ç†é”™è¯¯çš„æ–¹å¼ã€‚<br>Luaè¯­è¨€ä¼šåœ¨é‡åˆ°éé¢„æœŸçš„æƒ…å†µæ—¶å¼•å‘é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå½“è¯•å›¾å°†ä¸¤ä¸ªéå¸¸å€¼ç±»å‹çš„å€¼ç›¸åŠ ï¼Œå¯¹ä¸æ˜¯å‡½æ•°çš„å€¼è¿›è¡Œè°ƒç”¨ï¼Œå¯¹ä¸æ˜¯è¡¨ç±»å‹çš„å€¼è¿›è¡Œç´¢å¼•ç­‰ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜¾ç¤ºåœ°é€šè¿‡è°ƒç”¨å‡½æ•°errorå¹¶ä¼ å…¥ä¸€ä¸ªé”™è¯¯ä¿¡æ¯æ¥ä½œä¸ºå‚æ•°å¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚é€šå¸¸ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯åœ¨ä»£ç ä¸­æç¤ºå‡ºé”™çš„åˆç†æ–¹å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">pirnt <span class="string">&quot;enter a number :&quot;</span></span><br><span class="line">n = <span class="built_in">io</span>.<span class="built_in">read</span>(<span class="string">&quot;n&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> n <span class="keyword">then</span> <span class="built_in">error</span>(<span class="string">&quot;invalid input&quot;</span>) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºâ€œé’ˆå¯¹æŸäº›æƒ…å†µè°ƒç”¨å‡½æ•°errorâ€è¿™æ ·çš„ä»£ç ç»“æ„å¤ªå¸¸è§äº†ï¼Œæ‰€ä»¥Luaè¯­è¨€æä¾›äº†ä¸€ä¸ªå†…å»ºçš„å‡½æ•°assertæ¥å®Œæˆè¿™ç±»å·¥ä½œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> <span class="string">&quot;enter a nubmer:&quot;</span></span><br><span class="line">n = <span class="built_in">assert</span>(<span class="built_in">io</span>.<span class="built_in">read</span>(<span class="string">&quot;*n&quot;</span>),<span class="string">&quot;invalid input&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°assertæ£€æŸ¥å…¶ç¬¬1ä¸ªå‚æ•°æ˜¯å¦ä¸ºçœŸï¼Œå¦‚æœè¯¥å‚æ•°ä¸ºçœŸåˆ™è¿”å›è¯¥å‚æ•°ï¼›å¦‚æœè¯¥å‚æ•°ä¸ºå‡ï¼Œåˆ™å¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚è¯¥å‡½æ•°çš„ç¬¬2ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„é”™è¯¯ä¿¡æ¯ã€‚ä¸è¿‡ï¼Œè¦æ³¨æ„å‡½æ•°assertåªæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œæ‰€ä»¥Luaè¯­è¨€ä¼šæ€»æ˜¯åœ¨è°ƒç”¨è¯¥å‡½æ•°å‰å…ˆå¯¹å‚æ•°è¿›è¡Œæ±‚å€¼ã€‚å¦‚æœç¼–å†™å½¢å¦‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">n = <span class="built_in">io</span>.<span class="built_in">read</span>()</span><br><span class="line"><span class="built_in">assert</span>(tonumver(n),<span class="string">&quot;invalid input:&quot;</span> .. n .. <span class="string">&quot;is not a number&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>çš„ä»£ç ï¼Œé‚£ä¹ˆå³ä½¿næ˜¯ä¸€ä¸ªæ•°å€¼ç±»å‹ï¼ŒLuaè¯­è¨€ä¹Ÿæ€»æ˜¯ä¼šè¿›è¡Œå­—ç¬¦ä¸²è¿æ¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨æ˜¾ç¤ºçš„æµ‹è¯•å¯èƒ½æ›´åŠ æ˜æ™ºã€‚<br>å½“ä¸€ä¸ªå‡½æ•°å‘ç°æŸç§æ„å¤–çš„æƒ…å†µå‘ç”Ÿæ—¶ï¼Œåœ¨è¿›è¡Œä¸€åœºå¤„ç†æ—¶å¯ä»¥é‡‡å–ä¸¤ç§åŸºæœ¬æ–¹å¼ï¼šä¸€ç§æ˜¯è¿”å›é”™è¯¯ä»£ç ï¼ˆé€šå¸¸æ˜¯nilæˆ–è€…falseï¼‰ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡è°ƒç”¨å‡½æ•°errorå¼•å‘äº†ä¸€ä¸ªé”™è¯¯ã€‚å¦‚ä½•åœ¨è¿™ä¸¤ç§æ–¹å¼ä¹‹é—´è¿›è¡Œé€‰æ‹©å¹¶æ²¡æœ‰å›ºå®šçš„è§„åˆ™ï¼Œä½†ç¬”è€…é€šå¸¸éµå¾ªå¦‚ä¸‹çš„çŸ¥é“åŸåˆ™ï¼šå®¹æ˜“é¿å…çš„å¼‚å¸¸åº”è¯¥å¼•å‘é”™è¯¯ï¼Œå¦åˆ™åº”è¯¥è¿”å›é”™è¯¯ç ã€‚<br>ä»¥å‡½æ•°math.sinä¸ºä¾‹ï¼Œå½“è°ƒç”¨å‚æ•°ä¼ å…¥äº†ä¸€ä¸ªè¡¨è¯¥å¦‚ä½•ååº”å‘¢ï¼Ÿå¦‚æœè¦æ£€æŸ¥é”™è¯¯ï¼Œé‚£ä¹ˆå°±ä¸å¾—ä¸ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> res = <span class="built_in">math</span>.<span class="built_in">sin</span>(x)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> res <span class="keyword">then</span>			<span class="comment">-- é”™è¯¯ï¼Ÿ</span></span><br><span class="line">	<span class="built_in">error</span>-handling code</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åœ¨è°ƒç”¨å‡½æ•°å‰è½»æ¾åœ°æ£€æŸ¥å‡ºè¿™ç§å¼‚å¸¸ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">tonumber</span>(x) <span class="keyword">then</span>			<span class="comment">-- xæ˜¯å¦ä¸ºæ•°å­—</span></span><br><span class="line">	<span class="built_in">error</span>-handling code</span><br></pre></td></tr></table></figure>
<p>é€šå¸¸ï¼Œæˆ‘ä»¬æ—¢ä¸ä¼šæ£€æŸ¥å‚æ•°ä¹Ÿä¸ä¼šæ£€æŸ¥å‡½æ•°sinçš„è¿”å›å€¼ï¼›å¦‚æœsinçš„å‚æ•°ä¸æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€æˆ‘ä»¬çš„ç¨‹åºå¯èƒ½å‡ºç°äº†é—®é¢˜ã€‚æ­¤æ—¶ï¼Œå¤„ç†å¼‚å¸¸æœ€ç®€å•ä¹Ÿæ˜¯æœ€å®ç”¨çš„åšæ³•å°±æ˜¯åœæ­¢è¿è¡Œï¼Œç„¶åè¾“å‡ºä¸€æ¡é”™è¯¯ä¿¡æ¯ã€‚<br>å¦ä¸€æ–¹é¢ï¼Œè®©æˆ‘ä»¬å†è€ƒè™‘ä¸€ä¸‹ç”¨äºæ‰“å¼€æ–‡ä»¶çš„å‡½æ•°io.openã€‚å¦‚æœè¦æ‰“å¼€çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°åº”è¯¥æœ‰æ€ä¹ˆæ ·çš„è¡Œä¸ºå‘¢ï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ²¡æœ‰ä»€ä¹ˆç®€å•çš„æ–¹æ³•å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°å‰æ£€æµ‹åˆ°è¿™ç§å¼‚å¸¸ã€‚åœ¨å¾ˆå¤šç³»ç»Ÿä¸­ï¼Œåˆ¤æ–­ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨çš„å”¯ä¸€æ–¹æ³•å°±æ˜¯è¯•ç€å»æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ã€‚å› æ­¤ï¼Œå¦‚æœç”±äºå¤–éƒ¨åŸå› å¯¼è‡´å‡½æ•°io.openæ— æ³•æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒåº”è¿”å›falseåŠä¸€æ¡é”™è¯¯ä¿¡æ¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±æœ‰æœºä¼šé‡‡å–æ°å½“çš„æ–¹å¼æ¥å¤„ç†è¿™ä¸ªå¼‚å¸¸æƒ…å†µï¼Œä¾‹å¦‚è¦æ±‚ç”¨æˆ·æä¾›å¦å¤–ä¸€ä¸ªæ–‡ä»¶åï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> file, msg</span><br><span class="line"><span class="keyword">repeat</span></span><br><span class="line">	<span class="built_in">print</span> <span class="string">&quot;enter a file name:&quot;</span></span><br><span class="line">	<span class="keyword">local</span> name = <span class="built_in">io</span>.<span class="built_in">read</span>()</span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">not</span> name <span class="keyword">then</span> <span class="keyword">return</span> <span class="keyword">end</span> 		<span class="comment">--æ²¡æœ‰è¾“å…¥</span></span><br><span class="line">	file, msg = <span class="built_in">io</span>.<span class="built_in">open</span>(name,<span class="string">&quot;r&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">not</span> file <span class="keyword">then</span> <span class="built_in">print</span>(msg) <span class="keyword">end</span></span><br><span class="line"><span class="keyword">until</span> file</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸æƒ³å¤„ç†è¿™äº›æƒ…å†µï¼Œä½†åˆæƒ³å®‰å…¨åœ°è¿è¡Œç¨‹åºï¼Œé‚£ä¹ˆåªéœ€è¦ç”¨assertï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">file = <span class="built_in">assert</span>(<span class="built_in">io</span>.<span class="built_in">open</span>(name,<span class="string">&quot;r&quot;</span>))	<span class="comment">-- stdin:1:no-file: No such file or directory</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯Luaè¯­è¨€ä¸­ä¸€ç§å…¸å‹çš„æŠ€å·§ï¼šå¦‚æœå‡½æ•°io.openæ‰§è¡Œå¤±è´¥ï¼Œassertå°±å¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚</p>
<h2 id="é”™è¯¯å¤„ç†å’Œå¼‚å¸¸"><a href="#é”™è¯¯å¤„ç†å’Œå¼‚å¸¸" class="headerlink" title="é”™è¯¯å¤„ç†å’Œå¼‚å¸¸"></a>é”™è¯¯å¤„ç†å’Œå¼‚å¸¸</h2><p>å¯¹äºå¤§å¤šæ•°åº”ç”¨è€Œè¨€ï¼Œæˆ‘ä»¬æ— é¡»åœ¨Luaä»£ç ä¸­åšä»»ä½•é”™è¯¯å¤„ç†ï¼Œåº”ç”¨ç¨‹åºæœ¬èº«ä¼šè´Ÿè´£å¤„ç†è¿™ç±»é—®é¢˜ã€‚æ‰€ä»¥Luaè¯­è¨€çš„è¡Œä¸ºæ˜¯ç”±åº”ç”¨ç¨‹åºçš„ç¬¬ä¸€æ¬¡è°ƒç”¨è€Œè§¦å‘çš„ï¼Œè¿™ç±»è°ƒç”¨é€šå¸¸æ˜¯è¦æ±‚Luaè¯­è¨€æ‰§è¡Œä¸€æ®µä»£ç ã€‚å¦‚æœæ‰§è¡Œä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œé‚£ä¹ˆè°ƒç”¨ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ä»£ç ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºé‡‡å–é€‚å½“çš„è¡Œä¸ºæ¥å¤„ç†é”™è¯¯ã€‚å½“ç‹¬ç«‹è§£é‡Šå™¨ä¸­å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¸»å¾ªç¯ä¼šæ‰“å°é”™è¯¯ä¿¡æ¯ï¼Œç„¶åç»§ç»­æ˜¾ç¤ºæç¤ºç¬¦ï¼Œå¹¶ç­‰å¾…æ‰§è¡ŒæŒ‡ä»¤çš„å‘½ä»¤ã€‚<br>ä¸è¿‡ï¼Œå¦‚æœè¦åœ¨Luaä»£ç ä¸­å¤„ç†é”™è¯¯ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨å‡½æ•°pcallæ¥å°è£…ä»£ç ã€‚<br>å‡è®¾è¦æ‰§è¡Œä¸€æ®µLuaä»£ç å¹¶æ•è·æ‰§è¡Œä¸­å‘ç”Ÿçš„æ‰€æœ‰é”™è¯¯ï¼Œé‚£ä¹ˆé¦–å…ˆéœ€è¦å°†è¿™æ®µä»£ç å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œè¿™ä¸ªå‡½æ•°é€šå¸¸æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ä¹‹åé€šè¿‡pcallæ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> ok , msg = <span class="built_in">pcall</span> (<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	some code</span><br><span class="line">	<span class="keyword">if</span> unexpected_condition <span class="keyword">then</span> <span class="built_in">error</span>() <span class="keyword">end</span></span><br><span class="line">	some code</span><br><span class="line">	<span class="built_in">print</span>(a[i])			<span class="comment">-- æ½œåœ¨é”™è¯¯ï¼Œ&#x27;a&#x27;å¯èƒ½ä¸æ˜¯ä¸€ä¸ªè¡¨</span></span><br><span class="line">	some code</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ok <span class="keyword">then</span>			<span class="comment">-- æ‰§è¡Œè¢«ä¿æŠ¤çš„ä»£ç æ—¶æ²¡æœ‰å‘ç”Ÿé”™è¯¯</span></span><br><span class="line">	regular code</span><br><span class="line"><span class="keyword">else</span>				<span class="comment">-- æ‰§è¡Œè¢«ä¿æŠ¤çš„ä»£ç æ—¶æœ‰é”™è¯¯å‘ç”Ÿï¼šè¿›è¡Œæ°å½“çš„å¤„ç†</span></span><br><span class="line">	<span class="built_in">error</span>-handling code</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°pcallä¼šä»¥ä¸€ç§ä¿æŠ¤æ¨¡å¼æ¥è°ƒç”¨å®ƒçš„ç¬¬1ä¸ªå‚æ•°ï¼Œä»¥ä¾¿æ•è·è¯¥å‡½æ•°æ‰§è¡Œä¸­çš„é”™è¯¯ã€‚æ— è®ºæ˜¯å¦æœ‰é”™è¯¯å‘ç”Ÿï¼Œå‡½æ•°pcalléƒ½ä¸ä¼šå¼•å‘é”™è¯¯ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿï¼Œé‚£ä¹ˆpcallè¿”å›trueåŠè°ƒç”¨å‡½æ•°çš„æ‰€æœ‰è¿”å›å€¼ï¼›å¦åˆ™ï¼Œåˆ™è¿”å›falseåŠé”™è¯¯ä¿¡æ¯ã€‚<br>ä½¿ç”¨â€é”™è¯¯ä¿¡æ¯â€çš„å‘½åæ–¹å¼å¯èƒ½ä¼šè®©äººè¯¯è§£é”™è¯¯ä¿¡æ¯å¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå› æ­¤ç§°ä¹‹ä¸ºé”™è¯¯å¯¹è±¡å¯èƒ½æ›´å¥½ï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºå‡½æ•°pacllèƒ½å¤Ÿè¿”å›ä¼ é€’ç»™errorçš„ä»»æ„è¯­è¨€ç±»å‹çš„å€¼ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">status</span> , err = <span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="built_in">error</span>(&#123;coude = <span class="number">121</span>&#125;) <span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">print</span>(err.code)		<span class="comment">-- 121</span></span><br></pre></td></tr></table></figure>
<p>è¿™äº›æœºåˆ¶ä¸ºæˆ‘ä»¬æä¾›äº†åœ¨Luaè¯­è¨€ä¸­è¿›è¡Œå¼‚å¸¸å¤„ç†çš„å…¨éƒ¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡erroræ¥æŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åç”¨å‡½æ•°pcallæ¥æ•è·å¼‚å¸¸ï¼Œè€Œé”™è¯¯ä¿¡æ¯åˆ™ç”¨æ¥è¡¨ç¤ºé”™è¯¯çš„ç±»å‹ã€‚</p>
<h2 id="é”™è¯¯ä¿¡æ¯å’Œæ ˆå›è°ƒ"><a href="#é”™è¯¯ä¿¡æ¯å’Œæ ˆå›è°ƒ" class="headerlink" title="é”™è¯¯ä¿¡æ¯å’Œæ ˆå›è°ƒ"></a>é”™è¯¯ä¿¡æ¯å’Œæ ˆå›è°ƒ</h2><p>è™½ç„¶èƒ½å¤Ÿä½¿ç”¨ä»»ä½•ç±»å‹çš„å€¼ä½œä¸ºé”™è¯¯å¯¹è±¡ï¼Œä½†é”™è¯¯å¯¹è±¡é€šå¸¸æ˜¯ä¸€ä¸ªæè¿°å‡ºé”™å†…å®¹çš„å­—ç¬¦ä¸²ã€‚å½“é‡åˆ°å†…éƒ¨é”™è¯¯å‡ºç°æ—¶ï¼ŒLuaè¯­è¨€è´Ÿè´£äº§ç”Ÿé”™è¯¯å¯¹è±¡ï¼Œå¦‚æœé”™è¯¯å¯¹è±¡æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆLuaè¯­è¨€ä¼šå°è¯•æŠŠä¸€äº›æœ‰å…³é”™è¯¯å‘ç”Ÿä½ç½®çš„ä¿¡æ¯é™„ä¸Šï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">status</span> , err = <span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="built_in">error</span>(<span class="string">&quot;my error&quot;</span>) <span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">print</span>(err)		<span class="comment">-- stdin:1:my error</span></span><br></pre></td></tr></table></figure>
<p>ä½ç½®ä¿¡æ¯ä¸­ç»™å‡ºäº†å‡ºé”™ä»£ç æ®µçš„åç§°å’Œè¡Œå·ã€‚<br>å‡½æ•°errorè¿˜æœ‰ç¬¬2ä¸ªå¯é€‰å‚æ•°levelï¼Œç”¨äºæŒ‡å‡ºå‘å‡½æ•°è°ƒç”¨å±‚æ¬¡ä¸­çš„å“ªå±‚å‡½æ•°æŠ¥å‘Šé”™è¯¯ï¼Œä»¥è¯´æ˜è°åº”è¯¥ä¸ºé”™è¯¯è´Ÿè´£ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ç¼–å†™ä¸€ä¸ªç”¨æ¥æ£€æŸ¥å…¶è‡ªèº«æ˜¯å¦è¢«æ­£ç¡®è°ƒç”¨äº†çš„å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(str)</span></span></span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">type</span>(str) ~= <span class="string">&quot;string&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;string expected&quot;</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	regular code</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè°ƒç”¨æ—¶è¢«ä¼ é€’äº†é”™è¯¯çš„å‚æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">foo(&#123;x = <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>ç”±äºå‡½æ•°fooè°ƒç”¨çš„errorï¼Œæ‰€ä»¥Luaè¯­è¨€ä¼šè®¤ä¸ºæ˜¯å‡½æ•°fooå‘ç”Ÿäº†é”™è¯¯ã€‚ç„¶è€Œï¼ŒçœŸæ­£çš„è‚‡äº‹è€…å…¶å®æ˜¯å‡½æ•°fooçš„è°ƒç”¨è€…ã€‚ä¸ºäº†çº æ­£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰errorå‡½æ•°é”™è¯¯å®é™…å‘ç”Ÿåœ¨å‡½æ•°è°ƒç”¨è¹­çš„ç¬¬2å±‚ä¸­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> <span class="params">(str)</span></span></span><br><span class="line">	<span class="keyword">if</span> typr(str) ~= <span class="string">&quot;string&quot;</span> <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">error</span>(<span class="string">&quot;string expected&quot;</span>,<span class="number">2</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	regular code</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>é€šå¸¸ï¼Œé™¤äº†å‘ç”Ÿé”™è¯¯çš„ä½ç½®ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›åœ¨é”™è¯¯å‘ç”Ÿæ—¶å¾—åˆ°æ›´å¤šçš„è°ƒè¯•ä¿¡æ¯ã€‚è‡³å°‘ï¼Œæˆ‘ä»¬å¸Œæœ›å¾—åˆ°å…·æœ‰å‘ç”Ÿé”™è¯¯æ—¶å®Œæ•´å‡½æ•°è°ƒç”¨æ ˆå›æº¯ã€‚å½“å‡½æ•°pcallè¿”å›é”™è¯¯ä¿¡æ¯æ—¶ï¼Œéƒ¨åˆ†çš„è°ƒç”¨æ ˆå·²ç»è¢«ç ´åäº†ã€‚å› æ­¤ï¼Œå¦‚æœå¸Œæœ›å¾—åˆ°ä¸€ä¸ªæœ‰æ„ä¹‰çš„æ ˆå›æº¯ï¼Œé‚£ä¹ˆå°±å¿…é¡»åœ¨å‡½æ•°pcallè¿”å›å‰å…ˆå°†è°ƒç”¨æ ˆæ„é€ å¥½ã€‚ä¸ºäº†å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼ŒLuaè¯­è¨€æä¾›äº†å‡½æ•°xpcallã€‚è¯¥å‡½æ•°ä¸å‡½æ•°pcallè•¾è¥¿ï¼Œä½†å®ƒçš„ç¬¬2ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ¶ˆæ¯å¤„ç†å‡½æ•°ã€‚å½“å‘ç”Ÿå‡‘æ— æ—¶ï¼ŒLuaä¼šè°ƒç”¨æ ˆå±•å¼€å‰è°ƒç”¨è¿™ä¸ªæ¶ˆæ¯å¤„ç†å‡½æ•°ï¼Œä»¥ä¾¿æ¶ˆæ¯å¤„ç†å‡½æ•°èƒ½å¤Ÿä½¿ç”¨è°ƒè¯•åº“æ¥è·å–æœ‰å…³é”™è¯¯çš„æ›´é€—ä¿¡æ¯ã€‚ä¸¤ä¸ªå¸¸ç”¨çš„æ¶ˆæ¯å¤„ç†å‡½æ•°æ˜¯debug.debugå’Œdebug.tracebackï¼Œå‰è€…ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªLuaæç¤ºç¬¦æ¥è®©ç”¨æˆ·æ£€æŸ¥é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼›åè€…åˆ™ä½¿ç”¨è°ƒç”¨æ ˆæ¥æ„é€ è¯¦ç»†çš„é”™è¯¯ï¼ŒLuaè¯­è¨€çš„ç‹¬ç«‹è§£é‡Šå™¨å°±æ˜¯ä½¿ç”¨è¿™ä¸ªå‡½æ•°æ¥æ„é€ é”™è¯¯ä¿¡æ¯çš„ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè®¡ç®—è¡¨æ ¼åŒ…å«çš„å­—æ®µæ•°é‡</title>
    <url>/3e813c88.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Luaä¸­è®¡ç®—è¡¨æ ¼åŒ…å«çš„å­—æ®µæ•°é‡ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè®¡ç®—è¡¨çš„é•¿åº¦,å¾ˆå¤šäººå¹³æ—¶éƒ½ä¹ æƒ¯ç”¨<code>#</code>,ä½†æ˜¯<code>#</code>å’Œ<code>table.nums()</code>è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚<br><code>Lua table</code> çš„ <code>&quot;#&quot;</code> æ“ä½œåªå¯¹ä¾æ¬¡æ’åºçš„æ•°å€¼ä¸‹æ ‡æ•°ç»„æœ‰æ•ˆï¼Œ<code>table.nums()</code> åˆ™è®¡ç®— <code>table</code> ä¸­æ‰€æœ‰ä¸ä¸º <code>nil</code> çš„å€¼çš„ä¸ªæ•°ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- @function [parent=#table] nums</span></span><br><span class="line"><span class="comment">-- @param table t è¦æ£€æŸ¥çš„è¡¨æ ¼</span></span><br><span class="line"><span class="comment">-- @return integer#integer</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">table.nums</span><span class="params">(t)</span></span></span><br><span class="line">    <span class="keyword">local</span> count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span></span><br><span class="line">        count = count + <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè¯­è¨€å…¥é—¨</title>
    <url>/41246.html</url>
    <content><![CDATA[<p>éµç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªLuaç¨‹åºæ—¶é€šè¿‡æ ‡å‡†è¾“å‡ºæ‰“å°å­—ç¬¦ä¸²â€Hello Worldâ€:<br><code>print(&quot;Hello World&quot;)</code></p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å¦‚æœè¯»è€…ä½¿ç”¨çš„æ˜¯Luaè¯­è¨€ç‹¬ç«‹è§£é‡Šå™¨(stand-alone interpreter)ï¼Œè¦è¿è¡Œè¿™ç¬¬ä¸€ä¸ªç¨‹åºçš„è¯ï¼Œç›´æ¥è°ƒç”¨è§£é‡Šå™¨è¿è¡ŒåŒ…å«ç¨‹åºä»£ç çš„æ–‡æœ¬æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŠŠä¸Šè¿°ä»£ç ä¿å­˜ä¸ºåhello.luaçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿è¡Œï¼š<br><code>% lua hello.lua</code></p>
<p>å†æ¥çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ç‚¹çš„ä¾‹å­ï¼Œä»¥ä¸‹ä»£ç å®šä¹‰äº†ä¸€ä¸ªè®¡ç®—é˜¶ä¹˜çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°å…ˆè®©ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•°ï¼Œç„¶åæ‰“å°å‡ºè¿™ä¸ªæ•°çš„é˜¶ä¹˜ç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--å®šä¹‰ä¸€ä¸ªè®¡ç®—é˜¶ä¹˜çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fact</span><span class="params">(n)</span></span></span><br><span class="line">	<span class="keyword">if</span> n  == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> n * fact(n<span class="number">-1</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;enter a number:&quot;</span>)</span><br><span class="line"></span><br><span class="line">a = <span class="built_in">io</span>.<span class="built_in">read</span>(<span class="string">&quot;*n&quot;</span>)  <span class="comment">--è¯»å–ä¸€ä¸ªæ•°å­—</span></span><br><span class="line"><span class="built_in">print</span>(fact(a))</span><br></pre></td></tr></table></figure>

<h2 id="1-1-ç¨‹åºæ®µ"><a href="#1-1-ç¨‹åºæ®µ" class="headerlink" title="1.1 ç¨‹åºæ®µ"></a>1.1 ç¨‹åºæ®µ</h2><p>æˆ‘ä»¬å°†Luaè¯­è¨€æ‰§è¡Œçš„æ¯ä¸€æ®µä»£ç ç§°ä¸ºä¸€ä¸ª*ç¨‹åºæ®µ(Chunk)*ï¼Œå³ä¸€ç»„å‘½ä»¤æˆ–è¡¨è¾¾å¼ç»„æˆçš„åºåˆ—ã€‚<br>ç¨‹åºæ®µæ—¢å¯ä»¥ç®€å•åˆ°åªç”±ä¸€å¥è¡¨è¾¾å¼æ„æˆï¼Œä¹Ÿå¯ä»¥ç”±å¤šå¥è¡¨è¾¾å¼å’Œå‡½æ•°å®šä¹‰ï¼ˆå®é™…æ˜¯å¤åˆ¶è¡¨è¾¾å¼ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰ç»„æˆï¼ˆä¾‹å¦‚è®¡ç®—é˜¶ä¹˜çš„ç¤ºä¾‹ï¼‰ã€‚ç¨‹åºæ®µåœ¨å¤§å°ä¸Šå¹¶æ²¡æœ‰é™åˆ¶ï¼Œäº‹å®ä¸Šï¼Œç”±äºLuaè¯­è¨€ä¹Ÿå¯ä»¥è¢«ç”¨ä½œæ•°æ®å®šä¹‰è¯­è¨€ï¼Œæ‰€ä»¥å‡ MBçš„ç¨‹åºæ®µä¹Ÿå¾ˆå¸¸è§ã€‚Luaè¯­è¨€çš„è§£é‡Šå™¨å¯ä»¥æ”¯æŒéå¸¸å¤§çš„ç¨‹åºæ®µã€‚<br>é™¤äº†å°†æºç ä¿å­˜æˆæ–‡ä»¶å¤–ï¼Œæˆ‘ä»¬æœ‰ä¹Ÿå¯ä»¥ç›´æ¥åœ¨äº¤äº’å¼æ¨¡å¼(interactive mode)ä¸‹è¿è¡Œç‹¬ç«‹è§£é‡Šå™¨ã€‚å½“ä¸å¸¦å‚æ•°ç¬¬è°ƒç”¨luaæ—¶ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„è¾“å‡º:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">% lua</span><br><span class="line">Lua <span class="number">5.3</span> Copyright(C)<span class="number">1994</span><span class="number">-2016</span> Lua.org, PUC-Rio</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<p>æ­¤åï¼Œè¾“å…¥çš„æ¯ä¸€æ¡å‘½ä»¤éƒ½ä¼šåœ¨æŒ‰ä¸‹å›è½¦é”®åç«‹å³æ‰§è¡Œã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¾“å…¥<code>EPF</code>æ§åˆ¶å­—ç¬¦ï¼Œæˆ–è°ƒç”¨æ“ä½œç³»ç»Ÿåº“çš„<code>exit</code>å‡½æ•°ï¼ˆæ‰§è¡Œ<code>os.exit()</code>ï¼‰é€€å‡ºäº¤äº’æ¨¡å¼ã€‚<br>ä»Lua5.3ç‰ˆæœ¬å¼€å§‹ï¼Œå¯ä»¥ç›´æ¥åœ¨äº¤äº’æ¨¡å¼ä¸‹è¾“å…¥è¡¨è¾¾å¼ï¼ŒLuaè¯­è¨€ä¼šè¾“å‡ºè¡¨è¾¾å¼çš„å€¼ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">% lua</span><br><span class="line">Lua <span class="number">5.3</span> Copyright(C)<span class="number">1994</span><span class="number">-2016</span> Lua.org, PUC-Rio</span><br><span class="line">&gt; <span class="built_in">math</span>.<span class="built_in">pi</span> / <span class="number">4</span>         <span class="comment">--0.78539816339745</span></span><br><span class="line">&gt; a = <span class="number">15</span></span><br><span class="line">&gt; a^<span class="number">2</span>                 <span class="comment">--225</span></span><br><span class="line">&gt; a + <span class="number">2</span>               <span class="comment">--7</span></span><br></pre></td></tr></table></figure>
<p>è¦ä»¥ä»£ç æ®µçš„æ–¹å¼è¿è¡Œä»£ç ï¼ˆä¸åœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼‰ï¼Œé‚£ä¹ˆå¿…é¡»æŠŠè¡¨è¾¾å¼åŒ…åœ¨å‡½æ•°<code>print</code>çš„è°ƒç”¨ä¸­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">pi</span>/<span class="number">4</span>)</span><br><span class="line">a = <span class="number">15</span></span><br><span class="line"><span class="built_in">print</span>(a^<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(a + <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼ŒLuaè¯­è¨€è§£é‡Šå™¨ä¸€èˆ¬ä¼šæŠŠæˆ‘ä»¬è¾“å…¥çš„æ¯ä¸€è¡Œå½“åšå®Œæ•´çš„ç¨‹åºå—æˆ–è¡¨è¾¾å¼è§£é‡Šæ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå¦‚æœLuaè¯­è¨€è§£é‡Šå™¨å‘ç°æˆ‘ä»¬è¾“å…¥çš„æŸä¸€è¡Œä¸å®Œæˆï¼Œé‚£ä¹ˆå®ƒä¼šç­‰å¾…ç›´åˆ°ç¨‹åºå—æˆ–è¡¨è¾¾å¼è¢«è¾“å…¥å®Œæ•´åå†è¿›è¡Œè§£é‡Šæ‰§è¡Œã€‚è¿™æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥åœ¨äº¤äº’æ¨¡å¼ä¸‹è¾“å…¥ä¸€ä¸ªåƒé˜¶ä¹˜å‡½æ•°ç¤ºä¾‹é‚£æ ·çš„ç”±å¤šè¡Œç»„æˆçš„å¤šè¡Œå®šä¹‰ã€‚ä¸è¿‡ï¼Œå¯¹äºè¿™ç§è¾ƒé•¿çš„å‡½æ•°å®šä¹‰è€Œè¨€ï¼Œå°†å…¶ä¿å­˜æ–‡ä»¶ç„¶åå†è°ƒç”¨ç‹¬ç«‹è§£é‡Šå™¨æ¥æ‰§è¡Œé€šå¸¸æ›´æ–¹ä¾¿ã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>-i</code>å‚æ•°è®©Luaè¯­è¨€è§£é‡Šå™¨åœ¨æ‰§è¡Œå®Œåˆ¶å®šçš„ç¨‹åºæ®µåè¿›å…¥äº¤äº’æ¨¡å¼ï¼š<br><code>% lua -i prog</code><br>ä¸Šè¿°å‘½ä»¤ä¼šåœ¨æ‰§è¡Œå®Œæ–‡ä»¶progä¸­çš„ç¨‹åºåè¿›å…¥äº¤äº’æ¨¡å¼ï¼Œè¿™å¯¹äºè°ƒè¯•å’Œæ‰‹å·¥æµ‹è¯•å¾ˆæœ‰ç”¨ã€‚åœ¨æœ¬ç« çš„æœ€åï¼Œæˆ‘ä»¬ä¼šå­¦ä¹ æœ‰å…³ç‹¬ç«‹è§£é‡Šå™¨çš„æ›´å¤šå‚æ•°ã€‚<br>å¦ä¸€ç§è¿è¡Œç¨‹åºæ®µçš„æ–¹å¼è°ƒç”¨å‡½æ•°<code>dofile</code>ï¼Œè¯¥å‡½æ•°ä¼šç«‹å³æ‰§è¡Œä¸€ä¸ªæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„æ–‡ä»¶lib1.lua:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">norm</span><span class="params">( x,y )</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">math</span>.<span class="built_in">sqrt</span>(x^<span class="number">2</span> + y^<span class="number">2</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">twice</span> <span class="params">(x)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">2.0</span> * x</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œåœ¨äº¤äº’æ¨¡å¼ä¸‹è¿è¡Œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">dofile</span>(<span class="string">&#x27;lib1.lua&#x27;</span>)   <span class="comment">--åŠ è½½æ–‡ä»¶</span></span><br><span class="line">&gt;n = norm(<span class="number">3.4</span>,<span class="number">1.0</span>)</span><br><span class="line">&gt;twice(n)             <span class="comment">--7.088018058677</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°dofileåœ¨å¼€å‘é˜¶æ®µä¹Ÿéå¸¸æœ‰ç”¨ã€‚æˆ‘ä»¬å¯ä»¥åŒæ—¶æ‰“å¼€ä¸¤ä¸ªçª—å£ï¼Œä¸€ä¸ªçª—å£ä¸­ä½¿ç”¨æ–‡ä»¶ç¼–è¾‘å™¨ç¼–è¾‘ä»£ç ï¼Œå¦ä¸€ä¸ªçª—å£ä¸­ä½¿ç”¨äº¤äº’æ¨¡å¼è¿è¡ŒLuaè¯­è¨€è§£é‡Šå™¨ã€‚å½“ä¿®æ”¹å®Œä»£ç å¹¶ä¿å­˜åï¼Œåªè¦åœ¨Luaè¯­è¨€äº¤äº’æ¨¡å¼çš„æç¤ºç¬¦ä¸‹æ‰§è¡Œdofile(â€œprog.luaâ€)å°±å¯ä»¥åŠ è½½æ–°ä»£ç ï¼Œç„¶åå°±å¯ä»¥è§‚å¯Ÿæ–°ä»£ç çš„å‡½æ•°è°ƒç”¨å’Œæ‰§è¡Œç»“æœäº†ã€‚</p>
<h2 id="1-2-ä¸€äº›è¯­æ³•è§„èŒƒ"><a href="#1-2-ä¸€äº›è¯­æ³•è§„èŒƒ" class="headerlink" title="1.2 ä¸€äº›è¯­æ³•è§„èŒƒ"></a>1.2 ä¸€äº›è¯­æ³•è§„èŒƒ</h2><p>Luaè¯­è¨€ä¸­çš„æ ‡è¯†ç¬¦æ˜¯ç”±ä»»æ„å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼ˆæ³¨æ„ä¸èƒ½ç”¨æ•°å­—å¼€å¤´ï¼‰ï¼Œä¾‹å¦‚ï¼š<br><code>i</code>,<code>j</code>,<code>i1</code>,<code>j1</code>,<code>_i</code>,<code>abc</code><br>â€œä¸‹åˆ’çº¿ + å¤§å†™å­—æ¯â€ç»„æˆçš„æ ‡è¯†ç¬¦é€šè¿‡è¢«Luaè¯­è¨€ç”¨ä½œç‰¹æ®Šç”¨é€”ï¼Œåº”é¿å…å°†å…¶ç”¨ä½œå…¶ä»–ç”¨é€”ã€‚æˆ‘ä»¬é€šå¸¸å°†â€œä¸‹åˆ’çº¿ + å°å†™å­—æ¯â€ç”¨ä½œå“‘å˜é‡ã€‚<br>ä»¥ä¸‹æ˜¯Luaè¯­è¨€çš„ä¿ç•™å­—ï¼Œå®ƒä»¬ä¸èƒ½è¢«ç”¨ä½œæ ‡è¯†ç¬¦ï¼š<br><code>and</code>,<code>brask</code>,<code>do</code>,<code>else</code>,<code>elseif</code>,<code>end</code>,<code>false</code>,<code>goto</code>,<code>for</code>,<code>function</code>,<code>if</code>,<code>in</code>,<code>local</code>,<code>nil</code>,<code>not</code>,<code>or</code>,<code>repeat</code>,<code>return</code>,<code>then</code>,<code>true</code>,<code>until</code>,<code>while</code><br>Luaè¯­è¨€æ˜¯å¯¹å¤§å°å†™æ•æ„Ÿçš„ï¼Œå› è€Œ<code>and</code>æ˜¯ä¿ç•™å­—ï¼Œä½†æ˜¯<code>And</code>å’Œ<code>AND</code>å°±æ˜¯ä¸¤ä¸ªä¸åŒçš„æ ‡è¯†ç¬¦ã€‚<br>Luaè¯­è¨€ä¸­ä½¿ç”¨ä¸¤ä¸ªè¿ç»­çš„è¿å­—ç¬¦ï¼ˆâ€“ï¼‰è¡¨ç¤ºå•è¡Œæ³¨é‡Šï¼Œä½¿ç”¨ä¸¤ä¸ªè¿ç»­çš„è¿å­—ç¬¦åŠ ä¸¤å¯¹å·¦æ–¹æ‹¬å·è¡¨ç¤ºé•¿æ³¨é‡Šæˆ–å¤šè¡Œæ³¨é‡Šçš„å¼€å§‹ï¼ŒæŒ‡å¯¼ä¸¤ä¸ªè¿ç»­çš„å³æ‹¬å·ä¸ºæ­¢ï¼Œä¸­é—´éƒ½æ˜¯æ³¨é‡Šï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--[[å¤šè¡Œ</span></span><br><span class="line"><span class="comment">é•¿æ³¨é‡Š</span></span><br><span class="line"><span class="comment">]]</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æ³¨é‡Šä¸€æ®µä»£ç æ—¶ï¼Œä¸€ä¸ªå¸¸è§çš„æŠ€å·§æ˜¯å°†è¿™äº›ä»£ç æ”¾å…¥â€“[[å’Œâ€“]]ä¹‹é—´ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">print(10)   --æ— åŠ¨ä½œï¼Œè¢«æ³¨é‡Šæ‰äº†</span></span><br><span class="line"><span class="comment">--]]</span></span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬éœ€è¦é‡æ–°å¯ç”¨è¿™æ®µä»£ç æ—¶ï¼Œåªéœ€è¦åœ¨ç¬¬ä¸€è¡Œè¡Œé¦–æ·»åŠ ä¸€ä¸ªè¿å­—ç¬¦å³å¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">---[[</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">10</span>)      <span class="comment">--10</span></span><br><span class="line"><span class="comment">--]]</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€è¡Œçš„â€“[[è¡¨ç¤ºä¸€æ®µå¤šè¡Œæ³¨é‡Šçš„å¼€å§‹ï¼Œç›´åˆ°ä¸¤ä¸ªè¿ç»­çš„å³æ‹¬å·è¿™æ®µå¤šè¡Œæ³¨é‡Šæ‰ä¼šç»“æŸï¼Œå› è€Œå°½ç®¡æœ€åä¸€è¡Œæœ‰ä¸¤ä¸ªè¿ç»­çš„è¿å­—ç¬¦ï¼Œä½†ç”±äºè¿™ä¸¤ä¸ªè¿å­—ç¬¦åœ¨æœ€åä¸¤ä¸ªå³æ‹¬å·ä¹‹å‰ï¼Œæ‰€ä»¥ä»ç„¶è¢«æ³¨é‡Šæ‰äº†ã€‚åœ¨ç¬¬äºŒä¸ªç¤ºä¾‹ä¸­ï¼Œç”±äºç¬¬ä¸€è¡Œçš„â€“[[å®é™…æ˜¯å•è¡Œæ³¨é‡Šï¼Œå› æ­¤æœ€åä¸€è¡Œå®é™…ä¸Šä¹Ÿæ˜¯ä¸€æ¡ç‹¬ç«‹çš„å•è¡Œæ³¨é‡Šï¼ˆæœ€åçš„ä¸¤ä¸ªè¿ç»­å³æ–¹æ‹¬å·æ²¡æœ‰ä¸ä¹‹åŒ¹é…çš„â€“[[ï¼‰ï¼Œprintå¹¶æ²¡æœ‰è¢«æ³¨é‡Šæ‰ã€‚<br>åœ¨Luaè¯­è¨€ä¸­ï¼Œè¿ç»­è¯­å¥ä¹‹é—´çš„åˆ†éš”ç¬¦å¹¶ä¸æ˜¯å¿…éœ€çš„ï¼Œå¦‚æœæœ‰éœ€è¦çš„è¯å¯ä»¥ä½¿ç”¨åˆ†å·æ¥è¿›è¡Œåˆ†å‰²ã€‚åœ¨Luaè¯­è¨€ä¸­ï¼Œè¡¨è¾¾å¼ä¹‹é—´çš„æ¢è¡Œä¹Ÿä¸èµ·ä»»ä½•ä½œç”¨ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹4ä¸ªç¨‹åºæ®µéƒ½æ˜¯åˆæ³•ä¸”ç­‰ä»·çš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span> </span><br><span class="line">b = a * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line">b = a * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">a = <span class="number">1</span>; b = a * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">1</span> b = a * <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ ¹æ®ä¸ªäººä¹ æƒ¯æ¥ã€‚</p>
<h2 id="1-3-å…¨å±€å˜é‡"><a href="#1-3-å…¨å±€å˜é‡" class="headerlink" title="1.3 å…¨å±€å˜é‡"></a>1.3 å…¨å±€å˜é‡</h2><p>åœ¨Luaè¯­è¨€ä¸­ï¼Œå…¨å±€å˜é‡æ— é¡»å£°æ˜å³å¯ä½¿ç”¨ï¼Œä½¿ç”¨æœªç»åˆå§‹åŒ–çš„å…¨å±€å˜é‡ä¹Ÿä¸ä¼šå¯¼è‡´é”™è¯¯ã€‚å½“ä½¿ç”¨æœªç»åˆå§‹åŒ–çš„å…¨å±€å˜é‡æ—¶ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯<code>nil</code>ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; b      <span class="comment">-- nil</span></span><br><span class="line">&gt; b = <span class="number">10</span> </span><br><span class="line">&gt; b      <span class="comment">--10</span></span><br></pre></td></tr></table></figure>
<p>å½“æŠŠ<code>nil</code>èµ‹å€¼ç»™å…¨å±€å˜é‡æ—¶ï¼ŒLuaä¼šå›æ”¶æ”¹å…¨å±€å˜é‡ï¼ˆå°±åƒè¯¥å…¨å±€å˜é‡ä»æ¥æ²¡æœ‰å‡ºç°è¿‡ä¸€æ ·ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; b = <span class="literal">nil</span></span><br><span class="line">&gt; b         			<span class="comment">--nil</span></span><br></pre></td></tr></table></figure>
<p>Luaè¯­è¨€ä¸åŒºåˆ†ä¸ºåˆå§‹åŒ–å˜é‡å’Œè¢«èµ‹å€¼ä¸ºnilçš„å˜é‡ã€‚åœ¨ä¸Šè¿°èµ‹å€¼è¯­å¥æ‰§è¡Œåï¼ŒLuaè¯­è¨€ä¼šæœ€ç»ˆå›æ”¶è¯¥å˜é‡å ç”¨çš„å†…å­˜ã€‚</p>
<h2 id="1-4ç±»å‹å’Œå€¼"><a href="#1-4ç±»å‹å’Œå€¼" class="headerlink" title="1.4ç±»å‹å’Œå€¼"></a>1.4ç±»å‹å’Œå€¼</h2><p>Luaè¯­è¨€æ˜¯ä¸€ç§åŠ¨æ€ç±»å‹çš„è¯­è¨€ï¼Œåœ¨è¿™ç§è¯­è¨€ä¸­æ²¡æœ‰ç±»å‹å®šä¹‰ï¼Œæ¯ä¸ªå€¼éƒ½å¸¦æœ‰å…¶è‡ªèº«çš„ç±»å‹ä¿¡æ¯ã€‚<br>Luaè¯­è¨€ä¸­æœ‰8ä¸ªåŸºæœ¬ç±»å‹ï¼šnilï¼ˆç©ºï¼‰ã€blooleanï¼ˆå¸ƒå°”ï¼‰ã€numberï¼ˆæ•°å€¼ï¼‰ã€stringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€userdataï¼ˆç”¨æˆ·æ•°æ®ï¼‰ã€functionï¼ˆå‡½æ•°ï¼‰ã€threadï¼ˆçº¿ç¨‹ï¼‰å’Œtableï¼ˆè¡¨ï¼‰ã€‚ä½¿ç”¨å‡½æ•°typeå¯è·å–ä¸€ä¸ªå€¼å¯¹åº”çš„ç±»å‹åç§°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">type</span>(<span class="literal">nil</span>)			<span class="comment">-- nil</span></span><br><span class="line">&gt;<span class="built_in">type</span>(<span class="literal">true</span>)			<span class="comment">-- boolean</span></span><br><span class="line">&gt;<span class="built_in">type</span>(<span class="number">10.4</span>*<span class="number">3</span>)		<span class="comment">--number</span></span><br><span class="line">&gt;<span class="built_in">type</span>(<span class="string">&quot;Hello World&quot;</span>)<span class="comment">--string</span></span><br><span class="line">&gt;<span class="built_in">type</span>(<span class="built_in">io</span>.<span class="built_in">stdin</span>)		<span class="comment">--userdata</span></span><br><span class="line">&gt;<span class="built_in">type</span>(<span class="built_in">print</span>)		<span class="comment">--function</span></span><br><span class="line">&gt;<span class="built_in">type</span>(<span class="built_in">type</span>)			<span class="comment">--thread</span></span><br><span class="line">&gt;<span class="built_in">type</span>(&#123;&#125;)			<span class="comment">--table</span></span><br><span class="line">&gt;<span class="built_in">type</span>(<span class="built_in">type</span>(X))		<span class="comment">--string</span></span><br></pre></td></tr></table></figure>
<p>ä¸ç®¡Xæ˜¯ä»€ä¹ˆï¼Œæœ€åä¸€è¡Œè¿”å›çš„æ°¸è¿œæ˜¯â€œstringâ€ã€‚è¿™æ˜¯å› ä¸ºå‡½æ•°typeçš„è¿”å›å€¼æ°¸è¿œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚<br>userdataç±»å‹å…è®¸æŠŠä»»æ„çš„Cè¯­è¨€æ•°æ®ä¿å­˜åœ¨Luaè¯­è¨€å˜é‡ä¸­ã€‚åœ¨Luaè¯­è¨€ä¸­ï¼Œç”¨æˆ·æ•°æ®ç±»å‹é™¤äº†èµ‹å€¼å’Œç›¸ç­‰æ€§æµ‹è¯•å¤–ï¼Œæ²¡æœ‰å…¶ä»–é¢„å®šä¹‰çš„æ“ä½œã€‚ç”¨æˆ·æ•°æ®è¢«ç”¨æ¥è¡¨ç¤ºç”±åº”ç”¨æˆ–Cè¯­è¨€ç¼–å†™çš„åº“æ‰€åˆ›å»ºçš„æ–°ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæ ‡å‡†I&#x2F;Oåº“ä½¿ç”¨ç”¨æˆ·æ•°æ®æ¥è¡¨ç¤ºæ‰“å¼€çš„æ–‡ä»¶ã€‚æˆ‘ä»¬ä¼šåœ¨åé¢è®¾è®¡C APIæ—¶å†è®¨è®ºæ›´å¤šçš„ç›¸å…³å†…å®¹ã€‚<br>å˜é‡æ²¡æœ‰é¢„å®šä¹‰çš„ç±»å‹ï¼Œä»»ä½•å˜é‡éƒ½å¯ä»¥åŒ…å«ä»»ä½•ç±»å‹çš„å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;<span class="built_in">type</span>(a)		<span class="comment">-- nil(aæ²¡æœ‰åˆå§‹åŒ–)</span></span><br><span class="line">&gt;a = <span class="number">10</span></span><br><span class="line">&gt;<span class="built_in">type</span>(a)		<span class="comment">--number</span></span><br><span class="line">&gt;a = <span class="string">&quot;a string!&quot;</span></span><br><span class="line">&gt;<span class="built_in">type</span>(a)		<span class="comment">--string</span></span><br><span class="line">&gt;a = <span class="literal">nil</span> </span><br><span class="line">&gt;<span class="built_in">type</span>(a)		<span class="comment">--nil</span></span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°†ä¸€ä¸ªå˜é‡ç”¨ä½œä¸åŒç±»å‹æ—¶ä¼šå¯¼è‡´ä»£ç çš„å¯è¯»æ€§ä¸ä½³ï¼›ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹è°¨æ…åœ°ä½¿ç”¨è¿™ä¸ªç‰¹è¡Œå¯èƒ½ä¼šå¸¦æ¥ä¸€å®šç¨‹åº¦çš„ä¾¿åˆ©ã€‚ä¾‹å¦‚ï¼Œå½“ä»£ç å‘ç”Ÿå¼‚å¸¸æ—¶å¯ä»¥è¿”å›ä¸€ä¸ªnilä»¥åŒºåˆ«äºå…¶ä»–æ­£å¸¸æƒ…å†µä¸‹çš„è¿”å›å€¼ã€‚</p>
<h3 id="1-4-1-nil"><a href="#1-4-1-nil" class="headerlink" title="1.4.1 nil"></a>1.4.1 nil</h3><p>nilæ˜¯ä¸€ç§åªæœ‰ä¸€ä¸ªnilå€¼çš„ç±»å‹ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸å…¶ä»–æ‰€æœ‰å€¼è¿›è¡ŒåŒºåˆ†ã€‚Luaè¯­è¨€ä½¿ç”¨nilæ¥è¡¨ç¤ºæ— æ•ˆå€¼çš„æƒ…å†µã€‚åƒæˆ‘ä»¬æ‰€å­¦ä¹ çš„å…¶ä»–è¯­è¨€ï¼Œä¸€ä¸ªå…¨å±€å˜é‡åœ¨ç¬¬ä¸€æ¬¡è¢«èµ‹å€¼å‰çš„é»˜è®¤å€¼å°±æ˜¯nilï¼Œè€Œå°†nilèµ‹å€¼ç»™å…¨å±€å˜é‡åˆ™ç›¸å½“äºå°†å…¶åˆ é™¤ã€‚</p>
<h3 id="1-4-2-boolean"><a href="#1-4-2-boolean" class="headerlink" title="1.4.2 boolean"></a>1.4.2 boolean</h3><p>booleanç±»å‹å…·æœ‰ä¸¤ä¸ªå€¼ï¼Œ<em>true</em>å’Œ<em>false</em>ï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨äº†ä¼ ç»Ÿå¸ƒå°”å€¼ã€‚ä¸è¿‡ï¼Œåœ¨Luaè¯­è¨€ä¸­ï¼ŒBooleanå€¼å¹¶éæ˜¯ç”¨äºæ¡ä»¶æµ‹è¯•çš„å”¯ä¸€æ–¹å¼ï¼Œä»»ä½•å€¼éƒ½å¯ä»¥è¡¨ç¤ºæ¡ä»¶ã€‚åœ¨Luaè¯­è¨€ä¸­ï¼Œæ¡ä»¶æµ‹è¯•å°†é™¤Booleanå€¼falseå’Œnilå¤–çš„æ‰€æœ‰å…¶ä»–å€¼è§†ä¸ºçœŸã€‚ç‰¹åˆ«çš„æ˜¯ï¼Œåœ¨æ¡ä»¶æ£€æµ‹ä¸­Luaè¯­è¨€æŠŠé›¶å’Œç©ºå­—ç¬¦ä¸²ä¹Ÿéƒ½è§†ä¸ºçœŸã€‚<br>Luaè¯­è¨€æ”¯æŒå¸¸è§çš„é€»è¾‘è¿ç®—ç¬¦ï¼š<code>and</code>,<code>or</code>å’Œ<code>not</code>ã€‚å’Œæ¡æ£€æµ‹è¯•ä¸€æ ·ï¼Œæ‰€æœ‰çš„é€»è¾‘è¿ç®—å°†Booleanç±»å‹çš„falseå’Œnilå½“åšå‡ï¼Œè€ŒæŠŠå…¶ä»–å€¼å½“ä½œçœŸã€‚</p>
<h2 id="1-5-ç‹¬ç«‹è§£é‡Šå™¨"><a href="#1-5-ç‹¬ç«‹è§£é‡Šå™¨" class="headerlink" title="1.5 ç‹¬ç«‹è§£é‡Šå™¨"></a>1.5 ç‹¬ç«‹è§£é‡Šå™¨</h2><p>ç‹¬ç«‹è§£é‡Šå™¨æ˜¯ä¸€ä¸ªå¯ä»¥ç›´æ¥ä½¿ç”¨Luaè¯­è¨€çš„å°ç¨‹åºã€‚<br>å¦‚æœæºä»£ç æ–‡ä»¶ç¬¬ä¸€è¡Œä»¥äº•å·ï¼ˆ#ï¼‰å¼€å¤´ï¼Œé‚£ä¹ˆè§£é‡Šå™¨åœ¨åŠ è½½è¯¥æ–‡ä»¶æ—¶ä¼šå¿½ç•¥è¿™ä¸€è¡Œã€‚è¿™ä¸ªç‰¹å¾ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿åœ¨POSIXç³»ç»Ÿä¸­å°†Luaä½œä¸ºä¸€ç§è„šæœ¬è§£é‡Šå™¨æ¥ä½¿ç”¨ã€‚å‡è®¾ç‹¬ç«‹è§£é‡Šå™¨ä½äº&#x2F;usr&#x2F;local&#x2F;binä¸‹ï¼Œå½“ä½¿ç”¨ä¸‹åˆ—è„šæœ¬:<br><code>#!/usr/local/bin/lua</code><br>æˆ–<br><code>#!/usr/bin/env lua</code><br>æ—¶ï¼Œä¸éœ€è¦æ˜¾å¼åœ°è°ƒç”¨Luaè¯­è¨€è§£é‡Šå™¨ä¹Ÿå¯ä»¥ç›´æ¥è¿è¡ŒLuaè„šæœ¬ã€‚<br>luaå‘½ä»¤çš„å®Œæ•´å‚æ•°å¦‚ï¼š<br><code>lua [options] [script [args]]</code><br>å…¶ä¸­ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½æ˜¯å¯é€‰çš„ã€‚å¦‚å‰æ‰€è¿°ï¼Œå½“ä¸ä½¿ç”¨ä»»ä½•å‚æ•°è°ƒç”¨luaæ—¶ï¼Œå°±ä¼šç›´æ¥è¿›å…¥äº¤äº’æ¨¡å¼ã€‚<br> -eå‚æ•°å…è®¸æˆ‘ä»¬ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»£ç ï¼Œä¾‹å¦‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">% lua -e <span class="string">&quot;print(math.sin(12))&quot;</span> </span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œåœ¨POSIXç³»ç»Ÿä¸‹éœ€è¦ä½¿ç”¨åŒå¼•å·ï¼Œä»¥é˜²æ­¢Shellé”™è¯¯ç¬¬è§£ææ‹¬å·ã€‚<br>-lå‚æ•°ç”¨äºåŠ è½½åº“ã€‚æ­£å¦‚ä¹‹å‰æåˆ°çš„é‚£æ ·ï¼Œ-iå‚æ•°ç”¨äºåœ¨è¿è¡Œå®Œå…¶ä»–å‘½ä»¤è¡Œå‚æ•°åè¿›å…¥äº¤äº’æ¨¡å¼ã€‚å› æ­¤ï¼Œä¸‹é¢çš„å‘½ä»¤ä¼šé¦–å…ˆåŠ è½½libåº“ï¼Œç„¶åæ‰§è¡Œx&#x3D;10çš„èµ‹å€¼è¯­å¥ï¼Œå¹¶æœ€ç»ˆè¿›å…¥äº¤äº’æ¨¡å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">% lua -i -llib -e <span class="string">&quot;x = 10&quot;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨äº¤äº’æ¨¡å¼ä¸‹è¾“å…¥è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆè§£é‡Šå™¨ä¼šè¾“å‡ºè¡¨è¾¾å¼æ±‚å€¼åçš„ç»“æœï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">math</span>.<span class="built_in">sin</span>(<span class="number">3</span>)</span><br><span class="line">&gt; a = <span class="number">30</span> </span><br><span class="line">&gt; a 			<span class="comment">--30</span></span><br></pre></td></tr></table></figure>
<p>è¯·è®°ä½ï¼Œè¿™ä¸ªç‰¹å¾åªåœ¨Lua5.3åŠä¹‹åçš„ç‰ˆæœ¬ä¸­æ‰æœ‰æ•ˆã€‚åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå¿…é¡»åœ¨è¡¨è¾¾å¼å‰åŠ ä¸Šä¸€ä¸ªç­‰å·ã€‚å¦‚æœä¸æƒ³è¾“å‡ºç»“æœï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¡Œæœ«åŠ ä¸Šä¸€ä¸ªåˆ†å·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">io</span>.<span class="built_in">flush</span>()	<span class="comment">--true</span></span><br><span class="line">&gt; <span class="built_in">io</span>.<span class="built_in">flush</span>();</span><br></pre></td></tr></table></figure>
<p>åˆ†å·ä½¿å¾—æœ€åä¸€è¡Œåœ¨è¯­æ³•ä¸Šå˜æˆäº†æ— æ•ˆçš„è¡¨è¾¾å¼ï¼Œä½†å¯ä»¥è¢«å½“ä½œæœ‰æ•ˆå‘½ä»¤æ‰§è¡Œã€‚<br>è§£é‡Šå™¨åœ¨å¤„ç†å‚æ•°å‰ï¼Œä¼šæŸ¥æ‰¾åä¸º<code>LUA_INIT_5_3</code>çš„ç¯å¢ƒå˜é‡ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ä¼šå†æŸ¥æ‰¾åä¸º<code>LUA_INIT</code>çš„ç¯å¢ƒå˜é‡ã€‚å¦‚æœè¿™ä¸¤ä¸ªç¯å¢ƒå˜é‡ä¸­çš„ä»»æ„ä¸€ä¸ªå­˜åœ¨ï¼Œå¹¶ä¸”å…¶å†…å®¹ä¸º<code>@filename</code>ï¼Œé‚£ä¹ˆè§£é‡Šå™¨å°±ä¼šè¿è¡Œç›¸åº”çš„æ–‡ä»¶ï¼›å¦‚æœè¿™ä¸¤ä¸ªç¯å¢ƒå˜é‡å­˜åœ¨ï¼Œä½†æ˜¯ä¸ä»¥@å¼€å¤´ï¼Œé‚£ä¹ˆè§£é‡Šå™¨å°±ä¼šè®¤ä¸ºå…¶åŒ…å«Luaä»£ç ï¼Œå¹¶ä¼šå¯¹å…¶è¿›è¡Œè§£é‡Šæ‰§è¡Œã€‚ç”±äºå¯ä»¥é€šè¿‡ä¸Šé¢çš„æ–¹æ³•å®Œæ•´åœ°é…ç½®Luaï¼Œå› è€ŒLUA_INITä½¿å¾—æˆ‘ä»¬å¯ä»¥çµæ´»åœ°é…ç½®ç‹¬ç«‹è§£é‡Šå™¨ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é¢„å…ˆåŠ è½½ç¨‹åºåŒ…ã€ä¿®æ”¹è·¯å¾„ã€å®šä¹‰è‡ªå®šä¹‰å‡½æ•°ã€å¯¹å‡½æ•°è¿›è¡Œé‡å‘½åæˆ–åˆ é™¤å‡½æ•°ï¼Œç­‰ç­‰ã€‚<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡é¢„å…ˆå®šä¹‰çš„å…¨å±€å˜é‡argæ¥è·å–è§£é‡Šå™¨ä¼ å…¥çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå½“æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ—¶ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">% lua script a b c</span><br></pre></td></tr></table></figure>
<p>ç¼–è¾‘å™¨åœ¨è¿è¡Œä»£ç å‰æˆ–åˆ›å»ºä¸€ä¸ªåä¸ºargçš„è¡¨ï¼Œå…¶ä¸­å­˜å‚¨äº†æ‰€æœ‰çš„å‘½ä»¤è¡Œå‚æ•°ã€‚ç´¢å¼•0ä¸­ä¿å­˜çš„å†…å®¹ä¸ºè„šæœ¬åï¼Œç´¢å¼•1ä¸­ä¿å­˜çš„å†…å®¹ä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ï¼›è€Œåœ¨è„šæœ¬ä¹‹å‰çš„æ‰€æœ‰é€‰é¡¹åˆ™ä½äºè´Ÿæ•°ç´¢å¼•ä¸Šï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">% lua -e <span class="string">&quot;sin = math.sin&quot;</span> script a b</span><br></pre></td></tr></table></figure>
<p>è§£é‡Šå™¨æŒ‰ç…§å¦‚ä¸‹çš„æ–¹å¼è·å–å‚æ•°:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">arg</span>[<span class="number">-3</span>] = <span class="string">&quot;lua&quot;</span></span><br><span class="line"><span class="built_in">arg</span>[<span class="number">-2</span>] = <span class="string">&quot;-e&quot;</span></span><br><span class="line"><span class="built_in">arg</span>[<span class="number">-1</span>] = <span class="string">&quot;sin = math.sin&quot;</span></span><br><span class="line"><span class="built_in">arg</span>[<span class="number">0</span>]  = <span class="string">&quot;script&quot;</span></span><br><span class="line"><span class="built_in">arg</span>[<span class="number">1</span>]  = <span class="string">&quot;a&quot;</span></span><br><span class="line"><span class="built_in">arg</span>[<span class="number">2</span>]  = <span class="string">&quot;b&quot;</span></span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè„šæœ¬åªä¼šç”¨åˆ°ç´¢å¼•ä¸ºè¯ä¹¦çš„å‚æ•°ã€‚<br>Luaè¯­è¨€ä¹Ÿæ”¯æŒå¯å˜é•¿å‚æ•°ï¼Œå¯ä»¥é€šè¿‡å¯å˜é•¿å‚æ•°è¡¨è¾¾å¼æ¥è·å–ã€‚åœ¨è„šæœ¬æ–‡ä»¶ä¸­ï¼Œè¡¨è¾¾å¼â€¦ï¼ˆ3ä¸ªç‚¹ï¼‰è¡¨ç¤ºä¼ é€’ç»™è„šæœ¬çš„æ‰€æœ‰å‚æ•°ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaå±€éƒ¨å˜é‡å’Œä»£ç å—</title>
    <url>/3083.html</url>
    <content><![CDATA[<p>Luaè¯­è¨€ä¸­çš„å˜é‡åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯å…¨å±€å˜é‡ï¼Œæ‰€æœ‰çš„å±€éƒ¨å˜é‡åœ¨ä½¿ç”¨å‰å¿…é¡»å£°æ˜ã€‚ä¸å…¨å±€å˜é‡ä¸åŒï¼Œå±€éƒ¨å˜é‡çš„ç”Ÿæ•ˆèŒƒå›´ä»…é™äºå£°æ˜å®ƒçš„ä»£ç å—ã€‚ä¸€ä¸ªä»£ç å—æ˜¯ä¸€ä¸ªæ§åˆ¶ç»“æ„çš„ä¸»ä½“ï¼Œæˆ–æ˜¯ä¸€ä¸ªå‡½æ•°çš„ä¸»ä½“ï¼Œæˆ–æ˜¯ä¸€ä¸ªä»£ç æ®µï¼š</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x = <span class="number">10</span> </span><br><span class="line"><span class="keyword">local</span> i = <span class="number">1</span>		<span class="comment">-- å¯¹äºä»£ç æ®µæ¥è¯´æ˜¯å±€éƒ¨çš„</span></span><br><span class="line"><span class="keyword">while</span> i &lt;= x <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">local</span> x = i * <span class="number">2</span>	<span class="comment">--å¯¹äºå¾ªç¯æ¥è¯´æ˜¯å±€éƒ¨çš„</span></span><br><span class="line">	<span class="built_in">print</span>(x)		<span class="comment">-- 2,4,6...</span></span><br><span class="line">	i = i + <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">if</span> i &gt; <span class="number">20</span> <span class="keyword">then</span></span><br><span class="line">	<span class="keyword">local</span> x 			<span class="comment">-- å¯¹äº&quot;zhen&quot;æ¥è¯´æ˜¯å±€éƒ¨çš„</span></span><br><span class="line">	x = <span class="number">20</span></span><br><span class="line">	<span class="built_in">print</span>(x + <span class="number">2</span>)		<span class="comment">-- å¦‚æœæµ‹è¯•æˆåŠŸä¼šè¾“å‡º22</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">print</span>(x)		<span class="comment">-- 10(å…¨å±€çš„)</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œä¸Šè¿°ç¤ºä¾‹åœ¨äº¤äº’æ¨¡å¼ä¸­ä¸èƒ½æ­£å¸¸è¿è¡Œã€‚å› ä¸ºåœ¨äº¤äº’æ¨¡å¼ä¸­ï¼Œæ¯ä¸€è¡Œä»£ç å°±æ˜¯ä¸€ä¸ªä»£ç æ®µã€‚ä¸€æ—¦è¾“å…¥ç¤ºä¾‹çš„ç¬¬äºŒè¡Œï¼ŒLuaè¯­è¨€è§£é‡Šå™¨å°±ä¼šç›´æ¥è¿è¡Œå®ƒå¹¶åœ¨ä¸‹ä¸€è¡Œå¼€å§‹ä¸€ä¸ªæ–°çš„ä»£ç æ®µã€‚è¿™æ ·ï¼Œå±€éƒ¨çš„å£°æ˜å°±è¶…å‡ºäº†åŸæ¥çš„ä½œç”¨èŒƒå›´ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹å¼æ˜¯æ˜¾ç¤ºåœ°å£°æ˜æ•´ä¸ªä»£ç å—ï¼Œå³å°†å®ƒæ”¾å…¥ä¸€å¯¹do-endä¸­ã€‚ä¸€æ—¦è¾“å…¥äº†doï¼Œå‘½ä»¤å°±åªä¼šåœ¨é‡åˆ°åŒ¹é…çš„endæ—¶æ‰ç»“æŸï¼Œè¿™æ ·Luaè¯­è¨€è§£é‡Šå™¨å°±ä¸ä¼šå•ç‹¬æ‰§è¡Œæ¯ä¸€è¡Œçš„å‘½ä»¤ã€‚<br>å½“éœ€è¦æ›´å¥½åœ°æ§åˆ¶æŸäº›å±€éƒ¨å˜é‡çš„ç”Ÿæ•ˆèŒƒå›´æ—¶ï¼Œdoç¨‹åºå—ä¹ŸåŒæ ·æœ‰ç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> x1 , x2</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="keyword">local</span> a2 = <span class="number">2</span> * a2</span><br><span class="line">	<span class="keyword">local</span> d = (b^<span class="number">2</span> - <span class="number">4</span>*a*c)^(<span class="number">1</span>/<span class="number">2</span>)</span><br><span class="line">	x1 = (-b + d)/a2</span><br><span class="line">	x2 = (-b - d)/a2</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(x1,x2)</span><br></pre></td></tr></table></figure>
<p>å°½å¯èƒ½åœ°ä½¿ç”¨å±€éƒ¨å˜é‡æ˜¯ä¸€ç§è‰¯å¥½çš„ç¼–ç¨‹é£æ ¼ã€‚é¦–å…ˆï¼Œå±€éƒ¨å˜é‡å¯ä»¥é¿å…ç”±äºä¸å¿…è¦çš„å‘½åè€Œé€ æˆå…¨å±€å˜é‡çš„æ··ä¹±ï¼›å…¶æ¬¡ï¼Œå±€éƒ¨å˜é‡è¿˜èƒ½é¿å…åŒä¸€ç¨‹åºä¸­ä¸åŒä»£ç éƒ¨åˆ†ä¸­çš„å‘½åå†²çªï¼›å†æ¬¡ï¼Œè®¿é—®å±€éƒ¨å˜é‡æ¯”è®¿é—®å…¨å±€å˜é‡æ›´å¿«ï¼›æœ€åï¼Œå±€éƒ¨å˜é‡ä¼šéšç€å…¶ä½œç”¨åŸŸçš„ç»“æŸå„¿æ¶ˆå¤±ï¼Œä»è€Œä½¿å¾—åƒåœ¾æ”¶é›†å™¨èƒ½å¤Ÿå°†å…¶é‡Šæ”¾ã€‚<br>é‰´äºå±€éƒ¨å˜é‡ä¼˜äºå…¨å±€å˜é‡ï¼Œæœ‰äº›äººå°±è®¤ä¸ºLuaè¯­è¨€åº”è¯¥æŠŠå˜é‡é»˜è®¤è§†ä¸ºå±€éƒ¨çš„ã€‚ç„¶è€Œï¼ŒæŠŠå˜é‡é»˜è®¤è§†ä¸ºå±€éƒ¨çš„ä¹Ÿæœ‰ä¸€äº›åˆ—çš„é—®é¢˜ã€‚ä¸€ä¸ªæ›´å¥½çš„è§£å†³åŠæ³•å¹¶ä¸æ˜¯æŠŠå˜é‡é»˜è®¤è§†ä¸ºå±€éƒ¨å˜é‡ï¼Œè€Œæ˜¯åœ¨ä½¿ç”¨å˜é‡å‰å¿…é¡»å…ˆå£°æ˜ã€‚Luaè¯­è¨€çš„å‘å‹ç‰ˆä¸­æœ‰ä¸€ä¸ªç”¨äºå…¨å±€å˜é‡æ£€æŸ¥çš„æ¨¡å—strict.luaï¼Œå¦‚æœè§†å›¾åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å¯¹ä¸å­˜åœ¨çš„å…¨å±€å˜é‡èµ‹å€¼æˆ–è€…ä½¿ç”¨ä¸å­˜åœ¨çš„å…¨å±€å˜é‡ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br>å±€éƒ¨å˜é‡çš„å£°æ˜å¯ä»¥åŒ…å«åˆå§‹å€¼ï¼Œå…¶èµ‹å€¼è§„åˆ™ä¸å¸¸è§çš„å¤šé‡èµ‹å€¼ä¸€æ ·ï¼šå¤šä½™çš„å€¼è¢«ä¸¢å¼ƒï¼Œå¤šä½™çš„å˜é‡è¢«èµ‹å€¼ä¸ºnilã€‚å¦‚æœä¸€ä¸ªå£°æ˜ä¸­æ²¡æœ‰èµ‹å€¼ï¼Œåˆ™å˜é‡ä¼šè¢«åˆå§‹åŒ–ä¸ºnilï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> a , b = <span class="number">1</span> , <span class="number">10</span></span><br><span class="line"><span class="keyword">if</span> a &lt; b <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">print</span>(a)			<span class="comment">-- 1</span></span><br><span class="line">	<span class="keyword">local</span> a 			<span class="comment">-- &#x27;= nil&#x27; æ˜¯éšå¼çš„</span></span><br><span class="line">	<span class="built_in">print</span>(a)			<span class="comment">-- nil</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(a,b)				<span class="comment">-- 1, 10</span></span><br></pre></td></tr></table></figure>
<p>Luaè¯­è¨€ä¸­æœ‰ä¸€ç§å¸¸è§çš„ç”¨æ³•ï¼š<br><code>local foo = foo</code><br>è¿™æ®µä»£ç å£°æ˜äº†ä¸€ä¸ªå±€éƒ¨å˜é‡fooï¼Œç„¶åç”¨å…¨å±€å˜é‡fooå¯¹å…¶èµ‹å€¼ã€‚è¿™ä¸ªç”¨æ³•åœ¨éœ€è¦æé«˜å¯¹fooçš„è®¿é—®é€Ÿåº¦æ—¶å¾ˆæœ‰ç”¨ã€‚å½“å…¶ä»–å‡½æ•°æ”¹å˜äº†å…¨å±€å˜é‡fooçš„å€¼ï¼Œè€Œä»£ç æ®µåˆéœ€è¦ä¿ç•™fooçš„åŸå§‹å€¼æ—¶ï¼Œè¿™ä¸ªç”¨æ³•ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨è¿›è¡Œè¿è¡Œæ—¶åŠ¨æ€æ›¿æ¢æ—¶ã€‚å³ä½¿å…¶ä»–ä»£ç æŠŠprintåŠ¨æ€æ›¿æ¢æˆäº†è€Œå…¶ä»–å‡½æ•°ï¼Œåœ¨<code>local print = print</code>è¯­å¥ä¹‹å‰çš„æ‰€æœ‰ä»£ç ä½¿ç”¨çš„è¿˜éƒ½æ˜¯åŸå…ˆçš„printå‡½æ•°ã€‚<br>æœ‰äº›äººè®¤ä¸ºåœ¨ä»£ç å—çš„ä¸­é—´ä½ç½®å£°æ˜å˜é‡æ—¶ä¸€ä¸ªä¸å¥½çš„ä¹ æƒ¯ï¼Œå®é™…ä¸Šæ°æ°ç›¸åï¼Œæˆ‘ä»¬å¾ˆå°‘ä¼šåœ¨ä¸èµ‹åˆå§‹å€¼çš„æƒ…å†µä¸‹å£°æ˜å˜é‡ï¼Œåœ¨éœ€è¦æ—¶æ‰å£°æ˜å˜é‡å¯ä»¥é¿å…æ¼æ‰åˆå§‹åŒ–è¿™ä¸ªå˜é‡ã€‚æ­¤å¤–ï¼Œé€šè¿‡ç¼©å°å˜é‡çš„ä½œç”¨åŸŸè¿˜æœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè¾“å…¥è¾“å‡º</title>
    <url>/55910.html</url>
    <content><![CDATA[<p>ç”±äºLuaè¯­è¨€å¼ºè°ƒå¯ç§»æ¤æ€§å’ŒåµŒå…¥æ€§ï¼Œæ‰€ä»¥Luaè¯­è¨€æœ¬èº«å¹¶æ²¡æœ‰æä¾›å¤ªå¤šä¸å¤–éƒ¨äº¤äº’çš„æœºåˆ¶ã€‚åœ¨çœŸå®çš„Luaç¨‹åºä¸­ï¼Œä»å›¾å½¢ã€æ•°æ®åº“åˆ°ç½‘ç»œçš„ç½‘ç»œçš„è®¿é—®ç­‰å¤§å¤šæ•°I&#x2F;Oæ“ä½œï¼Œè¦ä¹ˆæ¸¸å®¿ä¸»ç¨‹åºå®ç°ï¼Œè¦ä¹ˆé€šè¿‡ä¸åŒ…æ‹¬åœ¨å‘è¡Œç‰ˆä¸­çš„å¤–éƒ¨åº“å®ç°ã€‚å•å°±Luaè¯­è¨€è€Œè¨€ï¼Œåªæä¾›IOS Cè¯­è¨€æ ‡å‡†æ”¯æŒçš„åŠŸèƒ½ï¼Œå³åŸºæœ¬çš„æ–‡ä»¶æ“ä½œç­‰ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="ç®€å•I-Oæ¨¡å‹"><a href="#ç®€å•I-Oæ¨¡å‹" class="headerlink" title="ç®€å•I&#x2F;Oæ¨¡å‹"></a>ç®€å•I&#x2F;Oæ¨¡å‹</h2><p>å¯¹äºæ–‡ä»¶æ“ä½œæ¥è¯´ï¼ŒI&#x2F;Oåº“æä¾›äº†ä¸¤ç§ä¸åŒçš„æ¨¡å‹ã€‚ç®€å•æ¨¡å‹è™šæ‹Ÿäº†ä¸€ä¸ªå½“å‰è¾“å…¥æµå’Œä¸€ä¸ªå½“å‰è¾“å‡ºæµï¼Œå…¶I&#x2F;Oæ“ä½œæ—¶é€šè¿‡è¿™äº›æµå®ç°çš„ã€‚I&#x2F;Oåº“æŠŠå½“å‰è¾“å…¥æµåˆå§‹åŒ–ä¸ºè¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ï¼Œå°†å½“å‰è¾“å‡ºæµåˆå§‹åŒ–ä¸ºè¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºã€‚å› æ­¤ï¼Œå½“æ‰§è¡Œç±»ä¼¼äºio.read()è¿™æ ·çš„è¯­å¥æ—¶ï¼Œå°±å¯ä»¥ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–ä¸€è¡Œã€‚<br>å‡½æ•°io.inputå¯ä»¥ç”¨äºæ”¹å˜å½“å‰çš„è¾“å…¥è¾“å‡ºæµã€‚è°ƒç”¨io.input(file-name)ä¼šä»¥åªè¯»æ¨¡å¼æ‰“å¼€æŒ‡å®šæ–‡ä»¶ï¼Œå¹¶å°†æ–‡ä»¶è®¾ç½®ä¸ºå½“å‰è¾“å…¥æµã€‚ä¹‹åï¼Œæ‰€æœ‰çš„è¾“å…¥éƒ½å°†æ¥è‡ªè¯¥æ–‡ä»¶ï¼Œé™¤éå†æ¬¡è°ƒç”¨io.inputã€‚å¯¹äºè¾“å‡ºæµè€Œè¨€ï¼Œå‡½æ•°io.outputçš„é€»è¾‘ä¸ä¹‹ç±»ä¼¼ã€‚å¦‚æœå‡ºç°é”™è¯¯ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚å¦‚æœæƒ³ç›´æ¥å¤„ç†è¿™äº›å¼‚å¸¸ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å®Œæ•´I&#x2F;Oæ¨¡å‹ã€‚<br>ç”±äºå‡½æ•°writeæ¯”å‡½æ•°readç®€å•ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹å‡½æ•°writeã€‚å‡½æ•°io.writeå¯ä»¥è¯»å–ä»»æ„æ•°é‡çš„å­—ç¬¦ä¸²å¹¶å°†å…¶å†™å…¥å½“å‰è¾“å…¥æµã€‚ç”±äºè°ƒç”¨è¯¥å‡½æ•°æ—¶å¯ä»¥ä½¿ç”¨å¤šä¸ªå‚æ•°ï¼Œå› æ­¤åº”è¯¥é¿å…ä½¿ç”¨io.write(a..b..c)ï¼Œåº”è¯¥è°ƒç”¨io.write(a,b,c)ï¼Œåè€…å¯ä»¥ç”¨æ›´å°‘çš„èµ„æºè¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œå¹¶ä¸”å¯ä»¥é¿å…æ›´å¤šçš„è¿æ¥åŠ¨ä½œã€‚<br>ä½œä¸ºåŸåˆ™ï¼Œåº”è¯¥åªåœ¨â€œç”¨åå³å¼ƒâ€çš„ä»£ç æˆ–è°ƒè¯•ä»£ç ä¸­ä½¿ç”¨å‡½æ•°printï¼›å½“éœ€è¦å®Œå…¨æ§åˆ¶è¾“å‡ºæ—¶ï¼Œåº”è¯¥ä½¿ç”¨å‡½æ•°io.writeã€‚ä¸å‡½æ•°printä¸åŒï¼Œå‡½æ•°io.wirteä¸ä¼šåœ¨æœ€ç»ˆçš„è¾“å‡ºç»“æœä¸­æ·»åŠ è¯¸å¦‚åˆ¶è¡¨ç¬¦æˆ–æ¢è¡Œç¬¦è¿™æ ·çš„é¢å¤–å†…å®¹ã€‚æ­¤å¤–ï¼Œå‡½æ•°io.writeå…è®¸å¯¹è¾“å‡ºè¿›è¡Œé‡å®šå‘ï¼Œè€Œå‡½æ•°printåªèƒ½ä½¿ç”¨æ ‡å‡†è¾“å‡ºã€‚æœ€åï¼Œå‡½æ•°printå¯ä»¥è‡ªåŠ¨ä¸ºå…¶å‚æ•°è°ƒç”¨tostringï¼Œè¿™ä¸€ç‚¹å¯¹äºè°ƒè¯•è€Œè¨€éå¸¸ä¾¿åˆ©ï¼Œä½†è¿™ä¹Ÿå®¹æ˜“å¯¼è‡´ä¸€äº›è¯¡å¼‚çš„Bugã€‚<br>å‡½æ•°io.writeåœ¨å°†æ•°å€¼è½¬ä¸ºå­—ç¬¦ä¸²æ—¶éµå¾ªä¸€èˆ¬çš„è½¬æ¢è§„åˆ™ï¼›å¦‚æœæƒ³è¦å®Œå…¨åœ°æ§åˆ¶è¿™ç§è½¬æ¢ï¼Œåˆ™åº”è¯¥ä½¿ç”¨å‡½æ•°string.format:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;sin(3) = &quot;</span>,<span class="built_in">math</span>.<span class="built_in">sin</span>(<span class="number">3</span>),<span class="string">&quot;\n&quot;</span>)		<span class="comment">-- sin(3) = 0.14112000805987</span></span><br><span class="line">&gt; <span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;sin(3) = %0.4f\n&quot;</span>,<span class="built_in">math</span>.<span class="built_in">sin</span>(<span class="number">3</span>))) 			<span class="comment">-- sin(3) = 0.1411</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°io.readå¯ä»¥ä»å½“å‰è¾“å…¥æµä¸­è¯»å–å­—ç¬¦ä¸²ï¼Œå…¶å‚æ•°å†³å®šäº†è¦è¯»å–çš„æ•°æ®ï¼š</p>
<hr>
<p>â€œaâ€				è¯»å–æ•´ä¸ªæ–‡ä»¶<br>â€œlâ€					è¯»å–ä¸‹ä¸€è¡Œï¼ˆä¸¢å¼ƒæ¢è¡Œç¬¦ï¼‰<br>â€œLâ€				è¯»å–ä¸‹ä¸€è¡Œï¼ˆä¿ç•™æ¢è¡Œç¬¦ï¼‰<br>â€œnâ€				è¯»å–ä¸€ä¸ªæ•°å€¼<br>num				ä»¥å­—ç¬¦ä¸²è¯»å–numä¸ªå­—ç¬¦</p>
<hr>
<p>è°ƒç”¨io.write(â€œaâ€)å¯ä»¥ä»å½“å‰ä½ç½®å¼€å§‹è¯»å–è¾“å…¥æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ã€‚å¦‚æœå½“å‰ä½ç½®å¤„äºæ–‡ä»¶çš„æœ«å°¾æˆ–æ–‡ä»¶ä¸ºç©ºï¼Œé‚£ä¹ˆè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚<br>å› ä¸ºLuaè¯­è¨€å¯ä»¥é«˜æ•ˆåœ°å¤„ç†é•¿å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥åœ¨Luaè¯­è¨€ç¼–å†™è¿‡æ»¤å™¨çš„ä¸€ç§ç®€å•æŠ€å·§å°±æ˜¯å°†æ•´ä¸ªæ–‡ä»¶è¯»å–åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œç„¶åå¯¹å­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ï¼Œæœ€åè¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = <span class="built_in">io</span>.<span class="built_in">read</span>(<span class="string">&quot;a&quot;</span>)			<span class="comment">-- è¯»å–æ•´ä¸ªæ–‡ä»¶</span></span><br><span class="line">t = <span class="built_in">string</span>.<span class="built_in">gsub</span>(t,<span class="string">&quot;bad&quot;</span>,<span class="string">&quot;good&quot;</span>)			<span class="comment">-- è¿›è¡Œå¤„ç†</span></span><br><span class="line"><span class="built_in">io</span>.wirte(t)					<span class="comment">-- è¾“å‡ºç»“æœ</span></span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¸€ä¸ªæ›´åŠ å…·ä½“çš„ä¾‹å­ï¼Œä¸€ä¸‹æ˜¯ä¸€æ®µå°†æŸä¸ªäººé—´çš„å†…å®¹ä½¿ç”¨MIMEå¯æ‰“å°å­—ç¬¦ä¸²å¼•ç”¨ç¼–ç è¿›è¡Œç¼–ç çš„ä»£ç ã€‚è¿™ç§ç¼–ç æ–¹å¼å°†æ‰€æœ‰éASCIIå­—ç¬¦ç¼–ç ä¸º &#x3D;xxï¼Œå…¶ä¸­xxæ˜¯è¿™ä¸ªå­—ç¬¦çš„åå…­è¿›åˆ¶ã€‚ä¸ºä¿è¯ç¼–ç çš„ä¸€è‡´æ€§ï¼Œç­‰å·ä¹Ÿä¼šè¢«ç¼–ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = <span class="built_in">io</span>.<span class="built_in">read</span>(<span class="string">&quot;all&quot;</span>)</span><br><span class="line">t = <span class="built_in">string</span>.<span class="built_in">gsub</span>(t,<span class="string">&quot;[\128 - \255 = ]&quot;</span>, <span class="function"><span class="keyword">function</span><span class="params">(c)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;=%02X&quot;</span>,<span class="built_in">string</span>.<span class="built_in">byte</span>(c))</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">write</span>(t)</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°string.gsubä¼šåŒ¹é…æ‰€æœ‰çš„ç­‰å·åŠéASCIIå­—ç¬¦ï¼ˆä»128åˆ°255ï¼‰ï¼Œå¹¶è°ƒç”¨æŒ‡å®šçš„å‡½æ•°å®Œæˆæ›¿æ¢ã€‚<br>è°ƒç”¨io.read(â€œlâ€)ä¼šè¿”å›å½“å‰è¾“å…¥æµçš„ä¸‹ä¸€è¡Œï¼Œä¸åŒ…æ‹¬æ¢è¡Œç¬¦åœ¨å†…ï¼›è°ƒç”¨io.read(â€œLâ€)ä¸ä¹‹ç±»ä¼¼ï¼Œä½†ä¼šä¿ç•™æ¢è¡Œç¬¦ã€‚å½“è¾¾åˆ°æ–‡ä»¶æœ«å°¾æ—¶ï¼Œç”±äºå·²ç»æ²¡æœ‰å†…å®¹å¯ä»¥è¿”å›ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›nilã€‚é€‰é¡¹â€lâ€æ˜¯å‡½æ•°readçš„é»˜è®¤å‚æ•°ã€‚æˆ‘é€šå¸¸åªåœ¨é€è¡Œå¤„ç†æ•°æ®çš„ç®—æ³•ä½¿ç”¨è¯¥å‚æ•°ï¼Œå…¶ä»–æƒ…å†µåˆ™æ›´å€¾å‘äºä½¿ç”¨é€‰é¡¹â€aâ€ä¸€æ¬¡æ€§åœ°è¯»å–æ•´ä¸ªæ–‡ä»¶ï¼Œæˆ–è€…åƒåç»­ä»‹ç»çš„æŒ‰å—è¯»å–ã€‚<br>ä½œä¸ºé¢å‘è¡Œçš„è¾“å…¥çš„ä¸€ä¸ªç®€å•ä¾‹å­ï¼Œä»¥ä¸‹çš„ç¨‹åºä¼šåœ¨å°†å½“å‰è¾“å…¥å¤åˆ¶åˆ°å½“å‰è¾“å‡ºä¸­çš„åŒæ—¶å¯¹æ¯è¡Œè¿›è¡Œç¼–ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> count = <span class="number">1</span> , <span class="built_in">math</span>.<span class="built_in">huge</span> <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">local</span> line = <span class="built_in">io</span>.<span class="built_in">read</span>(<span class="string">&quot;L&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> line == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%6d &quot;</span>,count),line)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œå¦‚æœè¦é€è¡Œè¿­ä»£ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆä½¿ç”¨io.linesè¿­ä»£å™¨ä¼šæ›´ç®€å•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> count = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">	count = count + <span class="number">1</span></span><br><span class="line">	<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%6d &quot;</span>,count), line , <span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ªé¢å‘è¡Œçš„è¾“å…¥çš„ä¾‹å­å‚è€ƒä¸‹ä¾‹ï¼Œå…¶ä¸­ç»™å‡ºäº†ä¸€ä¸ªå¯¹æ–‡ä»¶ä¸­çš„è¿›è¡Œæ’åºçš„å®Œæ•´ç¨‹åºã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">lines</span> = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">lines</span>[#<span class="built_in">lines</span> + <span class="number">1</span>] = line</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">sort</span>(<span class="built_in">lines</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, l <span class="keyword">in</span> <span class="built_in">ipairs</span>(<span class="built_in">lines</span>) <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">io</span>.<span class="built_in">write</span>(l,<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨io.read(â€œnâ€)ä¼šä»å½“å‰è¾“å…¥æµä¸­è¯»å–ä¸€ä¸ªæ•°å€¼ï¼Œè¿™ä¹Ÿæ˜¯å‡½æ•°readè¿”å›å€¼ä¸ºæ•°å€¼è€Œéå­—ç¬¦ä¸²çš„å”¯ä¸€æƒ…å†µã€‚å¦‚æœåœ¨è·³è¿‡äº†ç©ºæ ¼åï¼Œå‡½æ•°io.readä»ç„¶ä¸èƒ½ä»å½“å‰ä½ç½®è¯»å–åˆ°æ•°å€¼ï¼Œåˆ™è¿”å›nilã€‚<br>é™¤äº†ä¸Šè¿°è¿™äº›åŸºæœ¬çš„è¯»å–æ¨¡å¼å¤–ï¼Œåœ¨è°ƒç”¨å‡½æ•°readæ—¶è¿˜å¯ä»¥ç”¨ä¸€ä¸ªæ•°å­—nä½œä¸ºå…¶å‚æ•°ï¼šåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°readä¼šä»è¾“å…¥æµä¸­è¯»å–nä¸ªå­—ç¬¦ã€‚å¦‚æœæ— æ³•è¯»å–åˆ°ä»»ä½•å­—ç¬¦åˆ™è¿”å›nilï¼›å¦åˆ™ï¼Œåˆ™è¿”å›ä¸€ä¸ªç”±æµä¸­æœ€å¤šnä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚ä½œä¸ºè¿™ç§è¯»å–æ¨¡å¼çš„ç¤ºä¾‹ï¼Œä»¥ä¸‹çš„ä»£ç å±•ç¤ºäº†å°†æ–‡ä»¶ä»stdinå¤åˆ¶åˆ°stdoutçš„é«˜æ•ˆæ–¹æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">local</span> block = <span class="built_in">io</span>.<span class="built_in">read</span>(<span class="number">2</span>^<span class="number">13</span>)</span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">not</span> block <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">	<span class="built_in">io</span>.<span class="built_in">write</span>(block)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>io.read(0)æ˜¯ä¸€ä¸ªç‰¹ä¾‹ï¼Œå®ƒå¸¸ç”¨äºæµ‹è¯•æ˜¯å¦åˆ°è¾¾äº†æ–‡ä»¶æœ«å°¾ã€‚å¦‚æœä»ç„¶æœ‰æ•°æ®å¯ä¾›è¯»å–ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼›å¦åˆ™ï¼Œåˆ™è¿”å›nilã€‚<br>è°ƒç”¨å‡½æ•°readæ—¶å¯ä»¥æŒ‡å®šå¤šä¸ªé€‰é¡¹ï¼Œå‡½æ•°ä¼šæ ¹æ®æ¯ä¸ªå‚æ•°è¿”å›ç›¸åº”çš„ç»“æœã€‚å‡è®¾æœ‰ä¸€ä¸ªæ¯è¡Œç”±3ä¸ªæ•°å­—ç»„æˆçš„æ–‡ä»¶ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="number">6.0</span> <span class="number">-3.23</span> <span class="number">15e12</span></span><br><span class="line"><span class="number">4.3</span>	<span class="number">234</span>	  <span class="number">1000001</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³æ‰“å°æ¯ä¸€è¡Œçš„æœ€å¤§å€¼ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡è°ƒç”¨å‡½æ•°readæ¥ä¸€æ¬¡æ€§åœ°åŒæ—¶è¯»å–æ¯è¡Œä¸­çš„3ä¸ªæ•°å­—ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span> </span><br><span class="line">	<span class="keyword">local</span> n1,n2,n3 = <span class="built_in">io</span>.<span class="built_in">read</span>(<span class="string">&quot;n&quot;</span>,<span class="string">&quot;n&quot;</span>,<span class="string">&quot;n&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">not</span> n1 <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">	<span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">max</span>(n1,n2,n3))</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="å®Œæ•´I-Oæ¨¡å‹"><a href="#å®Œæ•´I-Oæ¨¡å‹" class="headerlink" title="å®Œæ•´I&#x2F;Oæ¨¡å‹"></a>å®Œæ•´I&#x2F;Oæ¨¡å‹</h2><p>ç®€å•I&#x2F;Oæ¨¡å‹å¯¹ç®€å•çš„éœ€æ±‚è€Œè¨€è¿˜ç®—é€‚ç”¨ï¼Œä½†å¯¹äºè¯¸å¦‚åŒæ—¶è¯»å†™å¤šä¸ªæ–‡ä»¶ç­‰æ›´é«˜çº§çš„æ–‡ä»¶æ“ä½œæ¥è¯´å°±ä¸å¤Ÿäº†ã€‚å¯¹äºè¿™äº›æ–‡ä»¶æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å®Œæ•´I&#x2F;Oæ¨¡å‹ã€‚<br>å¯ä»¥ä½¿ç”¨å‡½æ•°io.openæ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥å‡½æ•°ä»¿é€ Cè¯­è¨€ä¸­çš„å‡½æ•°fopenã€‚è¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ä¸€ä¸ªå‚æ•°æ˜¯å¾…æ‰“å¼€æ–‡ä»¶çš„æ–‡ä»¶åï¼Œå¦ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ¨¡å¼å­—ç¬¦ä¸²ã€‚æ¨¡å¼å­—ç¬¦ä¸²åŒ…æ‹¬è¡¨ç¤ºåªè¯»çš„rã€è¡¨ç¤ºåªå†™çš„wã€è¡¨ç¤ºè¿½åŠ çš„aï¼Œä»¥åŠå¦å¤–ä¸€ä¸ªå¯é€‰çš„è¡¨ç¤ºæ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶çš„bã€‚å‡½æ•°io.openè¿”å›å¯¹åº”æ–‡ä»¶çš„æµã€‚å½“å‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›nilçš„åŒæ—¶è¿”å›ä¸€æ¡é”™è¯¯ä¿¡æ¯åŠä¸€ä¸ªç³»ç»Ÿç›¸å…³çš„é”™è¯¯ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">&quot;non-existent-file&quot;</span>,<span class="string">&quot;r&quot;</span>))		<span class="comment">-- nil  non-existent-file:No such file file or directory 2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">&quot;/etc/passwd&quot;</span>,<span class="string">&quot;w&quot;</span>))			<span class="comment">-- nil  /etc/passwd:Permission denied 13</span></span><br></pre></td></tr></table></figure>
<p>æ£€æŸ¥é”™è¯¯çš„ä¸€ç§å…¸å‹æ–¹æ³•æ˜¯ä½¿ç”¨å‡½æ•°assert:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">io</span>.<span class="built_in">open</span>(filename,mode))</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‡½æ•°io.openæ‰§è¡Œå¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ä¼šä½œä¸ºå‡½æ•°assertçš„ç¬¬äºŒä¸ªå‚æ•°è¢«ä¼ å…¥ï¼Œä¹‹åå‡½æ•°assertä¼šå°†é”™è¯¯ä¿¡æ¯å±•ç¤ºå‡ºæ¥ã€‚<br>åœ¨æ‰“å¼€æ–‡ä»¶åï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•readå’Œwriteä»æµä¸­è¯»å–å’Œå‘æµä¸­å†™å…¥ã€‚å®ƒä»¬ä¸å‡½æ•°readå’Œwriteç±»ä¼¼ï¼Œä½†éœ€è¦ä½¿ç”¨å†’å·è¿ç®—ç¬¦å°†å®ƒä»¬å½“åšæµå¯¹è±¡çš„æ–¹æ³•æ¥è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¹¶è¯»å–å…¶ä¸­å¤šæœ‰å†…å®¹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">io</span>.<span class="built_in">open</span>(filename,<span class="string">&quot;r&quot;</span>))</span><br><span class="line"><span class="keyword">local</span> t = f:<span class="built_in">read</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line">f:<span class="built_in">close</span>()</span><br></pre></td></tr></table></figure>
<p>I&#x2F;Oåº“æä¾›äº†ä¸‰ä¸ªé¢„å®šä¹‰çš„Cè¯­è¨€æµçš„å¥æŸ„ï¼šio.stdinã€io.stdoutå’Œio.stderrã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç å°†ä¿¡æ¯ç›´æ¥å†™åˆ°æ ‡å‡†é”™è¯¯æµä¸­ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">io</span>.<span class="built_in">stderr</span>:<span class="built_in">write</span>(message)</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°io.inputå’Œio.outputå…è®¸æ··ç”¨å®Œæ•´I&#x2F;Oæ¨¡å‹å’Œç®€å•I&#x2F;Oæ¨¡å‹ã€‚è°ƒç”¨æ— å‚æ•°çš„io.input()å¯ä»¥è·å¾—å½“å‰è¾“å…¥æµï¼Œè°ƒç”¨io.input(handle)å¯ä»¥è®¾ç½®å½“å‰è¾“å…¥æµã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³è¦ä¸´æ—¶æ”¹å˜å½“å‰è¾“å…¥æµï¼Œå¯ä»¥åƒè¿™æ ·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> temp = <span class="built_in">io</span>.<span class="built_in">input</span>()			<span class="comment">-- ä¿å­˜å½“å‰è¾“å…¥æµ</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">input</span>(<span class="string">&quot;newinput&quot;</span>)			<span class="comment">-- æ‰“å¼€ä¸€ä¸ªæ–°çš„å½“å‰è¾“å…¥æµ</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">input</span>():<span class="built_in">close</span>()				<span class="comment">-- å…³é—­å½“å‰æµ</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">input</span>(temp)					<span class="comment">-- æ¢å¤æ­¤å‰çš„å½“å‰è¾“å…¥æµ</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œio.read(args)å®é™…ä¸Šæ˜¯io.input():read(args)çš„ç®€å†™ï¼Œå³å‡½æ•°readæ˜¯ç”¨åœ¨å½“å‰è¾“å…¥æµä¸Šçš„ã€‚åŒæ ·ï¼Œio.write(args)æ˜¯io.output():write(args)çš„ç®€å†™ã€‚<br>é™¤äº†å‡½æ•°io.readå¤–ï¼Œè¿˜å¯ä»¥ç”¨å‡½æ•°io.linesä»æµä¸­è¯»å–å†…å®¹ã€‚æ­£å¦‚ä¹‹å‰çš„ç¤ºä¾‹ä¸­å±•ç¤ºçš„é‚£æ ·ï¼Œå‡½æ•°io.linesè¿”å›ä¸€ä¸ªå¯ä»¥ä»æµä¸­ä¸æ–­è¯»å–å†…å®¹çš„è¿­ä»£å™¨ã€‚ç»™å‡½æ•°io.linesæä¾›ä¸€ä¸ªæ–‡ä»¶åï¼Œå®ƒå°±ä¼šåªè¯»æ–¹å¼æ‰“å¼€å¯¹åº”è¯¥æ–‡ä»¶çš„è¾“å…¥æµï¼Œå¹¶åœ¨åˆ°è¾¾æ–‡ä»¶æœ«å°¾åå…³é—­è¯¥è¾“å…¥æµã€‚è‹¥è°ƒç”¨æ—¶ä¸å¸¦å‚æ•°ï¼Œå‡½æ•°io.lineså°±ä»å½“å‰è¾“å…¥è¯»å–ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå‡½æ•°lineså½“ä½œå¥æŸ„çš„ä¸€ä¸ªæ–¹æ³•ã€‚</p>
<h2 id="å…¶ä»–æ–‡ä»¶æ“ä½œ"><a href="#å…¶ä»–æ–‡ä»¶æ“ä½œ" class="headerlink" title="å…¶ä»–æ–‡ä»¶æ“ä½œ"></a>å…¶ä»–æ–‡ä»¶æ“ä½œ</h2><p>å‡½æ•°io.tmpfileè¿”å›ä¸€ä¸ªæ“ä½œä¸´æ—¶æ–‡ä»¶çš„å¥æŸ„ï¼Œè¯¥å¥æŸ„æ˜¯ä»¥è¯»&#x2F;å†™æ¨¡å¼æ‰“å¼€çš„ã€‚å½“ç¨‹åºè¿è¡Œç»“æŸåï¼Œè¯¥ä¸´æ—¶æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨ç§»é™¤ã€‚<br>å‡½æ•°flushå°†æ‰€æœ‰ç¼“å†²æ•°æ®å†™å…¥æ–‡ä»¶ã€‚ä¸å‡½æ•°writeä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®ƒå½“åšio.flush()ä½¿ç”¨ï¼Œä»¥åˆ·æ–°å½“å‰è¾“å‡ºæµï¼›æˆ–è€…æŠŠå®ƒå½“ä½œæ–¹æ³•f:flush()ä½¿ç”¨ï¼Œä»¥åˆ·æ–°æµfã€‚<br>å‡½æ•°setvbufç”¨äºè®¾ç½®æµçš„ç¼“å†²æ¨¡å¼ã€‚è¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²:â€noâ€è¡¨ç¤ºæ— ç¼“å†²ï¼Œâ€fullâ€è¡¨ç¤ºåœ¨ç¼“å†²åŒºæ»¡æ—¶æˆ–è€…æ˜¾ç¤ºåœ°åˆ·æ–°æ–‡ä»¶æ—¶æ–‡ä»¶æ—¶æ‰å†™å…¥æ•°æ®ï¼Œâ€lineâ€è¡¨ç¤ºè¾“å‡ºä¸€ç›´è¢«ç¼“å†²ç›´åˆ°é‡åˆ°æ¢è¡Œç¬¦æˆ–ä»ä¸€äº›ç‰¹å®šæ–‡ä»¶ä¸­è¯»å–åˆ°äº†æ•°æ®ã€‚å¯¹äºåä¸¤ä¸ªé€‰é¡¹ï¼Œå‡½æ•°setvbufæ”¯æŒå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šç¼“å†²åŒºå¤§å°ã€‚<br>åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œæ ‡å‡†é”™è¯¯æµ(io.stdrr)æ˜¯ä¸è¢«ç¼“å†²çš„ï¼Œè€Œæ ‡å‡†è¾“å‡ºæµ(io.stdout)æŒ‰è¡Œç¼“å†²ã€‚å› æ­¤ï¼Œå½“å‘æ ‡å‡†è¾“å‡ºä¸­å†™å…¥äº†ä¸å®Œæ•´çš„è¡Œæ—¶ï¼Œå¯èƒ½éœ€è¦åˆ·æ–°è¿™ä¸ªè¾“å‡ºæµæ‰èƒ½çœ‹åˆ°è¾“å‡ºç»“æœã€‚<br>å‡½æ•°seekç”¨æ¥è·å–å’Œè®¾ç½®æ–‡ä»¶çš„å½“å‰ä½ç½®ï¼Œå¸¸å¸¸ä½¿ç”¨f:seek(whenceï¼Œoffset)çš„å½¢å¼æ¥è°ƒç”¨ï¼Œå…¶ä¸­å‚æ•°whenceæ˜¯ä¸€ä¸ªæŒ‡å®šå¦‚ä½•ä½¿ç”¨åç§»çš„å­—ç¬¦ä¸²ã€‚å½“å‚æ•°whenceå–å€¼ä¸ºâ€setâ€œæ—¶ï¼Œè¡¨ç¤ºç›¸å¯¹æ–‡ä»¶å¼€å¤´çš„åç§»ï¼›å–å€¼ä¸ºâ€curâ€æ—¶ï¼Œè¡¨ç¤ºç›¸å¯¹äºæ–‡ä»¶ä½ç½®çš„åç§»ï¼›å–å€¼ä¸ºâ€endâ€æ—¶ï¼Œè¡¨ç¤ºç›¸å¯¹äºæ–‡ä»¶å°¾éƒ¨çš„åç§»ã€‚ä¸ç®¡whenceçš„å–å€¼æ˜¯ä»€ä¹ˆï¼Œè¯¥å‡½æ•°éƒ½ä¼šä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œè¿”å›å½“å‰æ–°ä½ç½®åœ¨æµä¸­çš„ç›¸å¯¹äºæ–‡ä»¶å¼€å¤´çš„åç§»ã€‚<br>whenceçš„é»˜è®¤å€¼æ˜¯â€curâ€ï¼Œoffsetçš„é»˜è®¤å€¼æ˜¯0ã€‚å› æ­¤ï¼Œè°ƒç”¨å‡½æ•°file:seek()ä¼šè¿”å›å½“å‰çš„ä½ç½®ä¸”ä¸æ”¹å˜å½“å‰ä½ç½®ï¼›è°ƒç”¨å‡½æ•°file:seek(â€œsetâ€)ä¼šå°†ä½ç½®é‡ç½®åˆ°æ–‡ä»¶å¼€å¤´å¹¶è¿”å›0ï¼›è°ƒç”¨å‡½æ•°file:seek(â€œendâ€)ä¼šå°†å½“å‰ä½ç½®åˆ°æ–‡ä»¶ç»“å°¾å¹¶è¿”å›æ–‡ä»¶çš„å¤§å°ã€‚ä¸‹é¢çš„å‡½æ•°æ¼”ç¤ºäº†å¦‚ä½•åœ¨ä¸ä¿®æ”¹å½“å‰ä½ç½®çš„æƒ…å†µä¸‹è·å–æ–‡ä»¶å¤§å°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fsize</span> <span class="params">(file)</span></span></span><br><span class="line">	<span class="keyword">local</span> current = file:seek()				<span class="comment">-- ä¿å­˜å½“å‰ä½ç½®</span></span><br><span class="line">	<span class="keyword">local</span> size = file:seek(<span class="string">&quot;end&quot;</span>)			<span class="comment">-- è·å–æ–‡ä»¶å¤§å°</span></span><br><span class="line">	file:seek(<span class="string">&quot;set&quot;</span>,current)				<span class="comment">-- æ¢å¤å½“å‰ä½ç½®</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œå‡½æ•°os.renameç”¨äºæ–‡ä»¶é‡å‘½åï¼Œå‡½æ•°os.removeç”¨äºç§»é™¤ï¼ˆåˆ é™¤ï¼‰æ–‡ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºè¿™ä¸¤ä¸ªå‡½æ•°å¤„ç†çš„æ˜¯çœŸå®æ–‡ä»¶è€Œéæµï¼Œæ‰€ä»¥å®ƒä»¬ä½äºosåº“è€Œéioåº“ä¸­ã€‚<br>ä¸Šè¿°æ‰€æœ‰çš„å‡½æ•°åœ¨é‡åˆ°é”™è¯¯æ—¶ï¼Œå‡ä¼šè¿”å›nilå¤–åŠ ä¸€æ¡é”™è¯¯ä¿¡æ¯å’Œä¸€ä¸ªé”™è¯¯æ–°ã€‚</p>
<h2 id="å…¶ä»–ç³»ç»Ÿè°ƒç”¨"><a href="#å…¶ä»–ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="å…¶ä»–ç³»ç»Ÿè°ƒç”¨"></a>å…¶ä»–ç³»ç»Ÿè°ƒç”¨</h2><p>å‡½æ•°os.exitç”¨äºç»ˆæ­¢ç¨‹åºçš„æ‰§è¡Œã€‚è¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œè¡¨ç¤ºè¯¥ç¨‹åºçš„è¿”å›çŠ¶æ€ï¼Œå…¶å€¼å¯ä»¥ä¸ºä¸€ä¸ªæ•°å€¼ï¼ˆ0è¡¨ç¤ºæ‰§è¡ŒæˆåŠŸï¼‰æˆ–è€…ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆtrueè¡¨ç¤ºæ‰§è¡ŒæˆåŠŸï¼‰ï¼›è¯¥å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¹Ÿæ˜¯å¯é€‰çš„ï¼Œå½“å€¼ä¸ºtrueæ—¶ä¼šå…³é—­LuaçŠ¶æ€å¹¶è°ƒç”¨æ‰€æœ‰ææ„å™¨é‡Šæ”¾æ‰€ç”¨çš„æ‰€æœ‰å†…å­˜ã€‚<br>å‡½æ•°os.getenvç”¨äºè·å–æŸä¸ªç¯å¢ƒå˜é‡ï¼Œè¯¥å‡½æ•°çš„è¾“å…¥å‚æ•°æ˜¯æ¢ç¯å¢ƒå˜é‡çš„åç§°ï¼Œè¿”å›å€¼ä¸ºä¿å­˜äº†è¯¥ç¯å¢ƒå˜é‡å¯¹åº”å€¼çš„å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">getenv</span>(<span class="string">&quot;HOME&quot;</span>)) 	<span class="comment">-- /home/lua</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºæœªå®šä¹‰çš„ç¯å¢ƒå˜é‡ï¼Œè¯¥å‡½æ•°è¿”å›nilã€‚</p>
<h2 id="è¿è¡Œç³»ç»Ÿå‘½ä»¤"><a href="#è¿è¡Œç³»ç»Ÿå‘½ä»¤" class="headerlink" title="è¿è¡Œç³»ç»Ÿå‘½ä»¤"></a>è¿è¡Œç³»ç»Ÿå‘½ä»¤</h2><p>å‡½æ•°os.executeç”¨äºè¿è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œå®ƒç­‰ä»·äºCè¯­è¨€ä¸­çš„å‡½æ•°systemã€‚è¯¥å‡½æ•°çš„å‚æ•°ä¸ºè¡¨ç¤ºå¾…æ‰§è¡Œå‘½ä»¤çš„å­—ç¬¦ä¸²ï¼Œè¿”å›å€¼ä¸ºå‘½ä»¤è¿è¡Œç»“æŸåçš„çŠ¶æ€ã€‚å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªè¿”å›å€¼æ˜¯ä¸€ä¸ªå¸ƒå°”ç±»å‹ï¼Œå½“ä¸ºtrueæ—¶è¡¨ç¤ºç¨‹åºæˆåŠŸè¿è¡Œå®Œæˆï¼›ç¬¬äºŒä¸ªè¿”å›å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“ä¸ºâ€exitâ€æ—¶è¡¨ç¤ºç¨‹åºæ­£å¸¸è¿è¡Œç¨‹åºï¼Œå½“ä¸ºâ€signalâ€æ—¶è¡¨ç¤ºå› ä¿¡å·è€Œä¸­æ–­ï¼›ç¬¬ä¸‰ä¸ªè¿”å›å€¼æ˜¯è¿”å›çŠ¶æ€æˆ–è€…ç»ˆç»“è¯¥ç¨‹åºçš„ä¿¡å·ä»£ç ã€‚ä¾‹å¦‚ï¼Œåœ¨POSIXå’ŒWindowsä¸­éƒ½å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‡½æ•°åˆ›å»ºæ–°ç›®å½•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createDir</span><span class="params">(dirname)</span></span></span><br><span class="line">	<span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;mkdir &quot;</span> .. dirname)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‡½æ•°æ˜¯io.popenã€‚åŒå‡½æ•°os.executeä¸€æ ·ï¼Œè¯¥å‡½æ•°è¿è¡Œä¸€æ¡ç³»ç»Ÿå‘½ä»¤ï¼Œä½†è¯¥å‡½æ•°è¿˜å¯ä»¥é‡å®šå‘å‘½ä»¤çš„è¾“å…¥&#x2F;è¾“å‡ºï¼Œä»è€Œä½¿å¾—ç¨‹åºå¯ä»¥å‘å‘½ä»¤ä¸­å†™å…¥æˆ–ä»å‘½ä»¤çš„è¾“å‡ºä¸­è¯»å–ã€‚ä¾‹å¦‚ï¼Œä¸‹åˆ—ä»£ç ä½¿ç”¨å½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹æ„å»ºä¸€ä¸ªè¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> f = <span class="built_in">io</span>.<span class="built_in">popen</span>(<span class="string">&quot;dir/B&quot;</span>,<span class="string">&quot;r&quot;</span>)</span><br><span class="line"><span class="keyword">local</span> dir = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> entry <span class="keyword">in</span> f:<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">	dir[#dir + <span class="number">1</span>] = entry</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œå‡½æ•°io.popençš„ç¬¬äºŒä¸ªå‚æ•°â€râ€è¡¨ç¤ºä»å‘½ä»¤çš„æ‰§è¡Œç»“æœä¸­è¯»å–ã€‚ç”±äºè¯¥å‡½æ•°çš„é»˜è®¤è¡Œä¸ºå°±æ˜¯è¿™æ ·ï¼Œæ‰€ä»¥åœ¨ä¸Šä¾‹ä¸­è¿™ä¸ªå‚æ•°å®é™…æ˜¯å¯é€‰çš„ã€‚<br>ä¸‹é¢çš„ç¤ºä¾‹ç”¨äºå‘é€ä¸€å°é‚®ä»¶ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> subject = <span class="string">&quot;some news&quot;</span></span><br><span class="line"><span class="keyword">local</span> address = <span class="string">&quot;someone@somewhere.org&quot;</span></span><br><span class="line"><span class="keyword">local</span> cmd = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;mail -s &#x27;%s&#x27; &#x27;%s&#x27; &quot;</span>,subject,address)</span><br><span class="line"><span class="keyword">local</span> f = <span class="built_in">io</span>.<span class="built_in">popen</span>(cmd,<span class="string">&quot;w&quot;</span>)</span><br><span class="line">f:<span class="built_in">write</span>(<span class="string">[[</span></span><br><span class="line"><span class="string">	Nothing important to say.</span></span><br><span class="line"><span class="string">	]]</span>)</span><br><span class="line">f:<span class="built_in">close</span>()</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¯¥è„šæœ¬åªèƒ½åœ¨å®‰è£…äº†ç›¸åº”å·¥å…·åŒ…çš„POSIXç³»ç»Ÿä¸­è¿è¡Œã€‚ä¸Šä¾‹ä¸­å‡½æ•°io.popençš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯â€wâ€ï¼Œè¡¨ç¤ºå‘è¯¥å‘½ä»¤ä¸­å†™å…¥ã€‚<br>æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ä¸­çœ‹åˆ°çš„ä¸€æ ·ï¼Œå‡½æ•°os.executeå’Œio.popenéƒ½æ˜¯åŠŸèƒ½éå¸¸å¼ºå¤§çš„å‡½æ•°ï¼Œä½†å®ƒä»¬ä¹ŸåŒæ ·æ˜¯éå¸¸ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„ã€‚<br>å¦‚æœè¦ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„å…¶ä»–æ‰©å±•åŠŸèƒ½ï¼Œæœ€å¥½çš„é€‰æ‹©æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚ç”¨äºåŸºäºç›®å½•æ“ä½œå’Œæ–‡ä»¶å±æ€§æ“ä½œçš„LuaFileSystemï¼Œæˆ–è€…æä¾›äº†POSIX.1æ ‡å‡†æ”¯æŒçš„luaposixåº“ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè¿­ä»£å™¨å’Œæ³›å‹for</title>
    <url>/12794.html</url>
    <content><![CDATA[<p>è¿­ä»£å™¨æ˜¯ä¸€ç§å¯ä»¥è®©æˆ‘ä»¬éå†ä¸€ä¸ªé›†åˆä¸­æ‰€æœ‰å…ƒç´ çš„ä»£ç ç»“æ„ã€‚åœ¨Luaè¯­è¨€ä¸­ï¼Œé€šå¸¸ä½¿ç”¨å‡½æ•°è¡¨ç¤ºè¿­ä»£å™¨ï¼šæ¯ä¸€æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°ä¼šè¿”å›é›†åˆä¸­çš„â€ä¸‹ä¸€ä¸ªâ€œå…ƒç´ ã€‚ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯io.readï¼Œæ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶å®ƒéƒ½ä¼šè¿”å›æ ‡å‡†è¾“å…¥ä¸­çš„ä¸‹ä¸€è¡Œï¼Œåœ¨æ²¡æœ‰è¯»å–çš„è¡Œæ—¶è¿”å›nilã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>æ‰€æœ‰çš„è¿­ä»£å™¨éƒ½éœ€è¦åœ¨è¿ç»­çš„è°ƒç”¨ä¹‹é—´ä¿å­˜ä¸€äº›çŠ¶æ€ï¼Œè¿™æ ·æ‰èƒ½çŸ¥é“å½“å‰è¿­ä»£æ‰€å¤„çš„ä½ç½®åŠå¦‚ä½•ä»å½“å‰ä½ç½®æ­¥è¿›åˆ°ä¸‹ä¸€ä½ç½®ã€‚å¯¹äºå‡½æ•°io.readè€Œè¨€ï¼ŒCè¯­è¨€ä¼šå°†çŠ¶æ€ä¿å­˜åœ¨æµçš„ç»“æ„ä½“ä¸­ã€‚å¯¹äºæˆ‘ä»¬è‡ªå·±çš„è¿­ä»£å™¨è€Œè¨€ï¼Œé—­åŒ…åˆ™ä¸ºä¿å­˜çŠ¶æ€æä¾›äº†ä¸€ç§è‰¯å¥½çš„æœºåˆ¶ã€‚åº†ç¥ï¼Œä¸€ä¸ªé—­åŒ…å°±æ˜¯ä¸€ä¸ªå¯ä»¥è®¿é—®å…¶è‡ªèº«çš„ç¯å¢ƒä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå±€éƒ¨å˜é‡çš„å‡½æ•°ã€‚è¿™äº›å˜é‡å°†è¿ç»­è°ƒç”¨è¿‡ç¨‹ä¸­çš„å€¼å¹¶å°†å…¶ä¿å­˜åœ¨é—­åŒ…ä¸­ï¼Œä»è€Œä½¿å¾—é—­åŒ…èƒ½å¤Ÿè®°ä½è¿­ä»£æ‰€å¤„çš„ä½ç½®ã€‚å½“ç„¶ï¼Œè¦åˆ›å»ºä¸€ä¸ªæ–°çš„é—­åŒ…ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»åˆ›å»ºéå±€éƒ¨å˜é‡ã€‚å› æ­¤ï¼Œä¸€ä¸ªé—­åŒ…ç»“æ„é€šå¸¸æ¶‰åŠä¸¤ä¸ªå‡½æ•°ï¼›é—­åŒ…æœ¬èº«å’Œä¸€ä¸ªç”¨äºåˆ›å»ºè¯¥é—­åŒ…åŠå…¶å°è£…å˜é‡çš„å·¥ç¨‹ã€‚<br>ä½œä¸ºç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬æ¥ä¸ºåˆ—è¡¨ç¼–å†™ä¸€ä¸ªç®€å•çš„è¿­ä»£å™¨ã€‚ä¸ipairsä¸åŒçš„æ˜¯ï¼Œè¯¥è¿­ä»£å™¨å¹¶ä¸æ˜¯è¿”å›æ¯ä¸ªå…ƒç´ çš„ç´¢å¼•è€Œæ˜¯è¿”å›å…ƒç´ çš„å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">values</span><span class="params">(t)</span></span></span><br><span class="line">	<span class="keyword">local</span> i = <span class="number">0</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span></span> i = i +<span class="number">1</span> ï¼›<span class="keyword">return</span> t[i] <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œvalueså°±æ˜¯å·¥å‚ã€‚æ¯å½“è°ƒç”¨è¿™ä¸ªå·¥å‚æ—¶ï¼Œå®ƒå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é—­åŒ…ï¼ˆæ—¢è¿­ä»£å™¨æœ¬èº«ï¼‰ã€‚è¿™ä¸ªé—­åŒ…å°†å®ƒçš„çŠ¶æ€ä¿å­˜åœ¨å…¶å¤–éƒ¨çš„å˜é‡tå’Œiä¸­ï¼Œè¿™ä¸¤ä¸ªå˜é‡ä¹Ÿæ˜¯ç”±valuesåˆ›å»ºçš„ã€‚æ¯æ¬¡è°ƒç”¨è¿™ä¸ªè¿­ä»£å™¨æ—¶ï¼Œå®ƒå°±ä»åˆ—è¡¨tä¸­è¿”å›ä¸‹ä¸€ä¸ªå€¼ã€‚åœ¨éå†å®Œæœ€åä¸€ä¸ªå…ƒç´ åï¼Œè¿­ä»£å™¨è¿”å›nilï¼Œè¡¨ç¤ºè¿­ä»£ç»“æŸã€‚<br>æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªwhileå¾ªç¯ä¸­ä½¿ç”¨è¿™ä¸ªè¿­ä»£å™¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = &#123;<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>&#125;</span><br><span class="line">iter = values(t)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">local</span> element = iter()</span><br><span class="line">	<span class="keyword">if</span> element == <span class="literal">nil</span> <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">	<span class="built_in">print</span>(element)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œä½¿ç”¨æ³›å‹foræ›´ç®€å•ã€‚æ¯•ç«Ÿï¼Œæ³›å‹foræ­£æ˜¯ä¸ºäº†è¿™ç§è¿­ä»£è€Œè®¾è®¡çš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = &#123;<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>&#125;</span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> values(t) <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">print</span>(element)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æ³›å‹forä¸ºä¸€æ¬¡è¿­ä»£å¾ªç¯åšäº†æ‰€æœ‰çš„è®°å½•å·¥ä½œï¼šå®ƒçš„å†…éƒ¨ä¿å­˜äº†è¿­ä»£å‡½æ•°ï¼Œå› æ­¤ä¸éœ€è¦å˜é‡iterï¼›å®ƒåœ¨æ¯æ¬¡åšæ–°çš„è¿­ä»£æ—¶éƒ½ä¼šå†æ¬¡è°ƒç”¨è¿­ä»£å™¨ï¼Œå¹¶åœ¨è¿­ä»£å™¨è¿”å›nilæ—¶ç»“æŸå¾ªç¯ã€‚<br>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„ç¤ºä¾‹ï¼Œå®ƒå¯ä»¥éå†æ¥è‡ªæ ‡å‡†è¾“å…¥çš„æ‰€æœ‰å•è¯ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ éå†æ¥è‡ªæ ‡å‡†è¾“å…¥çš„æ‰€æœ‰å•è¯çš„è¿­ä»£å™¨</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">allwords</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">local</span> line = <span class="built_in">io</span>.<span class="built_in">read</span>()		<span class="comment">-- å½“å‰è¡Œ</span></span><br><span class="line">	<span class="keyword">local</span> pos  = <span class="number">1</span>				<span class="comment">-- å½“å‰è¡Œçš„å½“å‰ä½ç½®</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span></span>			<span class="comment">-- è¿­ä»£å‡½æ•°</span></span><br><span class="line">	<span class="keyword">while</span> line <span class="keyword">do</span> 				<span class="comment">-- å½“è¿˜æœ‰è¡Œæ—¶å¾ªç¯</span></span><br><span class="line">		<span class="keyword">local</span> w , <span class="number">3</span> = <span class="built_in">string</span>.<span class="built_in">match</span>(line,<span class="string">&quot;(%w+)()&quot;</span>,pos)</span><br><span class="line">			<span class="keyword">if</span> w <span class="keyword">then</span>				<span class="comment">-- å‘ç°ä¸€ä¸ªå•è¯ï¼Ÿ</span></span><br><span class="line">				pos = e 			<span class="comment">-- ä¸‹ä¸€ä¸ªä½ç½®ä½äºè¯¥å•è¯å</span></span><br><span class="line">				<span class="keyword">return</span> w 			<span class="comment">-- è¿”å›è¯¥å•è¯</span></span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				line = <span class="built_in">io</span>.<span class="built_in">read</span>()	<span class="comment">-- æ²¡æ‰¾åˆ°å•è¯ï¼›å°è¯•ä¸‹ä¸€è¡Œ</span></span><br><span class="line">				pos  = <span class="number">1</span>			<span class="comment">-- ä»ç¬¬ä¸€ä¸ªä½ç½®é‡æ–°å¼€å§‹</span></span><br><span class="line">			<span class="keyword">end</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>					<span class="comment">-- æ²¡æœ‰è¡Œäº†ï¼šè¿­ä»£ç»“æŸ</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†å®Œæˆè¿™æ ·çš„ä¾¿åˆ©ï¼Œæˆ‘ä»¬éœ€è¦ä¿å­˜ä¸¤ä¸ªå€¼ï¼šå½“å‰è¡Œçš„å†…å®¹åŠå½“å‰è¡Œçš„å½“å‰ä½ç½®ã€‚æœ‰äº†è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸æ–­äº§ç”Ÿä¸‹ä¸€ä¸ªå•è¯ã€‚è¿™ä¸ªè¿­ä»£å‡½æ•°çš„ä¸»è¦éƒ¨åˆ†æ˜¯è°ƒç”¨å‡½æ•°string.matchï¼Œä»¥å½“å‰ä½ç½®ä½œä¸ºèµ·å§‹åœ¨å½“å‰è¡Œä¸­æœç´¢ä¸€ä¸ªå•è¯ã€‚å‡½æ•°string.matchä½¿ç”¨æ¨¡å¼â€™%w+â€™æ¥åŒ¹é…ä¸€ä¸ªâ€œå•è¯â€ï¼Œä¹Ÿå°±æ˜¯åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ¯&#x2F;æ•°å­—å­—ç¬¦ã€‚å¦‚æœå‡½æ•°string.matchæ‰¾åˆ°äº†ä¸€ä¸ªå•è¯ï¼Œå®ƒå°±æ•è·å¹¶è¿”å›è¿™ä¸ªå•è¯åŠè¯¥å•è¯ä¹‹åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä½ç½®ï¼Œè¿­ä»£å‡½æ•°åˆ™æ›´æ–°å½“å‰ä½ç½®å¹¶è¿”å›è¯¥å•è¯ï¼›å¦åˆ™ï¼Œè¿­ä»£å‡½æ•°è¯»å–æ–°çš„ä¸€è¡Œï¼Œç„¶åé‡å¤ä¸Šè¿°æœç´¢è¿‡ç¨‹ã€‚åœ¨æ‰€æœ‰çš„è¡Œéƒ½è¢«è¯»å–å®Œåï¼Œè¿­ä»£å‡½æ•°è¿”å›nilä»¥è¡¨ç¤ºè¿­ä»£ç»“æŸã€‚<br>å°½ç®¡è¿­ä»£å™¨æœ¬èº«æœ‰ç‚¹å¤æ‚ï¼Œä½†allwordsçš„ä½¿ç”¨è¿˜æ˜¯å¾ˆç®€æ˜æ˜“æ‡‚çš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> allowrds () <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">print</span>(word)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºè¿­ä»£å™¨è€Œè¨€ï¼Œä¸€ç§å¸¸è§çš„æƒ…å†µå°±æ˜¯ï¼Œç¼–å†™è¿­ä»£å™¨å¯èƒ½ä¸å¤ªå®¹æ˜“ï¼Œä½†ä½¿ç”¨è¿­ä»£å™¨å´ååˆ†ç®€å•ã€‚è¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œå› ä¸ºä½¿ç”¨Luaè¯­è¨€ç¼–ç¨‹çš„æœ€ç»ˆç”¨æˆ·ä¸€èˆ¬ä¸ä¼šå»å®šä¹‰è¿­ä»£å™¨ï¼Œè€Œåªä¼šä½¿ç”¨é‚£äº›å®¿ä¸»åº”ç”¨å·²ç»æä¾›çš„è¿­ä»£å™¨ã€‚</p>
<h2 id="æ³›å‹forçš„è¯­æ³•"><a href="#æ³›å‹forçš„è¯­æ³•" class="headerlink" title="æ³›å‹forçš„è¯­æ³•"></a>æ³›å‹forçš„è¯­æ³•</h2><p>ä¸Šè¿°é‚£äº›è¿­ä»£å™¨éƒ½æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå³éœ€è¦ä¸ºæ¯ä¸ªæ–°çš„å¾ªç¯åˆ›å»ºä¸€ä¸ªæ–°çš„é—­åŒ…ã€‚å¯¹äºå¤§å¤šæ•°æƒ…å†µè€Œè¨€ï¼Œè¿™æˆ–è®¸ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¹‹å‰çš„allwordsè¿­ä»£å™¨ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªé—­åŒ…çš„å¼€é”€ç›¸å¯¹äºè¯»å–æ•´ä¸ªæ–‡ä»¶çš„å¼€é”€è€Œè¨€å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚ä½†æ˜¯ï¼Œåœ¨å¦å¤–ä¸€äº›æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„å¼€é”€å¯èƒ½ä¼šå¾ˆå¯è§‚ã€‚åœ¨è¿™ç±»æƒ…å†µä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨æ³›å‹forè‡ªå·±ä¿å­˜è¿­ä»£çŠ¶æ€ã€‚<br>æ³›å‹foråœ¨å¾ªç¯è¿‡ç¨‹ä¸­åœ¨å…¶å†…éƒ¨ä¿å­˜äº†è¿­ä»£å‡½æ•°ã€‚å®é™…ä¸Šï¼Œæ³›å‹forä¿å­˜äº†ä¸‰ä¸ªå€¼ï¼šä¸€ä¸ªè¿­ä»£å‡½æ•°ã€ä¸€ä¸ªä¸å¯å˜çŠ¶æ€å’Œä¸€ä¸ªæ§åˆ¶å˜é‡ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> var-list <span class="keyword">in</span> <span class="built_in">exp</span>-list <span class="keyword">do</span></span><br><span class="line">	body</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œvar-listæ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡åç»„æˆçš„åˆ—è¡¨ï¼Œä»¥é€—å·åˆ†éš”ï¼›exp-listæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨è¾¾å¼ç»„æˆçš„åˆ—è¡¨ï¼ŒåŒæ ·ä»¥é€—å·åˆ†éš”ã€‚é€šå¸¸ï¼Œè¡¨è¾¾å¼åˆ—è¡¨åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå³ä¸€å¥å¯¹è¿­ä»£å™¨å·¥å‚çš„è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼Œå˜é‡åˆ—è¡¨æ˜¯k,v,è¡¨è¾¾å¼åˆ—è¡¨åªè¦ä¸€ä¸ªå…ƒç´ pairs(t):</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span> <span class="built_in">print</span>(k,v) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŠŠå˜é‡åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªï¼ˆæˆ–å”¯ä¸€çš„ï¼‰å˜é‡ç§°ä¸ºæ§åˆ¶å˜é‡ï¼Œå…¶å€¼åœ¨å¾ªç¯è¿‡ç¨‹ä¸­æ°¸è¿œä¸ä¼šæ˜¯nilï¼Œå› ä¸ºå½“å…¶å€¼ä¸ºnilæ—¶å¾ªç¯å°±ç»“æŸäº†ã€‚<br>foråšçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯å¯¹inåé¢çš„è¡¨è¾¾å¼æ±‚å€¼ã€‚è¿™äº›è¡¨è¾¾å¼åº”è¯¥è¿”å›ä¸‰ä¸ªå€¼ä¾›forä¿å­˜ï¼šè¿­ä»£å‡½æ•°ã€ä¸å¯å˜çŠ¶æ€å’Œæ§åˆ¶å˜é‡çš„åˆå§‹å€¼ã€‚ç±»ä¼¼äºå¤šé‡èµ‹å€¼ï¼Œåªæœ‰æœ€åä¸€ä¸ªè¡¨è¾¾å¼èƒ½å¤Ÿäº§ç”Ÿä¸æ­¢ä¸€ä¸ªå€¼ï¼›è¡¨è¾¾å¼åˆ—è¡¨çš„ç»“æœå€¼ä¼šä¿ç•™ä¸‰ä¸ªï¼Œå¤šä½™çš„å€¼ä¼šè¢«ä¸¢å¼ƒï¼Œä¸è¶³ä¸‰ä¸ªåˆ™ä»¥nilè¡¥é½ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨ç®€å•è¿­å™¨æ—¶ï¼Œå·¥å‚åªä¼šè¿”å›è¿­ä»£å‡½æ•°ï¼Œå› æ­¤ä¸å¯å˜çŠ¶æ€å’Œæ§åˆ¶å˜é‡éƒ½æ˜¯nilã€‚<br>åœ¨ä¸Šè¿°çš„åˆå§‹åŒ–æ­¥éª¤å®Œæˆåï¼Œforä½¿ç”¨ä¸å¯å˜çŠ¶æ€å’Œæ§åˆ¶å˜é‡ä¸ºå‚æ•°æ¥è°ƒç”¨è¿­ä»£å‡½æ•°ã€‚ä»forä»£ç ç»“æ„çš„ç«‹è¶³ç‚¹æ¥çœ‹ï¼Œä¸å¯å˜çŠ¶æ€æ ¹æœ¬æ²¡æœ‰æ„ä¹‰ã€‚foråªæ˜¯æŠŠä»åˆå§‹åŒ–æ­¥éª¤å¾—åˆ°çš„çŠ¶æ€å€¼ä¼ é€’ç»™æ‰€æœ‰è¿­ä»£å‡½æ•°ã€‚ç„¶åï¼Œforå°†è¿­ä»£å‡½æ•°çš„è¿”å›å€¼èµ‹ç»™å˜é‡åˆ—è¡¨ä¸­å£°åçš„å˜é‡ã€‚å¦‚æœç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸ºnilï¼Œé‚£ä¹ˆå¾ªç¯ç»ˆæ­¢ï¼›å¦åˆ™ï¼Œforæ‰§è¡Œå®ƒçš„å¾ªç¯ä½“å¹¶å†æ¬¡è°ƒç”¨è¿­ä»£å‡½æ•°ï¼Œå†ä¸æ–­åœ°é‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚<br>æ›´ç¡®åˆ‡åœ°è¯´ï¼Œå½¢å¦‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> var_1,... ,var_n <span class="keyword">in</span> explist <span class="keyword">do</span> block <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä»£ç ç»“æ„ä¸ä¸‹åˆ—ä»£ç ç­‰ä»·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span> </span><br><span class="line">	<span class="keyword">local</span> _f, _s , _var = explist</span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> var_1, ... , var_n = _f(_s,_var)</span><br><span class="line">		_var = _var_1</span><br><span class="line">		<span class="keyword">if</span> _var  == <span class="literal">nil</span> <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">		block</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œå‡è®¾è¿­ä»£å‡½æ•°ä¸ºfï¼Œä¸å¯å˜çŠ¶æ€ä¸ºsï¼Œæ§åˆ¶å˜é‡çš„åˆå§‹å€¼ä¸ºa0ï¼Œé‚£ä¹ˆåœ¨å¾ªç¯ä¸­æ§åˆ¶å˜é‡çš„å€¼ä¸€æ¬¡ä¸ºa1 &#x3D; f(s,a0),a2 &#x3D; f(s,a1),ä¸€æ¬¡ç±»æ¨ï¼Œç›´è‡³aiä¸ºnilã€‚å¦‚æœforè¿˜æœ‰å…¶ä»–å˜é‡ï¼Œé‚£ä¹ˆè¿™äº›å˜é‡åªæ˜¯ç®€å•åœ°åœ¨æ¯æ¬¡è°ƒç”¨fåå¾—åˆ°é¢å¤–çš„è¿”å›å€¼ã€‚</p>
<h2 id="æ— çŠ¶æ€è¿­ä»£å™¨"><a href="#æ— çŠ¶æ€è¿­ä»£å™¨" class="headerlink" title="æ— çŠ¶æ€è¿­ä»£å™¨"></a>æ— çŠ¶æ€è¿­ä»£å™¨</h2><p>é¡¾åæ€ä¹‰ï¼Œæ— çŠ¶æ€è¿­ä»£å™¨å°±æ˜¯ä¸€ç§è‡ªèº«ä¸ä¿å­˜ä»»ä½•çŠ¶æ€çš„è¿­ä»£å™¨ã€‚å› æ­¤ï¼Œå¯ä»¥åœ¨å¤šä¸ªå¾ªç¯ä¸­ä½¿ç”¨åŒä¸€ä¸ªæ— çŠ¶æ€è¿­ä»£å™¨ï¼Œä»è€Œé¿å…åˆ›å»ºæ–°é—­åŒ…çš„å¼€é”€ã€‚<br>æ­£å¦‚åˆšåˆšæ‰€çœ‹åˆ°çš„ï¼Œforå¾ªç¯ä¼šä»¥ä¸å¯å˜çŠ¶æ€å’Œæ§åˆ¶å˜é‡ä¸ºå‚æ•°ä½å•Šç”¨è¿­ä»£å‡½æ•°ã€‚ä¸€ä¸ªæ— çŠ¶æ€è¿­ä»£å™¨åªæ ¹æ®è¿™ä¸¤ä¸ªå€¼æ¥è¿­ä»£ç”Ÿæˆä¸‹ä¸€ä¸ªå…ƒç´ ã€‚è¿™ç±»è¿­ä»£å™¨çš„ä¸€ä¸ªå…¸å‹ä¾‹å­å°±æ˜¯ipairsï¼Œå®ƒå¯ä»¥è¿­ä»£ä¸€ä¸ªåºåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;<span class="string">&quot;one&quot;</span>,<span class="string">&quot;two&quot;</span>,<span class="string">&quot;three&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">print</span>(i,v)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿­ä»£çš„çŠ¶æ€ç”±æ­£åœ¨è¢«éå†çš„è¡¨ï¼ˆä¸€ä¸ªä¸å¯å˜çŠ¶æ€ï¼Œå®ƒä¸ä¼šåœ¨å¾ªç¯ä¸­æ”¹å˜ï¼‰åŠå½“å‰çš„ç´¢å¼•å€¼ï¼ˆæ§åˆ¶å˜é‡ï¼‰ç»„æˆã€‚ipairså’Œè¿­ä»£å™¨éƒ½éå¸¸ç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Luaè¯­è¨€ä¸­å°†å…¶ç¼–å†™å‡ºæ¥ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">iter</span><span class="params">(t,i)</span></span></span><br><span class="line">	i = i + <span class="number">1</span></span><br><span class="line">	<span class="keyword">local</span> v = t[i]</span><br><span class="line">	<span class="keyword">if</span> v <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">return</span> i, v</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ipairs</span><span class="params">(t)</span></span></span><br><span class="line">	<span class="keyword">return</span> iter, t, <span class="number">0</span> </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å½“è°ƒç”¨forå¾ªç¯ä¸­çš„ipairs(t)æ—¶ï¼Œipairs(t)ä¼šè¿”å›ä¸‰ä¸ªå€¼ï¼Œå³è¿­ä»£å‡½æ•°iterã€ä¸å¯å˜çŠ¶æ€è¡¨tå’Œæ§åˆ¶å˜é‡çš„åˆå§‹å€¼0ã€‚ç„¶åï¼ŒLuaè¯­è¨€è°ƒç”¨iter(t,0)ï¼Œå¾—åˆ°1,t[1]ï¼ˆé™¤ét[1]å·²ç»å˜æˆnilï¼‰ã€‚åœ¨ç¬¬äºŒæ¬¡è¿­ä»£ä¸­ï¼ŒLuaè¯­è¨€è°ƒç”¨iter(t,1)ï¼Œå¾—åˆ°2,t[2]ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´è‡³å¾—åˆ°ç¬¬ä¸€ä¸ªä¸ºnilçš„å…ƒç´ ã€‚<br>å‡½æ•°pairsä¸å‡½æ•°ipairsç±»ä¼¼ï¼Œä¹Ÿç”¨äºéå†ä¸€ä¸ªè¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ä¸åŒçš„æ˜¯ï¼Œå‡½æ•°pairsçš„è¿­ä»£å‡½æ•°æ˜¯Luaè¯­è¨€ä¸­çš„ä¸€ä¸ªåŸºæœ¬å‡½æ•°nextï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pairs</span><span class="params">(t)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">next</span>,t,<span class="literal">nil</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä½å•Šç”¨next(t,k)æ—¶ï¼Œkæ˜¯è¡¨tçš„ä¸€ä¸ªé”®ï¼Œè¯¥å‡½æ•°ä¼šä»¥éšæœºæ¬¡åºè¿”å›è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªé”®åŠkå¯¹åº”çš„å€¼ï¼ˆä½œä¸ºç¬¬äºŒä¸ªè¿”å›å€¼ï¼‰ã€‚è°ƒç”¨next(t,nil)æ—¶ï¼Œè¿”å›è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé”®å€¼å¯¹ã€‚å½“æ‰€æœ‰å…ƒç´ è¢«éå†å®Œæ—¶ï¼Œå‡½æ•°nextè¿”å›nilã€‚<br>æˆ‘ä»¬å¯ä»¥ä¸è°ƒç”¨pairsè€Œç›´æ¥ä½¿ç”¨nextï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">next</span> , t <span class="keyword">do</span></span><br><span class="line">	loop body</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œforå¾ªç¯ä¼šæŠŠè¡¨è¾¾å¼åˆ—è¡¨çš„ç»“æœè°ƒæ•´ä¸ºä¸‰ä¸ªå€¼ï¼Œå› æ­¤ä¸Šä¾‹å¾—åˆ°çš„æ˜¯nextã€tå’Œnilï¼Œè¿™ä¹Ÿæ­£ä¸pairs(t)çš„è¿”å›å€¼å®Œå…¨ä¸€è‡´ã€‚<br>å…³äºæ— çŠ¶æ€è¿­ä»£å™¨çš„å¦ä¸€ä¸ªæœ‰è¶£çš„ç¤ºä¾‹æ˜¯éå†é“¾è¡¨çš„è¿­ä»£å™¨ï¼ˆé“¾è¡¨åœ¨Luaè¯­è¨€ä¸­å¹¶ä¸å¸¸è§ï¼Œä½†æœ‰æ—¶ä¹Ÿéœ€è¦ç”¨åˆ°ï¼‰ã€‚æˆ‘ä»¬çš„ç¬¬ä¸€ååº”å¯èƒ½æ˜¯åªæŠŠå½“å‰èŠ‚ç‚¹å½“åšæ§åˆ¶å˜é‡ï¼Œä»¥ä¾¿äºè¿­ä»£å‡½æ•°èƒ½å¤Ÿè¿”å›ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">getnext</span><span class="params">(node)</span></span></span><br><span class="line">	<span class="keyword">return</span> node.<span class="built_in">next</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">traverse</span><span class="params">(list)</span></span></span><br><span class="line">	<span class="keyword">return</span> getnext, <span class="literal">nil</span>, list</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œè¿™ç§å®ç°ä¼šè·³è¿‡ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">getnext</span><span class="params">(list,node)</span></span></span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">not</span> node <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">return</span> list</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> node.<span class="built_in">next</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">traverse</span><span class="params">(list)</span></span></span><br><span class="line">	<span class="keyword">return</span> getnext, list,<span class="literal">nil</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„æŠ€å·§æ˜¯ï¼Œé™¤äº†å°†å½“å‰èŠ‚ç‚¹ä½œä¸ºæ§åˆ¶å˜é‡ï¼Œè¿˜è¦å°†å¤´èŠ‚ç‚¹ä½œä¸ºä¸å¯å˜çŠ¶æ€ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨è¿­ä»£å‡½æ•°getnextæ—¶ï¼Œnodeä¸ºnilï¼Œå› æ­¤å‡½æ•°è¿”å›listä½œä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚åœ¨åç»­çš„è°ƒç”¨ä¸­ï¼Œnodeä¸å†æ˜¯nilï¼Œæ‰€ä»¥è¿­ä»£å‡½æ•°ä¼šåƒæˆ‘ä»¬æ‰€æœŸæœ›çš„é‚£æ ·è¿”å›node.nextã€‚</p>
<h2 id="æŒ‰é¡ºåºéå†è¡¨"><a href="#æŒ‰é¡ºåºéå†è¡¨" class="headerlink" title="æŒ‰é¡ºåºéå†è¡¨"></a>æŒ‰é¡ºåºéå†è¡¨</h2><p>ä¸€ä¸ªå¸¸è§çš„å›°æƒ‘å‘ç”Ÿåœ¨å¼€å‘äººå‘˜æƒ³è¦å¯¹è¡¨ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºæ—¶ã€‚ç”±äºä¸€ä¸ªè¡¨ä¸­çš„å…ƒç´ æ²¡æœ‰é¡ºåºï¼Œæ‰€ä»¥å¦‚æœæƒ³å¯¹è¿™äº›å…ƒç´ æ’åºï¼Œå°±ä¸å¾—ä¸æŠŠé”®å€¼å¯¹æ‹·è´åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åå†å¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚<br>å‡è®¾æˆ‘ä»¬è¦è¯»å–ä¸€ä¸ªæºæ–‡ä»¶ï¼Œç„¶åæ„é€ ä¸€ä¸ªè¡¨æ¥ä¿å­˜æ¯ä¸ªå‡½æ•°çš„åç§°åŠå…¶å£°æ˜æ‰€åœ¨çš„è¡Œæ•°ï¼Œå½¢å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">lines</span> = &#123;</span><br><span class="line">	[<span class="string">&quot;luaH_set&quot;</span>]     = <span class="number">10</span>,</span><br><span class="line">	[<span class="string">&quot;luaH_get&quot;</span>]	 = <span class="number">24</span>,</span><br><span class="line">	[<span class="string">&quot;luaH_present&quot;</span>] = <span class="number">48</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³æŒ‰ç…§å­—æ¯é¡ºåºè¾“å‡ºè¿™äº›å‡½æ•°åã€‚å¦‚æœä½¿ç”¨pairséå†è¡¨ï¼Œé‚£ä¹ˆå‡½æ•°åä¼šæŒ‰ç…§éšæœºçš„é¡ºåºå‡ºç°ã€‚ç”±äºè¿™äº›å‡½æ•°åæ˜¯è¡¨çš„é”®ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ç›´æ¥å¯¹å…¶è¿›è¡Œæ’åºã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬æŠŠä»–ä»¬æ”¾åˆ°æ•°ç»„ä¸­ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œæ’åºäº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªåŒ…å«å‡½æ•°åçš„æ•°ç»„ï¼Œç„¶åå¯¹å…¶æ’åºï¼Œå†æœ€ç»ˆè¾“å‡ºç»“æœã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">pairs</span>(<span class="built_in">lines</span>) <span class="keyword">do</span> a[#a + <span class="number">1</span>] = n <span class="keyword">end</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">sort</span>(a)</span><br><span class="line"><span class="keyword">for</span> _, n <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) <span class="keyword">do</span> <span class="built_in">print</span>(n) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æœ‰äº›äººå¯èƒ½ä¼šå›°æƒ‘ã€‚æ¯•ç«Ÿï¼Œå¯¹äºLuaè¯­è¨€æ¥è¯´ï¼Œæ•°ç»„ä¹Ÿæ²¡æœ‰é¡ºåºã€‚ä½†æ˜¯æˆ‘ä»¬çŸ¥é“å¦‚ä½•æ•°æ•°ï¼å› æ­¤ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨æœ‰åºçš„ç´¢å¼•è®¿é—®æ•°ç»„æ—¶ï¼Œå°±å®ç°äº†æœ‰åºã€‚è¿™æ­£æ˜¯åº”è¯¥æ€»æ˜¯ä½¿ç”¨ipairsè€Œä¸æ˜¯pairsæ¥éå†æ•°ç»„çš„åŸå› ã€‚ç¬¬ä¸€ä¸ªå‡½æ•°é€šè¿‡æœ‰åºçš„é”®1ã€2ç­‰æ¥å®ç°æœ‰åºï¼Œç„¶è€Œåè€…ä½¿ç”¨åˆ™æ˜¯å¤©ç„¶çš„éšæœºé¡ºåºï¼ˆè™½ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹é¡ºåºéšæœºä¹Ÿæ— ç¢ï¼Œä½†æœ‰æ—¶å¯èƒ½å¹¶éæˆ‘ä»¬æƒ³è¦çš„ï¼‰ã€‚<br>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½å†™ä¸€ä¸ªæŒ‰ç…§é”®çš„é¡ºåºæ¥éå†è¡¨çš„è¿­ä»£å™¨äº†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pairsByKeys</span><span class="params">(t,f)</span></span></span><br><span class="line">	<span class="keyword">local</span> a = &#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span> <span class="comment">--  åˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰é”®çš„è¡¨</span></span><br><span class="line">		a[#a + <span class="number">1</span>] = n</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="built_in">table</span>.<span class="built_in">sort</span>( a, f )  <span class="comment">-- å¯¹åˆ—è¡¨æ’åº</span></span><br><span class="line">	<span class="keyword">local</span> i = <span class="number">0</span>         <span class="comment">-- è¿­ä»£å˜é‡</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span></span>   <span class="comment">-- è¿­ä»£å‡½æ•°</span></span><br><span class="line">		i = i + <span class="number">1</span></span><br><span class="line">		returna[i],t[a[i]]		<span class="comment">--è¿”å›é”®å’Œå€¼</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å·¥å‚å‡½æ•°pairsByKeysé¦–å…ˆæŠŠé”®æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åå¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œæœ€åè¿”å›è¿­ä»£å‡½æ•°ã€‚åœ¨æ¯ä¸€æ­¥ä¸­ï¼Œè¿­ä»£å™¨éƒ½ä¼šæŒ‰ç…§æ•°ç»„aä¸­çš„é¡ºåºè¿”å›åŸå§‹è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªé”®å€¼å¯¹ã€‚å¯é€‰çš„å‚æ•°få…è®¸æŒ‡å®šä¸€ç§å…¶ä»–çš„æ’åºæ–¹æ³•ã€‚<br>ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°è§£å†³å¼€å§‹æ—¶æå‡ºçš„æŒ‰é¡ºåºéå†è¡¨çš„é—®é¢˜ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> name,line <span class="keyword">in</span> pairsByKeys(<span class="built_in">lines</span>) <span class="keyword">do</span> </span><br><span class="line">	<span class="built_in">print</span>(name,line)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åƒé€šå¸¸çš„æƒ…å†µä¸€æ ·ï¼Œæ‰€æœ‰çš„å¤æ‚æ€§éƒ½è¢«éšè—åˆ°äº†è¿­ä»£å™¨ä¸­ã€‚</p>
<h2 id="è¿­ä»£å™¨çš„çœŸå®å«ä¹‰"><a href="#è¿­ä»£å™¨çš„çœŸå®å«ä¹‰" class="headerlink" title="è¿­ä»£å™¨çš„çœŸå®å«ä¹‰"></a>è¿­ä»£å™¨çš„çœŸå®å«ä¹‰</h2><p>â€œè¿­ä»£å™¨â€è¿™ä¸ªåç§°å¤šå°‘æœ‰ç‚¹è¯¯å¯¼æ€§ï¼Œè¿™æ˜¯å› ä¸ºè¿­ä»£å™¨å¹¶æ²¡æœ‰è¿›è¡Œå®é™…çš„è¿­ä»£ï¼šçœŸæ­£çš„è¿­ä»£æ—¶forå¾ªç¯å®Œæˆçš„ï¼Œè¿­ä»£å™¨åªä¸è¿‡ä¸ºæ¯æ¬¡çš„è¿­ä»£æä¾›è¿ç»­çš„å€¼ã€‚æˆ–è®¸ï¼Œç§°å…¶ä¸ºâ€œç”Ÿæˆå™¨â€æ›´å¥½ï¼Œè¡¨ç¤ºè¿­ä»£ç”Ÿäº§å…ƒç´ ï¼›ä¸è¿‡ï¼Œâ€œè¿­ä»£å™¨â€è¿™ä¸ªåå­—å·²åœ¨å‡ºå…¥Javaç­‰å…¶ä»–è¯­è¨€ä¸­è¢«å¹¿æ³›æ˜¯ç”¨äº†ã€‚<br>ç„¶è€Œï¼Œè¿˜æœ‰ä¸€ç§åˆ›å»ºè¿­ä»£å™¨çš„æ–¹å¼å¯ä»¥è®©è¿­ä»£å™¨è¿›è¡Œå®é™…çš„è¿­ä»£æ“ä½œã€‚å½“ä½¿ç”¨è¿™ç§è¿­ä»£å™¨æ—¶ï¼Œå°±ä¸å†éœ€è¦ç¼–å†™å¾ªç¯äº†ã€‚ç›¸åï¼Œåªéœ€è¦è°ƒç”¨è¿™ä¸ªè¿­ä»£å™¨ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªæè¿°äº†åœ¨æ¯æ¬¡è¿­ä»£æ—¶éœ€è¦åšä»€ä¹ˆçš„å‚æ•°å³å¯ã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œè¿­ä»£å™¨æ¥æ”¶äº†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨å¾ªç¯çš„å†…éƒ¨è¢«è°ƒç”¨ï¼Œè¿™ç§è¿­ä»£å™¨å°±è¢«ç§°ä¸ºçœŸæ­£çš„è¿­ä»£å™¨ã€‚<br>&ensp;&ensp;ä¸¾ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨è¿™ç§é£æ ¼å†æ¬¡é‡å†™allowrdsè¿­ä»£å™¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">allwords</span><span class="params">(f)</span></span></span><br><span class="line">	<span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.line() <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">for</span> word <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(line,<span class="string">&quot;%w+&quot;</span>) <span class="keyword">do</span></span><br><span class="line">			f(word)			<span class="comment">--è°ƒç”¨å‡½æ•°</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¿™ä¸ªè¿­ä»£å™¨æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå¾ªç¯ä½“ã€‚å¦‚æœæˆ‘ä»¬åªæƒ³è¾“å‡ºæ¯ä¸ªå•è¯ï¼Œé‚£ä¹ˆç®€å•åœ°ä½¿ç”¨å‡½æ•°printå³å¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">allwords(<span class="built_in">print</span>)</span><br></pre></td></tr></table></figure>
<p>é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°ä½œä¸ºå¾ªç¯ä½“ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ä»£ç ç”¨äºè®¡ç®—å•è¯â€helloâ€åœ¨è¾“å…¥æ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> count = <span class="number">0</span></span><br><span class="line">allwords(<span class="function"><span class="keyword">function</span><span class="params">(w)</span></span></span><br><span class="line">	<span class="keyword">if</span> w == <span class="string">&quot;hello&quot;</span> <span class="keyword">then</span> count = count + <span class="number">1</span> <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">print</span>(count)</span><br></pre></td></tr></table></figure>
<p>åŒæ ·çš„éœ€æ±‚ï¼Œå¦‚æœé‡‡ç”¨ä¹‹å‰çš„è¿­ä»£å™¨é£æ ¼ï¼Œå·®å¼‚ä¹Ÿä¸æ˜¯ç‰¹åˆ«å¤§ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> count = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> allwords() <span class="keyword">do</span></span><br><span class="line">	<span class="keyword">if</span> w == <span class="string">&quot;hello&quot;</span> <span class="keyword">then</span> count = count + <span class="number">1</span> <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(count)</span><br></pre></td></tr></table></figure>
<p>&ensp;&ensp;&ensp;&ensp;çœŸæ­£çš„è¿­ä»£å™¨åœ¨è€ç‰ˆæœ¬çš„Luaè¯­è¨€ä¸­æ›¾éå¸¸æµè¡Œï¼Œé‚£æ˜¯è¿˜æ²¡æœ‰forè¯­å¥ã€‚çœŸæ­£çš„è¿­ä»£å™¨ä¸ç”Ÿæˆå™¨é£æ ¼çš„è¿­ä»£å™¨ç›¸æ¯”æ€ä¹ˆæ ·å‘¢ï¼Ÿè¿™ä¸¤ç§é£æ ¼éƒ½æœ‰å¤§è‡´ç›¸åŒçš„å¼€é”€ï¼Œå³æ¯æ¬¡è¿­ä»£éƒ½æœ‰ä¸€æ¬¡å‡½æ•°è°ƒç”¨ã€‚ä¸€æ–¹é¢ï¼Œç¼–å†™çœŸæ­£çš„è¿­ä»£å™¨æ¯”è¾ƒå®¹æ˜“ã€‚å¦ä¸€æ–¹é¢ï¼Œç”Ÿæˆå™¨é£æ ¼çš„è¿­ä»£å™¨åˆ™æ›´çµæ´»ã€‚é¦–å…ˆï¼Œç”Ÿæˆå™¨é£æ ¼çš„è¿­ä»£å™¨å…è®¸ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªå¹¶è¡Œçš„è¿­ä»£ã€‚å…¶æ¬¡ï¼Œç”Ÿæˆå™¨é£æ ¼çš„è¿­ä»£å™¨å…è®¸åœ¨å¾ªç¯ä½“ä¸­ä½¿ç”¨breakå’Œreturnè¯­å¥ã€‚ä½¿ç”¨çœŸæ­£çš„è¿­ä»£å™¨ï¼Œreturnè¯­å¥ä»åŒ¿åå‡½æ•°ä¸­è¿”å›è€Œéä»è¿›è¡Œè¿­ä»£çš„å‡½æ•°ä¸­è¿”å›ã€‚</p>
]]></content>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaé—­åŒ…è¯¦è§£</title>
    <url>/57636.html</url>
    <content><![CDATA[<p>åœ¨Luaè¯­è¨€ä¸­ï¼Œå‡½æ•°æ˜¯ä¸¥æ ¼éµå¾ªè¯æ³•å®šç•Œçš„ç¬¬ä¸€ç±»å€¼ã€‚<br>â€œç¬¬ä¸€ç±»å€¼â€ä»¥ä¸ºè¿™Luaè¯­è¨€ä¸­çš„å‡½æ•°ä¸å…¶ä»–å¸¸è§ç±»å‹çš„å€¼å…·æœ‰åŒç­‰æƒé™ï¼šä¸€ä¸ªç¨‹åºå¯ä»¥å°†æŸä¸ªå‡½æ•°ä¿å­˜åˆ°å˜é‡ä¸­æˆ–è¡¨ä¸­ï¼Œä¹Ÿå¯ä»¥å°†æŸä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œè¿˜å¯ä»¥å°†æŸä¸ªå‡½æ•°ä½œä¸ºå…¶ä»–å‡½æ•°çš„è¿”å›å€¼è¿”å›ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>â€œè¯æ³•å®šç•Œâ€æ„å‘³ç€Luaè¯­è¨€ä¸­çš„å‡½æ•°å¯ä»¥è®¿é—®åŒ…å«å…¶è‡ªèº«çš„å¤–éƒ¨å‡½æ•°ä¸­çš„å˜é‡ã€‚<br>ä¸Šè¿°ä¸¤ä¸ªç‰¹è¡Œè”åˆèµ·æ¥ä¸ºLuaè¯­è¨€å¸¦æ¥äº†æå¤§çš„çµæ´»æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥é€šè¿‡é‡æ–°å®šä¹‰å‡½æ•°æ¥å¢åŠ æ–°åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ“¦é™¤å‡½æ•°æ¥ä¸ºä¸å—ä¿¡ä»»çš„ä»£ç åˆ›å»ºä¸€ä¸ªå®‰å…¨çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä¸Šè¿°ä¸¤ä¸ªç‰¹è¡Œå…è®¸æˆ‘ä»¬åœ¨Luaè¯­è¨€ä¸­ä½¿ç”¨å¾ˆå¤šå‡½æ•°å¼è¯­è¨€çš„å¼ºå¤§ç¼–ç¨‹æŠ€å·§ã€‚å³ä½¿å¯¹å‡½æ•°å¼ç¼–ç¨‹æ¯«æ— å…´è¶£ï¼Œä¹Ÿä¸å¦¨å­¦ä¹ ä¸‹å¦‚ä½•ä½¿ç”¨è¿™äº›æŠ€å·§ã€‚å› ä¸ºè¿™äº›æŠ€å·§å¯ä»¥ä½¿ç¨‹åºå˜å¾—æ›´åŠ å°å·§å’Œç®€å•ã€‚</p>
<h2 id="å‡½æ•°æ˜¯ç¬¬ä¸€ç±»å€¼"><a href="#å‡½æ•°æ˜¯ç¬¬ä¸€ç±»å€¼" class="headerlink" title="å‡½æ•°æ˜¯ç¬¬ä¸€ç±»å€¼"></a>å‡½æ•°æ˜¯ç¬¬ä¸€ç±»å€¼</h2><p>å¦‚å‰æ‰€è¿°ï¼ŒLuaè¯­è¨€ä¸­çš„å‡½æ•°æ˜¯ç¬¬ä¸€ç±»å€¼ã€‚ä»¥ä¸‹çš„ç¤ºä¾‹æ¼”ç¤ºäº†ç¬¬ä¸€ç±»å€¼çš„å«ä¹‰ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;p = <span class="built_in">print</span>&#125;				<span class="comment">-- &#x27;a.p&#x27;æŒ‡å‘&#x27;print&#x27;å‡½æ•°</span></span><br><span class="line">a.p(<span class="string">&quot;Hello World&quot;</span>)			<span class="comment">-- HEllo World</span></span><br><span class="line"><span class="built_in">print</span> = <span class="built_in">math</span>.<span class="built_in">sin</span>			<span class="comment">-- &#x27;print&#x27;ç°åœ¨æŒ‡å‘sineå‡½æ•°</span></span><br><span class="line">a.p(<span class="built_in">print</span>(<span class="number">1</span>))				<span class="comment">-- 0.8414709848079</span></span><br><span class="line"><span class="built_in">math</span>.<span class="built_in">sin</span> = a.p 				<span class="comment">-- &#x27;sin&#x27;ç°åœ¨æŒ‡å‘printå‡½æ•°</span></span><br><span class="line"><span class="built_in">math</span>.<span class="built_in">sin</span>(<span class="number">10</span>,<span class="number">20</span>)				<span class="comment">-- 10	20</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‡½æ•°ä¹Ÿæ˜¯å€¼çš„è¯ï¼Œé‚£ä¹ˆæ˜¯å¦æœ‰åˆ›å»ºå‡½æ•°çš„è¡¨è¾¾å¼å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚äº‹å®ä¸Šï¼ŒLuaè¯­è¨€ä¸­å¸¸è§çš„å‡½æ•°å®šä¹‰æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(x)</span></span> <span class="keyword">return</span> <span class="number">2</span>*x <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å°±æ˜¯æ‰€è°“çš„è¯­æ³•ç³–çš„ä¾‹å­ï¼Œå®ƒåªæ˜¯ä¸‹é¢è¿™ç§å†™æ³•çš„ä¸€ç§ç¾åŒ–å½¢å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">foo = <span class="function"><span class="keyword">function</span><span class="params">(x)</span></span> <span class="keyword">return</span> <span class="number">2</span>*x <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>èµ‹å€¼è¯­å¥å³è¾¹çš„è¡¨è¾¾å¼(function(x) body end)å°±æ˜¯å‡½æ•°æ„é€ å™¨ï¼Œä¸è¡¨æ„é€ å™¨{}ç›¸ä¼¼ã€‚å› æ­¤ï¼Œå‡½æ•°å®šä¹‰å®é™…ä¸Šå°±æ˜¯åˆ›å»ºç±»å‹ä¸ºâ€functionâ€çš„å€¼å¹¶æŠŠå¥¹èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡çš„è¯­å¥ã€‚<br>è¯·æ³¨æ„ï¼Œåœ¨Luaè¯­è¨€ä¸­ï¼Œæ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯åŒ¿åçš„ã€‚åƒå…¶ä»–æ‰€æœ‰çš„å€¼ä¸€æ ·ï¼Œå‡½æ•°å¹¶æ²¡æœ‰åå­—ã€‚å½“è®¨è®ºå‡½æ•°æ—¶ï¼Œæ¯”å¦‚printï¼Œå®é™…ä¸ŠæŒ‡çš„æ˜¯ä¿å­˜å‡½æ•°çš„å˜é‡ã€‚è™½ç„¶æˆ‘ä»¬é€šå¸¸ä¼šæŠŠå‡½æ•°èµ‹å€¼ç»™å…¨å±€å˜é‡ï¼Œä»è€Œçœ‹ä¼¼ç»™å‡½æ•°èµ·äº†ä¸€ä¸ªåå­—ï¼Œä½†åœ¨å¾ˆå¤šåœºæ™¯ä¸‹ä»ç„¶ä¼šä¿ç•™å‡½æ•°çš„åŒ¿åæ€§ã€‚<br>è¡¨æ ‡å‡†åº“æä¾›äº†å‡½æ•°table.sortï¼Œè¯¥å‡½æ•°ä»¥ä¸€ä¸ªè¡¨ä¸ºå‚æ•°å¹¶å¯¹å…¶ä¸­çš„å…ƒç´ æ’åºã€‚è¿™ç§å‡½æ•°å¿…é¡»æ”¯æŒå„ç§å„æ ·çš„æ’åºæ–¹å¼ï¼šå‡åºæˆ–é™åºã€æŒ‰æ•°å€¼é¡ºåºæˆ–æŒ‰å­—æ¯é¡ºåºã€æŒ‰è¡¨ä¸­çš„é”®ç­‰ã€‚å‡½æ•°sortå¹¶æ²¡æœ‰è¯•å›¾ç©·å°½æ‰€æœ‰çš„æ’åºæ–¹å¼ï¼Œè€Œæ˜¯æä¾›äº†ä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æ’åºå‡½æ•°ï¼Œæ’åºå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°å¹¶æ ¹æ®ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å¦åº”æ’åœ¨ç¬¬äºŒä¸ªå…ƒç´ ä¹‹å‰è¿”å›ä¸åŒçš„å€¼ã€‚<br>å‡å¦‚ï¼Œæœ‰ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„è¡¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">network = &#123;</span><br><span class="line">	&#123;name = <span class="string">&quot;grauna&quot;</span> , IP = <span class="string">&quot;210,26.30.34&quot;</span>&#125;,</span><br><span class="line">	&#123;name = <span class="string">&quot;arraial&quot;</span>, IP = <span class="string">&quot;210,26,30,23&quot;</span>&#125;,</span><br><span class="line">	&#123;name = <span class="string">&quot;lua&quot;</span>,	   IP = <span class="string">&quot;210,26,23,12&quot;</span>&#125;,</span><br><span class="line">	&#123;name = <span class="string">&quot;derain&quot;</span>,  IP = <span class="string">&quot;210,26,23,20&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³é’ˆå¯¹nameå­—æ®µã€æŒ‰å­—æ¯é¡ºåºé€†åºå¯¹è¿™ä¸ªè¡¨æ’åºï¼Œåªéœ€ä½¿ç”¨ä¸‹é¢è¯­å¥ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">talbe.<span class="built_in">sort</span>(network,<span class="function"><span class="keyword">function</span> <span class="params">(a,b)</span></span> <span class="keyword">return</span> (a.name &gt; b.name) <span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>
<p>å¯è§ï¼ŒåŒ¿åå‡½æ•°åœ¨è¿™æ¡è¯­å¥ä¸­æ˜¾ç¤ºå‡ºäº†å¾ˆå¥½çš„ä¾¿åˆ©æ€§ã€‚<br>åƒå‡½æ•°sortè¿™æ ·ä»¥å¦ä¸€ä¸ªå‡½æ•°ä¸ºå‚æ•°çš„å‡½æ•°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºé«˜é˜¶å‡½æ•°ã€‚é«˜é˜¶å‡½æ•°æ˜¯ä¸€ç§å¼ºå¤§çš„ç¼–ç¨‹æœºåˆ¶ï¼Œè€Œåˆ©ç”¨åŒ¿åå‡½æ•°ä½œä¸ºå‚æ•°æ­£å¼å…¶çµæ´»æ€§çš„ä¸»è¦æ¥æºã€‚ä¸è¿‡å°½ç®¡å¦‚æ­¤ï¼Œè¯·è®°ä½é«˜é˜¶å‡½æ•°ä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„ï¼Œå®ƒä»¬åªæ˜¯Luaè¯­è¨€å°†å‡½æ•°ä½œä¸ºç¬¬ä¸€ç±»å€¼å¤„ç†æ‰€å¸¦æ¥çš„ç›´æ¥ä½“ç°ã€‚<br>ä¸ºäº†è¿›ä¸€æ­¥æ¼”ç¤ºé«˜é˜¶å‡½æ•°çš„ç”¨æ³•ï¼Œè®©æˆ‘ä»¬å†æ¥å®ç°ä¸€ä¸ªå¸¸è§çš„é«˜é˜¶å‡½æ•°ï¼Œå³å¯¼æ•°ã€‚æŒ‰ç…§é€šå¸¸çš„å®šä¹‰ï¼Œå‡½æ•°fçš„å¯¼æ•°ä¸º$fâ€™(x) &#x3D; (f(x + d) - f(x))&#x2F;d$,å…¶ä¸­dè¶‹å‘äºæ— ç©·å°ã€‚æ ¹æ®è¿™ä¸ªå®šä¹‰ï¼Œå¯ä»¥èµ¢å¦‚ä¸‹æ–¹å¼è¿‘ä¼¼ç¬¬è®¡ç®—å¯¼æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">derivative</span> <span class="params">(f,delta)</span></span></span><br><span class="line">	delta = delta <span class="keyword">or</span> <span class="number">1e-4</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(x)</span></span></span><br><span class="line">		<span class="keyword">return</span> (f(x + delta) - f(x))/delta</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºæŒ‡å®šçš„å‡½æ•°fï¼Œè°ƒç”¨derivative(f)å°†è¿”å›å…¶å¯¼æ•°ï¼Œä¹Ÿå°±æ˜¯å¦ä¸€ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">c = derivative(<span class="built_in">math</span>.<span class="built_in">sin</span>)</span><br><span class="line">&gt; <span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">cos</span>(<span class="number">5.2</span>),c(<span class="number">5.2</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">cos</span>(<span class="number">10</span>),c(<span class="number">10</span>)) 		</span><br></pre></td></tr></table></figure>
<h2 id="éå…¨å±€å‡½æ•°"><a href="#éå…¨å±€å‡½æ•°" class="headerlink" title="éå…¨å±€å‡½æ•°"></a>éå…¨å±€å‡½æ•°</h2><p>ç”±äºå‡½æ•°æ˜¯ä¸€ç§â€œç¬¬ä¸€ç±»å€¼â€ï¼Œå› æ­¤ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„ç»“æœå°±æ˜¯ï¼šå‡½æ•°ä¸ä»…å¯ä»¥è¢«å­˜å‚¨åœ¨å…¨å±€å˜é‡ä¸­ï¼Œè¿˜å¯ä»¥è¢«å­˜å‚¨åœ¨è¡¨å­—æ®µå’Œå±€éƒ¨å˜é‡ä¸­ã€‚<br>åˆ›å»ºå‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Lib = &#123;&#125;</span><br><span class="line">Lib.foo = <span class="function"><span class="keyword">function</span><span class="params">(x,y)</span></span> <span class="keyword">return</span> x + y <span class="keyword">end</span></span><br><span class="line">Lib.goo = <span class="function"><span class="keyword">function</span><span class="params">(x,y)</span></span> <span class="keyword">return</span> x - y <span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(Lib.foo(<span class="number">2</span>,<span class="number">3</span>),Lib.goo(<span class="number">2</span>,<span class="number">3</span>))		<span class="comment">-- 5 -1</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä½¿ç”¨è¡¨æ„é€ å™¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Lib = &#123;</span><br><span class="line">	foo = <span class="function"><span class="keyword">function</span><span class="params">(x,y)</span></span> <span class="keyword">return</span> x + y <span class="keyword">end</span></span><br><span class="line">	goo = <span class="function"><span class="keyword">function</span><span class="params">(X,y)</span></span> <span class="keyword">return</span> x - y <span class="keyword">end</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é™¤æ­¤ä»¥å¤–ï¼ŒLuaè¯­è¨€è¿˜æä¾›äº†å¦ä¸€ç§ç‰¹æ®Šçš„è¯­è¨€æ¥å®šä¹‰è¿™ç±»å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Lib = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Lib.foo</span><span class="params">(x,y)</span></span> <span class="keyword">return</span> x + y <span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Lib.goo</span><span class="params">(x,y)</span></span> <span class="keyword">return</span> x - y <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¡¨å­—æ®µä¸­å­˜å‚¨å‡½æ•°æ˜¯Luaè¯­è¨€ä¸­å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å…³é”®è¦ç´ ã€‚<br>å½“æŠŠä¸€ä¸ªå‡½æ•°å­˜å‚¨åˆ°å±€éƒ¨å˜é‡æ—¶ï¼Œå°±å¾—åˆ°ä¸€ä¸ªå±€éƒ¨å‡½æ•°ï¼Œå³ä¸€ä¸ªè¢«é™å®šåœ¨æŒ‡å®šä½œç”¨åŸŸä¸­ä½¿ç”¨çš„å‡½æ•°ã€‚å±€éƒ¨å‡½æ•°å¯¹äºåŒ…è€Œè¨€å°¤å…¶æœ‰ç”¨ï¼šç”±äºLuaè¯­è¨€å°†æ¯ä¸ªç¨‹åºæ®µä½œä¸ºä¸€ä¸ªå‡½æ•°å¤„ç†ï¼Œæ‰€ä»¥åœ¨ä¸€æ®µç¨‹åºä¸­å£°æ˜çš„å‡½æ•°å°±æ˜¯å±€éƒ¨å‡½æ•°ï¼Œè¿™äº›å±€éƒ¨å‡½æ•°åªåœ¨è¯¥ç¨‹åºæ®µä¸­å¯è§ã€‚è¯æ³•å®šç•Œä¿è¯äº†ç¨‹åºæ®µä¸­çš„å…¶ä»–å‡½æ•°å¯ä»¥ä½¿ç”¨è¿™äº›å±€éƒ¨å‡½æ•°ã€‚<br>å¯¹äºè¿™ç§å±€éƒ¨å‡½æ•°çš„ä½¿ç”¨ï¼ŒLuaè¯­è¨€æä¾›äº†ä¸€ç§è¯­æ³•ä»–é‚£ä¸ªï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span> <span class="params">(params)</span></span></span><br><span class="line">	body</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å®šä¹‰å±€éƒ¨é€’å½’å‡½æ•°æ—¶ï¼Œç”±äºåŸæ¥çš„æ–¹æ³•ä¸ä½¿ç”¨ï¼Œæ‰€æœ‰æœ‰ä¸€ç‚¹æ˜¯ææ˜“å‡ºé”™çš„ã€‚è€ƒè™‘å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> fact = <span class="function"><span class="keyword">function</span><span class="params">(n)</span></span></span><br><span class="line">	<span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> n * fact(n<span class="number">-1</span>)   <span class="comment">--æœ‰é—®é¢˜</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å½“Luaè¯­è¨€ç¼–è¯‘å‡½æ•°ä½“ä¸­çš„fact(n-1)è°ƒç”¨æ—¶ï¼Œå±€éƒ¨çš„factå°šæœªå®šä¹‰ã€‚å› æ­¤ï¼Œè¿™ä¸ªè¡¨è¾¾å¼ä¼šå°è¯•è°ƒç”¨å…¨å±€çš„factè€Œéå±€éƒ¨çš„factã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å…ˆå®šä¹‰å±€éƒ¨å˜é‡å†å®šä¹‰å‡½æ•°çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> fact</span><br><span class="line">fact = <span class="function"><span class="keyword">function</span><span class="params">(n)</span></span></span><br><span class="line">	<span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> n * fact(n<span class="number">-1</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œå‡½æ•°å†…çš„factæŒ‡å‘çš„æ˜¯å±€éƒ¨å˜é‡ã€‚å°½ç®¡åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œè¿™ä¸ªå±€éƒ¨å˜é‡çš„å€¼å°šæœªç¡®å®šï¼Œä½†åˆ°äº†æ‰§è¡Œå‡½æ•°æ—¶ï¼Œfactè‚¯å®šæœ‰äº†æ­£ç¡®çš„èµ‹å€¼ã€‚<br>å½“Luaè¯­è¨€å±•å¼€å±€éƒ¨å‡½æ•°çš„è¯­æ³•ç³–æ—¶ï¼Œä½¿ç”¨çš„å¹¶ä¸æ˜¯ä¹‹å‰çš„åŸºæœ¬å‡½æ•°å®šä¹‰ã€‚ç›¸åï¼Œå½¢å¦‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(params)</span></span> body <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>çš„å®šä¹‰ä¼šè¢«å±•å¼€æˆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">local foo; foo = function(params) body end</span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œä½¿ç”¨è¿™ä¸ªè¯­æ³•æ¥å®šä¹‰é€’å½’å‡½æ•°ä¸ä¼šæœ‰é—®é¢˜ã€‚<br>å½“ç„¶ï¼Œè¿™ä¸ªæŠ€å·§å¯¹äºç®€ä»‹é€’å½’å‡½æ•°æ˜¯æ— æ•ˆçš„ã€‚åœ¨é—´æ¥é€’å½’çš„æƒ…å†µä¸‹ï¼Œå¿…é¡»ä½¿ç”¨ä¸æ˜ç¡®çš„å‰å‘å£°æ˜ç­‰ä»·çš„å½¢å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">local f </span><br><span class="line"></span><br><span class="line">local function <span class="title function_">g</span><span class="params">()</span></span><br><span class="line">	some code <span class="title function_">f</span><span class="params">()</span> some code</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">function <span class="title function_">f</span><span class="params">()</span></span><br><span class="line">	some code <span class="title function_">g</span><span class="params">()</span> some code</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œä¸èƒ½åœ¨æœ€åä¸€ä¸ªå‡½æ•°å®šä¹‰å‰åŠ ä¸Šlocalã€‚å¦åˆ™ï¼ŒLuaè¯­è¨€ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å±€éƒ¨å˜é‡fï¼Œä»è€Œä½¿å¾—å…ˆå‰å£°æ˜çš„få˜ä¸ºæœªå®šä¹‰çŠ¶æ€ã€‚</p>
<h2 id="è¯æ³•å®šç•Œ"><a href="#è¯æ³•å®šç•Œ" class="headerlink" title="è¯æ³•å®šç•Œ"></a>è¯æ³•å®šç•Œ</h2><p>å½“ç¼–å†™ä¸€ä¸ªè¢«å…¶ä»–å‡½æ•°BåŒ…å«çš„å‡½æ•°Aæ—¶ï¼Œè¢«åŒ…å«çš„å‡½æ•°Aå¯ä»¥è®¿é—®åŒ…å«å…¶çš„å‡½æ•°Bçš„æ‰€æœ‰å±€éƒ¨å˜é‡ï¼Œæˆ‘ä»¬å°†è¿™ç§ç‰¹è¡Œç§°ä¸ºè¯æ³•å®šç•Œã€‚è™½ç„¶è¿™ç§å¯è§æ€§è§„åˆ™å¬ä¸Šå»å¾ˆæ˜ç¡®ï¼Œä½†å®é™…ä¸Šå¹¶éå¦‚æ­¤ã€‚è¯æ³•å®šç•Œå¤–åŠ åµŒå¥—çš„ç¬¬ä¸€ç±»å€¼å‡½æ•°å¯ä»¥ä¸ºç¼–ç¨‹è¯­è¨€æä¾›å¼ºå¤§çš„åŠŸèƒ½ï¼Œä½†å¾ˆå¤šç¼–ç¨‹è¯­è¨€å¹¶ä¸æ”¯æŒå°†è¿™ä¸¤è€…ç»„åˆä½¿ç”¨ã€‚<br>å…ˆçœ‹ä¸€ä¸ªä¾‹å­ã€‚å‡è®¾æœ‰ä¸€ä¸ªè¡¨ï¼Œå…¶ä¸­åŒ…å«äº†å­¦ç”Ÿçš„å§“åå’Œå¯¹åº”çš„æˆç»©ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åŸºäºåˆ†æ•°å¯¹å­¦ç”Ÿå§“åæ’åºï¼Œåˆ†æ•°é«˜è€…åœ¨å‰ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç å®Œæˆä¸Šè¿°éœ€æ±‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">name = &#123;<span class="string">&quot;Peter&quot;</span>,<span class="string">&quot;Paul&quot;</span>,<span class="string">&quot;MAry&quot;</span>&#125;</span><br><span class="line">grades = &#123;Mary = <span class="number">10</span>, Paul = <span class="number">7</span>, Peter = <span class="number">8</span>&#125;</span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">sort</span>(names,<span class="function"><span class="keyword">function</span><span class="params">(n1,n2)</span></span></span><br><span class="line">	<span class="keyword">return</span> grades[n1] &gt; grades[n2]</span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortbygrade</span><span class="params">(names,grades)</span></span></span><br><span class="line">	<span class="built_in">table</span>.<span class="built_in">sort</span>( names, <span class="function"><span class="keyword">function</span><span class="params">(n1,n2)</span></span></span><br><span class="line">		<span class="keyword">return</span> grades[n1] &gt; grades[n2]</span><br><span class="line">	<span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨åä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œæœ‰è¶£çš„ä¸€ç‚¹å°±åœ¨äºä¼ ç»™å‡½æ•°sortçš„åŒ¿åå‡½æ•°å¯ä»¥è®¿é—®grades,è€Œgradesæ˜¯åŒ…å«åŒ¿åå‡½æ•°çš„å¤–å±‚å‡½æ•°sortbygradeçš„å½¢å‚ã€‚åœ¨è¯¥åŒ¿åå‡½æ•°ä¸­ï¼Œgradesæ—¢ä¸æ˜¯å…¨å±€å˜é‡ä¹Ÿä¸æ˜¯å±€éƒ¨å˜é‡ï¼Œè€Œæ˜¯æˆ‘ä»¬æ‰€è¯´çš„éå±€éƒ¨å˜é‡ã€‚<br>è¿™ä¸€ç‚¹ä¹‹æ‰€æœ‰å¦‚æ­¤æœ‰è¶£æ˜¯å› ä¸ºå‡½æ•°ä½œä¸ºç¬¬ä¸€ç±»å€¼ï¼Œèƒ½å¤Ÿé€ƒé€¸å‡ºå®ƒä»¬å˜é‡çš„åŸå§‹å®šç•ŒèŒƒå›´ã€‚è€ƒè™‘å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newCounter</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">local</span> count = <span class="number">0</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">		count = count + <span class="number">1</span></span><br><span class="line">		<span class="keyword">return</span> count</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">c1 = newCounter()</span><br><span class="line"><span class="built_in">print</span>(c1())			<span class="comment">-- 1</span></span><br><span class="line">pirnt(c2())			<span class="comment">-- 2</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒåŒ¿åå‡½æ•°è®¿é—®äº†ä¸€ä¸ªéå±€éƒ¨å˜é‡å¹¶å°†å…¶å½“ä½œè®¡æ•°å™¨ã€‚ç„¶è€Œï¼Œæ¸¸è‰ºåˆ›å»ºå˜é‡çš„å‡½æ•°å·²ç»è¿”å›ï¼Œå› æ­¤å½“æˆ‘ä»¬è°ƒç”¨åŒ¿åå‡½æ•°æ—¶ï¼Œå˜é‡countä¼¼ä¹å·²ç»è¶…å‡ºäº†ä½œç”¨èŒƒå›´ã€‚ä½†å…¶å®ä¸ç„¶ï¼Œç”±äºé—­åŒ…æ¦‚å¿µçš„å­˜åœ¨ï¼ŒLuaè¯­è¨€èƒ½å¤Ÿæ­£ç¡®åœ°åº”å¯¹è¿™ç§æƒ…å†µã€‚ç®€å•åœ°è¯´ï¼Œä¸€ä¸ªé—­åŒ…å°±æ˜¯ä¸€ä¸ªå‡½æ•°å¤–åŠ èƒ½å¤Ÿä½¿è¯¥å‡½æ•°æ­£ç¡®è®¿é—®éå±€éƒ¨å˜é‡æ‰€éœ€çš„å…¶ä»–æœºåˆ¶ã€‚å¦‚æœæˆ‘ä»¬å†æ¬¡è°ƒç”¨newCounterï¼Œé‚£ä¹ˆä¸€ä¸ªæ–°çš„å±€éƒ¨å˜é‡countå’Œä¸€ä¸ªæ–°çš„é—­åŒ…ä¼šè¢«åˆ›å»ºå‡ºæ¥ï¼Œè¿™ä¸ªæ–°çš„é—­åŒ…é’ˆå¯¹çš„æ˜¯è¿™ä¸ªæ–°å˜é‡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">c2 = newCounter()</span><br><span class="line"><span class="built_in">print</span>(c2())			<span class="comment">-- 1</span></span><br><span class="line"><span class="built_in">print</span>(c1())			<span class="comment">-- 3</span></span><br><span class="line"><span class="built_in">print</span>(c3())			<span class="comment">-- 2</span></span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œc1å’Œc2æ˜¯ä¸åŒçš„é—­åŒ…ã€‚å®ƒä»¬å»ºç«‹åœ¨ç›¸åŒçš„å‡½æ•°ä¹‹ä¸Šï¼Œä½†æ˜¯å„è‡ªæ‹¥æœ‰å±€éƒ¨å˜é‡countçš„ç‹¬ç«‹å®ä¾‹ã€‚<br>ä»æŠ€æœ¯ä¸Šè®²ï¼ŒLuaè¯­è¨€ä¸­åªæœ‰é—­åŒ…è€Œæ²¡æœ‰å‡½æ•°ã€‚å‡½æ•°æœ¬èº«åªæ˜¯é—­åŒ…çš„ä¸€ç§åŸå‹ã€‚ä¸è¿‡å°½ç®¡å¦‚æ­¤ï¼Œåªè¦ä¸ä¼šå¼•èµ·æ··æ·†ï¼Œæˆ‘ä»¬å°±ä»å°†ä½¿ç”¨æœ¯è¯­â€œå‡½æ•°â€æ¥æŒ‡ä»£é—­åŒ…ã€‚<br>é—­åŒ…åœ¨è®¸å¤šåœºåˆä¸­å‡æ˜¯ä¸€ç§æœ‰ä»·å€¼çš„å·¥å…·ã€‚é—­åŒ…åœ¨ä½œä¸ºè¯¸å¦‚sortè¿™æ ·çš„é«˜é˜¶å‡½æ•°çš„å‚æ•°æ—¶å°±éå¸¸æœ‰ç”¨ã€‚åŒæ ·ï¼Œé—­åŒ…å¯¹äºé‚£äº›åˆ›å»ºäº†å…¶ä»–å‡½æ•°çš„å‡½æ•°ä¹Ÿå¾ˆæœ‰ç”¨ã€‚è¿™ç§æœºåˆ¶ä½¿å¾—Luaç¨‹åºèƒ½å¤Ÿç»¼åˆè¿ç”¨å‡½æ•°å¼ç¼–ç¨‹ä¸–ç•Œä¸­å¤šç§ç²¾å¦™çš„ç¼–ç¨‹æŠ€å·§ã€‚å¦å¤–ï¼Œé—­åŒ…å¯¹äºå›è°ƒå‡½æ•°æ¥è¯´ä¹Ÿå¾ˆæœ‰ç”¨ã€‚å¯¹äºå›è°ƒå‡½æ•°è€Œè¨€ï¼Œä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯åœ¨ä¼ ç»ŸGUIå·¥å…·ç®±ä¸­åˆ›å»ºæŒ‰é’®ã€‚æ¯ä¸ªæŒ‰é’®é€šå¸¸éƒ½å¯¹åº”ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“ç”¨æˆ·æŒ‰ä¸‹æŒ‰é’®æ—¶ï¼Œå®Œæˆä¸åŒçš„å¤„ç†åŠ¨ä½œçš„å›è°ƒå‡½æ•°å°±ä¼šè¢«è°ƒç”¨ã€‚<br>ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªå…·æœ‰10ä¸ªç±»ä¼¼æŒ‰é’®çš„æ•°å­—è®¡ç®—å™¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‡½æ•°æ¥åˆ›å»ºè¿™äº›æŒ‰é’®ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">digitButton</span><span class="params">(digit)</span></span></span><br><span class="line">	<span class="keyword">return</span> Button&#123; label = <span class="built_in">tostring</span>(digit),</span><br><span class="line">		action = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">			add_to_display(digit)</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå‡è®¾Buttonæ˜¯ä¸€ä¸ªåˆ›å»ºæ–°æŒ‰é’®çš„å·¥å…·ç®±å‡½æ•°ï¼Œlabelæ˜¯æŒ‰é’®çš„æ ‡ç­¾ï¼Œactionæ˜¯å½“æŒ‰é’®æŒ‰ä¸‹æ—¶è¢«è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚å›è°ƒå¯èƒ½å‘ç”Ÿåœ¨å‡½æ•°digitButtonæ—©å·²æ‰§è¡Œå®Œåï¼Œé‚£æ—¶å˜é‡digitå·²ç»è¶…å‡ºäº†ä½œç”¨èŒƒå›´ï¼Œä½†é—­åŒ…ä»å¯ä»¥è®¿é—®å®ƒã€‚<br>é—­åŒ…åœ¨å¦ä¸€ç§å¾ˆä¸ä¸€æ ·çš„åœºæ™¯ä¸‹ä¹Ÿéå¸¸æœ‰ç”¨ã€‚ç”±äºå‡½æ•°å¯ä»¥ä¿å­˜åœ¨æ™®é€šå˜é‡ä¸­ï¼Œå› æ­¤åœ¨Luaè¯­è¨€ä¸­å¯ä»¥è½»æ¾åœ°é‡æ–°å®šä¹‰å‡½æ•°ï¼Œç”šè‡³æ˜¯é¢„å®šä¹‰å‡½æ•°ã€‚è¿™ç§æœºåˆ¶ä¹Ÿæ­£æ˜¯Luaè¯­è¨€çµæ´»çš„åŸå› ä¹‹ä¸€ã€‚é€šå¸¸ï¼Œå½“é‡æ–°å®šä¹‰ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ–°çš„å®ç°ä¸­è°ƒç”¨åŸæ¥çš„é‚£ä¸ªå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå‡è®¾è¦é‡æ–°å®šä¹‰å‡½æ•°sinä»¥ä½¿å…¶å‚æ•°ä»¥è§’åº¦ä¸ºå•ä½è€Œä¸æ˜¯ä»¥å¼§åº¦ä¸ºå•ä½ã€‚é‚£ä¹ˆè¿™ä¸ªæ–°å‡½æ•°å°±å¯ä»¥å…ˆå¯¹å‚æ•°è¿›è¡Œè½¬æ¢ï¼Œç„¶åå†è°ƒç”¨åŸæ¥çš„sinå‡½æ•°è¿›è¡ŒçœŸæ­£çš„è®¡ç®—ã€‚ä»£ç å¯èƒ½å½¢å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> oldSin - <span class="built_in">math</span>.<span class="built_in">sin</span> </span><br><span class="line"><span class="built_in">math</span>.<span class="built_in">sin</span> = <span class="function"><span class="keyword">function</span><span class="params">(x)</span></span></span><br><span class="line">	<span class="keyword">return</span> oldSin(x * (<span class="built_in">math</span>.<span class="built_in">pi</span>/<span class="number">180</span>))</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ç§æ›´æ¸…æ™°ä¸€ç‚¹çš„å®Œæˆé‡æ–°å®šä¹‰çš„å†™æ³•æ˜¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span> </span><br><span class="line">	<span class="keyword">local</span> oldSin = <span class="built_in">math</span>.<span class="built_in">sin</span> </span><br><span class="line">	<span class="keyword">local</span> k = <span class="built_in">math</span>.<span class="built_in">pi</span>/<span class="number">180</span></span><br><span class="line">	<span class="built_in">math</span>.<span class="built_in">sin</span> = <span class="function"><span class="keyword">function</span><span class="params">(x)</span></span></span><br><span class="line">		<span class="keyword">return</span> oldSin(x * k)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ä½¿ç”¨äº†doä»£ç æ®µæ¥é™åˆ¶å±€éƒ¨å˜é‡oldSinçš„ä½œç”¨èŒƒå›´ï¼›æ ¹æ®å¯è§æ€§è§„åˆ™ï¼Œå±€éƒ¨å˜é‡oldSinåªåœ¨è¿™éƒ¨åˆ†ä»£ç æ®µä¸­æœ‰æ•ˆã€‚å› æ­¤ï¼Œåªæœ‰æ–°ç‰ˆæœ¬çš„å‡½æ•°sinæ‰èƒ½è®¿é—®åŸæ¥çš„sinå‡½æ•°ï¼Œå…¶ä»–éƒ¨åˆ†çš„ä»£ç åˆ™è®¿é—®ä¸äº†ã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæ ·çš„æŠ€å·§æ¥åˆ›å»ºå®‰å…¨çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå³æ‰€è°“çš„æ²™ç›’ã€‚å½“æ‰§è¡Œä¸€äº›è¯¸å¦‚ä»è¿œç¨‹æœåŠ¡å™¨ä¸Šä¸‹è½½åˆ°çš„æœªå—ä¿¡ä»»ä»£ç æ—¶ï¼Œå®‰å…¨çš„è¿è¡Œæ—¶ç¯å¢ƒéå¸¸é‡è¦ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨é—­åŒ…é‡å®šä¹‰å‡½æ•°io.openæ¥é™åˆ¶ä¸€ä¸ªç¨‹åºèƒ½å¤Ÿè®¿é—®çš„æ–‡ä»¶ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span> </span><br><span class="line">	<span class="keyword">local</span> oldOpen = <span class="built_in">io</span>.<span class="built_in">open</span></span><br><span class="line">	<span class="keyword">local</span> access_OK - <span class="function"><span class="keyword">function</span> <span class="params">(filename, mode)</span></span></span><br><span class="line">		check access </span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="built_in">io</span>.<span class="built_in">open</span> = <span class="function"><span class="keyword">function</span> <span class="params">(filename ,mode)</span></span></span><br><span class="line">		<span class="keyword">if</span> access_OK(filename, mode) <span class="keyword">then</span></span><br><span class="line">			<span class="keyword">return</span> oldOpen(filename,mode)</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> <span class="literal">nil</span>, <span class="string">&quot;access denied&quot;</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ç¤ºä¾‹çš„å·§å¦™ä¹‹å¤„åœ¨äºï¼Œåœ¨ç»è¿‡é‡æ–°å®šä¹‰åï¼Œä¸€ä¸ªç¨‹åºå°±åªèƒ½é€šè¿‡æ–°çš„å—é™ç‰ˆæœ¬æ¥è°ƒç”¨åŸæ¥æœªå—é™ç‰ˆæœ¬çš„io.openå‡½æ•°ã€‚ç¤ºä¾‹ä»£ç å°†åŸæ¥ä¸å®‰å…¨çš„ç‰ˆæœ¬ä¿å­˜ä¸ºé—­åŒ…çš„ä¸€ä¸ªç§æœ‰å˜é‡ï¼Œè¯¥å˜é‡æ— æ³•ä»å¤–éƒ¨è®¿é—®ã€‚é€šè¿‡è¿™ä¸€æŠ€å·§ï¼Œå°±å¯ä»¥åœ¨ä¿è¯ç®€æ´æ€§å’Œçµæ´»æ€§çš„å‰æä¸‹åœ¨Luaè¯­è¨€æœ¬èº«ä¸Šæ„å»ºLuaæ²™ç›’ã€‚ç›¸å¯¹äºæä¾›ä¸€å¥—å¤§è€Œå…¨çš„è§£å†³æ–¹æ¡ˆï¼ŒLuaè¯­è¨€æä¾›çš„æ˜¯ä¸€å¥—â€œå…ƒæœºåˆ¶â€ï¼Œå€ŸåŠ©è¿™ç§æœºåˆ¶å¯ä»¥æ ¹æ®ç‰¹å®šçš„å®‰å…¨éœ€æ±‚æ¥è£å‰ªå…·ä½“çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚</p>
<h2 id="å°è¯•å‡½æ•°å¼ç¼–ç¨‹"><a href="#å°è¯•å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="å°è¯•å‡½æ•°å¼ç¼–ç¨‹"></a>å°è¯•å‡½æ•°å¼ç¼–ç¨‹</h2><p>è¿™é‡Œï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯å¼€å‘ä¸€ä¸ªç”¨æ¥è¡¨ç¤ºå‡ ä½•åŒºåŸŸçš„ç³»ç»Ÿï¼Œå…¶ä¸­åŒºåŸŸå³ä¸ºç‚¹çš„å‡ ä½•ã€‚æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåˆ©ç”¨è¯¥ç³»ç»Ÿè¡¨ç¤ºå„ç§å„æ ·çš„å›¾å½¢ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ç»„åˆå’Œä¿®æ”¹è¿™äº›å›¾å½¢ã€‚<br>ä¸ºäº†å®ç°è¿™æ ·çš„ä¸€ä¸ªç³»ç»Ÿï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°è¡¨ç¤ºè¿™äº›å›¾å½¢çš„åˆç†æ•°æ®ç»“æ„ã€‚æˆ‘ä»¬å¯ä»¥å°è¯•ç€ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ¡ˆï¼Œåˆ©ç”¨ç»§æ‰¿æ¥æŠ½è±¡æŸäº›å›¾å½¢ï¼›æˆ–è€…ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ©ç”¨ç‰¹å¾å‡½æ•°æ¥è¿›è¡Œæ›´é«˜å±‚æ¬¡çš„æŠ½è±¡ã€‚é‰´äºä¸€ä¸ªå‡ ä½•åŒºåŸŸå°±æ˜¯ç‚¹çš„é›†åˆï¼Œå› æ­¤å¯ä»¥é€šè¿‡ç‰¹å¾å‡½æ•°æ¥è¡¨ç¤ºä¸€ä¸ªåŒºåŸŸï¼Œå³å¯ä»¥æä¾›ä¸€ä¸ªç‚¹å¹¶æ ¹æ®ç‚¹æ˜¯å¦å±äºæŒ‡å®šåŒºåŸŸè€Œè¿”å›çœŸæˆ–å‡çš„å‡½æ•°æ¥è¡¨ç¤ºä¸€ä¸ªåŒºåŸŸã€‚<br>ä¸¾ä¾‹æ¥è¯´ï¼Œä¸‹é¢çš„å‡½æ•°è¡¨ç¤ºä¸€ä¸ªç‚¹(1.0,3.0)ä¸ºåœ†å¿ƒã€åŠå¾„4.5çš„åœ†ç›˜ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">disk1</span><span class="params">(x,y)</span></span></span><br><span class="line">	<span class="keyword">return</span> (x - <span class="number">1.0</span>)^<span class="number">2</span> + (y - <span class="number">3.0</span>)^<span class="number">2</span> &lt;= <span class="number">4.5</span>^<span class="number">2</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨é«˜é˜¶å‡½æ•°å’Œè¯æ³•å®šç•Œï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å®šä¹‰ä¸€ä¸ªæ ¹æ®æŒ‡å®šçš„åœ†å¿ƒå’ŒåŠå¾„åˆ›å»ºåœ†ç›˜çš„å·¥å‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">disk</span><span class="params">(cx,cy,r)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(x,y)</span></span></span><br><span class="line">		<span class="keyword">return</span> (x - cx)^<span class="number">2</span> + (y - cy)^<span class="number">2</span> &lt;= r^<span class="number">2</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å½¢å¦‚disk(1.0,3.0,4.5)çš„è°ƒç”¨ä¼šåˆ›å»ºä¸€ä¸ªä¸disk1ç­‰ä»·çš„åœ†ç›˜ã€‚<br>ä¸‹é¢çš„å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å®šè¾¹ç•Œçš„è½´å¯¹ç§°çŸ©å½¢ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rect</span><span class="params">(left,right,bottom,up)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(x,y)</span></span></span><br><span class="line">		<span class="keyword">return</span> left &lt;= x <span class="keyword">and</span> x &lt;= right <span class="keyword">and</span> bottom &lt;= y <span class="keyword">and</span> y &lt;= up</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§ç±»ä¼¼çš„æ–¹å¼ï¼Œå¯ä»¥å®šä¹‰å‡½æ•°ä»¥åˆ›å»ºè¯¸å¦‚ä¸‰è§’å½¢æˆ–éè½´æ‰¿çŸ©å½¢ç­‰å…¶ä»–åŸºæœ¬å›¾å½¢ã€‚æ¯ä¸€ç§å›¾å½¢éƒ½å…·æœ‰å®Œå…¨ç‹¬ç«‹çš„å®ç°ï¼Œæ‰€éœ€çš„ä»…ä»…æ˜¯ä¸€ä¸ªæ­£ç¡®çš„ç‰¹å¾å‡½æ•°ã€‚<br>æ¥ä¸‹æ¥è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹å¦‚ä½•æ”¹å˜å’Œç»„åˆåŒºåŸŸã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°åˆ›å»ºä»»ä½•åŒºåŸŸçš„è¡¥é›†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">complement</span><span class="params">(r)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(x,y)</span></span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">not</span> r(x,y)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å¹¶é›†ã€äº¤é›†å’Œå·®é›†ä¹Ÿå¾ˆç®€å•ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ åŒºåŸŸçš„å¹¶é›†ã€äº¤é›†å’Œå·®é›†</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">union</span> <span class="params">(r1,r2)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(x,y)</span></span></span><br><span class="line">		<span class="keyword">return</span> r1(x,y) <span class="keyword">or</span> r2(x,y)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">intersection</span> <span class="params">(r1,r2)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(x,y)</span></span></span><br><span class="line">		<span class="keyword">return</span> r1(x,y) <span class="keyword">and</span> r2(x,y)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">difference</span> <span class="params">(r1,r2)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(x,y)</span></span></span><br><span class="line">		<span class="keyword">return</span> r1(x,y) <span class="keyword">and</span> <span class="keyword">not</span> r2(x,y)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹å‡½æ•°æŒ‰ç…§æŒ‡å®šçš„å¢é‡å¹³ç§»æŒ‡å®šçš„åŒºåŸŸï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">translate</span><span class="params">(r,dx,dy)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(x,y)</span></span></span><br><span class="line">		<span class="keyword">return</span> r(x - dx, y -dy)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†ä½¿ä¸€ä¸ªåŒºåŸŸå¯è§†åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥éå†æ¯ä¸ªåƒç´ è¿›è¡Œè§†å£æµ‹è¯•ï¼›ä½äºåŒºåŸŸå†…çš„åƒç´ è¢«ç»˜åˆ¶æˆé»‘è‰²ï¼Œè€Œä½äºåŒºåŸŸå¤–çš„åƒç´ è¢«ç»˜åˆ¶æˆç™½è‰²ã€‚ä¸ºäº†ç”¨ç®€å•çš„æ–¹å¼æ¼”ç¤ºè¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å†™ä¸€ä¸ªå‡½æ•°æ¥ç”Ÿæˆä¸€ä¸ªPBMæ ¼å¼çš„æ–‡ä»¶æ¥ç»˜åˆ¶æŒ‡å®šçš„åŒºåŸŸã€‚<br>PBMæ–‡ä»¶çš„ç»“æ„å¾ˆç®€å•ã€‚PBMæ–‡ä»¶çš„æ–‡æœ¬å½¢å¼ä»¥å­—ç¬¦ä¸²â€P1â€å¼€å¤´ï¼Œæ¥ä¸‹æ¥çš„ä¸€è¡Œæ˜¯å›¾ç‰‡çš„å®½å’Œé«˜ï¼Œç„¶åæ˜¯å¯¹åº”æ¯ä¸€ä¸ªåƒç´ ã€ç”±1å’Œ0ç»„æˆçš„æ•°å­—åºåˆ—ï¼Œæœ€åæ˜¯EOFã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ åœ¨PBMæ–‡ä»¶ä¸­ç»˜åˆ¶åŒºåŸŸ</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plot</span><span class="params">(r,M,N)</span></span></span><br><span class="line">	<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;P1\n&quot;</span>,M,<span class="string">&quot; &quot;</span>,N,<span class="string">&quot;\n&quot;</span>)		<span class="comment">-- æ–‡ä»¶å¤´</span></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, N <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> y = (N - i*<span class="number">2</span>)/N</span><br><span class="line">		<span class="keyword">for</span> j = <span class="number">1</span>, M <span class="keyword">do</span></span><br><span class="line">			<span class="keyword">local</span> x = (j*<span class="number">2</span> - M)/M</span><br><span class="line">			<span class="built_in">io</span>.<span class="built_in">write</span>(r(x,y) <span class="keyword">and</span> <span class="string">&quot;1&quot;</span> <span class="keyword">or</span> <span class="string">&quot;0&quot;</span>)</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">		<span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†è®©ç¤ºä¾‹æ›´åŠ å®Œæ•´ï¼Œä¸€ä¸‹çš„ä»£ç ç»˜åˆ¶äº†ä¸€ä¸ªå—åŠçƒæ‰€èƒ½çœ‹åˆ°çš„å¨¥çœ‰æœˆï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">c1 = disk(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">plot(difference(c1,translate(c1,<span class="number">0.3</span>,<span class="number">0</span>)),<span class="number">500</span>,<span class="number">500</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Luaè¿ç»­æ•™ç¨‹ä¹‹Luaé¢å‘å¯¹è±¡ç¼–ç¨‹</title>
    <url>/59502.html</url>
    <content><![CDATA[<p>ä»å¾ˆå¤šæ„ä¹‰ä¸Šè®²ï¼ŒLuaè¯­è¨€ä¸­çš„ä¸€å¼ è¡¨å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚é¦–å…ˆï¼Œè¡¨ä¸å¯¹è±¡ä¸€æ ·ï¼Œå¯ä»¥æ‹¥æœ‰çŠ¶æ€ã€‚å…¶æ¬¡ï¼Œè¡¨ä¸å¯¹è±¡ä¸€æ ·ï¼Œæ‹¥æœ‰ä¸€ä¸ªä¸å…¶æ— å…³çš„æ ‡è¯†(self)ï¼›</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ç‰¹åˆ«åœ°ï¼Œä¸¤ä¸ªå…·æœ‰ç›¸åŒå€¼çš„å¯¹è±¡ï¼ˆè¡¨ï¼‰æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œè€Œä¸€ä¸ªå¯¹è±¡å¯ä»¥å…·æœ‰å¤šä¸ªä¸åŒçš„å€¼ï¼›æœ€åï¼Œè¡¨ä¸å¯¹è±¡ä¸€æ ·ï¼Œå…·æœ‰åˆ›å»ºè€…å’Œè¢«åˆ›å»ºä½ç½®æ— å…³çš„å£°æ˜å‘¨æœŸã€‚</p>
<!--more-->
<p>å¯¹è±¡æœ‰å…¶è‡ªå·±çš„æ“ä½œã€‚è¡¨ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„æ“ä½œï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Account = &#123;balance = <span class="number">0</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account.withdraw</span><span class="params">(v)</span></span></span><br><span class="line">	Account.balance = Account.balance - v</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå¹¶å°†è¯¥å‡½æ•°å­˜å…¥Accountå¯¹è±¡çš„withdrawå­—æ®µã€‚ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œå¦‚ä¸‹çš„è°ƒç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Account.withdraw(<span class="number">100.00</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™ç§å‡½æ•°å·®ä¸å¤šå°±æ˜¯æ‰€è°“çš„æ–¹æ³•äº†ã€‚ä¸è¿‡ï¼Œåœ¨å‡½æ•°ä¸­ä½¿ç”¨å…¨å±€åç§°Accountæ˜¯ä¸€ä¸ªéå¸¸æ§½ç³•çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚é¦–å…ˆï¼Œè¿™ä¸ªå‡½æ•°åªèƒ½é’ˆå¯¹ç‰¹å®šå¯¹è±¡å·¥ä½œã€‚å…¶æ¬¡ï¼Œå³ä½¿é’ˆå¯¹ç‰¹å®šçš„å¯¹è±¡ï¼Œè¿™ä¸ªå‡½æ•°ä¹Ÿåªæœ‰åœ¨å¯¹è±¡ä¿å­˜åœ¨ç‰¹å®šçš„å…¨å±€å˜é‡ä¸­æ—¶æ‰èƒ½å·¥ä½œã€‚å¦‚æœæˆ‘ä»¬æ”¹å˜ç±»å¯¹è±¡çš„åç§°ï¼Œwithdrawå°±ä¸èƒ½å·¥ä½œäº†ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a, Account = Account, <span class="literal">nil</span></span><br><span class="line">a.withdraw(<span class="number">100.00</span>) 	<span class="comment">-- ERROR!</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§è¡Œä¸ºè¿åå¯¹è±¡æ‹¥æœ‰ç‹¬ç«‹å£°æ˜å‘¨æœŸçš„åŸåˆ™ã€‚<br>å¦ä¸€ç§æ›´åŠ æœ‰åŸåˆ™çš„æ–¹æ³•æ˜¯å¯¹æ“ä½œçš„æ¥å—è€…è¿›è¡Œæ“ä½œã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„æ–¹æ³•éœ€è¦é¢å¤–çš„å‚æ•°æ¥è¡¨ç¤ºè¯¥æ¥å—è€…ï¼Œè¿™ä¸ªå‚æ•°é€šå¸¸è¢«ç§°ä¸ºselfæˆ–this:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account.withdraw</span><span class="params">(self,v)</span></span></span><br><span class="line">	<span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance - v</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œå½“æˆ‘ä»¬è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¦æ“ä½œçš„å¯¹è±¡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a1 = Account; Account = <span class="literal">nil</span></span><br><span class="line">...</span><br><span class="line">a1.withdraw(a1,<span class="number">100.00</span>) 		<span class="comment">-- OK</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä½¿ç”¨å‚æ•°selfï¼Œå¯ä»¥å¯¹å¤šä¸ªå¯¹è±¡è°ƒç”¨ç›¸åŒçš„æ–¹æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a2 = &#123;balance = <span class="number">0</span>, withdraw = Account.withdraw&#125;</span><br><span class="line">...</span><br><span class="line">a2.withdraw(a2,<span class="number">260.00</span>)</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å‚æ•°selfæ˜¯æ‰€æœ‰é¢å‘å¯¹è±¡è¯­è¨€çš„æ ¸å¿ƒåº—ã€‚å¤§å¤šæ•°é¢å‘å¯¹è±¡è¯­è¨€éƒ½å‘ç¨‹åºå‘˜éšè—äº†è¿™ä¸ªæœºåˆ¶ï¼Œä»è€Œä½¿å¾—ç¨‹åºå‘˜ä¸å¿…æ˜¾å¼åœ°å£°æ˜è¿™ä¸ªå‚æ•°ï¼ˆè™½ç„¶ç¨‹åºå‘˜ä»ç„¶å¯ä»¥åœ¨æ–¹æ³•å†…ä½¿ç”¨selfæˆ–è€…thisï¼‰ã€‚Luaè¯­è¨€åŒæ ·å¯ä»¥ä½¿ç”¨å†’å·æ“ä½œç¬¦éšè—è¯¥å‚æ•°ã€‚ä½¿ç”¨å†’å·æ“ä½œç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šä¾‹é‡å†™ä¸ºa2:withdraw(260.00):</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account:withdraw</span><span class="params">(v)</span></span></span><br><span class="line">	<span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance -v</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å†’å·çš„ä½œç”¨æ˜¯åœ¨ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ä¸­å¢åŠ ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼Œæˆ–åœ¨æ–¹æ³•çš„å®šä¹‰ä¸­å¢åŠ ä¸€ä¸ªé¢å¤–çš„éšè—è¡Œå‚ã€‚å†’å·åªæ˜¯ä¸€ç§è¯­æ³•æœºåˆ¶ï¼Œè™½ç„¶å¾ˆä¾¿åˆ©ï¼Œä½†æ²¡æœ‰å¼•å…¥ä»»ä½•æ–°çš„ä¸œè¥¿ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‚¹åˆ†è¯­æ³•æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åç”¨å†’å·è¯­æ³•è°ƒç”¨å®ƒï¼Œåä¹‹äº¦ç„¶ï¼Œåªè¦èƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†å¥½é¢å¤–å‚æ•°å³å¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Account = &#123;</span><br><span class="line">	balance = <span class="number">0</span>,</span><br><span class="line">	withdraw = <span class="function"><span class="keyword">function</span><span class="params">(self,v)</span></span></span><br><span class="line">		<span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance -v</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account:deposit</span><span class="params">(v)</span></span></span><br><span class="line">	<span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance + v</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">Account.deposit(Account,<span class="number">200.00</span>)</span><br><span class="line">Account:withdraw(<span class="number">100.00</span>)</span><br></pre></td></tr></table></figure>

<h2 id="ç±»ï¼ˆclassï¼‰"><a href="#ç±»ï¼ˆclassï¼‰" class="headerlink" title="ç±»ï¼ˆclassï¼‰"></a>ç±»ï¼ˆclassï¼‰</h2><p>æˆªè‡³ç›®å‰ï¼Œæˆ‘ä»¬çš„å¯¹è±¡å…·æœ‰äº†æ ‡è¯†ã€çŠ¶æ€å’Œå¯¹çŠ¶æ€è¿›è¡Œçš„æ“ä½œï¼Œä½†è¿˜ç¼ºä¹ç±»ä½“ç³»ã€ç»§æ‰¿å’Œç§æœ‰æ€§ã€‚è®©æˆ‘ä»¬å…ˆæ¥è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå³åº”è¯¥å¦‚ä½•åˆ›å»ºå¤šä¸ªå…·æœ‰ç±»ä¼¼è¡Œä¸ºçš„å¯¹è±¡ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚æœåˆ›å»ºå¤šä¸ªé“¶è¡Œè´¦æˆ·å‘¢ï¼Ÿ<br>å¤§å¤šæ•°é¢å‘å¯¹è±¡è¯­è¨€æä¾›äº†ç±»çš„æ¦‚å¿µï¼Œç±»åœ¨å¯¹è±¡çš„åˆ›å»ºä¸­æ‰®æ¼”äº†æ¨¡å­çš„ä½œç”¨ã€‚åœ¨è¿™äº›è¯­è¨€ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æ˜¯æŸä¸ªç‰¹å®šç±»çš„å®ä¾‹ã€‚Luaè¯­è¨€ä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼›è™½ç„¶å…ƒè¡¨çš„æ¦‚å¿µåœ¨æŸç§ç¨‹åº¦ä¸Šä¸ç±»çš„æ¦‚å¿µç›¸ä¼¼ï¼Œä½†æ˜¯æŠŠå…ƒè¡¨å½“ä½œç±»ä½¿ç”¨åœ¨åç»­ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒåŸºäºåŸå‹çš„è¯­è¨€ä¸­çš„ä¸€äº›åšæ³•æ¥åœ¨Luaè¯­è¨€ä¸­æ¨¡æ‹Ÿç±»ï¼Œä¾‹å¦‚Selfè¯­è¨€ã€‚åœ¨è¿™äº›è¯­è¨€ä¸­ï¼Œå¯¹è±¡ä¸å±äºç±»ã€‚ç›¸åï¼Œæ¯ä¸ªå¯¹è±¡å¯ä»¥æœ‰ä¸€ä¸ªåŸå‹ã€‚åŸå‹ä¹Ÿæ˜¯ä¸€ç§æ™®é€šçš„å¯¹è±¡ï¼Œå½“å¯¹è±¡ï¼ˆç±»çš„å®ä¾‹ï¼‰é‡åˆ°ä¸€ä¸ªä¸ºçŸ¥æ“ä½œæ—¶ä¼šé¦–å…ˆåœ¨åŸå‹ä¸­æŸ¥æ‰¾ã€‚è¦åœ¨è¿™ç§è¯­è¨€ä¸­è¡¨ç¤ºä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªä¸“é—¨è¢«ç”¨ä½œå…¶ä»–å¯¹è±¡çš„åŸå‹å¯¹è±¡å³å¯ã€‚ç±»å’ŒåŸå‹éƒ½æ˜¯ä¸€ç§ç»„ç»‡å¤šä¸ªå¯¹è±¡é—´å…±äº«è¡Œä¸ºçš„æ–¹å¼ã€‚<br>åœ¨Luaè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç»§æ‰¿çš„æ€æƒ³æ¥å®ç°åŸå‹ã€‚æ›´å‡†ç¡®ç¬¬è¯´ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªå¯¹è±¡Aå’ŒBï¼Œè¦è®©Bæˆä¸ºAçš„ä¸€ä¸ªåŸå‹ï¼Œåªéœ€è¦ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setmetatable</span>(A,&#123;<span class="built_in">__index</span> = B&#125;)</span><br></pre></td></tr></table></figure>
<p>åœ¨æ­¤ä¹‹åï¼ŒAå°±ä¼šåœ¨Bä¸­æŸ¥æ‰¾æ‰€æœ‰å®ƒæ²¡æœ‰çš„æ“ä½œã€‚å¦‚æœæŠŠBçœ‹ä½œå¯¹è±¡Açš„ç±»ï¼Œåˆ™åªä¸è¿‡æ˜¯æœ¯è¯­ä¸Šçš„ä¸€ä¸ªå˜åŒ–ã€‚<br>è®©æˆ‘ä»¬å›åˆ°ä¹‹å‰é“¶è¡Œè´¦æˆ·çš„ç¤ºä¾‹ã€‚ä¸ºäº†åˆ›å»ºå…¶ä»–ä¸Accountè¡Œä¸ºç±»ä¼¼çš„è´¦å·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨__indexå…ƒæ–¹æ³•è®©è¿™äº›æ–°å¯¹è±¡ä»Accountä¸­ç»§æ‰¿è¿™äº›æ“ä½œã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> mt = &#123;<span class="built_in">__index</span> = Account&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account.new</span><span class="params">(o)</span></span></span><br><span class="line">	o = o <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">	<span class="built_in">setmetatable</span>(o,mt)</span><br><span class="line">	<span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™æ®µä»£ç æ‰§è¡Œåï¼Œå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°è´¦æˆ·å¹¶è°ƒç”¨æ–°è´¦æˆ·çš„ä¸€ä¸ªæ–¹æ³•æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = Account.new&#123;balance = <span class="number">0</span>&#125;</span><br><span class="line">a:deposit(<span class="number">100.00</span>)</span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°è´¦æˆ·aæ—¶ï¼Œaä¼šå°†mtä½œä¸ºå…¶å…ƒè¡¨ã€‚å½“è°ƒç”¨a:deposit(100.00)æ—¶ï¼Œå®é™…ä¸Šè°ƒç”¨çš„æ˜¯a.deposit(a,100.00)ï¼Œå†’å·åªä¸è¿‡æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚ä¸è¿‡ï¼ŒLuaè¯­è¨€æ— æ³•åœ¨è¡¨aä¸­æ‰¾åˆ°å­—æ®µâ€depositâ€ï¼Œæ‰€ä»¥å®ƒä¼šåœ¨å…ƒè¡¨çš„__indexä¸­æœç´¢ã€‚æ­¤æ—¶çš„æƒ…å†µå¤§è‡´å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">getmetatable</span>(a).<span class="built_in">__index</span>.deposit(a,<span class="number">100.00</span>)</span><br></pre></td></tr></table></figure>
<p>açš„å…ƒè¡¨æ˜¯mtï¼Œè€Œmt.__indexæ˜¯Accountã€‚å› æ­¤ï¼Œä¸Šè¿°è¡¨è¾¾å¼ç­‰ä»·äºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Account.deposit(a,<span class="number">100.00</span>)</span><br></pre></td></tr></table></figure>
<p>å³ï¼ŒLuaè¯­è¨€è°ƒç”¨äº†åŸæ¥çš„depositå‡½æ•°ï¼Œä¼ å…¥äº†aä½œä¸ºselfå‚æ•°ã€‚å› æ­¤æ–°è´¦æˆ·aä»Accountç»§æ‰¿äº†å‡½æ•°depositã€‚åŒæ ·ï¼Œå®ƒè¿˜ä»Accountç»§æ‰¿äº†æ‰€æœ‰çš„å­—æ®µã€‚<br>å¯¹äºè¿™ç§æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸¤ä¸ªå°æ”¹è¿›ã€‚ç¬¬ä¸€ç§æ”¹è¿›æ˜¯ï¼Œä¸åˆ›å»ºæ‰®æ¼”å…ƒè¡¨è§’è‰²çš„æ–°è¡¨è€Œæ˜¯æŠŠAccountç›´æ¥ç”¨ä½œå…ƒè¡¨ã€‚ç¬¬äºŒç§æ”¹è¿›æ˜¯ï¼Œå¯¹newæ–¹æ³•ä¹Ÿä½¿ç”¨å†’å·è¯­æ³•ã€‚åŠ å…¥äº†è¿™ä¸¤ä¸ªæ”¹åŠ¨åï¼Œæ–¹æ³•newä¼šå˜æˆï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account:new</span><span class="params">(o)</span></span></span><br><span class="line">	o = o <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">	<span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">	<span class="built_in">setmetatable</span>(o,<span class="built_in">self</span>)</span><br><span class="line">	<span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œå½“æˆ‘ä»¬è°ƒç”¨Account:new()æ—¶ï¼Œéšè—çš„å‚æ•°selfå¾—åˆ°çš„å®å‚æ˜¯Accountï¼ŒAccount.__indexç­‰äºAccountï¼Œå¹¶ä¸”Accountè¢«ç”¨ä½œæ–°å¯¹è±¡çš„å…ƒè¡¨ã€‚å¯èƒ½çœ‹ä¸Šå»ç¬¬äºŒç§ä¿®æ”¹ï¼ˆå†’å·è¯­æ³•ï¼‰å¹¶æ²¡æœ‰å¾—åˆ°å¤§å¤§çš„å¥½å¤„ï¼Œä½†å®é™…ä¸Šå½“æˆ‘ä»¬åœ¨ä½¿ç”¨ç±»çš„ç»§æ‰¿çš„æ—¶å€™ï¼Œä½¿ç”¨selfçš„ä¼˜ç‚¹å°±ä¼šå¾ˆæ˜æ˜¾äº†ã€‚<br>ç»§æ‰¿ä¸ä»…å¯ä»¥ä½œç”¨äºæ–¹æ³•ï¼Œè¿˜å¯ä»¥ä½œç”¨äºå…¶ä»–åœ¨æ–°è´¦æˆ·ä¸­æ²¡æœ‰çš„å­—æ®µã€‚å› æ­¤ï¼Œä¸€ä¸ªç±»ä¸ä»…å¯ä»¥æä¾›æ–¹æ³•ï¼Œè¿˜å¯ä»¥ä¸ºå®ä¾‹ä¸­çš„å­—æ®µæä¾›å¸¸é‡å’Œé»˜è®¤é‡ã€‚è¯·æ³¨æ„ï¼Œåœ¨ç¬¬ä¸€ç‰ˆAccountçš„å®šä¹‰ä¸­ï¼Œæœ‰ä¸€ä¸ªbalanceå­—æ®µçš„å€¼æ˜¯0ã€‚å› æ­¤ï¼Œå¦‚æœåœ¨åˆ›å»ºæ–°è´¦æˆ·æ—¶æ²¡æœ‰æä¾›åˆå§‹çš„ä½™é¢ï¼Œé‚£ä¹ˆä½™é¢å°±ä¼šç»§æ‰¿è¿™ä¸ªé»˜è®¤å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">b = Account:new()</span><br><span class="line"><span class="built_in">print</span>(balance)			<span class="comment">-- 0</span></span><br></pre></td></tr></table></figure>
<p>å½“åœ¨bä¸Šè°ƒç”¨ depositæ–¹æ³•æ—¶ï¼Œç”±äºselfå°±æ˜¯bï¼Œæ‰€ä»¥ç­‰ä»·äºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">b.balance = b.balance + v</span><br></pre></td></tr></table></figure>
<p>è¡¨è¾¾å¼b.balanceæ±‚å€¼åç­‰äºé›¶ï¼Œä¸”è¯¥æ–¹æ³•ç»™b.balanceèµ‹äº†åˆå§‹çš„é‡‘é¢ã€‚ç”±äºæ­¤æ—¶bæœ‰äº†å®ƒè‡ªå·±çš„balanceå­—æ®µï¼Œå› æ­¤åç»­å¯¹b.balanceçš„è®¿é—®å°±ä¸ä¼šå†æ¶‰åŠå…ƒæ–¹æ³•äº†ã€‚</p>
<h2 id="ç»§æ‰¿ï¼ˆInheritanceï¼‰"><a href="#ç»§æ‰¿ï¼ˆInheritanceï¼‰" class="headerlink" title="ç»§æ‰¿ï¼ˆInheritanceï¼‰"></a>ç»§æ‰¿ï¼ˆInheritanceï¼‰</h2><p>ç”±äºç±»ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå› æ­¤å®ƒä»¬ä¹Ÿå¯ä»¥ä»å…¶ä»–ç±»è·å¾—æ–¹æ³•ã€‚è¿™ç§è¡Œä¸ºä½¿å¾—ç»§æ‰¿ï¼ˆå³å¸¸è§çš„é¢å‘å¯¹è±¡çš„å®šä¹‰ï¼‰å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨Luaè¯­è¨€ä¸­å®ç°ã€‚</p>
<blockquote>
<p>Accountç±»</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Account = &#123;balance = <span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account:new</span><span class="params">(o)</span></span></span><br><span class="line">	o = o <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">	<span class="built_in">self</span>.<span class="built_in">__index</span> - <span class="built_in">self</span></span><br><span class="line">	<span class="built_in">setmetatable</span>(o,<span class="built_in">self</span>)</span><br><span class="line">	<span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account:deposit</span><span class="params">(v)</span></span></span><br><span class="line">	<span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance + v</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account:withdraw</span><span class="params">(v)</span></span></span><br><span class="line">	<span class="keyword">if</span> v &gt; <span class="built_in">self</span>.balance <span class="keyword">then</span> <span class="built_in">error</span> <span class="string">&quot;insufficient funds&quot;</span> <span class="keyword">end</span></span><br><span class="line">	<span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance - v</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è‹¥æƒ³ä»è¿™ä¸ªç±»æ´¾ç”Ÿä¸€ä¸ªå­ç±»SpecialAccountä»¥å…è®¸å®¢æˆ·é€æ”¯ï¼Œé‚£ä¹ˆå¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªä»åŸºç±»ç»§æ‰¿äº†æ‰€æœ‰æ“ä½œçš„ç©ºç±»ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">SpecialAccount = Account:new()</span><br></pre></td></tr></table></figure>
<p>ç›´åˆ°ç°åœ¨ï¼ŒSpecialAccountè¿˜åªæ˜¯Accountçš„ä¸€ä¸ªå®ä¾‹ã€‚ä¸‹é¢è®©æˆ‘ä»¬æ¥è§è¯å¥‡è¿¹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = SpecialAccount:new&#123;limit = <span class="number">1000.00</span>&#125;</span><br></pre></td></tr></table></figure>
<p>SpecialAccountå°±åƒç»§æ‰¿å…¶ä»–æ–¹æ³•ä¸€æ ·ä»Accountç»§æ‰¿äº†newã€‚ä¸è¿‡ï¼Œç°åœ¨æ‰§è¡Œnewæ—¶ï¼Œå®ƒçš„selfå‚æ•°æŒ‡å‘çš„æ˜¯SpeciaAccountã€‚å› æ­¤ï¼Œsçš„å…ƒè¡¨ä¼šæ˜¯SpecialAccountï¼Œå…¶ä¸­å­—æ®µ__indexçš„å€¼ä¹Ÿæ˜¯SpecialAccountã€‚å› æ­¤ï¼Œsç»§æ‰¿è‡ªSpecialAccountï¼Œè€Œ SpecialAccountåˆç»§æ‰¿è‡ªAccountã€‚ä¹‹åï¼Œå½“æ‰§è¡Œs:deposit(100.00)æ—¶ï¼ŒLuaè¯­è¨€åœ¨sä¸­æ‰¾ä¸åˆ°depositå­—æ®µï¼Œå°±ä¼šæŸ¥æ‰¾ SpecialAccountï¼Œä»æ‰¾ä¸åˆ°depositå­—æ®µï¼Œå°±æŸ¥æ‰¾Accountå¹¶æœ€ç»ˆä¼šåœ¨Accountä¸­æ‰¾åˆ°depositçš„æœ€åˆå®ç°ã€‚<br>SpecialAccountä¹‹æ‰€ä»¥ç‰¹æ®Šæ˜¯å› ä¸ºæˆ‘ä»¬å¯ä»¥é‡æ–°å®šä¹‰ä»åŸºç±»ç»§æ‰¿çš„ä»»æ„æ–¹æ³•ï¼Œåªéœ€è¦ç¼–å†™ä¸€ä¸ªæ–°æ–¹æ³•å³å¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SpecialAccount:withdraw</span><span class="params">(v)</span></span></span><br><span class="line">	<span class="keyword">if</span> v - <span class="built_in">self</span>.balance &gt;= <span class="built_in">self</span>:getLimit() <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">error</span> <span class="string">&quot;insufficient funds&quot;</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance - v</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SpecialAccount:getLimit</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">self</span>.limit <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œå½“è°ƒç”¨s:withdraw(200.00)æ—¶ï¼Œå› ä¸ºLuaè¯­è¨€ä¼šåœ¨ SpecialAccountä¸­å…ˆæ‰¾åˆ°æ–°çš„withdrawæ–¹æ³•ï¼Œæ‰€ä»¥ä¸ä¼šå†ä»Accountä¸­æŸ¥æ‰¾ã€‚ç”±äºs.limitä¸º1000.00ï¼ˆæˆ‘ä»¬åˆ›å»ºsæ—¶è®¾ç½®äº†è¿™ä¸ªå€¼ï¼‰ï¼Œæ‰€ä»¥ç¨‹åºä¼šæ‰§è¡Œå–æ¬¾å¹¶ä½¿så˜æˆè´Ÿçš„ä½™é¢ã€‚<br>Luaè¯­è¨€ä¸­çš„å¯¹è±¡æœ‰ä¸€ä¸ªæœ‰è¶£çš„ç‰¹è¡Œï¼Œå°±æ˜¯æ— é¡»ä¸ºäº†æŒ‡å®šä¸€ç§æ–°è¡Œä¸ºè€Œåˆ›å»ºä¸€ä¸ªæ–°ç±»ã€‚å¦‚æœåªæœ‰å•ä¸ªå¯¹è±¡éœ€è¦æŸç§ç‰¹æ®Šçš„è¡Œä¸ºï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¯¥å¯¹è±¡ä¸­å®ç°åœ¨å’Œè¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œè´¦æˆ·sè¡¨ç¤ºä¸€ä¸ªç‰¹æ®Šçš„å®¢æˆ·ï¼Œè¿™ä¸ªå®¢æˆ·çš„é€æ”¯é¢åº¦æ€»æ˜¯å…¶ä½™é¢çš„10%ï¼Œé‚£ä¹ˆå¯ä»¥åªä¿®æ”¹è¿™ä¸ªè´¦æˆ·ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">s:getLimit</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">self</span>.balance * <span class="number">0.10</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™æ®µä»£ç åï¼Œè°ƒç”¨s:withdraw(200.00)è¿˜æ˜¯ä¼šæ‰§è¡Œ SpecialAccountçš„withdrawæ–¹æ³•ï¼Œä½†å½“withdrawè°ƒç”¨ self:getLimitæ—¶ï¼Œè°ƒç”¨çš„æ˜¯ä¸Šè¿°çš„å®šä¹‰ã€‚</p>
<h2 id="å¤šé‡ç»§æ‰¿ï¼ˆMultiple-Lnheritanceï¼‰"><a href="#å¤šé‡ç»§æ‰¿ï¼ˆMultiple-Lnheritanceï¼‰" class="headerlink" title="å¤šé‡ç»§æ‰¿ï¼ˆMultiple Lnheritanceï¼‰"></a>å¤šé‡ç»§æ‰¿ï¼ˆMultiple Lnheritanceï¼‰</h2><p>ç”±äºLuaè¯­è¨€ä¸­çš„å¯¹è±¡ä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œå› æ­¤åœ¨Luaè¯­è¨€ä¸­è¿›è¡Œé¢å‘å¯¹è±¡ç¼–ç¨‹æ—¶åˆå‡ ç§æ–¹å¼ã€‚ä¸Šé¢ç¼©å‡çš„æ˜¯ä¸€ç§ä½¿ç”¨__indexå…ƒæ–¹æ³•çš„åšæ³•ï¼Œä¹Ÿå¯èƒ½æ˜¯åœ¨ç®€æ˜“ã€æ€§èƒ½å’Œçµæ´»æ€§æ–¹é¢æœ€å‡è¡¡çš„åšæ³•ã€‚ä¸è¿‡å°½ç®¡å¦‚æ­¤ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„å®ç°å¯¹æŸäº›ç‰¹æ®Šçš„æƒ…å†µå¯èƒ½æ›´åŠ åˆé€‚ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å…è®¸åœ¨Luaè¯­è¨€ä¸­å®ç°å¤šé‡ç»§æ‰¿çš„å¦ä¸€ç§å®ç°ã€‚<br>è¿™ç§å®ç°çš„å…³é”®åœ¨äºæŠŠä¸€ä¸ªå‡½æ•°ç”¨ä½œ__indexå…ƒæ–¹æ³•ã€‚è¯·æ³¨æ„ï¼Œå½“ä¸€ä¸ªè¡¨çš„å…ƒè¡¨ä¸­çš„__indexå­—æ®µä¸ºä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå½“Luaä¸èƒ½åœ¨åŸæ¥çš„è¡¨ä¸­æ‰¾åˆ°ä¸€ä¸ªé”®æ—¶å°±ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚åŸºäºè¿™ä¸€ç‚¹ï¼Œå°±å¯ä»¥è®©__indexå…ƒæ–¹æ³•åœ¨å…¶ä»–æœŸæœ›çš„ä»»æ„æ•°é‡çš„çˆ¶ç±»ä¸­æŸ¥æ‰¾ç¼ºå¤±çš„é”®ã€‚<br>å¤šé‡ç»§æ‰¿ä»¥ä¸ºè¿™ä¸€ä¸ªç±»å¯ä»¥å…·æœ‰å¤šä¸ªè¶…ç±»ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸åº”è¯¥ä½¿ç”¨ä¸€ä¸ªï¼ˆè¶…ï¼‰ç±»ä¸­çš„æ–¹æ³•æ¥åˆ›å»ºå­ç±»ï¼Œè€Œæ˜¯åº”è¯¥å®šä¹‰ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°createClassæ¥åˆ›å»ºå­ç±»ã€‚å‡½æ•°createClassçš„å‚æ•°ä¸ºæ–°ç±»çš„æ‰€æœ‰è¶…ç±»ã€‚è¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªè¡¨æ¥è¡¨ç¤ºæ–°ç±»ï¼Œç„¶åè®¾ç½®æ–°ç±»å…ƒè¡¨ä¸­çš„å…ƒæ–¹æ³•__indexï¼Œç”±å…ƒæ–¹æ³•å®ç°å¤šé‡ç»§æ‰¿ã€‚è™½ç„¶æ˜¯å¤šé‡ç»§æ‰¿ï¼Œä½†æ¯ä¸ªå®ä¾‹ä»ç„¶å±äºå•ä¸ªç±»ï¼Œå¹¶åœ¨å…¶ä¸­æŸ¥æ‰¾æ‰€æœ‰çš„æ–¹æ³•ã€‚å› æ­¤ï¼Œç±»å’Œè¶…ç±»ä¹‹é—´çš„å…³ç³»ä¸åŒäºç±»å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»ã€‚å°¤å…¶æ˜¯ï¼Œä¸€ä¸ªç±»ä¸èƒ½åŒæ—¶æˆä¸ºå…¶å®ä¾‹å’Œå­ç±»çš„å…ƒè¡¨ã€‚</p>
<blockquote>
<p>å®ä¾‹ï¼šä¸€ç§å¤šé‡ç»§æ‰¿çš„å®ç°</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åœ¨è¡¨&#x27;plist&#x27;çš„åˆ—è¡¨ä¸­æŸ¥æ‰¾&#x27;k&#x27;</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">search</span> <span class="params">(k,plist)</span></span></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, # plist <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> v = plist[i][k]		<span class="comment">-- å°è¯•ç¬¬&#x27;i&#x27;ä¸ªè¶…ç±»</span></span><br><span class="line">		<span class="keyword">if</span> v <span class="keyword">then</span> <span class="keyword">return</span> v <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createClass</span><span class="params">(...)</span></span></span><br><span class="line">	<span class="keyword">local</span> c = &#123;&#125;		<span class="comment">-- æ–°ç±»</span></span><br><span class="line">	<span class="keyword">local</span> parents = &#123;...&#125; <span class="comment">-- çˆ¶ç±»åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">-- åœ¨çˆ¶ç±»åˆ—è¡¨ä¸­æŸ¥æ‰¾ç±»ç¼ºå¤±çš„æ–¹æ³•</span></span><br><span class="line">	<span class="built_in">setmetatable</span>(c,&#123;<span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span><span class="params">(t,k)</span></span></span><br><span class="line">		reuturn search(k,parents)</span><br><span class="line">	<span class="keyword">end</span>&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">-- å°†&#x27;c&#x27;ä½œä¸ºå…¶å®ä¾‹çš„å…ƒè¡¨</span></span><br><span class="line">	c.<span class="built_in">__index</span> = c</span><br><span class="line"></span><br><span class="line">	<span class="comment">-- ä¸ºæ–°ç±»å®šä¹‰ä¸€ä¸ªæ–°çš„æ„é€ å‡½æ•°</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">c:new</span><span class="params">(o)</span></span></span><br><span class="line">		o = o <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">		<span class="built_in">setmetatable</span>(o,c)</span><br><span class="line">		<span class="keyword">return</span> o</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> c 	<span class="comment">-- è¿”å›æ–°ç±»</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•åœ°ç¤ºä¾‹æ¥æ¼”ç¤º createClassçš„ç”¨æ³•ã€‚å‡è®¾å‰é¢æåˆ°çš„ç±»Accountå’Œå¦ä¸€ä¸ªåªæœ‰ä¸¤ä¸ªæ–¹æ³•setnameå’Œgetnameçš„ç±»Namedï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Named = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Named:getname</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">self</span>.name </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Named:setname</span><span class="params">(n)</span></span></span><br><span class="line">	<span class="built_in">self</span>.name = n</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¦åˆ›å»ºä¸€ä¸ªåŒæ—¶ç»§æ‰¿Accountå’ŒNamedçš„æ–°ç±»NamedAccountï¼Œåªéœ€è¦è°ƒç”¨createClassï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">NamedAccount = createClass(Account, Named)</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥åƒå¹³æ—¶ä¸€æ ·åˆ›å»ºå’Œä½¿ç”¨å®ä¾‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">account = NamedAccount:new&#123;name = <span class="string">&quot;Paul&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(account:getname())			<span class="comment">-- Paul</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥å­¦ä¹ Luaè¯­è¨€æ˜¯å¦‚ä½•å¯¹è¡¨è¾¾å¼account:getname()æ±‚å€¼çš„ï¼›æ›´ç¡®åˆ‡åœ°è¯´ï¼Œè®©æˆ‘ä»¬æ¥å­¦ä¹ account[â€œgetnameâ€]çš„æ±‚å€¼è¿‡ç¨‹ã€‚é¦–å…ˆï¼ŒLuaè¯­è¨€åœ¨accountä¸­æ‰¾ä¸åˆ°å­—æ®µâ€getnameâ€ï¼›å› æ­¤ï¼Œå®ƒå°±æŸ¥æ‰¾accountçš„å…ƒè¡¨ä¸­çš„__indexå­—æ®µï¼Œåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­è¯¥å­—æ®µä¸ºNamedAccountã€‚ç”±äºåœ¨NamedAccountä¸­ä¹Ÿä¸å­˜åœ¨å­—æ®µâ€getnameâ€,æ‰€ä»¥å†ä»NamedAccountçš„å…ƒè¡¨ä¸­æŸ¥æ‰¾__indexå­—æ®µã€‚ç”±äºè¿™ä¸ªå­—æ®µæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤Luaè¯­è¨€å°±è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°ï¼ˆå³searchï¼‰ã€‚è¯¥å‡½æ•°ç°åœ¨Accountä¸­æŸ¥æ‰¾â€getnameâ€ï¼›æœªæ‰¾åˆ°åï¼Œç»§è€Œåœ¨Namedä¸­æŸ¥æ‰¾å¹¶æœ€ç»ˆåœ¨Namedä¸­æ‰¾åˆ°äº†ä¸€ä¸ªénilçš„å€¼ï¼Œä¹Ÿå°±æ˜¯æœ€ç»ˆçš„æœç´¢ç»“æœã€‚<br>å½“ç„¶ï¼Œç”±äºè¿™ç§æœç´¢å…·æœ‰ä¸€å®šçš„å¤æ‚æ€§ï¼Œå› æ­¤å¤šé‡ç»§æ‰¿çš„æ€§èƒ½ä¸å¦‚å•ç»§æ‰¿ã€‚ä¸€ç§æ”¹è¿›æ€§èƒ½çš„ç®€å•åšæ³•æ˜¯å°†è¢«ç»§æ‰¿çš„æ–¹æ³•å¤åˆ¶åˆ°å­ç±»ä¸­ï¼Œé€šè¿‡è¿™ç§æŠ€æœ¯ï¼Œç±»çš„__indexå…ƒæ–¹æ³•ä¼šå˜æˆï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setmetatable</span>(c,&#123;<span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span><span class="params">(t,k)</span></span></span><br><span class="line">	<span class="keyword">local</span> v = search(k,parents)</span><br><span class="line">	t[k] = v</span><br><span class="line">	<span class="keyword">return</span> v&#125;)</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨äº†è¿™ç§æŠ€å·§åï¼Œåœ¨ç¬¬ä¸€æ¬¡è®¿é—®è¿‡è¢«ç»§æ‰¿çš„æ–¹æ³•åï¼Œå†è®¿é—®è¢«ç»§æ‰¿çš„æ–¹æ³•å°±ä¼šåƒè®¿é—®å±€éƒ¨æ–¹æ³•ä¸€æ ·å¿«äº†ã€‚è¿™ç§æŠ€å·§çš„ç¼ºç‚¹åœ¨äºå½“ç³»ç»Ÿå¼€å§‹è¿è¡Œåä¿®æ”¹æ–¹æ³•çš„å®šä¹‰å°±æ¯”ä»·å›°éš¾äº†ï¼Œè¿™æ˜¯å› ä¸ºè¿™äº›ä¿®æ”¹ä¸ä¼šæ²¿ç€ç»§æ‰¿å±‚æ¬¡å‘ä¸‹ä¼ æ’­ã€‚</p>
<h2 id="ç§æœ‰æ€§"><a href="#ç§æœ‰æ€§" class="headerlink" title="ç§æœ‰æ€§"></a>ç§æœ‰æ€§</h2><p>è®¸å¤šäººè®¤ä¸ºï¼Œç§æœ‰æ€§æ˜¯ä¸€é—¨é¢å‘å¯¹è±¡è¯­è¨€ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼šæ¯ä¸ªå¯¹è±¡çš„çŠ¶æ€éƒ½åº”è¯¥ç”±å®ƒè‡ªå·±æ§åˆ¶ã€‚åœ¨ä¸€äº›è¯¸å¦‚C++å’Œjavaçš„é¢å‘å¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶ä¸€ä¸ªå­—æ®µï¼ˆä¹Ÿè¢«ç§°ä¸ºå®ä¾‹å˜é‡ï¼‰æˆ–ä¸€ä¸ªæ–¹æ³•æ˜¯å¦åœ¨å¯¹è±¡ä¹‹å¤–å¯è§ã€‚å¦ä¸€ç§éå¸¸æµè¡Œçš„é¢å‘å¯¹è±¡è¯­è¨€Smalltalkï¼Œåˆ™è§„å®šæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯ç§æœ‰çš„ã€‚è€Œæ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯å…¬æœ‰çš„ã€‚ç¬¬ä¸€ç§é¢å‘å¯¹è±¡è¯­è¨€Simulaï¼Œåˆ™ä¸æä¾›ä»»ä½•å½¢å¼çš„ç§æœ‰æ€§ä¿æŠ¤ã€‚<br>æ­¤å‰ï¼Œæˆ‘ä»¬æ‰€å­¦ä¹ çš„Luaè¯­è¨€ä¸­æ ‡å‡†çš„å¯¹è±¡å®ç°æ–¹å¼æ²¡æœ‰æä¾›ç§æœ‰æ€§æœºåˆ¶ã€‚ä¸€æ–¹é¢ï¼Œè¿™æ˜¯ä½¿ç”¨æ™®é€šç»“æ„æ¥è¡¨ç¤ºå¯¹è±¡æ‰€å¸¦æ¥çš„åæœï¼›å¦ä¸€æ–¹é¢ï¼Œè¿™ä¹Ÿæ˜¯Luaè¯­è¨€ä¸ºäº†é¿å…å†—ä½™å’Œäººä¸ºé™åˆ¶æ‰€é‡‡å–çš„æ–¹æ³•ã€‚å¦‚æœå¤¬ä¸æƒ³è¿”å›ä¸€ä¸ªå¯¹è±¡å†…çš„å†…å®¹ï¼Œé‚£å°±ä¸è¦å»è®¿é—®å°±æ˜¯äº†ã€‚ä¸€ç§å¸¸è§çš„åšæ³•æ˜¯æŠŠæ‰€æœ‰ç§æœ‰åç§°çš„æœ€ååŠ ä¸Šä¸€ä¸ªä¸Šä¸‹ç”»çº¿ï¼Œè¿™æ ·å°±èƒ½ç«‹åˆ»åŒºåˆ†å‡ºå…¨å±€åç§°äº†ã€‚<br>ä¸è¿‡ï¼Œå°½ç®¡å¦‚æ­¤ï¼ŒLuaåŸå› çš„å¦å¤–ä¸€é¡¹è®¾è®¡ç›®æ ‡æ˜¯çµæ´»æ€§ï¼Œå®ƒä¸ºç¨‹åºå‘˜æä¾›èƒ½å¤Ÿæ¨¡æ‹Ÿè®¸å¤šä¸åŒæœºåˆ¶çš„å…ƒæœºåˆ¶ã€‚è™½ç„¶åœ¨Luaè¯­è¨€ä¸­ï¼Œå¯¹è±¡çš„åŸºæœ¬è®¾è®¡æ²¡æœ‰æä¾›ç§æœ‰æ€§æœºåˆ¶ï¼Œä½†å¯ä»¥ç”¨å…¶ä»–æ–¹å¼æ¥å®ç°å…·æœ‰å…·æœ‰è®¿é—®æ§åˆ¶èƒ½åŠ›çš„å¯¹è±¡ã€‚å°½ç®¡ç¨‹åºå‘˜ä¸€èˆ¬ä¸ä¼šç”¨åˆ°è¿™ç§å®ç°ï¼Œä½†æ˜¯äº†è§£è¿™ç§å®ç°è¿˜æ˜¯æœ‰å¥½å¤„çš„ï¼Œå› ä¸ºè¿™ç§å®ç°å³æ¢ç´¢äº†Luaè¯­è¨€ä¸­æŸäº›æœ‰è¶£çš„æ–¹é¢ï¼Œåˆå¯ä»¥æˆä¸ºå…¶ä»–æ›´å…·ä½“é—®é¢˜çš„è‰¯å¥½è§£å†³æ–¹æ¡ˆã€‚<br>è¿™ç§åšæ³•çš„åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡ä¸¤ä¸ªè¡¨æ¥è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ï¼šä¸€ä¸ªè¡¨ç”¨æ¥ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œå¦ä¸€ä¸ªè¡¨ç”¨äºä¿å­˜å¯¹è±¡çš„æ“ä½œï¼ˆæˆ–æ¥å£ï¼‰ã€‚æˆ‘ä»¬é€šè¿‡äºŒä¸ªè¡¨æ¥è®¿é—®å¯¹è±¡æœ¬èº«ï¼Œå³é€šè¿‡ç»„æˆå…¶æ¥å£çš„æ“ä½œæ¥è®¿é—®ã€‚ä¸ºäº†é¿å…æœªæˆæƒçš„è®¿é—®ï¼Œè¡¨ç¤ºå¯¹è±¡çŠ¶æ€çš„è¡¨ä¸ä¿å­˜åœ¨å…¶ä»–è¡¨çš„å­—æ®µä¸­ï¼Œè€Œåªä¿å­˜åœ¨æ–¹æ³•çš„é—­åŒ…ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦ç”¨è¿™ç§è®¾è®¡æ¥è¡¨ç¤ºé“¶è¡Œè´¦æˆ·ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä¸‹é¢çš„å·¥å‚å‡½æ•°åˆ›å»ºæ–°çš„å¯¹è±¡ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newAccount</span> <span class="params">(initialBalance)</span></span></span><br><span class="line">	<span class="keyword">local</span> <span class="built_in">self</span> = &#123;balance = initialBalance&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">local</span> withdraw = <span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">		<span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance - v</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">local</span> deposit = <span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">		<span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance + v</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">local</span> getBalance = <span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="keyword">return</span> <span class="built_in">self</span>.balance <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		withdraw = withdraw,</span><br><span class="line">		deposit = deposit,</span><br><span class="line">		getBalance = getBalance</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œè¿™ä¸ªå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªç”¨äºä¿å­˜å¯¹è±¡å†…éƒ¨çŠ¶æ€çš„è¡¨ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å±€éƒ¨å˜é‡selfä¸­ã€‚ç„¶åï¼Œè¿™ä¸ªå‡½æ•°åˆ›å»ºäº†å¯¹è±¡çš„æ–¹æ³•ã€‚æœ€åï¼Œè¿™ä¸ªå‡½æ•°ä¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå¤–éƒ¨å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°†æ–¹æ³•åä¸çœŸæ­£çš„æ–¹æ³•å®ç°æ˜ å°„èµ·æ¥ã€‚è¿™é‡Œçš„å…³é”®åœ¨äºï¼Œè¿™äº›æ–¹æ³•ä¸éœ€è¦é¢å¤–çš„selfå‚æ•°ï¼Œè€Œæ˜¯ç›´æ¥è®¿é—®selfå˜é‡ã€‚ç”±äºæ²¡æœ‰äº†é¢å¤–çš„å‚æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå°±æ— é¡»ä½¿ç”¨å†’å·è¯­æ³•æ¥æ“ä½œè¿™äº›å¯¹è±¡ï¼Œè€Œæ˜¯å¯ä»¥åƒæ™®é€šå‡½æ•°é‚£æ ·æ¥è°ƒç”¨è¿™äº›æ–¹æ³•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">acc1 = newAccount(<span class="number">100.00</span>)</span><br><span class="line">acc1.withdraw(<span class="number">40.00</span>)</span><br><span class="line"><span class="built_in">print</span>(acc1.getBalance())		<span class="comment">-- 60</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§è®¾è®¡ç»™äºˆäº†å­˜å‚¨åœ¨è¡¨selfä¸­æ‰€æœ‰å†…å®¹å®Œæˆçš„ç§æœ‰æ€§ã€‚å½“newAccountè¿”å›åï¼Œå°±æ— æ³•ç›´æ¥è®¿é—®è¿™ä¸ªè¡¨äº†ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡åœ¨newAccountä¸­åˆ›å»ºçš„å‡½æ•°æ¥è®¿é—®å®ƒã€‚è™½ç„¶æˆ‘ä»¬çš„ç¤ºä¾‹åªæŠŠä¸€ä¸ªå®ä¾‹å˜é‡æ”¾åˆ°äº†ç§æœ‰è¡¨ä¸­ï¼Œä½†è¿˜æœ‰å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡ä¸­çš„æ‰€æœ‰ç§æœ‰éƒ¨åˆ†éƒ½å­˜å…¥è¿™ä¸ªè¡¨ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ç§æœ‰æ–¹æ³•ï¼Œå®ƒä»¬ç±»ä¼¼äºå…¬æœ‰æ–¹æ³•ä½†ä¸æ”¾å…¥æ¥å£ä¸­ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„è´¦æˆ·å¯ä»¥ç»™ä½™é¢å¤§äºæŸä¸ªå€¼çš„ç”¨æˆ·é¢å¤–çš„10%çš„ä¿¡ç”¨é¢åº¦ï¼Œä½†æ˜¯åˆä¸æƒ³è®©ç”¨æˆ·è®¿é—®åˆ°è¿™äº›è®¡ç®—ç»†èŠ‚ï¼Œå°±å¯ä»¥å°†è¿™ä¸ªåŠŸèƒ½æŒ‰ä»¥ä¸‹æ–¹æ³•å®ç°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newAccount</span><span class="params">(initialBalance)</span></span></span><br><span class="line">	<span class="keyword">local</span> <span class="built_in">self</span> = &#123;</span><br><span class="line">		balance = initialBalance,</span><br><span class="line">		LIM	 	= <span class="number">10000.00</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">local</span> extra = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">self</span>.balance &gt; <span class="built_in">self</span>.LIM <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">self</span>.balance*<span class="number">0.10</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> getBalance = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">self</span>.balance + extra()</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="å•æ–¹æ³•å¯¹è±¡ï¼ˆSingle-method-Objectï¼‰"><a href="#å•æ–¹æ³•å¯¹è±¡ï¼ˆSingle-method-Objectï¼‰" class="headerlink" title="å•æ–¹æ³•å¯¹è±¡ï¼ˆSingle-method Objectï¼‰"></a>å•æ–¹æ³•å¯¹è±¡ï¼ˆSingle-method Objectï¼‰</h2><p>ä¸Šè¿°é¢å‘å¯¹è±¡ç¼–ç¨‹å®ç°çš„ä¸€ä¸ªç‰¹ä¾‹æ˜¯å¯¹è±¡åªæœ‰ä¸€ä¸ªæ–¹æ³•çš„æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸ç”¨åˆ›å»ºæ¥å£è¡¨ï¼Œåªè¦å°†è¿™ä¸ªå•ç‹¬çš„æ–¹æ³•ä»¥å¯¹è±¡çš„è¡¨ç¤ºå½¢å¼è¿”å›å³å¯ã€‚<br>å•æ–¹æ³•å¯¹è±¡çš„å¦ä¸€ç§æœ‰è¶£çš„æƒ…å†µæ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•å…¶å®æ˜¯ä¸€ä¸ªæ ¹æ®ä¸åŒçš„å‚æ•°å®Œæˆä¸åŒä»»åŠ¡çš„åˆ†å‘æ–¹æ³•ã€‚è¿™ç§å¯¹è±¡çš„ä¸€ç§åŸå‹å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newObject</span> <span class="params">(value)</span></span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(action , v)</span></span></span><br><span class="line">		<span class="keyword">if</span> action == <span class="string">&quot;get&quot;</span> <span class="keyword">then</span> <span class="keyword">return</span> value</span><br><span class="line">		<span class="keyword">elseif</span> action == <span class="string">&quot;set&quot;</span> <span class="keyword">then</span> value = v</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">error</span>(<span class="string">&quot;invalid action&quot;</span>)</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">d = newObject(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(d(<span class="string">&quot;get&quot;</span>))   <span class="comment">--- 0 </span></span><br><span class="line">d(<span class="string">&quot;set&quot;</span>,<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(d(<span class="string">&quot;get&quot;</span>))		<span class="comment">-- 10</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§éä¼ ç»Ÿçš„å¯¹è±¡å®ç°æ–¹å¼æ˜¯å¾ˆé«˜æ•ˆçš„ã€‚è™½ç„¶d(â€œsetâ€,10)è¿™æ ·çš„è¯­æ³•æœ‰äº›å¥‡æ€ªï¼Œä½†ä¹Ÿä¸è¿‡åªæ˜¯æ¯”ä¼ ç»Ÿçš„d:set(10)å¤šå‡ºäº†ä¸¤ä¸ªå­—ç¬¦è€Œå·²ã€‚æ¯ä¸ªå¯¹è±¡ä½¿ç”¨ä¸€ä¸ªé—­åŒ…ï¼Œè¦æ¯”ä½¿ç”¨ä¸€ä¸ªè¡¨çš„å¼€é”€æ›´ä½ã€‚è™½ç„¶ä½¿ç”¨è¿™ç§æ–¹å¼ä¸èƒ½ç»§æ‰¿ï¼Œä½†æˆ‘ä»¬å´å¯ä»¥æ‹¥æœ‰å®Œå…¨çš„ç§æœ‰æ€§ï¼šè®¿é—®å•æ–¹æ³•å¯¹è±¡ä¸­æŸä¸ªæˆå‘˜åªèƒ½é€šè¿‡è¯¥å¯¹è±¡æ‰€å…·æœ‰çš„å”¯ä¸€æ–¹æ³•è¿›è¡Œã€‚<br>Tcl&#x2F;Tkå¯¹å®ƒçš„çª—å£éƒ¨ä»¶ä½¿ç”¨äº†ç±»ä¼¼çš„åšæ³•ã€‚åœ¨Tkä¸­ï¼Œä¸€ä¸ªçª—å£éƒ¨ä»¶çš„åç§°å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥æ ¹æ®å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°å®Œæˆæ‰€æœ‰é’ˆå¯¹è¯¥éƒ¨ä»¶çš„æ“ä½œã€‚</p>
<h2 id="å¯¹å¶è¡¨ç¤ºï¼ˆDual-Repressentationï¼‰"><a href="#å¯¹å¶è¡¨ç¤ºï¼ˆDual-Repressentationï¼‰" class="headerlink" title="å¯¹å¶è¡¨ç¤ºï¼ˆDual Repressentationï¼‰"></a>å¯¹å¶è¡¨ç¤ºï¼ˆDual Repressentationï¼‰</h2><p>å®ç°ç§æœ‰æ€§çš„å¦ä¸€ç§æœ‰è¶£æ–¹å¼æ˜¯ä½¿ç”¨å¯¹å¶è¡¨ç¤ºã€‚è®©æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯å¯¹å¶è¡¨ç¤ºã€‚<br>é€šå¸¸æˆ‘ä»¬ä½¿ç”¨é”®æ¥æŠŠå±æ€§å…³è”åˆ°è¡¨ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">table</span>[key] = value</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¯¹å¶è¡¨ç¤ºï¼šæŠŠè¡¨å½“ä½œé”®ï¼ŒåŒæ—¶åˆæŠŠå¯¹è±¡æœ¬èº«å½“ä½œè¿™ä¸ªè¡¨çš„é”®ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">key = &#123;&#125;</span><br><span class="line">...</span><br><span class="line">key[<span class="built_in">table</span>] = value</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„å…³é”®åœ¨äºï¼šæˆ‘ä»¬ä¸ä»…å¯ä»¥é€šè¿‡æ•°å€¼å’Œå­—ç¬¦ä¸²æ¥ç´¢å¼•ä¸€ä¸ªè¡¨ï¼Œè¿˜å¯ä»¥é€šè¿‡ä»»ä½•å€¼æ¥ç´¢å¼•ä¸€ä¸ªè¡¨ã€‚å°¤å…¶æ˜¯å¯ä»¥ä½¿ç”¨å…¶ä»–çš„è¡¨æ¥ç´¢å¼•ä¸€ä¸ªè¡¨ã€‚<br>ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨é“¶è¡Œè´¦æˆ·çš„å®ç°ä¸­ï¼Œå¯ä»¥æŠŠæ‰€æœ‰è´¦æˆ·çš„ä½™é¢æ”¾åœ¨è¡¨balanceä¸­ï¼Œè€Œä¸æ˜¯æŠŠä½™é¢æ”¾åœ¨æ¯ä¸ªè´¦æˆ·é‡Œã€‚æˆ‘ä»¬çš„withdrawæ–¹æ³•ä¼šå˜æˆï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account.withdraw</span><span class="params">(self,v)</span></span></span><br><span class="line">	balance[<span class="built_in">self</span>] = balance[<span class="built_in">self</span>] -v</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·åšçš„å¥½å¤„åœ¨äºç§æœ‰æ€§ã€‚å³ä½¿ä¸€ä¸ªå‡½æ•°å¯ä»¥è®¿é—®ä¸€ä¸ªè´¦æˆ·ï¼Œä½†æ˜¯é™¤éå®ƒèƒ½å¤ŸåŒæ—¶è®¿é—®è¡¨balanceï¼Œå¦åˆ™ä¹Ÿä¸èƒ½è®¿é—®ä½™é¢ã€‚å¦‚æœè¡¨balanceæ˜¯ä¸€ä¸ªåœ¨æ¨¡å—Accountå†…éƒ¨ä¿å­˜çš„å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆåªæœ‰æ¨¡å—å†…éƒ¨çš„å‡½æ•°æ‰èƒ½è®¿é—®å®ƒã€‚å› æ­¤ï¼Œåªæœ‰è¿™äº›å‡½æ•°æ‰èƒ½æ“ä½œè´¦æˆ·ä½™é¢ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ ä½¿ç”¨å¯¹å¶è¡¨ç¤ºå®ç°è´¦æˆ·</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> balance = &#123;&#125;</span><br><span class="line">Account = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account:withdraw</span><span class="params">(v)</span></span></span><br><span class="line">	balance[<span class="built_in">self</span>] = balance[<span class="built_in">self</span>] - v</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account:deposit</span><span class="params">(v)</span></span></span><br><span class="line">	balance[<span class="built_in">self</span>] = balance[<span class="built_in">self</span>] + v</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account:balance</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">return</span> balance[<span class="built_in">self</span>]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">Account:new</span><span class="params">( o )</span></span></span><br><span class="line">	o = o <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">	<span class="built_in">setmetatable</span>(o,<span class="built_in">self</span>)</span><br><span class="line">	<span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">	balance[o] = <span class="number">0</span></span><br><span class="line">	<span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨å…¶ä»–ç±»ä¸€æ ·ä½¿ç”¨è¿™ä¸ªç±»ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = Account:new&#123;&#125;</span><br><span class="line">a:deposit(<span class="number">100.00</span>)</span><br><span class="line"><span class="built_in">print</span>(a:balance())</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œæˆ‘ä»¬ä¸èƒ½æ¶æ„ä¿®æ”¹è´¦æˆ·ä½™é¢ã€‚è¿™ç§å®ç°é€šè¿‡è®©è¡¨balanceä¸ºæ¨¡å—æ‰€ç§æœ‰ï¼Œä¿è¯äº†å®ƒçš„å®‰å…¨æ€§ã€‚<br>å¯¹å¶è¡¨ç¤ºæ— é¡»ä¿®æ”¹å³å¯å®ç°ç»§æ‰¿ã€‚è¿™ç§å®ç°æ–¹å¼ä¸æ ‡å‡†å®ç°æ–¹å¼åœ¨å†…å­˜å’Œæ—¶é—´å¼€é”€æ–¹é¢åŸºæœ¬ç›¸åŒã€‚æ–°å¯¹è±¡éœ€è¦ä¸€ä¸ªæ–°è¡¨ï¼Œè€Œä¸”å†æ¯ä¸€ä¸ªè¢«ä½¿ç”¨çš„ç§æœ‰è¡¨ä¸­éœ€è¦ä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚è®¿é—®balance[self]ä¼šæ¯”è®¿é—®self.balanceç¨æ…¢ï¼Œè¿™æ˜¯å› ä¸ºåè€…ä½¿ç”¨äº†å±€éƒ¨å˜é‡è€Œå‰è€…ä½¿ç”¨äº†å¤–éƒ¨å˜é‡ã€‚é€šå¸¸ï¼Œè¿™ç§åŒºåˆ«æ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac-Xcodeå„ç§ç›®å½•è·¯å¾„å’Œè°ƒè¯•æ–¹æ³•</title>
    <url>/22026.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>hostsæ–‡ä»¶æ‰€åœ¨ç›®å½•:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">/private/etc/</span><br></pre></td></tr></table></figure>

<p>xcodeæ’ä»¶ç›®å½•:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">~<span class="regexp">/Library/</span><span class="title class_">Application</span> <span class="title class_">Support</span>/<span class="title class_">Developer</span>/<span class="title class_">Shared</span>/<span class="title class_">Xcode</span>/<span class="title class_">Plug</span>-ins</span><br></pre></td></tr></table></figure>
<p>æ¨¡æ‹Ÿå™¨ä¸Šappåº”ç”¨è¿è¡Œç”Ÿæˆç¼“å­˜æ–‡ä»¶ï¼šåˆ é™¤æ— å½±å“ï¼Œå¯é‡æ–°ç”Ÿæˆ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">~<span class="regexp">/Library/</span><span class="title class_">Developer</span>/<span class="title class_">XCPGDevices</span></span><br></pre></td></tr></table></figure>
<p>Xcodeå¯¹æ¨¡æ‹Ÿå™¨ç¼“å­˜è·¯å¾„ï¼šå¦‚æœåˆ é™¤ä¸‹æ¬¡è¿è¡Œæ—¶é—´ä¼šè¾ƒé•¿ï¼Œä½†ä¸å½±å“ä½¿ç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">~<span class="regexp">/Library/</span><span class="title class_">Developer</span>/<span class="title class_">Xcode</span>/<span class="title class_">DerivedData</span></span><br></pre></td></tr></table></figure>
<p>Xcodeä¸­å¸è½½å¤šä½™æ¨¡æ‹Ÿå™¨ä½ç½®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">/èµ„æºåº“/<span class="title class_">Developer</span>/<span class="title class_">CoreSimulator</span>/<span class="title class_">Profiles</span>/<span class="title class_">Runtimes</span>/</span><br></pre></td></tr></table></figure>
<p>Xcodeå¯¹çœŸæœºè®¾å¤‡æ”¯æŒ: è¿æ¥è®¾å¤‡æ—¶è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ç‰ˆæœ¬æ”¯æŒæ–‡ä»¶ï¼Œå¦‚æœåˆ é™¤äº†ï¼Œå†æ¬¡è¿æ¥è¿˜ä¼šé‡æ–°ç”Ÿæˆã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">~<span class="regexp">/Library/</span><span class="title class_">Developer</span>/<span class="title class_">Xcode</span>/iOS <span class="title class_">DeviceSupport</span></span><br></pre></td></tr></table></figure>
<p>Xcode6ä»¥åçš„æ¨¡æ‹Ÿå™¨çš„ä½ç½®ã€‚æ¯ä¸ªé•¿ä¸²åå­—çš„æ–‡ä»¶å¤¹ä»£è¡¨ä¸€ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œåœ¨å®ƒçš„device.plistæ–‡ä»¶å¯ä»¥çœ‹åˆ°å…·ä½“çš„å“ªä¸ªæ¨¡æ‹Ÿå™¨å‹å·ã€‚ä¸å¯æ¢å¤ã€‚æ…é‡åˆ é™¤ï¼Œåˆ é™¤ä¹‹åå†ç”¨å°±å¾—é‡æ–°ä¸‹è½½äº†ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">~<span class="regexp">/Library/</span><span class="title class_">Developer</span>/<span class="title class_">CoreSimulator</span>/<span class="title class_">Devices</span></span><br></pre></td></tr></table></figure>
<p>æäº¤App Storeæˆ–è€…Adhocæ—¶æ‰“åŒ…çš„ipaæ–‡ä»¶è·¯å¾„ï¼Œåˆ é™¤äº†ä¸å¯æ¢å¤ï¼Œå¯é‡æ–°æ‰“åŒ…ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">~<span class="regexp">/Library/</span><span class="title class_">Developer</span>/<span class="title class_">Xcode</span>/<span class="title class_">Archives</span></span><br></pre></td></tr></table></figure>
<p>åˆ é™¤å¤šä½™é…ç½®è¯ä¹¦è·¯å¾„:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">~<span class="regexp">/Library/</span><span class="title class_">MobileDevice</span>/<span class="title class_">Provisioning</span> <span class="title class_">Profiles</span></span><br></pre></td></tr></table></figure>
<p>podç¼“å­˜è·¯å¾„:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">~<span class="regexp">/Library/</span><span class="title class_">Caches</span>/<span class="title class_">CocoaPods</span>/<span class="title class_">Pods</span>/<span class="title class_">Release</span></span><br></pre></td></tr></table></figure>
<p>XCodeæ¥å®šä½å¾ªç¯å¼•ç”¨çš„æ–¹æ³•:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1ï¼‰åœ¨productï¼Analyzeä¸­ä½¿ç”¨é™æ€åˆ†ææ¥æ£€æµ‹ä»£ç ä¸­å¯èƒ½å­˜åœ¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</span><br><span class="line"></span><br><span class="line">2ï¼‰åœ¨Xcodeï¼open developer toolï¼Instrumentsæ‰“å¼€å·¥å…·é›†ï¼Œé€‰æ‹©Leakså·¥å…·å¯ä»¥å¯¹å·²å®‰è£…çš„åº”ç”¨è¿›è¡Œå†…å­˜æ³„æ¼æ£€æµ‹ï¼Œæ­¤å·¥å…·èƒ½æ£€æµ‹é™æ€åˆ†æä¸ä¼šæç¤ºï¼Œä½†æ˜¯åˆ°è¿è¡Œæ—¶æ‰ä¼šå‡ºç°çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚</span><br></pre></td></tr></table></figure>
<p>Xcodeæ¥å®šä½åŠåˆ†æåƒµå°¸å¯¹è±¡æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 ï¼‰åœ¨productï¼schemeï¼edit schemeï¼diagnosticsä¸­å°†enable zombie objectså‹¾é€‰ä¸Šã€‚</span><br><span class="line"></span><br><span class="line">2ï¼‰åœ¨Xcodeï¼open developer toolï¼Instrumentsæ‰“å¼€å·¥å…·é›†ï¼Œé€‰æ‹©Zombieså·¥å…·å¯ä»¥å¯¹å·²å®‰è£…çš„åº”ç”¨è¿›è¡Œåƒµå°¸å¯¹è±¡æ£€æµ‹ã€‚</span><br></pre></td></tr></table></figure>
<p>å­˜åœ¨å¤šXcode æ—¶ï¼Œæ›´æ”¹é»˜è®¤è·¯å¾„ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Xcode</span> &gt; <span class="title class_">Preferences</span> &gt; <span class="title class_">Locations</span>è·¯å¾„æŸ¥çœ‹åˆ°æ­£åœ¨ä½¿ç”¨çš„ç‰ˆæœ¬å’Œè¯¥ç‰ˆæœ¬è·¯å¾„ã€‚å¯ä¸‹æ‹‰é€‰æ‹©éœ€è¦ç‰ˆæœ¬ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>mac</tag>
        <tag>Xcode</tag>
      </tags>
  </entry>
  <entry>
    <title>Macä¸‹å®‰è£…NDK(androidå¼€å‘)</title>
    <url>/391391b6.html</url>
    <content><![CDATA[<p>æœ€è¿‘åšä¸»åœ¨åšandroidå¹³å°çš„æ¸¸æˆå¼€å‘ï¼Œä¸å¾—ä¸è¯´androidå¼€å‘æ˜¯çœŸçš„éº»çƒ¦ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="ndkä¸‹è½½"><a href="#ndkä¸‹è½½" class="headerlink" title="ndkä¸‹è½½"></a>ndkä¸‹è½½</h3><p>androidå¼€å‘éœ€è¦å®‰è£…android ndkï¼Œè¿™é‡Œå¯¹ndkçš„ç‰ˆæœ¬æœ‰ç€é«˜è¦æ±‚ã€‚<br>æ¨èå¤§å®¶ä¸€ä¸ªä¸‹è½½åœ°å€<a href="https://blog.csdn.net/momo0853/article/details/73898066">ndkè€ç‰ˆæœ¬ä¸‹è½½</a>è¿™ä¸Šé¢çš„ndkç‰ˆæœ¬ç›¸å¯¹æ¯”è¾ƒå…¨é¢ï¼Œé€‰æ‹©è‡ªå·±éœ€è¦çš„ç‰ˆæœ¬ä¸‹è½½å³å¯ã€‚<br>åšä¸»è¿™é‡Œç”¨åˆ°çš„æ˜¯<code>ndkr10e</code>ç‰ˆæœ¬ã€‚</p>
<h3 id="è§£å‹å®‰è£…"><a href="#è§£å‹å®‰è£…" class="headerlink" title="è§£å‹å®‰è£…"></a>è§£å‹å®‰è£…</h3><p>ä¸‹è½½ä¸‹æ¥åï¼Œå®Œæ•´çš„æ–‡ä»¶åå­—æ˜¯<code>android-ndk-r10e-darwin-x86_64.bin</code><br>åœ¨Macä¸Šï¼Œ<code>.bin</code>æ–‡ä»¶æ˜¯ä¸èƒ½ç›´æ¥ç”¨è§£å‹æ–‡ä»¶ç›´æ¥è§£å‹çš„ï¼Œè¿™æ—¶å€™éœ€è¦è¾“å…¥ä¸‹é¢å‘½ä»¤ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">chmod a+x android-ndk-r10c-darwin-x86_64.<span class="property">bin</span></span><br><span class="line">./android-ndk-r10c-darwin-x86_64.<span class="property">bin</span> <span class="comment">//åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦å®‰å…¨è®¤è¯</span></span><br></pre></td></tr></table></figure>
<p>è¾“å…¥ç¬¬äºŒè¡Œå‘½ä»¤åï¼Œå°±ä¼šçœ‹åˆ°æ–‡ä»¶å†è§£å‹äº†ï¼Œè§£å‹éœ€è¦ä¸€å°å°å°ä¼šå„¿ï¼Œç¨ç­‰ä¸€ä¸‹ä¸‹å°±è¡Œã€‚</p>
<h3 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h3><p>è¦ä½¿ç”¨ndkï¼Œè¿˜å¾—å°†ndké…ç½®åˆ°è®¾å¤‡çš„ç¯å¢ƒå˜é‡ä¸­ã€‚<br>åœ¨ç»ˆç«¯æ‰§è¡Œä¸‹é¢æ“ä½œ<br><code>vim .bash_profile</code><br>å¤åˆ¶ç²˜è´´å¦‚ä¸‹å†…å®¹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="variable constant_">ANDROID_SDK_ROOT</span>=<span class="regexp">/Users/</span>cxf/<span class="title class_">Library</span>/<span class="title class_">Android</span>/sdk     <span class="comment">// android sdkè·¯å¾„</span></span><br><span class="line"><span class="keyword">export</span> <span class="variable constant_">ANDROID_NDK_ROOT</span>=<span class="regexp">/Users/</span>cxf/<span class="title class_">Documents</span>/android-ndk-r10e  <span class="comment">// ndkè·¯å¾„</span></span><br><span class="line"><span class="keyword">export</span> <span class="variable constant_">NDK_ROOT</span>=<span class="regexp">/Users/</span>cxf/<span class="title class_">Documents</span>/android-ndk-r10e </span><br><span class="line"><span class="keyword">export</span> NDK_ROOT_quick=<span class="regexp">/Users/</span>cxf/<span class="title class_">Documents</span>/android-ndk-r10e</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šä¸Šé¢çš„è·¯å¾„éƒ½è¦æ”¹æˆè‡ªå·±çš„è·¯å¾„</p>
</blockquote>
<p>ä¿å­˜é€€å‡ºåè¾“å…¥å‘½ä»¤<code>source .bash_profile</code>å³å¯</p>
<h3 id="å¯èƒ½å‡ºç°çš„é”™è¯¯"><a href="#å¯èƒ½å‡ºç°çš„é”™è¯¯" class="headerlink" title="å¯èƒ½å‡ºç°çš„é”™è¯¯"></a>å¯èƒ½å‡ºç°çš„é”™è¯¯</h3><p>è¿›è¡Œäº†ä¸Šé¢æ“ä½œåï¼Œè¿˜æ˜¯å¯èƒ½ä¼šå‡ºç°<code>ndk not found</code>çš„é”™è¯¯ã€‚è¿™æ˜¯å› ä¸ºç™»é™†shellé€‰æ‹©çš„æ˜¯zshï¼ŒåŠ è½½çš„æ˜¯ <code>~/.zshrc</code>æ–‡ä»¶ï¼Œæ‰€ä»¥æ¯æ¬¡é‡å¯ç»ˆç«¯åé…ç½®çš„ä¸ç”Ÿæ•ˆè‡ªå·±åœ¨ <code>~/.bash_profile</code>ä¸­é…ç½®ç¯å¢ƒå˜é‡<br>è§£å†³æ–¹æ³•ï¼š<br>é¦–å…ˆåœ¨ç»ˆç«¯å‘½ä»¤è¡Œæ‰§è¡Œ<code>open .zshrc</code><br>å¦‚æœæç¤ºæ²¡æœ‰ .zshrc æ–‡ä»¶ï¼Œåˆ™ æ‰§è¡Œ <code>touch .zshrc</code> åˆ›å»ºæ–‡ä»¶ï¼Œå†æ·»åŠ  <code>source ~/.bash_profile</code><br>é‡å¯ç”µè„‘å³å¯ã€‚</p>
]]></content>
      <categories>
        <category>android ndk</category>
      </categories>
      <tags>
        <tag>android ndk</tag>
        <tag>ndkr10e</tag>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Macå‡çº§åå®‰è£…python2.7</title>
    <url>/4a90989.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å‰ä¸ä¹…åšä¸»å‡çº§äº†Macbookçš„ç³»ç»Ÿï¼Œå‡çº§åå´å‘ç°ç³»ç»Ÿè‡ªå¸¦çš„python2.7ä¸è§äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯python3ã€‚ä¹Ÿæ˜¯ç»™æˆ‘é€ æˆäº†è¯¸å¤šä¸ä¾¿ã€‚åé¢å‘ç°å…¶å®åªè¦è‡ªå·±é‡æ–°åœ¨ç”µè„‘ä¸Šè£…ä¸€ä¸ªpython2.7å°±è¡Œäº†ï¼Œç‚¹å‡»ä¸‹æ–¹é“¾æ¥ï¼Œç›´æ¥ä¸‹è½½å®‰è£…å°±è¡Œäº†ã€‚<br><a href="https://www.python.org/ftp/python/2.7.18/python-2.7.18-macosx10.9.pkg">ç›´æ¥ä¸‹è½½å®‰è£…å³å¯</a></p>
]]></content>
      <categories>
        <category>ç”µè„‘ä½¿ç”¨æŠ€å·§</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Macæç¤º&quot;æ–‡ä»¶å·²æŸåï¼Œæ‚¨åº”è¯¥å°†å®ƒç§»åˆ°åºŸçº¸ç¯“&quot;è§£å†³åŠæ³•</title>
    <url>/e9ae662c.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å‡ºç°è¿™ä¸ªæç¤ºæ˜¯ç”±äºmacé˜²æ­¢æ¶æ„è½¯ä»¶å®‰è£…ï¼Œåªå…è®¸æ­£è§„é€”å¾„è·å–çš„è½¯ä»¶å®‰è£…ï¼Œå¯¹äºç ´è§£è½¯ä»¶å¾ˆå¯èƒ½å‡ºç°æ­¤é—®é¢˜ã€‚</p>
<p>ç¬¬ä¸€ç§å¸¸è§æƒ…å†µï¼šåªéœ€è¦å¼€å¯å…è®¸â€œä»»ä½•æ¥æºâ€å³å¯</p>
<p>1.åœ¨ç»ˆç«¯æ§åˆ¶å°ä¸­è¾“å…¥ï¼š<code>sudo spctl --master-disable</code>ï¼Œå›è½¦,å¦‚æœä½ çš„ç¬”è®°æœ¬è®¾ç½®æœ‰å¼€æœºå¯†ç ï¼Œä¼šæç¤ºè¦ä½ è¾“å…¥å¯†ç ï¼Œè¾“å…¥çš„æ•´ä¸ªè¿‡ç¨‹ä¸­æ˜¯çœ‹ä¸åˆ°å¯†ç æ˜¾ç¤ºçš„ï¼Œä¸è¦å› ä¸ºçœ‹ä¸åˆ°è¾“å…¥çš„å¯†ç è€Œç€æ€¥ï¼Œç»§ç»­è¾“å…¥å®Œå¯†ç åæŒ‰ä¸‹å›è½¦é”®ã€‚<br>2.æ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½®â€”â€”&gt;å®‰å…¨æ€§ä¸éšç§ï¼Œæ˜¾ç¤ºäº†ä»»ä½•æ¥æºï¼Œç„¶åç‚¹å‡»å…è®¸æ¥è‡ªä»»ä½•æ¥æºã€‚å¦‚æœæ²¡æœ‰ã€ä»»ä½•æ¥æºã€‘çš„é€‰é¡¹ï¼Œå¯ä»¥å†æ¬¡æ‰§è¡Œåˆšæ‰çš„ä»£ç è¿›è¡Œå°è¯•ã€‚</p>
<p>3.é‡æ–°åŒå‡»å®‰è£…æ–‡ä»¶ä¾¿ä¸ä¼šå†æ¬¡æç¤ºâ€œæ–‡ä»¶å·²æŸåâ€äº†ã€‚</p>
<p>æ­¤æ—¶æœ‰çš„å°ä¼™ä¼´å‘ç°ä¾æ—§ä¼šå‡ºç°â€œæ–‡ä»¶å·²æŸåçš„æç¤ºâ€ï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨å¦å¤–ä¸€ç§æ–¹å¼äº†</p>
<p>1.æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ï¼š <code>sudo xattr -r -d com.apple.quarantine</code>ï¼Œæœ€åé¢åŠ ä¸Šä¸€ä¸ªç©ºæ ¼ï¼ˆåˆ«ç€æ€¥Enterï¼‰<br>2.ç„¶ååœ¨è®¿è¾¾-&gt;åº”ç”¨ç¨‹åºä¸­æ‰¾åˆ°ä½ è¦æ‰“å¼€çš„è½¯ä»¶ï¼Œæ‹–åˆ°ç»ˆç«¯çª—å£ä¸­ï¼Œå›è½¦æ‰§è¡Œï¼Œå°±å¯ä»¥æ­£å¸¸æ‰“å¼€æ–‡ä»¶äº†</p>
<blockquote>
<p>å…¶ä»–å¯æ‰§è¡Œæ–‡ä»¶ä¹Ÿå¯ä»¥ç”¨è¯¥æ–¹æ³•è§£å†³</p>
</blockquote>
]]></content>
      <categories>
        <category>ç”µè„‘ä½¿ç”¨æŠ€å·§</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownæ–‡æœ¬è½¬Wordæ–‡æ¡£ï¼Œç®€å•åˆé«˜æ•ˆ</title>
    <url>/b4b7357d.html</url>
    <content><![CDATA[<p>åœ¨æ—¥å¸¸å†™ä½œå’Œæ–‡æ¡£ç¼–è¾‘ä¸­ï¼ŒMarkdownæ˜¯ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„å·¥å…·ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦å°†Markdownæ–‡æœ¬è½¬æ¢ä¸ºWordæ–‡æ¡£ï¼Œä»¥ä¾¿æ›´å¥½åœ°ä¸ä»–äººå…±äº«ã€ç¼–è¾‘æˆ–æ‰“å°ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€äº›ç®€å•è€Œé«˜æ•ˆçš„æ–¹æ³•æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="ä½¿ç”¨è„šæœ¬"><a href="#ä½¿ç”¨è„šæœ¬" class="headerlink" title="ä½¿ç”¨è„šæœ¬"></a>ä½¿ç”¨è„šæœ¬</h3><p>ä½¿ç”¨Pythonè„šæœ¬å°†Markdownæ–‡æœ¬è½¬æ¢ä¸ºWordæ–‡æœ¬çš„æ–¹æ³•ã€‚ä½ éœ€è¦å®‰è£…<code>pypandoc</code>åº“ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸Pandocæ–‡æ¡£è½¬æ¢å™¨äº¤äº’çš„Pythonåº“ã€‚<br>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pypandoc</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">markdown_to_word</span>(<span class="params">markdown_text, output_path</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># Convert Markdown to Word</span></span><br><span class="line">        output = pypandoc.convert_text(markdown_text, <span class="string">&#x27;docx&#x27;</span>, <span class="built_in">format</span>=<span class="string">&#x27;md&#x27;</span>, outputfile=output_path)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Conversion successful. Word document saved at: <span class="subst">&#123;output_path&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Error during conversion: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># è¾“å…¥Markdownæ–‡æœ¬</span></span><br><span class="line">    markdown_text = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    # Markdown to Word</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    This is a sample Markdown text.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    - Item 1</span></span><br><span class="line"><span class="string">    - Item 2</span></span><br><span class="line"><span class="string">    - Item 3</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¾ç½®è¾“å‡ºWordæ–‡æ¡£è·¯å¾„</span></span><br><span class="line">    output_path = <span class="string">&quot;output.docx&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è°ƒç”¨å‡½æ•°è¿›è¡Œè½¬æ¢</span></span><br><span class="line">    markdown_to_word(markdown_text, output_path)</span><br></pre></td></tr></table></figure>
<p>å°†ä¸Šè¿°è„šæœ¬ä¸­çš„<code>markdown_text</code>æ›¿æ¢ä¸ºä½ çš„Markdownæ–‡æœ¬ï¼Œç„¶åè¿è¡Œè„šæœ¬ã€‚è½¬æ¢åçš„Wordæ–‡æ¡£å°†ä¿å­˜åœ¨æŒ‡å®šçš„è¾“å‡ºè·¯å¾„ä¸­ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•ä¾èµ–äºPandocï¼Œå› æ­¤ä½ éœ€è¦å®‰è£…Pandocå¹¶ç¡®ä¿å®ƒåœ¨ç³»ç»Ÿè·¯å¾„ä¸­ã€‚</p>
<h3 id="è½¬æ¢å·¥å…·-æ¨è"><a href="#è½¬æ¢å·¥å…·-æ¨è" class="headerlink" title="è½¬æ¢å·¥å…·(æ¨è)"></a>è½¬æ¢å·¥å…·(æ¨è)</h3><p>æœ‰è®¸å¤šåœ¨çº¿å’Œç¦»çº¿å·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬å°†Markdownæ–‡æœ¬è½¬æ¢ä¸ºWordæ–‡æ¡£ã€‚å…¶ä¸­ä¸€äº›å·¥å…·åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>Pandoc:</strong><br>Pandocæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æ¡£è½¬æ¢å·¥å…·ï¼Œæ”¯æŒå¤šç§æ–‡æœ¬æ ¼å¼ä¹‹é—´çš„è½¬æ¢ï¼ŒåŒ…æ‹¬Markdownåˆ°Wordã€‚ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pandoc input.md -o output.docx</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
        <tag>Word</tag>
      </tags>
  </entry>
  <entry>
    <title>STM32GPIOéƒ¨åˆ†ä»‹ç»</title>
    <url>/28639.html</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨è€å¸ˆäº¤ç»™äº†ä¸€ä¸ªé¡¹ç›®ï¼Œéœ€è¦ç”¨åˆ°STM32å•ç‰‡æœºï¼Œè¿™é‡Œå°±åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­æ‰€æ³¨æ„åˆ°çš„ä¸€äº›åœ°æ–¹æˆ–ç»†èŠ‚éƒ¨åˆ†è®°å½•äº†ä¸‹æ¥ï¼Œç¬”è€…æ‰€ä½¿ç”¨çš„æ˜¯STM32F407ZGT6èŠ¯ç‰‡ï¼ˆæ¢ç´¢è€…ï¼‰ã€‚</p>
<span id="more"></span>
<p><strong>æŸ¥çœ‹èŠ¯ç‰‡çš„æ•°æ®æ‰‹å†Œ</strong></p>
<p><img data-src="https://pic.imgdb.cn/item/66434a6c0ea9cb1403ceb8c0.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>è¿™ä¸ªè¡¨æ ¼å¯¹æ¯ä¸ªI&#x2F;Oå£çš„åŠŸèƒ½è¿›è¡Œäº†å¾ˆè¯¦ç»†çš„ä»‹ç»ã€‚æ¯ä¸ªI&#x2F;Oé™¤äº†ä½œä¸ºI&#x2F;Oä½¿ç”¨å¤–ï¼Œè¿˜å¯ä»¥ä½œä¸ºå…¶ä»–çš„å¤ç”¨ã€‚å·²ä»¥PE2å£ä¸ºä¾‹ï¼Œâ€œAlternate functionsâ€æ‰€å±•ç¤ºå°±æ˜¯å…¶å¯ä»¥å¤ç”¨çš„åŠŸèƒ½ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p> <strong>èŠ¯ç‰‡ç»“æ„</strong><br>F3ç³»åˆ—å’ŒF4ç³»åˆ—èŠ¯ç‰‡çš„èŠ¯ç‰‡ç»“æ„å¤§ä½“ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºF4å°†F3èŠ¯ç‰‡çš„ä¸Šä¸‹æ‹‰ç»“æ„é…ç½®ç”±å†…éƒ¨è½¬åˆ°äº†å¤–éƒ¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚<br><img data-src="https://pic.imgdb.cn/item/66434b080ea9cb1403cf85ba.png" /><br><img data-src="https://pic.imgdb.cn/item/66434b090ea9cb1403cf8655.png"/><br>åŒæ—¶å¤§å®¶æ³¨æ„åˆ°åœ¨ç¬¬äºŒå¼ å›¾çš„å³è¾¹æœ‰ä¸€ä¸ªâ€œTF:5Vå®¹å¿â€ï¼ŒF4èŠ¯ç‰‡I&#x2F;Oå£å¤§éƒ¨åˆ†ä¹Ÿæ”¯æŒ5Vå®¹å¿ï¼Œ5Vå®¹å¿å°±æ˜¯è¯´STM32çš„è¾“å‡ºç”µå‹æ˜¯3.3Vï¼Œä½†æ˜¯ä¹Ÿå®¹å¿è¾“å‡º5Vã€‚<br>é‚£ä¹ˆå“ªäº›I&#x2F;Oå£æ”¯æŒ5Vå®¹å¿äº†ï¼Œè¿™ä¸ªå¾—çœ‹æœ€ä¸Šé¢çš„èŠ¯ç‰‡æ‰‹å†Œï¼Œå¦‚æœèŠ¯ç‰‡åé¢æœ‰ä¸€æ å†™æœ‰â€œTFâ€æ ‡ç¤ºï¼Œå³è¯´æ˜æ”¯æŒ5Vå®¹å¿ã€‚</p>
<p><strong>GPIOç›¸å…³é…ç½®å¯„å­˜å™¨</strong><br>æ¯ç»„GPIOå£åŒ…å«ï¼‘ï¼ç»„å¯„å­˜å™¨ã€‚</p>
<p><code>ä¸€ä¸ªç«¯å£æ¨¡å¼å¯„å­˜å™¨ï¼ˆGPIOx_MODERï¼‰ ä¸€ä¸ªç«¯å£è¾“å‡ºç±»å‹å¯„å­˜å™¨(GPIOx_OTYPER) ä¸€ä¸ªç«¯å£è¾“å‡ºé€Ÿåº¦å¯„å­˜å™¨ï¼ˆGPIOx_OSPEEDR) ä¸€ä¸ªç«¯å£ä¸Šæ‹‰ä¸‹æ‹‰å¯„å­˜å™¨ï¼ˆGPIOx_PUPDR)ã€€ã€€å‰ï¼”ä¸ªä¸ºï¼“ï¼’ä½é…ç½®å¯„å­˜å™¨ ä¸€ä¸ªç«¯å£è¾“å…¥æ•°æ®å¯„å­˜å™¨ï¼ˆGPIOx_IDRï¼‰ ä¸€ä¸ªç«¯å£è¾“å‡ºæ•°æ®å¯„å­˜å™¨ï¼ˆGPIOx_ODR)ã€€ã€€ä¸­é—´ï¼’ä¸ªä¸ºï¼“ï¼’ä½æ•°æ®å¯„å­˜å™¨ ä¸€ä¸ªç«¯å£ç½®ä½/å¤ä½å¯„å­˜å™¨ï¼ˆGPIOx_BSRR) ä¸€ä¸ªç«¯å£é…ç½®é”å­˜å¯„å­˜å™¨ï¼ˆGPIOx_LCKR) ä¸¤ä¸ªå¤ä½åŠŸèƒ½å¯„å­˜å™¨ï¼ˆä½ä½GPIOx_AFRL &amp; GPIOx_AFRH) </code> </p>
<blockquote>
<p>å¦‚æœé…ç½®ä¸€ä¸ªIOå£éœ€è¦2ä¸ªä½ï¼Œé‚£ä¹ˆåˆšå¥½32ä½å¯„å­˜å™¨é…ç½®ä¸€ç»„IOå£16ä¸ªIOå£<br>å¦‚æœé…ç½®ä¸€ä¸ªIOå£åªéœ€è¦1ä¸ªä½ï¼Œä¸€èˆ¬é«˜16ä½ä¿ç•™<br>BSRRå¯„å­˜å™¨32ä½åˆ†ä¸ºä½16ä½BSRRLå’Œé«˜16ä½BSRRHï¼ŒBSRRLé…ç½®ä¸€ç»„IOå£çš„16ä¸ªIOå£çš„ç½®ä½çŠ¶æ€ï¼ˆ1ï¼‰ï¼ŒBSRRHé…ç½®å¤ä½çŠ¶æ€ï¼ˆ0ï¼‰ã€‚</p>
</blockquote>
<p><strong>ç«¯å£æ¨¡å¼å¯„å­˜å™¨(GPIOx_MODER)</strong><br><img data-src="https://pic.imgdb.cn/item/66434a6c0ea9cb1403ceb86e.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>MODERå¯„å­˜å™¨æ²¡ï¼’ä½æ§åˆ¶ä¸€ä¸ªIO,ï¼“ï¼’ä½å°±æ§åˆ¶ï¼‘ï¼–ä¸ªIOã€‚ä»¥GPIOAä¸ºä¾‹ï¼Œå®ƒå°±æœ‰GPIOA0~15ï¼Œå¦‚æœé…ç½®ä¸ºâ€™00â€™,åˆ™ä¸ºâ€œè¾“å…¥ï¼ˆå¤ä½çŠ¶æ€ï¼‰â€æ¨¡å¼ã€‚é‚£ä¹ˆ32ä½åˆšå¥½å¯ä»¥é…ç½®ä¸€ç»„IOçš„16ä¸ªIOã€‚</p>
<p><strong>ç«¯å£è¾“å‡ºç±»å‹å¯„å­˜å™¨(GPIOx_OTYPER)</strong><br>ä½†æ˜¯åªæœ‰è¾“å‡ºæ¨¡å¼æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦è¾“å‡ºç±»å‹ã€‚<br><img data-src="https://pic.imgdb.cn/item/66434a6c0ea9cb1403ceb886.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>OTYPERå¯„å­˜å™¨æ¯ä½æ§åˆ¶ä¸€ä¸ªIOï¼Œä½16ä½æ§åˆ¶ä¸€ç»„IOçš„16ä¸ªIOï¼Œé«˜16ä½ä¿ç•™æ²¡æœ‰ç”¨ã€‚<br> æ¯ä¸ªIOåªç”¨åˆ°ä¸€ä½ï¼Œå¯ä»¥è®¾ç½®ä½0æˆ–è€…1ã€‚å¦‚æœè®¾ç½®ä¸º0åˆ™ä¸ºâ€œè¾“å‡ºæ¨æŒ½â€ï¼Œè‹¥è¦è®¾ç½®ä¸ºâ€œå¤ç”¨è¾“å‡ºæ¨æŒ½â€ï¼Œåˆ™å°†ç«¯å£æ¨¡å¼å¯„å­˜å™¨è®¾ç½®ä¸ºâ€œå¤ç”¨åŠŸèƒ½æ¨¡å¼â€ï¼Œå†å°†è¿™é‡Œè®¾ç½®ä¸ºâ€œè¾“å‡ºæ¨æŒ½â€æ¨¡å¼å³å¯ã€‚</p>
<p><strong>æç¤º</strong> ä»»ä½•æ–¹å¼æ“ä½œIOå£ï¼Œéƒ½å¿…é¡»å…ˆä½¿èƒ½ç›¸åº”IOå£å§‹ç»ˆã€‚<br>â€˜RCC_AHB1PeriphColckCmd();â€™</p>
<blockquote>
<p>å…¶å®ƒçš„å¯„å­˜å™¨è®¾ç½®æ–¹æ³•ä¸è¿™ä¸¤ä¸ªç±»ä¼¼ï¼Œè¿™é‡Œä¸è¿‡å¤šä»‹ç»ã€‚</p>
</blockquote>
<blockquote>
<p>ä»¥ä¸Šå›¾ç‰‡å‡æ¥è‡ªæ¢ç´¢è€…å…‰ç›˜è‡ªå¸¦çš„èµ„æ–™ã€‚<br>å¦‚æœä¸å¦¥åœ°æ–¹ï¼Œè¿˜è¯·å„ä½è¯»è€…å¤šå¤šæŒ‡å‡ºã€‚éœ€è¦æ›´è¯¦ç»†èµ„æ–™çš„ä¹Ÿå¯ä»¥å’Œç¬”è€…è”ç³»</p>
</blockquote>
]]></content>
      <categories>
        <category>åµŒå…¥å¼å¼€å‘</category>
      </categories>
      <tags>
        <tag>ç¡¬ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>STM32ç³»ç»Ÿæ—¶é’Ÿæ ‘åˆ†æ</title>
    <url>/58656.html</url>
    <content><![CDATA[<p>ä¸‹é¢æ˜¯ä¸€ä¸ªSTM32èŠ¯ç‰‡çš„æ—¶é’Ÿæ ‘å›¾<br><img data-src="https://pic.imgdb.cn/item/664349da0ea9cb1403cde7b8.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>1ã€LSIæ˜¯ä½é€Ÿå†…éƒ¨æ—¶é’Ÿï¼ŒRCæŒ¯è¡å™¨ï¼Œé¢‘ç‡ä¸º32kHzå·¦å³ã€‚ä¾›ç‹¬ç«‹çœ‹é—¨ç‹—å’Œè‡ªåŠ¨å”¤é†’å•å…ƒä½¿ç”¨ã€‚<br>2ã€LSEæ˜¯ä½é€Ÿå¤–éƒ¨æ—¶é’Ÿï¼Œæ¥é¢‘ç‡ä¸º32.768kHzçš„çŸ³è‹±æ™¶ä½“ã€‚è¿™ä¸ªä¸»è¦æ˜¯RTCçš„æ—¶é’Ÿæºã€‚<br>3ã€HSEæ˜¯é«˜é€Ÿå¤–éƒ¨æ—¶é’Ÿï¼Œè¯¾æ¥çŸ³è‹±&#x2F;é™¶ç“·è°æŒ¯å™¨ï¼Œæˆ–è€…æ¥å¤–éƒ¨æ—¶é’Ÿæºï¼Œé¢‘ç‡èŒƒå›´ä¸º4MHz~26MHzã€‚æˆ‘ä»¬å¼€å‘æ¿æ¥çš„æ˜¯8Mçš„æ™¶æŒ¯ã€‚HSEä¹Ÿå¯ä»¥ç›´æ¥ä½œä¸ºç³»ç»Ÿæ—¶é’Ÿæˆ–è€…PLLè¾“å…¥ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>4ã€HSIæ˜¯é«˜é€Ÿå†…éƒ¨æ—¶é’Ÿï¼ŒRCæŒ¯è¡å™¨ï¼Œé¢‘ç‡ä¸º16MHzã€‚å¯ä»¥ç›´æ¥ä½œä¸ºç³»ç»Ÿæ—¶é’Ÿæˆ–è€…ç”¨ä½œPLLè¾“å…¥ã€‚<br>5ã€PLLä¸ºé”ç›¸ç¯å€é¢‘è¾“å‡ºã€‚STM32F4æœ‰ä¸¤ä¸ªPLLï¼š<br>ï¼ˆ1ï¼‰ä¸»PLLç”±HSEæˆ–è€…HSIæä¾›æ—¶é’Ÿä¿¡å·ï¼Œå¹¶å…·æœ‰ä¸¤ä¸ªä¸åŒçš„è¾“å‡ºæ—¶é’Ÿã€‚<br>    ç¬¬ä¸€ä¸ªè¾“å‡ºPLLPç”¨äºç”Ÿæˆé«˜é€Ÿçš„ç³»ç»Ÿæ—¶é’Ÿï¼ˆæœ€é«˜168MHzï¼‰<br>    ç¬¬äºŒä¸ªè¾“å‡ºPLLQç”¨äºç”ŸæˆUSBã€€OTG FSçš„æ—¶é’Ÿï¼ˆ48MHzï¼‰,éšæœºæ•°å‘ç”Ÿå™¨çš„æ—¶é’Ÿå’ŒSDIOæ—¶é’Ÿã€‚<br>ï¼ˆ2ï¼‰ä¸“ç”¨PLLï¼ˆPLLI2Sï¼‰ç”¨äºç”Ÿæˆç²¾ç¡®æ—¶é’Ÿï¼Œä»è€Œåœ¨I2Så€Ÿå£å®ç°é«˜å“è´¨éŸ³é¢‘æ€§èƒ½ã€‚<br><img data-src="https://pic.imgdb.cn/item/664349d90ea9cb1403cde6f4.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°">                                               <img data-src="https://pic.imgdb.cn/item/664349d90ea9cb1403cde6dc.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>å¤§å®¶åœ¨å›¾ä¸­å¯ä»¥çœ‹åˆ°ä¸€äº›æ¢¯å½¢ï¼Œè¿™äº›æ¢¯å½¢ä¸ºé€‰æ‹©å™¨ã€‚å·¦è¾¹ä¸ºé€‰æ‹©å™¨ï¼Œå³è¾¹ä¸ºåˆ†é¢‘å™¨</p>
<h3 id="LSIï¼Œä½é€Ÿå†…éƒ¨æ—¶é’Ÿ"><a href="#LSIï¼Œä½é€Ÿå†…éƒ¨æ—¶é’Ÿ" class="headerlink" title="LSIï¼Œä½é€Ÿå†…éƒ¨æ—¶é’Ÿ"></a>LSIï¼Œä½é€Ÿå†…éƒ¨æ—¶é’Ÿ</h3><p>LSIä½é€Ÿå†…éƒ¨æ—¶é’Ÿï¼Œé¢‘ç‡ä¸º32kHzã€‚RCæŒ¯è¡å™¨äº§ç”Ÿï¼Œå› ä¸ºæ˜¯RCæŒ¯è¡å™¨äº§ç”Ÿï¼Œæ‰€ä»¥é¢‘ç‡ä¸æ˜¯å¾ˆç¨³å®šã€‚ä¸»è¦å¯¹å³è¾¹çš„ç‹¬ç«‹çœ‹é—¨ç‹—åšæ—¶é’Ÿã€‚å› ä¸ºç‹¬ç«‹çœ‹é—¨ç‹—å¯¹æ—¶é’Ÿçš„ç²¾åº¦è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨LSIã€‚LSIæ¯”è¾ƒç®€å•ï¼Œç®€å•çš„ç†è§£å°±æ˜¯ä¸€ä¸ªç”µé˜»ä¸€ä¸ªç”µå®¹ã€‚<br>    LSIè¿˜å¯ä»¥ä½œä¸ºRTCæ¨¡å—çš„æ—¶é’Ÿæ¥æºã€‚åœ¨RTCæ¨¡å—å·¦è¾¹æœ‰ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œé‚£ä¹ˆå®ƒä¸ä»…å¯ä»¥é€‰æ‹©LSIä½œä¸ºæ—¶é’Ÿæ¥æºï¼Œè¿˜å¯ä»¥é€‰æ‹©LSEä½œä¸ºæ—¶é’Ÿæ¥æºã€‚</p>
<h3 id="LSEï¼Œä½é€Ÿå¤–éƒ¨æ—¶é’Ÿ"><a href="#LSEï¼Œä½é€Ÿå¤–éƒ¨æ—¶é’Ÿ" class="headerlink" title="LSEï¼Œä½é€Ÿå¤–éƒ¨æ—¶é’Ÿ"></a>LSEï¼Œä½é€Ÿå¤–éƒ¨æ—¶é’Ÿ</h3><p>LSEä¸€èˆ¬æ˜¯ç”±å¤–æ¥çš„ä¸€ä¸ªç²¾ç¡®çš„32.768kçš„æ™¶æŒ¯äº§ç”Ÿï¼Œæ¯”è¾ƒç¨³å®šï¼Œä¸€èˆ¬æƒ…å†µä¸‹RTCé€‰æ‹©LSEä½œä¸ºæ—¶é’Ÿæºã€‚RTCçš„æ—¶é’Ÿæ¥æºè¿˜å¯ä»¥æ¥è‡ªHSEï¼ˆå›¾ä¸Šæœ‰çº¿è¿ç€ï¼Œé¡ºç€çº¿æ‰¾ï¼‰ã€‚</p>
<h4 id="MCO1-MCO2"><a href="#MCO1-MCO2" class="headerlink" title="MCO1&#x2F;MCO2"></a>MCO1&#x2F;MCO2</h4><p>åœ¨LSEä¸‹é¢æœ‰MCO1å’ŒMCO2ä¸¤ä¸ªå¼•è„šï¼Œè¿™ä¸¤ä¸ªå¼•è„šå°±æ˜¯æŠŠèŠ¯ç‰‡å†…éƒ¨çš„æ—¶é’Ÿè¾“å‡ºåˆ°å¼•è„šã€‚MCO1å¯¹åº”çš„æ˜¯PA8ï¼ŒMCO2å¯¹åº”çš„æ˜¯PC9ï¼ˆç¬”è€…è¿™é‡Œä½¿ç”¨çš„STM32F407èŠ¯ç‰‡ï¼‰ï¼ŒMCO1å’ŒMCO2éƒ½æœ‰ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œå¯ä»¥é€‰æ‹©å››ä¸ªæ—¶é’Ÿæ¥æºï¼Œé€‰æ‹©å¥½æ—¶é’Ÿæ¥æºåç»è¿‡ä¸€ä¸ªåˆ†é¢‘å™¨ï¼Œåˆ†é¢‘å°±æ˜¯å¯¹æ—¶é’Ÿè¿›è¡Œé™¤æ³•è¿ç®—ï¼Œç„¶åå†è¾“å‡ºåˆ°å¯¹åº”çš„å¼•è„šã€‚</p>
<h3 id="HSEï¼Œé«˜é€Ÿå¤–éƒ¨æ—¶é’Ÿ"><a href="#HSEï¼Œé«˜é€Ÿå¤–éƒ¨æ—¶é’Ÿ" class="headerlink" title="HSEï¼Œé«˜é€Ÿå¤–éƒ¨æ—¶é’Ÿ"></a>HSEï¼Œé«˜é€Ÿå¤–éƒ¨æ—¶é’Ÿ</h3><p>HSEæ˜¯ç”±å¤–æ¥çš„æ™¶æŒ¯äº§ç”Ÿçš„ï¼Œæ˜¯4MHz<del>26MHzã€‚HSEäº§ç”Ÿæ—¶é’Ÿåä¼šå…ˆç»è¿‡ä¸€ä¸ªåˆ†é¢‘å™¨ï¼Œè¿™ä¸ªåˆ†é¢‘ç³»æ•°æ˜¯2</del>31ï¼Œåˆ†é¢‘åçš„æ—¶é’Ÿæ‰å¯ä»¥ä½œä¸ºRTCæ—¶é’Ÿçš„ä¸€ä¸ªé€‰æ‹©ã€‚</p>
<h3 id="HSIï¼Œé«˜é€Ÿå†…éƒ¨æ—¶é’Ÿ"><a href="#HSIï¼Œé«˜é€Ÿå†…éƒ¨æ—¶é’Ÿ" class="headerlink" title="HSIï¼Œé«˜é€Ÿå†…éƒ¨æ—¶é’Ÿ"></a>HSIï¼Œé«˜é€Ÿå†…éƒ¨æ—¶é’Ÿ</h3><p><img data-src="https://pic.imgdb.cn/item/664349d90ea9cb1403cde6ce.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ç”±RCæŒ¯è¡å™¨äº§ç”Ÿï¼Œç²¾åº¦ä¸é«˜ã€‚é¦–å…ˆï¼Œå¯ä»¥ä½œä¸ºMCO1çš„ä¸€ä¸ªæ—¶é’Ÿæ¥æºï¼Œå…¶æ¬¡å¯ä»¥ä½œä¸ºç³»ç»Ÿæ—¶é’Ÿçš„ä¸€ä¸ªæ¥æºã€‚å‘ä¸‹ä¼šå°†æ—¶é’Ÿä¿¡å·é€ç»™ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œè¿™ä¸ªé€‰æ‹©å™¨å¯ä»¥é€‰æ‹©æ¥è‡ªHSEå’ŒHSIçš„ä¿¡å·ã€‚å·¦è¾¹ä¸€ä¸ªâ€œ&#x2F;Mâ€çš„åˆ†é¢‘å™¨ï¼Œä¼šæŠŠé€‰æ‹©çš„æ—¶é’Ÿ&#x2F;Mä¹‹åäº§ç”Ÿä¸€ä¸ªé¢‘ç‡ï¼Œäº§ç”Ÿä¸€ä¸ªé¢‘ç‡åå°±åˆ°äº†PLLã€‚</p>
<h3 id="PLLï¼Œé”ç›¸ç¯å€é¢‘è¾“å‡º"><a href="#PLLï¼Œé”ç›¸ç¯å€é¢‘è¾“å‡º" class="headerlink" title="PLLï¼Œé”ç›¸ç¯å€é¢‘è¾“å‡º"></a>PLLï¼Œé”ç›¸ç¯å€é¢‘è¾“å‡º</h3><p><img data-src="https://pic.imgdb.cn/item/664349d90ea9cb1403cde6b3.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ä¸Šé¢çš„å«ä¸»PLLï¼Œä¸‹é¢çš„å«ä¸“ç”¨PLLã€‚ä¸»PLLäº§ç”Ÿä¸¤ç§æ—¶é’Ÿï¼Œä¸€ç§ä½œä¸ºç³»ç»Ÿæ—¶é’Ÿï¼›ä¸€ç§å«ä½œPLL48CKçš„æ—¶é’Ÿï¼Œç”¨äºUSB OTGçš„æ—¶é’Ÿã€‚ä¸“ç”¨PLLæ—¶é’Ÿä¸»è¦æ˜¯ç»™I2Sæ¨¡å—ä½¿ç”¨ï¼Œå› ä¸ºI2Sä¸»è¦å¤„ç†éŸ³é¢‘é—®é¢˜ï¼Œå¯¹äºé¢‘ç‡çš„è¦æ±‚æ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥å°±æœ‰ä¸€ä¸ªä¸“ç”¨PLLã€‚æ—¶é’Ÿä¿¡å·ä»â€œ&#x2F;Mâ€åˆ†é¢‘å™¨å‡ºæ¥åï¼Œè¿›å…¥â€œxNâ€çš„å€é¢‘å™¨ï¼Œç„¶ååœ¨â€œ&#x2F;Pâ€ã€â€œ&#x2F;Qâ€æˆ–è€…â€œ&#x2F;Râ€ï¼Œâ€œ&#x2F;Pâ€å‡ºæ¥åä½œä¸ºç³»ç»Ÿæ—¶é’Ÿï¼›â€œ&#x2F;Qâ€å‡ºæ¥åä½œä¸ºPLL48CKæ—¶é’Ÿï¼›â€œ&#x2F;Qâ€å‡ºæ¥åä½œä¸ºI2Sæ—¶é’Ÿã€‚ä»è¿™é‡Œæˆ‘ä»¬å°±èƒ½è®¡ç®—å‡ºä»PLLå‡ºæ¥çš„æ—¶é’Ÿé¢‘ç‡ï¼Œå‡è®¾ä»é€‰æ‹©å™¨è¿›å»çš„æ—¶é’Ÿé¢‘ç‡ä¸ºfï¼ŒPLL&#x3D;(f&#x2F;M)<em>(N&#x2F;P)æˆ–è€…PLL&#x3D;(f&#x2F;M)</em>(N&#x2F;Q)æˆ–è€…PLL&#x3D;(f&#x2F;M)*(N&#x2F;R)ã€‚</p>
<p>å›¾ä¸­A<del>Gè¡¨ç¤ºçš„åœ°æ–¹ï¼š<br><strong>Aï¼š</strong> è¿™é‡Œæ˜¯çœ‹é—¨ç‹—æ—¶é’Ÿè¾“å…¥ã€‚ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œçœ‹é—¨ç‹—æ—¶é’Ÿæºä¹‹æ©ç»™ä½ æ˜¯ä½é€Ÿçš„LSIæ—¶é’Ÿã€‚<br><strong>Bï¼š</strong>  è¿™é‡Œæ˜¯RTCæ—¶é’Ÿæºï¼Œä»å›¾ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒRTCçš„æ—¶é’Ÿæºå¯ä»¥é€‰æ‹©LSIï¼ŒLSEï¼Œä»¥åŠHSEåˆ†é¢‘åçš„æ—¶é’Ÿï¼ŒHSEåˆ†é¢‘ç³»æ•°ä¸º2</del>31ã€‚<br><strong>Cï¼š</strong>  è¿™é‡Œæ˜¯STM32F4è¾“å‡ºæ—¶é’ŸMCO1å’ŒMCO2ã€‚MCO1æ˜¯èŠ¯ç‰‡çš„ã€‚PA8å¼•è„šè¾“å‡ºæ—¶é’Ÿã€‚å®ƒæœ‰å››ä¸ªæ—¶é’Ÿæ¥æºåˆ†åˆ«ä¸ºï¼šHSI,LSE,HSEå’ŒPLLæ—¶é’Ÿã€‚MCO2æ˜¯å‘èŠ¯ç‰‡çš„PC9è¾“å‡ºæ—¶é’Ÿï¼Œå®ƒåŒæ ·æœ‰å››ä¸ªæ—¶é’Ÿæ¥æºåˆ†åˆ«ä¸ºï¼šHSE,PLL,SYSCLKä»¥åŠPLLI2Sæ—¶é’ŸMCOè¾“å‡ºæ—¶é’Ÿé¢‘ç‡æœ€å¤§ä¸è¶…è¿‡100MHzã€‚<br><strong>Dï¼š</strong> è¿™é‡Œæˆ‘ä»¬å€¼å¾—æ˜¯ä»¥å¤ªç½‘PTPæ—¶é’Ÿï¼ŒAHBæ—¶é’Ÿï¼ŒAPB2é«˜é€Ÿæ—¶é’Ÿï¼ŒAPB1ä½é€Ÿæ—¶é’Ÿã€‚è¿™äº›æ—¶é’Ÿéƒ½æ˜¯æ¥æºä¸SYSCLKç³»ç»Ÿæ—¶é’Ÿã€‚å…¶ä¸­ä»¥å¤ªç½‘PTPæ—¶é’Ÿæ˜¯ä½¿ç”¨ç³»ç»Ÿæ—¶é’Ÿã€‚æœ€å¤§æ—¶é’Ÿä¸º168MHzï¼ŒAPB2é«˜é€Ÿæ—¶é’Ÿæœ€å¤§é¢‘ç‡ä¸º84MHz,è€ŒAPB1ä½é€Ÿæ—¶é’Ÿæœ€å¤§é¢‘ç‡ä¸º42MHzã€‚<br><strong>Fï¼š</strong> è¿™é‡Œæ˜¯æŒ‡I2Sæ—¶é’Ÿæºã€‚ä»å›¾å¯ä»¥çœ‹å‡ºï¼ŒI2Sçš„æ—¶é’Ÿæºæ¥æºäºPLLI2Sæˆ–è€…æ˜ å°„åˆ°I2S_CKINå¼•è„šçš„å¤–éƒ¨æ—¶é’Ÿã€‚I2Så‡ºäºéŸ³è´¨çš„è€ƒè™‘ï¼Œå¯¹æ—¶é’Ÿç²¾åº¦è¦æ±‚å¾ˆé«˜ã€‚<br><strong>G:</strong> è¿™æ˜¯STM32F4å†…éƒ¨ä»¥å¤ªç½‘MACæ—¶é’Ÿçš„æ¥æºã€‚å¯¹äºMIIæ¥å£æ¥è¯´ï¼Œå¿…é¡»å‘å¤–éƒ¨PHYèŠ¯ç‰‡æä¾›25MHzçš„æ—¶é’Ÿï¼Œè¿™ä¸ªæ—¶é’Ÿï¼Œå¯ä»¥ç”±PHYèŠ¯ç‰‡å¤–æ¥æ™¶æŒ¯ï¼Œæˆ–è€…ä½¿ç”¨STM32F4çš„MCOè¾“å‡ºæ¥æä¾›ã€‚ç„¶åï¼ŒPHYèŠ¯ç‰‡å†ç»™STM32F4æä¾›ETH_MII_TX_CLKå’ŒETH_MII_RX_CLKæ—¶é’Ÿã€‚å¯¹äºRMIIæ¥å£æ¥è¯´ï¼Œå¤–éƒ¨å¿…é¡»æä¾›50MHzçš„æ—¶é’Ÿé©±åŠ¨PHYå’ŒSTM32F4çš„ETH_RMII_REF_CLK,è¿™ä¸ª50MHzæ—¶é’Ÿå¯ä»¥æ¥è‡ªPHYã€æœ‰æºæ™¶æŒ¯æˆ–è€…STM32F4çš„MCOã€‚æˆ‘ä»¬çš„å¼€å‘æ¿ä½¿ç”¨çš„æ˜¯RMIIæ¥å£ï¼Œä½¿ç”¨PHYèŠ¯ç‰‡æä¾›50MHzæ—¶é’Ÿé©±åŠ¨STM32F4çš„ETH_RMII_REF_CLK.<br><strong>Hï¼š</strong> è¿™é‡Œæ˜¯æŒ‡å¤–éƒ¨PHYæä¾›çš„USB OTG HS (60MHz)æ—¶é’Ÿã€‚</p>
<blockquote>
<p>æœ¬æ–‡å›¾ç‰‡æ¥STM32F4å¼€å‘æŒ‡å—ï¼Œéƒ¨åˆ†å†…å®¹å‚è€ƒSTM32F4å¼€å‘æŒ‡å—ã€‚å¦‚æœ‰ä¸å¦¥ï¼Œè¿˜è¯·å„ä½å¤šå¤šæŒ‡å‡ºã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>åµŒå…¥å¼å¼€å‘</category>
      </categories>
      <tags>
        <tag>ç¡¬ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>TypeScriptå†™ä¸€ä¸ªç±»ä¼¼äº`format.string`æ–¹æ³•</title>
    <url>/45f4cb45.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">formatString</span>(<span class="params">str: <span class="built_in">string</span>, ...args: <span class="built_in">any</span>[]</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">replace</span>(<span class="regexp">/\&#123;(\d+)\&#125;/g</span>, <span class="function">(<span class="params">match, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> args[index] !== <span class="string">&quot;undefined&quot;</span> ? args[index] : match;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&quot;Alice&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="title function_">formatString</span>(<span class="string">&quot;My name is &#123;0&#125; and I am &#123;1&#125; years old.&quot;</span>, name, age);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message); <span class="comment">// Output: &quot;My name is Alice and I am 25 years old.&quot;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>formatString</code> çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å’Œä»»æ„æ•°é‡çš„å‚æ•°ã€‚åœ¨å‡½æ•°ä½“å†…ï¼Œæˆ‘ä»¬ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ <code>/\\&#123;\\d+\\&#125;/g</code> æ¥åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„å ä½ç¬¦ <code>&#123;&#125;</code>ï¼Œå¹¶åœ¨æ¯ä¸ªåŒ¹é…é¡¹ä¸Šè°ƒç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥è¿›è¡Œæ›¿æ¢ã€‚</p>
<p>åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>args</code> æ•°ç»„æ¥è·å–ä¸å ä½ç¬¦ <code>&#123;&#125;</code> ä¸­çš„ç´¢å¼•å¯¹åº”çš„å‚æ•°ã€‚å¦‚æœå‚æ•°å­˜åœ¨ï¼Œåˆ™å°†å…¶ç”¨äºæ›¿æ¢å ä½ç¬¦ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬è¿”å›åŒ¹é…é¡¹æœ¬èº«ã€‚æœ€åï¼Œæˆ‘ä»¬è¿”å›æ›¿æ¢åçš„å­—ç¬¦ä¸²ã€‚</p>
<p>åœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸¤ä¸ªå˜é‡ <code>name</code> å’Œ <code>age</code>ï¼Œå¹¶ä½¿ç”¨ <code>formatString</code> å‡½æ•°æ¥å°†å®ƒä»¬çš„å€¼åµŒå…¥åˆ°å­—ç¬¦ä¸²ä¸­ã€‚æœ€åï¼Œæˆ‘ä»¬è¾“å‡ºæ ¼å¼åŒ–åçš„å­—ç¬¦ä¸² <code>message</code>ï¼Œå®ƒçš„å€¼æ˜¯ <code>&quot;My name is Alice and I am 25 years old.&quot;</code>ã€‚</p>
]]></content>
      <categories>
        <category>TypeScript</category>
      </categories>
      <tags>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>TypeScriptæ­£åˆ™éªŒè¯å­—ç¬¦ä¸²æ˜¯å¦ä¸ºé‚®ç®±åœ°å€</title>
    <url>/a0e0975a.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="TypeScript-æ­£åˆ™éªŒè¯é‚®ç®±åœ°å€"><a href="#TypeScript-æ­£åˆ™éªŒè¯é‚®ç®±åœ°å€" class="headerlink" title="TypeScript æ­£åˆ™éªŒè¯é‚®ç®±åœ°å€"></a>TypeScript æ­£åˆ™éªŒè¯é‚®ç®±åœ°å€</h3><p>è¦ä½¿ç”¨ TypeScript è¿›è¡Œé‚®ç®±åœ°å€çš„æ­£åˆ™éªŒè¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾ email æ˜¯è¦éªŒè¯çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">const</span> email = <span class="string">&quot;example@email.com&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰é‚®ç®±åœ°å€çš„æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">const</span> emailRegex = <span class="regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ test æ–¹æ³•è¿›è¡ŒéªŒè¯</span></span><br><span class="line"><span class="keyword">if</span> (emailRegex.<span class="title function_">test</span>(email)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;email&#125;</span> æ˜¯æœ‰æ•ˆçš„é‚®ç®±åœ°å€`</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;email&#125;</span> ä¸æ˜¯æœ‰æ•ˆçš„é‚®ç®±åœ°å€`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä»£ç ä¸­ï¼ŒemailRegex æ˜¯ä¸€ä¸ªåŸºæœ¬çš„é‚®ç®±åœ°å€æ­£åˆ™è¡¨è¾¾å¼ï¼Œå®ƒåŒ¹é…å¸¸è§çš„é‚®ç®±æ ¼å¼ã€‚isValidEmail å‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºè¯¥å­—ç¬¦ä¸²æ˜¯å¦æ˜¯æœ‰æ•ˆçš„é‚®ç®±åœ°å€ã€‚åœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨è¿™ä¸ªå‡½æ•°å¹¶æ ¹æ®è¿”å›å€¼è¾“å‡ºç›¸åº”çš„æ¶ˆæ¯ã€‚è¯·æ³¨æ„ï¼Œè¿™åªæ˜¯ä¸€ä¸ªåŸºæœ¬çš„é‚®ç®±åœ°å€éªŒè¯ï¼Œå®é™…ä¸Šï¼ŒéªŒè¯é‚®ç®±åœ°å€å¯èƒ½ä¼šæ›´åŠ å¤æ‚ï¼Œå› ä¸ºé‚®ç®±åœ°å€çš„è§„èŒƒæœ‰å¾ˆå¤šå˜åŒ–ã€‚</p>
]]></content>
      <categories>
        <category>TypeScript</category>
      </categories>
      <tags>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Argument value 10880 is outside the valid range [0, 255]</title>
    <url>/26963.html</url>
    <content><![CDATA[<p>ä»Šå¤©ä¸€ä¸å°å¿ƒæŠŠè‡ªå·±çš„macç³»ç»Ÿå‡çº§äº†ï¼Œä¸ºåç»­çš„å­¦ä¹ å¸¦æ¥äº†ä¸€å †çš„éº»çƒ¦ã€‚å†™è¿™ç¯‡åšæ–‡æ˜¯å¸Œæœ›å„ç§åŒæ˜¯ioså¼€å‘çš„åŒè¡Œä¸è¦è¸©é›·ã€‚ç³»ç»Ÿå‡çº§åˆ°æœ€æ–°ä¹‹åï¼Œä¹Ÿåªèƒ½å°†å°±å°†Xcodeå‡çº§åˆ°æœ€æ–°ã€‚</p>
<span id="more"></span>
<p>ç°åœ¨æ‰€ç”¨åˆ°çš„ç¯å¢ƒ<br>Macï¼šmacOS 11.4<br>Xcodeï¼š12.5<br>äºæ˜¯åœ¨åˆ›å»ºCocos å·¥ç¨‹æ—¶ï¼Œå°±é‡åˆ°äº†ä¸‹é¢è¿™ä¸ªé—®é¢˜</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<ul>
<li>åŒå‡»å·¦è¾¹æç¤ºé”™è¯¯çš„åœ°æ–¹ï¼Œä¼šç›´æ¥è·³è½¬åˆ°é”™è¯¯ä»£ç å¤„<br><img data-src="https://pic.imgdb.cn/item/66433d1d0ea9cb1403b5a7ca.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
<li>é¼ æ ‡é€‰ä¸­bt_splat_psï¼Œå³é”®ï¼ŒJump to Definitionå°±ä¼šè·³è½¬åˆ°è¯¥å˜é‡å®šä¹‰çš„åœ°æ–¹<br><img data-src="https://pic.imgdb.cn/item/66433d2b0ea9cb1403b5b649.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> bt_splat_psæ˜¯ä¸€ä¸ªå®šä¹‰å®ï¼Œç›´æ¥æŒ‡å‘ bt_pshufd_ps</li>
<li>åŒç†ï¼Œä¹Ÿå¯ä»¥æ‰¾åˆ°å®šä¹‰bt_pshufd_psçš„åœ°æ–¹<br> <img data-src="https://pic.imgdb.cn/item/66433d3e0ea9cb1403b5ca3f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä¸éš¾å‘ç°ï¼Œbt_pshufd_psåŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªå®šä¹‰å®</li>
</ul>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œé”™è¯¯æ˜¯å€¼è¶…å‡ºäº†èŒƒå›´äº†<br><img data-src="https://pic.imgdb.cn/item/66433d4c0ea9cb1403b5dc6f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¿™é‡Œï¼Œç›´æ¥ä¿®æ”¹å€¼çš„èŒƒå›´å°±è¡Œäº†ï¼Œä¿®æ”¹ä¸‹é¢å€¼çš„èŒƒå›´<br><img data-src="https://pic.imgdb.cn/item/66433d5b0ea9cb1403b5ea9e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä¿®æ”¹å¦‚ä¸‹<br><img data-src="https://pic.imgdb.cn/item/66433d5b0ea9cb1403b5ea13.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è¿™æ ·ï¼Œè¿™ä¸ªbugå°±è§£å†³å•¦<br>å½“æˆ‘æ»¡æ€€æ¬£å–œå»è¿è¡Œå·¥ç¨‹çš„æ—¶å€™ï¼Œåˆå‡ºç°äº†ä¸‹é¢è¿™ä¸ªé—®é¢˜<br><img data-src="https://pic.imgdb.cn/item/66433d5b0ea9cb1403b5ea9e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å¿ƒä¸­é¡¿æ—¶â€œä¸‡é©¬å¥”è…¾â€ï¼Œè¿™ä¸ªè‹¹æœå…¬å¸ï¼Œå‡çº§çš„äº§å“æ€»æ˜¯ä¸€å¤§å †bugï¼Œè®©äººå¤´ç–¼ã€‚</p>
<p>æ—¶é—´ä¸æ—©äº†ï¼Œä¸ºäº†å¤´ä¸Šä»…å‰©çš„å‡ æ ¹å¤´å‘ï¼Œå†³å®šç¡è§‰ä¸çœ‹ã€‚<br>å¦‚æœæ‚¨æœ‰å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥å‘ç»™æˆ‘å­¦ä¹ å­¦ä¹ ï¼Œæœ›å„ä½å¤§ä½¬å¤šå¤šæŒ‡æ•™ï¼Œå°ç™½åœ¨æ­¤æ•¬ä¸Š</p>
]]></content>
      <tags>
        <tag>mac</tag>
        <tag>Xcode</tag>
      </tags>
  </entry>
  <entry>
    <title>checkReleaseDuplicateClasses</title>
    <url>/d1e46ee1.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Cocos Creatorå¯¼å‡ºçš„å®‰å“å·¥ç¨‹åœ¨æ‰“åŒ…çš„æ—¶å€™æŠ¥äº†<code>Execution failed for task: checkReleaseDuplicateClasses</code>è¿™ä¸ªé”™ã€‚å¦‚ä¸‹å›¾ï¼š</p>
<img data-src="https://pic.imgdb.cn/item/664327ba0ea9cb14038f1b05.png" alt="" />
è§£å†³æ–¹æ¡ˆï¼š
åœ¨`gradle.properties`ä¸­åŠ ä¸Šä¸‹é¢ä¸¤è¡Œ
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">android.useAndroidX=true</span><br><span class="line">android.enableJetifier=true</span><br></pre></td></tr></table></figure>
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img data-src="https://pic.imgdb.cn/item/664327ed0ea9cb14038f53c9.png" alt=""/>

<p>ç„¶ååˆ·æ–°é‡æ–°ç¼–è¯‘å³å¯ã€‚</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>TypeScript</tag>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>java.lang.RuntimeException Failure delivering result ResultInfo{who=null,request=64206,result=-1}</title>
    <url>/facebook1.html</url>
    <content><![CDATA[<p>ä»Šå¤©åœ¨æ¥å…¥facebookç¬¬ä¸‰æ–¹ç™»å½•çš„æ—¶å€™ï¼Œç‚¹å‡»ç™»å½•æŒ‰é’®ï¼ŒAPPé—ªé€€ï¼Œå¹¶æŠ¥é”™<br><code>java.lang.RuntimeException Failure delivering result ResultInfo&#123;who=null,request=64206,result=-1&#125;</code></p>
<span id="more"></span>
<p>å¦‚ä¸‹å›¾ï¼š</p>
<img data-src="https://pic.imgdb.cn/item/6646e299d9c307b7e9ccc15e.png" alt="" />

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="é—®é¢˜å‡ºç°çš„åŸå› "><a href="#é—®é¢˜å‡ºç°çš„åŸå› " class="headerlink" title="é—®é¢˜å‡ºç°çš„åŸå› "></a>é—®é¢˜å‡ºç°çš„åŸå› </h3><p><code>PROP_TARGET_SDK_VERSION</code>çš„ç‰ˆæœ¬è®¾ç½®ä¸å¯¹ï¼Œæˆ‘ä¹‹å‰è®¾ç½®ä¸º31ï¼Œç°åœ¨å°†ç‰ˆæœ¬æ”¹ä¸º30å³å¯ã€‚<br>ä¹‹å‰facebookç™»å½•æ˜¯å…¶ä»–åŒäº‹å¼„çš„ï¼Œå¼„å¥½ååˆç»™å»æ‰äº†ï¼Œç°åœ¨æˆ‘æ¥é‡æ–°æ¥å…¥ã€‚åœ¨æ¥å…¥çš„æ—¶å€™ï¼Œæ²¡æœ‰å¤ªä»”ç»†çœ‹å®˜æ–¹çš„å¼€å‘æ–‡æ¡£ï¼Œç›´æ¥å°±ç”¨äº†ä»–ä¹‹å‰çš„ä»£ç ã€‚ç»“æœæ²¡æœ‰é…ç½®å¥½æ­£ç¡®çš„å‚æ•°ã€‚<br>å³<code>facebook_app_id</code>ã€<code>fb_login_protocol_scheme</code>ä»¥åŠ <code>facebook_client_token</code> è¿™ä¸‰ä¸ªå‚æ•°çš„å€¼æ²¡æœ‰æ”¹ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><p>é…ç½®å¥½ä¸Šé¢è¯´çš„ä¸‰ä¸ªå‚æ•°å€¼å°±å¯ä»¥äº†ã€‚<br>å…·ä½“æ–¹æ³•ï¼š</p>
<ul>
<li>åœ¨andorid studio ä¸­æ‰“å¼€ <code>/app/res/values/strings.xml</code> æ–‡ä»¶ã€‚</li>
<li>æ·»åŠ åç§°ä¸º <code>facebook_app_id</code>ã€<code>fb_login_protocol_scheme</code> ä»¥åŠ <code>facebook_client_token</code> çš„ <code>string</code> å…ƒç´ ï¼Œå¹¶å°†å€¼ç›¸åº”è®¾ç½®ä¸º<strong>åº”ç”¨ç¼–å·</strong>å’Œ<strong>å®¢æˆ·ç«¯å£ä»¤</strong>ã€‚è·å–æ–¹å¼ä¸‹é¢è¯´åˆ°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„åº”ç”¨ç¼–å·ä¸º <code>1234</code>ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯å£ä»¤ä¸º <code>56789</code>ï¼Œåˆ™æ‚¨çš„ä»£ç æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;string name=<span class="string">&quot;facebook_app_id&quot;</span>&gt;<span class="number">1234</span>&lt;/string&gt;</span><br><span class="line">&lt;string name=<span class="string">&quot;fb_login_protocol_scheme&quot;</span>&gt;fb1234&lt;/string&gt;</span><br><span class="line">&lt;string name=<span class="string">&quot;facebook_client_token&quot;</span>&gt;<span class="number">56789</span>&lt;/string&gt;</span><br></pre></td></tr></table></figure>
ä»”ç»†çœ‹ï¼Œè¿™é‡Œçš„<code>fb_login_protocol_scheme</code>å…¶å®å°±æ˜¯åœ¨<code>facebook_app_id</code>å‰é¢åŠ ä¸Š<code>fb</code>å³å¯ï¼Œä¸è¦å‚»å‚»çš„åˆ°å¤„æ‰¾äº†ã€‚</li>
</ul>
<h3 id="è·å–æ–¹å¼"><a href="#è·å–æ–¹å¼" class="headerlink" title="è·å–æ–¹å¼"></a>è·å–æ–¹å¼</h3><h4 id="è·å–åº”ç”¨ç¼–å·"><a href="#è·å–åº”ç”¨ç¼–å·" class="headerlink" title="è·å–åº”ç”¨ç¼–å·"></a>è·å–åº”ç”¨ç¼–å·</h4><p>æ‰“å¼€ä½ çš„facebookå¼€å‘è€…åå°ï¼ŒæŸ¥çœ‹ç›¸åº”çš„åº”ç”¨ï¼Œä¸Šé¢å°±æœ‰ä¸ªåº”ç”¨ç¼–å·ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/6646e632d9c307b7e9d12171.png" alt="" /></p>
<h4 id="è·å–å®¢æˆ·ç«¯å£ä»¤"><a href="#è·å–å®¢æˆ·ç«¯å£ä»¤" class="headerlink" title="è·å–å®¢æˆ·ç«¯å£ä»¤"></a>è·å–å®¢æˆ·ç«¯å£ä»¤</h4><p>åœ¨å¼€å‘è€…åå°ï¼Œç‚¹å‡»ä½ æ‰€åˆ›å»ºçš„åº”ç”¨ï¼Œä¾æ¬¡é€‰æ‹©<code>åº”ç”¨è®¾ç½®</code>ï¼Œ<code>é«˜çº§</code>ï¼Œåœ¨<code>å®‰å…¨</code>è¿™ä¸€æ å°±å¯ä»¥çœ‹åˆ°<code>å®¢æˆ·ç«¯å£ä»¤</code>äº†ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/6646e692d9c307b7e9d18988.png" alt="" /></p>
<p>é…ç½®å¥½åå°±å¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥äº†~</p>
]]></content>
      <categories>
        <category>android studio</category>
        <category>facebook</category>
      </categories>
      <tags>
        <tag>facebook</tag>
      </tags>
  </entry>
  <entry>
    <title>chromeè°ƒè¯•æ‰‹æœºç½‘é¡µ</title>
    <url>/343880cb.html</url>
    <content><![CDATA[<h3 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h3><p>1ã€ PCç«¯å®‰è£…å¥½chrmoeæµè§ˆå™¨<br>2ã€ å®‰å“æ‰‹æœºå®‰è£…å¥½chrmoeæµè§ˆå™¨<br>3ã€ æ•°æ®çº¿</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="æ‰‹æœºæ‰“å¼€è°ƒè¯•æ¨¡å¼"><a href="#æ‰‹æœºæ‰“å¼€è°ƒè¯•æ¨¡å¼" class="headerlink" title="æ‰‹æœºæ‰“å¼€è°ƒè¯•æ¨¡å¼"></a>æ‰‹æœºæ‰“å¼€è°ƒè¯•æ¨¡å¼</h3><p>è¿›å…¥æ‰‹æœºè®¾ç½®ï¼Œæ‰¾åˆ°å¼€å‘è€…æ¨¡å¼ï¼Œç„¶åå¯ç”¨USBè°ƒè¯•</p>
<h3 id="æ‰“å¼€PCç«¯chromeè°ƒè¯•åŠŸèƒ½"><a href="#æ‰“å¼€PCç«¯chromeè°ƒè¯•åŠŸèƒ½" class="headerlink" title="æ‰“å¼€PCç«¯chromeè°ƒè¯•åŠŸèƒ½"></a>æ‰“å¼€PCç«¯chromeè°ƒè¯•åŠŸèƒ½</h3><p>1ã€ç‚¹å‡»chrmoeå³ä¸Šè§’çš„3ä¸ªç‚¹ç‚¹<br>2ã€é€‰æ‹©æ‰©å±•ç¨‹åºï¼Œé€‰æ‹©ç®¡ç†æ‰©å±•ç¨‹åº<br>3ã€ç®¡ç†æ‰©å±•ç¨‹åºå³ä¸Šè§’æœ‰ä¸€ä¸ª<code>å¼€å‘è€…æ¨¡å¼</code>çš„å¼€å…³ï¼Œå°†å¼€å‘è€…æ¨¡å¼æ‰“å¼€<br>å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/66586a1dd9c307b7e993fcc5.png" alt="" /></p>
<h3 id="æµè§ˆå™¨è¿æ¥æ‰‹æœº"><a href="#æµè§ˆå™¨è¿æ¥æ‰‹æœº" class="headerlink" title="æµè§ˆå™¨è¿æ¥æ‰‹æœº"></a>æµè§ˆå™¨è¿æ¥æ‰‹æœº</h3><p>1ã€æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ç½‘å€<code>chrome://inspect/#devices</code><br>2ã€æ‰‹æœºé€šè¿‡æ•°æ®çº¿è¿ä¸Šç”µè„‘ï¼Œé€‰æ‹©<code>å…è®¸è®¿é—®æ‰‹æœºæ–‡ä»¶</code><br>3ã€åˆ·æ–°æµè§ˆå™¨ï¼Œå°±ä¼šå‡ºç°ä¸‹é¢ç•Œé¢ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°ï¼Œç­‰ä¸€ä¼šå„¿å†åˆ·æ–°ï¼Œåªè¦æ‰‹æœºæˆåŠŸè¿ä¸Šç”µè„‘ï¼Œå°±ä¸€å®šä¼šå‡ºç°ä¸‹é¢ç•Œé¢<br><img data-src="https://pic.imgdb.cn/item/66586a21d9c307b7e99411a9.png" alt="" /><br>4ã€ç‚¹å‡»<code>inspect</code>å³å¯è°ƒè¯•æ‰‹æœºç½‘é¡µå•¦~</p>
<h3 id="å…¶å®ƒè¯´æ˜"><a href="#å…¶å®ƒè¯´æ˜" class="headerlink" title="å…¶å®ƒè¯´æ˜"></a>å…¶å®ƒè¯´æ˜</h3><p>1ã€è¯¥ç•Œé¢å¦‚æ²¡æœ‰æ²¡æœ‰å‡ºç°<code>Remote Target</code>ï¼Œè¯´æ˜æ‰‹æœºæ²¡æœ‰è¿æ¥æˆåŠŸï¼Œåªè¦è¿æ¥æˆåŠŸï¼Œå“ªæ€•æ‰‹æœºæ²¡æœ‰æ‰“å¼€æµè§ˆå™¨ï¼Œä¹Ÿä¼šå‡ºç°å¯¹åº”æ‰‹æœºçš„å‹å·ã€‚<br>2ã€æ‰‹æœºæ‰“å¼€<code>Chrome</code>æµè§ˆå™¨ï¼Œå°±ä¼šæœ‰å›¾ä¸­æ¡†æ¡†ä¸­çš„å†…å®¹ï¼Œæµè§ˆå™¨é¡µé¢è¶Šå¤šï¼Œæ¡†æ¡†é‡Œçš„å†…å®¹å°±è¶Šå¤šï¼Œè€Œä¸”æ¯ä¸€æ¡ä¸‹é¢éƒ½ä¼šæ˜¾ç¤ºä½ æ‰“å¼€çš„ç½‘å€ï¼Œé€‰æ‹©è‡ªå·±è¦è°ƒè¯•çš„ç½‘é¡µå°±è¡Œã€‚<br>3ã€éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œå¯ä»¥è‡ªè¡Œä¸‹è½½æ¢¯å­ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹æœ¬åœ°<code>host</code>æ–‡ä»¶ã€‚</p>
]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>å‰ç«¯å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>Chrome Debugging for Mobile Webpages</title>
    <url>/343880cben.html</url>
    <content><![CDATA[<h3 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h3><ol>
<li>Install Chrome browser on your PC.</li>
<li>Install Chrome browser on your Android phone.</li>
<li>USB cable<span id="more"></span></li>
</ol>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Enable-Debugging-Mode-on-Your-Phone"><a href="#Enable-Debugging-Mode-on-Your-Phone" class="headerlink" title="Enable Debugging Mode on Your Phone"></a>Enable Debugging Mode on Your Phone</h3><p>Go to your phone settings, find Developer Mode, and enable USB debugging.</p>
<h3 id="Enable-Chrome-Debugging-on-PC"><a href="#Enable-Chrome-Debugging-on-PC" class="headerlink" title="Enable Chrome Debugging on PC"></a>Enable Chrome Debugging on PC</h3><ol>
<li>Click the three dots in the upper-right corner of Chrome.</li>
<li>Go to â€œExtensionsâ€ and select â€œManage Extensionsâ€.</li>
<li>Toggle on the â€œDeveloper Modeâ€ switch in the top right corner of the â€œManage Extensionsâ€ page.<br>See the image below:<img data-src="https://pic.imgdb.cn/item/66586a1dd9c307b7e993fcc5.png" alt="" /></li>
</ol>
<h3 id="Connect-Browser-to-Phone"><a href="#Connect-Browser-to-Phone" class="headerlink" title="Connect Browser to Phone"></a>Connect Browser to Phone</h3><ol>
<li>Open Chrome and go to <code>chrome://inspect/#devices</code>.</li>
<li>Connect your phone to the PC via USB and choose â€œAllow access to phone dataâ€.</li>
<li>Refresh the browser; if the connection is successful, you will see the following interface. If not, wait a moment and refresh again. Once the phone is connected to the PC, the interface will appear.<img data-src="https://pic.imgdb.cn/item/66586a21d9c307b7e99411a9.png" alt="" /></li>
<li>Click <code>inspect</code> to start debugging the mobile webpage!</li>
</ol>
<h3 id="Additional-Notes"><a href="#Additional-Notes" class="headerlink" title="Additional Notes"></a>Additional Notes</h3><ol>
<li>If the interface does not show <code>Remote Target</code>, it means the phone is not connected successfully. Once connected, the phone model will appear, even if the browser is not open on the phone.</li>
<li>When the Chrome browser is open on your phone, the content inside the box will show. The more browser pages you have open, the more items will be displayed in the box, and each entry will show the URL you opened. Simply select the webpage you want to debug.</li>
<li>For VPN or proxy access, you can install a VPN application, or modify the local <code>hosts</code> file.</li>
</ol>
]]></content>
      <categories>
        <category>Frontend Development</category>
      </categories>
      <tags>
        <tag>Frontend Development</tag>
      </tags>
  </entry>
  <entry>
    <title>java.lang.RuntimeException Failure delivering result ResultInfo{who=null,request=64206,result=-1}</title>
    <url>/facebook1en.html</url>
    <content><![CDATA[<p>Today, while integrating Facebook third-party login, the app crashed after clicking the login button, with the following error:<br><code>java.lang.RuntimeException Failure delivering result ResultInfo&#123;who=null,request=64206,result=-1&#125;</code></p>
<span id="more"></span>
<p>See the image below:</p>
<img data-src="https://pic.imgdb.cn/item/6646e299d9c307b7e9ccc15e.png" alt="" />

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Cause-of-the-Problem"><a href="#Cause-of-the-Problem" class="headerlink" title="Cause of the Problem"></a>Cause of the Problem</h3><p>The <code>PROP_TARGET_SDK_VERSION</code> setting was incorrect. I had previously set it to 31, but changing it to 30 resolved the issue.<br>Previously, Facebook login integration was done by another colleague who later removed it. When I re-integrated it, I didnâ€™t pay enough attention to the official documentation and directly reused the previous code. As a result, the parameters were not configured correctly.<br>The values for <code>facebook_app_id</code>, <code>fb_login_protocol_scheme</code>, and <code>facebook_client_token</code> were not updated.</p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>Configure the values for the three parameters mentioned above.<br>Steps:</p>
<ul>
<li>Open the <code>/app/res/values/strings.xml</code> file in Android Studio.</li>
<li>Add <code>string</code> elements for <code>facebook_app_id</code>, <code>fb_login_protocol_scheme</code>, and <code>facebook_client_token</code>, and set their values to the <strong>App ID</strong> and <strong>Client Token</strong>. The method to obtain these values is explained below. For example, if your App ID is <code>1234</code> and the Client Token is <code>56789</code>, the code would look like this:</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;string name=<span class="string">&quot;facebook_app_id&quot;</span>&gt;<span class="number">1234</span>&lt;/string&gt;</span><br><span class="line">&lt;string name=<span class="string">&quot;fb_login_protocol_scheme&quot;</span>&gt;fb1234&lt;/string&gt;</span><br><span class="line">&lt;string name=<span class="string">&quot;facebook_client_token&quot;</span>&gt;<span class="number">56789</span>&lt;/string&gt;</span><br></pre></td></tr></table></figure>
<p>Carefully note that <code>fb_login_protocol_scheme</code> is simply your <code>facebook_app_id</code> prefixed with <code>fb</code>. Thereâ€™s no need to search for it elsewhere.</p>
<h3 id="How-to-Obtain-the-Values"><a href="#How-to-Obtain-the-Values" class="headerlink" title="How to Obtain the Values"></a>How to Obtain the Values</h3><h4 id="Obtaining-the-App-ID"><a href="#Obtaining-the-App-ID" class="headerlink" title="Obtaining the App ID"></a>Obtaining the App ID</h4><p>Open your Facebook Developer Console, and check the corresponding app. The App ID is displayed there, as shown in the image below:<br><img data-src="https://pic.imgdb.cn/item/6646e632d9c307b7e9d12171.png" alt="" /></p>
<h4 id="Obtaining-the-Client-Token"><a href="#Obtaining-the-Client-Token" class="headerlink" title="Obtaining the Client Token"></a>Obtaining the Client Token</h4><p>In the Developer Console, click on your app, navigate to <code>App Settings</code>, then <code>Advanced</code>, and find the <code>Client Token</code> under the <code>Security</code> section, as shown below:<br><img data-src="https://pic.imgdb.cn/item/6646e692d9c307b7e9d18988.png" alt="" /></p>
<p>Once configured, you can proceed to the next step!</p>
]]></content>
      <categories>
        <category>android studio</category>
        <category>facebook</category>
      </categories>
      <tags>
        <tag>facebook</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-Luaä¸­Labelæ–‡æœ¬è¶…è¿‡ç‰¹å®šé•¿åº¦ä½¿ç”¨...ä»£æ›¿</title>
    <url>/12275.html</url>
    <content><![CDATA[<p>å¼€å‘ç¯å¢ƒï¼šCocos2dx 3.17<br>å¼€å‘è¯­è¨€ï¼šlua<br>æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°å­—ç¬¦ä¸²è¿‡é•¿ï¼Œæ˜¾ç¤ºçš„æ—¶å€™è¶…å‡ºèŒƒå›´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code>...</code>æ¥ä»£æ›¿å­—ç¬¦ä¸²åé¢çš„å†…å®¹ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStrByLen</span><span class="params">(str, len)</span></span></span><br><span class="line">    <span class="keyword">if</span> str == <span class="literal">nil</span> <span class="keyword">or</span> <span class="built_in">len</span> == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> limitStr = str </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">string</span>.<span class="built_in">len</span>(limitStr) &gt; <span class="built_in">len</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> sName = SubUTF8String(limitStr , <span class="built_in">len</span>)</span><br><span class="line">        <span class="keyword">return</span> sName..<span class="string">&quot;...&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> limitStr</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-luaæ¸¸æˆå¼€å‘</title>
    <url>/19422.html</url>
    <content><![CDATA[<p>å¼€å‘ç¯å¢ƒï¼š macï¼ŒCocos2dx 3.17<br>å¼€å‘è¯­è¨€ï¼š lua</p>
<span id="more"></span>
<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>Cocos2dx è‹±æ–‡å®˜ç½‘ï¼š<a href="http://www.cocos2d-x.org/">http://www.Cocos2d-x.org/</a><br>Cocos2dx ä¸­æ–‡ç¤¾åŒºï¼š<a href="http://www.cocos.com/">http://www.Cocos.com/</a></p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="æ¨ªå±ç«–å±"><a href="#æ¨ªå±ç«–å±" class="headerlink" title="æ¨ªå±ç«–å±"></a>æ¨ªå±ç«–å±</h3><p>æ‰“å¼€å·¥ç¨‹ç›®å½•ä¸‹çš„<code>config.json</code>æ–‡ä»¶ï¼Œæ¨ªå±ç«–å±ç”±<code>isLandscape</code>æ§åˆ¶ï¼Œ<code>true</code>ä¸ºæ¨ªå±ï¼Œ<code>flase</code>ä¸ºç«–å±ï¼Œå…¶ä¸­<code>width</code>å’Œ<code>height</code>æ˜¯æ§åˆ¶æ¨¡æ‹Ÿå™¨çš„å¤§å°</p>
<h3 id="å±å¹•é€‚é…"><a href="#å±å¹•é€‚é…" class="headerlink" title="å±å¹•é€‚é…"></a>å±å¹•é€‚é…</h3><p>æ‰“å¼€å·¥ç¨‹ç›®å½•ä¸‹<code>src/config.lua</code>æ–‡ä»¶ï¼Œä¿®æ”¹<code>CC_DESIGN_RESOLUTION</code>ä¸‹çš„å‚æ•°ï¼Œå…·ä½“ä¿®æ”¹æ–¹æ³•å¯å‚è€ƒ<a href="https://blog.csdn.net/chinahaerbin/article/details/39586281">åšå®¢</a></p>
<h3 id="æ·»åŠ ç²¾çµ"><a href="#æ·»åŠ ç²¾çµ" class="headerlink" title="æ·»åŠ ç²¾çµ"></a>æ·»åŠ ç²¾çµ</h3><p>æ‰“å¼€å·¥ç¨‹ç›®å½•ä¸‹<code>src/app/views/MainScene.lua</code>æ–‡ä»¶,æ·»åŠ ä¸€ä¸‹ä»£ç </p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> png = <span class="string">&quot;2.png&quot;</span> <span class="comment">--æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="keyword">local</span> sprite = cc.Sprite:<span class="built_in">create</span>(png)<span class="comment">--,cc.rect(0,0,0,0))</span></span><br><span class="line"><span class="built_in">self</span>:addChild(sprite)</span><br><span class="line">sprite:setPosition(display.width/<span class="number">2</span>,display.height/<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>å…·ä½“å¯ä»¥å‚è€ƒåšå®¢<a href="https://blog.csdn.net/shimazhuge/article/details/50396388">Cocos2dx-luaä¸­spriteç²¾çµçš„3ç§åˆ›å»ºæ–¹æ³•</a></p>
<h3 id="åˆ›å»ºæŒ‰é’®åŠæŒ‰é’®äº‹ä»¶"><a href="#åˆ›å»ºæŒ‰é’®åŠæŒ‰é’®äº‹ä»¶" class="headerlink" title="åˆ›å»ºæŒ‰é’®åŠæŒ‰é’®äº‹ä»¶"></a>åˆ›å»ºæŒ‰é’®åŠæŒ‰é’®äº‹ä»¶</h3><ul>
<li>æ–¹æ³•1ï¼š<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> playBotton = cc.MenuItemImage:<span class="built_in">create</span>(<span class="string">&quot;botton.png&quot;</span>,<span class="string">&quot;botton.png&quot;</span>)</span><br><span class="line">    :onClicked(<span class="function"><span class="keyword">function</span> <span class="params">(  )</span></span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ç‚¹å‡»æŒ‰é’®ï¼Œåˆ°MainScene&quot;</span>)</span><br><span class="line">        <span class="built_in">self</span>:getApp():enterScene(<span class="string">&quot;PlayScene&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">    cc.Menu:<span class="built_in">create</span>(playBotton)</span><br><span class="line">        :move(display.cx<span class="number">-200</span>, display.cy+<span class="number">200</span>)</span><br><span class="line">        :addTo(<span class="built_in">self</span>)</span><br></pre></td></tr></table></figure></li>
<li>æ–¹æ³•2ï¼š <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> button = ccui.Button:<span class="built_in">create</span>()</span><br><span class="line">	button:setPosition(display.centor)</span><br><span class="line">	button:addTo(<span class="built_in">self</span>)</span><br><span class="line">	button:setEnable(<span class="literal">true</span>)    <span class="comment">--æ˜¯å¦ç¦ç”¨</span></span><br></pre></td></tr></table></figure>
<a href="https://blog.csdn.net/ZY_cat/article/details/78332253?locationNum=6&fp">é“¾æ¥</a></li>
</ul>
<h3 id="å•ç‚¹è§¦æ‘¸äº‹ä»¶"><a href="#å•ç‚¹è§¦æ‘¸äº‹ä»¶" class="headerlink" title="å•ç‚¹è§¦æ‘¸äº‹ä»¶"></a>å•ç‚¹è§¦æ‘¸äº‹ä»¶</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> layer = cc.Layer:<span class="built_in">create</span>()</span><br><span class="line"><span class="built_in">self</span>:addChild(layer)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> sprite = cc.Sprite:<span class="built_in">create</span>(<span class="string">&quot;res/13.png&quot;</span>)</span><br><span class="line"><span class="comment">--sprite:setPosition(cc.p(origin.x + size.width/2 - 80, origin.y + size.height/2 + 80))</span></span><br><span class="line">sprite:setPosition(<span class="number">300</span>,<span class="number">300</span>)</span><br><span class="line">layer:addChild(sprite, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--å®ç°äº‹ä»¶è§¦å‘å›è°ƒ</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onTouchBegan</span><span class="params">(touch, event)</span></span></span><br><span class="line"><span class="keyword">local</span> target = event:getCurrentTarget()</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> locationInNode = target:convertToNodeSpace(touch:getLocation())</span><br><span class="line"><span class="keyword">local</span> s = target:getContentSize()</span><br><span class="line"><span class="keyword">local</span> rect = cc.rect(<span class="number">0</span>, <span class="number">0</span>, s.width, s.height)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> cc.rectContainsPoint(rect, locationInNode) <span class="keyword">then</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onTouchMoved</span><span class="params">(touch, event)</span></span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onTouchEnded</span><span class="params">(touch, event)</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è§¦æ‘¸äº‹ä»¶&quot;</span>)</span><br><span class="line">sprite:setPosition(<span class="number">300</span>,<span class="number">500</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> listener = cc.EventListenerTouchOneByOne:<span class="built_in">create</span>() <span class="comment">-- åˆ›å»ºä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨</span></span><br><span class="line">listener:setSwallowTouches(<span class="literal">true</span>)</span><br><span class="line">listener:registerScriptHandler(onTouchBegan, cc.Handler.EVENT_TOUCH_BEGAN)</span><br><span class="line">listener:registerScriptHandler(onTouchMoved, cc.Handler.EVENT_TOUCH_MOVED)</span><br><span class="line">listener:registerScriptHandler(onTouchEnded, cc.Handler.EVENT_TOUCH_ENDED)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> eventDispatcher = <span class="built_in">self</span>:getEventDispatcher() <span class="comment">-- å¾—åˆ°äº‹ä»¶æ´¾å‘å™¨</span></span><br><span class="line">eventDispatcher:addEventListenerWithSceneGraphPriority(listener, sprite) <span class="comment">-- å°†ç›‘å¬å™¨æ³¨å†Œåˆ°æ´¾å‘å™¨ä¸­</span></span><br></pre></td></tr></table></figure>
<h3 id="å­˜æ”¾æ•°æ®"><a href="#å­˜æ”¾æ•°æ®" class="headerlink" title="å­˜æ”¾æ•°æ®"></a>å­˜æ”¾æ•°æ®</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">cc.UserDefault:getInstance():setIntegerForKey(<span class="string">&quot;hightscore1&quot;</span>, <span class="built_in">self</span>.hightscore1)</span><br><span class="line"></span><br><span class="line">å¦‚æœæ•°æ®æ˜¯è¡¨æ ¼</span><br><span class="line">cc.UserDefault:getInstance():setStringForKey(<span class="string">&quot;biaoge&quot;</span>, json.encode(sss))</span><br></pre></td></tr></table></figure>
<h3 id="è¯»å–æ•°æ®"><a href="#è¯»å–æ•°æ®" class="headerlink" title="è¯»å–æ•°æ®"></a>è¯»å–æ•°æ®</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">self</span>.hightscore1 = cc.UserDefault:getInstance():getIntegerForKey(<span class="string">&quot;hightscore1&quot;</span>)</span><br><span class="line"></span><br><span class="line">å¦‚æœæ•°æ®æ˜¯è¡¨æ ¼</span><br><span class="line">cc.UserDefault:getInstance():getStringForKey(<span class="string">&quot;biaoge&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="è‰ºæœ¯å­—ä½“"><a href="#è‰ºæœ¯å­—ä½“" class="headerlink" title="è‰ºæœ¯å­—ä½“"></a>è‰ºæœ¯å­—ä½“</h3><p>é¦–å…ˆåœ¨resæ–‡ä»¶ä¸­åŠ å…¥å­—ä½“æ–‡ä»¶ï¼šâ€.fntâ€ä»¥åŠâ€.pngâ€æ–‡ä»¶<br>ç„¶åè°ƒç”¨ä¸‹é¢å‘½ä»¤</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> bmFont  = ccui.TextBMFont:<span class="built_in">create</span>()</span><br><span class="line">	:move(display.cx, display.cy <span class="number">-200</span> )    <span class="comment">--åæ ‡</span></span><br><span class="line">	:addTo(<span class="built_in">self</span>)    <span class="comment">--åŠ å…¥åœºæ™¯</span></span><br><span class="line">	bmFont:setFntFile(<span class="string">&quot;res/myFont.fnt&quot;</span>)</span><br><span class="line">	bmFont:setString(<span class="string">&quot;å†…å®¹&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="å­—ä½“"><a href="#å­—ä½“" class="headerlink" title="å­—ä½“"></a>å­—ä½“</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> label = cc.Label:createWithTTF(<span class="string">&quot;ç”¨æˆ·ç™»å½•&quot;</span>,<span class="string">&quot;res/font1.ttf&quot;</span>,<span class="number">50</span> )</span><br><span class="line">        :setColor(ccc3(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>))			<span class="comment">--è®¾ç½®å­—ä½“é¢œè‰²</span></span><br><span class="line">        :move(display.cx - <span class="number">500</span> ,display.cy)</span><br><span class="line">        :addTo(<span class="built_in">self</span>)</span><br></pre></td></tr></table></figure>
<h3 id="AtlasLabel-æ•°å­—æ ‡ç­¾"><a href="#AtlasLabel-æ•°å­—æ ‡ç­¾" class="headerlink" title="AtlasLabel æ•°å­—æ ‡ç­¾"></a>AtlasLabel æ•°å­—æ ‡ç­¾</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> AtlasLabel = ccui.TextAtlas:<span class="built_in">create</span>(<span class="string">&quot;0123456789&quot;</span>,img, <span class="number">9</span>, <span class="number">12</span>, <span class="string">&quot;0&quot;</span>)</span><br><span class="line"><span class="comment">-- å‚æ•°åˆ†åˆ«æ˜¯  æ•°å­— å›¾ç‰‡ å®½ é«˜ é¦–ä¸ªæ•°å­—</span></span><br></pre></td></tr></table></figure>

<h3 id="å»¶æ—¶å‡½æ•°"><a href="#å»¶æ—¶å‡½æ•°" class="headerlink" title="å»¶æ—¶å‡½æ•°"></a>å»¶æ—¶å‡½æ•°</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">global.countDown.createTimer(<span class="string">&quot;time&quot;</span>, <span class="built_in">time</span> )</span><br><span class="line">     <span class="keyword">local</span> node = cc.Node:<span class="built_in">create</span>()</span><br><span class="line">     node:addTo(<span class="built_in">self</span>)</span><br><span class="line">     performWithDelay(node,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot;æ—¶é—´åˆ°&quot;</span>)</span><br><span class="line">         <span class="keyword">end</span>,<span class="built_in">time</span>)</span><br></pre></td></tr></table></figure>

<h3 id="æ»šåŠ¨å®¹å™¨"><a href="#æ»šåŠ¨å®¹å™¨" class="headerlink" title="æ»šåŠ¨å®¹å™¨"></a>æ»šåŠ¨å®¹å™¨</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æµ‹è¯• pageView  </span></span><br><span class="line"><span class="keyword">local</span> pageView = ccui.PageView:<span class="built_in">create</span>()  </span><br><span class="line"><span class="comment">--è®¾ç½®pageViewé•¿å®½  </span></span><br><span class="line">pageView:setContentSize(<span class="number">600</span>,<span class="number">600</span>)  </span><br><span class="line"><span class="comment">--è®¾ç½®æ˜¯å¦å“åº”è§¦æ‘¸äº‹ä»¶  </span></span><br><span class="line">pageView:setTouchEnabled(<span class="literal">true</span>)  </span><br><span class="line"><span class="comment">--è®¾ç½®é”šç‚¹  </span></span><br><span class="line">pageView:setAnchorPoint(cc.p(<span class="number">0.5</span>,<span class="number">0.5</span>))  </span><br><span class="line"><span class="comment">--è®¾ç½®ä½ç½®åœ¨ä¸­å¿ƒä½ç½®  </span></span><br><span class="line">pageView:setPosition(display.center)  </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">5</span> <span class="keyword">do</span>  </span><br><span class="line"><span class="comment">---ç„¶ålayoutï¼Œæ¯ä¸ªlayoutä¿å­˜ä¸€ä¸ªpage  </span></span><br><span class="line"><span class="keyword">local</span> layout = ccui.Layout:<span class="built_in">create</span>()  </span><br><span class="line"><span class="comment">--ä¸ºäº†æ¼”ç¤ºè¿™é‡Œåšä¸ªå°å›¾ç‰‡  </span></span><br><span class="line">layout:setContentSize(<span class="number">600</span>,<span class="number">600</span>)  </span><br><span class="line">layout:setPosition(<span class="number">0</span>,<span class="number">0</span>)  </span><br><span class="line"><span class="comment">--åˆ›å»ºä¸€ä¸ªbutton  </span></span><br><span class="line"><span class="keyword">local</span> btn= ccui.Button:<span class="built_in">create</span>(<span class="string">&quot;game/dian/Maininterface/tuichu.png&quot;</span>,<span class="string">&quot;game/dian/Maininterface/tuichi.png&quot;</span>,<span class="string">&quot;game/dian/Maininterface/weizi.png&quot;</span>):setPosition(<span class="number">300</span>,<span class="number">300</span>)  </span><br><span class="line">layout:addChild(btn)  </span><br><span class="line">pageView:addChild(layout)<span class="comment">---ä¸€ä¸ªlayout ä¸ºä¸€ä¸ªpageå†…å®¹   page:addPage(layout)  </span></span><br><span class="line"><span class="keyword">end</span>  </span><br><span class="line"><span class="comment">--æ·»åŠ pageView åˆ°åœºæ™¯ä¸­  </span></span><br><span class="line"><span class="built_in">self</span>:addChild(pageView)  </span><br><span class="line"></span><br><span class="line"><span class="comment">--æ·»åŠ äº‹ä»¶å“åº”  </span></span><br><span class="line">pageView:addEventListener(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.onEvent))  </span><br><span class="line"></span><br><span class="line"><span class="comment">--äº‹ä»¶å“åº”æ–¹æ³•  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onEvent</span><span class="params">(sender,event)</span></span>  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;1234&quot;</span>)</span><br><span class="line"><span class="comment">-- if event == ccui.PageViewEventType.turning then  </span></span><br><span class="line"><span class="comment">--     local pageNum = sender:getCurrentPageIndex()  </span></span><br><span class="line"><span class="comment">--     print(&quot;is turning,this PageNum:&quot;..pageNum)  </span></span><br><span class="line"><span class="comment">-- end  </span></span><br><span class="line"><span class="keyword">end</span> </span><br></pre></td></tr></table></figure>

<h3 id="æ‹–åŠ¨ç²¾çµ"><a href="#æ‹–åŠ¨ç²¾çµ" class="headerlink" title="æ‹–åŠ¨ç²¾çµ"></a>æ‹–åŠ¨ç²¾çµ</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> sprite = cc.Sprite:<span class="built_in">create</span>(<span class="string">&quot;&quot;</span>)<span class="comment">--è‡ªå·±éšä¾¿æ‰¾ä¸ªå›¾ç‰‡è¯•ä¸€è¯•</span></span><br><span class="line">    <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onTouchBegan</span><span class="params">( touch, event )</span></span></span><br><span class="line">            <span class="keyword">local</span> point = touch:getLocation()      <span class="comment">--è·å–é¼ æ ‡åæ ‡</span></span><br><span class="line">            <span class="keyword">local</span> rect = sprite:getBoundingBox()    <span class="comment">--  è·å–ç²¾çµçš„èŒƒå›´   </span></span><br><span class="line">            <span class="keyword">if</span> (cc.rectContainsPoint(rect,point)) <span class="keyword">then</span>   <span class="comment">--åˆ¤æ–­é¼ æ ‡æ˜¯å¦åœ¨ç²¾çµèŒƒå›´å†…ï¼Œæ˜¯è§¦å‘</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">            <span class="comment">--è¿™é‡Œå¿…é¡»åˆ¤æ–­ï¼Œä¸ç„¶æ‹–åŠ¨å±å¹•ç²¾çµä¹Ÿä¼šç§»åŠ¨</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onTouchEnded</span><span class="params">( touch, event )</span></span></span><br><span class="line">        <span class="comment">-- body</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onTouchMoved</span><span class="params">(touch, event)</span></span></span><br><span class="line">        <span class="keyword">local</span> target = sprite  <span class="comment">--è·å–å½“å‰çš„æ§ä»¶(è¿™é‡Œæ˜¯ç²¾çµ)</span></span><br><span class="line">        <span class="keyword">local</span> posX,posY = target:getPosition()  <span class="comment">--è·å–å½“å‰çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">local</span> delta = touch:getDelta() <span class="comment">--è·å–æ»‘åŠ¨çš„è·ç¦»</span></span><br><span class="line">        target:setPosition(cc.p(posX + delta.x, posY + delta.y)) <span class="comment">--ç»™ç²¾çµé‡æ–°è®¾ç½®ä½ç½®</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> listener1 = cc.EventListenerTouchOneByOne:<span class="built_in">create</span>()  <span class="comment">--åˆ›å»ºä¸€ä¸ªå•ç‚¹äº‹ä»¶ç›‘å¬</span></span><br><span class="line">    listener1:setSwallowTouches(<span class="literal">true</span>)  <span class="comment">--æ˜¯å¦å‘ä¸‹ä¼ é€’</span></span><br><span class="line">    listener1:registerScriptHandler(onTouchBegan,cc.Handler.EVENT_TOUCH_BEGAN )</span><br><span class="line">    listener1:registerScriptHandler(onTouchMoved,cc.Handler.EVENT_TOUCH_MOVED )</span><br><span class="line">    listener1:registerScriptHandler(onTouchEnded,cc.Handler.EVENT_TOUCH_ENDED )</span><br><span class="line">    <span class="keyword">local</span> eventDispatcher = <span class="built_in">self</span>:getEventDispatcher() </span><br><span class="line">    eventDispatcher:addEventListenerWithSceneGraphPriority(listener1, sprite) <span class="comment">--åˆ†å‘ç›‘å¬äº‹ä»¶</span></span><br></pre></td></tr></table></figure>

<h3 id="è·å–é¼ æ ‡ç‚¹å‡»ä½ç½®"><a href="#è·å–é¼ æ ‡ç‚¹å‡»ä½ç½®" class="headerlink" title="è·å–é¼ æ ‡ç‚¹å‡»ä½ç½®"></a>è·å–é¼ æ ‡ç‚¹å‡»ä½ç½®</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> location = touch:getLocation()   <span class="comment">--è·å–é¼ æ ‡çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">local</span> event_x = location[<span class="string">&quot;x&quot;</span>] <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">local</span> event_y = location[<span class="string">&quot;y&quot;</span>] <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;event_x = &quot;</span> .. event_x .. <span class="string">&quot;           event_y = &quot;</span> .. event_y)</span><br></pre></td></tr></table></figure>


<h3 id="æ¸¸æˆæš‚åœ"><a href="#æ¸¸æˆæš‚åœ" class="headerlink" title="æ¸¸æˆæš‚åœ"></a>æ¸¸æˆæš‚åœ</h3><blockquote>
<p>è¯´æ˜ï¼Œç‚¹å‡»â€œgoâ€æŒ‰é’®ï¼ŒæŒ‰é’®å˜æˆâ€œstopâ€</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> spriteFrame = cc.SpriteFrameCache:getInstance()</span><br><span class="line">   spriteFrame:addSpriteFrames(<span class="string">&quot;Plist.plist&quot;</span>)</span><br><span class="line">   <span class="keyword">local</span> goSprite = cc.Sprite:createWithSpriteFrameName(<span class="string">&quot;go.png&quot;</span>)</span><br><span class="line">   <span class="keyword">local</span> stopSprite = cc.Sprite:createWithSpriteFrameName(<span class="string">&quot;stop.png&quot;</span>)</span><br><span class="line">   <span class="keyword">local</span> goToggleMenuItem = cc.MenuItemSprite:<span class="built_in">create</span>(goSprite, goSprite)  </span><br><span class="line">   <span class="keyword">local</span> stopToggleMenuItem = cc.MenuItemSprite:<span class="built_in">create</span>(stopSprite,stopSprite)  </span><br><span class="line">   <span class="keyword">local</span> toggleMenuItem = cc.MenuItemToggle:<span class="built_in">create</span>(goToggleMenuItem,stopToggleMenuItem)  </span><br><span class="line">   toggleMenuItem:setPosition(cc.Director:getInstance():convertToGL(cc.p(<span class="number">930</span>,<span class="number">540</span>)))</span><br><span class="line">   <span class="keyword">local</span> a = cc.Menu:<span class="built_in">create</span>(toggleMenuItem)</span><br><span class="line">   a:setPosition(cc.p(<span class="number">0</span>,<span class="number">0</span>))</span><br><span class="line">   <span class="built_in">self</span>:addChild(a)</span><br></pre></td></tr></table></figure>

<h3 id="æ»‘åŠ¨æ¡çš„ä½¿ç”¨"><a href="#æ»‘åŠ¨æ¡çš„ä½¿ç”¨" class="headerlink" title="æ»‘åŠ¨æ¡çš„ä½¿ç”¨"></a>æ»‘åŠ¨æ¡çš„ä½¿ç”¨</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">self</span>.jindutiao = <span class="built_in">self</span>.root:getChildByName(<span class="string">&#x27;jindutiao&#x27;</span>)</span><br><span class="line"><span class="built_in">self</span>.jindutiao:addEventListener(<span class="function"><span class="keyword">function</span><span class="params">(sender ,eventType)</span></span></span><br><span class="line">    <span class="keyword">local</span> volume = <span class="built_in">self</span>.jindutiao:getPercent()  </span><br><span class="line">    pritn(volume)</span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>
<p>è¯´æ˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">getPercent()  --è·å–æ»‘åŠ¨æ¡å½“å‰å€¼</span><br><span class="line">getMaxPercent()  --è·å–æ»‘åŠ¨æ¡æœ€å¤§å€¼</span><br><span class="line">getMinPercent()--è·å–æ»‘åŠ¨æ¡æœ€å°å€¼</span><br><span class="line">setPercent()  --è®¾ç½®æ»‘åŠ¨æ¡å½“å‰å€¼</span><br><span class="line">setMaxPercent()  --è®¾ç½®æ»‘åŠ¨æ¡æœ€å¤§å€¼</span><br><span class="line">setMinPercent()--è®¾ç½®æ»‘åŠ¨æ¡æœ€å°å€¼</span><br></pre></td></tr></table></figure>

<h3 id="æ’­æ”¾å¸§åŠ¨ç”»"><a href="#æ’­æ”¾å¸§åŠ¨ç”»" class="headerlink" title="æ’­æ”¾å¸§åŠ¨ç”»"></a>æ’­æ”¾å¸§åŠ¨ç”»</h3><blockquote>
<p>è¯¥æ–¹æ³•éœ€è¦æå‰Cocos studioä¸Šå°†å¸§åŠ¨ç”»åˆ›å»ºå¥½</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">self</span>.root = cc.CSLoader:createNode(<span class="string">&#x27;game/basketball/Node.csb&#x27;</span>)</span><br><span class="line"><span class="built_in">self</span>.root:move(x,y)</span><br><span class="line"><span class="built_in">self</span>.root:addTo(<span class="built_in">self</span>)</span><br><span class="line">        <span class="keyword">local</span> action = cc.CSLoader:createTimeline(<span class="string">&#x27;game/basketball/Node.csb&#x27;</span>)</span><br><span class="line">        <span class="built_in">self</span>.root:runAction(action)</span><br><span class="line">        action:pause()</span><br><span class="line">        action:clearFrameEventCallFunc()</span><br><span class="line">        action:gotoFrameAndPlay(<span class="number">0</span>,<span class="number">20</span>,<span class="literal">false</span>)</span><br><span class="line">        <span class="comment">--ä»ç¬¬0å¸§æ’­æ”¾åˆ°20å¸§ï¼Œç›´æ’­ä¸€æ¬¡</span></span><br></pre></td></tr></table></figure>

<h3 id="æ±‚å¤¹è§’"><a href="#æ±‚å¤¹è§’" class="headerlink" title="æ±‚å¤¹è§’"></a>æ±‚å¤¹è§’</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">local</span> p1 = &#123;x = x1 , y = y1&#125;</span><br><span class="line">    <span class="keyword">local</span> p2 = &#123;x = x2 , y = y2 &#125;</span><br><span class="line">    <span class="built_in">self</span>:getAngleByPos(p1,p2)</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">GameScene:getAngleByPos</span><span class="params">(p1,p2)</span></span></span><br><span class="line">    <span class="keyword">local</span> p = &#123;&#125;</span><br><span class="line">    p.x = p2.x - p1.x</span><br><span class="line">    p.y = p2.y - p1.y</span><br><span class="line">    <span class="keyword">local</span> r = <span class="built_in">math</span>.<span class="built_in">atan2</span>(p.y , p.x) * <span class="number">180</span>/<span class="built_in">math</span>.<span class="built_in">pi</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å¤¹è§’ä¸ºï¼š&quot;</span> .. r)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="ç”»äºŒæ¬¡è´å¡å°”æ›²çº¿"><a href="#ç”»äºŒæ¬¡è´å¡å°”æ›²çº¿" class="headerlink" title="ç”»äºŒæ¬¡è´å¡å°”æ›²çº¿"></a>ç”»äºŒæ¬¡è´å¡å°”æ›²çº¿</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GameScene:testBezier</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">self</span>.drawNode <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">self</span>.drawNode = cc.DrawNode:<span class="built_in">create</span>(). <span class="comment">--åˆ›å»ºèŠ‚ç‚¹</span></span><br><span class="line">        <span class="built_in">self</span>:addChild(<span class="built_in">self</span>.drawNode)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">self</span>.drawNode:clear()     <span class="comment">--åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line">    <span class="built_in">self</span>.drawNode:drawQuadBezier(cc.p(<span class="built_in">self</span>.xp0,<span class="built_in">self</span>.yp0),cc.p(<span class="built_in">self</span>.xp1,<span class="built_in">self</span>.yp1),cc.p(<span class="built_in">self</span>.xp2,<span class="built_in">self</span>.yp2),<span class="number">1000</span>,cc.c4f(<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--p0,p1,p2 åˆ†åˆ«ä¸ºæ›²çº¿èµ·ç‚¹ï¼Œæ§åˆ¶ç‚¹ï¼Œç»ˆç‚¹</span></span><br></pre></td></tr></table></figure>

<h3 id="ç²¾çµçš„è¿åŠ¨"><a href="#ç²¾çµçš„è¿åŠ¨" class="headerlink" title="ç²¾çµçš„è¿åŠ¨"></a>ç²¾çµçš„è¿åŠ¨</h3><h4 id="æ—‹è½¬"><a href="#æ—‹è½¬" class="headerlink" title="æ—‹è½¬"></a>æ—‹è½¬</h4><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">self</span>.sprite:runAction(cc.RepeatForever:<span class="built_in">create</span>(cc.RotateBy:<span class="built_in">create</span>(<span class="number">1</span>,<span class="number">360</span>))) <span class="comment">--ä»¥é”šç‚¹ä¸ºä¸­å¿ƒä¸åœçš„æ—‹è½¬ï¼Œé€Ÿåº¦ä¸ºæ¯ç§’ä¸­360åº¦</span></span><br></pre></td></tr></table></figure>

<h4 id="ç›´çº¿è¿åŠ¨"><a href="#ç›´çº¿è¿åŠ¨" class="headerlink" title="ç›´çº¿è¿åŠ¨"></a>ç›´çº¿è¿åŠ¨</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">self:runAction(cc.MoveTo:create(time,cc.p(x , y)))</span><br><span class="line">self:runAction(cc.MoveBy:create(time,cc.p(x , y)))</span><br><span class="line">--Toç§»åŠ¨åˆ°æŒ‡å®šä½ç½®</span><br><span class="line">--Byç§»åŠ¨åˆ°ç›¸å¯¹ä½ç½®</span><br></pre></td></tr></table></figure>
<h4 id="è·³è·ƒè¿åŠ¨"><a href="#è·³è·ƒè¿åŠ¨" class="headerlink" title="è·³è·ƒè¿åŠ¨"></a>è·³è·ƒè¿åŠ¨</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">self:runAction(cc.JumpTo:create(time,cc.p(x , y),a,b))</span><br><span class="line">self:runAction(cc.JumpBy:create(time,cc.p(x , y),a,b))</span><br><span class="line">--å‚æ•°timeè¡¨ç¤ºæ—¶é—´ï¼Œaè¡¨ç¤ºæœ€é«˜ç‚¹ï¼Œbè¡¨ç¤ºè·³è·ƒæ¬¡æ•°</span><br></pre></td></tr></table></figure>
<h4 id="åœæ­¢è¿åŠ¨"><a href="#åœæ­¢è¿åŠ¨" class="headerlink" title="åœæ­¢è¿åŠ¨"></a>åœæ­¢è¿åŠ¨</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">self:stopAllActions()</span><br></pre></td></tr></table></figure>
<h4 id="æŒ‰é¡ºåºè¿åŠ¨"><a href="#æŒ‰é¡ºåºè¿åŠ¨" class="headerlink" title="æŒ‰é¡ºåºè¿åŠ¨"></a>æŒ‰é¡ºåºè¿åŠ¨</h4><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> run1 = <span class="built_in">self</span>:runAction(cc.RotateTo:<span class="built_in">create</span>(<span class="number">1</span>,<span class="number">-80</span>))</span><br><span class="line">    <span class="keyword">local</span> run2 = <span class="built_in">self</span>:runAction(cc.RotateTo:<span class="built_in">create</span>(<span class="number">1</span>,<span class="number">80</span>))</span><br><span class="line">    <span class="keyword">local</span> delay = cc.DelayTime:<span class="built_in">create</span>(<span class="number">0.01</span>)</span><br><span class="line">  	<span class="built_in">self</span>:runAction(cc.RepeatForever:<span class="built_in">create</span>(cc.Sequence:<span class="built_in">create</span>(run1,delay,run2,delay)))</span><br></pre></td></tr></table></figure>

<h4 id="æ¸å…¥æ¸å‡º"><a href="#æ¸å…¥æ¸å‡º" class="headerlink" title="æ¸å…¥æ¸å‡º"></a>æ¸å…¥æ¸å‡º</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">self:runAction(cc.FadeIn:create(<span class="number">0.1</span>)) -- æ¸å…¥</span><br><span class="line">self:runAction(cc.FadeOut:create(<span class="number">0.1</span>)) --æ¸å‡º</span><br></pre></td></tr></table></figure>

<h4 id="æ”¾å¤§ç¼©å°"><a href="#æ”¾å¤§ç¼©å°" class="headerlink" title="æ”¾å¤§ç¼©å°"></a>æ”¾å¤§ç¼©å°</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">self:runAction(cc.ScaleTo:create(<span class="number">0.5</span>,<span class="number">1</span>)) --æ”¾å¤§ï¼Œå‚æ•°ï¼šæ—¶é—´å’Œç¼©æ”¾å°ºå¯¸</span><br><span class="line">self:runAction(cc.ScaleTo:create(<span class="number">0.2</span>,<span class="number">0.6</span>)) --ç¼©å°</span><br></pre></td></tr></table></figure>

<h3 id="ç”»ç›´çº¿"><a href="#ç”»ç›´çº¿" class="headerlink" title="ç”»ç›´çº¿"></a>ç”»ç›´çº¿</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">self.Yg_DrawNode = cc.DrawNode:create()</span><br><span class="line">self:addChild(self.Yg_DrawNode)</span><br><span class="line">self.Yg_DrawNode:drawLine(cc.p(qidian_x,qidian_y),cc.p(zhongdian_x ,zhongdian_y),cc.c4f(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">5</span>)) --å‚æ•° èµ·ç‚¹åæ ‡ï¼Œç»ˆç‚¹åæ ‡ï¼Œçº¿æ¡çš„é¢œè‰²</span><br></pre></td></tr></table></figure>

<h3 id="æ¸¸æˆæš‚åœã€ç»§ç»­"><a href="#æ¸¸æˆæš‚åœã€ç»§ç»­" class="headerlink" title="æ¸¸æˆæš‚åœã€ç»§ç»­"></a>æ¸¸æˆæš‚åœã€ç»§ç»­</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">CCDirector.sharedDirector():pause() --æ¸¸æˆæš‚åœ</span><br><span class="line">CCDirector.sharedDirector():resume() --æ¸¸æˆç»§ç»­</span><br></pre></td></tr></table></figure>

<h3 id="ä¸¤ä¸ªçŸ©å½¢çš„ç¢°æ’"><a href="#ä¸¤ä¸ªçŸ©å½¢çš„ç¢°æ’" class="headerlink" title="ä¸¤ä¸ªçŸ©å½¢çš„ç¢°æ’"></a>ä¸¤ä¸ªçŸ©å½¢çš„ç¢°æ’</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">local juxingA = A:getBoundingBox()</span><br><span class="line">local juxingB = B:getBoundingBox()</span><br><span class="line"><span class="keyword">if</span> (cc.rectIntersectsRect(juxingA,juxingB))then</span><br><span class="line">        print(<span class="string">&quot;æ’åˆ°äº†&quot;</span>)</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>

<h3 id="ç‚¹æ˜¯å¦åœ¨çŸ©å½¢å†…"><a href="#ç‚¹æ˜¯å¦åœ¨çŸ©å½¢å†…" class="headerlink" title="ç‚¹æ˜¯å¦åœ¨çŸ©å½¢å†…"></a>ç‚¹æ˜¯å¦åœ¨çŸ©å½¢å†…</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">local juxingA = A:getBoundingBox()</span><br><span class="line">local Point = &#123;x = x1, y = y1&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (cc.rectContainsPoint(juxingA,Point)) then</span><br><span class="line">        print(<span class="string">&quot;æ’åˆ°äº†&quot;</span>)</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>

<h3 id="è§£æjsonæ•°æ®"><a href="#è§£æjsonæ•°æ®" class="headerlink" title="è§£æjsonæ•°æ®"></a>è§£æjsonæ•°æ®</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢è¯­å¥</span><br><span class="line">local json = cc.load(<span class="string">&quot;tools&quot;</span>).json</span><br></pre></td></tr></table></figure>
<h3 id="èƒŒæ™¯éŸ³ä¹ä¸éŸ³æ•ˆ"><a href="#èƒŒæ™¯éŸ³ä¹ä¸éŸ³æ•ˆ" class="headerlink" title="èƒŒæ™¯éŸ³ä¹ä¸éŸ³æ•ˆ"></a>èƒŒæ™¯éŸ³ä¹ä¸éŸ³æ•ˆ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">AudioEngine.playMuisc(â€œbg.mp2â€, true)      --æ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºtrueè¡¨ç¤ºå¾ªç¯æ’­æ”¾ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸ºfalse</span><br><span class="line">AudioEngine.stopMusic()                    --åœæ­¢æ’­æ”¾èƒŒæ™¯éŸ³ä¹</span><br><span class="line"></span><br><span class="line">AudioEngine.pauseMusic()                   --æš‚åœæ’­æ”¾èƒŒæ™¯éŸ³ä¹</span><br><span class="line"></span><br><span class="line">AudioEngine.resumeMusic()                  --æ¢å¤æ’­æ”¾èƒŒæ™¯éŸ³ä¹</span><br><span class="line"></span><br><span class="line">AudioEngine.isMusicPlaying()               --åˆ¤æ–­èƒŒæ™¯éŸ³ä¹æ˜¯å¦æ’­æ”¾</span><br><span class="line"></span><br><span class="line">AudioEngine.preloadEffect(â€œeffect.mp3â€)    --é¢„åŠ è½½éŸ³æ•ˆ</span><br><span class="line"></span><br><span class="line">AudioEngine.playEffect(â€œeffect.mp3â€)       --æ’­æ”¾éŸ³æ•ˆ</span><br><span class="line"></span><br><span class="line">AudioEngine.pauseEffect(<span class="built_in">id</span>)                --æš‚åœæ’­æ”¾éŸ³æ•ˆï¼Œ<span class="built_in">id</span>æ˜¯playEffectè¿”å›çš„å‚æ•°</span><br><span class="line"></span><br><span class="line">AudioEngine.pauseAllEffect()               --æš‚åœæ‰€æœ‰éŸ³æ•ˆçš„æ’­æ”¾</span><br><span class="line"></span><br><span class="line">AudioEngine.resumeEffect(<span class="built_in">id</span>)               --ç»§ç»­æ’­æ”¾æŸä¸ªéŸ³æ•ˆ</span><br><span class="line"></span><br><span class="line">AudioEngine.resumeAllEffect()              --ç»§ç»­æ’­æ”¾æ‰€æœ‰éŸ³æ•ˆ</span><br><span class="line"></span><br><span class="line">AudioEngine.stopEffect(<span class="built_in">id</span>)                 --åœæ­¢æ’­æ”¾æŸä¸€éŸ³æ•ˆ</span><br><span class="line"></span><br><span class="line">AudioEngine.stopAllEffect()                --åœæ­¢æ‰€æœ‰éŸ³æ•ˆæ’­æ”¾</span><br><span class="line"></span><br><span class="line">AudioEngine.setMusicVolume(<span class="number">0.5</span>)            --è®¾ç½®èƒŒæ™¯éŸ³ä¹éŸ³é‡</span><br><span class="line"></span><br><span class="line">AudioEngine.setEffectsVolume(<span class="number">0.5</span>)          --è®¾ç½®éŸ³æ•ˆéŸ³é‡</span><br><span class="line"></span><br><span class="line">AudioEngine.getMusicVolume()               --è·å¾—èƒŒæ™¯éŸ³ä¹éŸ³é‡</span><br><span class="line"></span><br><span class="line">AudioEngine.getEffectsVolume()             --è·å¾—éŸ³æ•ˆéŸ³é‡</span><br></pre></td></tr></table></figure>
<h3 id="å®¹å™¨æ·»åŠ ç‚¹å‡»äº‹ä»¶"><a href="#å®¹å™¨æ·»åŠ ç‚¹å‡»äº‹ä»¶" class="headerlink" title="å®¹å™¨æ·»åŠ ç‚¹å‡»äº‹ä»¶"></a>å®¹å™¨æ·»åŠ ç‚¹å‡»äº‹ä»¶</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Panel:addTouchEventListener(function(sender,eventType)</span><br><span class="line">    <span class="keyword">if</span> <span class="number">2</span> == eventType then</span><br><span class="line">    end</span><br><span class="line">end)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx(3.17)ä¸­csbæ–‡ä»¶ä½¿ç”¨æ–¹æ³•</title>
    <url>/43145.html</url>
    <content><![CDATA[<p>å¼€å‘ç¯å¢ƒï¼šxcode ã€vscode<br>å¼€å‘è¯­è¨€ï¼šlua</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="ä¸€ã€æ‰‹å†™ä»£ç åŠ è½½csbæ–‡ä»¶ï¼Œå¹¶è·å–æ§ä»¶"><a href="#ä¸€ã€æ‰‹å†™ä»£ç åŠ è½½csbæ–‡ä»¶ï¼Œå¹¶è·å–æ§ä»¶" class="headerlink" title="ä¸€ã€æ‰‹å†™ä»£ç åŠ è½½csbæ–‡ä»¶ï¼Œå¹¶è·å–æ§ä»¶"></a>ä¸€ã€æ‰‹å†™ä»£ç åŠ è½½csbæ–‡ä»¶ï¼Œå¹¶è·å–æ§ä»¶</h2><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--åŠ è½½csbåœºæ™¯æ–‡ä»¶ï¼Œå¹¶å°†åœºæ™¯æ·»åŠ åˆ°èŠ‚ç‚¹ä¸­ã€‚</span></span><br><span class="line"><span class="keyword">local</span> node = cc.CSLoader:createNode(<span class="string">&quot;MenuScene.csb&quot;</span>)</span><br><span class="line"><span class="built_in">self</span>:addChild(node)</span><br><span class="line"><span class="comment">--è·å–åœºæ™¯ä¸­çš„æ ¹èŠ‚ç‚¹ï¼ˆåœºæ™¯çš„è·ŸèŠ‚ç‚¹ä¸€èˆ¬æ˜¯å®¹å™¨ï¼‰</span></span><br><span class="line"><span class="keyword">local</span> rootLayout = node:getChildByName(<span class="string">&quot;Panel_2&quot;</span>)</span><br><span class="line"><span class="comment">--å¼ºåˆ¶è½¬æ¢ï¼Œç›®å‰è¿˜æ²¡ææ‡‚ä¸ºå•¥è¦å¼ºåˆ¶è½¬æ¢ï¼Œå¯æœ‰å¯æ— ï¼Œæµ‹è¯•ä¸å†™è¿™ä¸²ä»£ç ï¼Œä¸€æ ·å¯ä»¥è·å–åˆ°å®ƒçš„å­èŠ‚ç‚¹ã€‚</span></span><br><span class="line"><span class="comment">-- local rootNode = tolua.cast(root, &quot;ccui.Widget&quot;)</span></span><br><span class="line"><span class="comment">--è·å–æ§ä»¶(æŒ‰é’®  å¤é€‰æ¡†   å›¾ç‰‡   æ–‡æœ¬ è¿›åº¦æ¡  æ»‘åŠ¨æ¡  å‡ºå…¥æ¡†ç­‰)</span></span><br><span class="line"><span class="keyword">local</span> button =rootLayout:getChildByName(<span class="string">&quot;Button_2&quot;</span>)</span><br><span class="line"><span class="comment">--ç»™æ§ä»¶æ·»åŠ äº‹ä»¶ï¼ˆä¸åŒæ§ä»¶ï¼Œä»–çš„äº‹ä»¶ç±»å‹ä¸åŒï¼Œä½¿ç”¨çš„æ–¹æ³•ä¹Ÿå°±ä¸åŒï¼Œï¼‰ï¼Œä¸‹é¢æ˜¯ç»™æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">button:addClickEventListener(<span class="function"><span class="keyword">function</span><span class="params">(sender,eventType)</span></span> </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;ç‚¹å‡»äº†å¼€å§‹æŒ‰é’®&quot;</span>)</span><br><span class="line"><span class="keyword">end</span>)    </span><br></pre></td></tr></table></figure>

<h3 id="æ§ä»¶çš„é€šç”¨äº‹ä»¶"><a href="#æ§ä»¶çš„é€šç”¨äº‹ä»¶" class="headerlink" title="æ§ä»¶çš„é€šç”¨äº‹ä»¶"></a>æ§ä»¶çš„é€šç”¨äº‹ä»¶</h3><p>ä¸€èˆ¬æƒ³å°è£…æ§ä»¶çš„é€šç”¨äº‹ä»¶çš„è¯ï¼Œå¯ä»¥é€šè¿‡<code>addTouchEventListener(sender,eventType)</code>æ¥æ·»åŠ äº‹ä»¶ï¼Œä¸‹é¢ç¤ºä¾‹:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">    btn æ§ä»¶æœ¬èº«å¯¹è±¡</span></span><br><span class="line"><span class="comment">    ended äº‹ä»¶ç±»å‹(æ”¾å¼€)å¯¹åº”çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">    began äº‹ä»¶ç±»å‹(æŒ‰ä¸‹)å¯¹åº”çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">    moved äº‹ä»¶ç±»å‹(ç§»åŠ¨)å¯¹åº”çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">    canceled äº‹ä»¶ç±»å‹(å–æ¶ˆ)å¯¹åº”çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cc.exports.setButtonFunction</span><span class="params">(btn, ended, began, moved, canceled)</span></span></span><br><span class="line">    btn:addTouchEventListener(<span class="function"><span class="keyword">function</span><span class="params">(sender, eventType)</span></span></span><br><span class="line">        <span class="keyword">if</span> eventType == ccui.TouchEventType.began <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">if</span> began <span class="keyword">then</span> began(sender) <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">elseif</span> eventType == ccui.TouchEventType.ended <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">if</span> ended <span class="keyword">then</span> ended(sender) <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">elseif</span> eventType == ccui.TouchEventType.moved <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">if</span> moved <span class="keyword">then</span> moved(sender) <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">elseif</span> eventType == ccui.TouchEventType.canceled <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">if</span> canceled <span class="keyword">then</span> canceled(sender) <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="äºŒã€é€šè¿‡mvc-ViewBaseåŠ è½½csbæ–‡ä»¶"><a href="#äºŒã€é€šè¿‡mvc-ViewBaseåŠ è½½csbæ–‡ä»¶" class="headerlink" title="äºŒã€é€šè¿‡mvc ViewBaseåŠ è½½csbæ–‡ä»¶"></a>äºŒã€é€šè¿‡mvc ViewBaseåŠ è½½csbæ–‡ä»¶</h2><blockquote>
<p>åšä¸»ä¸€èˆ¬éƒ½é‡‡ç”¨è¿™ç§æ–¹æ³•</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> MainScene = class(<span class="string">&quot;MainScene&quot;</span>,cc.<span class="built_in">load</span>(<span class="string">&quot;mvc&quot;</span>).ViewBase)</span><br><span class="line">    MainScene.RESOURCE_FILENAME=<span class="string">&quot;MenuScene.csb&quot;</span>    <span class="comment">--è‡ªå·±åœ¨Cocos studioä¸Šå»ºç«‹çš„csbæ–‡ä»¶å¯¼å…¥å·¥ç¨‹æ–‡ä»¶resæ–‡ä»¶å¤¹ä¸‹é¢</span></span><br><span class="line">    MainScene.RESOURCE_BINDING = &#123;</span><br><span class="line">        [<span class="string">&quot;Button_2&quot;</span>]   = &#123;</span><br><span class="line"></span><br><span class="line">            [<span class="string">&quot;varname&quot;</span>] = <span class="string">&quot;bn_StartGame&quot;</span>,  </span><br><span class="line"></span><br><span class="line">            [<span class="string">&quot;events&quot;</span>] = &#123; </span><br><span class="line">                &#123;</span><br><span class="line">                    event = <span class="string">&quot;touch&quot;</span> ,  </span><br><span class="line">                    method =<span class="string">&quot;onBack&quot;</span>   </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    funcation MainScene:ctor()</span><br><span class="line">        <span class="built_in">self</span>.bn_StartGame:addClickEventListener(<span class="function"><span class="keyword">function</span><span class="params">(sender,eventType)</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;ç‚¹å‡»äº†å¼€å§‹æŒ‰é’®&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    funcation MainScene:onBack()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è§¦æ‘¸äº†&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> MainScene</span><br></pre></td></tr></table></figure>
<h3 id="1ã€MainScene-RESOURCE-FILENAME-â€MenuScene-csbâ€"><a href="#1ã€MainScene-RESOURCE-FILENAME-â€MenuScene-csbâ€" class="headerlink" title="1ã€MainScene.RESOURCE_FILENAME&#x3D;â€MenuScene.csbâ€"></a>1ã€MainScene.RESOURCE_FILENAME&#x3D;â€MenuScene.csbâ€</h3><blockquote>
<p>è¿™ä¸ªå˜é‡æ˜¯è®¾ç½®åœºæ™¯çš„csbæ–‡ä»¶åç§°ï¼Œè¯»å–æ—¶åœ¨ViewBaseç±»ä¸­è¯»å–çš„<br>ä¸‹é¢ä¼šè®²ä¸€ä¸‹ViewBaseç±»æ€ä¹ˆè¯»å–çš„ã€‚</p>
</blockquote>
<h3 id="2ã€MainScene-RESOURCE-FILENAME"><a href="#2ã€MainScene-RESOURCE-FILENAME" class="headerlink" title="2ã€MainScene.RESOURCE_FILENAME"></a>2ã€MainScene.RESOURCE_FILENAME</h3><blockquote>
<p>è¿™ä¸ªå˜é‡æ˜¯è®¾ç½®ç»‘å®šæ§ä»¶ï¼Œè·å–æ§ä»¶çš„å®ä¾‹</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">MainScene.RESOURCE_BINDING = &#123;</span><br><span class="line">       [<span class="string">&quot;Button_2&quot;</span>]   = &#123;</span><br><span class="line"></span><br><span class="line">           [<span class="string">&quot;varname&quot;</span>] = <span class="string">&quot;bn_StartGame&quot;</span>,  </span><br><span class="line"></span><br><span class="line">           [<span class="string">&quot;events&quot;</span>] = &#123; </span><br><span class="line">               &#123;</span><br><span class="line">                   event = <span class="string">&quot;touch&quot;</span> ,  </span><br><span class="line">                   method =<span class="string">&quot;onBack&quot;</span>   </span><br><span class="line">               &#125;</span><br><span class="line">           &#125;  </span><br><span class="line">       &#125;</span><br><span class="line">   &#125; </span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ–¹å¼æ¨¡æ¿ï¼ˆä¸¤ç§æ–¹å¼ï¼‰ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">MainScene.RESOURCE_BINDING =</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">--ä¸æ·»åŠ äº‹ä»¶</span></span><br><span class="line">    [<span class="string">&quot;Cocosæ§ä»¶å&quot;</span>] = &#123;[<span class="string">&quot;varname&quot;</span>] = <span class="string">&quot;å¼•ç”¨å˜é‡å&quot;</span> &#125; </span><br><span class="line">    <span class="comment">--æ·»åŠ äº‹ä»¶</span></span><br><span class="line">    [<span class="string">&quot;Cocosæ§ä»¶å&quot;</span>] = &#123;[<span class="string">&quot;varname&quot;</span>] = <span class="string">&quot;å¼•ç”¨å˜é‡å&quot;</span>,[<span class="string">&quot;events&quot;</span>]=&#123;&#123;[<span class="string">&quot;event&quot;</span>]=<span class="string">&quot;äº‹ä»¶ç±»å‹(åŸç”Ÿç°åœ¨æ”¯æŒä¸€ç§)&quot;</span>,[<span class="string">&quot;method&quot;</span>]=<span class="string">&quot;å›è°ƒå‡½æ•°&quot;</span>&#125;,...&#125;&#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è·å–å­æ§ä»¶</span><br><span class="line"><span class="built_in">self</span>.root = <span class="built_in">self</span>:getResourceNode()</span><br><span class="line"><span class="keyword">local</span> Button = <span class="built_in">self</span>.root:getChildByName(<span class="string">&quot;Button_1&quot;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰ã€ViewBaseç±»æºç è®²è§£"><a href="#ä¸‰ã€ViewBaseç±»æºç è®²è§£" class="headerlink" title="ä¸‰ã€ViewBaseç±»æºç è®²è§£"></a>ä¸‰ã€ViewBaseç±»æºç è®²è§£</h2><p>æºç ç¤ºä¾‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> ViewBase = class(<span class="string">&quot;ViewBase&quot;</span>, cc.Node)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ViewBase:ctor</span><span class="params">(app, name)</span></span></span><br><span class="line">    <span class="built_in">self</span>:enableNodeEvents()</span><br><span class="line">    <span class="built_in">self</span>.app_ = app</span><br><span class="line">    <span class="built_in">self</span>.name_ = name</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- æ£€æŸ¥å­ç±»ä¸­æ˜¯å¦è®¾ç½®RESOURCE_FILENAMEå±æ€§ï¼Œå¹¶å¾—åˆ°ä»–çš„valueå€¼</span></span><br><span class="line">    <span class="keyword">local</span> res = <span class="built_in">rawget</span>(<span class="built_in">self</span>.class, <span class="string">&quot;RESOURCE_FILENAME&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> res <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--åŠ è½½csbæ–‡ä»¶</span></span><br><span class="line">        <span class="built_in">self</span>:createResourceNode(res)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--æ£€æŸ¥å­ç±»ä¸­æ˜¯å¦è®¾ç½®RESOURCE_BINDINGå±æ€§ï¼Œå¹¶å¾—åˆ°ä»–çš„valueå€¼</span></span><br><span class="line">    <span class="keyword">local</span> binding = <span class="built_in">rawget</span>(<span class="built_in">self</span>.class, <span class="string">&quot;RESOURCE_BINDING&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> res <span class="keyword">and</span> binding <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--è·å–æ§ä»¶çš„å®ä¾‹</span></span><br><span class="line">        <span class="built_in">self</span>:createResourceBinding(binding)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--åˆ¤æ–­å­ç±»æœ‰æ²¡æœ‰é‡å†™onCreateæ–¹æ³•ï¼Œæœ‰ï¼Œè°ƒç”¨å­ç±»çš„onCreateæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">self</span>.onCreate <span class="keyword">then</span> <span class="built_in">self</span>:onCreate() <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ViewBase:getApp</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>.app_</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ViewBase:getName</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>.name_</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ViewBase:getResourceNode</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>.resourceNode_</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">    *åŠ è½½csbæ–‡ä»¶çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">    *resourceFilename æ–‡ä»¶åç§°(å¸¦åç¼€å)</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ViewBase:createResourceNode</span><span class="params">(resourceFilename)</span></span></span><br><span class="line">    <span class="comment">--åˆ¤æ–­æ˜¯å¦å·²ç»åŠ è½½è¿‡csbæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">self</span>.resourceNode_ <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--ç§»é™¤è‡ªå·±</span></span><br><span class="line">        <span class="built_in">self</span>.resourceNode_:removeSelf()</span><br><span class="line">        <span class="comment">--è®¾ç½®ä¸ºnil</span></span><br><span class="line">        <span class="built_in">self</span>.resourceNode_ = <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--é€šè¿‡CSLoaderåŠ è½½csbæ–‡ä»¶ï¼Œå¾—åˆ°ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="built_in">self</span>.resourceNode_ = cc.CSLoader:createNode(resourceFilename)</span><br><span class="line">    <span class="built_in">assert</span>(<span class="built_in">self</span>.resourceNode_, <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;ViewBase:createResourceNode() - load resouce node from file \&quot;%s\&quot; failed&quot;</span>, resourceFilename))</span><br><span class="line">    <span class="comment">--å°†èŠ‚ç‚¹æ·»åŠ åˆ°è¯¥çˆ¶èŠ‚ç‚¹ï¼ˆåœºæ™¯ï¼Œå±‚ï¼‰ä¸­</span></span><br><span class="line">    <span class="built_in">self</span>:addChild(<span class="built_in">self</span>.resourceNode_)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">    *ç»‘å®šæ§ä»¶</span></span><br><span class="line"><span class="comment">    *binding åœ¨ViewBaseå­ç±»ä¸­è®¾ç½®çš„RESOURCE_BINDINGï¼ˆè§„åˆ™æ¨¡æ¿ï¼ˆè¡¨ï¼‰ï¼‰</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ViewBase:createResourceBinding</span><span class="params">(binding)</span></span></span><br><span class="line">    <span class="built_in">assert</span>(<span class="built_in">self</span>.resourceNode_, <span class="string">&quot;ViewBase:createResourceBinding() - not load resource node&quot;</span>)</span><br><span class="line">    <span class="comment">--éå†è§„åˆ™è¡¨</span></span><br><span class="line">    <span class="keyword">for</span> nodeName, nodeBinding <span class="keyword">in</span> <span class="built_in">pairs</span>(binding) <span class="keyword">do</span></span><br><span class="line">        <span class="comment">--èŠ‚ç‚¹é€šè¿‡åç§°ç›´æ¥è·å–å­æ§ä»¶å®ä¾‹</span></span><br><span class="line">        <span class="comment">--è¿™é‡Œå°±æ˜¯æˆ‘ä¸Šé¢è¯´çš„é—®é¢˜æ‰€åœ¨äº†ï¼Œè¿™é‡Œæ˜¯ç›´æ¥é€šè¿‡æ ¹èŠ‚ç‚¹è·å–æ§ä»¶ï¼Œå¾€å¾€ï¼Œæ ¹èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ˜¯å®¹å™¨ï¼Œè€Œä¸æ˜¯æ§ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œä¼šå¾—ä¸åˆ°æ§ä»¶</span></span><br><span class="line">        <span class="keyword">local</span> node = <span class="built_in">self</span>.resourceNode_:getChildByName(nodeName)</span><br><span class="line">        <span class="comment">--å¦‚æœè®¾ç½®å˜é‡åä¸ä¸ºnil</span></span><br><span class="line">        <span class="keyword">if</span> nodeBinding.varname <span class="keyword">then</span></span><br><span class="line">            <span class="comment">--åˆ™å°†nodeèµ‹å€¼ç±»nodeBinding.varnameå˜é‡</span></span><br><span class="line">            <span class="built_in">self</span>[nodeBinding.varname] = node</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="comment">--éå†è§„åˆ™è¡¨ä¸­çš„äº‹ä»¶</span></span><br><span class="line">        <span class="comment">--nodeBinding.events or &#123;&#125;è¿™ä¸ªè¡¨è¾¾å¼ç›¸å½“äºä¸‰ç›®è¿ç®— nodeBinding.events~=nil?nodeBinding.events:&#123;&#125;</span></span><br><span class="line">        <span class="keyword">for</span> _, event <span class="keyword">in</span> <span class="built_in">ipairs</span>(nodeBinding.events <span class="keyword">or</span> &#123;&#125;) <span class="keyword">do</span></span><br><span class="line">            <span class="comment">--åŸç”Ÿè¿™é‡Œåªæ”¯æŒtouchäº‹ä»¶ï¼Œå¦‚æœæœ‰åˆ«çš„éœ€æ±‚å¯è‡ªè¡Œæ·»åŠ </span></span><br><span class="line">            <span class="keyword">if</span> event.event == <span class="string">&quot;touch&quot;</span> <span class="keyword">then</span></span><br><span class="line">                <span class="comment">--ç»™æ§ä»¶è®¾ç½®onTouchäº‹ä»¶å¹¶è®¾ç½®å›è°ƒå‡½æ•°ã€‚</span></span><br><span class="line">                node:onTouch(handler(<span class="built_in">self</span>, <span class="built_in">self</span>[event.method]))</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">    *è·³è½¬åœºæ™¯ï¼ˆç¿»è¯‘ï¼šå±•ç¤ºåœºæ™¯ï¼‰</span></span><br><span class="line"><span class="comment">    *transition è¡”æ¥åŠ¨ç”»</span></span><br><span class="line"><span class="comment">    *time  è¡”æ¥åŠ¨ç”»æ’­æ”¾æ—¶é—´</span></span><br><span class="line"><span class="comment">    *more  åŠ¨ç”»ç±»å‹</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ViewBase:showWithScene</span><span class="params">(transition, time, more)</span></span></span><br><span class="line">    <span class="built_in">self</span>:setVisible(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">local</span> scene = display.newScene(<span class="built_in">self</span>.name_)</span><br><span class="line">    scene:addChild(<span class="built_in">self</span>)</span><br><span class="line">    display.runScene(scene, transition, <span class="built_in">time</span>, more)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ViewBase</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹<code>createResourceBinding</code>æ–¹æ³•ï¼Œè¾¾åˆ°å¯ä»¥ä½¿ç”¨<code>RESOURCE_BINDING</code>æ¥ç»‘å®šæ§ä»¶äº‹ä»¶çš„ç›®çš„ï¼ˆä¿®å¤åŸç”Ÿæ–¹æ³•ä¸èƒ½ç»‘å®šä½¿ç”¨å®¹å™¨åŒ…è£¹çš„æ§ä»¶çš„é—®é¢˜ã€‚ï¼‰</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--æ–°å¢ä¸€ä¸ªdomæ ‘è¡¨ï¼Œç”¨äºå­˜å‚¨domæ ‘å„ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">ViewBase.dom = &#123;&#125;</span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">    *é€’å½’éå†æ•´ä¸ªåœºæ™¯æ ‘ä¸­çš„å®¹å™¨å’Œæ§ä»¶ï¼Œå°†å®¹å™¨å’Œæ§ä»¶å­˜å…¥domè¡¨ä¸­</span></span><br><span class="line"><span class="comment">    *rootNode èŠ‚ç‚¹ç±»å‹</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">recursionChlidNOde</span><span class="params">(rootNode)</span></span></span><br><span class="line">    <span class="keyword">local</span>  children = rootNode:getChildren()</span><br><span class="line">    <span class="keyword">for</span> _,childNOde <span class="keyword">in</span> <span class="built_in">ipairs</span>(children <span class="keyword">or</span> &#123;&#125;) <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> name =childNOde:getName()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;name &quot;</span>,name)</span><br><span class="line">        ViewBase.dom[name]=childNOde</span><br><span class="line">        recursionChlidNOde(childNOde)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ViewBase:createResourceBinding</span><span class="params">(binding)</span></span></span><br><span class="line">    <span class="built_in">assert</span>(<span class="built_in">self</span>.resourceNode_, <span class="string">&quot;ViewBase:createResourceBinding() - not load resource node&quot;</span>)</span><br><span class="line">    recursionChlidNOde(<span class="built_in">self</span>.resourceNode_)</span><br><span class="line">    <span class="keyword">for</span> bindWidgetName, ruleTable <span class="keyword">in</span> <span class="built_in">pairs</span>(binding) <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> widgetName,node <span class="keyword">in</span> <span class="built_in">pairs</span>(ViewBase.dom) <span class="keyword">do</span></span><br><span class="line">            <span class="built_in">print</span>(widgetName,tolua.<span class="built_in">type</span>(node)) </span><br><span class="line">            <span class="keyword">if</span> ruleTable.varname <span class="keyword">and</span> widgetName==bindWidgetName <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">self</span>[ruleTable.varname] = node</span><br><span class="line">                <span class="keyword">for</span> _, event <span class="keyword">in</span> <span class="built_in">ipairs</span>(ruleTable.events <span class="keyword">or</span> &#123;&#125;) <span class="keyword">do</span></span><br><span class="line">                    <span class="keyword">if</span> event.event == <span class="string">&quot;touch&quot;</span> <span class="keyword">then</span></span><br><span class="line">                        node:onTouch(handler(<span class="built_in">self</span>, <span class="built_in">self</span>[event.method]))</span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Use ... for Long Text in Cocos2dx-Lua Label</title>
    <url>/12275.html</url>
    <content><![CDATA[<p>Development Environment: Cocos2dx 3.17<br>Development Language: Lua<br>During development, itâ€™s common to encounter strings that are too long and exceed the display area. We can use <code>...</code> to replace the overflowed part of the string.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Code"><a href="#Code" class="headerlink" title="Code:"></a>Code:</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStrByLen</span><span class="params">(str, len)</span></span></span><br><span class="line">    <span class="keyword">if</span> str == <span class="literal">nil</span> <span class="keyword">or</span> <span class="built_in">len</span> == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> limitStr = str </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">string</span>.<span class="built_in">len</span>(limitStr) &gt; <span class="built_in">len</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> sName = SubUTF8String(limitStr , <span class="built_in">len</span>)</span><br><span class="line">        <span class="keyword">return</span> sName..<span class="string">&quot;...&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> limitStr</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-Luaåˆ†å‰²å­—ç¬¦ä¸²</title>
    <url>/5b9b2fa4.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>æˆ‘ä»¬åœ¨ä½¿ç”¨Cocos2dxå¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä¼šä½¿ç”¨æŒ‡å®šåˆ†éš”ç¬¦æ¥åˆ†å‰²å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›åŒ…å«åˆ†å‰²ç»“æœçš„æ•°ç»„ï¼Œè¿™é‡Œå°±ä»‹ç»ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--------------------------------</span></span><br><span class="line"><span class="comment">-- ç”¨æŒ‡å®šå­—ç¬¦æˆ–å­—ç¬¦ä¸²åˆ†å‰²è¾“å…¥å­—ç¬¦ä¸²ï¼Œè¿”å›åŒ…å«åˆ†å‰²ç»“æœçš„æ•°ç»„</span></span><br><span class="line"><span class="comment">-- @function [parent=#string] split</span></span><br><span class="line"><span class="comment">-- @param string input è¾“å…¥å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">-- @param string delimiter åˆ†å‰²æ ‡è®°å­—ç¬¦æˆ–å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">-- @return array#array  åŒ…å«åˆ†å‰²ç»“æœçš„æ•°ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">ç”¨æŒ‡å®šå­—ç¬¦æˆ–å­—ç¬¦ä¸²åˆ†å‰²è¾“å…¥å­—ç¬¦ä¸²ï¼Œè¿”å›åŒ…å«åˆ†å‰²ç»“æœçš„æ•°ç»„</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">local input = &quot;Hello,World&quot;</span></span><br><span class="line"><span class="comment">local res = string.split(input, &quot;,&quot;)</span></span><br><span class="line"><span class="comment">-- res = &#123;&quot;Hello&quot;, &quot;World&quot;&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">local input = &quot;Hello-+-World-+-Quick&quot;</span></span><br><span class="line"><span class="comment">local res = string.split(input, &quot;-+-&quot;)</span></span><br><span class="line"><span class="comment">-- res = &#123;&quot;Hello&quot;, &quot;World&quot;, &quot;Quick&quot;&#125;</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">string.split</span><span class="params">(input, delimiter)</span></span></span><br><span class="line">    <span class="built_in">input</span> = <span class="built_in">tostring</span>(<span class="built_in">input</span>)</span><br><span class="line">    delimiter = <span class="built_in">tostring</span>(delimiter)</span><br><span class="line">    <span class="keyword">if</span> (delimiter == <span class="string">&#x27;&#x27;</span>) <span class="keyword">then</span> <span class="keyword">return</span> <span class="literal">false</span> <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> pos, arr = <span class="number">0</span>, &#123;&#125;</span><br><span class="line">    <span class="comment">-- for each divider found</span></span><br><span class="line">    <span class="keyword">for</span> st, sp <span class="keyword">in</span> <span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="built_in">input</span>, delimiter, pos, <span class="literal">true</span>) <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">table</span>.<span class="built_in">insert</span>(arr, <span class="built_in">string</span>.<span class="built_in">sub</span>(<span class="built_in">input</span>, pos, st - <span class="number">1</span>))</span><br><span class="line">        pos = sp + <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(arr, <span class="built_in">string</span>.<span class="built_in">sub</span>(<span class="built_in">input</span>, pos))</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cocos2dx</tag>
        <tag>lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-Lua Split String</title>
    <url>/5b9b2fa4en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>In the process of developing with Cocos2dx, we often need to split a string using a specific delimiter and return an array containing the results. Here is a commonly used method for this task.</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--------------------------------</span></span><br><span class="line"><span class="comment">-- Split an input string by a specified character or string delimiter, returning an array with the results.</span></span><br><span class="line"><span class="comment">-- @function [parent=#string] split</span></span><br><span class="line"><span class="comment">-- @param string input The input string</span></span><br><span class="line"><span class="comment">-- @param string delimiter The delimiter character or string</span></span><br><span class="line"><span class="comment">-- @return array#array  An array containing the split results</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Split an input string by a specified character or string delimiter, returning an array with the results.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">local input = &quot;Hello,World&quot;</span></span><br><span class="line"><span class="comment">local res = string.split(input, &quot;,&quot;)</span></span><br><span class="line"><span class="comment">-- res = &#123;&quot;Hello&quot;, &quot;World&quot;&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">local input = &quot;Hello-+-World-+-Quick&quot;</span></span><br><span class="line"><span class="comment">local res = string.split(input, &quot;-+-&quot;)</span></span><br><span class="line"><span class="comment">-- res = &#123;&quot;Hello&quot;, &quot;World&quot;, &quot;Quick&quot;&#125;</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">string.split</span><span class="params">(input, delimiter)</span></span></span><br><span class="line">    <span class="built_in">input</span> = <span class="built_in">tostring</span>(<span class="built_in">input</span>)</span><br><span class="line">    delimiter = <span class="built_in">tostring</span>(delimiter)</span><br><span class="line">    <span class="keyword">if</span> (delimiter == <span class="string">&#x27;&#x27;</span>) <span class="keyword">then</span> <span class="keyword">return</span> <span class="literal">false</span> <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> pos, arr = <span class="number">0</span>, &#123;&#125;</span><br><span class="line">    <span class="comment">-- for each delimiter found</span></span><br><span class="line">    <span class="keyword">for</span> st, sp <span class="keyword">in</span> <span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="built_in">input</span>, delimiter, pos, <span class="literal">true</span>) <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">table</span>.<span class="built_in">insert</span>(arr, <span class="built_in">string</span>.<span class="built_in">sub</span>(<span class="built_in">input</span>, pos, st - <span class="number">1</span>))</span><br><span class="line">        pos = sp + <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(arr, <span class="built_in">string</span>.<span class="built_in">sub</span>(<span class="built_in">input</span>, pos))</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-Luaè§’åº¦ä¸å¼§åº¦çš„è½¬æ¢</title>
    <url>/bb43a614.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åœ¨æ¸¸æˆå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½éœ€è¦ç”¨åˆ°ä¸€ä¸ªè§’åº¦å’Œå¼§åº¦çš„è®¡ç®—ï¼Œè§ä»£ç </p>
<h3 id="è§’åº¦è½¬å¼§åº¦"><a href="#è§’åº¦è½¬å¼§åº¦" class="headerlink" title="è§’åº¦è½¬å¼§åº¦"></a>è§’åº¦è½¬å¼§åº¦</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- @function [parent=#math] angle2radian</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">math.angle2radian</span><span class="params">(angle)</span></span></span><br><span class="line">    <span class="keyword">return</span> angle * <span class="built_in">math</span>.<span class="built_in">pi</span> / <span class="number">180</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="å¼§åº¦è½¬è§’åº¦"><a href="#å¼§åº¦è½¬è§’åº¦" class="headerlink" title="å¼§åº¦è½¬è§’åº¦"></a>å¼§åº¦è½¬è§’åº¦</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- @function [parent=#math] radian2angle</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">math.radian2angle</span><span class="params">(radian)</span></span></span><br><span class="line">    <span class="keyword">return</span> radian / <span class="built_in">math</span>.<span class="built_in">pi</span> * <span class="number">180</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cocos2dx</tag>
        <tag>lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-Lua Angle and Radian Conversion</title>
    <url>/bb43a614en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>In game development, many situations require the calculation of angles and radians. Hereâ€™s how to do it with code.</p>
<h3 id="Angle-to-Radian-Conversion"><a href="#Angle-to-Radian-Conversion" class="headerlink" title="Angle to Radian Conversion"></a>Angle to Radian Conversion</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- @function [parent=#math] angle2radian</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">math.angle2radian</span><span class="params">(angle)</span></span></span><br><span class="line">    <span class="keyword">return</span> angle * <span class="built_in">math</span>.<span class="built_in">pi</span> / <span class="number">180</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Radian to Angle Conversion</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- @function [parent=#math] radian2angle</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">math.radian2angle</span><span class="params">(radian)</span></span></span><br><span class="line">    <span class="keyword">return</span> radian / <span class="built_in">math</span>.<span class="built_in">pi</span> * <span class="number">180</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-lua_ProgressTimeråˆ›å»ºæ‰‡å½¢è¿›åº¦æ¡</title>
    <url>/18736.html</url>
    <content><![CDATA[<p>å¼€å‘ç¯å¢ƒï¼šCocos2dx 3.17<br>å¼€å‘è¯­è¨€ï¼šlua<br>æˆ‘ä»¬åœ¨å¼€å‘æ¸¸æˆçš„æ—¶å€™ç»å¸¸ä¼šç”¨åˆ°æ‰‡å½¢è¿›åº¦æ¡ã€‚æ¯”å¦‚ï¼šæŠ€èƒ½CD</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä¸‹é¢ç›´æ¥ä¸Šä»£ç å§</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">skillCD</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">local</span> loading = cc.Sprite:<span class="built_in">create</span>(<span class="string">&#x27;skill.png&#x27;</span>) <span class="comment">-- å…ˆåˆ›å»ºä¸€ä¸ªç²¾çµ</span></span><br><span class="line">    <span class="keyword">local</span> progress = cc.ProgressTimer:<span class="built_in">create</span>(loading)</span><br><span class="line">    progress:setMidpoint(cc.p(<span class="number">0.5</span>, <span class="number">0.5</span>))</span><br><span class="line">    progress:setType(cc.PROGRESS_TIMER_TYPE_RADIAL)</span><br><span class="line">    progress:setReverseDirection(<span class="literal">true</span>) <span class="comment">-- trueä¸ºé€†æ—¶é’ˆï¼Œfalseä¸ºé¡ºæ—¶é’ˆ</span></span><br><span class="line">    <span class="built_in">self</span>:addChild(progress)</span><br><span class="line">    progress:setPercentage(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-luaä¸­Labelæ–‡æœ¬è®¾ç½®è‡ªåŠ¨æ¢è¡Œ</title>
    <url>/27430.html</url>
    <content><![CDATA[<p>å¼€å‘ç¯å¢ƒï¼šCocos2dx 3.17<br>å¼€å‘è¯­è¨€ï¼šlua<br>æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°å­—ç¬¦ä¸²è¿‡é•¿ï¼Œæ˜¾ç¤ºçš„æ—¶å€™è¶…å‡ºèŒƒå›´ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥è®¾ç½®Labelè‡ªåŠ¨æ¢è¡Œ</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FunSetLinefeed</span><span class="params">( strText, nLineWidth )</span></span>		<span class="comment">--æ–‡æœ¬ï¼Œè¡Œå®½</span></span><br><span class="line">	<span class="comment">--è¯»å–æ¯ä¸ªå­—ç¬¦åšä¸­æ–‡è‹±æ–‡åˆ¤æ–­ï¼Œå¹¶ä¸”è®°å½•å¤§å°</span></span><br><span class="line">	<span class="keyword">local</span> nStep = <span class="number">1</span></span><br><span class="line">	<span class="keyword">local</span> index = <span class="number">1</span></span><br><span class="line">	<span class="keyword">local</span> ltabTextSize = &#123;&#125;</span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		c = <span class="built_in">string</span>.<span class="built_in">sub</span>(strText, nStep, nStep)</span><br><span class="line">		b = <span class="built_in">string</span>.<span class="built_in">byte</span>(c)</span><br><span class="line"> </span><br><span class="line">		<span class="keyword">if</span> b &gt; <span class="number">128</span> <span class="keyword">then</span></span><br><span class="line">			ltabTextSize[index] = <span class="number">3</span></span><br><span class="line">			nStep = nStep + <span class="number">3</span></span><br><span class="line">			index = index + <span class="number">1</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			ltabTextSize[index] = <span class="number">1</span></span><br><span class="line">			nStep = nStep + <span class="number">1</span></span><br><span class="line">			index = index + <span class="number">1</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line">		<span class="keyword">if</span> nStep &gt; #strText <span class="keyword">then</span></span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">--å°†å­—ç¬¦æŒ‰ç…§é™å®šè¡Œå®½è¿›è¡Œåˆ†ç»„</span></span><br><span class="line">	<span class="keyword">local</span> nLineCount = <span class="number">1</span></span><br><span class="line">	<span class="keyword">local</span> nBeginPos = <span class="number">1</span></span><br><span class="line">	<span class="keyword">local</span> lptrCurText = <span class="literal">nil</span></span><br><span class="line">	<span class="keyword">local</span> ltabText = &#123;&#125;</span><br><span class="line">	<span class="keyword">local</span> nCurSize = <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, index - <span class="number">1</span> <span class="keyword">do</span></span><br><span class="line">		nCurSize = nCurSize + ltabTextSize[i]</span><br><span class="line">		<span class="keyword">if</span> nCurSize &gt; nLineWidth <span class="keyword">and</span> nLineCount&lt; <span class="built_in">math</span>.<span class="built_in">ceil</span>(#strText/nLineWidth) <span class="keyword">then</span></span><br><span class="line">			nCurSize = nCurSize - ltabTextSize[i]</span><br><span class="line">			ltabText[nLineCount] = <span class="built_in">string</span>.<span class="built_in">sub</span>( strText, nBeginPos, nBeginPos + nCurSize - <span class="number">1</span> )</span><br><span class="line">			nBeginPos = nBeginPos + nCurSize</span><br><span class="line">			nCurSize = ltabTextSize[i]</span><br><span class="line">			nLineCount = nLineCount + <span class="number">1</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> nLineCount == <span class="built_in">math</span>.<span class="built_in">ceil</span>(#strText/nLineWidth) <span class="keyword">then</span></span><br><span class="line">			ltabText[nLineCount] = <span class="built_in">string</span>.<span class="built_in">sub</span>( strText, nBeginPos, #strText)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="comment">-- for i = 1, nLineCount - 1 do </span></span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">1</span>, nLineCount  <span class="keyword">do</span> </span><br><span class="line">		<span class="keyword">if</span> lptrCurText == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">			lptrCurText = ltabText[i]</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			lptrCurText = lptrCurText .. <span class="string">&quot;\n&quot;</span> .. ltabText[i]</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">return</span> lptrCurText</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-lua_ProgressTimer Creating Sector Progress Bar</title>
    <url>/18736en.html</url>
    <content><![CDATA[<p>Development Environment: Cocos2dx 3.17<br>Development Language: Lua<br>In game development, sector progress bars are often used, such as for skill cooldown (CD) timers.</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Letâ€™s jump straight into the code:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">skillCD</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> loading = cc.Sprite:<span class="built_in">create</span>(<span class="string">&#x27;skill.png&#x27;</span>) <span class="comment">-- First, create a sprite</span></span><br><span class="line">    <span class="keyword">local</span> progress = cc.ProgressTimer:<span class="built_in">create</span>(loading)</span><br><span class="line">    progress:setMidpoint(cc.p(<span class="number">0.5</span>, <span class="number">0.5</span>))</span><br><span class="line">    progress:setType(cc.PROGRESS_TIMER_TYPE_RADIAL)</span><br><span class="line">    progress:setReverseDirection(<span class="literal">true</span>) <span class="comment">-- true for counterclockwise, false for clockwise</span></span><br><span class="line">    <span class="built_in">self</span>:addChild(progress)</span><br><span class="line">    progress:setPercentage(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Automatic Line Wrapping for Label Text in Cocos2dx-Lua</title>
    <url>/27430en.html</url>
    <content><![CDATA[<p>Development Environment: Cocos2dx 3.17<br>Development Language: Lua<br>During development, we often encounter situations where a string is too long and exceeds the display area. In such cases, we can set the Label to automatically wrap text.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Code"><a href="#Code" class="headerlink" title="Code:"></a>Code:</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FunSetLinefeed</span><span class="params">( strText, nLineWidth )</span></span>  <span class="comment">-- Text, line width</span></span><br><span class="line">    <span class="comment">-- Read each character, determine if it&#x27;s Chinese or English, and record its size</span></span><br><span class="line">    <span class="keyword">local</span> nStep = <span class="number">1</span></span><br><span class="line">    <span class="keyword">local</span> index = <span class="number">1</span></span><br><span class="line">    <span class="keyword">local</span> ltabTextSize = &#123;&#125;</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        c = <span class="built_in">string</span>.<span class="built_in">sub</span>(strText, nStep, nStep)</span><br><span class="line">        b = <span class="built_in">string</span>.<span class="built_in">byte</span>(c)</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> b &gt; <span class="number">128</span> <span class="keyword">then</span></span><br><span class="line">            ltabTextSize[index] = <span class="number">3</span></span><br><span class="line">            nStep = nStep + <span class="number">3</span></span><br><span class="line">            index = index + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ltabTextSize[index] = <span class="number">1</span></span><br><span class="line">            nStep = nStep + <span class="number">1</span></span><br><span class="line">            index = index + <span class="number">1</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> nStep &gt; #strText <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">-- Group characters according to the specified line width</span></span><br><span class="line">    <span class="keyword">local</span> nLineCount = <span class="number">1</span></span><br><span class="line">    <span class="keyword">local</span> nBeginPos = <span class="number">1</span></span><br><span class="line">    <span class="keyword">local</span> lptrCurText = <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">local</span> ltabText = &#123;&#125;</span><br><span class="line">    <span class="keyword">local</span> nCurSize = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">1</span>, index - <span class="number">1</span> <span class="keyword">do</span></span><br><span class="line">        nCurSize = nCurSize + ltabTextSize[i]</span><br><span class="line">        <span class="keyword">if</span> nCurSize &gt; nLineWidth <span class="keyword">and</span> nLineCount &lt; <span class="built_in">math</span>.<span class="built_in">ceil</span>(#strText / nLineWidth) <span class="keyword">then</span></span><br><span class="line">            nCurSize = nCurSize - ltabTextSize[i]</span><br><span class="line">            ltabText[nLineCount] = <span class="built_in">string</span>.<span class="built_in">sub</span>(strText, nBeginPos, nBeginPos + nCurSize - <span class="number">1</span>)</span><br><span class="line">            nBeginPos = nBeginPos + nCurSize</span><br><span class="line">            nCurSize = ltabTextSize[i]</span><br><span class="line">            nLineCount = nLineCount + <span class="number">1</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> nLineCount == <span class="built_in">math</span>.<span class="built_in">ceil</span>(#strText / nLineWidth) <span class="keyword">then</span></span><br><span class="line">            ltabText[nLineCount] = <span class="built_in">string</span>.<span class="built_in">sub</span>(strText, nBeginPos, #strText)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- Combine the text lines</span></span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">1</span>, nLineCount <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> lptrCurText == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">            lptrCurText = ltabText[i]</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            lptrCurText = lptrCurText .. <span class="string">&quot;\n&quot;</span> .. ltabText[i]</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> lptrCurText</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>cCocos2dx-luaä½¿ç”¨scheduleå®šæ—¶å™¨</title>
    <url>/38089.html</url>
    <content><![CDATA[<p>å¼€å‘ç¯å¢ƒï¼šCocos2dx 3.17<br>å¼€å‘è¯­è¨€ï¼šlua<br>å®šæ—¶å™¨åœ¨æ¸¸æˆå¼€å‘ä¸­å¿…ä¸å¯å°‘ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸‹å®šæ—¶å™¨åœ¨Cocos2dx-luaä¸­çš„ä¸€ç§ç”¨æ³•</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> scheduler = <span class="built_in">require</span>(<span class="string">&quot;framework.scheduler&quot;</span>) </span><br><span class="line"><span class="keyword">local</span> handler = scheduler.scheduleGlobal(<span class="function"><span class="keyword">function</span><span class="params">()</span></span> </span><br><span class="line">        <span class="comment">-- æƒ³åšçš„äº‹æƒ…   </span></span><br><span class="line"><span class="keyword">end</span>,</span><br><span class="line"><span class="number">0.2</span>) <span class="comment">-- è°ƒç”¨é—´éš”</span></span><br></pre></td></tr></table></figure>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">scheduler.unscheduleGlobal(handler) <span class="comment">-- å–æ¶ˆå®šæ—¶å™¨</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-lua Using schedule Timer</title>
    <url>/38089en.html</url>
    <content><![CDATA[<p>Development Environment: Cocos2dx 3.17<br>Development Language: Lua<br>Timers are essential in game development. Below is a simple introduction to using timers in Cocos2dx-lua.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Example-Code"><a href="#Example-Code" class="headerlink" title="Example Code"></a>Example Code</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> scheduler = <span class="built_in">require</span>(<span class="string">&quot;framework.scheduler&quot;</span>) </span><br><span class="line"><span class="keyword">local</span> handler = scheduler.scheduleGlobal(<span class="function"><span class="keyword">function</span><span class="params">()</span></span> </span><br><span class="line">    <span class="comment">-- Actions to perform  </span></span><br><span class="line"><span class="keyword">end</span>,</span><br><span class="line"><span class="number">0.2</span>) <span class="comment">-- Interval</span></span><br></pre></td></tr></table></figure>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">scheduler.unscheduleGlobal(handler) <span class="comment">-- Cancel the timer</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-luaå„ç§å®¹å™¨çš„ä½¿ç”¨</title>
    <url>/62614.html</url>
    <content><![CDATA[<p>åœ¨Cocos2dx-luaå¼€å‘ä¸­ï¼Œç»å¸¸ç”¨åˆ°å®¹å™¨ã€‚ä¸‹é¢å°±ä»‹ç»åœ¨å¼€å‘ä¸­ä¼šç”¨åˆ°çš„4ç§å®¹å™¨ï¼šListView,scrollView,tableView,pageView</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="1-ListView-ï¼ˆåˆ—è¡¨å®¹å™¨ï¼‰ä½¿ç”¨"><a href="#1-ListView-ï¼ˆåˆ—è¡¨å®¹å™¨ï¼‰ä½¿ç”¨" class="headerlink" title="1. ListView ï¼ˆåˆ—è¡¨å®¹å™¨ï¼‰ä½¿ç”¨"></a>1. ListView ï¼ˆåˆ—è¡¨å®¹å™¨ï¼‰ä½¿ç”¨</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> MainScene = class(<span class="string">&quot;MainScene&quot;</span>, cc.<span class="built_in">load</span>(<span class="string">&quot;mvc&quot;</span>).ViewBase)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onCreate</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">-- æµ‹è¯•ListView</span></span><br><span class="line">    <span class="comment">--[[</span></span><br><span class="line"><span class="comment">    æ³¨: 1.å­èŠ‚ç‚¹å¦‚æœæ˜¯RichTextï¼Œæˆ–æ˜¯æ–‡æœ¬ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="comment">      è®¾ç½®setVerticalSpace()ï¼Œé«˜åº¦é—´éš”ã€‚adjustToRealHeight(),è‡ªé€‚åº”é«˜åº¦ã€‚</span></span><br><span class="line"><span class="comment">        2.è®¾ç½®å­èŠ‚ç‚¹çš„é”šç‚¹ä¿¡æ¯ï¼Œå¦åˆ™ é«˜åº¦ä¸å¯¹ç§°</span></span><br><span class="line"><span class="comment">    ]]</span><span class="comment">--</span></span><br><span class="line"> </span><br><span class="line">    <span class="built_in">self</span>.listView = ccui.ListView:<span class="built_in">create</span>();  </span><br><span class="line">    <span class="built_in">self</span>.listView:setPosition(cc.p(<span class="number">10</span>, <span class="number">10</span>));  </span><br><span class="line">    <span class="built_in">self</span>.listView:setContentSize(cc.size(<span class="number">1116</span>, <span class="number">550</span>));  </span><br><span class="line">    <span class="built_in">self</span>.listView:setDirection(cc.SCROLLVIEW_DIRECTION_VERTICAL);  </span><br><span class="line">    <span class="built_in">self</span>.listView:setBounceEnabled(<span class="literal">true</span>);  </span><br><span class="line">    <span class="built_in">self</span>.listView:setItemsMargin(<span class="number">20</span>)  </span><br><span class="line">      </span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">4</span> <span class="keyword">do</span>  </span><br><span class="line">        <span class="keyword">local</span> layout = ccui.Layout:<span class="built_in">create</span>();  </span><br><span class="line">        layout:setContentSize(cc.size(<span class="number">1116</span>, <span class="number">209</span>));  </span><br><span class="line">        layout:setBackGroundColorType(ccui.LayoutBackGroundColorType.solid);  </span><br><span class="line">        layout:setBackGroundColor(cc.c3b(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>));  </span><br><span class="line">  </span><br><span class="line">        <span class="built_in">self</span>.listView:pushBackCustomItem(layout);  </span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line">    <span class="built_in">self</span>:addChild(<span class="built_in">self</span>.listView); </span><br><span class="line"> </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> MainScene</span><br></pre></td></tr></table></figure>
<h3 id="2-scrollView-ï¼ˆæ»šåŠ¨å®¹å™¨ï¼‰ä½¿ç”¨"><a href="#2-scrollView-ï¼ˆæ»šåŠ¨å®¹å™¨ï¼‰ä½¿ç”¨" class="headerlink" title="2. scrollView ï¼ˆæ»šåŠ¨å®¹å™¨ï¼‰ä½¿ç”¨"></a>2. scrollView ï¼ˆæ»šåŠ¨å®¹å™¨ï¼‰ä½¿ç”¨</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> MainScene = class(<span class="string">&quot;MainScene&quot;</span>, cc.<span class="built_in">load</span>(<span class="string">&quot;mvc&quot;</span>).ViewBase)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onCreate</span><span class="params">()</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">-- æµ‹è¯• scrollView</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> scrollView = cc.ScrollView:<span class="built_in">create</span>()</span><br><span class="line">    <span class="keyword">local</span> layerColor = cc.LayerColor:<span class="built_in">create</span>(cc.c4b(<span class="number">100</span>, <span class="number">100</span>,<span class="number">100</span>, <span class="number">100</span>), <span class="number">700</span>, <span class="number">600</span>)</span><br><span class="line">    scrollView:setViewSize(cc.size(<span class="number">700</span>, <span class="number">300</span>))</span><br><span class="line">    scrollView:setContainer(layerColor)</span><br><span class="line">    layerColor:setPosition(cc.p(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    scrollView:setPosition(cc.p(<span class="number">50</span>, <span class="number">50</span>))</span><br><span class="line">    <span class="built_in">self</span>:addChild(scrollView)</span><br><span class="line">    scrollView:setDirection(cc.SCROLLVIEW_DIRECTION_VERTICAL)<span class="comment">--å‚ç›´æ»šåŠ¨</span></span><br><span class="line">    scrollView:setBounceEnabled(<span class="literal">true</span>)</span><br><span class="line">    scrollView:setDelegate()</span><br><span class="line">    scrollView:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.scrollViewDidZoom)  ,cc.SCROLLVIEW_SCRIPT_ZOOM)</span><br><span class="line">    scrollView:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.scrollViewDidScroll) ,cc.SCROLLVIEW_SCRIPT_SCROLL)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">6</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> strFmt = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;num %d&quot;</span>, i)</span><br><span class="line">        <span class="keyword">local</span> label = cc.Label:createWithSystemFont(strFmt, <span class="string">&quot;Arial&quot;</span>, <span class="number">32</span>)</span><br><span class="line">        label:setColor(cc.c3b(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        label:setPosition(cc.p(<span class="number">350</span>, <span class="number">600</span>-i*<span class="number">100</span>+<span class="number">50</span>))</span><br><span class="line">        layerColor:addChild(label)</span><br><span class="line">    <span class="keyword">end</span>    </span><br><span class="line"> </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:scrollViewDidZoom</span><span class="params">()</span></span></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;ScrollViewDidZoom&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:scrollViewDidScroll</span><span class="params">()</span></span></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;ScrollViewDidScroll&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> MainScene</span><br></pre></td></tr></table></figure>
<h3 id="tableView-ä½¿ç”¨"><a href="#tableView-ä½¿ç”¨" class="headerlink" title="tableView ä½¿ç”¨"></a>tableView ä½¿ç”¨</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">local</span> MainScene = class(<span class="string">&quot;MainScene&quot;</span>, cc.<span class="built_in">load</span>(<span class="string">&quot;mvc&quot;</span>).ViewBase)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onCreate</span><span class="params">()</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">-- æµ‹è¯•tableView2</span></span><br><span class="line">    <span class="built_in">self</span>.tableView2 = cc.TableView:<span class="built_in">create</span>(cc.size(<span class="number">200</span>, <span class="number">200</span>))</span><br><span class="line">    <span class="built_in">self</span>.tableView2:setDirection(cc.SCROLLVIEW_DIRECTION_HORIZONTAL)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:setPosition(cc.p(<span class="number">200</span>, <span class="number">200</span>))</span><br><span class="line">    <span class="built_in">self</span>.tableView2:setDelegate()</span><br><span class="line">    <span class="built_in">self</span>:addChild(<span class="built_in">self</span>.tableView2)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.scrollViewDidScroll) , cc.SCROLLVIEW_SCRIPT_SCROLL)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.scrollViewDidZoom) , cc.SCROLLVIEW_SCRIPT_ZOOM)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.tableCellTouched) , cc.TABLECELL_TOUCHED)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.cellSizeForTable) , cc.TABLECELL_SIZE_FOR_INDEX)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.tableCellAtIndex) , cc.TABLECELL_SIZE_AT_INDEX)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:registerScriptHandler(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.numberOfCellsInTableView) , cc.NUMBER_OF_CELLS_IN_TABLEVIEW)</span><br><span class="line">    <span class="built_in">self</span>.tableView2:reloadData()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:scrollViewDidScroll</span><span class="params">(view)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ScrollViewDidScroll&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:scrollViewDidZoom</span><span class="params">(view)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ScrollViewDidZoom&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:tableCellTouched</span><span class="params">(table, cell)</span></span></span><br><span class="line">    <span class="keyword">if</span> <span class="literal">nil</span> == cell <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;cell touched at index: &quot;</span>..cell:getIdx())</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:cellSizeForTable</span><span class="params">(table, idx)</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">60</span>, <span class="number">60</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:tableCellAtIndex</span><span class="params">(table, idx)</span></span></span><br><span class="line">    <span class="keyword">local</span> strValue = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%d&quot;</span>, idx)</span><br><span class="line">    <span class="keyword">local</span> cell = <span class="built_in">table</span>:dequeueCell()</span><br><span class="line">    <span class="keyword">local</span> label = <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">if</span> <span class="literal">nil</span> == cell <span class="keyword">then</span></span><br><span class="line">        cell = cc.TableViewCell:<span class="built_in">create</span>()</span><br><span class="line">        label = cc.Label:createWithSystemFont(strValue, <span class="string">&quot;Arial&quot;</span>, <span class="number">32</span>)</span><br><span class="line">        label:setPosition(cc.p(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        label:setAnchorPoint(cc.p(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        cell:addChild(label)</span><br><span class="line">        label:setTag(<span class="number">123</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        label = cell:getChildByTag(<span class="number">123</span>)</span><br><span class="line">        <span class="keyword">if</span> label ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">            label:setString(strValue)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> cell</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:numberOfCellsInTableView</span><span class="params">(table)</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">20</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> MainScene</span><br></pre></td></tr></table></figure>
<h3 id="4-pageViewï¼ˆç¿»é¡µå®¹å™¨ï¼‰-ä½¿ç”¨"><a href="#4-pageViewï¼ˆç¿»é¡µå®¹å™¨ï¼‰-ä½¿ç”¨" class="headerlink" title="4. pageViewï¼ˆç¿»é¡µå®¹å™¨ï¼‰ ä½¿ç”¨"></a>4. pageViewï¼ˆç¿»é¡µå®¹å™¨ï¼‰ ä½¿ç”¨</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> MainScene = class(<span class="string">&quot;MainScene&quot;</span>, cc.<span class="built_in">load</span>(<span class="string">&quot;mvc&quot;</span>).ViewBase)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onCreate</span><span class="params">()</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">-- æµ‹è¯• pageView</span></span><br><span class="line">    <span class="keyword">local</span> pageView = ccui.PageView:<span class="built_in">create</span>()</span><br><span class="line">    <span class="comment">--è®¾ç½®pageViewé•¿å®½</span></span><br><span class="line">    pageView:setContentSize(<span class="number">600</span>,<span class="number">600</span>)</span><br><span class="line">    <span class="comment">--è®¾ç½®æ˜¯å¦å“åº”è§¦æ‘¸äº‹ä»¶</span></span><br><span class="line">    pageView:setTouchEnabled(<span class="literal">true</span>)</span><br><span class="line">    <span class="comment">--è®¾ç½®é”šç‚¹</span></span><br><span class="line">    pageView:setAnchorPoint(cc.p(<span class="number">0.5</span>,<span class="number">0.5</span>))</span><br><span class="line">    <span class="comment">--è®¾ç½®ä½ç½®åœ¨ä¸­å¿ƒä½ç½®</span></span><br><span class="line">    pageView:setPosition(display.center)</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">5</span> <span class="keyword">do</span></span><br><span class="line">        <span class="comment">---ç„¶ålayoutï¼Œæ¯ä¸ªlayoutä¿å­˜ä¸€ä¸ªpage</span></span><br><span class="line">        <span class="keyword">local</span> layout = ccui.Layout:<span class="built_in">create</span>()</span><br><span class="line">        <span class="comment">--ä¸ºäº†æ¼”ç¤ºè¿™é‡Œåšä¸ªå°å›¾ç‰‡</span></span><br><span class="line">        layout:setContentSize(<span class="number">600</span>,<span class="number">600</span>)</span><br><span class="line">        layout:setPosition(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">        <span class="comment">--åˆ›å»ºä¸€ä¸ªbutton</span></span><br><span class="line">        <span class="keyword">local</span> btn= ccui.Button:<span class="built_in">create</span>(<span class="string">&quot;bt_qd.png&quot;</span>,<span class="string">&quot;bt_qd_h.png&quot;</span>,<span class="string">&quot;bt_qd.png&quot;</span>):setPosition(<span class="number">300</span>,<span class="number">300</span>)</span><br><span class="line">        layout:addChild(btn)</span><br><span class="line">        pageView:addChild(layout)<span class="comment">---ä¸€ä¸ªlayout ä¸ºä¸€ä¸ªpageå†…å®¹   page:addPage(layout)</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--æ·»åŠ pageView åˆ°åœºæ™¯ä¸­</span></span><br><span class="line">    <span class="built_in">self</span>:addChild(pageView)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">--æ·»åŠ äº‹ä»¶å“åº”</span></span><br><span class="line">    pageView:addEventListener(handler(<span class="built_in">self</span>, <span class="built_in">self</span>.onEvent))</span><br><span class="line"> </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">--äº‹ä»¶å“åº”æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onEvent</span><span class="params">(sender,event)</span></span></span><br><span class="line">    <span class="keyword">if</span> event == ccui.PageViewEventType.turning <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> pageNum = sender:getCurrentPageIndex()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;is turning,this PageNum:&quot;</span>..pageNum)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> MainScene</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯Cocos2dxä¸­ç”¨åˆ°çš„å››ç§å®¹å™¨</p>
</blockquote>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-luaå®‰å“è·³è½¬åˆ°facebook</title>
    <url>/761caebd.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>æœ€è¿‘äº§å“æå‡ºä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦åœ¨æ¸¸æˆä¸­èƒ½å¤Ÿè·³è½¬åˆ°<code>facebook</code>ä¸­æ‰“å¼€æˆ‘ä»¬çš„æ¸¸æˆä¸»é¡µã€‚å½“æ—¶ä¹Ÿæ²¡æœ‰å¤šæƒ³ï¼Œç›´æ¥å°±ç”¨<code>device.openURL()</code>æ¥æ‰“å¼€äº§å“å‘è¿‡æ¥çš„é“¾æ¥ã€‚</p>
<p>ç„¶åä»Šå¤©æµ‹è¯•çš„æ—¶å€™å°±å‘ç°äº†é—®é¢˜ï¼Œç‚¹å‡»<code>facebook</code>æŒ‰é’®æ— æ³•è·³è½¬åˆ°facebook åº”ç”¨ï¼Œåªèƒ½æ‰“å¼€ç½‘é¡µã€‚åœ¨ç½‘ä¸ŠæŸ¥äº†å¥½ä¹…çš„èµ„æ–™ï¼Œæ‰å‘ç°æ˜¯å› ä¸ºfacebookçš„SDKå‡çº§åå¯¼è‡´çš„ã€‚</p>
<p>ä¸‹é¢è¯´ä¸‹æˆ‘çš„åšæ³•ï¼Œæ˜¯èƒ½å¤Ÿå®Œæˆäº§å“è¦æ±‚çš„ã€‚å½“ç„¶ï¼Œæ¶‰åŠåˆ°<code>Lua</code>å’Œ<code>Java</code>çš„äº¤äº’<br>Luaä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AppInfo.openFacebook</span><span class="params">(name)</span></span></span><br><span class="line">    <span class="keyword">local</span> <span class="built_in">os</span> = device.platform</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">os</span> == <span class="string">&quot;android&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> sig = <span class="string">&quot;(Ljava/lang/String;)V&quot;</span></span><br><span class="line">        <span class="keyword">local</span> args = &#123;name&#125;</span><br><span class="line">        luaj.callStaticMethod(AppInfo.JAVA_CLASSNAME, <span class="string">&quot;openFacebook&quot;</span>, args, sig)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>javaä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">openFacebook</span><span class="params">(<span class="keyword">final</span> String name)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        GameConfig.appContext.getPackageManager().getPackageInfo(<span class="string">&quot;com.facebook.katana&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        GameConfig.appContext.startActivity(<span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW, Uri.parse(<span class="string">&quot;fb://page/&quot;</span> + facebookId)));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        GameConfig.appContext.startActivity(<span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW, Uri.parse(<span class="string">&quot;https://www.facebook.com/&quot;</span> + name)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Luaä¸Javaè¯¦ç»†çš„äº¤äº’å°±ä¸è´´å‡ºæ¥äº†~</p>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>java</tag>
        <tag>facebook</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-lua Android Redirect to Facebook</title>
    <url>/761caebden.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Recently, the product team requested a feature that allows users to jump to our gameâ€™s homepage on <code>Facebook</code> from within the game. At first, I didnâ€™t think much of it and directly used <code>device.openURL()</code> to open the link provided by the product team.</p>
<p>However, during testing, I discovered an issue: clicking the <code>Facebook</code> button did not open the Facebook app but instead opened a webpage. After researching for a while, I found out that this was due to an update in Facebookâ€™s SDK.</p>
<p>Hereâ€™s how I solved the issue to meet the productâ€™s requirements. The solution involves interaction between <code>Lua</code> and <code>Java</code>.</p>
<h3 id="Lua-Code"><a href="#Lua-Code" class="headerlink" title="Lua Code:"></a>Lua Code:</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AppInfo.openFacebook</span><span class="params">(name)</span></span></span><br><span class="line">    <span class="keyword">local</span> <span class="built_in">os</span> = device.platform</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">os</span> == <span class="string">&quot;android&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> sig = <span class="string">&quot;(Ljava/lang/String;)V&quot;</span></span><br><span class="line">        <span class="keyword">local</span> args = &#123;name&#125;</span><br><span class="line">        luaj.callStaticMethod(AppInfo.JAVA_CLASSNAME, <span class="string">&quot;openFacebook&quot;</span>, args, sig)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Java Code:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">openFacebook</span><span class="params">(<span class="keyword">final</span> String name)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        GameConfig.appContext.getPackageManager().getPackageInfo(<span class="string">&quot;com.facebook.katana&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        GameConfig.appContext.startActivity(<span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW, Uri.parse(<span class="string">&quot;fb://page/&quot;</span> + facebookId)));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        GameConfig.appContext.startActivity(<span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW, Uri.parse(<span class="string">&quot;https://www.facebook.com/&quot;</span> + name)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The detailed interaction between Lua and Java is not included here.</p>
]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Java</tag>
        <tag>Cocos2dx</tag>
        <tag>Facebook</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-luaå¯¹å›¾ç‰‡è¿›è¡Œä¹å®«æ ¼ç¼©æ”¾</title>
    <url>/63240.html</url>
    <content><![CDATA[<p>å¼€å‘ç¯å¢ƒï¼šCocos2dx 3.17<br>å¼€å‘è¯­è¨€ï¼šlua<br>æˆ‘ä»¬åœ¨ä½¿ç”¨Cocos 2dxè¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œç»å¸¸è¦å¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå•ç‹¬çš„å›¾ç‰‡ï¼Œå¯¹å…¶è¿›è¡Œå¸¸è§„çš„ç¼©æ”¾æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ã€‚ä½†æ˜¯å›¾ç‰‡æ˜¯ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œå®ƒä¸‹é¢è¿˜æœ‰å…¶ä»–çš„å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆç›´æ¥å¯¹è¿™ä¸ªå›¾ç‰‡è¿›è¡Œç¼©æ”¾ï¼Œå°±ä¼šå½±å“åˆ°å®ƒçš„å­èŠ‚ç‚¹ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å¯¹è¿™å¼ å›¾ç‰‡è¿›è¡Œä¹å®«æ ¼ç¼©æ”¾ã€‚è€Œä¸”å¯ä»¥æœ€å¤§åŒ–çš„èŠ‚çœçº¹ç†èµ„æºï¼Œä»»æ„ç¼©æ”¾å›¾ç‰‡è¿˜èƒ½ä¿æŒä¸€ä¸ªä¸é”™çš„æ•ˆæœã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª Sprite9Scale æ˜¾ç¤ºå¯¹è±¡ã€‚</p>
<p>æ ¼å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">sprite = display.newScale9Sprite(å›¾åƒå, [x, y], [size å¯¹è±¡])</span><br></pre></td></tr></table></figure>
<p>Sprite9Scale å°±æ˜¯é€šå¸¸æ‰€èªªçš„â€œä¹å®«æ ¼â€å›¾åƒã€‚ä¸€ä¸ªçŸ©å½¢å›¾åƒä¼šè¢«åˆ†ä¸º 9 éƒ¨åˆ†ï¼Œç„¶åæ ¹æ®è¦æ±‚æ‹‰ä¼¸å›¾åƒï¼ŒåŒæ—¶ä¿è¯æ‹‰ä¼¸åçš„å›¾åƒå››è¾¹ä¸å˜å½¢ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºä¸€ä¸ª Scale9 å›¾åƒï¼Œå¹¶æ‹‰ä¼¸åˆ° 400, 300 ç‚¹å¤§å°</span></span><br><span class="line"><span class="keyword">local</span> sprite = display.newScale9Sprite(<span class="string">&quot;Box.png&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, cc.size(<span class="number">400</span>, <span class="number">300</span>))</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-lua Nine-Slice Scaling for Images</title>
    <url>/63240en.html</url>
    <content><![CDATA[<p>Development Environment: Cocos2dx 3.17<br>Development Language: Lua<br>When developing with Cocos2dx, we often need to scale images. If itâ€™s a standalone image, conventional scaling works just fine. However, if the image is a parent node with other child nodes, directly scaling the image will affect its child nodes. In such cases, we can use nine-slice scaling for the image, which maximizes texture resource savings and allows images to be scaled flexibly while maintaining a good visual effect.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Create and return a Sprite9Scale display object.</p>
<p>Format:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">sprite = display.newScale9Sprite(image_name, [x, y], [size object])</span><br></pre></td></tr></table></figure>
<p>Sprite9Scale refers to the commonly known â€œnine-sliceâ€ image. A rectangular image is divided into 9 parts, and the image is stretched based on requirements while ensuring that the four edges of the stretched image do not get distorted.</p>
<p>Example:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Create a Scale9 image and stretch it to a size of 400x300</span></span><br><span class="line"><span class="keyword">local</span> sprite = display.newScale9Sprite(<span class="string">&quot;Box.png&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, cc.size(<span class="number">400</span>, <span class="number">300</span>))</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-luaçƒ­æ›´æ–°</title>
    <url>/49721.html</url>
    <content><![CDATA[<p>æ¯æ¬¡ç™»é™†æ¸¸æˆåˆ©ç”¨Cocosçš„assetManagerä»æœåŠ¡å™¨æ‹‰å»å½“å‰æœ€æ–°çš„ä¸¤ä¸ªæ–‡ä»¶ã€‚ ä¸€ä¸ªæ˜¯version.mainifest,ä¸€ä¸ªproject.mainifest. è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æ˜¯xmlçš„æè¿°æ–‡ä»¶ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä¸€ä¸ªåŒ…å«äº†ç‰ˆæœ¬ä¿¡æ¯ï¼Œç¬¬äºŒä¸ªåŒ…å«äº†æ¸¸æˆæ‰€æœ‰èµ„æºçš„MD5ç ã€‚é¦–å…ˆé€šè¿‡versionæ–‡ä»¶å¯¹æ¯”æœ¬åœ°çš„ç‰ˆæœ¬æ˜¯å¦ç›¸åŒï¼Œå¦‚æœä¸ç›¸åŒï¼Œå†é€šè¿‡è·Ÿæœ¬åœ°çš„projectæ–‡ä»¶å¯¹æ¯”MD5ç æ¥åˆ¤æ–­å“ªäº›æ–‡ä»¶éœ€è¦é‡æ–°ä¸‹è½½ï¼Œæ›¿æ¢èµ„æºã€‚ </p>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤:"></a>æ­¥éª¤:</h2><ol>
<li>æœ‰ä¸€ä¸ªæ–‡ä»¶ä¸‹è½½çš„çƒ­æ›´æ–°æœåŠ¡å™¨ï¼Œå°†æœ€æ–°é¡¹ç›®èµ„æº(res&#x2F;  src&#x2F; ç›®å½•)æ”¾å…¥çƒ­æ›´æ–°æœåŠ¡å™¨ä¸­ï¼Œæ·»åŠ ç‰ˆæœ¬ä¿¡æ¯æ¯æ–‡ä»¶(version_info.json)å’Œpythonè„šæœ¬æ–‡ä»¶eneateManifest.py(ç”Ÿæˆproject.manifestã€version.manifestæ–‡ä»¶)ã€‚</li>
</ol>
<p>2.version_info.jsonæ–‡ä»¶: ä¸»è¦ç”¨æ¥é…ç½®ä¿¡æ¯</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;packageUrl&quot;</span> : <span class="string">&quot;http://ip:port/update/MyProj/assets/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;remoteManifestUrl&quot;</span> : <span class="string">&quot;http://ip:port/update/MyProj/version/project.manifest&quot;</span>,</span><br><span class="line">    <span class="string">&quot;remoteVersionUrl&quot;</span> : <span class="string">&quot;http://ip:port/update/MyProj/version/version.manifest&quot;</span>,</span><br><span class="line">    <span class="string">&quot;engineVersion&quot;</span> : <span class="string">&quot;3.3&quot;</span>,</span><br><span class="line">	<span class="string">&quot;update_channel&quot;</span> : <span class="string">&quot;Android&quot;</span>,</span><br><span class="line">	<span class="string">&quot;bundle&quot;</span> : <span class="string">&quot;2018111701&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span> : <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3.eneateManifest.pyæ–‡ä»¶: è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªpythonã€‚ç›®çš„æ˜¯ç”Ÿæˆå¯¹åº”çš„versionå’Œprojectæ–‡ä»¶ã€‚projectæ–‡ä»¶å¯ä»¥å¸®ä½ ç»™æ¯ä¸ªèµ„æºç”Ÿæˆç‹¬ä¸€æ— äºŒçš„MD5ç ï¼Œç›¸å½“äºæ¯ä¸ªèµ„æºçš„æ ‡è®°ã€‚ä¸‹é¢æ˜¯ä¸€æ®µpythonæ–‡ä»¶çš„ä»£ç ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">#coding:utf<span class="number">-8</span></span><br><span class="line"> </span><br><span class="line">import <span class="built_in">os</span></span><br><span class="line">import sys</span><br><span class="line">import json</span><br><span class="line">import hashlib</span><br><span class="line">import subprocess</span><br><span class="line">import getpass</span><br><span class="line"> </span><br><span class="line">username = getpass.getuser()</span><br><span class="line"># æ”¹å˜å½“å‰å·¥ä½œç›®å½•</span><br><span class="line">#<span class="built_in">os</span>.chdir(<span class="string">&#x27;/Users/&#x27;</span> + username + <span class="string">&#x27;/Documents/client/MyProj/&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">assetsDir = &#123;</span><br><span class="line">    #MyProjæ–‡ä»¶å¤¹ä¸‹éœ€è¦è¿›è¡Œçƒ­è·Ÿçš„æ–‡ä»¶å¤¹</span><br><span class="line">    <span class="string">&quot;searchDir&quot;</span> : [<span class="string">&quot;src&quot;</span>, <span class="string">&quot;res&quot;</span>],</span><br><span class="line">    #éœ€è¦å¿½ç•¥çš„æ–‡ä»¶å¤¹</span><br><span class="line">    <span class="string">&quot;ignorDir&quot;</span> : [<span class="string">&quot;Cocos&quot;</span>, <span class="string">&quot;framework&quot;</span>, <span class="string">&quot;.svn&quot;</span>],</span><br><span class="line">    #éœ€è¦å¿½ç•¥çš„æ–‡ä»¶</span><br><span class="line">    <span class="string">&quot;ignorFile&quot;</span>:[<span class="string">&quot;.DS_Store&quot;</span>],</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">versionConfigFile   = <span class="string">&quot;version/version_info.json&quot;</span>  #ç‰ˆæœ¬ä¿¡æ¯çš„é…ç½®æ–‡ä»¶è·¯å¾„</span><br><span class="line">versionManifestPath = <span class="string">&quot;version/version.manifest&quot;</span>    #ç”±æ­¤è„šæœ¬ç”Ÿæˆçš„version.manifestæ–‡ä»¶è·¯å¾„</span><br><span class="line">projectManifestPath = <span class="string">&quot;version/project.manifest&quot;</span>    #ç”±æ­¤è„šæœ¬ç”Ÿæˆçš„project.manifestæ–‡ä»¶è·¯å¾„</span><br><span class="line"># projectManifestPath = <span class="string">&quot;/Users/ximi/Documents/client/MyProj/res/version/project.manifest&quot;</span>    #ç”±æ­¤è„šæœ¬ç”Ÿæˆçš„project.manifestæ–‡ä»¶è·¯å¾„(macæœº)</span><br><span class="line"> </span><br><span class="line">class SearchFile:</span><br><span class="line">    def __init__(<span class="built_in">self</span>):</span><br><span class="line">        <span class="built_in">self</span>.fileList = []</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> assetsDir:</span><br><span class="line">            <span class="keyword">if</span> (k == <span class="string">&quot;searchDir&quot;</span>):</span><br><span class="line">                <span class="keyword">for</span> searchdire <span class="keyword">in</span> assetsDir[k]:                 </span><br><span class="line">                    <span class="built_in">self</span>.recursiveDir(searchdire)</span><br><span class="line"> </span><br><span class="line">    def recursiveDir(<span class="built_in">self</span>, srcPath):</span><br><span class="line">        <span class="string">&#x27;&#x27;</span><span class="string">&#x27; é€’å½’æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶&#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line">        dirList = []    #æ‰€æœ‰æ–‡ä»¶å¤¹  </span><br><span class="line"> </span><br><span class="line">        files = <span class="built_in">os</span>.listdir(srcPath) #è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŠç›®å½•ï¼ˆä¸å«å­ç›®å½•ï¼‰</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> files:         </span><br><span class="line">            #ç›®å½•çš„å¤„ç†</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">os</span>.<span class="built_in">path</span>.isdir(srcPath + <span class="string">&#x27;/&#x27;</span> + f)):              </span><br><span class="line">                <span class="keyword">if</span> (f[<span class="number">0</span>] == <span class="string">&#x27;.&#x27;</span> <span class="keyword">or</span> (f <span class="keyword">in</span> assetsDir[<span class="string">&quot;ignorDir&quot;</span>])):</span><br><span class="line">                    #æ’é™¤éšè—æ–‡ä»¶å¤¹å’Œå¿½ç•¥çš„ç›®å½•</span><br><span class="line">                    pass</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    #æ·»åŠ ééœ€è¦çš„æ–‡ä»¶å¤¹                                  </span><br><span class="line">                    dirList.append(f)</span><br><span class="line"> </span><br><span class="line">            #æ–‡ä»¶çš„å¤„ç†</span><br><span class="line">            elif (<span class="built_in">os</span>.<span class="built_in">path</span>.isfile(srcPath + <span class="string">&#x27;/&#x27;</span> + f)) <span class="keyword">and</span> (f <span class="keyword">not</span> <span class="keyword">in</span> assetsDir[<span class="string">&quot;ignorFile&quot;</span>]):               </span><br><span class="line">                <span class="built_in">self</span>.fileList.append(srcPath + <span class="string">&#x27;/&#x27;</span> + f) #æ·»åŠ æ–‡ä»¶</span><br><span class="line"> </span><br><span class="line">        #éå†æ‰€æœ‰å­ç›®å½•,å¹¶é€’å½’</span><br><span class="line">        <span class="keyword">for</span> dire <span class="keyword">in</span> dirList:        </span><br><span class="line">            #é€’å½’ç›®å½•ä¸‹çš„æ–‡ä»¶</span><br><span class="line">            <span class="built_in">self</span>.recursiveDir(srcPath + <span class="string">&#x27;/&#x27;</span> + dire)</span><br><span class="line"> </span><br><span class="line">    def getAllFile(<span class="built_in">self</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;</span><span class="string">&#x27; get all file path&#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> tuple(<span class="built_in">self</span>.fileList)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">def CalcMD5(filepath):</span><br><span class="line">    <span class="string">&quot;&quot;</span><span class="string">&#x27;generate a md5 code by a file path&#x27;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">    with open(filepath,&#x27;rb&#x27;) as f:</span></span><br><span class="line"><span class="string">        md5obj = hashlib.md5()</span></span><br><span class="line"><span class="string">        md5obj.update(f.read())</span></span><br><span class="line"><span class="string">        return md5obj.hexdigest()</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">def getVersionInfo():</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;get version config data&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    configFile = open(versionConfigFile,&quot;</span>r<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    json_data = json.load(configFile)</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    configFile.close()</span></span><br><span class="line"><span class="string">    # json_data[&quot;</span>version<span class="string">&quot;] = json_data[&quot;</span>version<span class="string">&quot;] + &#x27;.&#x27; + str(GetSvnCurrentVersion())</span></span><br><span class="line"><span class="string">    json_data[&quot;</span>version<span class="string">&quot;] = json_data[&quot;</span>version<span class="string">&quot;]</span></span><br><span class="line"><span class="string">    return json_data</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">def GenerateVersionManifestFile():</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27; ç”Ÿæˆå¤§ç‰ˆæœ¬çš„version.manifest&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    json_str = json.dumps(getVersionInfo(), indent = 2)</span></span><br><span class="line"><span class="string">    fo = open(versionManifestPath,&quot;</span>w<span class="string">&quot;)  </span></span><br><span class="line"><span class="string">    fo.write(json_str)  </span></span><br><span class="line"><span class="string">    fo.close()</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">def GenerateProjectManifestFile():</span></span><br><span class="line"><span class="string">    searchfile = SearchFile()</span></span><br><span class="line"><span class="string">    fileList = list(searchfile.getAllFile())</span></span><br><span class="line"><span class="string">    project_str = &#123;&#125;</span></span><br><span class="line"><span class="string">    project_str.update(getVersionInfo())</span></span><br><span class="line"><span class="string">    dataDic = &#123;&#125;</span></span><br><span class="line"><span class="string">    for f in fileList:      </span></span><br><span class="line"><span class="string">        dataDic[f] = &#123;&quot;</span>md5<span class="string">&quot; : CalcMD5(f)&#125;</span></span><br><span class="line"><span class="string">        print f</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    project_str.update(&#123;&quot;</span>assets<span class="string">&quot;:dataDic&#125;)</span></span><br><span class="line"><span class="string">    json_str = json.dumps(project_str, sort_keys = True, indent = 2)</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    fo = open(projectManifestPath,&quot;</span>w<span class="string">&quot;)  </span></span><br><span class="line"><span class="string">    fo.write(json_str)  </span></span><br><span class="line"><span class="string">    fo.close()</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">if __name__ == &quot;</span>__main__<span class="string">&quot;:</span></span><br><span class="line"><span class="string">    GenerateVersionManifestFile()</span></span><br><span class="line"><span class="string">    GenerateProjectManifestFile()</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆversion.manifestå¦‚ä¸‹</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;packageUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/assets/&quot;</span>, </span><br><span class="line">  <span class="string">&quot;engineVersion&quot;</span>: <span class="string">&quot;3.3&quot;</span>, </span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>, </span><br><span class="line">  <span class="string">&quot;remoteVersionUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/version/version.manifest&quot;</span>, </span><br><span class="line">  <span class="string">&quot;remoteManifestUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/version/project.manifest&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆproject.manifestå¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;assets&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;src/packages/mvc/init.lua&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;md5&quot;</span>: <span class="string">&quot;6b9173481a1300c5e737ad5885ebef00&quot;</span></span><br><span class="line">        &#125;, </span><br><span class="line">        <span class="string">&quot;src/protobuf.lua&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;md5&quot;</span>: <span class="string">&quot;f790fe35eb179a4341ff41d94e488a5d&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;, </span><br><span class="line">    <span class="string">&quot;packageUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/assets/&quot;</span>, </span><br><span class="line">    <span class="string">&quot;engineVersion&quot;</span>: <span class="string">&quot;3.3&quot;</span>, </span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>, </span><br><span class="line">    <span class="string">&quot;remoteVersionUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/version/version.manifest&quot;</span>, </span><br><span class="line">    <span class="string">&quot;remoteManifestUrl&quot;</span>: <span class="string">&quot;http://ip:port/update/MyProj/version/project.manifest&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.æ¸¸æˆå®¢æˆ·ç«¯: åˆ©ç”¨Cocos assetManageræ¥ä»æœåŠ¡å™¨è·å–æ–‡ä»¶å¹¶ä¸”è¿›è¡Œèµ„æºçš„æ›¿æ¢ï¼ˆè¿™é‡Œæ‰€è°“çš„æ›¿æ¢å¹¶ä¸æ˜¯çœŸæ­£çš„æ›¿æ¢ï¼Œåˆ©ç”¨äº†Fileutils-&gt;searchPath() è®¾ç½®èµ„æºæ–‡ä»¶è¯»å–çš„ä¼˜å…ˆçº§ã€‚ä¹Ÿå°±æ˜¯è€èµ„æºå’Œä»£ç å¹¶æ²¡æœ‰åˆ é™¤ï¼Œè€Œæ˜¯èˆå¼ƒä¸ç”¨ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--region *.lua</span></span><br><span class="line"><span class="comment">--Date</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">local</span> AssetsManager = class(<span class="string">&quot;AssetsManager&quot;</span>,<span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">    <span class="keyword">return</span> cc.LayerColor:<span class="built_in">create</span>(cc.c4b(<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">220</span>))</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:ctor</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">self</span>:onNodeEvent(<span class="string">&quot;exit&quot;</span>, handler(<span class="built_in">self</span>, <span class="built_in">self</span>.onExitCallback))</span><br><span class="line">    <span class="built_in">self</span>:initUI()</span><br><span class="line">    <span class="built_in">self</span>:setAssetsManage()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:onExitCallback</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">self</span>.assetsManagerEx:release()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:initUI</span><span class="params">()</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> hintLabel = cc.Label:createWithTTF(<span class="string">&quot;æ­£åœ¨æ›´æ–°...&quot;</span>, CONFIG.TTF_FONT_2, <span class="number">20</span>)</span><br><span class="line">        :addTo(<span class="built_in">self</span>)</span><br><span class="line">        :move(<span class="number">600</span>, <span class="number">80</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> progressBg = display.newSprite(<span class="string">&quot;sprites/hyd_progress_bg.png&quot;</span>)    </span><br><span class="line">        :addTo(<span class="built_in">self</span>)</span><br><span class="line">        :move(<span class="number">600</span>, <span class="number">40</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">self</span>.progress = cc.ProgressTimer:<span class="built_in">create</span>(display.newSprite(<span class="string">&quot;sprites/hyd_progress.png&quot;</span>))</span><br><span class="line">        :addTo(progressBg)</span><br><span class="line">        :move(<span class="number">380</span>, <span class="number">19</span>)</span><br><span class="line">    <span class="built_in">self</span>.progress:setType(cc.PROGRESS_TIMER_TYPE_BAR)</span><br><span class="line">    <span class="built_in">self</span>.progress:setBarChangeRate(cc.p(<span class="number">1</span>, <span class="number">0</span>))</span><br><span class="line">    <span class="built_in">self</span>.progress:setMidpoint(cc.p(<span class="number">0.0</span>, <span class="number">0.5</span>))</span><br><span class="line">    <span class="built_in">self</span>.progress:setPercentage(<span class="number">0</span>) </span><br><span class="line"> </span><br><span class="line">    <span class="comment">--è§¦æ‘¸åå™¬</span></span><br><span class="line">    <span class="built_in">self</span>.listener = cc.EventListenerTouchOneByOne:<span class="built_in">create</span>()</span><br><span class="line">    <span class="built_in">self</span>.listener:setSwallowTouches(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">local</span> onTouchBegan = <span class="function"><span class="keyword">function</span> <span class="params">(touch, event)</span></span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line">    <span class="built_in">self</span>.listener:registerScriptHandler(onTouchBegan, cc.Handler.EVENT_TOUCH_BEGAN)</span><br><span class="line">    cc.Director:getInstance():getEventDispatcher():addEventListenerWithSceneGraphPriority(<span class="built_in">self</span>.listener, <span class="built_in">self</span>)   </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:setAssetsManage</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">--åˆ›å»ºå¯å†™ç›®å½•ä¸è®¾ç½®æœç´¢è·¯å¾„</span></span><br><span class="line">    <span class="keyword">local</span> storagePath = cc.FileUtils:getInstance():getWritablePath() .. <span class="string">&quot;NewRes/&quot;</span> </span><br><span class="line">    <span class="keyword">local</span> resPath = storagePath.. <span class="string">&#x27;/res/&#x27;</span></span><br><span class="line">    <span class="keyword">local</span> srcPath = storagePath.. <span class="string">&#x27;/src/&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> (cc.FileUtils:getInstance():isDirectoryExist(storagePath)) <span class="keyword">then</span>         </span><br><span class="line">        cc.FileUtils:getInstance():createDirectory(storagePath)</span><br><span class="line">        cc.FileUtils:getInstance():createDirectory(resPath)</span><br><span class="line">        cc.FileUtils:getInstance():createDirectory(srcPath)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> searchPaths = cc.FileUtils:getInstance():getSearchPaths() </span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(searchPaths, <span class="number">1</span>, storagePath)  </span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(searchPaths, <span class="number">2</span>, resPath)</span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(searchPaths, <span class="number">3</span>, srcPath)</span><br><span class="line">    cc.FileUtils:getInstance():setSearchPaths(searchPaths)</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">self</span>.assetsManagerEx = cc.AssetsManagerEx:<span class="built_in">create</span>(<span class="string">&quot;version/project.manifest&quot;</span>, storagePath)    </span><br><span class="line">    <span class="built_in">self</span>.assetsManagerEx:retain()</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> eventListenerAssetsManagerEx = cc.EventListenerAssetsManagerEx:<span class="built_in">create</span>(<span class="built_in">self</span>.assetsManagerEx, </span><br><span class="line">       <span class="function"><span class="keyword">function</span> <span class="params">(event)</span></span></span><br><span class="line">           <span class="built_in">self</span>:handleAssetsManagerEvent(event)</span><br><span class="line">       <span class="keyword">end</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> dispatcher = cc.Director:getInstance():getEventDispatcher()</span><br><span class="line">    dispatcher:addEventListenerWithFixedPriority(eventListenerAssetsManagerEx, <span class="number">1</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="comment">--æ£€æŸ¥ç‰ˆæœ¬å¹¶å‡çº§</span></span><br><span class="line">    <span class="built_in">self</span>.assetsManagerEx:update()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:handleAssetsManagerEvent</span><span class="params">(event)</span></span>    </span><br><span class="line">    <span class="keyword">local</span> eventCodeList = cc.EventAssetsManagerEx.EventCode    </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">local</span> eventCodeHand = &#123;</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ERROR_NO_LOCAL_MANIFEST] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å‘ç”Ÿé”™è¯¯:æœ¬åœ°èµ„æºæ¸…å•æ–‡ä»¶æœªæ‰¾åˆ°&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ERROR_DOWNLOAD_MANIFEST] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å‘ç”Ÿé”™è¯¯:è¿œç¨‹èµ„æºæ¸…å•æ–‡ä»¶ä¸‹è½½å¤±è´¥&quot;</span>)  <span class="comment">--èµ„æºæœåŠ¡å™¨æ²¡æœ‰æ‰“å¼€ï¼Œ</span></span><br><span class="line">            <span class="built_in">self</span>:downloadManifestError()</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ERROR_PARSE_MANIFEST] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&quot;å‘ç”Ÿé”™è¯¯:èµ„æºæ¸…å•æ–‡ä»¶è§£æå¤±è´¥&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.NEW_VERSION_FOUND] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å‘ç°æ‰¾åˆ°æ–°ç‰ˆæœ¬&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ALREADY_UP_TO_DATE] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å·²ç»æ›´æ–°åˆ°æœåŠ¡å™¨æœ€æ–°ç‰ˆæœ¬&quot;</span>)            </span><br><span class="line">            <span class="built_in">self</span>:updateFinished()</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.UPDATE_PROGRESSION]= <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ›´æ–°è¿‡ç¨‹çš„è¿›åº¦äº‹ä»¶&quot;</span>)</span><br><span class="line">            <span class="built_in">self</span>.progress:setPercentage(event:getPercentByFile())</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ASSET_UPDATED] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å•ä¸ªèµ„æºè¢«æ›´æ–°äº‹ä»¶&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ERROR_UPDATING] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å‘ç”Ÿé”™è¯¯:æ›´æ–°è¿‡ç¨‹ä¸­é‡åˆ°é”™è¯¯&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.UPDATE_FINISHED] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ›´æ–°æˆåŠŸäº‹ä»¶&quot;</span>)</span><br><span class="line">            <span class="built_in">self</span>:updateFinished()</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.UPDATE_FAILED] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ›´æ–°å¤±è´¥äº‹ä»¶&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"> </span><br><span class="line">        [eventCodeList.ERROR_DECOMPRESS] = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;è§£å‹ç¼©å¤±è´¥&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">local</span> eventCode = event:getEventCode()    </span><br><span class="line">    <span class="keyword">if</span> eventCodeHand[eventCode] ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">        eventCodeHand[eventCode]()</span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:updateFinished</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">self</span>:setVisible(<span class="literal">false</span>)</span><br><span class="line">    <span class="built_in">self</span>.listener:setEnabled(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AssetsManager:downloadManifestError</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">self</span>:setVisible(<span class="literal">false</span>)</span><br><span class="line">    <span class="built_in">self</span>.listener:setEnabled(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> AssetsManager</span><br><span class="line"> </span><br><span class="line"><span class="comment">--endregion</span></span><br></pre></td></tr></table></figure>
<p>Android apk å®‰è£…ååœ¨æ‰‹æœºä¸­è¿˜æ˜¯ä»¥apkå­˜åœ¨ï¼Œapk ä¸å¯å†™å…¥å’Œåˆ é™¤ï¼Œæ‰€ä»¥çƒ­æ›´æ–°ä¸‹è½½çš„æœ€æ–°èµ„æºéƒ½å­˜åœ¨ç¼“å­˜ä¸­ï¼Œå¹¶æ·»åŠ ç¼“å­˜ç›®å½•ä¸ºæœ€é«˜ä¼˜å…ˆçº§æœç´¢ç›®å½•ï¼ŒåŠ è½½èµ„æºæ—¶ä»æœ€é«˜ä¼˜å…ˆçº§ç›®å½•ä¸­åŠ è½½ä»è€Œèµ·åˆ°æ›¿æ¢æ›´æ–°çš„ä½œç”¨ã€‚</p>
<p>Cocos2dxä¸­æœ‰ä¸€ä¸ªçƒ­æ›´æ–°ç±»AssetsManagerExï¼Œç”¨è¿™ä¸ªç±»å®ç°çƒ­æ›´åŠŸèƒ½æ—¶éœ€è¦æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œproject.manifestä»¥åŠversion.manifestã€‚è¿™é‡Œä¸»è¦æ˜¯project.manifestæ–‡ä»¶</p>
<p>Cocosè‡ªèº«ä¹Ÿå°è£…äº†çƒ­æ›´æ–°çš„æ¨¡å—AssetsManagerã€AssetsManagerExã€‚</p>
<p>AssetsManageré‡‡ç”¨çš„æ˜¯å‡çº§åŒ…çš„ç®¡ç†æ–¹å¼ï¼Œé¦–å…ˆè¿›è¡Œç‰ˆæœ¬å·å¯¹æ¯”ï¼Œç„¶åæ ¹æ®URLè·å–å¯¹åº”çš„å‡çº§åŒ…ï¼Œè§£å‹å‡çº§åŒ…ï¼Œè®¾ç½®èµ„æºåŠ è½½è·¯å¾„ï¼Œé€šè¿‡åŠ è½½writepathç›®å½•ä¸‹æœ€æ–°æ–‡ä»¶çš„æ–¹å¼æ¥å®ç°æ›´æ–°ã€‚é—®é¢˜æ˜¯å½“æ¶‰åŠè·³ç‰ˆæœ¬æ›´æ–°ï¼Œæˆ–åªæœ‰ä¸€ä¸ªæ–‡ä»¶è¢«æ”¹åŠ¨æ—¶ï¼Œç”¨æˆ·å°±è¦ä¸‹è½½å‰é¢å…¨éƒ¨çš„å‡çº§å†…å®¹ï¼Œå‡çº§åŒ…ä¼šè¶Šæ¥è¶Šå¤§ã€‚</p>
<p>AssetsManagerExæ˜¯AssetsManagerçš„åŠ å¼ºç‰ˆï¼Œä¸åŒçš„æ˜¯ä¸å†ä½¿ç”¨å‡çº§åŒ…çš„æ–¹å¼ï¼Œè€Œæ˜¯é‡‡ç”¨å•ä¸ªæ–‡ä»¶æ‹‰å–çš„æ–¹å¼ã€‚é¦–å…ˆè·å–æœ¬åœ°æ›´æ–°é…ç½®ï¼Œä¹‹åä¸æœåŠ¡å™¨çš„æ›´æ–°é…ç½®æ¯”å¯¹ï¼Œå¾—å‡ºå·®å¼‚æ–‡ä»¶ï¼Œä¹‹åå•ä¸ªæ‹‰å–å·®å¼‚æ–‡ä»¶ã€‚å½“æœ¬åœ°ç‰ˆæœ¬å¤§äºæœåŠ¡å™¨ç‰ˆæœ¬æ—¶ï¼Œä¼šæ¸…ç†æ‰æœ¬åœ°æ›´æ–°ç¼“å­˜ã€‚AssetsManagerExä¹Ÿæœ‰å°šæœªè§£å†³çš„é—®é¢˜ï¼Œä¾‹å¦‚å¤šä¸ªæ›´æ–°åºåˆ—æ— æ³•å¹¶è¡Œï¼Œåªèƒ½é¡ºåºå¯åŠ¨ã€‚å¦å¤–ç‰ˆæœ¬åæœŸéšç€é¡¹ç›®åºå¤§é…ç½®æ–‡ä»¶å‡ ä¹åŒ…å«äº†æ‰€æœ‰çš„æ–‡ä»¶ä¿¡æ¯ï¼Œå¯¹æ¯”æ–‡ä»¶æ—¶é—´çš„è€—æ—¶ä¼šè¶Šæ¥è¶Šé•¿ã€‚</p>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-luaç»™æ–‡å­—æ·»åŠ ä¸‹åˆ’çº¿</title>
    <url>/722af58.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ç»™æ–‡å­—æ·»åŠ ä¸‹åˆ’çº¿ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ç”»ä¸€æ¡ç›´çº¿ï¼Œåªæ˜¯ç›´çº¿æ”¾åœ¨äº†æ–‡å­—ä¸‹æ–¹è€Œå·²</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª DrawNode ï¼ˆçº¿æ€§ï¼‰å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">-- @function [parent=#display] newLine</span></span><br><span class="line"><span class="comment">-- @param table point table</span></span><br><span class="line"><span class="comment">-- @param table params æœ‰å‚æ•°ï¼Œè¾¹çº¿è‰² borderColor åŠè¾¹çº¿å®½åº¦ borderWidth</span></span><br><span class="line"><span class="comment">-- @return DrawNode#DrawNode ret (return value: cc.DrawNode) </span></span><br><span class="line"><span class="comment">-- @see ShapeNode</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª DrawNode ï¼ˆçº¿æ€§ï¼‰å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">æ ¼å¼ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">shape = display.newLine(pointè¡¨, [å‚æ•°])</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">-- åˆ›å»ºä¸€ä¸ªçº¿å®½ä¸º2ï¼Œé¢œè‰²ä¸ºçº¢è‰²ï¼Œä»(10,10)åˆ°(100,100)çš„çº¿æ®µ</span></span><br><span class="line"><span class="comment">local shape3 = display.newLine(&#123;&#123;10, 10&#125;, &#123;100,100&#125;&#125;,</span></span><br><span class="line"><span class="comment">    &#123;borderColor = cc.c4f(1.0, 0.0, 0.0, 1.0),</span></span><br><span class="line"><span class="comment">    borderWidth = 1&#125;)</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">display.newLine</span><span class="params">(points, params)</span></span></span><br><span class="line">    <span class="keyword">local</span> radius</span><br><span class="line">    <span class="keyword">local</span> borderColor</span><br><span class="line">    <span class="keyword">local</span> scale</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> params <span class="keyword">then</span></span><br><span class="line">        borderColor = cc.c4f(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">        radius = <span class="number">0.5</span></span><br><span class="line">        scale = <span class="number">1.0</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        borderColor = params.borderColor <span class="keyword">or</span> cc.c4f(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">        radius = (params.borderWidth <span class="keyword">and</span> params.borderWidth/<span class="number">2</span>) <span class="keyword">or</span> <span class="number">0.5</span></span><br><span class="line">        scale = checknumber(params.scale <span class="keyword">or</span> <span class="number">1.0</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, p <span class="keyword">in</span> <span class="built_in">ipairs</span>(points) <span class="keyword">do</span></span><br><span class="line">        p = cc.p(p[<span class="number">1</span>] * scale, p[<span class="number">2</span>] * scale)</span><br><span class="line">        points[i] = p</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> drawNode = cc.DrawNode:<span class="built_in">create</span>()</span><br><span class="line">    drawNode:drawSegment(points[<span class="number">1</span>], points[<span class="number">2</span>], radius, borderColor)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> drawNode</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cocos2dx</tag>
        <tag>lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-luaç‰©ç†å¼•æ“ç¢°æ’æ£€æµ‹</title>
    <url>/17739.html</url>
    <content><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>åœ¨æ¸¸æˆä¸­æ¨¡æ‹ŸçœŸå®çš„ç‰©ç†ä¸–ç•Œæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œé€šå¸¸éƒ½ä¼šäº¤ç»™ç‰©ç†å¼•æ“æ¥åšï¼Œæ¯”è¾ƒçŸ¥åçš„ç‰©ç†å¼•æ“æœ‰Box2Då’ŒChipmunkã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åœ¨Cocos2d-x 2.xä¸­ï¼Œæ¸¸æˆç›´æ¥ä½¿ç”¨ç‰©ç†å¼•æ“ï¼Œå¼•æ“æä¾›ä¸€ä¸ªç®€å•çš„CCPhysicsSpriteï¼Œå¤„ç†äº†ç‰©ç†å¼•æ“çš„bodyä¸CCSpriteçš„å…³ç³»ï¼Œè€Œç‰©ç†å¼•æ“çš„å…¶ä»–å…ƒç´ å¹¶æ²¡æœ‰å’Œå¼•æ“å¯¹åº”èµ·æ¥ï¼Œæ¸¸æˆéœ€è¦é€‰æ‹©ç›´æ¥è°ƒç”¨Box2Dæˆ–Chipmunkçš„APIæ¥å¤„ç†é€»è¾‘ã€‚ç„¶è€Œç›´æ¥ä½¿ç”¨ç‰©ç†å¼•æ“æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œç‰©ç†å¼•æ“çš„æ¥å£å‚æ•°ç¹å¤šã€å¤æ‚ã€éœ€è¦å¼€å‘äººå‘˜å¯¹ç‰©ç†å¼•æ“å’ŒCoco2d-xéƒ½å¾ˆäº†è§£ï¼Œæ‰èƒ½æŠŠä¸¤è€…èåˆå¾—å¾ˆå¥½ã€‚<br>è¿™ç§æƒ…å†µåœ¨Cocos2d-x 3.xä¸­æœ‰äº†æ”¹å˜ï¼Œå…¨æ–°çš„Physics Integrationï¼ŒæŠŠChipmunkå’ŒBox2Då°è£…åˆ°å¼•æ“å†…éƒ¨ï¼Œå¼€å‘è€…ä¸å¿…å…³å¿ƒåº•å±‚å…·ä½“ç”¨çš„æ˜¯å“ªä¸ªç‰©ç†å¼•æ“ï¼Œä¹Ÿä¸ç”¨ç›´æ¥è°ƒç”¨ç‰©ç†å¼•æ“çš„æ¥å£ã€‚<br>Cocos2d-x 3.xé»˜è®¤ä½¿ç”¨Chipmunkä½œä¸ºå†…éƒ¨ç‰©ç†å¼•æ“ã€‚<br>Physics Integration åšäº†ä»¥ä¸‹æ·±åº¦èåˆï¼š<br>ï¼ˆ1ï¼‰ç‰©ç†ä¸–ç•Œè¢«èå…¥åˆ°Sceneä¸­ï¼Œå³å½“åˆ›å»ºä¸€ä¸ªåœºæ™¯æ—¶ï¼Œå¯ä»¥æŒ‡å®šè¿™ä¸ªåœºæ™¯æ˜¯å¦ä½¿ç”¨ç‰©ç†å¼•æ“ã€‚<br>ï¼ˆ2ï¼‰Nodeè‡ªå¸¦bodyå±æ€§ï¼Œä¹Ÿå°±æ˜¯Spriteè‡ªå¸¦bodyå±æ€§ã€‚<br>ï¼ˆ3ï¼‰å¯¹ç‰©ç†å¼•æ“çš„Body(cc.PhysicsBody),Shape(cc.PhysicsShape),Contact(cc.PhysicsContact),Joint(cc.PhysicsJoint),World(cc.PhysicsWold)è¿›è¡Œå°è£…æŠ½è±¡ï¼Œä½¿ç”¨æ›´åŠ ç®€å•ã€‚<br>ï¼ˆ4ï¼‰æ›´ç®€å•çš„ç¢°æ’æ£€æµ‹ç›‘å¬:EventListenerPhysicsContact.</p>
<h3 id="åˆ›å»ºå¸¦ç‰©ç†ä¸–ç•Œçš„scene"><a href="#åˆ›å»ºå¸¦ç‰©ç†ä¸–ç•Œçš„scene" class="headerlink" title="åˆ›å»ºå¸¦ç‰©ç†ä¸–ç•Œçš„scene"></a>åˆ›å»ºå¸¦ç‰©ç†ä¸–ç•Œçš„scene</h3><p>ä½¿ç”¨ä¸‹é¢æ–¹æ³•åˆ›å»ºå¸¦ç‰©ç†ä¸–ç•Œçš„scene:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> MainScene = class (<span class="string">&quot;MainScene&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">return</span> display.newScene(<span class="string">&quot;MainScene&quot;</span>,&#123;physics = <span class="number">2</span>&#125;)</span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºåï¼Œ<code>self:getPhysicsWorld()</code>ç”¨æ¥è·å–åœºæ™¯ç»‘å®šçš„ç‰©ç†ä¸–ç•Œå¯¹è±¡ã€‚<br><code>PhysicsWorld()</code>é»˜è®¤æ˜¯å¸¦é‡åŠ›çš„ï¼Œå¤§å°ä¸ºVect(0.0f,-98.0f),ä¹Ÿå¯ä»¥é€šè¿‡<code>setGravity()</code>æ–¹æ³•æ¥æ”¹å˜é‡åŠ›å€¼ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">self</span>:getPhysicsWorld():setGravity(cc.p(<span class="number">0</span>,<span class="number">-100</span>)) </span><br></pre></td></tr></table></figure>
<p>åœ¨è°ƒè¯•ç‰©ç†ä¸–ç•Œä¸­ç‰©ä½“è¿åŠ¨æ¨¡æ‹Ÿæ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>PyhsicsWorld</code>çš„<code>setDebugDrawMask()</code>æ¥å¼€å¯è°ƒè¯•æ¨¡å¼ã€‚å®ƒèƒ½æŠŠç‰©ç†ä¸–ç•Œä¸­ä¸å¯è§çš„shape, jointå’Œcontactéƒ½å¯è§†åŒ–ã€‚å½“è°ƒè¯•ç»“æŸéœ€è¦å‘å¸ƒæ¸¸æˆçš„æ—¶å€™ï¼Œéœ€è¦æŠŠè¯¥<code>debug</code>å¼€å…³å…³é—­<br>å…³é—­DEBUGï¼Œä¼ å…¥å‚æ•°<code>cc.PhysicsWorld.DEBUGDRAW_NONE</code>ã€‚</p>
<h3 id="åˆ›å»ºç‰©ç†è¾¹ç•Œ"><a href="#åˆ›å»ºç‰©ç†è¾¹ç•Œ" class="headerlink" title="åˆ›å»ºç‰©ç†è¾¹ç•Œ"></a>åˆ›å»ºç‰©ç†è¾¹ç•Œ</h3><p>åœ¨ç‰©ç†ä¸–ç•Œä¸­ï¼Œæ‰€ä»¥ç‰©ä½“å‡å—é‡åŠ›çš„å½±å“ã€‚ç‰©ç†å¼•æ“æä¾›StaticShapeåˆ›å»ºä¸€ä¸ªä¸å—é‡åŠ›å½±å“çš„å½¢çŠ¶ï¼Œåœ¨Cocos2d-x 2.xä¸­ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ç‰©ç†å¼•æ“çš„StaticShapeç›¸å…³çš„å„ç§å‚æ•°æ¥å®Œæˆè¾¹ç•Œè®¾ç½®ã€‚è€Œåœ¨Cocos2d-x 3.xä¸­ï¼Œç”±<code>cc.PhysicsBody</code>åˆ›å»ºè¾¹ç•Œï¼Œç„¶åç”±<code>Node</code>æ·»åŠ åˆ°åœºæ™¯ï¼Œ<code>addChild</code>å†…éƒ¨è‡ªåŠ¨ç¢—å¥½åƒå‘¢ä¸ªè¾¹ç•Œæ·»åŠ åˆ°ç‰©ç†ä¸–ç•Œï¼Œ<code>Node</code>åœ¨è¿™é‡Œèµ·ä¸­ä»‹ä½œç”¨ã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> size = display.size</span><br><span class="line"><span class="keyword">local</span> body = cc.PhysicsBody:createEdgeBox(size,cc.PHYSICSBODY_MATERIAL_DEFAULT,<span class="number">2</span>)</span><br><span class="line"><span class="keyword">local</span> edgeNode = display.newNode()</span><br><span class="line">edgeNode:setPosition(size.width/<span class="number">2</span>,size.height/<span class="number">2</span>)</span><br><span class="line">edgeNode:setPhysicsBody(body)</span><br><span class="line"><span class="built_in">self</span>:addChild(edgeNode)</span><br></pre></td></tr></table></figure>
<p><code>cc.PhysicsBody</code>åŒ…å«å¾ˆå¤šå·¥ç¨‹æ–¹æ³•ï¼Œ<code>createEdgeBox</code>åˆ›å»ºä¸€ä¸ªä¸å—é‡åŠ›å½±å“çš„çŸ©å½¢è¾¹ç•Œ,å‚æ•°å«ä¹‰ä¾æ¬¡æ˜¯:<br>      (1)çŸ©å½¢åŒºåŸŸå¤§å°,è¿™é‡Œè®¾ç½®ä¸ºå±å¹•å¤§å°ã€‚<br>      (2)è®¾ç½®æè´¨,å¯é€‰å‚æ•°,é»˜è®¤ä¸º<code>PHYSICSBODY_ MATERIAL DEFAULT</code>ã€‚<br>      (3)è¾¹çº¿å®½åº¦,å¯é€‰å‚æ•°,é»˜è®¤ä¸º<code>1</code>ã€‚<br>      ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªNode,æŠŠåˆšåˆšåˆ›å»ºçš„bodyé™„åŠ åˆ°Nodeä¸Šï¼Œå¹¶è®¾ç½®å¥½Nodeçš„positionä¸ºå±å¹•ä¸­å¿ƒç‚¹ã€‚æœ€åæŠŠNodeæ·»åŠ åˆ°sceneã€‚<br>      Nodeçš„addChildæ–¹æ³•,åœ¨Cocos2d-x 3. xä¸­æœ‰å¯¹ç‰©ç†bodyåšå¤„ç†,å®ƒä¼šè‡ªåŠ¨æŠŠNodeçš„bodyè®¾ç½®åˆ°sceneçš„PhysicsWorldä¸Šå»ã€‚<br>      PhysicsBodyä¸­çš„å·¥ç¨‹æ–¹æ³•,é’ˆå¯¹å‚æ•°è®¾ç½®çš„bodyå¤§å°ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„PhysicsBodyå’Œä¸€ä¸ªPhysicsShape, è¿™ä¹Ÿæ˜¯é€šå¸¸æƒ…å†µä¸‹,ç›´æ¥ä½¿ç”¨ç‰©ç†å¼•æ“åˆ›å»ºä¸€ä¸ªbodyéœ€è¦åšçš„äº‹æƒ…ã€‚Cocos2d-x 3. xçš„Physics Integration æå¤§åœ°ç®€åŒ–äº†ä½¿ç”¨ç‰©ç†å¼•æ“çš„ä»£ç é‡ã€‚</p>
<h3 id="åˆ›å»ºå—é‡åŠ›ä½œç”¨çš„sprite"><a href="#åˆ›å»ºå—é‡åŠ›ä½œç”¨çš„sprite" class="headerlink" title="åˆ›å»ºå—é‡åŠ›ä½œç”¨çš„sprite"></a>åˆ›å»ºå—é‡åŠ›ä½œç”¨çš„sprite</h3><p> åœ¨Cocos2d-x 3.0ä¸­åˆ›å»ºä¸€ä¸ªå—é‡åŠ›ä½œç”¨çš„Spriteä¹Ÿå¾ˆç®€å•ã€‚é¦–å…ˆæ¥çœ‹ä»£ç :</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> oneSprite = display.newSprite(<span class="string">&quot;game/basketball/image/basketball.png&quot;</span>)</span><br><span class="line"><span class="comment">-- local oneBody = cc.PhysicsBody:createBox(oneSprite:getContentSize(),cc.PHYSICSBODY_MATERIAL_DEFAULT,cc.p(0,0))  --çŸ©å½¢åˆšä½“</span></span><br><span class="line"><span class="keyword">local</span> oneBody = cc.PhysicsBody:createCircle(<span class="number">25</span>,cc.PHYSICSBODY_MATERIAL_DEFAULT,cc.p(<span class="number">0</span>,<span class="number">0</span>))      <span class="comment">--åœ†å½¢åˆšä½“   </span></span><br><span class="line">oneBody:setContactTestBitmask(<span class="number">0xFFFFFFFF</span>)</span><br><span class="line">oneBody:applyImpulse(cc.p(<span class="number">0</span>,<span class="number">10000</span>))</span><br><span class="line">oneSprite:setPhysicsBody(oneBody)</span><br><span class="line">oneSprite:setPosition(x,y)</span><br><span class="line"><span class="built_in">self</span>:addChild(oneSprite)</span><br><span class="line"><span class="comment">--onBody:setGravityEnable(false)  --åˆšä½“ä¸å—é‡åŠ›ä½œç”¨</span></span><br></pre></td></tr></table></figure>
<p> é¦–å…ˆåˆ›å»º-ä¸€ä¸ª<code>sprite</code>,ç„¶åç”¨<code>cc.PhysicsBody:createBox()</code>åˆ›å»ºä¸€ä¸ªçŸ©å½¢çš„bodyé™„åŠ åœ¨spriteä¸Šã€‚<code>createBox</code> æ¥å—ä¸‰ä¸ªå‚æ•°å¦‚ä¸‹:<br>       (1)å‚æ•°1,<code>cc. size</code>ç±»å‹,è¡¨ç¤ºçŸ©å½¢çš„é•¿å®½ã€‚<br>       (2)å‚æ•°2,<code>cc.PhysicsMaterial</code>ç±»å‹ï¼Œè¡¨ç¤ºç‰©ç†æè´¨å±æ€§ï¼Œå¯é€‰å‚æ•°ï¼Œé»˜è®¤ä¸º<code>cc. PHYSICSBODY MATERIAL DEFAULT</code>ã€‚æ‰‹åŠ¨åˆ›å»ºæè´¨æ–¹æ³•å¦‚ä¸‹:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">cc. PhysicsMaterial(density, restitution, friction)</span><br></pre></td></tr></table></figure>
<p> å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå¯†åº¦,ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºåå¼¹åŠ›,ç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºæ‘©æ“¦åŠ›ã€‚<br>(3)å‚æ•°3,cc.pç±»å‹,è¡¨ç¤ºbodyä¸ä¸­å¿ƒç‚¹çš„åç§»é‡,å¯é€‰å‚æ•°,é»˜è®¤ä¸ºcc. p(0,0)ã€‚ç±»ä¼¼åœ°,å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•åˆ›å»ºåœ†å½¢body:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">cc. PhysicsBody:createCircle(radius,material,offset)</span><br></pre></td></tr></table></figure>
<p>ä¸åŒäºçŸ©å½¢çš„åˆ›å»ºï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›­çš„åŠå¾„ï¼Œç¬¬äºŒã€ä¸‰ä¸ªå‚æ•°çš„ä½œç”¨åŒ<code>createBox</code>ä¸€æ ·ã€‚</p>
<h3 id="ç¢°æ’æ£€æµ‹"><a href="#ç¢°æ’æ£€æµ‹" class="headerlink" title="ç¢°æ’æ£€æµ‹"></a>ç¢°æ’æ£€æµ‹</h3><p>åœ¨Cocos2d-x ä¸­ï¼Œäº‹ä»¶æ´¾å‘æœºåˆ¶åšäº†é‡æ„ï¼Œæ‰€æœ‰äº‹ä»¶å‡ç”±äº‹ä»¶æ´¾å‘å™¨ç»Ÿä¸€ç®¡ç†ã€‚ç‰©ç†å¼•æ“çš„ç¢°æ’äº‹ä»¶ä¹Ÿä¸ä¾‹å¤–ï¼Œä¸‹é¢çš„ä»£ç æ³¨å†Œç¢°æ’beginå›è°ƒå‡½æ•°ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--ç›‘å¬ç¢°æ’</span></span><br><span class="line">    <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onContactBegin</span><span class="params">(contact)</span></span></span><br><span class="line">        <span class="keyword">local</span> tag = contact:getShapeA():getBody():getNode():getTag()</span><br><span class="line">        <span class="comment">-- print(tag)     --ç¢°æ’åçš„å›è°ƒäº‹ä»¶</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> contactListener = cc.EventListenerPhysicsContact:<span class="built_in">create</span>()</span><br><span class="line">    contactListener:registerScriptHandler(onContactBegin,cc.Handler.EVENT_PHYSICS_CONTACT_BEGIN)</span><br><span class="line">    <span class="keyword">local</span> eventDispatcher = cc.Director:getInstance():getEventDispatcher()</span><br><span class="line">    eventDispatcher:addEventListenerWithFixedPriority(contactListener,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>ç¢°æ’æ£€æµ‹çš„æ‰€æœ‰äº‹ä»¶ç”±<code>cc.EventListenerPhysicsContact</code>çš„å®ä¾‹æ¥ç›‘å¬,è¿™äº›äº‹ä»¶æœ‰å¦‚ä¸‹å‡ ç±»ã€‚<br>(1) <code>cc. Handler. EVENT_ PHYSICS_ _CONTACT_ BEGIN</code>,åœ¨ç¢°æ’åˆšå‘ç”Ÿæ—¶,è§¦å‘è¿™ä¸ªäº‹ä»¶,å¹¶ä¸”åœ¨æ­¤æ¬¡ç¢°æ’ä¸­åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚å¯ä»¥é€šè¿‡è¿”å›<code>true</code> æˆ–è€…<code>false</code> æ¥å†³å®šç‰©ä½“æ˜¯å¦å‘ç”Ÿç¢°æ’ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“è¿™ä¸ªäº‹ä»¶çš„å›è°ƒå‡½æ•°è¿”å›<code>flase</code> æ—¶, <code>EVENT _ PHYSICS_CONTACT_ PRESOLVE</code>å’Œ<code>EVENT_ PHYSICS_ CONTACT_ POSTSOLVE</code> å°†ä¸ä¼šè¢«è§¦å‘,ä½†<code>EVENT_ PHYSICS_ CONTACT_ SEPERATE</code>å¿…å®šä¼šè§¦å‘ã€‚<br>(2) <code>cc. Handler. EVENT_ PHYSICS_ CONTACT_ PRESOLVE</code>, å‘ç”Ÿåœ¨ç¢°æ’çš„æ¯ä¸ª<code>step</code>,å¯ä»¥é€šè¿‡è°ƒç”¨<code>cc.PhysicsContactPreSolve</code>çš„æˆå‘˜å‡½æ•°æ¥æ”¹å˜ç¢°æ’å¤„ç†çš„ä¸€äº›å‚æ•°è®¾å®š,æ¯”å¦‚å¼¹åŠ›å’Œé˜»åŠ›ç­‰ã€‚åŒæ ·å¯ä»¥é€šè¿‡è¿”å›<code>true</code>æˆ–è€…<code>false</code>æ¥å†³å®šç‰©ä½“æ˜¯å¦å‘ç”Ÿç¢°æ’ã€‚<br>(3)<code> cc. Handler. EVENT_ PHYSICS_ CONTACT_ POSTSOLVE</code>,å‘ç”Ÿåœ¨ç¢°æ’è®¡ç®—å®Œæ¯•çš„æ¯ä¸ª<code>step</code>,å¯ä»¥åœ¨æ­¤åšä¸€äº›ç¢°æ’çš„åç»­å¤„ç†,æ¯”å¦‚å®‰å…¨çš„ç§»é™¤æŸä¸ªç‰©ä½“ç­‰ã€‚<br> (4) <code>cc. Handler. EVENT_ PHYSICS_ CONTACT_ SEPERATE</code>,å‘ç”Ÿåœ¨ç¢°æ’ç»“æŸä¸¤ç‰©ä½“åˆ†ç¦»æ—¶,åŒæ ·åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚å®ƒä¸<code>onContactBegin</code>å¿…å®šæ˜¯æˆå¯¹å‡ºç°çš„ã€‚<br> ç›‘å¬å™¨è®¾ç½®å®Œæ¯•,éœ€è¦åŠ å…¥åˆ°å¼•æ“å¯¼æ¼”çš„äº‹ä»¶åˆ†å‘å™¨ä¸­ã€‚<br> é»˜è®¤æƒ…å†µä¸‹,ç‰©ç†å¼•æ“ä¸­çš„ç‰©ä½“éƒ½ä¸å‘å‡ºç¢°æ’äº‹ä»¶,ä¹Ÿå°±æ˜¯ä¸Šé¢çš„ä»£ç ä¸­çš„<code>onContactBegin</code>æ°¸è¿œä¸ä¼šè°ƒç”¨åˆ°ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,é¦–å…ˆéœ€è¦äº†è§£<code>cc. PhysicsBody</code>çš„ä¸‰ä¸ªmaskã€‚<br>  (1) <code>CategoryBitmask body</code>,ç±»åˆ«æ©ç ,32ä½æ•´å‹,ä¹Ÿå°±æ˜¯å¯ä»¥æœ‰32 ä¸ªä¸åŒçš„ç±»åˆ«ã€‚é»˜è®¤å€¼ä¸º<code>0xFFFFFFFF</code>ã€‚<br>  (2) <code>ContactTestBitmask</code>,å½“ä¸¤ä¸ªç‰©ä½“æ¥è§¦æ—¶,ç”¨ä¸€ä¸ªç‰©ä½“çš„<code>CategoryBitmask</code>ä¸å¦ä¸€.ä¸ªç‰©ä½“çš„<code>ContactTestBitmask</code>åšé€»è¾‘<code>ä¸</code>è¿ç®—,ä¸ä¸º0æ—¶å¼•æ“æ‰ä¼šæ–°å»º<code>PhysicsContact</code>å¯¹è±¡,å‘é€ç¢°æ’äº‹ä»¶ã€‚<code>ContactTestBitmask</code>çš„è®¾è®¡æ˜¯ä¸ºäº†ä¼˜åŒ–æ€§èƒ½,å¹¶ä¸æ˜¯æ‰€æœ‰ç‰©ä½“ä¹‹é—´çš„ç¢°æ’æˆ‘ä»¬éƒ½å…³å¿ƒ,æ‰€ä»¥è¿™ä¸ª<code>ContactTestBitmask</code>çš„é»˜è®¤å€¼ä¸º<code>0x00000000</code>ã€‚<br>  (3)<code>CollisionBitmask</code>åˆšä½“ç¢°æ’æ©ç ,å½“ä¸¤ä¸ªç‰©ä½“æ¥è§¦å,ç”¨â€“ä¸ªç‰©ä½“çš„<code>CollisionBitmask</code>ä¸å¦ä¸€ä¸ªç‰©ä½“çš„<code>CategoryBitmask</code>åšé€»è¾‘<code>ä¸</code>è¿ç®—,ä¸ä¸º0æ—¶æ‰èƒ½å‘ç”Ÿåˆšä½“ç¢°æ’,é»˜è®¤å€¼ä¸º<code>0xFFFFFFFF</code>ã€‚<br> ä¸Šé¢çš„è§£é‡Šè¯´æ˜äº†æ¯ä¸ªæ©ç çš„ä½œç”¨,è€Œæ©ç ä¹‹é—´çš„ç›¸äº’ä½œç”¨å¯å½’çº³å¦‚ä¸‹:<br> (1)<code>CategoryBitmask</code>,æ˜¯å…¶ä»–ä¸¤ä¸ªæ©ç æ¯”è¾ƒçš„åŸºç¡€ã€‚<br> (2) <code>CategoryBitmask &amp; ContactTestBitmask</code>,å†³å®šæ˜¯å¦å‘é€äº‹ä»¶æ¶ˆæ¯ã€‚<br> (3) <code>CategoryBitmask &amp; CollisionBitmask</code>,å†³å®šæ˜¯å¦äº§ç”Ÿåˆšä½“åå¼¹æ•ˆæœã€‚<br> (4) <code>ContactTestBitmask</code>å’Œ<code>CollisionBitmask</code>,äº’ç›¸ä¹‹é—´æ²¡æœ‰è”ç³»ã€‚</p>
<h3 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h3><blockquote>
<p>ä¸‹é¢æ˜¯main.luaæ–‡ä»¶çš„å®Œæ•´ä»£ç ï¼Œå•å‡»å±å¹•ä»»æ„ä¸€ç‚¹ä¼šåˆ›å»ºä¸€ä¸ªç²¾çµï¼Œç²¾çµä¹‹é—´ç›¸äº’ç¢°æ’åäº§ç”Ÿå›è°ƒäº‹ä»¶ã€‚</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> MainScene = class (<span class="string">&quot;MainScene&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">return</span> display.newScene(<span class="string">&quot;MainScene&quot;</span>,&#123;physics = <span class="number">2</span>&#125;)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:ctor</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">self</span>:getPhysicsWorld():setGravity(cc.p(<span class="number">0</span>,<span class="number">-100</span>))    <span class="comment">--é‡åŠ›</span></span><br><span class="line">    <span class="built_in">self</span>:getPhysicsWorld():setDebugDrawMask(cc.PhysicsWorld.DEBUGDRAW_ALL)</span><br><span class="line">    <span class="keyword">local</span> size = display.size</span><br><span class="line">    <span class="keyword">local</span> body = cc.PhysicsBody:createEdgeBox(size,cc.PHYSICSBODY_MATERIAL_DEFAULT,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">local</span> edgeNode = display.newNode()</span><br><span class="line">    edgeNode:setPosition(size.width/<span class="number">2</span>,size.height/<span class="number">2</span>)</span><br><span class="line">    edgeNode:setPhysicsBody(body)</span><br><span class="line">    <span class="built_in">self</span>:addChild(edgeNode)</span><br><span class="line">    <span class="comment">--ç›‘å¬ç¢°æ’</span></span><br><span class="line">    <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onContactBegin</span><span class="params">(contact)</span></span></span><br><span class="line">        <span class="keyword">local</span> tag = contact:getShapeA():getBody():getNode():getTag()</span><br><span class="line">        <span class="comment">-- print(tag)     --ç¢°æ’åçš„å›è°ƒäº‹ä»¶</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> contactListener = cc.EventListenerPhysicsContact:<span class="built_in">create</span>()</span><br><span class="line">    contactListener:registerScriptHandler(onContactBegin,cc.Handler.EVENT_PHYSICS_CONTACT_BEGIN)</span><br><span class="line">    <span class="keyword">local</span> eventDispatcher = cc.Director:getInstance():getEventDispatcher()</span><br><span class="line">    eventDispatcher:addEventListenerWithFixedPriority(contactListener,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">self</span>:getPhysicsWorld():setDebugDrawMask(cc.PhysicsWorld.DEBUGDRAW_ALL)</span><br><span class="line">    <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onTouchBegan</span><span class="params">( touch, event )</span></span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>  </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onTouchEnded</span><span class="params">( touch, event )</span></span></span><br><span class="line">        <span class="keyword">local</span> location = touch:getLocation()   <span class="comment">--è·å–é¼ æ ‡çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">local</span> event_x = location[<span class="string">&quot;x&quot;</span>] <span class="keyword">or</span> <span class="number">0</span>      </span><br><span class="line">        <span class="keyword">local</span> event_y = location[<span class="string">&quot;y&quot;</span>] <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line">        <span class="built_in">self</span>:addSprite(event_x,event_y)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onTouchMoved</span><span class="params">(touch, event)</span></span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> listener1 = cc.EventListenerTouchOneByOne:<span class="built_in">create</span>()  <span class="comment">--åˆ›å»ºä¸€ä¸ªå•ç‚¹äº‹ä»¶ç›‘å¬</span></span><br><span class="line">    listener1:setSwallowTouches(<span class="literal">false</span>)  <span class="comment">--æ˜¯å¦å‘ä¸‹ä¼ é€’</span></span><br><span class="line">    listener1:registerScriptHandler(onTouchBegan,cc.Handler.EVENT_TOUCH_BEGAN )</span><br><span class="line">    listener1:registerScriptHandler(onTouchMoved,cc.Handler.EVENT_TOUCH_MOVED )</span><br><span class="line">    listener1:registerScriptHandler(onTouchEnded,cc.Handler.EVENT_TOUCH_ENDED )</span><br><span class="line">    <span class="keyword">local</span> eventDispatcher = <span class="built_in">self</span>:getEventDispatcher() </span><br><span class="line">    eventDispatcher:addEventListenerWithSceneGraphPriority(listener1, <span class="built_in">self</span>) <span class="comment">--åˆ†å‘ç›‘å¬äº‹ä»¶</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:addSprite</span><span class="params">(x,y)</span></span></span><br><span class="line">    <span class="keyword">local</span> oneSprite = display.newSprite(<span class="string">&quot;game/basketball/image/basketball.png&quot;</span>)</span><br><span class="line">    <span class="comment">-- local oneBody = cc.PhysicsBody:createBox(oneSprite:getContentSize(),cc.PHYSICSBODY_MATERIAL_DEFAULT,cc.p(0,0))  --çŸ©å½¢åˆšä½“</span></span><br><span class="line">    <span class="keyword">local</span> oneBody = cc.PhysicsBody:createCircle(<span class="number">25</span>,cc.PHYSICSBODY_MATERIAL_DEFAULT,cc.p(<span class="number">0</span>,<span class="number">0</span>))      <span class="comment">--åœ†å½¢åˆšä½“   </span></span><br><span class="line">    oneBody:setContactTestBitmask(<span class="number">0xFFFFFFFF</span>)</span><br><span class="line">    oneBody:applyImpulse(cc.p(<span class="number">0</span>,<span class="number">10000</span>))</span><br><span class="line">    oneSprite:setPhysicsBody(oneBody)</span><br><span class="line">    oneSprite:setPosition(x,y)</span><br><span class="line">    oneSprite:setTag(<span class="number">101</span>)</span><br><span class="line">    <span class="built_in">self</span>:addChild(oneSprite)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:showWithScene</span><span class="params">(transition, time, more)</span></span></span><br><span class="line">    <span class="built_in">self</span>:setVisible(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">local</span> scene = <span class="built_in">self</span></span><br><span class="line">    display.runScene(scene, transition, <span class="built_in">time</span>, more)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> MainScene</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œä½¿ç”¨	<code>display.newPhysicsScene</code>ä½œä¸ºMainSceneçš„çˆ¶ç±»,åˆ›å»ºä¸€ä¸ªå¸¦ç‰©ç†ä¸–ç•Œçš„MainSceneã€‚<br>åœ¨MainScene:ctorä¸­ä¾æ¬¡åšäº†ä¸‹é¢çš„åˆå§‹åŒ–å·¥ä½œ:<br>(1)ä¿®æ”¹ç‰©ç†ä¸–ç•Œçš„é‡åŠ›,é‡åŠ›æ˜¯ä»cc. p(0,0)åˆ°setGravity()å‚æ•°ç‚¹ä¹‹é—´çš„å‘é‡ã€‚<br>(2)ç”¨<code>cc. PhysicsBody: createEdgeBox</code>åœ¨å±å¹•å››å‘¨åˆ›å»ºç‰©ç†è¾¹ç•Œï¼Œç„¶åé€šè¿‡èŠ‚ç‚¹æ·»åŠ åˆ°åœºæ™¯ä¸­,å®ƒä¸å—é‡åŠ›çš„å½±å“ã€‚<br>(3)æ³¨å†Œ<code>EVENT_ PHYSICS_ CONTACT_ BEGIN</code>äº‹ä»¶çš„å›è°ƒå‡½æ•°ã€‚</p>
<blockquote>
<p>æ³¨: onContactBeginéœ€è¦return true,å¦åˆ™ç‰©ä½“ç¢°æ’åä¸å‘ç”Ÿåˆšä½“åå¼¹ã€‚</p>
</blockquote>
<p>(4)æ‰“å¼€ç‰©ç†ä¸–ç•Œçš„è°ƒè¯•æ¨¡å¼,å¯ä»¥åœ¨å±å¹•ä¸Šçœ‹åˆ°ç‰©ç†è¾¹ç•Œä»¥åŠåˆšä½“çš„æ¡†æ¶ã€‚<br>(5)æ³¨å†Œè§¦æ‘¸äº‹ä»¶,æ¯æ¬¡è§¦æ‘¸äº‹ä»¶åˆ°æ¥éƒ½ä¼šåœ¨è§¦æ‘¸ç‚¹åˆ›å»ºä¸€ä¸ªåˆšä½“ç²¾çµã€‚<br><code>MainScene: addSprite</code>å®Œæˆç²¾çµçš„åˆ›å»ºä»¥åŠåˆå§‹åŒ–:<br>(1)xxxx.pngæ˜¯ä¸ªåœ†å½¢çš„å›¾ç‰‡,é€šè¿‡è¿™ç§å›¾ç‰‡åˆ›å»ºç²¾çµã€‚<br>(2) <code>cc. PhysicsBody: createCircle</code>åˆ›å»ºä¸€ä¸ªåœ†å½¢çš„åˆšä½“,æ³¨æ„åˆ°å®ƒé‡‡ç”¨äº†radiusä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°,è¿™æ ·åˆšä½“å°±èƒ½å®Œå…¨å»åˆå›¾ç‰‡çš„å½¢çŠ¶ã€‚<br>(3)<code>setContactTestBitmask</code>ä¿®æ”¹ç²¾çµçš„æ¥è§¦æ£€æµ‹æ©ç ,è¿™æ ·ç²¾çµä¹‹é—´ç¢°æ’å°±èƒ½å‘å‡ºäº‹ä»¶ã€‚<br>(4)æˆ‘ä»¬è¿˜ç”¨<code>applyImpulse</code>ä¸ºåˆšä½“æ–½åŠ äº†ä¸€ä¸ªå‘ï¼Œä¸Šçš„ç¬æ—¶å†²åŠ›,è¿™æ ·ç²¾çµåˆ›å»ºåä¼šå…ˆå‘ä¸Šé£,å†æ‰è½ä¸‹æ¥ã€‚<code>applyImpulse</code>æ˜¯ä¸ªå¾ˆæœ‰ç”¨çš„æ¥å£,åœ¨ç‰©ç†ä¸–ç•Œä¸­,ç”¨è¿™ä¸ªæ¥å£æ¥æ”¹å˜ç‰©ä½“çš„è¿åŠ¨è½¨è¿¹,è€Œä¸æ˜¯ç”¨ä¼ ç»Ÿçš„<code>setPos</code>,å¦åˆ™ç‰©ç†ä¸–ç•Œçš„è¿åŠ¨å°†ä¸å¯é¢„æœŸã€‚<br>(5)<code>setPhysicsBody</code>æŠŠç‰©ç†åˆšä½“å’Œç²¾çµéƒ½ç»‘å®šåœ¨ä¸€èµ·ã€‚<br>(6)è®¾ç½®ç²¾çµçš„åˆå§‹åæ ‡å¹¶æ·»åŠ åˆ°åœºæ™¯ä¸Šã€‚<br>å¿«é€Ÿå•æœºå±å¹•åˆ›å»ºå¤šä¸ªç²¾çµï¼Œå‘ç°å®ƒä»¬äº’ç›¸å¼¹å¼€äº†ï¼Œè¿™æ˜¯ç”±äºåˆšä½“çš„å¼¹åŠ›ä½œç”¨ï¼Œç„¶åç”±äºå—åˆ°é‡åŠ›çš„å½±å“ï¼Œæœ€ç»ˆä»–ä»¬éƒ½å‡‹è½åˆ°å±å¹•ä¸‹æ–¹ã€‚<br>è®¾ç½®åˆšä½“å±æ€§,å‚æ•°åˆ†åˆ«æ˜¯å¯†åº¦ï¼Œç¢°æ’ç³»æ•°ï¼Œæ‘©æ“¦åŠ›</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">cc.PhysicsMaterial(<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h4><p><img data-src="https://pic.imgdb.cn/item/664341310ea9cb1403bc2fe2.gif" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="æ©ç è¯´æ˜"><a href="#æ©ç è¯´æ˜" class="headerlink" title="æ©ç è¯´æ˜"></a>æ©ç è¯´æ˜</h3><pre><code>  categoryBitmaskï¼š

åˆ†ç±»æ©ç ï¼Œå®šä¹‰äº†ç‰©ä½“å±äºå“ªä¸ªåˆ†ç±»ã€‚åœºæ™¯ä¸­çš„æ¯ä¸ªç‰©ç†åˆšä½“å¯ä»¥è¢«èµ‹å€¼ä¸€ä¸ªå¤šè¾¾32ä½çš„å€¼(å› ä¸ºcategoryBitmaskä¸ºintå‹),æ¯ä¸ªå¯¹åº”32ä½æ©ç ä¸­çš„æ¯ä¸€ä½ï¼Œä½ åœ¨ä½ çš„æ¸¸æˆä¸­å®šä¹‰æ©ç å€¼ã€‚ç»“åˆcollisionBitMaskå’ŒcontactTestBitMaskå±æ€§ï¼Œ ä½ å¯ä»¥å®šä¹‰å“ªäº›ç‰©ç†åˆšä½“ç›¸äº’ä½œç”¨å¹¶ä¸”ä½ çš„æ¸¸æˆä½•æ—¶æ¥å—è¿™äº›ç›¸äº’ä½œç”¨çš„é€šçŸ¥ã€‚é»˜è®¤å€¼ä¸º0xFFFFFFFF(æ‰€æœ‰ä½éƒ½è¢«è®¾ç½®)ã€‚

contactTestBitmaskï¼š

æ¥è§¦æµ‹è¯•æ©ç ï¼Œå®šä¹‰å“ªäº›åˆšä½“åˆ†ç±»å¯ä»¥ä¸æœ¬åˆšä½“äº§ç”Ÿç›¸äº’ä½œç”¨çš„é€šçŸ¥ã€‚å½“ä¸¤ä¸ªåˆšä½“åœ¨åŒä¸€ä¸ªç©ºé—´ï¼Œå³ç‰©ç†ä¸–ç•Œä¸­ï¼Œæ¯ä¸ªåˆšä½“çš„åˆ†ç±»æ©ç ä¼šå’Œå…¶ä»–åˆšä½“çš„æ¥è§¦æµ‹è¯•æ©ç è¿›è¡Œé€»è¾‘ä¸çš„è¿ç®—ã€‚å¦‚æœä»»æ„ä¸€ä¸ªæ¯”è¾ƒç»“æœä¸ºéé›¶å€¼ï¼Œäº§ç”Ÿä¸€ä¸ªPhysicsContactå¯¹è±¡å¹¶ä¸”ä¼ é€’åˆ°ç‰©ç†ä¸–ç•Œåè®®ä¸­ï¼Œè¿™é‡Œåè®®æŒ‡æˆ‘ä»¬çš„ç›‘å¬å™¨å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚ ä¸ºäº†æœ€å¥½çš„æ€§èƒ½ï¼Œä»…è®¾ç½®ä½ æ„Ÿå…´è¶£çš„æ¥è§¦æµ‹è¯•æ©ç ä¸­çš„ä½ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡è®¾ç½®æ¥è§¦æµ‹è¯•æ©ç ï¼Œä½ å¯ä»¥å†³å®šå‘ç”Ÿç¢°æ’åï¼Œå›è°ƒå‡½æ•°æ˜¯å¦æœ‰å“åº”ã€‚é»˜è®¤å€¼ä¸º0x00000000(æ‰€æœ‰ä½éƒ½è¢«æ¸…é™¤)ã€‚

collisionBitmaskï¼š

ç¢°æ’æ©ç ï¼Œå®šä¹‰äº†å“ªäº›ç‰©ç†åˆšä½“åˆ†ç±»å¯ä»¥å’Œè¿™ä¸ªç‰©ç†åˆšä½“å‘ç”Ÿç¢°æ’ã€‚å½“ä¸¤ä¸ªç‰©ç†åˆšä½“ç›¸äº’æ¥è§¦æ—¶ï¼Œå¯èƒ½å‘ç”Ÿç¢°æ’ã€‚è¿™ä¸ªåˆšä½“çš„ç¢°æ’æ©ç å’Œå¦ä¸€ä¸ªåˆšä½“çš„åˆ†ç±»æ©ç è¿›è¡Œé€»è¾‘ä¸è¿ç®—æ¯”è¾ƒã€‚å¦‚æœç»“æœæ˜¯ä¸€ä¸ªéé›¶å€¼ï¼Œè¿™ä¸ªåˆšä½“ä¼šå‘ç”Ÿç¢°æ’ã€‚æ¯ä¸ªåˆšä½“ç‹¬ç«‹é€‰æ‹©æ¥å—ä¸å“ªä¸ªåˆšä½“å‘ç”Ÿç¢°æ’ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨æ­¤æ©ç æ¥å¿½ç•¥é‚£äº›å¯¹äºæœ¬åˆšä½“çš„é€Ÿåº¦æœ‰å½±å“çš„åˆšä½“ç¢°æ’ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥ä½¿ç”¨æ­¤æ©ç ä½¿å¾—æœ¬åˆšä½“ä¸æŸäº›åˆšä½“ç¢°æ’ä¸ä¼šå¯¹æœ¬åˆšä½“äº§ç”Ÿå½±å“ã€‚é»˜è®¤å€¼ä¸º0xFFFFFFFF(æ‰€æœ‰ä½éƒ½è¢«è®¾ç½®)ã€‚

ä»ä¸Šé¢ä¸‰ä¸ªæ©ç çš„è¯´æ˜ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªå°ç»“ã€‚å‡è®¾åˆšä½“Açš„æ¥è§¦æµ‹è¯•æ©ç å’Œç¢°æ’æ©ç å·²çŸ¥ï¼Œåˆšä½“Bçš„åˆ†ç±»æ©ç å†³å®šäº†èƒ½å¦å’ŒAè¿›è¡Œç¢°æ’å’Œåœ¨ç¢°æ’çš„å‰æä¸‹èƒ½å¦å‘å‡ºPhysicsContactå¯¹è±¡è§¦å‘å›è°ƒå‡½æ•°ã€‚å¦‚æœBçš„åˆ†ç±»æ©ç ä¸Açš„ç¢°æ’æ©ç åšé€»è¾‘ä¸è¿ç®—çš„ç»“æœä¸º0ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿç¢°æ’ï¼Œå› æ­¤ä¹Ÿä¸ä¼šç»§ç»­å’ŒAçš„æ¥è§¦æµ‹è¯•æ©ç è¿›è¡Œé€»è¾‘ä¸è¿ç®—ã€‚å¦‚æœBçš„åˆ†ç±»æ©ç ä¸Açš„ç¢°æ’æ©ç åšé€»è¾‘ä¸è¿ç®—çš„ç»“æœé0ï¼Œåˆ™å‘ç”Ÿç¢°æ’ï¼Œå¹¶ä¸”Bçš„åˆ†ç±»æ©ç ç»§ç»­ä¸Açš„æ¥è§¦æµ‹è¯•æ©ç åšé€»è¾‘ä¸è¿ç®—ï¼Œå¦‚æœç»“æœé0ï¼Œåˆ™å‘å‡ºPhysicsContactå¯¹è±¡è§¦å‘å›è°ƒå‡½æ•°ã€‚
</code></pre>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-lua Adding Underline to Text</title>
    <url>/722af58en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Adding an underline to text is essentially drawing a straight line positioned beneath the text.</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Create and return a DrawNode (line) object.</span></span><br><span class="line"><span class="comment">-- @function [parent=#display] newLine</span></span><br><span class="line"><span class="comment">-- @param table point table</span></span><br><span class="line"><span class="comment">-- @param table params with parameters such as border color (borderColor) and border width (borderWidth)</span></span><br><span class="line"><span class="comment">-- @return DrawNode#DrawNode ret (return value: cc.DrawNode) </span></span><br><span class="line"><span class="comment">-- @see ShapeNode</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Create and return a DrawNode (line) object.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Format:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">shape = display.newLine(points_table, [parameters])</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">-- Example: Create a line with a width of 2, red color, from (10,10) to (100,100)</span></span><br><span class="line"><span class="comment">local shape3 = display.newLine(&#123;&#123;10, 10&#125;, &#123;100,100&#125;&#125;,</span></span><br><span class="line"><span class="comment">    &#123;borderColor = cc.c4f(1.0, 0.0, 0.0, 1.0),</span></span><br><span class="line"><span class="comment">    borderWidth = 1&#125;)</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">display.newLine</span><span class="params">(points, params)</span></span></span><br><span class="line">    <span class="keyword">local</span> radius</span><br><span class="line">    <span class="keyword">local</span> borderColor</span><br><span class="line">    <span class="keyword">local</span> scale</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> params <span class="keyword">then</span></span><br><span class="line">        borderColor = cc.c4f(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">        radius = <span class="number">0.5</span></span><br><span class="line">        scale = <span class="number">1.0</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        borderColor = params.borderColor <span class="keyword">or</span> cc.c4f(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">        radius = (params.borderWidth <span class="keyword">and</span> params.borderWidth/<span class="number">2</span>) <span class="keyword">or</span> <span class="number">0.5</span></span><br><span class="line">        scale = checknumber(params.scale <span class="keyword">or</span> <span class="number">1.0</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, p <span class="keyword">in</span> <span class="built_in">ipairs</span>(points) <span class="keyword">do</span></span><br><span class="line">        p = cc.p(p[<span class="number">1</span>] * scale, p[<span class="number">2</span>] * scale)</span><br><span class="line">        points[i] = p</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> drawNode = cc.DrawNode:<span class="built_in">create</span>()</span><br><span class="line">    drawNode:drawSegment(points[<span class="number">1</span>], points[<span class="number">2</span>], radius, borderColor)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> drawNode</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-luaè®¾ç½®èŠ‚ç‚¹å±‚çº§</title>
    <url>/39213.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Cocos2dx-luaå¦‚ä½•è®¾ç½®èŠ‚ç‚¹å±‚çº§</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">node:setLocalZOrder(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>è¯´æ˜ï¼šæ‹¬å·ä¸­çš„æ•°å­—è¶Šå¤§ï¼Œè¡¨ç¤ºå±‚çº§è¶Šé«˜ã€‚é«˜å±‚çº§çš„èŠ‚ç‚¹ä¼šè¦†ç›–åœ¨ä½å±‚çº§èŠ‚ç‚¹ä¸Š</p>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-luaè™šæ‹Ÿæ‘‡æ†æ–¹å‘æ§åˆ¶</title>
    <url>/56592.html</url>
    <content><![CDATA[<p>åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™éƒ½éœ€è¦æ§åˆ¶æ¸¸æˆè§’è‰²çš„ç§»åŠ¨ï¼Œæ¯”å¦‚ç‹è€…è£è€€ä¸­å¯¹è‹±é›„çš„æ§åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªè™šæ‹Ÿæ‘‡æ†æ¥å®ç°</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">æ§åˆ¶å±‚</span></span><br><span class="line"><span class="comment">--]]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> CtrlLayer = class(<span class="string">&#x27;CtrlLayer&#x27;</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">return</span> display.newLayer(<span class="string">&#x27;CtrlLayer&#x27;</span>)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--æ–¹å‘æŒ‰é’®çš„size</span></span><br><span class="line"><span class="keyword">local</span> btn_dir_w = <span class="number">265</span></span><br><span class="line"><span class="keyword">local</span> btn_dir_h = <span class="number">265</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--æ–¹å‘æŒ‰é’®ä½ç½®</span></span><br><span class="line"><span class="keyword">local</span> btn_dir_x = display.width - btn_dir_w - <span class="number">20</span></span><br><span class="line"><span class="keyword">local</span> btn_dir_y = <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--æ–¹å‘æŒ‰é’®çš„ä¸­å¿ƒç‚¹</span></span><br><span class="line"><span class="keyword">local</span> btn_dir_cx = btn_dir_x + btn_dir_w/<span class="number">2</span></span><br><span class="line"><span class="keyword">local</span> btn_dir_cy = btn_dir_y + btn_dir_h/<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--æ–¹å‘æŒ‰é’®ä¸­å¿ƒåœ†åœˆçš„åŠå¾„</span></span><br><span class="line"><span class="keyword">local</span> btn_dir_center_r = <span class="number">50</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="comment">@param linstener éœ€è¦æ¥æ”¶äº‹ä»¶é€šçŸ¥çš„äººï¼Œéœ€è¦å®ç°äº‹ä»¶åˆ—è¡¨ä¸­çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">äº‹ä»¶åˆ—è¡¨ä¸ºï¼š</span></span><br><span class="line"><span class="comment">    setDir(dir) : è®¾ç½®äº†æ–¹å‘</span></span><br><span class="line"><span class="comment">--]]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CtrlLayer:ctor</span><span class="params">(linstener)</span></span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">self</span>.linstener = linstener</span><br><span class="line"></span><br><span class="line">    <span class="built_in">self</span>:pos(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="built_in">self</span>:size(display.width, display.height)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">--æ–¹å‘æŒ‰é’®å›¾ç‰‡ </span></span><br><span class="line">    <span class="keyword">local</span> dirSprite = display.newSprite(<span class="string">&#x27;dir_btn.jpg&#x27;</span>)</span><br><span class="line">    dirSprite:setAnchorPoint(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    dirSprite:pos(btn_dir_x, btn_dir_y)</span><br><span class="line">    dirSprite:addTo(<span class="built_in">self</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">--æ·»åŠ è§¦å±å•ç‚¹äº‹ä»¶</span></span><br><span class="line">    <span class="built_in">self</span>:setTouchEnabled(<span class="literal">true</span>)</span><br><span class="line">    <span class="comment">--å¤šç‚¹è§¦æ§</span></span><br><span class="line">    <span class="comment">--self:setTouchMode(cc.TOUCHES_ALL_AT_ONCE)</span></span><br><span class="line">    <span class="comment">--å•ç‚¹è§¦æ§</span></span><br><span class="line">    <span class="built_in">self</span>:setTouchMode(cc.TOUCHES_ONE_BY_ONE)</span><br><span class="line">    <span class="built_in">self</span>:addNodeEventListener(cc.NODE_TOUCH_EVENT, <span class="function"><span class="keyword">function</span><span class="params">(event)</span></span></span><br><span class="line">        <span class="keyword">if</span> event.name == <span class="string">&#x27;began&#x27;</span> <span class="keyword">then</span></span><br><span class="line">            <span class="comment">--éœ€è¦return trueæ‰èƒ½è®©äº‹ä»¶ç»§ç»­åˆ°move/endedç­‰</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span> </span><br><span class="line">        <span class="keyword">elseif</span> event.name == <span class="string">&#x27;ended&#x27;</span> <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">self</span>:onTouchEnded(event)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--è®¡ç®—æŸç‚¹æ˜¯å¦åœ¨æ–¹å‘æŒ‰é’®èŒƒå›´</span></span><br><span class="line"><span class="comment">--è§„å®šåœ¨æ–¹å‘æŒ‰é’®å¤–å›´æ„æˆçš„çŸ©å½¢ä¸ºæŒ‰é’®çš„è¾¹ç•Œ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CtrlLayer:isInDirBtn</span><span class="params">(x, y)</span></span></span><br><span class="line">    <span class="keyword">if</span> x &gt;= btn_dir_x <span class="keyword">and</span> x &lt;= (btn_dir_x + btn_dir_w) <span class="keyword">and</span> y &gt;= btn_dir_y <span class="keyword">and</span> y &lt;= (btn_dir_y + btn_dir_h) <span class="keyword">then</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span> </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span> </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--è®¡æ•°æŸç‚¹æ˜¯å¦åœ¨æ–¹å‘æŒ‰é’®çš„ä¸­å¿ƒåœ†åœˆå†…</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CtrlLayer:isInDirBtnCenter</span><span class="params">(x, y)</span></span></span><br><span class="line">    <span class="keyword">local</span> tx = <span class="built_in">math</span>.<span class="built_in">abs</span>(x-btn_dir_cx)</span><br><span class="line">    <span class="keyword">local</span> ty = <span class="built_in">math</span>.<span class="built_in">abs</span>(y-btn_dir_cy)</span><br><span class="line">    <span class="keyword">local</span> tlen = <span class="built_in">math</span>.<span class="built_in">sqrt</span>( <span class="built_in">math</span>.<span class="built_in">pow</span>(tx, <span class="number">2</span>) + <span class="built_in">math</span>.<span class="built_in">pow</span>(ty, <span class="number">2</span>) )</span><br><span class="line">    <span class="keyword">return</span> tlen &lt;= btn_dir_center_r</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--è®¡æ•°æŸç‚¹ç›¸å¯¹äºæ–¹å‘æŒ‰é’®çš„ä¸­å¿ƒç‚¹çš„æ–¹å‘</span></span><br><span class="line"><span class="comment">--è§„å®šæ–¹å‘æœ‰up/right/down/left</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CtrlLayer:getDir</span><span class="params">(x, y)</span></span></span><br><span class="line">    <span class="keyword">local</span> dir = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">local</span> tx = <span class="built_in">math</span>.<span class="built_in">abs</span>(x - btn_dir_cx)</span><br><span class="line">    <span class="keyword">local</span> ty = <span class="built_in">math</span>.<span class="built_in">abs</span>(y - btn_dir_cy)</span><br><span class="line">    <span class="keyword">if</span> x &gt; btn_dir_cx <span class="keyword">then</span> </span><br><span class="line">        <span class="keyword">if</span> y &gt; btn_dir_cy <span class="keyword">then</span> </span><br><span class="line">            <span class="keyword">if</span> tx &gt; ty <span class="keyword">then</span> </span><br><span class="line">                dir = <span class="string">&#x27;right&#x27;</span></span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                dir = <span class="string">&#x27;up&#x27;</span></span><br><span class="line">            <span class="keyword">end</span> </span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            <span class="keyword">if</span> tx &gt; ty <span class="keyword">then</span> </span><br><span class="line">                dir = <span class="string">&#x27;right&#x27;</span></span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                dir = <span class="string">&#x27;down&#x27;</span></span><br><span class="line">            <span class="keyword">end</span> </span><br><span class="line">        <span class="keyword">end</span> </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">if</span> y &gt; btn_dir_cy <span class="keyword">then</span> </span><br><span class="line">            <span class="keyword">if</span> tx &gt; ty <span class="keyword">then</span> </span><br><span class="line">                dir = <span class="string">&#x27;left&#x27;</span></span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                dir = <span class="string">&#x27;up&#x27;</span></span><br><span class="line">            <span class="keyword">end</span> </span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            <span class="keyword">if</span> tx &gt; ty <span class="keyword">then</span> </span><br><span class="line">                dir = <span class="string">&#x27;left&#x27;</span></span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                dir = <span class="string">&#x27;down&#x27;</span></span><br><span class="line">            <span class="keyword">end</span> </span><br><span class="line">        <span class="keyword">end</span> </span><br><span class="line">    <span class="keyword">end</span> </span><br><span class="line">    <span class="keyword">return</span> dir </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--è§¦å±ç»“æŸ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CtrlLayer:onTouchEnded</span><span class="params">(event)</span></span></span><br><span class="line">    <span class="keyword">local</span> x, y = event.x, event.y </span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">self</span>:isInDirBtn(x, y) <span class="keyword">then</span> </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">self</span>:isInDirBtnCenter(x, y) <span class="keyword">then</span> </span><br><span class="line">            <span class="keyword">local</span> dir = <span class="built_in">self</span>:getDir(x, y)</span><br><span class="line">            <span class="built_in">self</span>.linstener:setDir(dir)</span><br><span class="line">        <span class="keyword">end</span> </span><br><span class="line">    <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> CtrlLayer </span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå›¾å¦‚ä¸‹<br><img data-src="https://pic.imgdb.cn/item/6643416b0ea9cb1403bc72f0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-lua Set Node Layer</title>
    <url>/39213en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>How to set node layer in Cocos2dx-lua</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">node:setLocalZOrder(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-luaè¿”å›æŒ‡å®šæ–‡ä»¶çš„å¤§å°</title>
    <url>/6deadeef.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>è¿”å›æŒ‡å®šæ–‡ä»¶çš„å¤§å°ï¼Œå¦‚æœå¤±è´¥è¿”å› false</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- @function [parent=#io] filesize</span></span><br><span class="line"><span class="comment">-- @param string path æ–‡ä»¶å®Œå…¨è·¯å¾„</span></span><br><span class="line"><span class="comment">-- @return integer#integer</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">io.filesize</span><span class="params">(path)</span></span></span><br><span class="line">    <span class="keyword">local</span> size = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">local</span> file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">path</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> file <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> current = file:seek()</span><br><span class="line">        size = file:seek(<span class="string">&quot;end&quot;</span>)</span><br><span class="line">        file:seek(<span class="string">&quot;set&quot;</span>, current)</span><br><span class="line">        <span class="built_in">io</span>.<span class="built_in">close</span>(file)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> size</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cocos2dx</tag>
        <tag>lua</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-lua Return Size of a Specified File</title>
    <url>/6deadeefen.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Returns the size of a specified file. If it fails, it returns <code>false</code>.</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- @function [parent=#io] filesize</span></span><br><span class="line"><span class="comment">-- @param string path Full path to the file</span></span><br><span class="line"><span class="comment">-- @return integer#integer</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">io.filesize</span><span class="params">(path)</span></span></span><br><span class="line">    <span class="keyword">local</span> size = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">local</span> file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">path</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> file <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> current = file:seek()</span><br><span class="line">        size = file:seek(<span class="string">&quot;end&quot;</span>)</span><br><span class="line">        file:seek(<span class="string">&quot;set&quot;</span>, current)</span><br><span class="line">        <span class="built_in">io</span>.<span class="built_in">close</span>(file)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> size</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-lua Keyboard Listening</title>
    <url>/84510en.html</url>
    <content><![CDATA[<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>In this guide, we will learn how to implement keyboard event listening using Lua in Cocos2dx. This is essential for controlling game characters or implementing various game controls.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Setting-Up-Keyboard-Event-Listener"><a href="#Setting-Up-Keyboard-Event-Listener" class="headerlink" title="Setting Up Keyboard Event Listener"></a>Setting Up Keyboard Event Listener</h3><p>To enable keyboard event handling, you need to add an event listener for keyboard events. The following code shows how to set this up:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Create a keyboard event listener</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onKeyPressed</span><span class="params">(keyCode, event)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Key Pressed: &quot;</span> .. keyCode)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onKeyReleased</span><span class="params">(keyCode, event)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Key Released: &quot;</span> .. keyCode)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> listener = cc.EventListenerKeyboard:<span class="built_in">create</span>()</span><br><span class="line">listener:registerScriptHandler(onKeyPressed, cc.Handler.EVENT_KEYBOARD_PRESSED)</span><br><span class="line">listener:registerScriptHandler(onKeyReleased, cc.Handler.EVENT_KEYBOARD_RELEASED)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> eventDispatcher = <span class="built_in">self</span>:getEventDispatcher()</span><br><span class="line">eventDispatcher:addEventListenerWithSceneGraphPriority(listener, <span class="built_in">self</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h3><ul>
<li><strong>onKeyPressed</strong>: This function gets called whenever a key is pressed. You can customize it to perform actions like moving a character or jumping.</li>
<li><strong>onKeyReleased</strong>: This function handles actions when a key is released, useful for stopping movements or other behaviors.</li>
</ul>
<h3 id="Common-Use-Cases"><a href="#Common-Use-Cases" class="headerlink" title="Common Use Cases"></a>Common Use Cases</h3><ul>
<li><strong>Character Movement</strong>: Use arrow keys to control the direction of the character.</li>
<li><strong>Game Pause&#x2F;Resume</strong>: Bind a key to pause and resume the game.</li>
<li><strong>Menu Navigation</strong>: Use keyboard shortcuts to navigate through in-game menus.</li>
</ul>
<h3 id="Full-Example-Code"><a href="#Full-Example-Code" class="headerlink" title="Full Example Code"></a>Full Example Code</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> MainScene = class(<span class="string">&quot;MainScene&quot;</span>, cc.<span class="built_in">load</span>(<span class="string">&quot;mvc&quot;</span>).ViewBase)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainScene:onCreate</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">-- Setup keyboard listener</span></span><br><span class="line">    <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onKeyPressed</span><span class="params">(keyCode, event)</span></span></span><br><span class="line">        <span class="keyword">if</span> keyCode == cc.KeyCode.KEY_A <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;A key pressed - Move Left&quot;</span>)</span><br><span class="line">        <span class="keyword">elseif</span> keyCode == cc.KeyCode.KEY_D <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;D key pressed - Move Right&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">onKeyReleased</span><span class="params">(keyCode, event)</span></span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Key Released: &quot;</span> .. keyCode)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> listener = cc.EventListenerKeyboard:<span class="built_in">create</span>()</span><br><span class="line">    listener:registerScriptHandler(onKeyPressed, cc.Handler.EVENT_KEYBOARD_PRESSED)</span><br><span class="line">    listener:registerScriptHandler(onKeyReleased, cc.Handler.EVENT_KEYBOARD_RELEASED)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> eventDispatcher = <span class="built_in">self</span>:getEventDispatcher()</span><br><span class="line">    eventDispatcher:addEventListenerWithSceneGraphPriority(listener, <span class="built_in">self</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> MainScene</span><br></pre></td></tr></table></figure>

<h3 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h3><p>Make sure that your Cocos2dx project is properly configured to support keyboard events. Depending on the platform, some keys may behave differently.</p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>By following the steps in this guide, you should be able to implement keyboard listening in your Cocos2dx-lua project effectively. Feel free to customize the code for more advanced interactions!</p>
]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx_luaé”®ç›˜ç›‘å¬</title>
    <url>/28873.html</url>
    <content><![CDATA[<p>å¼€å‘ç¯å¢ƒï¼šCocos2dx 3.17<br>å¼€å‘è¯­è¨€ï¼šlua<br>è¿™é‡Œç”¨luaå®ç°å¯¹é”®ç›˜çš„ç›‘å¬</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä¸‹é¢ç›´æ¥ä¸Šä»£ç å§</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">keyboardPressed</span><span class="params">(KeyCode,event)</span></span></span><br><span class="line">        <span class="built_in">print</span>(KeyCode)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">keyboardReleased</span><span class="params">(KeyCode,event)</span></span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> listener = cc.EventListenerKeyboard:<span class="built_in">create</span>()  </span><br><span class="line">    listener:registerScriptHandler(keyboardPressed, cc.Handler.EVENT_KEYBOARD_PRESSED)  </span><br><span class="line">    listener:registerScriptHandler(keyboardReleased, cc.Handler.EVENT_KEYBOARD_RELEASED)  </span><br><span class="line">    <span class="keyword">local</span> eventDispatcher = <span class="built_in">self</span>:getEventDispatcher()  </span><br><span class="line">    eventDispatcher:addEventListenerWithSceneGraphPriority(listener,<span class="built_in">self</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dxä¸­Spriteå’ŒImageViewçš„ä½¿ç”¨</title>
    <url>/e883772a.html</url>
    <content><![CDATA[<p>å¼€å‘ç¯å¢ƒï¼š<br>Cocos studio 3.10<br>quick-Cocos2dx 3.7.8<br>windows11</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä½¿ç”¨çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„èŠ‚ç‚¹å±æ€§ï¼Œæ˜¯ç²¾çµSpriteè¿˜æ˜¯å›¾ç‰‡ImageView<br>å› ä¸ºSpriteå’ŒImageViewè®¾ç½®å›¾ç‰‡çš„æ–¹æ³•æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¦‚æœæ˜¯ç”¨ä»£ç åˆ›å»ºçš„ï¼Œé‚£å°±ä¸ç”¨è¯´äº†ï¼Œå¦‚æœæ˜¯ä½¿ç”¨Cocos studioåˆ›å»ºï¼Œå¯ä»¥åœ¨å›¾ç‰‡æ‰€ç¤ºä½ç½®æŸ¥çœ‹å±æ€§ã€‚<br><img data-src="https://s1.ax1x.com/2022/11/21/zQ6Gb6.png" alt="" /><br><img data-src="https://s1.ax1x.com/2022/11/21/zQ6YVK.png" alt="" /></p>
<h2 id="å¼‚åŒ"><a href="#å¼‚åŒ" class="headerlink" title="å¼‚åŒ"></a>å¼‚åŒ</h2><h3 id="å…±åŒç‚¹"><a href="#å…±åŒç‚¹" class="headerlink" title="å…±åŒç‚¹"></a>å…±åŒç‚¹</h3><ul>
<li>Sprite å’ŒImageView éƒ½å¯ä»¥ä½œä¸ºå®¹å™¨æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡</li>
<li>ImageViewå®è´¨ä¸ºä¸€ä¸ªä¹å®«ç²¾çµ</li>
</ul>
<h3 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><ul>
<li>Spriteï¼šç»§æ‰¿è‡ªNodeï¼Œæ˜¯Cocoså½“ä¸­çš„æ¸²æŸ“åŸºç±»</li>
<li>ImageView:ç»§æ‰¿è‡ªWidget,Widgetæ˜¯Cocoså½“ä¸­æ‰€æœ‰UIç»„ä»¶çš„åŸºç±»ã€‚</li>
<li>ImageViewæ‹¥æœ‰UIç»„ä»¶å°è£…å¥½çš„ä¸€äº›åŠŸèƒ½ï¼Œä¾‹å¦‚äº‹ä»¶çš„ç›‘å¬ã€‚</li>
<li>åœ¨å¯¹å›¾ç‰‡ä¸åšç‰¹æ®Šå¤„ç†çš„æƒ…å†µä¸‹ï¼Œç”¨Spriteå’ŒImageViewæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå¦‚æœè¦å¯¹å›¾ç‰‡è¿›è¡Œè¿›ä¸€æ­¥æ“ä½œï¼Œé‚£å°±éœ€è¦æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ã€‚</li>
</ul>
<h2 id="æ›´æ¢å›¾ç‰‡"><a href="#æ›´æ¢å›¾ç‰‡" class="headerlink" title="æ›´æ¢å›¾ç‰‡"></a>æ›´æ¢å›¾ç‰‡</h2><h3 id="Sprite"><a href="#Sprite" class="headerlink" title="Sprite"></a>Sprite</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> frame = cc.SpriteFrameCache:getInstance():getSpriteFrame(pathImg)</span><br><span class="line"><span class="keyword">if</span> frame <span class="keyword">then</span> </span><br><span class="line">    sprite:setSpriteFrame (frame) <span class="comment">-- è¿™é‡Œåˆ¤æ–­å¯ä»¥ä¸ç”¨åŠ ï¼Œçœ‹ä¸ªäººä¹ æƒ¯ï¼ŒåŠ ä¸ªåˆ¤æ–­å¯ä»¥åˆ¤å®šå›¾ç‰‡æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ImageView:loadTexture(pathImg)</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨å›¾é›†"><a href="#ä½¿ç”¨å›¾é›†" class="headerlink" title="ä½¿ç”¨å›¾é›†"></a>ä½¿ç”¨å›¾é›†</h2><p>ä¸Šé¢ä»‹ç»çš„æ–¹æ³•æ˜¯ä½¿ç”¨å•å¼ å›¾ç‰‡ï¼Œä¸‹é¢ä»‹ç»ä½¿ç”¨å›¾é›†çš„æ–¹æ³•<br>é¦–å…ˆåŠ è½½å›¾é›†</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">display.addSpriteFrames(<span class="string">&quot;img.plist&quot;</span>,<span class="string">&quot;img.png&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Sprite-1"><a href="#Sprite-1" class="headerlink" title="Sprite"></a>Sprite</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">sprite:setSpriteFrame(cc.SpriteFrameCache:getInstance():getSpriteFrame(<span class="string">&quot;imgName.png&quot;</span>))  <span class="comment">-- å›¾é›†ä¸­å›¾ç‰‡çš„åå­—</span></span><br></pre></td></tr></table></figure>
<h3 id="ImageView-1"><a href="#ImageView-1" class="headerlink" title="ImageView"></a>ImageView</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ImageView:loadTexture(imgName,<span class="number">1</span>) <span class="comment">--åé¢å‚æ•°1è¡¨ç¤ºä½¿ç”¨å›¾é›†ä¸­çš„å›¾ç‰‡</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
        <tag>Sprite</tag>
        <tag>ImageView</tag>
      </tags>
  </entry>
  <entry>
    <title>Usage of Sprite and ImageView in Cocos2dx</title>
    <url>/e883772aen.html</url>
    <content><![CDATA[<p>Development Environment:<br>Cocos Studio 3.10<br>quick-Cocos2dx 3.7.8<br>Windows 11</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>When using Cocos2dx, be sure to pay attention to the node property: whether it is a Sprite or an ImageView. The methods for setting images in Sprite and ImageView are different. If created via code, there is no issue. However, if created using Cocos Studio, you can check the properties at the imageâ€™s location.<br><img data-src="https://s1.ax1x.com/2022/11/21/zQ6Gb6.png" alt="" /><br><img data-src="https://s1.ax1x.com/2022/11/21/zQ6YVK.png" alt="" /></p>
<h2 id="Similarities-and-Differences"><a href="#Similarities-and-Differences" class="headerlink" title="Similarities and Differences"></a>Similarities and Differences</h2><h3 id="Similarities"><a href="#Similarities" class="headerlink" title="Similarities"></a>Similarities</h3><ul>
<li>Both Sprite and ImageView can act as containers to display an image.</li>
<li>ImageView is essentially a nine-slice sprite.</li>
</ul>
<h3 id="Differences"><a href="#Differences" class="headerlink" title="Differences"></a>Differences</h3><ul>
<li><strong>Sprite</strong>: Inherits from Node and is the rendering base class in Cocos.</li>
<li><strong>ImageView</strong>: Inherits from Widget, which is the base class for all UI components in Cocos.</li>
<li>ImageView comes with built-in UI features, such as event listening.</li>
<li>When no special image processing is needed, there is no difference between using Sprite and ImageView. However, for further image manipulation, choose according to the situation.</li>
</ul>
<h2 id="Changing-Images"><a href="#Changing-Images" class="headerlink" title="Changing Images"></a>Changing Images</h2><h3 id="Sprite"><a href="#Sprite" class="headerlink" title="Sprite"></a>Sprite</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> frame = cc.SpriteFrameCache:getInstance():getSpriteFrame(pathImg)</span><br><span class="line"><span class="keyword">if</span> frame <span class="keyword">then</span> </span><br><span class="line">    sprite:setSpriteFrame(frame) <span class="comment">-- The condition is optional; adding it can help determine if the image exists.</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ImageView:loadTexture(pathImg)</span><br></pre></td></tr></table></figure>

<h3 id="Using-Atlas"><a href="#Using-Atlas" class="headerlink" title="Using Atlas"></a>Using Atlas</h3><p>The methods above demonstrate the use of single images. Now, letâ€™s introduce how to use images from an atlas. First, load the atlas:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">display.addSpriteFrames(<span class="string">&quot;img.plist&quot;</span>,<span class="string">&quot;img.png&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Sprite-1"><a href="#Sprite-1" class="headerlink" title="Sprite"></a>Sprite</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">sprite:setSpriteFrame(cc.SpriteFrameCache:getInstance():getSpriteFrame(<span class="string">&quot;imgName.png&quot;</span>))  <span class="comment">-- Name of the image in the atlas</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="ImageView-1"><a href="#ImageView-1" class="headerlink" title="ImageView"></a>ImageView</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ImageView:loadTexture(imgName, <span class="number">1</span>) <span class="comment">-- The second parameter 1 indicates the use of an image from the atlas</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
        <tag>Sprite</tag>
        <tag>ImageView</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dxä½¿ç”¨å¸§åŠ¨ç”»</title>
    <url>/33452.html</url>
    <content><![CDATA[<p>å¼€å‘ç¯å¢ƒï¼šCocos2dx 3.17<br>å¼€å‘è¯­è¨€ï¼šlua</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨Cocos2d_xå¼€å‘æ¸¸æˆçš„æ—¶å€™éƒ½æœ‰ä¸¤ç§åšUIçš„æ–¹å¼ï¼Œä¸€ç§æ˜¯ç”¨ä»£ç æ‰‹å†™ï¼Œä¸€ç§æ˜¯ç”¨Cocos studioåšUIï¼Œå¸§åŠ¨ç”»ä¹Ÿä¸€æ ·ï¼Œå¯ä»¥ç”¨è¿™é‡Œä¸¤ç§æ–¹å¼ï¼Œä¸‹é¢ä»‹ç»åšä¸»å¸¸ç”¨çš„ä¸¤ç§æ–¹æ³•ã€‚</p>
<span id="more"></span>

<h3 id="ä»£ç æ‰‹å†™å¸§åŠ¨ç”»"><a href="#ä»£ç æ‰‹å†™å¸§åŠ¨ç”»" class="headerlink" title="ä»£ç æ‰‹å†™å¸§åŠ¨ç”»"></a>ä»£ç æ‰‹å†™å¸§åŠ¨ç”»</h3><blockquote>
<p>åšä¸»è¿™é‡Œæ˜¯å…ˆå°†ç”¨æ¥åšå¸§åŠ¨ç”»çš„å›¾ç‰‡åˆæˆplisåˆå›¾ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç²¾çµã€‚ç”¨pliståˆå›¾ä¸­çš„å›¾ç‰‡ä¸æ–­çš„å»æ›¿æ¢åŸæ¥ç²¾çµçš„å›¾ç‰‡ã€‚</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">cc.SpriteFrameCache:getInstance():addSpriteFrames(<span class="string">&quot;tupian.plist&quot;</span>)</span><br><span class="line">           <span class="keyword">local</span> Circle_sp = cc.Sprite:createWithSpriteFrameName(<span class="string">&quot;1.png&quot;</span>)</span><br><span class="line">           Circle_sp:move(a_x,a_y)</span><br><span class="line">           Circle_sp:addTo(<span class="built_in">self</span>._lr , <span class="number">1</span>)</span><br><span class="line">           <span class="keyword">local</span> animation = cc.Animation:<span class="built_in">create</span>()  </span><br><span class="line">           <span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">6</span> <span class="keyword">do</span>  </span><br><span class="line">               <span class="keyword">local</span> _frame = cc.SpriteFrameCache:getInstance():getSpriteFrame( i ..<span class="string">&quot;.png&quot;</span>) </span><br><span class="line">               <span class="keyword">if</span>  _frame <span class="keyword">then</span></span><br><span class="line">                   animation:addSpriteFrame(_frame) </span><br><span class="line">               <span class="keyword">end</span></span><br><span class="line">           <span class="keyword">end</span>  </span><br><span class="line">           animation:setDelayPerUnit(<span class="number">0.08</span>)             <span class="comment">--è®¾ç½®ä¸¤ä¸ªå¸§æ’­æ”¾æ—¶é—´                  </span></span><br><span class="line">           animation:setRestoreOriginalFrame(<span class="literal">false</span>)    <span class="comment">--åŠ¨ç”»æ‰§è¡Œåè¿˜åŸåˆå§‹çŠ¶æ€              </span></span><br><span class="line">           <span class="keyword">local</span> action = cc.Animate:<span class="built_in">create</span>(animation) </span><br><span class="line">           <span class="keyword">local</span> hide = cc.CallFunc:<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">               <span class="keyword">local</span> fadein = cc.FadeIn:<span class="built_in">create</span>(<span class="number">0.08</span>)</span><br><span class="line">               <span class="keyword">local</span> fadeout = cc.FadeOut:<span class="built_in">create</span>(<span class="number">0.08</span>)</span><br><span class="line">               <span class="keyword">local</span> delay = cc.DelayTime:<span class="built_in">create</span>(<span class="number">0.08</span>)</span><br><span class="line">               Circle_sp:runAction(cc.Sequence:<span class="built_in">create</span>(fadein,delay,fadeout))</span><br><span class="line">           <span class="keyword">end</span>)     </span><br><span class="line">           <span class="keyword">local</span> delay = cc.DelayTime:<span class="built_in">create</span>(<span class="number">0.5</span>)             </span><br><span class="line">           Circle_sp:runAction(cc.Sequence:<span class="built_in">create</span>(action,delay,hide))  </span><br></pre></td></tr></table></figure>

<h3 id="ç”¨Cocos-studio-åšå¸§åŠ¨ç”»"><a href="#ç”¨Cocos-studio-åšå¸§åŠ¨ç”»" class="headerlink" title="ç”¨Cocos studio åšå¸§åŠ¨ç”»"></a>ç”¨Cocos studio åšå¸§åŠ¨ç”»</h3><blockquote>
<p>éœ€è¦è‡ªå·±åœ¨Cocos studio ä¸Šæå‰åšå¥½ç›¸åº”çš„å¸§åŠ¨ç”»</p>
</blockquote>
<a href="https://lengmo714.top/19422.html" title="" target="">è·³è½¬é“¾æ¥,</a>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Using Frame Animation in Cocos2dx</title>
    <url>/33452en.html</url>
    <content><![CDATA[<p>Development Environment: Cocos2dx 3.17<br>Development Language: Lua</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Generally, when developing games using Cocos2d-x, there are two ways to create UI: hand-coding or using Cocos Studio. The same applies to frame animation. Here, Iâ€™ll introduce two common methods.</p>
<span id="more"></span>

<h3 id="Hand-Coding-Frame-Animation"><a href="#Hand-Coding-Frame-Animation" class="headerlink" title="Hand-Coding Frame Animation"></a>Hand-Coding Frame Animation</h3><blockquote>
<p>Here, the author first combines the images for frame animation into a sprite sheet (plist), then creates a sprite. The images from the sprite sheet are used to continuously replace the original sprite image.</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">cc.SpriteFrameCache:getInstance():addSpriteFrames(<span class="string">&quot;tupian.plist&quot;</span>)</span><br><span class="line"><span class="keyword">local</span> Circle_sp = cc.Sprite:createWithSpriteFrameName(<span class="string">&quot;1.png&quot;</span>)</span><br><span class="line">Circle_sp:move(a_x, a_y)</span><br><span class="line">Circle_sp:addTo(<span class="built_in">self</span>._lr, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">local</span> animation = cc.Animation:<span class="built_in">create</span>()  </span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">6</span> <span class="keyword">do</span>  </span><br><span class="line">    <span class="keyword">local</span> _frame = cc.SpriteFrameCache:getInstance():getSpriteFrame(i .. <span class="string">&quot;.png&quot;</span>) </span><br><span class="line">    <span class="keyword">if</span> _frame <span class="keyword">then</span></span><br><span class="line">        animation:addSpriteFrame(_frame) </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>  </span><br><span class="line">animation:setDelayPerUnit(<span class="number">0.08</span>)             <span class="comment">-- Set frame playback duration                 </span></span><br><span class="line">animation:setRestoreOriginalFrame(<span class="literal">false</span>)    <span class="comment">-- Restore to initial state after animation              </span></span><br><span class="line"><span class="keyword">local</span> action = cc.Animate:<span class="built_in">create</span>(animation) </span><br><span class="line"><span class="keyword">local</span> hide = cc.CallFunc:<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> fadein = cc.FadeIn:<span class="built_in">create</span>(<span class="number">0.08</span>)</span><br><span class="line">    <span class="keyword">local</span> fadeout = cc.FadeOut:<span class="built_in">create</span>(<span class="number">0.08</span>)</span><br><span class="line">    <span class="keyword">local</span> delay = cc.DelayTime:<span class="built_in">create</span>(<span class="number">0.08</span>)</span><br><span class="line">    Circle_sp:runAction(cc.Sequence:<span class="built_in">create</span>(fadein, delay, fadeout))</span><br><span class="line"><span class="keyword">end</span>)     </span><br><span class="line"><span class="keyword">local</span> delay = cc.DelayTime:<span class="built_in">create</span>(<span class="number">0.5</span>)             </span><br><span class="line">Circle_sp:runAction(cc.Sequence:<span class="built_in">create</span>(action, delay, hide))  </span><br></pre></td></tr></table></figure>

<h3 id="Creating-Frame-Animation-Using-Cocos-Studio"><a href="#Creating-Frame-Animation-Using-Cocos-Studio" class="headerlink" title="Creating Frame Animation Using Cocos Studio"></a>Creating Frame Animation Using Cocos Studio</h3><blockquote>
<p>Prepare the corresponding frame animation in advance using Cocos Studio.</p>
</blockquote>
<a href="https://lengmo714.top/19422.html" title="" target="">Jump to Link,</a>

]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creator Shader æ‰‘å…‹ç‰Œçš„é€è§†æ•ˆæœ</title>
    <url>/bb4fae33.html</url>
    <content><![CDATA[<p>æˆ‘è¿™é‡Œç”¨çš„æ˜¯Cocos Creator 3.7.2ç‰ˆæœ¬ï¼Œä¸åŒç‰ˆæœ¬å¯èƒ½å­˜åœ¨å·®å¼‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<blockquote>
<p>å› ä¸ºä½¿ç”¨çš„ç¬¬ä¸‰æ–¹å›¾åºŠï¼Œå¯¼è‡´æ–‡ä¸­å›¾ç‰‡ä¸¢å¤±ï¼Œçœ‹æ¥ä»¥åè¿˜æ˜¯å¾—é è°±çš„å›¾åºŠäº†</p>
</blockquote>
<h2 id="é¡¶ç‚¹ç€è‰²å™¨"><a href="#é¡¶ç‚¹ç€è‰²å™¨" class="headerlink" title="é¡¶ç‚¹ç€è‰²å™¨"></a>é¡¶ç‚¹ç€è‰²å™¨</h2><p>å¼€å§‹å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå¯¹å®šç‚¹ç€è‰²å™¨åº”è¯¥æœ‰äº†åŸºæœ¬çš„äº†è§£ï¼Œè¿™é‡Œä¸è¿‡å¤šè¯´æ˜ã€‚<br>è¿™é‡Œæˆ‘ä»¬å…ˆçœ‹ä¸‹Cocos Creatoré»˜è®¤ä½¿ç”¨çš„ç€è‰²å™¨ä»£ç ï¼š<code>builtin-sprite.effect</code>,å¯ä»¥ç›´æ¥åœ¨èµ„æºç®¡ç†å™¨ä¸­æœç´¢</p>
<h3 id="æƒ³è¦è¾¾åˆ°æ•ˆæœï¼Œå…¶å®ä¿®æ”¹å°±æ˜¯æ‰‘å…‹ç‰Œä¸Šè¾¹ç¼˜ä¸¤ä¸ªé¡¶ç‚¹çš„xè½´åæ ‡"><a href="#æƒ³è¦è¾¾åˆ°æ•ˆæœï¼Œå…¶å®ä¿®æ”¹å°±æ˜¯æ‰‘å…‹ç‰Œä¸Šè¾¹ç¼˜ä¸¤ä¸ªé¡¶ç‚¹çš„xè½´åæ ‡" class="headerlink" title="æƒ³è¦è¾¾åˆ°æ•ˆæœï¼Œå…¶å®ä¿®æ”¹å°±æ˜¯æ‰‘å…‹ç‰Œä¸Šè¾¹ç¼˜ä¸¤ä¸ªé¡¶ç‚¹çš„xè½´åæ ‡"></a>æƒ³è¦è¾¾åˆ°æ•ˆæœï¼Œå…¶å®ä¿®æ”¹å°±æ˜¯æ‰‘å…‹ç‰Œä¸Šè¾¹ç¼˜ä¸¤ä¸ªé¡¶ç‚¹çš„xè½´åæ ‡</h3><p>ä½†æ˜¯æƒ³è¦ä¿®æ”¹ï¼Œæœ€èµ·ç å¾—çŸ¥é“ç°åœ¨çš„å€¼ï¼Œåšä¸ªå°æµ‹è¯•çœ‹ä¸€ä¸‹ã€‚è®©é¡¶ç‚¹åæ ‡çš„xå€¼+&#x3D;yå€¼ï¼Œè§‚å¯Ÿxåæ ‡çš„å˜åŒ–è§„å¾‹.<br>å¤åˆ¶ç²˜è´´<code>builtin-sprite.effect</code>æ–‡ä»¶(å¿…é¡»è¦å¤åˆ¶ç²˜è´´ï¼Œç³»ç»Ÿæœ€å¼€å§‹çš„ä¸èƒ½è¢«ä¿®æ”¹)ï¼Œåœ¨å¤åˆ¶å‡ºæ¥çš„æ–‡ä»¶ä¸­æœç´¢<code>vec4 pos = vec4(a_position, 1)</code><br>å¹¶åœ¨è¯¥ä»£ç åé¢æ·»åŠ ä»£ç <code>pos.x += pos.y;</code>,å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vec4 pos = vec4(a_position, 1);</span><br><span class="line">pos.x += pos.y;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œè“è‰²æ¡†åŒºåŸŸæ˜¯ç‰ŒåŸæœ¬æ˜¾ç¤ºçš„è¾¹æ¡†ï¼Œåº•è¾¹çš„xè½´æ²¡æœ‰å˜åŒ–ï¼Œæ‰€ä»¥åº•è¾¹çš„+&#x3D;pos.yè¿™é‡Œçš„yå€¼ä¸º0ã€‚</p>
<p>è°ƒæ•´ä¸‹ç‰Œçš„ä½ç½®ï¼Œè®©ç‰Œçš„å·¦ä¸Šè§’é¡¶ç‚¹å’Œç”»å¸ƒå·¦ä¸Šè§’é¡¶ç‚¹é‡åˆ<br>ä»å›¾ä¸Šå¯ä»¥çœ‹å‡ºï¼Œå½“ç‰Œçš„å·¦ä¸Šè§’é¡¶ç‚¹å’Œç”»å¸ƒå·¦ä¸Šè§’é¡¶ç‚¹é‡åˆæ—¶ï¼Œä¸Šè¾¹ä¸¤ä¸ªé¡¶ç‚¹çš„å€¼å¾€å³åäº†å±å¹•é«˜åº¦é‚£ä¹ˆå¤šçš„å€¼ã€‚çœ‹ä¸‹è“æ¡†ï¼Œå¾ˆç›´è§‚ï¼Œä¸€ä¸ªæ­£æ–¹å½¢ï¼Œåç§»å®½åº¦&#x3D;å±å¹•é«˜åº¦ã€‚</p>
<p>è¿™è¯´æ˜é¡¶ç‚¹åœ¨ç”»å¸ƒä¸Šè¾¹ç¼˜ä½ç½®æ—¶ï¼Œé¡¶ç‚¹åæ ‡yå€¼æ˜¯ç”»å¸ƒé«˜ã€‚<br>è¿™é‡Œæµ‹è¯•x,yä¹Ÿæ˜¯ä¸€æ ·çš„ï¼ˆè‡ªå·±å¯ä»¥åŠ¨æ‰‹è¯•ä¸‹ï¼‰å…¶å®ç‰‡æ®µç€è‰²å™¨ä¸­æˆ‘ä»¬æ‹¿åˆ°çš„<code>a_position</code>å°±æ˜¯ä¸€ä¸ªå±å¹•å·¦ä¸‹è§’<code>(0,0)</code> åˆ° å±å¹•å³ä¸Šè§’<code>(ç”»å¸ƒå®½,ç”»å¸ƒé«˜)</code>è¿™æ ·çš„vec2å˜é‡ï¼Œæœ‰äº†å®šç‚¹çš„å…·ä½“å€¼ï¼Œåé¢å°±å¥½æ“ä½œäº†ã€‚æ¥çœ‹ä¸‹é¡¶ç‚¹çš„å±å¹•åæ ‡ï¼š</p>
<h3 id="é¡¶éƒ¨åç§»"><a href="#é¡¶éƒ¨åç§»" class="headerlink" title="é¡¶éƒ¨åç§»"></a>é¡¶éƒ¨åç§»</h3><p>æˆ‘æ¥å®šä¸€ä¸ªé¡¶ç‚¹<code>point</code>ï¼Œæˆ‘è¦è®©æ‰€æœ‰çš„æ‰‘å…‹éƒ½å¾€è¿™ä¸ªç‚¹å˜å½¢ã€‚è®¾å®špointåæ ‡vec2(å±å¹•å®½&#x2F;2,å±å¹•é«˜*0.85).<br>å¯¹æ¯ä¸ªç‚¹æ¥è¯´ï¼Œç‚¹çš„xè½´åç§»å€¼ &#x3D; <code>ï¼ˆé¡¶ç‚¹xå’Œpointxå·®å€¼ï¼‰* (é¡¶ç‚¹yå’Œpoint.yçš„æ¯”ä¾‹) æŠŠå‰é¢çš„</code>pos.x +&#x3D; pos.y;&#96;ä»£ç æ”¹ä¸ºä¸‹é¢2è¡Œ:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vec2 point = vec2(1920. * .5,1080. * 0.85);</span><br><span class="line">pos.x += (point.x - pos.x) * (pos.y / point.y);</span><br></pre></td></tr></table></figure>

<p>å›¾ç‰‡ä¼šå¾€ç®­å¤´æ‰€æŒ‡çš„æ–¹å‘åç§»ã€‚</p>
<h3 id="ä¿®æ”¹èµ·ç‚¹yå€¼"><a href="#ä¿®æ”¹èµ·ç‚¹yå€¼" class="headerlink" title="ä¿®æ”¹èµ·ç‚¹yå€¼"></a>ä¿®æ”¹èµ·ç‚¹yå€¼</h3><p>æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¿™é‡Œçš„è®¡ç®— éƒ½æ˜¯ç”¨å±å¹•åº•è¾¹yå€¼0è®¡ç®—çš„ï¼Œæˆ‘ç‰Œæ¡Œå˜å¦‚æœä¸åœ¨å±å¹•åº•è¾¹å’‹åŠå‘¢ï¼Œæˆ‘è¦æŒ‡å®šä¸€ä¸ªèµ·ç‚¹çš„yå€¼å¯ä»¥è®¡ç®—è¿™ä¸ªä¸‰è§’å½¢ã€‚</p>
<p>æ¯”å¦‚æˆ‘ç‰Œæ‘†åœ¨ç¦»åº•è¾¹100pxçš„ä½ç½®ï¼Œå°†å‚ä¸è®¡ç®—çš„yåæ ‡ å‡100å°±è¡Œäº†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pos.x += (point.x - pos.x) * ((pos.y - 100.) / point.y);</span><br></pre></td></tr></table></figure>
<h3 id="shaderä»£ç "><a href="#shaderä»£ç " class="headerlink" title="shaderä»£ç "></a>shaderä»£ç </h3><p>æ”¾ä¸€ä¸‹æœ€ç»ˆä»£ç ï¼Œè®©èµ·ç‚¹yå€¼å’Œç»ˆç‚¹åæ ‡éƒ½ç”¨å¯å˜å˜é‡ï¼Œä»æè´¨ä¼ å€¼è¿›æ¥ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// Copyright (c) 2017-2020 Xiamen Yaji Software Co., Ltd.</span><br><span class="line">CCEffect %&#123;</span><br><span class="line">  techniques:</span><br><span class="line">  - passes:</span><br><span class="line">    - vert: sprite-vs:vert</span><br><span class="line">      frag: sprite-fs:frag</span><br><span class="line">      depthStencilState:</span><br><span class="line">        depthTest: false</span><br><span class="line">        depthWrite: false</span><br><span class="line">      blendState:</span><br><span class="line">        targets:</span><br><span class="line">        - blend: true</span><br><span class="line">          blendSrc: src_alpha</span><br><span class="line">          blendDst: one_minus_src_alpha</span><br><span class="line">          blendDstAlpha: one_minus_src_alpha</span><br><span class="line">      rasterizerState:</span><br><span class="line">        cullMode: none</span><br><span class="line">      properties:</span><br><span class="line">        alphaThreshold: &#123; value: 0.5 &#125;</span><br><span class="line">        u_point: &#123; value: [1,1] &#125;</span><br><span class="line">        u_starty: &#123;value: 0 &#125;</span><br><span class="line">&#125;%</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CCProgram sprite-vs %&#123;</span><br><span class="line">  precision highp float;</span><br><span class="line">  #include &lt;builtin/uniforms/cc-global&gt;</span><br><span class="line">  #include &lt;builtin/internal/embedded-alpha&gt;</span><br><span class="line">  #if USE_LOCAL</span><br><span class="line">    #include &lt;builtin/uniforms/cc-local&gt;</span><br><span class="line">  #endif</span><br><span class="line">  #if SAMPLE_FROM_RT</span><br><span class="line">    #include &lt;common/common-define&gt;</span><br><span class="line">  #endif</span><br><span class="line">  in vec3 a_position;</span><br><span class="line">  in vec2 a_texCoord;</span><br><span class="line">  in vec4 a_color;</span><br><span class="line"></span><br><span class="line">  out vec4 color;</span><br><span class="line">  out vec2 uv0;</span><br><span class="line">  uniform Constant&#123;</span><br><span class="line">    vec2 u_point;   // è‡ªå·±å®šä¹‰çš„é¡¶ç‚¹</span><br><span class="line">    float u_starty; // æ‰‘å…‹ç‰Œåº•è¾¹ç¦»å±å¹•ä¸‹è¾¹çš„è·ç¦»</span><br><span class="line">  &#125;;</span><br><span class="line">  vec4 vert () &#123;</span><br><span class="line">    vec4 pos = vec4(a_position, 1);</span><br><span class="line">    pos.x += (u_point.x - pos.x) * ((pos.y - u_starty) / u_point.y);</span><br><span class="line">    #if USE_LOCAL</span><br><span class="line">      pos = cc_matWorld * pos;</span><br><span class="line">    #endif</span><br><span class="line"></span><br><span class="line">    #if USE_PIXEL_ALIGNMENT</span><br><span class="line">      pos = cc_matView * pos;</span><br><span class="line">      pos.xyz = floor(pos.xyz);</span><br><span class="line">      pos = cc_matProj * pos;</span><br><span class="line">    #else</span><br><span class="line">      pos = cc_matViewProj * pos;</span><br><span class="line">    #endif</span><br><span class="line"></span><br><span class="line">    uv0 = a_texCoord;</span><br><span class="line">    #if SAMPLE_FROM_RT</span><br><span class="line">      CC_HANDLE_RT_SAMPLE_FLIP(uv0);</span><br><span class="line">    #endif</span><br><span class="line">    color = a_color;</span><br><span class="line"></span><br><span class="line">    return pos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;%</span><br><span class="line"></span><br><span class="line">CCProgram sprite-fs %&#123;</span><br><span class="line">  precision highp float;</span><br><span class="line">  #include &lt;builtin/internal/embedded-alpha&gt;</span><br><span class="line">  #include &lt;builtin/internal/alpha-test&gt;</span><br><span class="line"></span><br><span class="line">  in vec4 color;</span><br><span class="line"></span><br><span class="line">  #if USE_TEXTURE</span><br><span class="line">    in vec2 uv0;</span><br><span class="line">    #pragma builtin(local)</span><br><span class="line">    layout(set = 2, binding = 12) uniform sampler2D cc_spriteTexture;</span><br><span class="line">  #endif</span><br><span class="line"></span><br><span class="line">  vec4 frag () &#123;</span><br><span class="line">    vec4 o = vec4(1, 1, 1, 1);</span><br><span class="line"></span><br><span class="line">    #if USE_TEXTURE</span><br><span class="line">      o *= CCSampleWithAlphaSeparated(cc_spriteTexture, uv0);</span><br><span class="line">      #if IS_GRAY</span><br><span class="line">        float gray  = 0.2126 * o.r + 0.7152 * o.g + 0.0722 * o.b;</span><br><span class="line">        o.r = o.g = o.b = gray;</span><br><span class="line">      #endif</span><br><span class="line">    #endif</span><br><span class="line"></span><br><span class="line">    o *= color;</span><br><span class="line">    ALPHA_TEST(o);</span><br><span class="line">    return o;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;%</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><p>åœ¨Cocos Creator ä¸­æ‰¾åˆ°ç²¾çµé»˜è®¤ä½¿ç”¨çš„æè´¨<code>ui-sprite-material.mtl</code>ï¼Œå°†æè´¨æ‹·è´å‡ºæ¥æ”¾åœ¨è‡ªå·±çš„èµ„æºæ–‡ä»¶å¤¹ä¸‹ï¼ˆå¿…é¡»æ‹·è´å‡ºæ¥ï¼Œä¸ç„¶æ— æ³•ä¿®æ”¹ï¼‰ã€‚å°†ä¸Šé¢ä»£ç ä¿å­˜ä¸º<code>gradient.effect</code>ï¼Œåå­—æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•æ¥ã€‚æœ€åä¿®æ”¹ä¸‹é¢4ä¸ªåœ°æ–¹å³å¯</p>
<ol>
<li>å°†ç²¾çµçš„â€CustomMaterialâ€å±æ€§è®¾ç½®ä¸ºä½ åˆšåˆšæ‹·è´å‡ºæ¥çš„æè´¨</li>
<li>å°†æè´¨çš„<code>Effect</code>å±æ€§è®¾ç½®ä¸ºåˆšåˆšä¿å­˜çš„<code>gradient.effect</code>shaderæ–‡ä»¶</li>
<li>è¿™é‡Œ<code>USE TEXTURE</code>ä¸€å®šè¦å‹¾é€‰ä¸Šï¼Œä¸ç„¶æ²¡æœ‰çº¹ç†ï¼Œåªä¼šæ˜¾ç¤ºä¸€å¼ ç©ºç™½å›¾</li>
<li>è°ƒæ•´è¿™ä¸‰ä¸ªå‚æ•°ï¼Œè·å¾—è‡ªå·±æƒ³è¦çš„é€è§†æ•ˆæœ</li>
</ol>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
        <tag>shader</tag>
      </tags>
  </entry>
  <entry>
    <title>Could not reat source map for chrome-error://chromewebdata/:Unexpected 503 response from chrome-error://chromewebdata/neterror, rollup.js.map:Unsupported protocol &quot;chrome-error&quot;</title>
    <url>/c7dbb86a.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»Šå¤©åœ¨ä½¿ç”¨vsCodeè°ƒè¯•Cocos Creatorå·¥ç¨‹çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸‹é¢é—®é¢˜<code>Could not reat source map for chrome-error://chromewebdata/:Unexpected 503 response from chrome-error://chromewebdata/neterror, rollup.js.map:Unsupported protocol &quot;chrome-error&quot;</code>ï¼Œå¯¼è‡´æµè§ˆå™¨æ— æ³•æ­£å¸¸åŠ è½½æ¸¸æˆã€‚<br>ä½†æ˜¯åœ¨Cocos Creatorä¸Šç‚¹å‡»é¢„è§ˆæŒ‰é’®åˆèƒ½æ­£ç¡®çš„æ‰“å¼€æµè§ˆå™¨é¢„è§ˆï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆæƒ…å†µ~</p>
<p>æœ€åï¼Œæ²¡æœ‰åŠæ³•ï¼Œå…³æœºé‡å¯è§£å†³äº†é—®é¢˜ã€‚</p>
<p>å¦‚æœå¤§ä½¬ä½ æœ‰å¥½çš„è§£å†³æ–¹æ³•ï¼Œå¯ä»¥è¯„è®ºå‘Šè¯‰ï¼Œæˆ‘å°†æ„Ÿæ¿€ä¸å°½</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Could not read source map for chrome-error://chromewebdata/:Unexpected 503 response from chrome-error://chromewebdata/neterror, rollup.js.map:Unsupported protocol &quot;chrome-error&quot;</title>
    <url>/c7dbb86aen.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Today, while debugging a Cocos Creator project using VS Code, I encountered the following issue: <code>Could not read source map for chrome-error://chromewebdata/:Unexpected 503 response from chrome-error://chromewebdata/neterror, rollup.js.map:Unsupported protocol &quot;chrome-error&quot;</code>. This caused the browser to fail to load the game properly.</p>
<p>However, clicking the preview button in Cocos Creator opened the browser preview correctly, and I was unsure what the issue was.</p>
<p>In the end, I had no choice but to reboot the system, which resolved the problem.</p>
<p>If you have a better solution, feel free to comment and let me know. I would greatly appreciate it.</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorä¸­PageViewè‡ªåŠ¨ç¿»é¡µ</title>
    <url>/24427763.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> pageList = <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_List</span>;</span><br><span class="line"><span class="keyword">let</span> pageCount = pageList.<span class="title function_">getPages</span>().<span class="property">length</span>;   <span class="comment">// è·å–ç¿»é¡µå®¹å™¨é•¿åº¦</span></span><br><span class="line"><span class="keyword">let</span> duration = <span class="number">3</span>;   <span class="comment">// è‡ªåŠ¨ç¿»é¡µæ—¶é—´,s</span></span><br><span class="line"><span class="keyword">let</span> currentPageIndex = <span class="number">0</span>;  <span class="comment">// å½“å‰é¡µæ•°</span></span><br><span class="line"><span class="keyword">let</span> direction = <span class="number">1</span>;       <span class="comment">// ç¿»é¡µæ–¹å‘</span></span><br><span class="line"><span class="keyword">let</span> scrollTiem = <span class="number">1</span>;      <span class="comment">//  ç¿»é¡µæ—¶é—´</span></span><br><span class="line">pageList.<span class="title function_">schedule</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(currentPageIndex === pageCount-<span class="number">1</span>)&#123;</span><br><span class="line">        direction = -<span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(currentPageIndex === <span class="number">0</span>)&#123;</span><br><span class="line">        direction = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    currentPageIndex += direction;</span><br><span class="line">    pageList.<span class="title function_">scrollToPage</span>(currentPageIndex,scrollTiem);</span><br><span class="line">&#125;,duration)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Automatic PageView Scrolling in Cocos Creator</title>
    <url>/24427763en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Sample-Code"><a href="#Sample-Code" class="headerlink" title="Sample Code:"></a>Sample Code:</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> pageList = <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_List</span>;</span><br><span class="line"><span class="keyword">let</span> pageCount = pageList.<span class="title function_">getPages</span>().<span class="property">length</span>;   <span class="comment">// Get the number of pages</span></span><br><span class="line"><span class="keyword">let</span> duration = <span class="number">3</span>;   <span class="comment">// Automatic scrolling interval in seconds</span></span><br><span class="line"><span class="keyword">let</span> currentPageIndex = <span class="number">0</span>;  <span class="comment">// Current page index</span></span><br><span class="line"><span class="keyword">let</span> direction = <span class="number">1</span>;       <span class="comment">// Scroll direction</span></span><br><span class="line"><span class="keyword">let</span> scrollTime = <span class="number">1</span>;      <span class="comment">// Scrolling duration in seconds</span></span><br><span class="line"></span><br><span class="line">pageList.<span class="title function_">schedule</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (currentPageIndex === pageCount - <span class="number">1</span>) &#123;</span><br><span class="line">        direction = -<span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (currentPageIndex === <span class="number">0</span>) &#123;</span><br><span class="line">        direction = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    currentPageIndex += direction;</span><br><span class="line">    pageList.<span class="title function_">scrollToPage</span>(currentPageIndex, scrollTime);</span><br><span class="line">&#125;, duration);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorä¸­websockerå®ä¾‹</title>
    <url>/2aaee773.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Cocos Creator <code>WebSocket</code>å®ä¾‹ã€‚</p>
<p>éœ€è¦æ³¨æ„å‡ ä¸ªé—®é¢˜ï¼š</p>
<p>1ã€<code>send()</code>å‘é€çš„æ•°æ®æ ¼å¼ï¼Œè¿™é‡Œæ˜¯æœ‰è¦æ±‚çš„ã€‚</p>
<p>2ã€æ¥æ”¶åˆ°çš„æ•°æ®éœ€è¦è¿›è¡Œä¸€ä¸ªååºåˆ—åŒ–ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ws = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&quot;ws://192.168.79.2:7070&quot;</span>);</span><br><span class="line">ws.<span class="property">onopen</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¿æ¥æˆåŠŸ&quot;</span>);</span><br><span class="line">		ws.<span class="title function_">send</span>(<span class="string">&quot;&#123;\&quot;Version\&quot;:&#123; \&quot;Version\&quot;: \&quot;v0.0.1\&quot;&#125;&#125;&quot;</span>);</span><br><span class="line">	&#125;;</span><br><span class="line">	ws.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">let</span> data = event.<span class="property">data</span>;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Received string data:&quot;</span>, data);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (data <span class="keyword">instanceof</span> <span class="title class_">ArrayBuffer</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Received ArrayBuffer data:&quot;</span>, data);</span><br><span class="line"> 		<span class="comment">// å¦‚æœä½ éœ€è¦å°† ArrayBuffer è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼Œå¯ä»¥è¿™æ ·åšï¼š</span></span><br><span class="line">		<span class="keyword">const</span> byteArray = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(data);</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Byte array:&quot;</span>, byteArray);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (data <span class="keyword">instanceof</span> <span class="title class_">Blob</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Received Blob data:&quot;</span>, data);</span><br><span class="line">		<span class="comment">// å¦‚æœä½ éœ€è¦å°† Blob è½¬æ¢ä¸º ArrayBuffer æˆ–å­—èŠ‚æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨ FileReader</span></span><br><span class="line">		<span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line">		reader.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">const</span> arrayBuffer = reader.<span class="property">result</span> <span class="keyword">as</span> <span class="title class_">ArrayBuffer</span>;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ArrayBuffer:&quot;</span>, arrayBuffer);</span><br><span class="line">			<span class="keyword">const</span> byteArray = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(arrayBuffer);</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Byte array:&quot;</span>, byteArray);</span><br><span class="line">			<span class="keyword">let</span> jsonString = <span class="keyword">new</span> <span class="title class_">TextDecoder</span>().<span class="title function_">decode</span>(byteArray)</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;jsonSt = &quot;</span>,jsonString);</span><br><span class="line">			<span class="keyword">let</span> data1 = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonString);</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;data1 = &quot;</span>,data1);</span><br><span class="line">		&#125;;</span><br><span class="line">		reader.<span class="title function_">readAsArrayBuffer</span>(data);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Received unknown data type:&quot;</span>, data);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		ws.<span class="property">onclose</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`WebSocket closed: <span class="subst">$&#123;event.code&#125;</span> <span class="subst">$&#123;event.reason&#125;</span>`</span>);</span><br><span class="line">		&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>WebSocket Example in Cocos Creator</title>
    <url>/2aaee773en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Here is a <code>WebSocket</code> example in Cocos Creator.</p>
<h3 id="Important-Points-to-Consider"><a href="#Important-Points-to-Consider" class="headerlink" title="Important Points to Consider:"></a>Important Points to Consider:</h3><ol>
<li>The data format sent via <code>send()</code> has specific requirements.</li>
<li>The received data needs to be deserialized.</li>
</ol>
<h3 id="Code-Example"><a href="#Code-Example" class="headerlink" title="Code Example:"></a>Code Example:</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ws = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&quot;ws://192.168.79.2:7070&quot;</span>);</span><br><span class="line"></span><br><span class="line">ws.<span class="property">onopen</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Connection successful&quot;</span>);</span><br><span class="line">    ws.<span class="title function_">send</span>(<span class="string">&quot;&#123;\&quot;Version\&quot;:&#123; \&quot;Version\&quot;: \&quot;v0.0.1\&quot;&#125;&#125;&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> data = event.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Received string data:&quot;</span>, data);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data <span class="keyword">instanceof</span> <span class="title class_">ArrayBuffer</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Received ArrayBuffer data:&quot;</span>, data);</span><br><span class="line">        <span class="comment">// If you need to convert the ArrayBuffer to a byte array, you can do this:</span></span><br><span class="line">        <span class="keyword">const</span> byteArray = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(data);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Byte array:&quot;</span>, byteArray);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data <span class="keyword">instanceof</span> <span class="title class_">Blob</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Received Blob data:&quot;</span>, data);</span><br><span class="line">        <span class="comment">// If you need to convert the Blob to an ArrayBuffer or byte array, you can use FileReader</span></span><br><span class="line">        <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line">        reader.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> arrayBuffer = reader.<span class="property">result</span> <span class="keyword">as</span> <span class="title class_">ArrayBuffer</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ArrayBuffer:&quot;</span>, arrayBuffer);</span><br><span class="line">            <span class="keyword">const</span> byteArray = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(arrayBuffer);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Byte array:&quot;</span>, byteArray);</span><br><span class="line">            <span class="keyword">let</span> jsonString = <span class="keyword">new</span> <span class="title class_">TextDecoder</span>().<span class="title function_">decode</span>(byteArray);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;jsonSt =&quot;</span>, jsonString);</span><br><span class="line">            <span class="keyword">let</span> data1 = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonString);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;data1 =&quot;</span>, data1);</span><br><span class="line">        &#125;;</span><br><span class="line">        reader.<span class="title function_">readAsArrayBuffer</span>(data);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Received unknown data type:&quot;</span>, data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws.<span class="property">onclose</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`WebSocket closed: <span class="subst">$&#123;event.code&#125;</span> <span class="subst">$&#123;event.reason&#125;</span>`</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorä¹‹PageView</title>
    <url>/53abb2e.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»£ç ä¸»è¦ä»‹ç»äº†<code>PageView</code>åœ¨ä½¿ç”¨æ—¶åŠ¨æ€åˆ›å»ºã€åˆ é™¤pageé¡µä»¥åŠPageViewçš„ç›‘å¬äº‹ä»¶</p>
<h3 id="é€»è¾‘ä»£ç "><a href="#é€»è¾‘ä»£ç " class="headerlink" title="é€»è¾‘ä»£ç "></a>é€»è¾‘ä»£ç </h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Node</span>,<span class="title class_">UITransform</span>,size&#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UIPnlMultiTableView</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./UIPnlMultiTableView&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UIBaseLogic</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../../UIBaseLogic&#x27;</span></span><br><span class="line"><span class="keyword">const</span> &#123; ccclass &#125; = _decorator</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UIPnlMultiTableLogic</span> <span class="keyword">extends</span> <span class="title class_ inherited__">UIBaseLogic</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> prefabPath = <span class="string">&quot;/prefab/ui/multiTable/PnlMultiTable&quot;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">_view</span>: <span class="title class_">UIPnlMultiTableView</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">Init</span>(<span class="attr">id</span>: <span class="built_in">string</span>, <span class="attr">go</span>: <span class="title class_">Node</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_view</span> = <span class="keyword">new</span> <span class="title class_">UIPnlMultiTableView</span>(go)</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title class_">Init</span>(id, go)</span><br><span class="line">        <span class="comment">// --------- your code</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">BindUIEvent</span>() &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title class_">BindUIEventClick</span>(<span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_Btn_add</span>.<span class="property">node</span>, <span class="variable language_">this</span>.<span class="property">HandlerBtn_add</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title class_">BindUIEventClick</span>(<span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_Btn_del</span>.<span class="property">node</span>, <span class="variable language_">this</span>.<span class="property">HandlerBtn_del</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_table</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="string">&quot;page-turning&quot;</span>,<span class="variable language_">this</span>.<span class="property">printCurrentPageIndex</span>,<span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">HandlerBtn</span>_add() &#123;   <span class="comment">// æ·»åŠ pageé¡µ</span></span><br><span class="line">        <span class="keyword">const</span> newPageNode = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="string">&quot;NewPageNode&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> ui = newPageNode.<span class="title function_">addComponent</span>(<span class="title class_">UITransform</span>);</span><br><span class="line">        ui.<span class="title function_">setContentSize</span>(<span class="title function_">size</span>(<span class="number">1624</span> ,<span class="number">750</span>));</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_table</span>.<span class="title function_">addPage</span>(newPageNode);</span><br><span class="line">        newPageNode.<span class="property">parent</span> = <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_table</span>.<span class="property">node</span>.<span class="title function_">getChildByName</span>(<span class="string">&quot;view&quot;</span>).<span class="title function_">getChildByName</span>(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">HandlerBtn</span>_del() &#123;  <span class="comment">// åˆ é™¤pageé¡µ</span></span><br><span class="line">        <span class="keyword">const</span> currentPageIndex =  <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_table</span>.<span class="title function_">getCurrentPageIndex</span>();</span><br><span class="line">        <span class="keyword">const</span> pageNode = <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_table</span>.<span class="title function_">getPages</span>()[currentPageIndex];</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_table</span>.<span class="title function_">removePage</span>(pageNode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">printCurrentPageIndex</span>(<span class="params"></span>)&#123;   <span class="comment">// æ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œä»¥åœ¨é¡µé¢åˆ‡æ¢æ—¶æ‰“å°å½“å‰é¡µé¢ç´¢å¼•</span></span><br><span class="line">        <span class="keyword">const</span> currentPageIndex =  <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_PageC_table</span>.<span class="title function_">getCurrentPageIndex</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Current Page Index:&quot;</span>, currentPageIndex);        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="uiéƒ¨åˆ†"><a href="#uiéƒ¨åˆ†" class="headerlink" title="uiéƒ¨åˆ†"></a>uiéƒ¨åˆ†</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Node</span>, <span class="title class_">Button</span>, <span class="title class_">PageView</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UIPnlMultiTableView</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">_root</span>: <span class="title class_">Node</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">_Nego_Root</span>: <span class="title class_">Node</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">_PageC_table</span>: <span class="title class_">PageView</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">_Btn_add</span>: <span class="title class_">Button</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">_Btn_del</span>: <span class="title class_">Button</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">go: Node</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_root</span> = go</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_Nego_Root</span> = go.<span class="title function_">getChildByPath</span>(<span class="string">&#x27;Nego_Root&#x27;</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_PageC_table</span> = go.<span class="title function_">getChildByPath</span>(<span class="string">&#x27;Nego_Root/PageC_table&#x27;</span>).<span class="title function_">getComponent</span>(<span class="title class_">PageView</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_Btn_add</span> = go.<span class="title function_">getChildByPath</span>(<span class="string">&#x27;Nego_Root/Btn_add&#x27;</span>).<span class="title function_">getComponent</span>(<span class="title class_">Button</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_Btn_del</span> = go.<span class="title function_">getChildByPath</span>(<span class="string">&#x27;Nego_Root/Btn_del&#x27;</span>).<span class="title function_">getComponent</span>(<span class="title class_">Button</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Event Penetration and Prevention in Cocos Creator</title>
    <url>/7bbb7305en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Today, while coding, I added two different click events to a parent node and a child node. I noticed that triggering the click event on the child node would also trigger the click event on the parent node. </p>
<p>Upon investigation, I found that in Cocos Creator, events are divided into two types: capture events and bubble events. By default, all node events are bubble events, meaning that when a child node triggers an event, its parent node will also receive that event.</p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution:"></a>Solution:</h3><p>The method I used to solve this problem is to add a <code>BlockInputEvents</code> component to the child node, as shown in the image below:<br><img data-src="https://s1.ax1x.com/2023/04/17/p9PlfKI.png" style="width:600px;height:200px" alt="" /></p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
  </entry>
  <entry>
    <title>Cocos Creatoräº‹ä»¶ç©¿é€å’Œé˜»æ­¢</title>
    <url>/7bbb7305.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»Šå¤©åœ¨å†™ä»£ç çš„æ—¶å€™ç»™çˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹æ·»åŠ äº†2ä¸ªä¸åŒçš„ç‚¹å‡»äº‹ä»¶.ç„¶åå‘ç°åœ¨è§¦å‘å­èŠ‚ç‚¹çš„ç‚¹å‡»äº‹ä»¶æ—¶ä¼šåŒæ—¶è§¦å‘çˆ¶èŠ‚ç‚¹çš„ç‚¹å‡»äº‹ä»¶.<br>æŸ¥äº†ä¸‹å‘ç°åœ¨Cocos Creatorä¸­,äº‹ä»¶åˆ†ä¸ºä¸¤ç§ç±»å‹:æ•è·äº‹ä»¶å’Œå†’æ³¡äº‹ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰èŠ‚ç‚¹çš„äº‹ä»¶éƒ½æ˜¯å†’æ³¡äº‹ä»¶ï¼Œä»¥ä¸ºç€å½“å­èŠ‚ç‚¹è§¦å‘äº†ä¸€ä¸ªäº‹ä»¶åï¼Œå®ƒçš„çˆ¶èŠ‚ç‚¹ä¹Ÿä¼šæ¥å—åˆ°è¿™ä¸ªäº‹ä»¶ã€‚<br>è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼ˆæˆ‘è¿™é‡Œç”¨åˆ°çš„æ–¹æ³•ï¼‰<br>åœ¨å­èŠ‚ç‚¹ä¸Šæ·»åŠ ä¸€ä¸ª<code>BlockInputEvents</code>ç»„ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img data-src="https://s1.ax1x.com/2023/04/17/p9PlfKI.png" style="width:600px;height:200px" alt="" /></p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
  </entry>
  <entry>
    <title>Cocos Creatorä½¿ç”¨Vscode+chromeæµè§ˆå™¨è°ƒè¯•</title>
    <url>/aad587b8.html</url>
    <content><![CDATA[<p>1ã€vscodeå®‰è£…æ’ä»¶ <code>JavaScript Debugger(Nightly)</code></p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>2ã€è°ƒè¯•é…ç½®ï¼Œè·¯å¾„<code>.vscode/launch.json</code>å¦‚ä¸‹</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   <span class="comment">// ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚ </span></span><br><span class="line">   <span class="comment">// æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚</span></span><br><span class="line">   <span class="comment">// æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">   <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">       <span class="punctuation">&#123;</span></span><br><span class="line">           <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chrome&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cocos Chrome&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:7456&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;sourceMaps&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;userDataDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;/.vscode/chrome&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;diagnosticLogging&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;webRoot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;sourceMapPathOverrides&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">               <span class="attr">&quot;assets/*&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;/assets/*&quot;</span></span><br><span class="line">           <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;runtimeArgs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;--disable-web-security&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//è§£å†³è·¨åŸŸé—®é¢˜</span></span><br><span class="line">           <span class="attr">&quot;pathMapping&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">               <span class="attr">&quot;/preview-scripts/assets&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;/temp/quick-scripts/assets&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;/&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;&quot;</span></span><br><span class="line">           <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;runtimeExecutable&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;C:/Program Files/Google/Chrome/Application1/chrome.exe&quot;</span>     <span class="comment">// chromeæµè§ˆå™¨çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">       <span class="punctuation">&#125;</span></span><br><span class="line">   <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Using Vscode and Chrome for Debugging in Cocos Creator</title>
    <url>/aad587b8en.html</url>
    <content><![CDATA[<h3 id="Step-1-Install-Plugin"><a href="#Step-1-Install-Plugin" class="headerlink" title="Step 1: Install Plugin"></a>Step 1: Install Plugin</h3><p>In Vscode, install the <code>JavaScript Debugger (Nightly)</code> plugin.</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Step-2-Debugging-Configuration"><a href="#Step-2-Debugging-Configuration" class="headerlink" title="Step 2: Debugging Configuration"></a>Step 2: Debugging Configuration</h3><p>Configure the debugging settings in <code>.vscode/launch.json</code> as follows:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">       <span class="punctuation">&#123;</span></span><br><span class="line">           <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chrome&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cocos Chrome&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:7456&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;sourceMaps&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;userDataDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;/.vscode/chrome&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;diagnosticLogging&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;webRoot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;sourceMapPathOverrides&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">               <span class="attr">&quot;assets/*&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;/assets/*&quot;</span></span><br><span class="line">           <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;runtimeArgs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;--disable-web-security&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="comment">// Solve cross-origin issues</span></span><br><span class="line">           <span class="attr">&quot;pathMapping&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">               <span class="attr">&quot;/preview-scripts/assets&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;/temp/quick-scripts/assets&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;/&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;&quot;</span></span><br><span class="line">           <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;runtimeExecutable&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:/Program Files/Google/Chrome/Application1/chrome.exe&quot;</span> <span class="comment">// Absolute path to the Chrome browser</span></span><br><span class="line">       <span class="punctuation">&#125;</span></span><br><span class="line">   <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorä½¿ç”¨shaderå®ç°å›¾ç‰‡æ‰«å…‰ç‰¹æ•ˆ</title>
    <url>/284d90f4.html</url>
    <content><![CDATA[<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>åŠŸèƒ½ï¼šå›¾ç‰‡å®ç°æ‰«å…‰æ•ˆæœ<br>å¼•æ“ï¼šCocos Creator 3.7.2<br>å¼€å‘è¯­è¨€ï¼šts</p>
<span id="more"></span>

<h3 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><p><img data-src="https://pic.imgdb.cn/item/6643262e0ea9cb14038c40d8.gif" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="shaderä»£ç "><a href="#shaderä»£ç " class="headerlink" title="shaderä»£ç "></a>shaderä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// Copyright (c) 2017-2020 Xiamen Yaji Software Co., Ltd.</span><br><span class="line">CCEffect %&#123;</span><br><span class="line">  techniques:</span><br><span class="line">  - passes:</span><br><span class="line">    - vert: sprite-vs:vert</span><br><span class="line">      frag: sprite-fs:frag</span><br><span class="line">      depthStencilState:</span><br><span class="line">        depthTest: false</span><br><span class="line">        depthWrite: false</span><br><span class="line">      blendState:</span><br><span class="line">        targets:</span><br><span class="line">        - blend: true</span><br><span class="line">          blendSrc: src_alpha</span><br><span class="line">          blendDst: one_minus_src_alpha</span><br><span class="line">          blendDstAlpha: one_minus_src_alpha</span><br><span class="line">      rasterizerState:</span><br><span class="line">        cullMode: none</span><br><span class="line">      properties:</span><br><span class="line">        alphaThreshold: &#123; value: 0.5 &#125;</span><br><span class="line"></span><br><span class="line">        # è‡ªå®šä¹‰</span><br><span class="line">        lightColor: &#123; value: [1.0, 1.0, 0.0, 1.0], editor: &#123;</span><br><span class="line">          type: color,</span><br><span class="line">          tooltip: &quot;å…‰æŸé¢œè‰²&quot; &#125;&#125;</span><br><span class="line">        lightCenterPoint: &#123; value: [0.2, 0.2], editor: &#123; </span><br><span class="line">          tooltip: &quot;å…‰æŸä¸­å¿ƒç‚¹åæ ‡&quot; &#125;&#125;</span><br><span class="line">        lightAngle: &#123; value: 36.0, editor: &#123; </span><br><span class="line">          tooltip: &quot;å…‰æŸå€¾æ–œè§’åº¦&quot; &#125;&#125;</span><br><span class="line">        lightWidth: &#123; value: 0.2, editor: &#123; </span><br><span class="line">          tooltip: &quot;å…‰æŸå®½åº¦&quot; &#125;&#125;</span><br><span class="line">        enableGradient: &#123; value: 1.0, editor: &#123; </span><br><span class="line">          tooltip: &quot;æ˜¯å¦å¯ç”¨å…‰æŸæ¸å˜ã€‚0ï¼šä¸å¯ç”¨ï¼Œé0ï¼šå¯ç”¨&quot; &#125;&#125;</span><br><span class="line">        cropAlpha: &#123; value: 1.0, editor: &#123; </span><br><span class="line">          tooltip: &quot;æ˜¯å¦è£å‰ªé€æ˜åŒºåŸŸä¸Šçš„å…‰ã€‚0ï¼šä¸å¯ç”¨ï¼Œé0ï¼šå¯ç”¨&quot; &#125;&#125;</span><br><span class="line">        enableFog: &#123; value: 0.0, editor: &#123; </span><br><span class="line">          tooltip: &quot;æ˜¯å¦å¯ç”¨è¿·é›¾æ•ˆæœã€‚0ï¼šä¸å¯ç”¨ï¼Œé0ï¼šå¯ç”¨&quot; &#125;&#125;</span><br><span class="line">&#125;%</span><br><span class="line"></span><br><span class="line">CCProgram sprite-vs %&#123;</span><br><span class="line">  precision highp float;</span><br><span class="line">  #include &lt;builtin/uniforms/cc-global&gt;</span><br><span class="line">  #if USE_LOCAL</span><br><span class="line">    #include &lt;builtin/uniforms/cc-local&gt;</span><br><span class="line">  #endif</span><br><span class="line"></span><br><span class="line">  in vec3 a_position;</span><br><span class="line">  in vec2 a_texCoord;</span><br><span class="line">  in vec4 a_color;</span><br><span class="line"></span><br><span class="line">  out vec4 color;</span><br><span class="line">  out vec2 uv0;</span><br><span class="line"></span><br><span class="line">  vec4 vert () &#123;</span><br><span class="line">    vec4 pos = vec4(a_position, 1);</span><br><span class="line"></span><br><span class="line">    #if USE_PIXEL_ALIGNMENT</span><br><span class="line">      pos = cc_matView * pos;</span><br><span class="line">      pos.xyz = floor(pos.xyz);</span><br><span class="line">      pos = cc_matProj * pos;</span><br><span class="line">    #else</span><br><span class="line">      pos = cc_matViewProj * pos;</span><br><span class="line">    #endif</span><br><span class="line"></span><br><span class="line">    uv0 = a_texCoord;</span><br><span class="line">    color = a_color;</span><br><span class="line"></span><br><span class="line">    return pos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;%</span><br><span class="line"></span><br><span class="line">CCProgram sprite-fs %&#123;</span><br><span class="line">  precision highp float;</span><br><span class="line">  #include &lt;builtin/internal/embedded-alpha&gt;</span><br><span class="line">  #include &lt;builtin/internal/alpha-test&gt;</span><br><span class="line"></span><br><span class="line">  in vec4 color;</span><br><span class="line"></span><br><span class="line">  #if USE_TEXTURE</span><br><span class="line">    in vec2 uv0;</span><br><span class="line">    #pragma builtin(local)</span><br><span class="line">    layout(set = 2, binding = 11) uniform sampler2D cc_spriteTexture;</span><br><span class="line">  #endif</span><br><span class="line"></span><br><span class="line">  #if ENABLE_LIGHT</span><br><span class="line">    uniform Light &#123;</span><br><span class="line">      // å…‰æŸé¢œè‰²</span><br><span class="line">      vec4 lightColor;</span><br><span class="line"></span><br><span class="line">      // å…‰æŸä¸­å¿ƒç‚¹åæ ‡</span><br><span class="line">      vec2 lightCenterPoint;</span><br><span class="line">      </span><br><span class="line">      // å…‰æŸå€¾æ–œè§’åº¦</span><br><span class="line">      float lightAngle;</span><br><span class="line"></span><br><span class="line">      // å…‰æŸå®½åº¦</span><br><span class="line">      float lightWidth;</span><br><span class="line"></span><br><span class="line">      // å¯ç”¨å…‰æŸæ¸å˜</span><br><span class="line">      // psï¼šç¼–è¾‘å™¨è¿˜ä¸æ”¯æŒ bool ç±»å‹çš„æ ·å­ï¼Œå› æ­¤ç”¨floatæ¥å®šä¹‰</span><br><span class="line">      float enableGradient;</span><br><span class="line"></span><br><span class="line">      // è£å‰ªæ‰é€æ˜åŒºåŸŸä¸Šçš„å…‰</span><br><span class="line">      // psï¼šç¼–è¾‘å™¨è¿˜ä¸æ”¯æŒ bool ç±»å‹çš„æ ·å­ï¼Œå› æ­¤ç”¨floatæ¥å®šä¹‰</span><br><span class="line">      float cropAlpha;   </span><br><span class="line"></span><br><span class="line">      // æ˜¯å¦å¯ç”¨è¿·é›¾æ•ˆæœ</span><br><span class="line">      // psï¼šç¼–è¾‘å™¨è¿˜ä¸æ”¯æŒ bool ç±»å‹çš„æ ·å­ï¼Œå› æ­¤ç”¨floatæ¥å®šä¹‰</span><br><span class="line">      float enableFog;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">    * æ·»åŠ å…‰æŸé¢œè‰²</span><br><span class="line">    */</span><br><span class="line">    vec4 addLightColor(vec4 textureColor, vec4 lightColor, vec2 lightCenterPoint, float lightAngle, float lightWidth) &#123;</span><br><span class="line">      // è¾¹ç•Œå€¼å¤„ç†ï¼Œæ²¡æœ‰å®½åº¦å°±è¿”å›åŸå§‹é¢œè‰²</span><br><span class="line">      if (lightWidth &lt;= 0.0) &#123;</span><br><span class="line">        return textureColor;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // è®¡ç®—å½“å‰ uv åˆ° å…‰æŸ çš„è·ç¦»</span><br><span class="line">      float angleInRadians = radians(lightAngle);</span><br><span class="line"></span><br><span class="line">      // è§’åº¦0ä¸é0ä¸åŒå¤„ç†</span><br><span class="line">      float dis = 0.0;</span><br><span class="line">      if (mod(lightAngle, 180.0) != 0.0) &#123;</span><br><span class="line">        // è®¡ç®—å…‰æŸä¸­å¿ƒçº¿ä¸‹æ–¹ä¸Xè½´äº¤ç‚¹çš„Xåæ ‡</span><br><span class="line">        // 1.0 - lightCenterPoint.y æ˜¯å°†è½¬æ¢ä¸ºOpenGLåæ ‡ç³»ï¼Œä¸‹æ–‡çš„ 1.0 - y ç±»ä¼¼</span><br><span class="line">        float lightOffsetX = lightCenterPoint.x - ((1.0 - lightCenterPoint.y) / tan(angleInRadians));</span><br><span class="line"></span><br><span class="line">        // ä»¥å½“å‰ç‚¹ç”»ä¸€æ¡å¹³è¡ŒäºXè½´çš„çº¿ï¼Œå‡è®¾æ­¤çº¿å’Œå…‰æŸä¸­å¿ƒçº¿ç›¸äº¤çš„ç‚¹ä¸ºDç‚¹</span><br><span class="line">        // é‚£ä¹ˆ D.y = uv0.y</span><br><span class="line">        // D.x = lightOffsetX + D.y / tan(angle)</span><br><span class="line">        float dx = lightOffsetX + (1.0 - uv0.y) / tan(angleInRadians);</span><br><span class="line"></span><br><span class="line">        // D åˆ°å½“å‰ uv0 çš„è·ç¦»å°±æ˜¯</span><br><span class="line">        // dis = |uv0.x - D.x|</span><br><span class="line">        float offsetDis = abs(uv0.x - dx);</span><br><span class="line"></span><br><span class="line">        // å½“å‰ç‚¹åˆ°å…‰æŸä¸­å¿ƒçº¿çš„çš„å‚ç›´è·ç¦»å°±å¥½ç®—äº†</span><br><span class="line">        dis = sin(angleInRadians) * offsetDis;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        dis = abs(uv0.y - lightCenterPoint.y);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      float a = 1.0 ;</span><br><span class="line">      // è£å‰ªæ‰é€æ˜åŒºåŸŸä¸Šçš„ç‚¹å…‰</span><br><span class="line">      if (bool(cropAlpha)) &#123;</span><br><span class="line">        a *= step(0.01, textureColor.a);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // è£å‰ªæ‰å…‰æŸèŒƒå›´å¤–çš„uvï¼ˆè¿·é›¾æ•ˆæœï¼‰</span><br><span class="line">      if (!bool(enableFog)) &#123;</span><br><span class="line">        a *= step(dis, lightWidth * 0.5);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // åŠ å…¥ä»ä¸­å¿ƒå¾€å¤–æ¸å˜çš„æ•ˆæœ</span><br><span class="line">      if (bool(enableGradient)) &#123;</span><br><span class="line">        a *= 1.0 - dis / (lightWidth * 0.5);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // è®¡ç®—å‡ºæ‰©æ•£èŒƒå›´å†…ï¼Œä¸åŒ uv å¯¹åº”çš„å®é™…æ‰©æ•£é¢œè‰²å€¼</span><br><span class="line">      vec4 finalLightColor = lightColor * a;</span><br><span class="line"></span><br><span class="line">      // æ··åˆé¢œè‰²ï¼šåœ¨åŸå§‹å›¾åƒé¢œè‰²ä¸Šå åŠ æ‰©æ•£é¢œè‰²</span><br><span class="line">      //return textureColor * textureColor.a + finalLightColor;</span><br><span class="line"></span><br><span class="line">        #if ENABLE_ORIGINCOLOR</span><br><span class="line">          finalLightColor = textureColor + textureColor * a;</span><br><span class="line">        #else</span><br><span class="line">          finalLightColor = textureColor + finalLightColor;</span><br><span class="line">          finalLightColor.a = textureColor.a;</span><br><span class="line">        #endif</span><br><span class="line"></span><br><span class="line">        return finalLightColor;</span><br><span class="line">      &#125;</span><br><span class="line">  #endif</span><br><span class="line">    </span><br><span class="line">  vec4 frag () &#123;</span><br><span class="line">    vec4 o = vec4(1, 1, 1, 1);</span><br><span class="line"></span><br><span class="line">    #if USE_TEXTURE</span><br><span class="line">      o *= CCSampleWithAlphaSeparated(cc_spriteTexture, uv0);</span><br><span class="line">    #endif</span><br><span class="line"></span><br><span class="line">    o *= color;</span><br><span class="line">    ALPHA_TEST(o);</span><br><span class="line"></span><br><span class="line">    #if ENABLE_LIGHT</span><br><span class="line">      o = addLightColor(o, lightColor, lightCenterPoint, lightAngle, lightWidth);</span><br><span class="line">    #endif</span><br><span class="line">    </span><br><span class="line">    return o;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;%</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><ul>
<li>æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªæè´¨</li>
<li>å°†ä¸Šé¢shaderä»£ç äºæè´¨è¿›è¡Œç»‘å®š</li>
<li>åœ¨tsè„šæœ¬ä»£ç ä¸­æ§åˆ¶æ‰«å…‰çš„ç§»åŠ¨</li>
</ul>
<h3 id="tsä»£ç "><a href="#tsä»£ç " class="headerlink" title="tsä»£ç "></a>tsä»£ç </h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">CCFloat</span>, <span class="title class_">Component</span>, <span class="title class_">Node</span>, <span class="title class_">Sprite</span>, <span class="title class_">Material</span>, <span class="title class_">Vec2</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ccclass</span>(<span class="string">&#x27;NewComponent&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">NewComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="meta">@property</span>(<span class="title class_">Sprite</span>)</span><br><span class="line">    sprite !: <span class="title class_">Sprite</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@property</span>(&#123; <span class="attr">type</span>: <span class="title class_">CCFloat</span>, <span class="attr">tooltip</span>: <span class="string">&quot;å…‰æŸå®½åº¦&quot;</span> &#125;)</span><br><span class="line">    lightWidth = <span class="number">0.03</span>;</span><br><span class="line">    <span class="meta">@property</span>(&#123; <span class="attr">type</span>: <span class="title class_">CCFloat</span>, <span class="attr">tooltip</span>: <span class="string">&quot;æ—¶é—´&quot;</span> &#125;)</span><br><span class="line">    <span class="title class_">LoopTime</span> = <span class="number">1.0</span>;</span><br><span class="line">    <span class="meta">@property</span>(&#123; <span class="attr">type</span>: <span class="title class_">CCFloat</span>, <span class="attr">tooltip</span>: <span class="string">&quot;TimeInterval&quot;</span> &#125;)</span><br><span class="line">    <span class="title class_">TimeInterval</span> = <span class="number">2.0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**è®°å½•æ—¶é—´ */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="attr">time</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/**ç²¾çµä¸Šçš„æè´¨ */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="attr">material</span>: <span class="title class_">Material</span> = <span class="literal">null</span>!;</span><br><span class="line">    <span class="keyword">private</span> startPos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> moveLength = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Speed</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> dttime = <span class="number">0</span>;</span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">time</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dttime</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">material</span> = <span class="variable language_">this</span>.<span class="property">sprite</span>.<span class="title function_">getMaterial</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">startPos</span> = -<span class="variable language_">this</span>.<span class="property">lightWidth</span> / <span class="number">2</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">moveLength</span> = <span class="variable language_">this</span>.<span class="property">lightWidth</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">Speed</span> = <span class="variable language_">this</span>.<span class="property">moveLength</span> / <span class="variable language_">this</span>.<span class="property">LoopTime</span> / <span class="number">2</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">time</span> = <span class="variable language_">this</span>.<span class="property">startPos</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">update</span>(<span class="params">dt: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">time</span> += dt * <span class="variable language_">this</span>.<span class="property">Speed</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dttime</span> += dt;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">material</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;lightCenterPoint&quot;</span>, <span class="keyword">new</span> <span class="title class_">Vec2</span>(<span class="variable language_">this</span>.<span class="property">time</span>, <span class="variable language_">this</span>.<span class="property">time</span>));          <span class="comment">//è®¾ç½®æè´¨å¯¹åº”çš„å±æ€§</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">dttime</span> &gt; <span class="variable language_">this</span>.<span class="property">LoopTime</span> + <span class="variable language_">this</span>.<span class="property">TimeInterval</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">time</span> = <span class="variable language_">this</span>.<span class="property">startPos</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dttime</span> = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å®Œæ•´demo"><a href="#å®Œæ•´demo" class="headerlink" title="å®Œæ•´demo"></a>å®Œæ•´demo</h3><p>[demoä¸‹è½½åœ°å€](<a href="https://github.com/lengmo714/Cocos">https://github.com/lengmo714/Cocos</a> Creator3.7.2-)</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorä½¿ç”¨spineéª¨éª¼åŠ¨ç”»æš‚åœã€ç»§ç»­ã€é‡æ–°æ’­æ”¾åŠ¨ç”»</title>
    <url>/1b5fdeff.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ç¬¬ä¸€æ¬¡ç”¨Creatorï¼Œspineå¥½åƒæ²¡æœ‰æä¾›åŠ¨ç”»æš‚åœä¸æ¢å¤çš„apiã€‚ä¹‹å‰ç”¨2dxçš„æ—¶å€™æ˜¯é€šè¿‡èŠ‚ç‚¹çš„æš‚åœå’Œæ¢å¤æ–¹æ³•æ¥å®ç°çš„ï¼Œä½†æ˜¯æ¢æˆCreatorå‘ç°nodeçš„<code>pauseAllActions()</code>æ–¹æ³•å¹¶æ²¡æœ‰æ•ˆæœã€‚</p>
<h3 id="æš‚åœï¼Œç»§ç»­"><a href="#æš‚åœï¼Œç»§ç»­" class="headerlink" title="æš‚åœï¼Œç»§ç»­"></a>æš‚åœï¼Œç»§ç»­</h3><p>æŸ¥æ‰¾äº†ä¸€ç•ªä¹‹åï¼Œå‘ç°<code>sp.Skeleton</code>ç»„ä»¶çš„apiä¸­å®šä¹‰äº†ä¸€ä¸ªæš‚åœçš„å­—æ®µ<code>paused</code>ï¼Œå°†è¿™ä¸ªå­—æ®µè®¾ç½®ä¸º<code>true</code>å³å¯æš‚åœåŠ¨ç”»ï¼Œè®¾ç½®ä¸º<code>false</code>ç»§ç»­åŠ¨ç”»ã€‚</p>
<p>ç¤ºä¾‹ä»£ç :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">sk</span> = <span class="variable language_">this</span>.<span class="property">spineNode</span>.<span class="title function_">getComponent</span>(<span class="string">&quot;sp.Skeleton&quot;</span>) <span class="keyword">as</span> sp.<span class="property">Skeleton</span>;</span><br><span class="line"><span class="title function_">stop</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sk</span>.<span class="property">paused</span>= <span class="literal">true</span>; <span class="comment">// æš‚åœåŠ¨ç”»</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">play</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sk</span>.<span class="property">paused</span>= <span class="literal">false</span>; <span class="comment">// ç»§ç»­æ’­æ”¾</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™é‡Œçš„å°†<code>paused</code>è®¾ç½®ä¸º<code>false</code>,åŠ¨ç”»å°†ä¼šåœ¨æš‚åœçš„åœ°æ–¹ç»§ç»­å¾€åé¢æ’­æ”¾ã€‚å¦‚æœæˆ‘ä»¬è¦æƒ³é‡å¤´æ’­æ”¾åŠ¨ç”»ï¼Œè¯¥æ–¹æ³•å°±ä¸é€‚ç”¨äº†ã€‚</p>
<h3 id="æš‚åœï¼Œé‡æ–°æ’­æ”¾"><a href="#æš‚åœï¼Œé‡æ–°æ’­æ”¾" class="headerlink" title="æš‚åœï¼Œé‡æ–°æ’­æ”¾"></a>æš‚åœï¼Œé‡æ–°æ’­æ”¾</h3><p>æˆ‘è¿™é‡Œçš„æ€è·¯æ˜¯å°†æ­£åœ¨è¿›è¡Œçš„åŠ¨ç”»çº¿ç®¡ç»™æ¸…é™¤æ‰ï¼Œç„¶åé‡æ–°æ’­æ”¾åŠ¨ç”»ã€‚</p>
<p>é‡æ–°æ’­æ”¾åŠ¨ç”»ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">sk</span> = <span class="variable language_">this</span>.<span class="property">spineNode</span>.<span class="title function_">getComponent</span>(<span class="string">&quot;sp.Skeleton&quot;</span>) <span class="keyword">as</span> sp.<span class="property">Skeleton</span>;</span><br><span class="line"><span class="title function_">stop</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sk</span>.<span class="title function_">clearTrack</span>(<span class="number">0</span>);<span class="comment">// æš‚åœåŠ¨ç”»</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">play</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sk</span>.<span class="title function_">setAnimation</span>(<span class="number">0</span>, <span class="string">&quot;animation&quot;</span>, <span class="literal">false</span>); <span class="comment">// é‡æ–°æ’­æ”¾åŠ¨ç”»</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ç²’å­ç‰¹æ•ˆåœ¨Cocos Creator 3.7.2ä¸­åˆ›é€ ä»¤äººæƒŠè‰³çš„æ•ˆæœ</title>
    <url>/9d7c5e64.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åœ¨æ¸¸æˆå¼€å‘è¿‡ç¨‹ä¸­ï¼Œç²’å­ç‰¹æ•ˆæ˜¯æå‡æ¸¸æˆç”»é¢è¡¨ç°åŠ›å’Œå¸å¼•ç©å®¶æ³¨æ„åŠ›çš„é‡è¦å·¥å…·ã€‚é€šè¿‡åˆç†ä½¿ç”¨ç²’å­ç³»ç»Ÿï¼Œä½ å¯ä»¥åˆ›é€ å‡ºç‚«ç›®çš„çˆ†ç‚¸ã€é­”æ³•æ•ˆæœå’Œå¤©æ°”ç­‰å¼•äººå…¥èƒœçš„æ¸¸æˆåœºæ™¯ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•åœ¨Cocos Creator 3.7.2ä¸­ä½¿ç”¨ç²’å­ç‰¹æ•ˆç³»ç»Ÿã€‚</p>
<p>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥è‡ªå·±åˆ›å»ºç²’å­æ•ˆæœï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä½ ä»¬å…¬å¸ç¾æœ¯ç»™ä½ æä¾›çš„ç²’å­æ•ˆæœæˆ–è€…è‡ªå·±åœ¨ç½‘ä¸Šæ‰¾ã€‚</p>
<p>è¿™é‡Œæˆ‘çš„ç²’å­æ•ˆæœæ˜¯ç¾æœ¯æä¾›çš„ï¼</p>
<h3 id="åˆ›å»ºç²’å­"><a href="#åˆ›å»ºç²’å­" class="headerlink" title="åˆ›å»ºç²’å­"></a>åˆ›å»ºç²’å­</h3><p>graph TD<br>åˆ›å»ºâ€“&gt;2Då¯¹è±¡â€“&gt;ParticleSystem2Dï¼ˆç²’å­ï¼‰<br><img data-src="https://pic.imgdb.cn/item/66432e9b0ea9cb14039d77d9.jpg" alt="" /><br>è¿™æ—¶å¯ä»¥çœ‹åˆ°ç¼–è¾‘å™¨ä¸­å·²ç»å­˜åœ¨ä¸€ä¸ªç³»ç»Ÿè‡ªå¸¦çš„ç²’å­æ•ˆæœäº†<br><img data-src="https://pic.imgdb.cn/item/66432edf0ea9cb14039ddd96.png" alt="" /><br>ä¸‹é¢æˆ‘ä»¬å¼€å§‹å¯¹ç²’å­è¿›è¡Œæ›¿æ¢</p>
<h3 id="ä¿®æ”¹File"><a href="#ä¿®æ”¹File" class="headerlink" title="ä¿®æ”¹File"></a>ä¿®æ”¹File</h3><p>åœ¨ä¸Šé¢å›¾ä¸­ï¼Œæˆ‘ä»¬ç‚¹å‡»ç²’å­å¯ä»¥åˆ°å³è¾¹çš„å±æ€§æ£€æŸ¥å™¨ä¸­æœ‰<code>File</code>ï¼Œè¿™ä¸ªå°±æ˜¯ç²’å­çš„é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œæ˜¯<code>.plist</code>æ ¼å¼çš„ã€‚<br>æˆ‘ä»¬ç°åœ¨å°†è¿™ä¸ªæ–‡ä»¶ä¿®æ”¹ä¸ºæˆ‘ä»¬è‡ªå·±çš„<br><img data-src="https://pic.imgdb.cn/item/66432fc10ea9cb14039fc4d9.png" alt="" /><br>å¯ä»¥çœ‹åˆ°ï¼Œæ–‡ä»¶æ›¿æ¢åç¼–è¾‘å™¨æŠ¥é”™äº†ï¼Œè€Œä¸”ç²’å­ä¹Ÿæ²¡æœ‰å‡ºç°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œè¿™æ˜¯å› ä¸ºæ²¡æœ‰æ‰¾åˆ°é…ç½®æ–‡ä»¶ä¸­çš„ç²’å­è´´å›¾æ–‡ä»¶ã€‚</p>
<h3 id="æ›¿æ¢è´´å›¾"><a href="#æ›¿æ¢è´´å›¾" class="headerlink" title="æ›¿æ¢è´´å›¾"></a>æ›¿æ¢è´´å›¾</h3><img data-src="https://pic.imgdb.cn/item/66432ff00ea9cb1403a06225.png" alt="" />
æˆ‘ä»¬å°†`Custom`å±æ€§å‰é¢çš„æ¡†æ¡†å‹¾ä¸Šï¼Œå°±å¯ä»¥çœ‹åˆ°`Sprite Frame`å±æ€§æ ‡çº¢ï¼Œæç¤º`Missing Asset`ï¼Œæˆ‘ä»¬å°†éœ€è¦ç”¨åˆ°çš„ç²’å­è´´å›¾æ‹–è¿‡æ¥å³å¯ã€‚
<img data-src="https://pic.imgdb.cn/item/6643301c0ea9cb1403a0afc0.png" alt="" />
è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è‡ªå·±æƒ³è¦æ›¿æ¢çš„ç²’å­æ•ˆæœäº†ã€‚

<h3 id="å¯¼å‡º"><a href="#å¯¼å‡º" class="headerlink" title="å¯¼å‡º"></a>å¯¼å‡º</h3><img data-src="https://pic.imgdb.cn/item/664330490ea9cb1403a10817.png" alt="" />
è¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦è¿›è¡Œæœ€åä¸€æ­¥ï¼Œå°†ç°åœ¨çš„ç²’å­é…ç½®å¯¼å‡ºï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ç›´æ¥ç”¨å¯¼å‡ºåçš„ç²’å­æ–‡ä»¶ï¼Œå°±å¯ä»¥å•¦ã€‚
> æ³¨æ„ï¼Œè¿™é‡Œä¸å¯¼å‡ºçš„è¯ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå­˜åœ¨æ‰¾ä¸åˆ°ç²’å­è´´å›¾çš„é—®é¢˜ã€‚

<h3 id="åŠ¨æ€æ›¿æ¢ç²’å­"><a href="#åŠ¨æ€æ›¿æ¢ç²’å­" class="headerlink" title="åŠ¨æ€æ›¿æ¢ç²’å­"></a>åŠ¨æ€æ›¿æ¢ç²’å­</h3><p>æˆ‘ä»¬åœ¨æ¸¸æˆå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šåŒä¸€ä¸ªèŠ‚ç‚¹ä¸‹æœ‰å‡ ç§ä¸åŒçš„ç²’å­ç‰¹æ•ˆï¼Œæ¯æ¬¡åªéœ€è¦æ’­æ”¾ä¸€ç§ã€‚æ¯”å¦‚ï¼šæ¸¸æˆå¤±è´¥æ—¶å€™ä¸€ç§ç²’å­ç‰¹æ•ˆï¼Œæ¸¸æˆèƒœåˆ©çš„æ—¶å€™ä¸€ç§ç²’å­ç‰¹æ•ˆã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åªåˆ›å»ºä¸€ä¸ª<code>ParticleSystem2D</code>èŠ‚ç‚¹ï¼Œç„¶åæ ¹æ®ä¸åŒçš„æƒ…å†µå»æ›´æ¢ç²’å­çš„<code>File</code>æ–‡ä»¶ï¼Œä»è€Œæ’­æ”¾ä¸åŒçš„ç‰¹æ•ˆã€‚<br>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> parent = node; <span class="comment">// ParticleSystem2DèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">parent.<span class="title function_">getChildByName</span>(<span class="string">&quot;Particle2D&quot;</span>).<span class="title function_">getComponent</span>(<span class="title class_">ParticleSystem2D</span>).<span class="title function_">stopSystem</span>();  <span class="comment">// å…ˆåœæ­¢å‘å°„ä¹‹å‰çš„ç²’å­</span></span><br><span class="line">resources.<span class="title function_">load</span>(<span class="string">`<span class="subst">$&#123;FilePath&#125;</span>`</span>, <span class="title class_">ParticleAsset</span>, <span class="function">(<span class="params">err, ParticleAsset</span>) =&gt;</span> &#123;   <span class="comment">// ä¿®æ”¹ç²’å­çš„Fileæ–‡ä»¶ï¼Œå…¶å®å°±æ˜¯ä¿®æ”¹ç²’å­åŠ¨ç”»</span></span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to load file:&#x27;</span>, err);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    parent.<span class="title function_">getChildByName</span>(<span class="string">&quot;Particle2D&quot;</span>).<span class="title function_">getComponent</span>(<span class="title class_">ParticleSystem2D</span>).<span class="property">file</span> = <span class="title class_">ParticleAsset</span>;</span><br><span class="line">&#125;);</span><br><span class="line">parent.<span class="title function_">getChildByName</span>(<span class="string">&quot;Particle2D&quot;</span>).<span class="title function_">getComponent</span>(<span class="title class_">ParticleSystem2D</span>).<span class="title function_">resetSystem</span>();   <span class="comment">//ä¿®æ”¹å®Œç²’å­åï¼Œé‡å¯ç²’å­åŠ¨ç”»</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>ç²’å­ç‰¹æ•ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>Creating Stunning Effects with Particle Systems in Cocos Creator 3.7.2</title>
    <url>/9d7c5e64en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>In game development, particle effects are an essential tool for enhancing visual appeal and capturing player attention. By properly utilizing the particle system, you can create dazzling explosions, magical effects, weather simulations, and more. In this article, we will cover how to use the particle system in Cocos Creator 3.7.2.</p>
<p>When using particle effects, you can create them yourself, use those provided by your art team, or find them online.</p>
<p>In my case, the particle effects were provided by the art team!</p>
<h3 id="Creating-a-Particle"><a href="#Creating-a-Particle" class="headerlink" title="Creating a Particle"></a>Creating a Particle</h3><p>graph TD<br>Creation â€“&gt; 2D Object â€“&gt; ParticleSystem2D (Particle)<br><img data-src="https://pic.imgdb.cn/item/66432e9b0ea9cb14039d77d9.jpg" alt="" /></p>
<p>You will now see a default particle effect provided by the editor.<br><img data-src="https://pic.imgdb.cn/item/66432edf0ea9cb14039ddd96.png" alt="" /></p>
<p>Next, letâ€™s proceed to replace the particle.</p>
<h3 id="Modify-File"><a href="#Modify-File" class="headerlink" title="Modify File"></a>Modify File</h3><p>In the image above, click on the particle, and youâ€™ll see the <code>File</code> field in the property inspector on the right. This is the particle configuration file, usually in <code>.plist</code> format. Replace this file with your own:<br><img data-src="https://pic.imgdb.cn/item/66432fc10ea9cb14039fc4d9.png" alt="" /></p>
<p>After replacing the file, you might see an error in the editor, and the desired particle effect may not appear. This happens because the particle texture file mentioned in the configuration is missing.</p>
<h3 id="Replace-Texture"><a href="#Replace-Texture" class="headerlink" title="Replace Texture"></a>Replace Texture</h3><img data-src="https://pic.imgdb.cn/item/66432ff00ea9cb1403a06225.png" alt="" />

<p>Tick the checkbox next to <code>Custom</code>, and youâ€™ll see that the <code>Sprite Frame</code> field is marked in red, indicating <code>Missing Asset</code>. Drag the required particle texture into this field.<br><img data-src="https://pic.imgdb.cn/item/6643301c0ea9cb1403a0afc0.png" alt="" /></p>
<p>Now, you should see the desired particle effect.</p>
<h3 id="Export"><a href="#Export" class="headerlink" title="Export"></a>Export</h3><img data-src="https://pic.imgdb.cn/item/664330490ea9cb1403a10817.png" alt="" />

<p>Thereâ€™s one last step: export the current particle configuration. This allows you to use the exported particle file directly in your project. </p>
<blockquote>
<p>Note: Failing to export may result in issues finding the particle texture during gameplay.</p>
</blockquote>
<h3 id="Dynamically-Replace-Particles"><a href="#Dynamically-Replace-Particles" class="headerlink" title="Dynamically Replace Particles"></a>Dynamically Replace Particles</h3><p>In game development, you may encounter situations where the same node has multiple different particle effects, but only one needs to be played at a time. For example, there might be one particle effect for when the player loses and another for when they win. In such cases, you can create a single <code>ParticleSystem2D</code> node and dynamically switch the particle <code>File</code> to play the desired effect.</p>
<p>Sample Code:</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> parent = node; <span class="comment">// Parent node of the ParticleSystem2D node</span></span><br><span class="line">parent.<span class="title function_">getChildByName</span>(<span class="string">&quot;Particle2D&quot;</span>).<span class="title function_">getComponent</span>(<span class="title class_">ParticleSystem2D</span>).<span class="title function_">stopSystem</span>();  <span class="comment">// Stop the previous particle effect</span></span><br><span class="line">resources.<span class="title function_">load</span>(<span class="string">`<span class="subst">$&#123;FilePath&#125;</span>`</span>, <span class="title class_">ParticleAsset</span>, <span class="function">(<span class="params">err, ParticleAsset</span>) =&gt;</span> &#123;   <span class="comment">// Change the particle File, effectively switching the animation</span></span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to load file:&#x27;</span>, err);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    parent.<span class="title function_">getChildByName</span>(<span class="string">&quot;Particle2D&quot;</span>).<span class="title function_">getComponent</span>(<span class="title class_">ParticleSystem2D</span>).<span class="property">file</span> = <span class="title class_">ParticleAsset</span>;</span><br><span class="line">&#125;);</span><br><span class="line">parent.<span class="title function_">getChildByName</span>(<span class="string">&quot;Particle2D&quot;</span>).<span class="title function_">getComponent</span>(<span class="title class_">ParticleSystem2D</span>).<span class="title function_">resetSystem</span>();   <span class="comment">// Restart the particle effect after modification</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Game Development</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>Particle Effects</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorä¿®æ”¹èŠ‚ç‚¹å±‚çº§</title>
    <url>/d23c2fe2.html</url>
    <content><![CDATA[<p>è¦åœ¨Cocos Creatorä¸­ä¿®æ”¹èŠ‚ç‚¹çš„å±‚çº§ï¼ˆzè½´é¡ºåºï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨èŠ‚ç‚¹çš„<code>setSiblingIndex</code>æ–¹æ³•ã€‚è¿™å…è®¸ä½ åœ¨åŒçº§èŠ‚ç‚¹ä¹‹é—´é‡æ–°æ’åˆ—èŠ‚ç‚¹çš„æ¸²æŸ“é¡ºåºã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<span id="more"></span>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªèŠ‚ç‚¹åˆ—è¡¨ï¼Œå¹¶ä¸”æƒ³è¦å°†å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ç§»åˆ°å…¶ä»–èŠ‚ç‚¹ä¹‹ä¸Šï¼š</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–èŠ‚ç‚¹çš„å¼•ç”¨</span></span><br><span class="line"><span class="keyword">const</span> nodeToMove = cc.<span class="title function_">find</span>(<span class="string">&quot;NodeToMove&quot;</span>); <span class="comment">// ç”¨ä½ çš„èŠ‚ç‚¹åç§°æ›¿æ¢&quot;NodeToMove&quot;</span></span><br><span class="line"><span class="keyword">const</span> targetNode = cc.<span class="title function_">find</span>(<span class="string">&quot;TargetNode&quot;</span>); <span class="comment">// ç”¨ä½ çš„ç›®æ ‡èŠ‚ç‚¹çš„åç§°æ›¿æ¢&quot;TargetNode&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ç›®æ ‡èŠ‚ç‚¹çš„å½“å‰å±‚çº§ç´¢å¼•</span></span><br><span class="line"><span class="keyword">const</span> targetIndex = targetNode.<span class="title function_">getSiblingIndex</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†è¦ç§»åŠ¨çš„èŠ‚ç‚¹ç§»åˆ°ç›®æ ‡èŠ‚ç‚¹ä¹‹ä¸Š</span></span><br><span class="line">nodeToMove.<span class="title function_">setSiblingIndex</span>(targetIndex + <span class="number">1</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç é¦–å…ˆè·å–äº†è¦ç§»åŠ¨çš„èŠ‚ç‚¹ï¼ˆ<code>nodeToMove</code>ï¼‰å’Œç›®æ ‡èŠ‚ç‚¹ï¼ˆ<code>targetNode</code>ï¼‰çš„å¼•ç”¨ã€‚ç„¶åï¼Œå®ƒè·å–äº†ç›®æ ‡èŠ‚ç‚¹çš„å½“å‰å±‚çº§ç´¢å¼•ï¼Œä½¿ç”¨<code>getSiblingIndex</code>æ–¹æ³•ã€‚æœ€åï¼Œå®ƒä½¿ç”¨<code>setSiblingIndex</code>æ–¹æ³•å°†è¦ç§»åŠ¨çš„èŠ‚ç‚¹ç§»åˆ°ç›®æ ‡èŠ‚ç‚¹ä¹‹ä¸Šï¼Œé€šè¿‡å°†ç›®æ ‡èŠ‚ç‚¹çš„å±‚çº§ç´¢å¼•åŠ 1ã€‚</p>
<p>ç¡®ä¿ä½ åœ¨ä»£ç ä¸­ä½¿ç”¨æ­£ç¡®çš„èŠ‚ç‚¹åç§°æ›¿æ¢<code>NodeToMove</code>â€œå’Œ<code>TargetNode</code>â€œï¼Œä»¥ä¾¿æ‰¾åˆ°ä½ çš„èŠ‚ç‚¹ã€‚æ­¤å¤–ï¼Œç¡®ä¿åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨è¿™æ®µä»£ç ï¼Œä»¥ç¡®ä¿æ­£ç¡®çš„èŠ‚ç‚¹å±‚çº§å…³ç³»ã€‚</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatoråˆ›å»ºåœ†å½¢é®ç½©Mask</title>
    <url>/661b115d.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>è¦å°†æ–¹å½¢å›¾ç‰‡æ˜¾ç¤ºæˆåœ†å½¢ï¼Œä½ å¯ä»¥ä½¿ç”¨Cocos Creatorå’ŒTypeScriptæ¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„åœ†å½¢é®ç½©ï¼ˆmaskï¼‰ã€‚ä»¥ä¸‹æ˜¯å®ç°è¿™ä¸ªæ•ˆæœçš„æ­¥éª¤ï¼š</p>
<ol>
<li>åœ¨Cocos Creatorä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„CanvasèŠ‚ç‚¹ï¼Œç„¶ååœ¨CanvasèŠ‚ç‚¹ä¸‹åˆ›å»ºä¸€ä¸ªSpriteèŠ‚ç‚¹ï¼Œå°†ä½ çš„æ–¹å½¢å›¾ç‰‡ï¼ˆæˆ–ä»»ä½•ä½ æƒ³è¦æ˜¾ç¤ºæˆåœ†å½¢çš„å›¾ç‰‡ï¼‰æ·»åŠ åˆ°Spriteç»„ä»¶ä¸­ã€‚</li>
<li>åœ¨CanvasèŠ‚ç‚¹ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„NodeèŠ‚ç‚¹ï¼Œç”¨äºä½œä¸ºé®ç½©ã€‚ä½ å¯ä»¥å°†è¿™ä¸ªèŠ‚ç‚¹å‘½åä¸ºâ€Maskâ€ã€‚</li>
<li>å°†MaskèŠ‚ç‚¹çš„ContentSizeè®¾ç½®ä¸ºä¸ä½ çš„å›¾ç‰‡ç›¸åŒçš„å¤§å°ï¼Œä»¥ç¡®ä¿é®ç½©å¤§å°ä¸å›¾ç‰‡å¤§å°ç›¸åŒ¹é…ã€‚</li>
<li>åœ¨MaskèŠ‚ç‚¹ä¸Šæ·»åŠ ä¸€ä¸ªGraphicsç»„ä»¶ã€‚è¿™ä¸ªç»„ä»¶å°†ç”¨äºç»˜åˆ¶åœ†å½¢é®ç½©ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼ˆ.tsï¼‰ï¼Œå¹¶å°†å…¶é™„åŠ åˆ°MaskèŠ‚ç‚¹ä¸Šã€‚ç„¶åï¼Œåœ¨è„šæœ¬ä¸­ç¼–å†™ä»¥ä¸‹ä»£ç æ¥ç»˜åˆ¶ä¸€ä¸ªåœ†å½¢é®ç½©ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Component</span>, color,<span class="title class_">Graphics</span>, <span class="title class_">Size</span>, <span class="title class_">UITransform</span> &#125; <span class="keyword">from</span> <span class="string">&quot;cc&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ccclass</span>(<span class="string">&quot;MaskCircle&quot;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MaskCircle</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="meta">@property</span>(<span class="title class_">Graphics</span>)</span><br><span class="line">    <span class="attr">maskGraphics</span>: <span class="title class_">Graphics</span> = <span class="literal">null</span>!;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">drawCircleMask</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">drawCircleMask</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// è·å–Graphicsç»„ä»¶</span></span><br><span class="line">        <span class="keyword">const</span> <span class="attr">graphics</span>: <span class="title class_">Graphics</span> = <span class="variable language_">this</span>.<span class="property">maskGraphics</span>;</span><br><span class="line">        <span class="comment">// æ¸…é™¤å·²æœ‰çš„ç»˜åˆ¶</span></span><br><span class="line">        graphics.<span class="title function_">clear</span>();</span><br><span class="line">        <span class="comment">// ç»˜åˆ¶ä¸€ä¸ªåœ†å½¢é®ç½©</span></span><br><span class="line">        graphics.<span class="property">fillColor</span> = <span class="title function_">color</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>); <span class="comment">// å¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®é¢œè‰²</span></span><br><span class="line">        graphics.<span class="title function_">circle</span>(<span class="number">0</span>,<span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>).<span class="property">width</span> / <span class="number">2</span>);</span><br><span class="line">        graphics.<span class="title function_">fill</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li>å›åˆ°Cocos Creatorç¼–è¾‘å™¨ï¼Œåœ¨MaskèŠ‚ç‚¹çš„Inspectoré¢æ¿ä¸­ï¼Œå°†MaskCircleç»„ä»¶çš„maskGraphicså­—æ®µæ‹–åŠ¨åˆ°Graphicsç»„ä»¶ä¸Šï¼Œä»¥ä¾¿å°†å®ƒä»¬å…³è”èµ·æ¥ã€‚</li>
<li>ç¡®ä¿MaskèŠ‚ç‚¹ä¸ä½ çš„å›¾ç‰‡èŠ‚ç‚¹é‡å ï¼Œç„¶åå°†å›¾ç‰‡èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºMaskèŠ‚ç‚¹ï¼Œä»¥ä¾¿å›¾ç‰‡å—åˆ°é®ç½©çš„å½±å“ã€‚</li>
<li>è¿è¡Œä½ çš„æ¸¸æˆï¼Œä½ å°†çœ‹åˆ°å›¾ç‰‡è¢«æ˜¾ç¤ºä¸ºåœ†å½¢ã€‚</li>
</ol>
<p>é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œä½ å¯ä»¥ä½¿ç”¨Cocos Creatorå’ŒTypeScriptå°†æ–¹å½¢å›¾ç‰‡æ˜¾ç¤ºæˆåœ†å½¢ã€‚è¯·ç¡®ä¿è°ƒæ•´é®ç½©èŠ‚ç‚¹çš„å¤§å°ä»¥åŒ¹é…ä½ çš„å›¾ç‰‡å¤§å°ï¼Œå¹¶æ ¹æ®éœ€è¦è‡ªå®šä¹‰é®ç½©çš„é¢œè‰²å’Œå½¢çŠ¶ã€‚</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Modifying Node Hierarchy in Cocos Creator</title>
    <url>/d23c2fe2en.html</url>
    <content><![CDATA[<p>To modify the hierarchy (z-order) of nodes in Cocos Creator, you can use the <code>setSiblingIndex</code> method. This allows you to rearrange the rendering order among sibling nodes. Hereâ€™s an example:</p>
<span id="more"></span>

<p>Suppose you have a list of nodes and want to move one of them above the others:</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Example-Code"><a href="#Example-Code" class="headerlink" title="Example Code:"></a>Example Code:</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Get references to the nodes</span></span><br><span class="line"><span class="keyword">const</span> nodeToMove = cc.<span class="title function_">find</span>(<span class="string">&quot;NodeToMove&quot;</span>); <span class="comment">// Replace &quot;NodeToMove&quot; with your node&#x27;s name</span></span><br><span class="line"><span class="keyword">const</span> targetNode = cc.<span class="title function_">find</span>(<span class="string">&quot;TargetNode&quot;</span>); <span class="comment">// Replace &quot;TargetNode&quot; with the target node&#x27;s name</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Get the current sibling index of the target node</span></span><br><span class="line"><span class="keyword">const</span> targetIndex = targetNode.<span class="title function_">getSiblingIndex</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Move the node above the target node</span></span><br><span class="line">nodeToMove.<span class="title function_">setSiblingIndex</span>(targetIndex + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>The code above first retrieves references to the node you want to move (<code>nodeToMove</code>) and the target node (<code>targetNode</code>). It then obtains the current hierarchy index of the target node using the <code>getSiblingIndex</code> method. Finally, it uses the <code>setSiblingIndex</code> method to move <code>nodeToMove</code> above <code>targetNode</code> by setting the sibling index to <code>targetIndex + 1</code>.</p>
<p>Make sure to replace <code>&quot;NodeToMove&quot;</code> and <code>&quot;TargetNode&quot;</code> in your code with the actual names of your nodes so they can be correctly located. Additionally, ensure that this code is executed at an appropriate time to maintain the correct node hierarchy.</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Creating Circular Mask in Cocos Creator</title>
    <url>/661b115den.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>To display a square image as a circle, you can use Cocos Creator and TypeScript to create a custom circular mask. Below are the steps to achieve this effect:</p>
<ol>
<li>Create a new Canvas node in Cocos Creator, then create a Sprite node under the Canvas node. Add your square image (or any image you want to display as a circle) to the Sprite component.</li>
<li>Create a new Node under the Canvas node to serve as the mask. You can name this node â€œMask.â€</li>
<li>Set the ContentSize of the Mask node to match the size of your image, ensuring the mask and image are the same size.</li>
<li>Add a Graphics component to the Mask node. This component will be used to draw the circular mask.</li>
<li>Create a script file (.ts) and attach it to the Mask node. Then, write the following code in the script to draw a circular mask:</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Component</span>, color, <span class="title class_">Graphics</span>, <span class="title class_">Size</span>, <span class="title class_">UITransform</span> &#125; <span class="keyword">from</span> <span class="string">&quot;cc&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ccclass</span>(<span class="string">&quot;MaskCircle&quot;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MaskCircle</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="meta">@property</span>(<span class="title class_">Graphics</span>)</span><br><span class="line">    <span class="attr">maskGraphics</span>: <span class="title class_">Graphics</span> = <span class="literal">null</span>!;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">drawCircleMask</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">drawCircleMask</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// Get the Graphics component</span></span><br><span class="line">        <span class="keyword">const</span> <span class="attr">graphics</span>: <span class="title class_">Graphics</span> = <span class="variable language_">this</span>.<span class="property">maskGraphics</span>;</span><br><span class="line">        <span class="comment">// Clear any existing drawing</span></span><br><span class="line">        graphics.<span class="title function_">clear</span>();</span><br><span class="line">        <span class="comment">// Draw a circular mask</span></span><br><span class="line">        graphics.<span class="property">fillColor</span> = <span class="title function_">color</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>); <span class="comment">// Adjust color as needed</span></span><br><span class="line">        graphics.<span class="title function_">circle</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>).<span class="property">width</span> / <span class="number">2</span>);</span><br><span class="line">        graphics.<span class="title function_">fill</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>Return to the Cocos Creator editor, and in the Inspector panel of the Mask node, drag the Graphics component onto the <code>maskGraphics</code> field of the MaskCircle component to link them.</li>
<li>Ensure the Mask node overlaps with your image node, then set the parent of the image node to be the Mask node so that the image is affected by the mask.</li>
<li>Run your game, and you will see the image displayed as a circle.</li>
</ol>
<p>By following these steps, you can use Cocos Creator and TypeScript to display a square image as a circular one. Make sure to adjust the size of the mask node to match your image and customize the maskâ€™s color and shape as needed.</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos CreatoråŠ è½½è¿œç¨‹èµ„æº</title>
    <url>/7c5264c2.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="è¿œç¨‹-url-å¸¦å›¾ç‰‡åç¼€å"><a href="#è¿œç¨‹-url-å¸¦å›¾ç‰‡åç¼€å" class="headerlink" title="è¿œç¨‹ url å¸¦å›¾ç‰‡åç¼€å"></a>è¿œç¨‹ url å¸¦å›¾ç‰‡åç¼€å</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> remoteUrl = <span class="string">&quot;http://unknown.org/someres.png&quot;</span>;</span><br><span class="line">assetManager.<span class="property">loadRemote</span>&lt;<span class="title class_">ImageAsset</span>&gt;(remoteUrl, <span class="keyword">function</span> (<span class="params">err, imageAsset</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">    <span class="keyword">const</span> texture = <span class="keyword">new</span> <span class="title class_">Texture2D</span>();</span><br><span class="line">    texture.<span class="property">image</span> = imageAsset;</span><br><span class="line">    spriteFrame.<span class="property">texture</span> = texture;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="è¿œç¨‹-url-ä¸å¸¦å›¾ç‰‡åç¼€åï¼Œæ­¤æ—¶å¿…é¡»æŒ‡å®šè¿œç¨‹å›¾ç‰‡æ–‡ä»¶çš„ç±»å‹"><a href="#è¿œç¨‹-url-ä¸å¸¦å›¾ç‰‡åç¼€åï¼Œæ­¤æ—¶å¿…é¡»æŒ‡å®šè¿œç¨‹å›¾ç‰‡æ–‡ä»¶çš„ç±»å‹" class="headerlink" title="è¿œç¨‹ url ä¸å¸¦å›¾ç‰‡åç¼€åï¼Œæ­¤æ—¶å¿…é¡»æŒ‡å®šè¿œç¨‹å›¾ç‰‡æ–‡ä»¶çš„ç±»å‹"></a>è¿œç¨‹ url ä¸å¸¦å›¾ç‰‡åç¼€åï¼Œæ­¤æ—¶å¿…é¡»æŒ‡å®šè¿œç¨‹å›¾ç‰‡æ–‡ä»¶çš„ç±»å‹</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> remoteUrl = <span class="string">&quot;http://unknown.org/emoji?id=124982374&quot;</span>;</span><br><span class="line">assetManager.<span class="property">loadRemote</span>&lt;<span class="title class_">ImageAsset</span>&gt;(remoteUrl, &#123;<span class="attr">ext</span>: <span class="string">&#x27;.png&#x27;</span>&#125;, <span class="keyword">function</span> (<span class="params">err, imageAsset</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">    <span class="keyword">const</span> texture = <span class="keyword">new</span> <span class="title class_">Texture2D</span>();</span><br><span class="line">    texture.<span class="property">image</span> = imageAsset;</span><br><span class="line">    spriteFrame.<span class="property">texture</span> = texture;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h3 id="ç”¨ç»å¯¹è·¯å¾„åŠ è½½è®¾å¤‡å­˜å‚¨å†…çš„èµ„æºï¼Œæ¯”å¦‚ç›¸å†Œ"><a href="#ç”¨ç»å¯¹è·¯å¾„åŠ è½½è®¾å¤‡å­˜å‚¨å†…çš„èµ„æºï¼Œæ¯”å¦‚ç›¸å†Œ" class="headerlink" title="ç”¨ç»å¯¹è·¯å¾„åŠ è½½è®¾å¤‡å­˜å‚¨å†…çš„èµ„æºï¼Œæ¯”å¦‚ç›¸å†Œ"></a>ç”¨ç»å¯¹è·¯å¾„åŠ è½½è®¾å¤‡å­˜å‚¨å†…çš„èµ„æºï¼Œæ¯”å¦‚ç›¸å†Œ</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> absolutePath = <span class="string">&quot;/dara/data/some/path/to/image.png&quot;</span>;</span><br><span class="line">assetManager.<span class="property">loadRemote</span>&lt;<span class="title class_">ImageAsset</span>&gt;(absolutePath, <span class="keyword">function</span> (<span class="params">err, imageAsset</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">    <span class="keyword">const</span> texture = <span class="keyword">new</span> <span class="title class_">Texture2D</span>();</span><br><span class="line">    texture.<span class="property">image</span> = imageAsset;</span><br><span class="line">    spriteFrame.<span class="property">texture</span> = texture;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h3 id="è¿œç¨‹éŸ³é¢‘"><a href="#è¿œç¨‹éŸ³é¢‘" class="headerlink" title="è¿œç¨‹éŸ³é¢‘"></a>è¿œç¨‹éŸ³é¢‘</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">remoteUrl = <span class="string">&quot;http://unknown.org/sound.mp3&quot;</span>;</span><br><span class="line">assetManager.<span class="title function_">loadRemote</span>(remoteUrl, <span class="keyword">function</span> (<span class="params">err, audioClip</span>) &#123;</span><br><span class="line">    <span class="comment">// play audio clip</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="è¿œç¨‹æ–‡æœ¬"><a href="#è¿œç¨‹æ–‡æœ¬" class="headerlink" title="è¿œç¨‹æ–‡æœ¬"></a>è¿œç¨‹æ–‡æœ¬</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">remoteUrl = <span class="string">&quot;http://unknown.org/skill.txt&quot;</span>;</span><br><span class="line">assetManager.<span class="title function_">loadRemote</span>(remoteUrl, <span class="keyword">function</span> (<span class="params">err, textAsset</span>) &#123;</span><br><span class="line">    <span class="comment">// use string to do something</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Loading Remote Resources in Cocos Creator</title>
    <url>/7c5264c2en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Remote-URL-with-Image-File-Extension"><a href="#Remote-URL-with-Image-File-Extension" class="headerlink" title="Remote URL with Image File Extension"></a>Remote URL with Image File Extension</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> remoteUrl = <span class="string">&quot;http://unknown.org/someres.png&quot;</span>;</span><br><span class="line">assetManager.<span class="property">loadRemote</span>&lt;<span class="title class_">ImageAsset</span>&gt;(remoteUrl, <span class="keyword">function</span> (<span class="params">err, imageAsset</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">    <span class="keyword">const</span> texture = <span class="keyword">new</span> <span class="title class_">Texture2D</span>();</span><br><span class="line">    texture.<span class="property">image</span> = imageAsset;</span><br><span class="line">    spriteFrame.<span class="property">texture</span> = texture;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Remote-URL-Without-Image-File-Extension"><a href="#Remote-URL-Without-Image-File-Extension" class="headerlink" title="Remote URL Without Image File Extension"></a>Remote URL Without Image File Extension</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> remoteUrl = <span class="string">&quot;http://unknown.org/emoji?id=124982374&quot;</span>;</span><br><span class="line">assetManager.<span class="property">loadRemote</span>&lt;<span class="title class_">ImageAsset</span>&gt;(remoteUrl, &#123;<span class="attr">ext</span>: <span class="string">&#x27;.png&#x27;</span>&#125;, <span class="keyword">function</span> (<span class="params">err, imageAsset</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">    <span class="keyword">const</span> texture = <span class="keyword">new</span> <span class="title class_">Texture2D</span>();</span><br><span class="line">    texture.<span class="property">image</span> = imageAsset;</span><br><span class="line">    spriteFrame.<span class="property">texture</span> = texture;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h3 id="Load-Resources-from-Device-Storage-Using-Absolute-Paths-e-g-Photo-Gallery"><a href="#Load-Resources-from-Device-Storage-Using-Absolute-Paths-e-g-Photo-Gallery" class="headerlink" title="Load Resources from Device Storage Using Absolute Paths (e.g., Photo Gallery)"></a>Load Resources from Device Storage Using Absolute Paths (e.g., Photo Gallery)</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> absolutePath = <span class="string">&quot;/dara/data/some/path/to/image.png&quot;</span>;</span><br><span class="line">assetManager.<span class="property">loadRemote</span>&lt;<span class="title class_">ImageAsset</span>&gt;(absolutePath, <span class="keyword">function</span> (<span class="params">err, imageAsset</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">    <span class="keyword">const</span> texture = <span class="keyword">new</span> <span class="title class_">Texture2D</span>();</span><br><span class="line">    texture.<span class="property">image</span> = imageAsset;</span><br><span class="line">    spriteFrame.<span class="property">texture</span> = texture;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h3 id="Remote-Audio"><a href="#Remote-Audio" class="headerlink" title="Remote Audio"></a>Remote Audio</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">remoteUrl = <span class="string">&quot;http://unknown.org/sound.mp3&quot;</span>;</span><br><span class="line">assetManager.<span class="title function_">loadRemote</span>(remoteUrl, <span class="keyword">function</span> (<span class="params">err, audioClip</span>) &#123;</span><br><span class="line">    <span class="comment">// play audio clip</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Remote-Text"><a href="#Remote-Text" class="headerlink" title="Remote Text"></a>Remote Text</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">remoteUrl = <span class="string">&quot;http://unknown.org/skill.txt&quot;</span>;</span><br><span class="line">assetManager.<span class="title function_">loadRemote</span>(remoteUrl, <span class="keyword">function</span> (<span class="params">err, textAsset</span>) &#123;</span><br><span class="line">    <span class="comment">// use string to do something</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos CreatoråŠ¨æ€ä¿®æ”¹ç²¾çµå›¾ç‰‡</title>
    <url>/250edf34.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»Šå¤©åœ¨ç”¨Cocos Creatorå†™ä»£ç è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç»™7ä¸ªç²¾çµåŠ¨æ€ä¿®æ”¹å›¾ç‰‡ã€‚å‡ºç°äº†ä¸‹é¢é”™è¯¯ã€‚å›¾ç‰‡æ‰¾ä¸åˆ°</p>
<img data-src="https://s1.ax1x.com/2023/04/13/ppx2mSP.png" alt="" />

<p>è‡ªå·±å°±å¾ˆéƒé—·ï¼ŒæŸ¥çœ‹å›¾ç‰‡è·¯å¾„åˆæ˜¯æ²¡æœ‰é—®é¢˜çš„<br><img data-src="https://s1.ax1x.com/2023/04/13/ppx2ZWt.png" alt="" /></p>
<p>ä¸‹é¢ç»™å‡ºæœ‰bugå’Œè§£å†³bugçš„ä»£ç <br>æœ‰bug</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="attr">i</span>:<span class="built_in">number</span> = <span class="number">0</span>;i&lt;<span class="number">7</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">    <span class="keyword">let</span> imagePath = <span class="string">&quot;ui/Atlas/gameHall/game_type_btn_&quot;</span> + (i+<span class="number">1</span>) + <span class="string">&quot;.png&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;imagePath = &quot;</span>,imagePath);</span><br><span class="line">    resources.<span class="title function_">load</span>(imagePath,<span class="title class_">SpriteFrame</span>,<span class="function">(<span class="params">err,res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å›¾ç‰‡ä¸å­˜åœ¨&quot;</span>,err)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        spriteFrame = res;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hallImage</span>[i].<span class="property">spriteFrame</span> = spriteFrame;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ²¡bug</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="attr">i</span>:<span class="built_in">number</span> = <span class="number">0</span>;i&lt;<span class="number">7</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">    <span class="keyword">let</span> imagePath = <span class="string">&quot;ui/Atlas/gameHall/game_type_btn_&quot;</span> + (i+<span class="number">1</span>) + <span class="string">&quot;/spriteFrame&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;imagePath = &quot;</span>,imagePath);</span><br><span class="line">    resources.<span class="title function_">load</span>(imagePath,<span class="title class_">SpriteFrame</span>,<span class="function">(<span class="params">err,res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å›¾ç‰‡ä¸å­˜åœ¨&quot;</span>,err)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        spriteFrame = res;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hallImage</span>[i].<span class="title function_">getComponent</span>(<span class="title class_">Sprite</span>).<span class="property">spriteFrame</span> = spriteFrame;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
        <tag>Cocos</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos CreatoråŠ¨æ€åˆ·æ–°Label</title>
    <url>/31318c8f.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åœ¨æ¸¸æˆå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œ<code>Label</code>æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ç»„ä»¶ï¼Œè€Œä¸”åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯ç»å¸¸åŠ¨æ€çš„ä¿®æ”¹<code>Label</code>å¹¶è·å–å…¶é•¿åº¦ã€‚<br>ä½†æ˜¯æˆ‘ä»¬åœ¨è·å–é•¿åº¦çš„æ—¶å€™ä¼šå‘ç°ï¼Œè·å–åˆ°çš„å­—ç¬¦é•¿åº¦æ˜¯ä¿®æ”¹å‰çš„ï¼Œå¹¶éä¿®æ”¹åæˆ‘ä»¬æƒ³è¦è·å–çš„é‚£ä¸ªå­—ç¬¦çš„é•¿åº¦ã€‚</p>
<p>è¿™æ—¶æœ‰ä¸¤ä¸ªåŠæ³•å¯ä»¥è§£å†³ï¼š<br><strong>1</strong> ä½¿ç”¨å®šæ—¶å™¨<br>ä½¿ç”¨å®šæ—¶å™¨ï¼Œåœ¨ä¸‹ä¸€å¸§çš„æ—¶å€™åˆ·æ–°<code>Label</code>å¹¶è·å–å®ƒçš„é•¿åº¦<br><strong>2</strong> ä½¿ç”¨<code>updateRenderData(true)</code>åˆ·æ–°ï¼ˆæ¨èä½¿ç”¨è¯¥æ–¹æ³•ï¼‰<br>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">label.<span class="property">node</span>.<span class="title function_">getComponent</span>(<span class="title class_">Label</span>).<span class="title function_">updateRenderData</span>(<span class="literal">true</span>);</span><br><span class="line"><span class="keyword">let</span> size = label.<span class="property">node</span>.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Dynamically Change Sprite Images in Cocos Creator</title>
    <url>/250edf34en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>During the development process with Cocos Creator, I encountered an issue when trying to dynamically change images for 7 sprites. The following error occurred where the images could not be found:</p>
<img data-src="https://s1.ax1x.com/2023/04/13/ppx2mSP.png" alt="" />

<p>I was puzzled because the image paths seemed correct:<br><img data-src="https://s1.ax1x.com/2023/04/13/ppx2ZWt.png" alt="" /></p>
<p>Here are examples of the code with the bug and the solution:</p>
<h3 id="Code-with-Bug"><a href="#Code-with-Bug" class="headerlink" title="Code with Bug:"></a>Code with Bug:</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="attr">i</span>: <span class="built_in">number</span> = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">    <span class="keyword">let</span> imagePath = <span class="string">&quot;ui/Atlas/gameHall/game_type_btn_&quot;</span> + (i + <span class="number">1</span>) + <span class="string">&quot;.png&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;imagePath = &quot;</span>, imagePath);</span><br><span class="line">    resources.<span class="title function_">load</span>(imagePath, <span class="title class_">SpriteFrame</span>, <span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Image not found&quot;</span>, err);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        spriteFrame = res;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hallImage</span>[i].<span class="property">spriteFrame</span> = spriteFrame;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Corrected Code:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="attr">i</span>: <span class="built_in">number</span> = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">    <span class="keyword">let</span> imagePath = <span class="string">&quot;ui/Atlas/gameHall/game_type_btn_&quot;</span> + (i + <span class="number">1</span>) + <span class="string">&quot;/spriteFrame&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;imagePath = &quot;</span>, imagePath);</span><br><span class="line">    resources.<span class="title function_">load</span>(imagePath, <span class="title class_">SpriteFrame</span>, <span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Image not found&quot;</span>, err);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        spriteFrame = res;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hallImage</span>[i].<span class="title function_">getComponent</span>(<span class="title class_">Sprite</span>).<span class="property">spriteFrame</span> = spriteFrame;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
        <tag>Cocos</tag>
      </tags>
  </entry>
  <entry>
    <title>Dynamically Refresh Label in Cocos Creator</title>
    <url>/31318c8fen.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>In the process of game development, the <code>Label</code> is a commonly used component, and itâ€™s frequently modified dynamically to update its content and get its length. However, when retrieving the length, you might find that the length obtained is of the pre-modification text, not the updated one.</p>
<p>There are two ways to solve this issue:<br><strong>1.</strong> Use a timer<br>Use a timer to refresh the <code>Label</code> and get its length in the next frame.<br><strong>2.</strong> Use <code>updateRenderData(true)</code> to refresh (Recommended)<br>Sample code:</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">label.<span class="property">node</span>.<span class="title function_">getComponent</span>(<span class="title class_">Label</span>).<span class="title function_">updateRenderData</span>(<span class="literal">true</span>);</span><br><span class="line"><span class="keyword">let</span> size = label.<span class="property">node</span>.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Dynamically Generating QR Codes in Cocos Creator</title>
    <url>/608f6591en.html</url>
    <content><![CDATA[<p>Cocos Creator Version: 3.7.2<br>Development Language: TypeScript  </p>
<blockquote>
<p>In game development, itâ€™s common to generate a QR code specific to individual players, such as for promotion, recharging, and other features.</p>
</blockquote>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>When assigned this task, I found that there are many tutorials available online. Most of these tutorials use a QRCode generation library, setting the <code>js</code> file as a plugin and then drawing the QR code using the <code>Graphics</code> component.</p>
<p>I followed a similar approach but without using a plugin. Hereâ€™s the detailed method:</p>
<h3 id="Create-a-New-Project"><a href="#Create-a-New-Project" class="headerlink" title="Create a New Project"></a>Create a New Project</h3><p>Open Cocos Creator and create a new project. In the <code>scene</code>, add a sprite node and set the sprite to white. Then add a <code>Graphics</code> node on top of the sprite. See the image below:<br><img data-src="https://pic.imgdb.cn/item/66519b25d9c307b7e9a2642a.png" alt="ç¤ºæ„å›¾"></p>
<blockquote>
<p>Note: Make sure to set the dimensions of the sprite and the drawing node to multiples of 2, and it is recommended to set the <code>Graphics</code> anchor point to (0,0).</p>
</blockquote>
<h3 id="Core-Code"><a href="#Core-Code" class="headerlink" title="Core Code"></a>Core Code</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Component</span>, <span class="title class_">Node</span>, <span class="title class_">Graphics</span>, <span class="title class_">Color</span>, <span class="title class_">UITransform</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">QRCode</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./qr/QRCode&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">QRErrorCorrectLevel</span> = &#123;</span><br><span class="line">    <span class="attr">L</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">M</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">Q</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">H</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ccclass</span>(<span class="string">&#x27;qrCode&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">qrCode</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="meta">@property</span>(<span class="title class_">Graphics</span>)</span><br><span class="line">    <span class="attr">graphics</span>: <span class="title class_">Graphics</span> = <span class="literal">null</span>!;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">qrCode</span>(<span class="string">&quot;https://lengmo714.top&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">qrCode</span>(<span class="params">url</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> node = <span class="variable language_">this</span>.<span class="property">graphics</span>;</span><br><span class="line">        <span class="keyword">var</span> qrcode = <span class="keyword">new</span> <span class="title class_">QRCode</span>(-<span class="number">1</span>, <span class="title class_">QRErrorCorrectLevel</span>.<span class="property">H</span>);</span><br><span class="line">        qrcode.<span class="title function_">addData</span>(url);</span><br><span class="line">        qrcode.<span class="title function_">make</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> ctx = node.<span class="title function_">getComponent</span>(<span class="title class_">Graphics</span>)!;</span><br><span class="line">        ctx.<span class="property">fillColor</span> = <span class="title class_">Color</span>.<span class="property">BLACK</span>;</span><br><span class="line">        <span class="keyword">var</span> tileW = node.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>)!.<span class="property">width</span> / qrcode.<span class="title function_">getModuleCount</span>();</span><br><span class="line">        <span class="keyword">var</span> tileH = node.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>)!.<span class="property">height</span> / qrcode.<span class="title function_">getModuleCount</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Draw in the Graphics</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> row = <span class="number">0</span>; row &lt; qrcode.<span class="title function_">getModuleCount</span>(); row++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> col = <span class="number">0</span>; col &lt; qrcode.<span class="title function_">getModuleCount</span>(); col++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (qrcode.<span class="title function_">isDark</span>(row, col)) &#123;</span><br><span class="line">                    <span class="keyword">var</span> w = (<span class="title class_">Math</span>.<span class="title function_">ceil</span>((col + <span class="number">1</span>) * tileW) - <span class="title class_">Math</span>.<span class="title function_">floor</span>(col * tileW));</span><br><span class="line">                    <span class="keyword">var</span> h = (<span class="title class_">Math</span>.<span class="title function_">ceil</span>((row + <span class="number">1</span>) * tileW) - <span class="title class_">Math</span>.<span class="title function_">floor</span>(row * tileW));</span><br><span class="line">                    ctx.<span class="title function_">rect</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(col * tileW), <span class="title class_">Math</span>.<span class="title function_">round</span>(row * tileH), w, h);</span><br><span class="line">                    ctx.<span class="title function_">fill</span>();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// ctx.fillColor = cc.Color.WHITE;</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">var</span> w = (<span class="title class_">Math</span>.<span class="title function_">ceil</span>((col + <span class="number">1</span>) * tileW) - <span class="title class_">Math</span>.<span class="title function_">floor</span>(col * tileW));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Note: You still need to use a QR code drawing library. Instead of using a plugin, I converted the <code>qrcode.js</code> code to TypeScript.</p>
<ul>
<li><a href="https://github.com/lengmo714/qrcode.git">Download qrcode.js</a></li>
<li><a href="https://weidian.com/item.html?itemID=7240337853&wfr=multipic&ifr=itemdetail&source=goods_add_success&sfr=app">Download Full Demo (TypeScript Version) - Link 1</a></li>
<li><a href="https://download.csdn.net/download/Silent_F/89485112">Download Full Demo (TypeScript Version) - Link 2</a></li>
</ul>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos CreatoråŠ¨æ€ç”ŸæˆäºŒç»´ç </title>
    <url>/608f6591.html</url>
    <content><![CDATA[<p>Cocos Creator ç‰ˆæœ¬ï¼š3.7.2<br>å¼€å‘è¯­è¨€ï¼štypeScript</p>
<blockquote>
<p>æˆ‘ä»¬åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œç»å¸¸ä¼šç”Ÿæˆä¸€ä¸ªä¸“å±äºç©å®¶ä¸ªäººçš„äºŒç»´ç ï¼Œæ¯”å¦‚è¯´æ¨å¹¿ã€å……å€¼ç­‰åŠŸèƒ½ã€‚</p>
</blockquote>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>æ¥åˆ°è¿™ä¸ªä»»åŠ¡ï¼Œåœ¨ç½‘ä¸Šæ‰¾äº†ä¸‹ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šæ•™ç¨‹çš„ã€‚ä½†æ˜¯è¿™äº›æ•™ç¨‹å¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨QRCodeäºŒç»´ç ç”Ÿæˆåº“ï¼Œå°†<code>js</code>æ–‡ä»¶è®¾ç½®æˆæ’ä»¶çš„å½¢å¼ã€‚ç„¶åç”¨ç”»å›¾ç»„ä»¶<code>Graphics</code>æŠŠäºŒç»´ç ç”»å‡ºæ¥ã€‚</p>
<p>æˆ‘è¿™é‡Œä¹Ÿæ˜¯ç”¨çš„åŒæ ·çš„æ€è·¯ï¼Œä½†æ˜¯æ²¡æœ‰ç”¨æ’ä»¶çš„å½¢å¼ã€‚ä¸‹é¢è¯´è¯´å…·ä½“çš„æ–¹æ³•ï¼š</p>
<h3 id="æ–°å»ºå·¥ç¨‹"><a href="#æ–°å»ºå·¥ç¨‹" class="headerlink" title="æ–°å»ºå·¥ç¨‹"></a>æ–°å»ºå·¥ç¨‹</h3><p>æ‰“å¼€Cocos Creatorï¼Œåˆ›å»ºä¸€ä¸ªæ–°å·¥ç¨‹ã€‚åœ¨<code>scene</code>ä¸­æ·»åŠ ä¸€ä¸ªç²¾çµèŠ‚ç‚¹ï¼Œå°†ç²¾çµè®¾ç½®ä¸ºç™½è‰²ã€‚å†åœ¨ç²¾çµä¸Šæ·»åŠ ä¸€ä¸ª<code>Graphics</code>èŠ‚ç‚¹ã€‚å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/66519b25d9c307b7e9a2642a.png" alt="ç¤ºæ„å›¾"></p>
<blockquote>
<p>æ³¨æ„ï¼šè¿™é‡Œè¦è®¾ç½®è¦ç²¾çµå’Œç»˜å›¾èŠ‚ç‚¹çš„å°ºå¯¸ï¼Œæœ€å¥½æ˜¯2çš„å€æ•°ï¼Œè€Œä¸”å»ºè®®å°†<code>Graphics</code>çš„é”šç‚¹è®¾ç½®ä¸º(0,0)</p>
</blockquote>
<h3 id="æ ¸å¿ƒä»£ç "><a href="#æ ¸å¿ƒä»£ç " class="headerlink" title="æ ¸å¿ƒä»£ç "></a>æ ¸å¿ƒä»£ç </h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">   <span class="keyword">import</span> &#123; _decorator, <span class="title class_">Component</span>, <span class="title class_">Node</span>,<span class="title class_">Graphics</span>, <span class="title class_">Color</span>, <span class="title class_">UITransform</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">QRCode</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./qr/QRCode&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">QRErrorCorrectLevel</span> = &#123;</span><br><span class="line">    <span class="attr">L</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">M</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">Q</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">H</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">@ccclass</span>(<span class="string">&#x27;qrCode&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">qrCode</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="meta">@property</span>(<span class="title class_">Graphics</span>)</span><br><span class="line">    <span class="attr">graphics</span>:<span class="title class_">Graphics</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">qrCode</span>(<span class="string">&quot;https://lengmo714.top&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">qrCode</span>(<span class="params">url</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> node = <span class="variable language_">this</span>.<span class="property">graphics</span>;</span><br><span class="line">        <span class="keyword">var</span> qrcode = <span class="keyword">new</span> <span class="title class_">QRCode</span>(-<span class="number">1</span>, <span class="title class_">QRErrorCorrectLevel</span>.<span class="property">H</span>);</span><br><span class="line">        qrcode.<span class="title function_">addData</span>(url);</span><br><span class="line">        qrcode.<span class="title function_">make</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> ctx = node.<span class="title function_">getComponent</span>(<span class="title class_">Graphics</span>)!;</span><br><span class="line">        ctx.<span class="property">fillColor</span> = <span class="title class_">Color</span>.<span class="property">BLACK</span>;</span><br><span class="line">        <span class="keyword">var</span> tileW = node.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>)!.<span class="property">width</span> / qrcode.<span class="title function_">getModuleCount</span>();</span><br><span class="line">        <span class="keyword">var</span> tileH = node.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>)!.<span class="property">height</span> / qrcode.<span class="title function_">getModuleCount</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// draw in the Graphics</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> row = <span class="number">0</span>; row &lt; qrcode.<span class="title function_">getModuleCount</span>(); row++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> col = <span class="number">0</span>; col &lt; qrcode.<span class="title function_">getModuleCount</span>(); col++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (qrcode.<span class="title function_">isDark</span>(row, col)) &#123;</span><br><span class="line">                    <span class="keyword">var</span> w = (<span class="title class_">Math</span>.<span class="title function_">ceil</span>((col + <span class="number">1</span>) * tileW) - <span class="title class_">Math</span>.<span class="title function_">floor</span>(col * tileW));</span><br><span class="line">                    <span class="keyword">var</span> h = (<span class="title class_">Math</span>.<span class="title function_">ceil</span>((row + <span class="number">1</span>) * tileW) - <span class="title class_">Math</span>.<span class="title function_">floor</span>(row * tileW));</span><br><span class="line">                    ctx.<span class="title function_">rect</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(col * tileW), <span class="title class_">Math</span>.<span class="title function_">round</span>(row * tileH), w, h);</span><br><span class="line">                    ctx.<span class="title function_">fill</span>();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// ctx.fillColor = cc.Color.WHITE;</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">var</span> w = (<span class="title class_">Math</span>.<span class="title function_">ceil</span>((col + <span class="number">1</span>) * tileW) - <span class="title class_">Math</span>.<span class="title function_">floor</span>(col * tileW));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™é‡Œè¿˜æ˜¯è¦ç”¨åˆ°ç”»äºŒç»´ç çš„æ’ä»¶åº“ï¼Œåªæ˜¯æˆ‘æ²¡æœ‰ç”¨è¿™ä¸ªæ’ä»¶åº“ï¼Œ<code>qrcode.js</code>ä»£ç è½¬æˆäº†<code>ts</code>ä»£ç ã€‚</p>
<p><a href="https://github.com/lengmo714/qrcode.git">qrcode.jsæ–‡ä»¶ä¸‹è½½åœ°å€</a><br><a href="https://weidian.com/item.html?itemID=7240337853&wfr=multipic&ifr=itemdetail&source=goods_add_success&sfr=app">å®Œæ•´demoä¸‹è½½åœ°å€ï¼Œtsç‰ˆæœ¬</a><br><a href="https://download.csdn.net/download/Silent_F/89485112">å®Œæ•´demoä¸‹è½½åœ°å€2ï¼Œtsç‰ˆæœ¬</a></p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos CreatoråŸç”Ÿå¹³å°JavaScriptè°ƒè¯•è¸©å‘</title>
    <url>/f978efae.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Cocos Creatoré¡¹ç›®åœ¨ä½¿ç”¨æµè§ˆå™¨è¿è¡Œçš„æ—¶å€™æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯å¯¼å‡ºå®‰å“å·¥ç¨‹åï¼Œåœ¨æ‰‹æœºè¿è¡Œçš„æ—¶å€™å°±ä¼šå‡ºç°ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ã€‚æ¯æ¬¡å°±åªèƒ½å¤šè¾“å‡ºç‚¹æ—¥å¿—ï¼Œç„¶åé‡æ–°æ‰“åŒ…æµ‹è¯•ï¼Œå°±æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>åé¢æŸ¥çœ‹è¯´æ˜æ–‡æ¡£ï¼Œå‘ç°å®˜æ–¹å·²ç»ç»™å‡ºäº†<a href="https://docs.cocos.com/Creator/3.7/manual/zh/editor/publish/debug-jsb.html?h=%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95" title="" target="">åŸç”Ÿå¹³å° JavaScript è°ƒè¯• ,</a>çš„æ–‡æ¡£ï¼Œçœ‹äº†åå¾ˆé«˜å…´ï¼Œç«‹é©¬å¼„äº†èµ·æ¥ã€‚</p>
<p>ç†æƒ³å¾ˆä¸°æ»¡ï¼Œç°å®å¾ˆéª¨æ„Ÿã€‚å®Œå…¨æŒ‰ç…§å®˜æ–¹æ–‡æ¡£æ¥ï¼Œæ¯æ¬¡éƒ½å¤±è´¥ï¼Œéƒ½æ˜¯ä¸‹å›¾é—®é¢˜ï¼Œç›¸ä¿¡å¾ˆå¤šäººéƒ½å’Œæˆ‘ä¸€æ ·å§~<br><img data-src="https://s11.ax1x.com/2024/02/22/pFNIi60.png"  alt="" /></p>
<h3 id="è¸©è¿‡çš„å‘"><a href="#è¸©è¿‡çš„å‘" class="headerlink" title="è¸©è¿‡çš„å‘"></a>è¸©è¿‡çš„å‘</h3><ul>
<li>Creatoråœ¨æ„å»ºçš„æ—¶å€™ï¼Œ<strong>ä¸€å®šè¦å‹¾ä¸Š</strong><code>Debugæ¨¡å¼</code>ï¼Œåˆ’é‡ç‚¹</li>
<li>æ‰‹æœºå’Œç”µè„‘ä¸è¦å¼€ä»£ç†</li>
<li>æ‰‹æœºæ¸¸æˆè¦è¿è¡Œèµ·æ¥</li>
<li>android studioå¼€å¯è°ƒè¯•æ¨¡å¼</li>
</ul>
<p>æ³¨æ„ä¸Šé¢å‡ ç‚¹ï¼Œé—®é¢˜å°±å¯ä»¥è§£å†³äº†</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorå®ç°ä¸€ä¸ªç¿»ç‰ŒåŠ¨ç”»</title>
    <url>/7a8f4df2.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ç½‘ä¸Šæ•™ç¨‹å¾ˆå¤šï¼Œä½†æ˜¯å¤§å¤šæ•°éƒ½æ˜¯ä½¿ç”¨äº†2ä¸ªç²¾çµå»å®ç°çš„ï¼Œä¸ªäººè§‰å¾—æ¯”è¾ƒéº»çƒ¦ï¼Œè¿™é‡Œå†™ä¸‹æˆ‘çš„æ–¹æ³•ï¼Œè®°å½•ä¸‹</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="title function_">tween</span>(<span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_ImgC_poker</span>.<span class="property">node</span>).<span class="title function_">to</span>(<span class="number">0.5</span>,&#123;<span class="attr">eulerAngles</span>:<span class="keyword">new</span> <span class="title class_">Vec3</span>(<span class="number">0</span>,<span class="number">90</span>,<span class="number">0</span>)&#125;).<span class="title function_">call</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_ImgC_poker</span>.<span class="title function_">getComponent</span>(<span class="title class_">Sprite</span>).<span class="property">spriteFrame</span> = <span class="variable language_">this</span>.<span class="property">pokerImg</span>.<span class="title function_">getSpriteFrame</span>(<span class="string">&quot;card_2&quot;</span>);</span><br><span class="line">&#125;).<span class="title function_">to</span>(<span class="number">0.5</span>,&#123;<span class="attr">eulerAngles</span>:<span class="keyword">new</span> <span class="title class_">Vec3</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)&#125;).<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œåªéœ€è¦ç”¨åˆ°ä¸€ä¸ªç²¾çµèŠ‚ç‚¹å³å¯:</p>
<!-- ![](/img/gif/fanpai.gif) -->
<img data-src="https://pic.imgdb.cn/item/64b2bbba1ddac507ccd07d8e.gif" alt="" />
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>cocosCreatorå®ç°ä¸€ä¸ªéªŒè¯ç å¼¹çª—éªŒè¯åŠŸèƒ½</title>
    <url>/8cde5f7c.html</url>
    <content><![CDATA[<p>åœ¨ Cocos Creator ä¸­å®ç°ä¸€ä¸ª6ä½æ•°çš„éªŒè¯ç è¾“å…¥å¼¹çª—åŠŸèƒ½ã€‚ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ç‚¹<br><strong>1ã€</strong> å¯ä»¥è¿ç»­è¾“å…¥éªŒè¯ç <br><strong>2ã€</strong> å¯ä»¥ç²˜è´´éªŒè¯ç <br><strong>3ã€</strong> å¯ä»¥è¿ç»­åˆ é™¤éªŒè¯ç </p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>å¼•æ“ç‰ˆæœ¬: Cocos Creator 2.7.2<br>å¼€å‘è¯­è¨€: ts</p>
<h3 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><p><img data-src="https://pic.imgdb.cn/item/66def5e3d9c307b7e94ee90c.gif" alt="æ•ˆæœå›¾"></p>
<h3 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h3><p><strong>1ã€</strong> åœ¨å¼¹çª—ç•Œé¢æ”¾ç½®6ä¸ªè¾“å…¥æ¡†çš„ç²¾çµï¼Œæ¯ä¸ªç²¾çµæ·»åŠ ä¸€ä¸ªLabelçš„å­èŠ‚ç‚¹ï¼Œæ”¾ç½®ä¸€ä¸ªEditBoxã€‚<br><strong>2ã€</strong> ç»™6ä¸ªè¾“å…¥æ¡†æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œä¸ç®¡ç‚¹å‡»å“ªä¸ªæ¡†ï¼Œéƒ½èšç„¦åˆ°EditBoxï¼Œè§¦å‘EditBoxçš„è¾“å…¥ã€‚<br><strong>3ã€</strong> ç›‘å¬EditBoxçš„å†…å®¹å˜æ›´ï¼Œå°†æ›´æ–°åçš„æ–‡æœ¬ç»˜åˆ¶åˆ°å¯¹åº”çš„è¾“å…¥æ¡†çš„Labelä¸Š</p>
<h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><p><strong>1ã€</strong> æ— æ³•å•ç‹¬ä¿®æ”¹æŸä¸€ä¸ªè¾“å…¥æ¡†ä¸­çš„æ–‡æœ¬</p>
<h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><p>ç›‘å¬ä»£ç </p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_EditBoxC_input</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="string">&#x27;text-changed&#x27;</span>, <span class="variable language_">this</span>.<span class="property">input</span>, <span class="variable language_">this</span>);  <span class="comment">// ç›‘å¬EditBoxå†…å®¹å˜æ›´</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_LayC_input</span>.<span class="property">node</span>.<span class="property">children</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">v, i</span>) =&gt;</span> &#123;</span><br><span class="line">    v.<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_END</span>, <span class="variable language_">this</span>.<span class="property">inputImg</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>, i), <span class="variable language_">this</span>);   <span class="comment">// 6ä¸ªè¾“å…¥æ¡†çš„ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>EditBoxç›‘å¬</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="title function_">input</span>(<span class="params">event</span>) &#123;</span><br><span class="line">     <span class="keyword">let</span> inputText = event.<span class="property">string</span>;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_LayC_input</span>.<span class="property">node</span>.<span class="property">children</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">v, i</span>) =&gt;</span> &#123;</span><br><span class="line">          v.<span class="title function_">getChildByName</span>(<span class="string">&quot;Label&quot;</span>).<span class="property">active</span> = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">if</span> (inputText[i]) &#123;</span><br><span class="line">               v.<span class="title function_">getChildByName</span>(<span class="string">&quot;Label&quot;</span>).<span class="title function_">getComponent</span>(<span class="title class_">Label</span>).<span class="property">string</span> = inputText[i];</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               v.<span class="title function_">getChildByName</span>(<span class="string">&quot;Label&quot;</span>).<span class="title function_">getComponent</span>(<span class="title class_">Label</span>).<span class="property">string</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥æ¡†ç‚¹å‡»</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="title function_">inputImg</span>(<span class="params">index, event</span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_EditBoxC_input</span>.<span class="title function_">focus</span>();   <span class="comment">// èšç„¦åˆ°EditBox</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢åŸºæœ¬èƒ½å¤Ÿå®ç°æˆ‘æƒ³è¦çš„æ•ˆæœï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œæ¬¢è¿äº¤æµã€‚</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatoråœ¨Bç±»ä¸­ç›‘å¬Aç±»å»ºç«‹é•¿è¿æ¥å‘é€å’Œæ¥æ”¶çš„æ•°æ®</title>
    <url>/9233548f.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>é¦–å…ˆï¼Œæ‚¨éœ€è¦ä½¿ç”¨Cocos Creatorçš„WebSocketæ¨¡å—æ¥åˆ›å»ºä¸€ä¸ªWebSocketè¿æ¥ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç åœ¨æ‚¨çš„Aç±»ä¸­åˆ›å»ºWebSocketï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> socket = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&quot;ws://your-socket-url&quot;</span>);</span><br><span class="line"><span class="comment">// å°†WebSocketå¯¹è±¡è®¾ç½®ä¸ºå…¨å±€å˜é‡</span></span><br><span class="line"><span class="variable language_">window</span>[<span class="string">&quot;socket&quot;</span>] = socket;</span><br><span class="line">socket.<span class="property">onopen</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;WebSocketè¿æ¥å·²å»ºç«‹&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">socket.<span class="property">onmessage</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ¥æ”¶åˆ°WebSocketæ•°æ®&quot;</span>, event.<span class="property">data</span>);</span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œå¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ‚¨çš„Bç±»ä¸­è·å–å…¨å±€çš„WebSocketå¯¹è±¡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç :</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–å…¨å±€çš„WebSocketå¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> socket = <span class="variable language_">window</span>[<span class="string">&quot;socket&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®WebSocketå¯¹è±¡çš„äº‹ä»¶å¤„ç†ç¨‹åº</span></span><br><span class="line">socket.<span class="property">onmessage</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Bç±»æ¥æ”¶åˆ°WebSocketæ•°æ®&quot;</span>, event.<span class="property">data</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨windowå¯¹è±¡çš„å±æ€§æ¥è·å–å…¨å±€å˜é‡ã€‚é€šè¿‡è·å–å…¨å±€å˜é‡ï¼Œæ‚¨å¯ä»¥è®¿é—®åœ¨Aç±»ä¸­åˆ›å»ºçš„WebSocketå¯¹è±¡ï¼Œå¹¶åœ¨Bç±»ä¸­è®¾ç½®äº‹ä»¶å¤„ç†ç¨‹åºã€‚</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
        <category>TypeScript</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorå®ç°æ¯æ—¥é¦–æ¬¡æ‰“å¼€æ¸¸æˆåŠŸèƒ½</title>
    <url>/2f9dcd90.html</url>
    <content><![CDATA[<p>åœ¨ Cocos Creator ä½¿ç”¨ TypeScript åˆ¤æ–­æ¯æ—¥é¦–æ¬¡ç™»å½•æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°ï¼š</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="å­˜å‚¨ä¸Šæ¬¡ç™»å½•æ—¶é—´ï¼š"><a href="#å­˜å‚¨ä¸Šæ¬¡ç™»å½•æ—¶é—´ï¼š" class="headerlink" title="å­˜å‚¨ä¸Šæ¬¡ç™»å½•æ—¶é—´ï¼š"></a>å­˜å‚¨ä¸Šæ¬¡ç™»å½•æ—¶é—´ï¼š</h3><p>ä½¿ç”¨æœ¬åœ°å­˜å‚¨ï¼ˆä¾‹å¦‚ localStorage æˆ– cc.sys.localStorageï¼‰æ¥ä¿å­˜ç©å®¶çš„ä¸Šæ¬¡ç™»å½•æ—¶é—´ã€‚</p>
<h3 id="æ£€æŸ¥å½“å¤©æ˜¯å¦å·²ç™»å½•ï¼š"><a href="#æ£€æŸ¥å½“å¤©æ˜¯å¦å·²ç™»å½•ï¼š" class="headerlink" title="æ£€æŸ¥å½“å¤©æ˜¯å¦å·²ç™»å½•ï¼š"></a>æ£€æŸ¥å½“å¤©æ˜¯å¦å·²ç™»å½•ï¼š</h3><p>åœ¨ç©å®¶ç™»å½•æ—¶ï¼Œè·å–å½“å‰æ—¥æœŸå¹¶ä¸ä¸Šæ¬¡ç™»å½•çš„æ—¥æœŸè¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœæ—¥æœŸä¸åŒï¼Œåˆ™è¡¨ç¤ºè¿™æ˜¯å½“å¤©çš„é¦–æ¬¡ç™»å½•ã€‚</p>
<h3 id="æ›´æ–°ç™»å½•æ—¶é—´ï¼š"><a href="#æ›´æ–°ç™»å½•æ—¶é—´ï¼š" class="headerlink" title="æ›´æ–°ç™»å½•æ—¶é—´ï¼š"></a>æ›´æ–°ç™»å½•æ—¶é—´ï¼š</h3><p>å¦‚æœæ˜¯é¦–æ¬¡ç™»å½•ï¼Œæ›´æ–°å­˜å‚¨çš„ä¸Šæ¬¡ç™»å½•æ—¶é—´ä¸ºå½“å‰æ—¥æœŸã€‚</p>
<h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">LAST_LOGIN_KEY</span> = <span class="string">&quot;lastLoginDate&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isFirstLoginToday</span>(<span class="params"></span>): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰æ—¥æœŸ</span></span><br><span class="line">    <span class="keyword">const</span> currentDate = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toDateString</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»æœ¬åœ°å­˜å‚¨ä¸­è·å–ä¸Šæ¬¡ç™»å½•æ—¥æœŸ</span></span><br><span class="line">    <span class="keyword">const</span> lastLoginDate = cc.<span class="property">sys</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="variable constant_">LAST_LOGIN_KEY</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºå½“å¤©é¦–æ¬¡ç™»å½•</span></span><br><span class="line">    <span class="keyword">if</span> (lastLoginDate !== currentDate) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœä¸æ˜¯ä»Šå¤©ï¼Œæ›´æ–°å­˜å‚¨çš„ç™»å½•æ—¥æœŸå¹¶è¿”å› true</span></span><br><span class="line">        cc.<span class="property">sys</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="variable constant_">LAST_LOGIN_KEY</span>, currentDate);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦åˆ™ï¼Œè¿”å› false è¡¨ç¤ºä»Šå¤©å·²ç»ç™»å½•è¿‡</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šåœ¨ç©å®¶ç™»å½•æ—¶è°ƒç”¨</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">isFirstLoginToday</span>()) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä»Šæ—¥é¦–æ¬¡ç™»å½•ï¼Œç»™äºˆå¥–åŠ±æˆ–æ‰§è¡Œç›¸å…³é€»è¾‘ã€‚&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä»Šå¤©å·²ç»ç™»å½•è¿‡ã€‚&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>new Date().toDateString()</code>: è·å–å½“å‰æ—¥æœŸçš„å­—ç¬¦ä¸²å½¢å¼ã€‚<br><code>cc.sys.localStorage.getItem()</code>: è·å–ä¿å­˜åœ¨æœ¬åœ°å­˜å‚¨ä¸­çš„ä¸Šæ¬¡ç™»å½•æ—¥æœŸã€‚<br><code>cc.sys.localStorage.setItem()</code>: å°†å½“å‰æ—¥æœŸä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ä¸­ï¼Œä»¥ä¾¿ä¸‹æ¬¡ç™»å½•æ—¶æ¯”è¾ƒã€‚<br>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥åœ¨æ¸¸æˆä¸­è½»æ¾åˆ¤æ–­ç©å®¶æ˜¯å¦ä¸ºå½“å¤©é¦–æ¬¡ç™»å½•ï¼Œä»è€Œè§¦å‘æ¯æ—¥å¥–åŠ±æˆ–å…¶ä»–ç›¸å…³é€»è¾‘ã€‚</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorå®ç°è¿›åº¦æ¡æ¸å˜è‰²</title>
    <url>/6abc538.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>è¿›åº¦æ¡æ˜¯æˆ‘ä»¬åœ¨æ¸¸æˆå¼€å‘ä¸­å¸¸ç”¨çš„ä¸€ä¸ªç»„ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›åº¦æ¡èŠ‚ç‚¹çš„<code>Sprite</code>ä¼šæ ¹æ®ä¸åŒçš„è¿›åº¦å‹ç¼©å›¾ç‰‡ï¼Œä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚æˆ‘ä»¬æƒ³è¦å®ç°ä¸€ä¸ªè¿›åº¦æ¡çš„æ¸å˜è‰²ã€‚</p>
<p>é¦–å…ˆï¼Œè¦ç¾æœ¯å‡ºä¸€å¼ æ¸å˜è‰²çš„å›¾ç‰‡ã€‚ç„¶åå»è®¾ç½®è¿›åº¦æ¡çš„<code>Sprite</code>èŠ‚ç‚¹å±æ€§ï¼Œå°†<code>Sprite</code>å±æ€§<code>Type</code>æ”¹ä¸º<code>FILLED</code>,åŒæ—¶å°†<code>ProgressBar</code>å±æ€§<code>Mode</code>ä¹Ÿæ”¹ä¸º<code>FILLED</code>,åŒæ—¶éœ€è¦å°†<code>Total Length</code>çš„å€¼è®¾ç½®ä¸º<code>1</code>ã€‚<br>å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/66432bdc0ea9cb14039867bf.png" alt="" /><br>å…¶æ¬¡ï¼Œå°†å­èŠ‚ç‚¹<code>Bar</code>çš„<code>Sprite</code>å±æ€§<code>Type</code>æ”¹ä¸º<code>FILLED</code>å³å¯ã€‚<br>å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/66432c0a0ea9cb140398a871.png" alt="" /><br>æ³¨æ„ï¼šä¸Šé¢éœ€è¦æ”¹å±æ€§çš„åœ°æ–¹å¦‚æœæœ‰ä¸€ä¸ªåœ°æ–¹æ²¡æœ‰ï¼Œå°±ä¼šæŠ¥é”™<code>ProgressBar non-FILLED mode only works when barSprite&#39;s Type is non-FILLED!</code>ã€‚<br>å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/66432b620ea9cb140397d29e.png" alt="" /></p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>cocosCreatorå¯¼å‡ºwebå·¥ç¨‹ä¸Šä¼ æœ¬åœ°å›¾ç‰‡</title>
    <url>/c53c1f3e.html</url>
    <content><![CDATA[<p>åœ¨ Cocos Creator å¯¼å‡ºçš„ Web é¡¹ç›®ä¸­å®ç°æ‰‹æœºæˆ–è€…ç”µè„‘ä¸Šä¼ ç›¸å†Œå›¾ç‰‡ï¼Œå¯ä»¥ä½¿ç”¨ <code>HTML</code> å’Œ <code>JavaScript</code> æ¥å®ç°æ–‡ä»¶é€‰æ‹©åŠŸèƒ½ï¼Œå¹¶å°†å…¶ä¸ Cocos Creator é¡¹ç›®è¿›è¡Œé›†æˆã€‚ä»¥ä¸‹æ˜¯å¤§è‡´çš„æ­¥éª¤ï¼š</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="1ã€åœ¨tsè„šæœ¬ä¸­åŠ¨æ€åˆ›å»ºHTMLå…ƒç´ -inputæ–‡ä»¶é€‰æ‹©å™¨"><a href="#1ã€åœ¨tsè„šæœ¬ä¸­åŠ¨æ€åˆ›å»ºHTMLå…ƒç´ -inputæ–‡ä»¶é€‰æ‹©å™¨" class="headerlink" title="1ã€åœ¨tsè„šæœ¬ä¸­åŠ¨æ€åˆ›å»ºHTMLå…ƒç´ (inputæ–‡ä»¶é€‰æ‹©å™¨)"></a>1ã€åœ¨tsè„šæœ¬ä¸­åŠ¨æ€åˆ›å»ºHTMLå…ƒç´ (<code>input</code>æ–‡ä»¶é€‰æ‹©å™¨)</h3><p>åœ¨tsè„šæœ¬ä¸­åŠ¨æ€åˆ›å»ºHTMLå…ƒç´ (<code>input</code>æ–‡ä»¶é€‰æ‹©å™¨,å¹¶æ·»åŠ äº‹ä»¶)</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> inputElement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="title function_">creatorInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span>.<span class="property">type</span> = <span class="string">&#x27;file&#x27;</span>;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span>.<span class="property">accept</span> = <span class="string">&#x27;image/*&#x27;</span>; <span class="comment">// ä»…æ¥å—å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>; <span class="comment">// éšè— input</span></span><br><span class="line">     <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(<span class="variable language_">this</span>.<span class="property">inputElement</span>);</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="function">(<span class="params">event: Event</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> target = event.<span class="property">target</span> <span class="keyword">as</span> <span class="title class_">HTMLInputElement</span>;</span><br><span class="line">          <span class="keyword">if</span> (target.<span class="property">files</span> &amp;&amp; target.<span class="property">files</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> file = target.<span class="property">files</span>[<span class="number">0</span>];</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">handleFileUpload</span>(file);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span> <span class="title function_">handleFileUpload</span>(<span class="params">file: File</span>) &#123;</span><br><span class="line">     <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line">     <span class="comment">// è¯»å–æ–‡ä»¶ä¸º DataURL</span></span><br><span class="line">     reader.<span class="property">onload</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> imageUrl = e.<span class="property">target</span>?.<span class="property">result</span> <span class="keyword">as</span> <span class="built_in">string</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">loadTextureInCocos</span>(imgNode,imageUrl); <span class="comment">// imgNodeä¸ºå›¾ç‰‡æ˜¾ç¤ºçš„èŠ‚ç‚¹ï¼Œå³ä¸Šä¼ çš„å›¾ç‰‡ä¼šåœ¨è¿™ä¸ªèŠ‚ç‚¹æ¸²æŸ“</span></span><br><span class="line">     &#125;;</span><br><span class="line">     reader.<span class="title function_">readAsDataURL</span>(file);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="title function_">loadTextureInCocos</span>(<span class="params">node: Node, imageUrl: <span class="built_in">string</span></span>)&#123;</span><br><span class="line">     <span class="keyword">let</span> image = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">     image.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> img = <span class="keyword">new</span> <span class="title class_">ImageAsset</span>(image)</span><br><span class="line">          <span class="keyword">let</span> texture = <span class="keyword">new</span> <span class="title class_">Texture2D</span>();</span><br><span class="line">          texture.<span class="property">image</span> = img; <span class="comment">// è®¾ç½®çº¹ç†çš„å›¾ç‰‡</span></span><br><span class="line">          <span class="keyword">let</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">          spriteFrame.<span class="property">texture</span> = texture;</span><br><span class="line">          node.<span class="title function_">getComponent</span>(<span class="title class_">Sprite</span>).<span class="property">spriteFrame</span> = spriteFrame; <span class="comment">// ç›´æ¥è®¾ç½®ç²¾çµå¸§</span></span><br><span class="line">          node.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>).<span class="title function_">setContentSize</span>(width, hight); <span class="comment">// å¯é€‰ï¼Œè‡ªå·±è®¾ç½®å›¾ç‰‡å°ºå¯¸</span></span><br><span class="line">     &#125;;</span><br><span class="line">     image.<span class="property">src</span> = imageUrl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2ã€åˆ›å»ºä¸Šä¼ å›¾ç‰‡æŒ‰é’®"><a href="#2ã€åˆ›å»ºä¸Šä¼ å›¾ç‰‡æŒ‰é’®" class="headerlink" title="2ã€åˆ›å»ºä¸Šä¼ å›¾ç‰‡æŒ‰é’®"></a>2ã€åˆ›å»ºä¸Šä¼ å›¾ç‰‡æŒ‰é’®</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="title function_">clickBtn</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span>.<span class="title function_">click</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®Œæˆä¸Šé¢2æ­¥å°±å¯ä»¥å®ç°å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½äº†ã€‚</p>
<h3 id="3ã€ä¼˜åŒ–"><a href="#3ã€ä¼˜åŒ–" class="headerlink" title="3ã€ä¼˜åŒ–"></a>3ã€ä¼˜åŒ–</h3><p>ä¸Šé¢æ–¹æ³•æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œä½¿ç”¨çš„æ—¶å€™æœ‰å‡ ç‚¹ä¼˜åŒ–<br>1ã€ä¸Šä¼ å›¾ç‰‡è¿‡å¤§æ—¶ï¼Œå®¹æ˜“å¡ä½<br>2ã€ä¸Šä¼ å›¾ç‰‡ä¸ºé•¿æ–¹å½¢æ—¶ï¼Œä¼šæ˜¾ç¤ºä¸å…¨<br>3ã€æˆ‘è¿™é‡Œè¦å°†é•¿æ–¹å½¢çš„å›¾ç‰‡åªæ˜¾ç¤ºä¸€ä¸ªæ­£æ–¹å½¢ï¼Œå³æˆªå–ä¸­é—´ä¸€éƒ¨åˆ†<br>ä¼˜åŒ–æ–¹æ¡ˆï¼š<br>1ã€ä¸Šä¼ å›¾ç‰‡çš„æ—¶å€™å¯¹å›¾ç‰‡å¤§å°è¿›è¡Œé™åˆ¶<br>2ã€å°†ä¸Šä¼ çš„å›¾ç‰‡è¿›è¡Œå‹ç¼©<br>3ã€æ¸²æŸ“å›¾ç‰‡æ—¶å¯¹å›¾ç‰‡è¿›è¡Œå°ºå¯¸ä¿®æ”¹(ç¼©æ”¾å’Œè£å‰ª)</p>
<h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><p>æˆ‘è¿™é‡Œæ˜¯å°†ä¸Šä¼ çš„å›¾ç‰‡é¦–å…ˆæŒ‰ç…§é•¿å®½æ¯”è¿›è¡Œä¸€ä¸ªæ­£æ–¹å½¢çš„è£å‰ªï¼Œä»¥çŸ­çš„é‚£è¾¹ä½œä¸ºè¾¹é•¿ã€‚<br>ç„¶åå¯¹è£å‰ªåçš„å›¾ç‰‡æŒ‰ç…§æˆ‘ç»™å‡ºçš„å¯¸å°ºè¿›è¡Œç¼©æ”¾ï¼Œç¼©æ”¾åˆ°æˆ‘æƒ³è¦çš„å°ºå¯¸ï¼Œå†è¿›è¡Œå‹ç¼©ï¼Œå‹ç¼©åè¾“å‡ºä¸€ä¸ªjpegçš„base64çš„æ•°æ®ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> inputElement;</span><br><span class="line"><span class="keyword">private</span> imageUrl;</span><br><span class="line"><span class="keyword">private</span> <span class="title function_">creatorInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span>.<span class="property">type</span> = <span class="string">&#x27;file&#x27;</span>;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span>.<span class="property">accept</span> = <span class="string">&#x27;image/*&#x27;</span>; <span class="comment">// ä»…æ¥å—å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>; <span class="comment">// éšè— input</span></span><br><span class="line">     <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(<span class="variable language_">this</span>.<span class="property">inputElement</span>);</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="function">(<span class="params">event: Event</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> target = event.<span class="property">target</span> <span class="keyword">as</span> <span class="title class_">HTMLInputElement</span>;</span><br><span class="line">          <span class="keyword">if</span> (target.<span class="property">files</span> &amp;&amp; target.<span class="property">files</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> file = target.<span class="property">files</span>[<span class="number">0</span>];</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">handleFileUpload</span>(file);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span> <span class="title function_">handleFileUpload</span>(<span class="params">file: File</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (file.<span class="property">size</span> &gt; <span class="number">1024</span> * <span class="number">1024</span>) &#123;  <span class="comment">// é™åˆ¶æ–‡ä»¶å¤§å°ä¸º 2MB</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ–‡ä»¶è¿‡å¤§ï¼Œæ— æ³•ä¸Šä¼ &#x27;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line">        <span class="comment">// è¯»å–æ–‡ä»¶ä¸º DataURL</span></span><br><span class="line">        reader.<span class="property">onload</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> imageUrl = e.<span class="property">target</span>?.<span class="property">result</span> <span class="keyword">as</span> <span class="built_in">string</span>;</span><br><span class="line">            <span class="title class_">Tool</span>.<span class="title function_">compressImage</span>(imageUrl, <span class="number">126</span>, <span class="number">126</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">compressedImageUrl</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">imageUrl</span> = compressedImageUrl;</span><br><span class="line">                <span class="title class_">Tool</span>.<span class="title function_">loadTextureInCocos</span>(<span class="variable language_">this</span>.<span class="property">imgNode</span>, compressedImageUrl, <span class="number">126</span>, <span class="number">126</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line">        reader.<span class="title function_">readAsDataURL</span>(file);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="title function_">loadTextureInCocos</span>(<span class="params">node: Node, imageUrl: <span class="built_in">string</span></span>)&#123;</span><br><span class="line">     <span class="keyword">let</span> image = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">     image.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> img = <span class="keyword">new</span> <span class="title class_">ImageAsset</span>(image)</span><br><span class="line">          <span class="keyword">let</span> texture = <span class="keyword">new</span> <span class="title class_">Texture2D</span>();</span><br><span class="line">          texture.<span class="property">image</span> = img; <span class="comment">// è®¾ç½®çº¹ç†çš„å›¾ç‰‡</span></span><br><span class="line">          <span class="keyword">let</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">          spriteFrame.<span class="property">texture</span> = texture;</span><br><span class="line">          node.<span class="title function_">getComponent</span>(<span class="title class_">Sprite</span>).<span class="property">spriteFrame</span> = spriteFrame; <span class="comment">// ç›´æ¥è®¾ç½®ç²¾çµå¸§</span></span><br><span class="line">          node.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>).<span class="title function_">setContentSize</span>(width, hight); <span class="comment">// å¯é€‰ï¼Œè‡ªå·±è®¾ç½®å›¾ç‰‡å°ºå¯¸</span></span><br><span class="line">     &#125;;</span><br><span class="line">     image.<span class="property">src</span> = imageUrl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">compressImage</span>(<span class="attr">url</span>: <span class="built_in">string</span>, <span class="attr">targetWidth</span>: <span class="built_in">number</span>, <span class="attr">targetHeight</span>: <span class="built_in">number</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">          img.<span class="property">src</span> = url;</span><br><span class="line"></span><br><span class="line">          img.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">               <span class="keyword">const</span> width = img.<span class="property">width</span>;</span><br><span class="line">               <span class="keyword">const</span> height = img.<span class="property">height</span>;</span><br><span class="line"></span><br><span class="line">               <span class="comment">// è®¡ç®—æ­£æ–¹å½¢çš„è¾¹é•¿</span></span><br><span class="line">               <span class="keyword">const</span> size = <span class="title class_">Math</span>.<span class="title function_">min</span>(width, height);</span><br><span class="line"></span><br><span class="line">               <span class="comment">// è®¡ç®—æˆªå–çš„æ­£æ–¹å½¢åŒºåŸŸ</span></span><br><span class="line">               <span class="keyword">const</span> startX = (width - size) / <span class="number">2</span>; <span class="comment">// ä¸­å¿ƒç‚¹</span></span><br><span class="line">               <span class="keyword">const</span> startY = (height - size) / <span class="number">2</span>; <span class="comment">// ä¸­å¿ƒç‚¹</span></span><br><span class="line"></span><br><span class="line">               <span class="comment">// åˆ›å»ºç”»å¸ƒæ¥æˆªå–æ­£æ–¹å½¢</span></span><br><span class="line">               <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line">               canvas.<span class="property">width</span> = size;</span><br><span class="line">               canvas.<span class="property">height</span> = size;</span><br><span class="line"></span><br><span class="line">               <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">               ctx?.<span class="title function_">drawImage</span>(img, startX, startY, size, size, <span class="number">0</span>, <span class="number">0</span>, size, size); <span class="comment">// æˆªå–å¹¶ç»˜åˆ¶æ­£æ–¹å½¢</span></span><br><span class="line"></span><br><span class="line">               <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ç”»å¸ƒä»¥è¿›è¡Œç¼©æ”¾</span></span><br><span class="line">               <span class="keyword">const</span> scaledCanvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line">               scaledCanvas.<span class="property">width</span> = targetWidth;</span><br><span class="line">               scaledCanvas.<span class="property">height</span> = targetHeight;</span><br><span class="line">               <span class="keyword">const</span> scaledCtx = scaledCanvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line"></span><br><span class="line">               <span class="comment">// æŒ‰æ¯”ä¾‹ç¼©æ”¾å›¾åƒ</span></span><br><span class="line">               scaledCtx?.<span class="title function_">drawImage</span>(canvas, <span class="number">0</span>, <span class="number">0</span>, size, size, <span class="number">0</span>, <span class="number">0</span>, targetWidth, targetHeight);</span><br><span class="line"></span><br><span class="line">               <span class="comment">// è¾“å‡ºå‹ç¼©åçš„å›¾ç‰‡</span></span><br><span class="line">               <span class="title function_">resolve</span>(scaledCanvas.<span class="title function_">toDataURL</span>(<span class="string">&#x27;image/jpeg&#x27;</span>, <span class="number">0.5</span>)); <span class="comment">// ä½¿ç”¨ JPEG æ ¼å¼å‹ç¼©</span></span><br><span class="line">          &#125;;</span><br><span class="line">     &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">loadTextureInCocos</span>(<span class="params">node: Node, imageUrl: <span class="built_in">string</span>, width, hight</span>) &#123;</span><br><span class="line">     <span class="keyword">let</span> image = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">     image.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> img = <span class="keyword">new</span> <span class="title class_">ImageAsset</span>(image)</span><br><span class="line">          <span class="keyword">let</span> texture = <span class="keyword">new</span> <span class="title class_">Texture2D</span>();</span><br><span class="line">          texture.<span class="property">image</span> = img; <span class="comment">// è®¾ç½®çº¹ç†çš„å›¾ç‰‡</span></span><br><span class="line">          <span class="keyword">let</span> spriteFrame = <span class="keyword">new</span> <span class="title class_">SpriteFrame</span>();</span><br><span class="line">          spriteFrame.<span class="property">texture</span> = texture;</span><br><span class="line">          node.<span class="title function_">getComponent</span>(<span class="title class_">Sprite</span>).<span class="property">spriteFrame</span> = spriteFrame; <span class="comment">// ç›´æ¥è®¾ç½®ç²¾çµå¸§</span></span><br><span class="line">          node.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>).<span class="title function_">setContentSize</span>(width, hight);</span><br><span class="line">     &#125;;</span><br><span class="line">     image.<span class="property">src</span> = imageUrl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="title function_">clickBtn</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">inputElement</span>.<span class="title function_">click</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5ã€ä»£ç è§£è¯»"><a href="#5ã€ä»£ç è§£è¯»" class="headerlink" title="5ã€ä»£ç è§£è¯»"></a>5ã€ä»£ç è§£è¯»</h3><p><code>æ–‡ä»¶é€‰æ‹©äº‹ä»¶</code>ï¼šæˆ‘ä»¬ä¸ºæ–‡ä»¶é€‰æ‹©å™¨è®¾ç½®äº† <code>change</code> äº‹ä»¶ç›‘å¬å™¨ï¼Œå½“ç”¨æˆ·é€‰æ‹©å›¾ç‰‡æ—¶ï¼Œä¼šè°ƒç”¨ <code>handleFileUpload()</code> æ–¹æ³•ã€‚</p>
<p><code>FileReader è¯»å–å›¾ç‰‡``ï¼šFileReader</code> ç”¨æ¥è¯»å–ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º <code>Base64</code> æ•°æ® URL æ ¼å¼ã€‚</p>
<h3 id="6ã€æ³¨æ„äº‹é¡¹"><a href="#6ã€æ³¨æ„äº‹é¡¹" class="headerlink" title="6ã€æ³¨æ„äº‹é¡¹"></a>6ã€æ³¨æ„äº‹é¡¹</h3><p><code>è·¨åŸŸé—®é¢˜</code>ï¼šç¡®ä¿ä½ çš„æœåŠ¡å™¨æ”¯æŒ httpsï¼Œå¦åˆ™æŸäº›æµè§ˆå™¨å¯èƒ½ä¼šé™åˆ¶ä¸Šä¼ åŠŸèƒ½çš„ä½¿ç”¨ã€‚<br><code>UIå¸ƒå±€</code>ï¼šä¸Šä¼ æŒ‰é’®çš„ä½ç½®å¯ä»¥æ ¹æ®ä½ çš„æ¸¸æˆåœºæ™¯åŠ¨æ€è°ƒæ•´ã€‚<br><code>æ€§èƒ½è€ƒè™‘</code>ï¼šå¦‚æœå›¾ç‰‡è¿‡å¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ¶ˆè€—è¿‡å¤šï¼Œå¯ä»¥åœ¨ä¸Šä¼ å‰å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©ã€‚</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creator3.7.2è·å–Label(æ ‡ç­¾)å°ºå¯¸</title>
    <url>/6025db79.html</url>
    <content><![CDATA[<p>è¦åœ¨Cocos Creatorä¸­ä½¿ç”¨TypeScriptæ­£ç¡®è·å–ä¿®æ”¹åçš„æ ‡ç­¾ï¼ˆlabelï¼‰å°ºå¯¸ï¼Œæ‚¨éœ€è¦ç¡®ä¿åœ¨æ ‡ç­¾è¢«æ›´æ–°æˆ–æ¸²æŸ“åå†è®¿é—®æ ‡ç­¾çš„å°ºå¯¸ã€‚ä»¥ä¸‹æ˜¯å®ç°æ­¤ç›®çš„çš„é€æ­¥æ–¹æ³•ï¼š</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="ä¿®æ”¹æ ‡ç­¾å†…å®¹"><a href="#ä¿®æ”¹æ ‡ç­¾å†…å®¹" class="headerlink" title="ä¿®æ”¹æ ‡ç­¾å†…å®¹"></a>ä¿®æ”¹æ ‡ç­¾å†…å®¹</h3><h4 id="ä¿®æ”¹æ ‡ç­¾çš„å†…å®¹"><a href="#ä¿®æ”¹æ ‡ç­¾çš„å†…å®¹" class="headerlink" title="ä¿®æ”¹æ ‡ç­¾çš„å†…å®¹"></a>ä¿®æ”¹æ ‡ç­¾çš„å†…å®¹</h4><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾ &quot;label&quot; æ˜¯æ‚¨çš„æ ‡ç­¾èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">const</span> labelNode = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">getChildByName</span>(<span class="string">&quot;LabelNode&quot;</span>); <span class="comment">// æ›¿æ¢ä¸ºæ‚¨å®é™…çš„èŠ‚ç‚¹åç§°</span></span><br><span class="line"><span class="keyword">const</span> labelComponent = labelNode.<span class="title function_">getComponent</span>(cc.<span class="property">Label</span>);</span><br><span class="line">labelComponent.<span class="property">string</span> = <span class="string">&quot;æ–°çš„æ ‡ç­¾å†…å®¹&quot;</span>; <span class="comment">// ä¿®æ”¹æ ‡ç­¾å†…å®¹</span></span><br></pre></td></tr></table></figure>
<h3 id="ç­‰å¾…æ ‡ç­¾æ›´æ–°"><a href="#ç­‰å¾…æ ‡ç­¾æ›´æ–°" class="headerlink" title="ç­‰å¾…æ ‡ç­¾æ›´æ–°"></a>ç­‰å¾…æ ‡ç­¾æ›´æ–°</h3><p>ä½ å¯èƒ½éœ€è¦ç­‰åˆ°ä¸‹ä¸€å¸§ï¼Œä»¥ç¡®ä¿æ ‡ç­¾å·²ä½¿ç”¨æ–°å†…å®¹è¿›è¡Œæ›´æ–°</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">director.<span class="title function_">getScheduler</span>().<span class="title function_">schedule</span>(<span class="function">() =&gt;</span> &#123;              </span><br><span class="line">   director.<span class="title function_">getScheduler</span>().<span class="title function_">unscheduleAllForTarget</span>(labelComponent);             </span><br><span class="line">   <span class="keyword">let</span> width = labelComponent.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>).<span class="property">width</span>;           </span><br><span class="line">   <span class="keyword">let</span> height = labelComponent.<span class="property">node</span>.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>).<span class="property">height</span>;             </span><br><span class="line">   labelComponent.<span class="property">node</span>.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>).<span class="title function_">setContentSize</span>(width,height);         </span><br><span class="line">   &#125;,labelComponent,<span class="number">0</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorå¼€å‘ä¸­æ·»åŠ å¹¿æ’­</title>
    <url>/c2be17de.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="è®¾è®¡æ€è·¯ï¼š"><a href="#è®¾è®¡æ€è·¯ï¼š" class="headerlink" title="è®¾è®¡æ€è·¯ï¼š"></a>è®¾è®¡æ€è·¯ï¼š</h3><ol>
<li>å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªé•¿é“¾æ¥ï¼Œç”¨æ¥æ¥æ”¶æœåŠ¡å™¨å‘è¿‡æ¥çš„å¹¿æ’­æ¶ˆæ¯</li>
<li>åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œå°†æ¥æ”¶åˆ°çš„å¹¿æ’­æ¶ˆæ¯æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­</li>
<li>å»ºç«‹ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå®šæœŸä»é˜Ÿåˆ—ä¸­å–å‡ºæ¶ˆæ¯ï¼Œå¹¶å±•ç¤ºå‡ºæ¥</li>
<li>å±•ç¤ºæ–¹æ³•ï¼šåˆ›å»ºä¸€ä¸ªLabelï¼ŒLabelä¸ºå–å‡ºæ¥çš„æ¶ˆæ¯ï¼Œç„¶åå…‹éš†è¯¥LabelèŠ‚ç‚¹ï¼Œä»å³å¾€å·¦çš„è¿›è¡Œç§»åŠ¨ï¼Œåˆ°ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®åï¼Œåˆ é™¤è¯¥èŠ‚ç‚¹ã€‚</li>
</ol>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> messageQueue = []; <span class="comment">// åˆ›å»ºä¸€ä¸ªç©ºé˜Ÿåˆ—</span></span><br><span class="line"></span><br><span class="line">ws.<span class="property">onmessage</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> data = event.<span class="property">data</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Received data: &quot;</span> + data);</span><br><span class="line">    messageQueue.<span class="title function_">push</span>(data); <span class="comment">// å°†æ¥æ”¶åˆ°çš„æ¶ˆæ¯æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨å®šæ—¶å™¨ï¼Œå®šæœŸä»é˜Ÿåˆ—ä¸­å–å‡ºæ¶ˆæ¯å¹¶è¿›è¡Œå¤„ç†</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (messageQueue.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> data = messageQueue.<span class="title function_">shift</span>(); <span class="comment">// ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€æ¡æ¶ˆæ¯</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Processing data: &quot;</span> + data);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_TextC_broadcast</span>.<span class="property">string</span> = data;   <span class="comment">//Labelå†…å®¹è®¾ç½®ä¸ºä»é˜Ÿåˆ—ä¸­å–å‡ºæ¥çš„æ¶ˆæ¯</span></span><br><span class="line">        <span class="keyword">let</span> broadMessage = <span class="title function_">instantiate</span>(<span class="variable language_">this</span>.<span class="property">_view</span>.<span class="property">_TextC_broadcast</span>.<span class="property">node</span>);  <span class="comment">//æ¯æ¬¡å…‹éš†ä¸€ä¸ªLabel</span></span><br><span class="line">        <span class="title function_">tween</span>(broadMessage).<span class="title function_">to</span>(broadTime*<span class="number">1.5</span>, &#123; <span class="attr">position</span>: <span class="keyword">new</span> <span class="title class_">Vec3</span>(x, <span class="number">0</span>, <span class="number">0</span>) &#125;).<span class="title function_">call</span>(<span class="function">()=&gt;</span>&#123;  <span class="comment">// å¹¿æ’­æ–‡å­—ç§»åŠ¨</span></span><br><span class="line">            broadMessage.<span class="title function_">destroy</span>();   <span class="comment">// ç§»åŠ¨ç»“æŸååˆ é™¤è¯¥èŠ‚ç‚¹</span></span><br><span class="line">        &#125;).<span class="title function_">start</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">1000</span>); <span class="comment">// æ¯ç§’å¤„ç†ä¸€æ¡æ¶ˆæ¯</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatoræ‰“å¼€é‡åˆ°Error launching appçš„é”™è¯¯</title>
    <url>/83b0e3e9.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åŒäº‹ä¹‹å‰å®‰è£…å¥½äº†Cocos Creatorï¼Œä»Šå¤©æ‰“å¼€å·¥ç¨‹çš„æ—¶å€™å‡ºç°äº†ä¸‹é¢é”™è¯¯ï¼š<br><img data-src="https://s1.ax1x.com/2023/07/12/pChSx9s.png" alt="" /></p>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>ç›´æ¥å°†æ‰€ç”¨åˆ°çš„Cocos Creatorç‰ˆæœ¬å¸è½½åé‡è£…å³å¯ã€‚</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Error Launching App When Opening Cocos Creator</title>
    <url>/83b0e3e9en.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>A colleague had previously installed Cocos Creator, but today, when trying to open a project, the following error occurred:<br><img data-src="https://s1.ax1x.com/2023/07/12/pChSx9s.png" alt="" /></p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution:"></a>Solution:</h3><p>Simply uninstall and reinstall the version of Cocos Creator being used.</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatoræ‰¾å‡ºæœªç”¨åˆ°çš„å›¾ç‰‡</title>
    <url>/bedc7940.html</url>
    <content><![CDATA[<p>æœ€è¿‘æ•´ç†é¡¹ç›®çš„æ—¶å€™å‘ç°æœ‰äº›èµ„æºæ–‡ä»¶å¤¹æœ‰ç‚¹è½®ä¹±(ä¸€äº›å†å²åŸå› å¯¼è‡´çš„)ï¼Œè€Œä¸”æœ‰å¾ˆå¤šå›¾ç‰‡éƒ½æ˜¯æ²¡ç”¨äº†çš„ï¼Œä½†æ˜¯æ²¡æœ‰è¢«åˆ é™¤æ‰ï¼Œè¿˜ä¸€ç›´æ”¾åœ¨é¡¹ç›®ä¸­ï¼Œå¯¼è‡´é¡¹ç›®çš„èµ„æºæ–‡ä»¶å¤¹æ¯”è¾ƒå¤§ï¼Œè€Œä¸”è¿˜å†—ä½™ã€‚äºæ˜¯ä»Šå¤©æƒ³ç€æ•´ç†ä¸€ä¸‹ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="æ‰¾å‡ºæœªä½¿ç”¨çš„å›¾ç‰‡"><a href="#æ‰¾å‡ºæœªä½¿ç”¨çš„å›¾ç‰‡" class="headerlink" title="æ‰¾å‡ºæœªä½¿ç”¨çš„å›¾ç‰‡"></a>æ‰¾å‡ºæœªä½¿ç”¨çš„å›¾ç‰‡</h2><p>æœ‰å¥½å‡ ç§æ–¹æ³•å¯ä»¥æ‰¾å‡ºæœªä½¿ç”¨çš„å›¾ç‰‡ï¼Œæ‰¾åˆ°æœªä½¿ç”¨çš„æ‰¸åï¼Œå¯ä»¥é€‰æ‹©å°†å…¶ä»é¡¹ç›®ç§åˆ é™¤ï¼Œä»¥å‡å°‘é¡¹ç›®çš„å¤§å°å¹¶ç®€åŒ–èµ„æºç®¡ç†ã€‚</p>
<h3 id="æ–¹æ³•ä¸€-èµ„æºç®¡ç†å™¨æ£€æŸ¥"><a href="#æ–¹æ³•ä¸€-èµ„æºç®¡ç†å™¨æ£€æŸ¥" class="headerlink" title="æ–¹æ³•ä¸€ èµ„æºç®¡ç†å™¨æ£€æŸ¥"></a>æ–¹æ³•ä¸€ èµ„æºç®¡ç†å™¨æ£€æŸ¥</h3><p>åœ¨Cocos Creatorçš„èµ„æºç®¡ç†å™¨ä¸­é€‰æ‹©ä½ è¦æŸ¥çœ‹çš„å›¾ç‰‡ï¼Œå³é”®ï¼Œé€‰æ‹©<code>æŸ¥çœ‹uuidçš„å¼•ç”¨</code>ï¼ŒæŸ¥çœ‹å›¾ç‰‡çš„å¼•ç”¨ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•åœºæ™¯æˆ–è€…é¢„åˆ¶å¼•ç”¨è¿™å¼ å›¾ç‰‡ï¼Œç„¶åæŸ¥çœ‹ä»£ç ä¸­æœ‰æ²¡æœ‰å¼•ç”¨ã€‚å¦‚æœéƒ½æ²¡æœ‰å¼•ç”¨ï¼Œå°±è¯´æ˜è¿™å¼ å›¾ç‰‡æ˜¯æœªè¢«ä½¿ç”¨çš„ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥åˆ é™¤è¿™å¼ ç…§ç‰‡äº†ã€‚</p>
<h3 id="æ–¹æ³•äºŒ-å†™ä¸€ä¸ªè„šæœ¬å»å¸®æˆ‘ä»¬æŸ¥è¯¢"><a href="#æ–¹æ³•äºŒ-å†™ä¸€ä¸ªè„šæœ¬å»å¸®æˆ‘ä»¬æŸ¥è¯¢" class="headerlink" title="æ–¹æ³•äºŒ å†™ä¸€ä¸ªè„šæœ¬å»å¸®æˆ‘ä»¬æŸ¥è¯¢"></a>æ–¹æ³•äºŒ å†™ä¸€ä¸ªè„šæœ¬å»å¸®æˆ‘ä»¬æŸ¥è¯¢</h3><p>å¦‚æœæˆ‘ä»¬é¡¹ç›®çš„èµ„æºå›¾ç‰‡æ¯”è¾ƒå¤šï¼Œè¿™ä¸ªæ—¶å€™å†ç”¨æ–¹æ³•ä¸€å°±æ˜¾å¾—æ¯”è¾ƒâ€œè ¢â€ï¼Œæ¯•ç«Ÿä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œè¿™ç§é‡å¤ä¸”è´¹æ—¶é—´çš„äº‹æƒ…å¯ä»¥äº¤ç»™ç¨‹åºå»åšã€‚<br>è¿™é‡Œæˆ‘å†™äº†ä¸€ä¸ª<code>js</code>è„šæœ¬æ¥å¸®æˆ‘æ‰¾å‡ºæœªä½¿ç”¨çš„å›¾ç‰‡ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¡¹ç›®èµ„æºç›®å½•</span></span><br><span class="line"><span class="keyword">const</span> assetsDir = path.<span class="title function_">join</span>(project_dir, <span class="string">&#x27;assets&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getAllImageFiles</span>(<span class="params">dir, fileList = []</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> files = fs.<span class="title function_">readdirSync</span>(dir);</span><br><span class="line">    files.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> filePath = path.<span class="title function_">join</span>(dir, file);</span><br><span class="line">        <span class="keyword">if</span> (fs.<span class="title function_">statSync</span>(filePath).<span class="title function_">isDirectory</span>()) &#123;</span><br><span class="line">            <span class="title function_">getAllImageFiles</span>(filePath, fileList);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (filePath.<span class="title function_">endsWith</span>(<span class="string">&#x27;.png&#x27;</span>) || filePath.<span class="title function_">endsWith</span>(<span class="string">&#x27;.jpg&#x27;</span>)) &#123;</span><br><span class="line">            fileList.<span class="title function_">push</span>(filePath);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> fileList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ‰€æœ‰é¢„åˆ¶ä½“æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getAllPrefabFiles</span>(<span class="params">dir, fileList = []</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> files = fs.<span class="title function_">readdirSync</span>(dir);</span><br><span class="line">    files.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> filePath = path.<span class="title function_">join</span>(dir, file);</span><br><span class="line">        <span class="keyword">if</span> (fs.<span class="title function_">statSync</span>(filePath).<span class="title function_">isDirectory</span>()) &#123;</span><br><span class="line">            <span class="title function_">getAllPrefabFiles</span>(filePath, fileList);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (filePath.<span class="title function_">endsWith</span>(<span class="string">&#x27;.prefab&#x27;</span>)) &#123;</span><br><span class="line">            fileList.<span class="title function_">push</span>(filePath);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> fileList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£æé¢„åˆ¶ä½“æ–‡ä»¶ï¼Œè·å–å¼•ç”¨çš„å›¾ç‰‡UUID</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getReferencedImageUUIDs</span>(<span class="params">prefabFiles</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> referencedUUIDs = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">    prefabFiles.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> content = fs.<span class="title function_">readFileSync</span>(file, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">            <span class="keyword">const</span> regex = <span class="regexp">/&quot;__uuid__&quot;: &quot;([a-fA-F0-9-@]+)&quot;/g</span>;</span><br><span class="line">            <span class="keyword">let</span> match;</span><br><span class="line">            <span class="keyword">while</span> ((match = regex.<span class="title function_">exec</span>(content)) !== <span class="literal">null</span>) &#123;</span><br><span class="line">                referencedUUIDs.<span class="title function_">add</span>(match[<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`è¯»å–é¢„åˆ¶ä½“æ–‡ä»¶ <span class="subst">$&#123;file&#125;</span> æ—¶å‡ºé”™ï¼š`</span>, error);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> referencedUUIDs;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å›¾ç‰‡æ–‡ä»¶çš„UUID</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getImageUUID</span>(<span class="params">filePath</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> metaPath = filePath + <span class="string">&#x27;.meta&#x27;</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> metaContent = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(fs.<span class="title function_">readFileSync</span>(metaPath, <span class="string">&#x27;utf8&#x27;</span>));</span><br><span class="line">        <span class="keyword">return</span> metaContent.<span class="property">uuid</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`è¯»å–å…ƒæ•°æ®æ–‡ä»¶ <span class="subst">$&#123;metaPath&#125;</span> æ—¶å‡ºé”™ï¼š`</span>, error);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æœªè¢«å¼•ç”¨çš„å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUnreferencedImages</span>(<span class="params">imageFiles, referencedUUIDs</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> unreferencedImages = [];</span><br><span class="line">    imageFiles.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> uuid = <span class="title function_">getImageUUID</span>(file)+<span class="string">&quot;@f9941&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (uuid &amp;&amp; !referencedUUIDs.<span class="title function_">has</span>(uuid)) &#123;</span><br><span class="line">            unreferencedImages.<span class="title function_">push</span>(file);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> unreferencedImages;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> imageFiles = <span class="title function_">getAllImageFiles</span>(assetsDir);</span><br><span class="line">    <span class="keyword">const</span> prefabFiles = <span class="title function_">getAllPrefabFiles</span>(assetsDir);</span><br><span class="line">    <span class="keyword">const</span> referencedUUIDs = <span class="title function_">getReferencedImageUUIDs</span>(prefabFiles);</span><br><span class="line">    <span class="keyword">const</span> unreferencedImages = <span class="title function_">getUnreferencedImages</span>(imageFiles, referencedUUIDs);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> outputFile = path.<span class="title function_">join</span>(project_dir, <span class="string">&#x27;unreferenced_images.txt&#x27;</span>);</span><br><span class="line">        fs.<span class="title function_">writeFileSync</span>(outputFile, <span class="string">&#x27;æœªè¢«å¼•ç”¨çš„å›¾ç‰‡:\n&#x27;</span>);</span><br><span class="line">        unreferencedImages.<span class="title function_">forEach</span>(<span class="function"><span class="params">image</span> =&gt;</span> &#123;</span><br><span class="line">        fs.<span class="title function_">appendFileSync</span>(outputFile, image + <span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æœªè¢«å¼•ç”¨çš„å›¾ç‰‡åˆ—è¡¨å·²å†™å…¥åˆ° <span class="subst">$&#123;outputFile&#125;</span>`</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;å¤„ç†è¿‡ç¨‹ä¸­å‡ºé”™:&#x27;</span>, error);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¯´æ˜ï¼š<br>ç›´æ¥å¤åˆ¶ç²˜è´´ä»£ç æ˜¯è‚¯å®šä¸è¡Œçš„ï¼Œéœ€è¦æ³¨æ„ä¸‹é¢å‡ ç‚¹ï¼š<br>1ã€å°†ä»£ç ä¸­çš„<code>project_dir</code>æ”¹æˆä½ è‡ªå·±çš„é¡¹ç›®æ ¹è·¯å¾„ï¼›<br>2ã€æˆ‘è¿™é‡Œæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ˜¯ç”¨çš„é¢„åˆ¶ä½“çš„å½¢å¼ï¼Œæ‰€ä»¥æˆ‘åªéœ€è¦éå†é¢„åˆ¶å³å¯ã€‚å¦‚æœä½ é¡¹ç›®ä¸­çš„<code>scene</code>ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™å»ºè®®éå†<code>scene</code>æ–‡ä»¶ï¼Œåªéœ€è¦å°†ä»£ç ä¸­çš„<code>filePath.endsWith(&#39;.prefab&#39;)</code>æ”¹ä¸º<code>filePath.endsWith(&#39;.scene&#39;)</code>å³å¯ã€‚<br>3ã€å…³äºè·å–<code>__uuid__</code>æ—¶çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå› ä¸ºæˆ‘å‘ç°æˆ‘é¢„åˆ¶æ–‡ä»¶ä¸­å›¾ç‰‡çš„<code>uuid</code>ä¼šæœ‰ä¸€ä¸ª<code>@</code>ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œçš„æ­£åˆ™è¡¨è¾¾å¼æ˜¯è¿™æ ·çš„<code>const regex = /&quot;__uuid__&quot;: &quot;([a-fA-F0-9-]+)&quot;/g;</code>,å¦‚æœä½ çš„<code>uuid</code>æ²¡æœ‰<code>@</code>ï¼Œå°±éœ€è¦ä¿®æ”¹è¿™é‡Œçš„æ­£åˆ™ï¼Œå»æ‰å‰é¢æ­£åˆ™ä¸­çš„<code>@</code>å³å¯ã€‚<br>4ã€åœ¨è¡Œä»£ç ä¸­<code>const uuid = getImageUUID(file)+&quot;@f9941&quot;;</code>ï¼Œæˆ‘åœ¨æœ€ååŠ äº†ä¸ª<code>+&quot;@f9941&quot;</code>,æ˜¯å› ä¸ºæˆ‘èµ„æºæ–‡ä»¶å¤¹ä¸­å›¾ç‰‡çš„uuidæ²¡æœ‰<code>@f9941</code>ï¼Œè€Œé¢„åˆ¶ä¸­æ‰€æœ‰å›¾ç‰‡çš„uuidåé¢éƒ½ä¼šæœ‰ä¸€ä¸ª<code>@f9941</code>ï¼Œæ‰€ä»¥ä¸ºäº†åˆ¤æ–­å›¾ç‰‡çš„uuidæ˜¯å¦åœ¨é¢„åˆ¶ä¸­ï¼Œå°±åœ¨è·å–åˆ°çš„å›¾ç‰‡uuidåé¢åŠ äº†è¿™è¡Œå­—ç¬¦ä¸²ã€‚æ³¨æ„ï¼Œè¿™é‡Œä½ ä¸ä¸€å®šéœ€è¦åŠ ï¼Œæˆ–è€…åŠ çš„å­—ç¬¦ä¸²å’Œæˆ‘çš„ä¸ä¸€æ ·ï¼Œä¿®æ”¹è‡ªè¡Œä¿®æ”¹ã€‚å¦åˆ™å¯èƒ½å‘ç”Ÿæ‰¾å‡ºçš„æœªä½¿ç”¨å›¾ç‰‡æ˜¯ä½ èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰å›¾ç‰‡çš„æƒ…å†µã€‚<br>5ã€è¿è¡Œä»£ç <code>node demo.js</code>ï¼Œå°±ä¼šåœ¨ä½ æŒ‡å®šçš„è·¯å¾„ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º<code>unreferenced_images.txt</code>æ–‡ä»¶ï¼Œé‡Œé¢è¯¦ç»†å†™ç€æœªè¢«ä½¿ç”¨çš„å›¾ç‰‡è·¯å¾„ã€‚</p>
<h3 id="è„šæœ¬ä¼˜åŒ–"><a href="#è„šæœ¬ä¼˜åŒ–" class="headerlink" title="è„šæœ¬ä¼˜åŒ–"></a>è„šæœ¬ä¼˜åŒ–</h3><p>æˆ‘è¿™é‡Œåªæ˜¯ç®€å•çš„æ‰¾å‡ºäº†æœªè¢«é¢„åˆ¶å¼•ç”¨çš„å›¾ç‰‡ï¼Œä½†æ˜¯è¿™äº›å›¾ç‰‡å¯èƒ½åœ¨ä»£ç ä¸­è¢«å¼•ç”¨ï¼Œæ‰€ä»¥æ‰¾åˆ°è¿™äº›å›¾ç‰‡åè¿˜ä¸èƒ½ç®€å•ç²—æš´çš„ç›´æ¥åˆ é™¤ï¼Œè¿˜å¾—æŸ¥çœ‹ä»£ç ä¸­æ˜¯å¦æœ‰ä½¿ç”¨ï¼Œå¦‚æœæœ‰ä½¿ç”¨åˆ™ä¸èƒ½åˆ é™¤ã€‚<br>æ‰€ä»¥æˆ‘ä»¬åœ¨éå†çš„æ—¶å€™ä¸èƒ½ä»…ä»…åªéå†é¢„åˆ¶ï¼Œæœ€å¥½èƒ½å¤Ÿå°†è‡ªå·±çš„ä»£ç ä¹Ÿéå†ä¸€éï¼Œçœ‹å›¾ç‰‡æ˜¯å¦è¢«ä»£ç ç›´æ¥å¼•ç”¨ã€‚</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatoræ¥å…¥telegramæ”¯ä»˜</title>
    <url>/1069c4d4.html</url>
    <content><![CDATA[<p>è¿™é‡Œçš„Cocos Creatoræ¥å…¥telegramæ”¯ä»˜ï¼Œåªæ˜¯ç®€å•çš„åšäº†ä¸€ä¸ªåœ¨Cocos Creatorä¸­æ‹‰èµ·telegram Botå¹¶å‘é€ä¸€ä¸ªå‘ç¥¨ã€‚ä½ éœ€è¦é€šè¿‡HTTPè¯·æ±‚ä¸teleram Bot API è¿›è¡Œäº¤äº’ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="å‰æœŸå·¥ä½œ"><a href="#å‰æœŸå·¥ä½œ" class="headerlink" title="å‰æœŸå·¥ä½œ"></a>å‰æœŸå·¥ä½œ</h3><p>1ã€å»ºè®®é˜…è¯»å‰é¢å‡ ç¯‡å’Œtelegramç›¸å…³çš„æ–‡ç« <br>2ã€åˆ›å»ºä¸€ä¸ªtelegram Botå¹¶è·å¾—äº†Bot Token<br>3ã€å‡†å¤‡å‘ç¥¨ä¿¡æ¯ï¼Œæ¯”å¦‚å•†å“åç§°ã€ä»·æ ¼ã€è´§å¸ç­‰</p>
<h3 id="Cocos-Creator"><a href="#Cocos-Creator" class="headerlink" title="Cocos Creator"></a>Cocos Creator</h3><p>åœ¨æ­£å¼ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½å‰ï¼Œæˆ‘ä»¬æœ€å¥½æ˜¯èƒ½å¤Ÿå†™ä¸€ä¸ªæµ‹è¯•ä»£ç ã€‚æˆ‘è¿™é‡Œåšçš„æ¯”è¾ƒç®€å•ï¼Œç›´æ¥æ–°å»ºäº†ä¸€ä¸ªå·¥ç¨‹ï¼Œç„¶ååœ¨sceneä¸­æ·»åŠ äº†ä¸€ä¸ªæŒ‰é’®ï¼Œå…¶ä»–å°±ä»€ä¹ˆéƒ½æ²¡æœ‰äº†ã€‚<br>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Component</span>, <span class="title class_">Node</span> ,<span class="title class_">Button</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InvoiceData</span> &#123;</span><br><span class="line">    <span class="attr">chat_id</span>: <span class="built_in">string</span>; <span class="comment">// æ”¶æ¬¾äººèŠå¤© ID</span></span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">string</span>;   <span class="comment">// å•†å“åç§°</span></span><br><span class="line">    <span class="attr">description</span>: <span class="built_in">string</span>; <span class="comment">// å•†å“æè¿°</span></span><br><span class="line">    <span class="attr">payload</span>: <span class="built_in">string</span>; <span class="comment">// å”¯ä¸€çš„è´Ÿè½½</span></span><br><span class="line">    <span class="attr">provider_token</span>: <span class="built_in">string</span>; <span class="comment">// æ”¯ä»˜æä¾›è€…çš„ Token</span></span><br><span class="line">    <span class="attr">start_parameter</span>: <span class="built_in">string</span>; <span class="comment">// å¼€å§‹å‚æ•°</span></span><br><span class="line">    <span class="attr">currency</span>: <span class="built_in">string</span>; <span class="comment">// è´§å¸</span></span><br><span class="line">    <span class="attr">prices</span>: <span class="built_in">string</span>;  <span class="comment">// Prices should be a JSON string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ccclass</span>(<span class="string">&#x27;NewComponent&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">NewComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="meta">@property</span>(<span class="title class_">Button</span>)</span><br><span class="line">    <span class="attr">button</span>: <span class="title class_">Button</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="meta">@property</span>(<span class="title class_">Button</span>)</span><br><span class="line">    <span class="attr">webAppButton</span>: <span class="title class_">Button</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">apiUrl</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">invoiceData</span>: <span class="title class_">InvoiceData</span>;</span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// Telegram API URL</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">apiUrl</span> = <span class="string">`https://api.telegram.org/bot<span class="subst">$&#123;ä½ æœºå™¨äººçš„token&#125;</span>/sendInvoice`</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å‘ç¥¨ä¿¡æ¯</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">invoiceData</span> = &#123;</span><br><span class="line">            <span class="attr">chat_id</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ”¶æ¬¾äººèŠå¤© IDï¼Œå‰é¢æ–‡ç« æœ‰äº›å¦‚ä½•è·å–</span></span><br><span class="line">            <span class="attr">title</span>: <span class="string">&#x27;Product Title&#x27;</span>, <span class="comment">// å•†å“åç§°</span></span><br><span class="line">            <span class="attr">description</span>: <span class="string">&#x27;Product Description&#x27;</span>, <span class="comment">// å•†å“æè¿°</span></span><br><span class="line">            <span class="attr">payload</span>: <span class="string">&#x27;UniquePayload&#x27;</span>, <span class="comment">// å”¯ä¸€çš„è´Ÿè½½</span></span><br><span class="line">            <span class="attr">provider_token</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ”¯ä»˜æä¾›è€…çš„ Tokenï¼Œå‰é¢æ–‡ç« æœ‰å†™å¦‚ä½•è·å–</span></span><br><span class="line">            <span class="attr">start_parameter</span>: <span class="string">&#x27;start&#x27;</span>, <span class="comment">// å¼€å§‹å‚æ•°</span></span><br><span class="line">            <span class="attr">currency</span>: <span class="string">&#x27;USD&#x27;</span>, <span class="comment">// è´§å¸</span></span><br><span class="line">            <span class="attr">prices</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([&#123; <span class="attr">label</span>: <span class="string">&#x27;Product&#x27;</span>, <span class="attr">amount</span>: <span class="number">1000</span> &#125;]), <span class="comment">// å•†å“ä»·æ ¼</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">update</span>(<span class="params">deltaTime: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">async</span> openBot () &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="variable language_">this</span>.<span class="property">apiUrl</span>, &#123;</span><br><span class="line">                <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">                <span class="attr">headers</span>: &#123;</span><br><span class="line">                    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">invoiceData</span>),</span><br><span class="line">            &#125;);</span><br><span class="line">    </span><br><span class="line">            <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    </span><br><span class="line">            <span class="keyword">if</span> (data.<span class="property">ok</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Invoice sent successfully:&#x27;</span>, data);</span><br><span class="line">                <span class="keyword">const</span> botUsername = <span class="string">&#x27;&#x27;</span>; <span class="comment">// æ›¿æ¢ä¸ºä½ çš„æœºå™¨äººç”¨æˆ·å</span></span><br><span class="line">                <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">`https://t.me/<span class="subst">$&#123;botUsername&#125;</span>`</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to send invoice:&#x27;</span>, data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error sending invoice:&#x27;</span>, error);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç å†™å¥½åæˆ‘ä»¬å°±å¯ä»¥æ¥è¿è¡Œç¨‹åºäº†ï¼Œæˆ‘è¿™é‡Œæ˜¯ä½¿ç”¨çš„æµè§ˆå™¨é¢„è§ˆã€‚ç‚¹å‡»æŒ‰é’®åä¼šè·³è½¬åˆ°æ‰“å¼€telegramèŠå¤©çš„ç•Œé¢:<br><img data-src="https://pic.imgdb.cn/item/6686a008d9c307b7e91bb03b.png" alt="è·³è½¬ç•Œé¢"><br>è¿™é‡Œç‚¹å‡»<code>æ‰“å¼€Telegram Desktop</code>ï¼Œå¦‚æœä½ å®‰è£…äº†telegramå°±ä¼šè·³è½¬åˆ°å’ŒBotå¯¹è¯æ¡†ï¼Œå¦‚ä¸‹ï¼š<br>å¦‚ä¸‹ï¼š<br><img data-src="https://pic.imgdb.cn/item/6686a0fcd9c307b7e91da7b6.png" alt="æ”¯ä»˜æœºå™¨äºº"><br>è¿™é‡Œå¯ä»¥çœ‹è§æœºå™¨äººæ­£ç¡®çš„ç»™ä½ å‘é€äº†ä¸€ä¸ªå‘ç¥¨ï¼Œå‘ç¥¨ä¿¡æ¯ç”±ä½ è‡ªå·±è®¾ç½®ï¼Œæˆ‘ä»¬ç°åœ¨å°±å¯ä»¥å»æµ‹è¯•æ”¯ä»˜å•¦ã€‚</p>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorç›‘å¬æ¸¸æˆæ˜¯å¦ç½®äºåå°</title>
    <url>/d24f8349.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; game, <span class="title class_">Game</span> &#125; <span class="keyword">from</span> <span class="string">&quot;cc&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">HideOrShow</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">        game.<span class="title function_">on</span>(<span class="title class_">Game</span>.<span class="property">EVENT_HIDE</span>, <span class="variable language_">this</span>.<span class="property">onAppHide</span>, <span class="variable language_">this</span>);</span><br><span class="line">        game.<span class="title function_">on</span>(<span class="title class_">Game</span>.<span class="property">EVENT_SHOW</span>, <span class="variable language_">this</span>.<span class="property">onAppShow</span>, <span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">onAppHide</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åº”ç”¨è¿›å…¥åå°&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">onAppShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åº”ç”¨å›åˆ°å‰å°&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">onDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">        game.<span class="title function_">off</span>(<span class="title class_">Game</span>.<span class="property">EVENT_HIDE</span>, <span class="variable language_">this</span>.<span class="property">onAppHide</span>, <span class="variable language_">this</span>);</span><br><span class="line">        game.<span class="title function_">off</span>(<span class="title class_">Game</span>.<span class="property">EVENT_SHOW</span>, <span class="variable language_">this</span>.<span class="property">onAppShow</span>, <span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨åº”ç”¨æ‰“å¼€çš„æ—¶å€™è°ƒç”¨ä¸Šé¢çš„<code>onLoad</code>å‡½æ•°å°±å¯ä»¥å•¦ï¼Œæˆ‘ä»¬å»çœ‹çœ‹æ—¥å¿—å§~<br><img data-src="https://pic.imgdb.cn/item/6643287f0ea9cb1403928192.png" alt="" /></p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorç»™å‡ ä¸ªç²¾çµæ·»åŠ ç‚¹å‡»äº‹ä»¶</title>
    <url>/9b2c87ad.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p><strong>å¼€å‘ç¯å¢ƒï¼š</strong> Cocos Creator 3.7.2<br><strong>å¼€å‘è¯­è¨€ï¼š</strong> TypeScript<br><strong>èƒŒæ™¯ï¼š</strong> å°ç™½å¼€å§‹å­¦ä¹ Cocos Creatorï¼Œåœ¨ä¸€ä¸ªåœºæ™¯ä¸­æœ‰6ä¸ªç›¸åŒçš„ç²¾çµï¼Œè‡ªå·±éœ€è¦çŸ¥é“æŒ‰é’®ã€ç§»åŠ¨çš„æ˜¯å“ªä¸ªç²¾çµã€‚<br>è‡ªå·±å°ç™½ä¸€ä¸ªï¼Œè®°å½•è‡ªå·±çš„æ–¹æ³•ï¼Œå¦‚æœæ‚¨æœ‰æ›´å¥½æ›´ç®€ä¾¿çš„æ–¹æ³•ï¼Œæ¬¢è¿è¯„è®ºåŒºå›å¤ï¼Œè¿˜æœ›å„ä½å¤§ä½¬å¤šå¤šæŒ‡æ•™<br><strong>ä»£ç ï¼š</strong></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Component</span>, <span class="title class_">Node</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ccclass</span>(<span class="string">&#x27;Drag&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Drag</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="meta">@property</span>(&#123;<span class="attr">type</span>:<span class="title class_">Node</span>&#125;)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">DragRoll</span>:<span class="title class_">Node</span>[] =[];  <span class="comment">// æŒ‚è½½çš„èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">touchNum</span>:<span class="built_in">number</span> = <span class="number">0</span>;  <span class="comment">// è®°å½•ç‚¹çš„æ˜¯å“ªä¸ªç²¾çµ</span></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">onEnable</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">6</span>;i++)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">DragRoll</span>[i].<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_START</span>,<span class="variable language_">this</span>.<span class="property">_onTouchStart</span>,<span class="variable language_">this</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">DragRoll</span>[i].<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_MOVE</span>,<span class="variable language_">this</span>.<span class="property">_onTouchMove</span>,<span class="variable language_">this</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">DragRoll</span>[i].<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_END</span>,<span class="variable language_">this</span>.<span class="property">_onTouchEnd</span>,<span class="variable language_">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">onDisable</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">6</span>;i++)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">DragRoll</span>[i].<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_START</span>,<span class="variable language_">this</span>.<span class="property">_onTouchStart</span>,<span class="variable language_">this</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">DragRoll</span>[i].<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_MOVE</span>,<span class="variable language_">this</span>.<span class="property">_onTouchMove</span>,<span class="variable language_">this</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">DragRoll</span>[i].<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_END</span>,<span class="variable language_">this</span>.<span class="property">_onTouchEnd</span>,<span class="variable language_">this</span>);            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">_onTouchStart</span>(<span class="params">touchEvent</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (touchEvent.<span class="property">target</span> == <span class="variable language_">this</span>.<span class="property">DragRoll</span>[i])&#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">touchNum</span> = i + <span class="number">1</span>;  <span class="comment">//tsçš„ä¸‹æ ‡ä»0å¼€å§‹ï¼Œæ‰€ä»¥+1</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç‚¹å‡»äº†ç¬¬å‡ ä¸ªæŒ‰é’® = &quot;</span>,<span class="variable language_">this</span>.<span class="property">touchNum</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">_onTouchMove</span>(<span class="params">touchEvent</span>)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">_onTouchEnd</span>(<span class="params">touchEvent</span>)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">update</span>(<span class="params">deltaTime: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img data-src="https://s1.ax1x.com/2023/04/10/ppq7zCR.png" style="width:300px;height:200px" alt="" />

]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dxçº¹ç†æºç åˆ†æ</title>
    <url>/5380d61b.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å½“ä¸€å¼ å›¾ç‰‡è¢«åŠ è½½åˆ°å†…å­˜åï¼Œå®ƒæ˜¯ä»¥çº¹ç†çš„å½¢å¼å­˜åœ¨çš„ã€‚çº¹ç†æ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿçº¹ç†å°±æ˜¯ä¸€å—å†…å­˜ï¼Œè¿™å—å†…å­˜ä¸­å­˜æ”¾çš„æ˜¯æŒ‰ç…§æŒ‡å®šçš„åƒç´ æ ¼å¼å¡«å……çš„å›¾ç‰‡åƒç´ ä¿¡æ¯ã€‚å®ƒè¢«æœ€ç»ˆä½œä¸ºä¸‰è§’é¢ç€è‰²æ‰€ä¾æ®çš„æ•°æ®æºã€‚<br>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Cocos2d-xä¸­çš„libCocos2dåº“ï¼Œå…¶ä¸‹æœ‰è®¸å¤šç›®å½•ï¼Œæ‰¾åˆ°textureså±•å¼€ï¼Œæˆ‘ä»¬æ‰¾åˆ°<strong>CCTexture2D</strong>,<strong>CCTextureAtlas</strong>,<strong>CCTextureCache</strong>,<strong>CCTexturePVR</strong>å››ä¸ªç±»ã€‚</p>
<h2 id="å››ä¸ªç±»çš„åŠŸèƒ½ï¼š"><a href="#å››ä¸ªç±»çš„åŠŸèƒ½ï¼š" class="headerlink" title="å››ä¸ªç±»çš„åŠŸèƒ½ï¼š"></a>å››ä¸ªç±»çš„åŠŸèƒ½ï¼š</h2><p><strong>CCTexture2D:</strong>  çº¹ç†ï¼Œå³å›¾ç‰‡åŠ è½½å…¥å†…å­˜åä¾›CPUå’ŒGPUæ“ä½œçš„è´´å›¾å¯¹è±¡ã€‚<br><strong>CCTexturePVR:</strong> å¤„ç†PVRæ–‡ä»¶ç”Ÿæˆçº¹ç†çš„ç±»ï¼Œå¤§å®¶å¯ä»¥ç”¨å®ƒè§£ææ„¤æ€’çš„å°é¸Ÿä¸­çš„å›¾ç‰‡ã€‚<br><strong>CCTextureCache:</strong> çº¹ç†ç®¡ç†å™¨ï¼Œè´Ÿè´£åŠ è½½å›¾ç‰‡å¹¶å¯¹ç”Ÿæˆçš„çº¹ç†è¿›è¡Œç®¡ç†ã€‚é€šè¿‡â€œå­—å…¸â€æ¥è¿›è¡Œå¿«é€Ÿçš„æŸ¥è¯¢ã€‚<br><strong>CCTextureAtlas:</strong> çº¹ç†å—ç®¡ç†å™¨ï¼Œå¦‚æœå›¾ç‰‡æ˜¯ç”±å¤šä¸ªå°å›¾å—ç»„æˆçš„ï¼Œåˆ™çº¹ç†å—ç®¡ç†å™¨ç”¨æ¥å­˜å‚¨è¿™äº›å°å›¾å—çš„ç›¸å…³ä¿¡æ¯ï¼Œä»¥æ–¹ä¾¿ç»˜åˆ¶ç›¸åº”å›¾å—ã€‚</p>
<h3 id="CCTexture2D"><a href="#CCTexture2D" class="headerlink" title="CCTexture2D"></a>CCTexture2D</h3><p>å¥½ï¼Œå’±ä»¬ç°åœ¨å¼€å§‹çœ‹<code>CCTexture2D</code>:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __CCTEXTURE2D_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __CCTEXTURE2D_H__</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cocoa/CCObject.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cocoa/CCGeometry.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ccTypes.h&quot;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//Cocos2då‘½åç©ºé—´</span></span><br><span class="line">NS_CC_BEGIN</span><br><span class="line"><span class="comment">//éœ€è¦ç”¨åˆ°CCImageï¼Œè¿™é‡Œå£°æ˜ä¸€ä¸‹ã€‚</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CCImage</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//çº¹ç†æ ¼å¼:å³æ¯ä¸ªçº¹ç†ä¸­çš„åƒç´ å•ä½åˆ†åˆ«æ˜¯æ€ä¹ˆä¸ºé¢œè‰²å€¼è¿›è¡Œå®é™…å†…å­˜åˆ†é…çš„ã€‚è¿™ä¸ªéå¸¸é‡è¦ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œæ¸¸æˆå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¸¸å¸¸ä¸å„ç§å›¾ç‰‡ç±»å‹æ‰“äº¤é€šã€‚æ¯ç§å›¾ç‰‡å¾€å¾€ä¹Ÿæœ‰å„è‡ªçš„åƒç´ æ ¼å¼ã€‚ä½†å½“å®ƒä»¬ä¸€æ—¦åŠ è½½åˆ°æ¸¸æˆä¸­åï¼Œå°±ä¼šæ ¹æ®æˆ‘ä»¬çš„è¦æ±‚å˜æˆä»¥ä¸‹æŸç§ç±»å‹çš„çº¹ç†ã€‚ä¸åŒçš„çº¹ç†æ ¼å¼æ‰€å æ®çš„å†…å­˜å¤§å°å¯èƒ½ä¸åŒï¼Œæˆ‘ä»¬è¦æ ¹æ®å®é™…æƒ…å†µå’Œéœ€æ±‚æ¥é€‰æ‹©ç›¸åº”çš„çº¹ç†æ ¼å¼ã€‚æ¯”å¦‚æˆ‘ä»¬ç”¨RGBA8888çº¹ç†æ ¼å¼æ¥åˆ›å»ºçº¹ç†ï¼Œå®ƒå æ®çš„å†…å­˜å®¹é‡å¾ˆå¤§ï¼Œå¦‚æœæˆ‘ä»¬è¦æ˜¾ç¤ºçš„çº¹ç†ä¸­æ²¡æœ‰ALPHAå€¼ï¼Œé‚£å°±ä¸åº”è¯¥ä½¿ç”¨å¸¦ALPHAé€šé“çš„çº¹ç†æ ¼å¼ã€‚æˆ‘ä»¬å°±å¯ä»¥æ”¹æˆRGB565åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//32ä½çœŸå½©è‰²ï¼Œæœ€çœŸä½†æœ€è€—å†…å­˜</span></span><br><span class="line">    kCCTexture2DPixelFormat_RGBA8888,</span><br><span class="line">    <span class="comment">//24ä½çœŸå½©è‰²ï¼Œå»æ‰äº†ALPHAé€šé“</span></span><br><span class="line">    kCCTexture2DPixelFormat_RGB888,</span><br><span class="line">    <span class="comment">//16ä½è‰²ï¼Œå°†RGBå‹ç¼©åœ¨ä¸€ä¸ªå­—ä¸­ã€‚ç»¿è‰²å¤šäº†1ä½ï¼Œå› ä¸ºäººçœ¼å¯¹ç»¿è‰²æ›´æ•æ„Ÿã€‚</span></span><br><span class="line">    kCCTexture2DPixelFormat_RGB565,</span><br><span class="line">    <span class="comment">//8ä½è‰²ï¼Œåªå­˜ALPHAå€¼ï¼Œåšé®ç½©å›¾ç”¨</span></span><br><span class="line">    kCCTexture2DPixelFormat_A8,</span><br><span class="line">    <span class="comment">//8ä½è‰²ï¼Œåªå­˜ç°åº¦æˆ–è€…å¼ºåº¦å€¼ï¼Œåšç°åº¦å›¾ç”¨</span></span><br><span class="line">    kCCTexture2DPixelFormat_I8,</span><br><span class="line">    <span class="comment">//16ä½è‰²ï¼Œåªå­˜ALPHAå€¼ä¸å¼ºåº¦å€¼ï¼ŒåŒåŠŸèƒ½</span></span><br><span class="line">    kCCTexture2DPixelFormat_AI88,</span><br><span class="line">    <span class="comment">//16ä½è‰²ï¼ŒRGBAå››é€šé“å„å 4ä½ã€‚</span></span><br><span class="line">    kCCTexture2DPixelFormat_RGBA4444,</span><br><span class="line">    <span class="comment">//16ä½è‰²ï¼ŒRGBä¸‰é€šé“å„å 5ä½ï¼Œå¤š1ä½ç•™åšALPHAé•‚ç©ºä½¿ç”¨</span></span><br><span class="line">    kCCTexture2DPixelFormat_RGB5A1,</span><br><span class="line">    <span class="comment">// PVRçš„PVRTC4å‹ç¼©æ ¼å¼</span></span><br><span class="line">    kCCTexture2DPixelFormat_PVRTC4,</span><br><span class="line">    <span class="comment">// PVRTCçš„PVRTC2å‹ç¼©æ ¼å¼</span></span><br><span class="line">    kCCTexture2DPixelFormat_PVRTC2,</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//é»˜è®¤æ ¼å¼RGBA8888</span></span><br><span class="line">    kCCTexture2DPixelFormat_Default = kCCTexture2DPixelFormat_RGBA8888,</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// ä¸ºäº†å…¼å®¹æ€§è€Œä¿ç•™çš„æšä¸¾å€¼</span></span><br><span class="line">    kTexture2DPixelFormat_RGBA8888 = kCCTexture2DPixelFormat_RGBA8888,</span><br><span class="line">    kTexture2DPixelFormat_RGB888 = kCCTexture2DPixelFormat_RGB888,</span><br><span class="line">    kTexture2DPixelFormat_RGB565 = kCCTexture2DPixelFormat_RGB565,</span><br><span class="line">    kTexture2DPixelFormat_A8 = kCCTexture2DPixelFormat_A8,</span><br><span class="line">    kTexture2DPixelFormat_RGBA4444 = kCCTexture2DPixelFormat_RGBA4444,</span><br><span class="line">    kTexture2DPixelFormat_RGB5A1 = kCCTexture2DPixelFormat_RGB5A1,</span><br><span class="line">    kTexture2DPixelFormat_Default = kCCTexture2DPixelFormat_Default</span><br><span class="line"> </span><br><span class="line">&#125; CCTexture2DPixelFormat;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//éœ€è¦ä½¿ç”¨Shaderä»£ç ç‰‡æ®µï¼Œè¿™é‡Œå£°æ˜ä¸€ä¸‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CCGLProgram</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å®šä¹‰äº†çº¹ç†çš„ä¸€äº›å‚æ•°</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_ccTexParams</span> &#123;</span><br><span class="line">    GLuint    minFilter;<span class="comment">//çº¹ç†è¿‡æ»¤å™¨ï¼šç¼©å°è¿‡æ»¤å™¨</span></span><br><span class="line">    GLuint    magFilter;<span class="comment">//çº¹ç†è¿‡æ»¤å™¨ï¼šæ”¾å¤§è¿‡æ»¤å™¨</span></span><br><span class="line">    GLuint    wrapS;<span class="comment">//æ¨ªå‘çº¹ç†å¯»å€æ¨¡å¼</span></span><br><span class="line">    GLuint    wrapT;<span class="comment">//çºµå‘çº¹ç†å¯»å€æ¨¡å¼</span></span><br><span class="line">&#125; ccTexParams;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// CCTexture2Dç±»å¯ä»¥æ–¹ä¾¿çš„ä»å›¾ç‰‡ï¼Œæ–‡æœ¬æˆ–rawæ•°æ®æ–‡ä»¶ä¸­åˆ›å»ºOpenGLæ‰€ç”¨è´´å›¾ï¼Œåˆ›å»ºçš„è´´å›¾ä¼šè‡ªåŠ¨è½¬ä¸º2çš„å¹‚æ¬¡æ–¹å¤§å°ï¼Œæ‰€ä»¥è¦æ³¨æ„å¯¹äºè´´å›¾åæ ‡çš„å½±å“ã€‚</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CC_DLL</span> CCTexture2D : <span class="keyword">public</span> CCObject</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//æ„é€ </span></span><br><span class="line"><span class="built_in">CCTexture2D</span>();</span><br><span class="line"><span class="comment">//ææ„</span></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">CCTexture2D</span>();</span><br><span class="line">    <span class="comment">//å–å¾—çº¹ç†çš„æè¿°</span></span><br><span class="line">    <span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">description</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//é‡Šæ”¾æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">releaseData</span><span class="params">(<span class="type">void</span> *data)</span></span>;</span><br><span class="line"> <span class="comment">//ä¿å­˜æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="type">void</span>* <span class="title">keepData</span><span class="params">(<span class="type">void</span> *data, <span class="type">unsigned</span> <span class="type">int</span> length)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç”±æ•°æ®æŒ‡é’ˆå’ŒæŒ‡å®šçš„åƒç´ æ ¼å¼ï¼Œå›¾ç‰‡å®½é«˜ï¼Œæ¥ç”ŸæˆOpenGLè´´å›¾ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">initWithData</span><span class="params">(<span class="type">const</span> <span class="type">void</span>* data, CCTexture2DPixelFormat pixelFormat, <span class="type">unsigned</span> <span class="type">int</span> pixelsWide, <span class="type">unsigned</span> <span class="type">int</span> pixelsHigh, <span class="type">const</span> CCSize&amp; contentSize)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//åœ¨æŒ‡å®šçš„ä½ç½®ç»˜åˆ¶è´´å›¾</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">drawAtPoint</span><span class="params">(<span class="type">const</span> CCPoint&amp; point)</span></span>;</span><br><span class="line">    <span class="comment">//çº¹åˆ¶è´´å›¾ä¸Šçš„ä¸€ä¸ªå›¾åƒå—</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">drawInRect</span><span class="params">(<span class="type">const</span> CCRect&amp; rect)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç”±CCImageæŒ‡é’ˆç”ŸæˆOpenGLè´´å›¾</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">initWithImage</span><span class="params">(CCImage * uiImage)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç”±ä¸€ä¸ªå­—ç¬¦ä¸²ç”ŸæˆOpenGLè´´å›¾ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">initWithString</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *text, <span class="type">const</span> CCSize&amp; dimensions, CCTextAlignment hAlignment, CCVerticalTextAlignment vAlignment, <span class="type">const</span> <span class="type">char</span> *fontName, <span class="type">float</span> fontSize)</span></span>;</span><br><span class="line">    <span class="comment">//ç”±ä¸€ä¸ªå­—ç¬¦ä¸²å’ŒæŒ‡å®šçš„å­—ä½“ä¸å¤§å°ç”ŸæˆOpenGLè´´å›¾</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">initWithString</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *text, <span class="type">const</span> <span class="type">char</span> *fontName, <span class="type">float</span> fontSize)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å¦‚æœæ”¯æŒPVRçš„å‹ç¼©æ ¼å¼</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> CC_SUPPORT_PVRTC</span></span><br><span class="line">    <span class="comment">//ç”±ä¸€ä¸ªPVRå‹ç¼©æ ¼å¼çš„æ•°æ®ç”ŸæˆOpenGLè´´å›¾</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">initWithPVRTCData</span><span class="params">(<span class="type">const</span> <span class="type">void</span> *data, <span class="type">int</span> level, <span class="type">int</span> bpp, <span class="type">bool</span> hasAlpha, <span class="type">int</span> length, CCTexture2DPixelFormat pixelFormat)</span></span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CC_SUPPORT_PVRTC</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ä»æ™®é€šPVRæ–‡ä»¶ç”ŸæˆOpenGLè´´å›¾</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">initWithPVRFile</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* file)</span></span>;</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//è®¾ç½®è´´å›¾å‚æ•°</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setTexParameters</span><span class="params">(ccTexParams* texParams)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//è®¾ç½®ä¸ºæŠ—é”¯é½¿çš„è´´å›¾è¿‡æ»¤æ–¹å¼ï¼ˆçº¿æ€§è¿‡æ»¤ï¼‰</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setAntiAliasTexParameters</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//è®¾ç½®ä¸ºéæŠ—é”¯é½¿çš„è´´å›¾è¿‡æ»¤æ–¹å¼ï¼ˆæœ€è¿‘ç‚¹é‡‡æ ·ï¼‰</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setAliasTexParameters</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç”Ÿæˆå¤šçº§è´´å›¾: ç”±å›¾ç‰‡æ•°æ®ç”Ÿæˆä¸€ç³»åˆ—å°ºå¯¸ä¸º2çš„å¹‚æ¬¡æ–¹ç›´è‡³å½“å‰è´´å›¾å¤§å°çš„è´´å›¾ã€‚ç³»ç»Ÿä¼šæ ¹æ®è·ç¦»è‡ªåŠ¨é€‰æ‹©çº¹ç†å›¾ç‰‡ã€‚å¯ä»¥è§£å†³å¤§å›¾ç‰‡æ˜¾ç¤ºåœ¨å°ç©ºé—´æ—¶çš„é—ªçƒé—®é¢˜ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">generateMipmap</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//å–å¾—åƒç´ æ ¼å¼åç§°</span></span><br><span class="line">    <span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">stringForFormat</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//è¿”å›å½“å‰è´´å›¾è‰²æ·±ï¼Œå³æ¯ä¸ªåƒç´ å å¤šå°‘ä½</span></span><br><span class="line">    <span class="function"><span class="type">unsigned</span> <span class="type">int</span> <span class="title">bitsPerPixelForFormat</span><span class="params">()</span></span>;  </span><br><span class="line"> </span><br><span class="line"><span class="comment">//é€šè¿‡å‚æ•°è´´å›¾æ ¼å¼è¿”å›çº¹ç†è‰²æ·±</span></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">int</span> <span class="title">bitsPerPixelForFormat</span><span class="params">(CCTexture2DPixelFormat format)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//é™æ€å‡½æ•°ï¼Œç”¨äºè®¾ç½®é»˜è®¤å¸¦ALPHAé€šé“çš„è´´å›¾åƒç´ æ ¼å¼ã€‚åˆ™å›¾ç‰‡åˆ›å»ºä¸ºè´´å›¾æ—¶ï¼Œå¦‚æœæœ‰ALPHAé€šé“ï¼Œåˆ™ç”Ÿæˆæ­¤é»˜è®¤è´´å›¾åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">setDefaultAlphaPixelFormat</span><span class="params">(CCTexture2DPixelFormat format)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//é™æ€å‡½æ•°ï¼Œå–å¾—é»˜è®¤å¸¦ALPHAé€šé“çš„è´´å›¾åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">static</span> CCTexture2DPixelFormat <span class="title">defaultAlphaPixelFormat</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//é™æ€å‡½æ•°ï¼Œè®¾ç½®è½½å…¥PVRæ—¶æ˜¯å¦å¼€å¯ALPHAæ¸å˜ï¼Œé»˜è®¤ä¸å¼€å¯ï¼Œåˆ™ALPHAå€¼åªæœ‰æ˜¯ä¸å¦ï¼Œæ— æ¸å˜ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">PVRImagesHavePremultipliedAlpha</span><span class="params">(<span class="type">bool</span> haveAlphaPremultiplied)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//å–å¾—å›¾ç‰‡å¤§å°ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰</span></span><br><span class="line">    <span class="function"><span class="type">const</span> CCSize&amp; <span class="title">getContentSizeInPixels</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">//æ˜¯å¦æœ‰ALPHAæ¸å˜å€¼</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">hasPremultipliedAlpha</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//æ˜¯å¦æœ‰å¤šçº§è´´å›¾</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">hasMipmaps</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//åŠ è½½ä¸€ä¸ªå¸¦ALPHAæ¸å˜çš„å›¾ç‰‡ç”ŸæˆOpenGLè´´å›¾</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">initPremultipliedATextureWithImage</span><span class="params">(CCImage * image, <span class="type">unsigned</span> <span class="type">int</span> pixelsWide, <span class="type">unsigned</span> <span class="type">int</span> pixelsHigh)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ALPHAæ¸å˜å¼€å…³</span></span><br><span class="line">    <span class="type">bool</span> m_bPVRHaveAlphaPremultiplied;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//è´´å›¾æ ¼å¼å˜é‡åŠgetæ¥å£</span></span><br><span class="line">    <span class="built_in">CC_PROPERTY_READONLY</span>(CCTexture2DPixelFormat, m_ePixelFormat, PixelFormat)</span><br><span class="line">    <span class="comment">//è´´å›¾å®½åº¦åŠgetæ¥å£</span></span><br><span class="line">    <span class="built_in">CC_PROPERTY_READONLY</span>(<span class="type">unsigned</span> <span class="type">int</span>, m_uPixelsWide, PixelsWide)</span><br><span class="line">    <span class="comment">//è´´å›¾é«˜åº¦åŠgetæ¥å£</span></span><br><span class="line">    <span class="built_in">CC_PROPERTY_READONLY</span>(<span class="type">unsigned</span> <span class="type">int</span>, m_uPixelsHigh, PixelsHigh)</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//OpenGLè´´å›¾ç´¢å¼•åŠgetæ¥å£</span></span><br><span class="line">    <span class="built_in">CC_PROPERTY_READONLY</span>(GLuint, m_uName, Name)</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//æ¨ªå‘è´´å›¾åæ ‡ç»ˆç‚¹ã€‚å› ä¸ºå›¾ç‰‡å¦‚æœä¸æ˜¯2çš„å¹‚æ¬¡æ–¹ï¼Œå›¾ç‰‡å¤§å°ä¼šå°äºè´´å›¾çš„å¤§å°ï¼Œè´´å›¾ä¸€å®šæ˜¯2çš„å¹‚æ¬¡æ–¹å˜›ï¼Œè¿™æ—¶å€™æ¨ªå‘çš„è´´å›¾åæ ‡ç»ˆç‚¹ä¸æ˜¯1.0ã€‚</span></span><br><span class="line">    <span class="built_in">CC_PROPERTY</span>(GLfloat, m_fMaxS, MaxS)</span><br><span class="line">    <span class="comment">//çºµå‘è´´å›¾åæ ‡ç»ˆç‚¹ã€‚</span></span><br><span class="line">    <span class="built_in">CC_PROPERTY</span>(GLfloat, m_fMaxT, MaxT)</span><br><span class="line">    <span class="comment">//å›¾ç‰‡å¤§å°åŠgetæ¥å£</span></span><br><span class="line">    <span class="built_in">CC_PROPERTY_READONLY</span>(CCSize, m_tContentSize, ContentSize)</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// ALPHAæ¸å˜å¼€å…³</span></span><br><span class="line">    <span class="type">bool</span> m_bHasPremultipliedAlpha;</span><br><span class="line">    <span class="comment">// å¤šçº§çº¹ç†å¼€å…³</span></span><br><span class="line">    <span class="type">bool</span> m_bHasMipmaps;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//Shaderä»£ç ç‰‡æ®µæŒ‡é’ˆ</span></span><br><span class="line">    <span class="built_in">CC_PROPERTY</span>(CCGLProgram*, m_pShaderProgram, ShaderProgram);</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">NS_CC_END</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//__CCTEXTURE2D_H__</span></span></span><br></pre></td></tr></table></figure>
<p>å†æ¥çœ‹<code>CCTexture2D.cpp:</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCTexture2D.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ccConfig.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ccMacros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCConfiguration.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;platform/platform.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;platform/CCImage.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCGL.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;support/ccUtils.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;platform/CCPlatformMacros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;textures/CCTexturePVR.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCDirector.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;shaders/CCGLProgram.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;shaders/ccGLStateCache.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;shaders/CCShaderCache.h&quot;</span></span></span><br><span class="line"><span class="comment">//è¿™é‡Œå®šä¹‰æ˜¯å¦ä½¿ç”¨å¯å˜çº¹ç†</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ENABLE_CACHE_TEXTURE_DATA</span></span><br><span class="line">    <span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCTextureCache.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="comment">//Cocos2d-xå‘½åç©ºé—´</span></span><br><span class="line">NS_CC_BEGIN</span><br><span class="line"> </span><br><span class="line"><span class="comment">//é™æ€å…¨å±€çš„é»˜è®¤è´´å›¾åƒç´ æ ¼å¼ã€‚ç¼ºçœä¸ºkCCTexture2DPixelFormat_Defaultï¼Œå³RGBA8888ã€‚</span></span><br><span class="line"><span class="type">static</span> CCTexture2DPixelFormat g_defaultAlphaPixelFormat = kCCTexture2DPixelFormat_Default;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//é™æ€å…¨å±€çš„PVRæ˜¯å¦æœ‰ALPHAæ¸å˜çš„å¼€å…³å˜é‡ï¼Œé»˜è®¤ä¸ºå¦ã€‚</span></span><br><span class="line"><span class="type">static</span> <span class="type">bool</span> PVRHaveAlphaPremultiplied_ = <span class="literal">false</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°ã€‚</span></span><br><span class="line">CCTexture2D::<span class="built_in">CCTexture2D</span>()</span><br><span class="line">: <span class="built_in">m_uPixelsWide</span>()</span><br><span class="line">, <span class="built_in">m_uPixelsHigh</span>()</span><br><span class="line">, <span class="built_in">m_uName</span>()</span><br><span class="line">, <span class="built_in">m_fMaxS</span>(<span class="number">0.0</span>)</span><br><span class="line">, <span class="built_in">m_fMaxT</span>(<span class="number">0.0</span>)</span><br><span class="line">, <span class="built_in">m_bHasPremultipliedAlpha</span>(<span class="literal">false</span>)</span><br><span class="line">, <span class="built_in">m_bHasMipmaps</span>(<span class="literal">false</span>)</span><br><span class="line">, <span class="built_in">m_bPVRHaveAlphaPremultiplied</span>(<span class="literal">true</span>)</span><br><span class="line">, <span class="built_in">m_pShaderProgram</span>(<span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„</span></span><br><span class="line">CCTexture2D::~<span class="built_in">CCTexture2D</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å¦‚æœä½¿ç”¨å¯å˜çº¹ç†ï¼Œåˆ é™¤æ­¤å¯å˜çº¹ç†ä¸­çš„æ•°æ®ã€‚</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ENABLE_CACHE_TEXTURE_DATA</span></span><br><span class="line">    VolatileTexture::<span class="built_in">removeTexture</span>(<span class="keyword">this</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="comment">//æ‰“å°æ—¥å¿—ã€‚</span></span><br><span class="line"><span class="built_in">CCLOGINFO</span>(<span class="string">&quot;Cocos2d: deallocing CCTexture2D %u.&quot;</span>, m_uName);</span><br><span class="line"><span class="comment">//é‡Šæ”¾æ‰€ç”¨åˆ°çš„Shaderä»£ç ç‰‡æ®µ</span></span><br><span class="line">    <span class="built_in">CC_SAFE_RELEASE</span>(m_pShaderProgram);</span><br><span class="line"><span class="comment">//é‡Šæ”¾OpenGLæ‰€ç”¨åˆ°çš„è´´å›¾ã€‚</span></span><br><span class="line">    <span class="keyword">if</span>(m_uName)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">ccGLDeleteTexture</span>(m_uName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—å½“å‰çº¹ç†çš„è´´å›¾åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line"><span class="function">CCTexture2DPixelFormat <span class="title">CCTexture2D::getPixelFormat</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_ePixelFormat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—è´´å›¾å®½åº¦ã€‚</span></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">int</span> <span class="title">CCTexture2D::getPixelsWide</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_uPixelsWide;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—è´´å›¾é«˜åº¦ã€‚</span></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">int</span> <span class="title">CCTexture2D::getPixelsHigh</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_uPixelsHigh;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—è´´å›¾ç´¢å¼•ã€‚</span></span><br><span class="line"><span class="function">GLuint <span class="title">CCTexture2D::getName</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_uName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—å›¾ç‰‡å¤§å°ï¼ˆä»¥ç‚¹ä¸ºå•ä½ï¼‰</span></span><br><span class="line"><span class="function">CCSize <span class="title">CCTexture2D::getContentSize</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// CC_CONTENT_SCALE_FACTORå®è¿”å›çš„æ˜¯åœ¨ä¸åŒå±å¹•ä¸‹çš„ç‚¹ä¸åƒç´ çš„æ¯”ç‡ã€‚Macç”µè„‘ä¸Šè¿”å›1.è€Œä½¿ç”¨Retinaæ˜¾ç¤ºå±çš„iphoneä¸Šè¿”å›2ã€‚</span></span><br><span class="line">    CCSize ret;</span><br><span class="line">    ret.width = m_tContentSize.width / <span class="built_in">CC_CONTENT_SCALE_FACTOR</span>();</span><br><span class="line">    ret.height = m_tContentSize.height / <span class="built_in">CC_CONTENT_SCALE_FACTOR</span>();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—å›¾ç‰‡å¤§å°ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰</span></span><br><span class="line"><span class="function"><span class="type">const</span> CCSize&amp; <span class="title">CCTexture2D::getContentSizeInPixels</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_tContentSize;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—æ¨ªå‘çš„è´´å›¾åæ ‡ç»ˆç‚¹</span></span><br><span class="line"><span class="function">GLfloat <span class="title">CCTexture2D::getMaxS</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_fMaxS;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®æ¨ªå‘çš„è´´å›¾åæ ‡ç»ˆç‚¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::setMaxS</span><span class="params">(GLfloat maxS)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_fMaxS = maxS;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—çºµå‘çš„è´´å›¾åæ ‡ç»ˆç‚¹</span></span><br><span class="line"><span class="function">GLfloat <span class="title">CCTexture2D::getMaxT</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_fMaxT;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®çºµå‘çš„è´´å›¾åæ ‡ç»ˆç‚¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::setMaxT</span><span class="params">(GLfloat maxT)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_fMaxT = maxT;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‰€ç”¨åˆ°çš„Shaderä»£ç ç‰‡æ®µã€‚</span></span><br><span class="line"><span class="function">CCGLProgram* <span class="title">CCTexture2D::getShaderProgram</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_pShaderProgram;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®ç”¨åˆ°çš„Shaderä»£ç ç‰‡æ®µã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::setShaderProgram</span><span class="params">(CCGLProgram* pShaderProgram)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">CC_SAFE_RETAIN</span>(pShaderProgram);</span><br><span class="line">    <span class="built_in">CC_SAFE_RELEASE</span>(m_pShaderProgram);</span><br><span class="line">    m_pShaderProgram = pShaderProgram;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡Šæ”¾æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::releaseData</span><span class="params">(<span class="type">void</span> *data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">free</span>(data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¿å­˜æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">void</span>* <span class="title">CCTexture2D::keepData</span><span class="params">(<span class="type">void</span> *data, <span class="type">unsigned</span> <span class="type">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//è¿™é‡Œåªæ˜¯ä½¿ç”¨CC_UNUSED_PARAMå®ç”¨ä¸€ä¸‹lengthï¼Œæ²¡ä»€ä¹ˆå®é™…åŠŸèƒ½ã€‚ä½œè€…ç»™å‡ºè¿™ä¸ªå‡½æ•°æ˜¯é¢„å¤‡æœªæ¥ä¾›å­ç±»é‡è½½ã€‚</span></span><br><span class="line">    <span class="built_in">CC_UNUSED_PARAM</span>(length);</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ˜¯å¦æœ‰ALPHAæ¸å˜çš„é€šé“æ•°æ®ã€‚</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexture2D::hasPremultipliedAlpha</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_bHasPremultipliedAlpha;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç”±æ•°æ®æŒ‡é’ˆåˆ›å»ºæŒ‡å®šå¤§å°å’Œæ ¼å¼çš„è´´å›¾ã€‚å–å¾—åˆ›å»ºæˆåŠŸåå›¾ç‰‡åœ¨è´´å›¾ä¸­çš„å®é™…åŒºåŸŸ ã€‚</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexture2D::initWithData</span><span class="params">(<span class="type">const</span> <span class="type">void</span> *data, CCTexture2DPixelFormat pixelFormat, <span class="type">unsigned</span> <span class="type">int</span> pixelsWide, <span class="type">unsigned</span> <span class="type">int</span> pixelsHigh, <span class="type">const</span> CCSize&amp; contentSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯RGBA8888æ ¼å¼æˆ–è€…å¤§å°æ­£å¥½å°±æ˜¯2çš„å¹‚æ¬¡æ–¹ã€‚åƒç´ æ•°æ®æŒ‰å››å­—èŠ‚(DWORD)å¯¹é½ã€‚å¦åˆ™æŒ‰1å­—èŠ‚(BYTE)è¿›è¡Œå¯¹é½ã€‚</span></span><br><span class="line">    <span class="keyword">if</span>( pixelFormat == kCCTexture2DPixelFormat_RGBA8888 || ( <span class="built_in">ccNextPOT</span>(pixelsWide)==pixelsWide &amp;&amp; <span class="built_in">ccNextPOT</span>(pixelsHigh)==pixelsHigh) )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">glPixelStorei</span>(GL_UNPACK_ALIGNMENT,);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">glPixelStorei</span>(GL_UNPACK_ALIGNMENT,);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//äº§ç”Ÿä¸€ä¸ªOpenGLçš„è´´å›¾ç´¢å¼•ã€‚</span></span><br><span class="line"><span class="built_in">glGenTextures</span>(, &amp;m_uName);</span><br><span class="line"><span class="comment">//å°†æ­¤è´´å›¾ç»‘å®šä¸ºGL_TEXTURE_2Dçº¹ç†ã€‚</span></span><br><span class="line">    <span class="built_in">ccGLBindTexture2D</span>(m_uName);</span><br><span class="line"><span class="comment">//è®¾ç½®OpenGLä¸­çš„è´´å›¾çš„è¿‡æ»¤å‚æ•°ã€‚</span></span><br><span class="line">    <span class="built_in">glTexParameteri</span>( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );</span><br><span class="line"><span class="built_in">glTexParameteri</span>( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );</span><br><span class="line"><span class="comment">//è®¾ç½®è´´å›¾çš„æ¨ªå‘çº¹ç†å¯»å€æ¨¡å¼ä¸ºè¾¹ç¼˜æˆªå–æ¨¡å¼ã€‚æ€»æ˜¯å¿½ç•¥è¾¹ç•Œã€‚</span></span><br><span class="line"><span class="built_in">glTexParameteri</span>( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );</span><br><span class="line"><span class="comment">//è®¾ç½®è´´å›¾çš„çºµå‘çº¹ç†å¯»å€æ¨¡å¼ä¸ºè¾¹ç¼˜æˆªå–æ¨¡å¼ã€‚æ€»æ˜¯å¿½ç•¥è¾¹ç•Œã€‚</span></span><br><span class="line">    <span class="built_in">glTexParameteri</span>( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );</span><br><span class="line"> </span><br><span class="line"><span class="comment">//è¿™é‡Œæ ¹æ®ä¸åŒçš„åƒç´ æ ¼å¼æ¥ç”Ÿæˆä¸åŒçš„OpenGLæ‰€ç”¨çš„è´´å›¾ã€‚æ³¨æ„ï¼šä¼ å…¥çš„å®½å’Œé«˜åœ¨æˆåŠŸç”Ÿæˆè´´å›¾åä¼šè¿”å›å®é™…è´´å›¾çš„å®½å’Œé«˜ã€‚å¦‚æœå›¾ç‰‡ä¸æ˜¯2çš„å¹‚æ¬¡æ–¹ï¼Œè¿™ä¸ªæ•°å€¼ä¼šæ”¹æˆ2çš„å¹‚æ¬¡æ–¹ã€‚æ¯”å¦‚ä½ ä¼ å…¥çš„å›¾ç‰‡å®½é«˜æ˜¯148x245ï¼Œåˆ™è°ƒç”¨å®Œæˆåå®½é«˜ä¼šè½¬æˆ256x256ã€‚</span></span><br><span class="line">    <span class="keyword">switch</span>(pixelFormat)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> kCCTexture2DPixelFormat_RGBA8888:</span><br><span class="line">        <span class="built_in">glTexImage2D</span>(GL_TEXTURE_2D, , GL_RGBA, (GLsizei)pixelsWide, (GLsizei)pixelsHigh, , GL_RGBA, GL_UNSIGNED_BYTE, data);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> kCCTexture2DPixelFormat_RGB888:</span><br><span class="line">        <span class="built_in">glTexImage2D</span>(GL_TEXTURE_2D, , GL_RGB, (GLsizei)pixelsWide, (GLsizei)pixelsHigh, , GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> kCCTexture2DPixelFormat_RGBA4444:</span><br><span class="line">        <span class="built_in">glTexImage2D</span>(GL_TEXTURE_2D, , GL_RGBA, (GLsizei)pixelsWide, (GLsizei)pixelsHigh, , GL_RGBA, GL_UNSIGNED_SHORT_4_4_4_4, data);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> kCCTexture2DPixelFormat_RGB5A1:</span><br><span class="line">        <span class="built_in">glTexImage2D</span>(GL_TEXTURE_2D, , GL_RGBA, (GLsizei)pixelsWide, (GLsizei)pixelsHigh, , GL_RGBA, GL_UNSIGNED_SHORT_5_5_5_1, data);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> kCCTexture2DPixelFormat_RGB565:</span><br><span class="line">        <span class="built_in">glTexImage2D</span>(GL_TEXTURE_2D, , GL_RGB, (GLsizei)pixelsWide, (GLsizei)pixelsHigh, , GL_RGB, GL_UNSIGNED_SHORT_5_6_5, data);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> kCCTexture2DPixelFormat_AI88:</span><br><span class="line">        <span class="built_in">glTexImage2D</span>(GL_TEXTURE_2D, , GL_LUMINANCE_ALPHA, (GLsizei)pixelsWide, (GLsizei)pixelsHigh, , GL_LUMINANCE_ALPHA, GL_UNSIGNED_BYTE, data);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> kCCTexture2DPixelFormat_A8:</span><br><span class="line">        <span class="built_in">glTexImage2D</span>(GL_TEXTURE_2D, , GL_ALPHA, (GLsizei)pixelsWide, (GLsizei)pixelsHigh, , GL_ALPHA, GL_UNSIGNED_BYTE, data);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> kCCTexture2DPixelFormat_I8:</span><br><span class="line">        <span class="built_in">glTexImage2D</span>(GL_TEXTURE_2D, , GL_LUMINANCE, (GLsizei)pixelsWide, (GLsizei)pixelsHigh, , GL_LUMINANCE, GL_UNSIGNED_BYTE, data);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">CCAssert</span>(, <span class="string">&quot;NSInternalInconsistencyException&quot;</span>);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å›¾ç‰‡å¤§å°</span></span><br><span class="line">    m_tContentSize = contentSize;</span><br><span class="line"><span class="comment">//ä¿å­˜å®é™…çš„è´´å›¾å®½é«˜</span></span><br><span class="line">m_uPixelsWide = pixelsWide;</span><br><span class="line">m_uPixelsHigh = pixelsHigh;</span><br><span class="line"><span class="comment">//ä¿å­˜è´´å›¾çš„åƒç´ æ ¼å¼</span></span><br><span class="line">m_ePixelFormat = pixelFormat;</span><br><span class="line"><span class="comment">//è®¡ç®—å›¾ç‰‡å¤„äºè´´å›¾ä¸­çš„æ¨ªå‘å’Œçºµå‘çš„çº¹ç†åæ ‡ç»ˆç‚¹ã€‚</span></span><br><span class="line">    m_fMaxS = contentSize.width / (<span class="type">float</span>)(pixelsWide);</span><br><span class="line">    m_fMaxT = contentSize.height / (<span class="type">float</span>)(pixelsHigh);</span><br><span class="line"><span class="comment">//é»˜è®¤ä¸ä½¿ç”¨ALPHAæ¸å˜é€šé“ã€‚</span></span><br><span class="line">m_bHasPremultipliedAlpha = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">//é»˜è®¤ä¸ä½¿ç”¨å¤šçº§çº¹ç†ã€‚</span></span><br><span class="line">    m_bHasMipmaps = <span class="literal">false</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//è®¾ç½®ä½¿ç”¨kCCShader_PositionTextureå¯¹åº”ç±»å‹çš„Shaderã€‚æ­¤Shaderçš„é¡¶ç‚¹æ ¼å¼ç”±ä½ç½®å’Œçº¹ç†åæ ‡ç»„æˆã€‚</span></span><br><span class="line"><span class="built_in">setShaderProgram</span>(CCShaderCache::<span class="built_in">sharedShaderCache</span>()-&gt;<span class="built_in">programForKey</span>(kCCShader_PositionTexture));</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å–å¾—çº¹ç†çš„æè¿°</span></span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">CCTexture2D::description</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> CCString::<span class="built_in">createWithFormat</span>(<span class="string">&quot;&lt;CCTexture2D | Name = %u | Dimensions = %u x %u | Coordinates = (%.2f, %.2f)&gt;&quot;</span>, m_uName, m_uPixelsWide, m_uPixelsHigh, m_fMaxS, m_fMaxT)-&gt;<span class="built_in">getCString</span>();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ç”±CCImageå¯¹è±¡æ¥åˆå§‹åŒ–çº¹ç†ç”ŸæˆOpenGLè´´å›¾ã€‚</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexture2D::initWithImage</span><span class="params">(CCImage *uiImage)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å‚æ•°æœ‰æ•ˆæ€§åˆ¤æ–­ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (uiImage == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: CCTexture2D. Can&#x27;t create Texture. UIImage is nil&quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">release</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å–å¾—å›¾ç‰‡çš„å®½é«˜</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> imageWidth = uiImage-&gt;<span class="built_in">getWidth</span>();</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> imageHeight = uiImage-&gt;<span class="built_in">getHeight</span>();</span><br><span class="line">    <span class="comment">//å–å¾—å¼•æ“çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">    CCConfiguration *conf = CCConfiguration::<span class="built_in">sharedConfiguration</span>();</span><br><span class="line">    <span class="comment">//å–å¾—é…ç½®ä¿¡æ¯ä¸­æŒ‡å®šçš„æœ€å¤§çº¹ç†å¤§å°</span></span><br><span class="line"><span class="type">unsigned</span> maxTextureSize = conf-&gt;<span class="built_in">getMaxTextureSize</span>();</span><br><span class="line"><span class="comment">//å¦‚æœå½“å‰å›¾ç‰‡å¤§äºæŒ‡å®šçš„æœ€å¤§çº¹ç†å¤§å°ï¼Œæç¤ºé”™è¯¯è­¦å‘Šäº¤é‡Šæ”¾å½“å‰çº¹ç†è¿”å›NULLã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (imageWidth &gt; maxTextureSize || imageHeight &gt; maxTextureSize)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: WARNING: Image (%u x %u) is bigger than the supported %u x %u&quot;</span>, imageWidth, imageHeight, maxTextureSize, maxTextureSize);</span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">release</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//æ€»æ˜¯æŒ‰åŠ è½½ALPHAæ¸å˜çš„å›¾ç‰‡æ–¹å¼æ¥ç”ŸæˆOpenGLè´´å›¾</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">initPremultipliedATextureWithImage</span>(uiImage, imageWidth, imageHeight);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ è½½ä¸€ä¸ªå¸¦ALPHAæ¸å˜çš„å›¾ç‰‡ç”ŸæˆOpenGLè´´å›¾</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexture2D::initPremultipliedATextureWithImage</span><span class="params">(CCImage *image, <span class="type">unsigned</span> <span class="type">int</span> width, <span class="type">unsigned</span> <span class="type">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å–å¾—å›¾ç‰‡çš„ç›¸å…³ä¿¡æ¯</span></span><br><span class="line"><span class="comment">//å®šä¹‰æŒ‡é’ˆå˜é‡æŒ‡å‘å›¾ç‰‡åƒç´ æ•°æ®ã€‚</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span>*            tempData = image-&gt;<span class="built_in">getData</span>();</span><br><span class="line">    <span class="comment">//å®šä¹‰æ— ç¬¦å·intæŒ‡é’ˆå˜é‡ï¼Œä¹Ÿæ˜¯ä¸ºäº†æŒ‡å‘32ä½è‰²æ·±çš„å›¾ç‰‡åƒç´ æ•°æ®ï¼Œä»¥ä¾¿ä½¿æŒ‡é’ˆç›´æ¥å¯¹åº”æŒ‡å®šçš„ä¸€ä¸ªåƒç´ æ•°æ®ä½ç½®ã€‚</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span>*             inPixel32 = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//å®šä¹‰æ— ç¬¦å·charæŒ‡é’ˆå˜é‡ï¼Œä¹Ÿæ˜¯ä¸ºäº†æŒ‡å‘8ä½è‰²æ·±çš„å›¾ç‰‡åƒç´ æ•°æ®ï¼Œä»¥ä¾¿ä½¿æŒ‡é’ˆç›´æ¥å¯¹åº”æŒ‡å®šçš„ä¸€ä¸ªåƒç´ æ•°æ®ä½ç½®ã€‚</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span>*            inPixel8 = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//å®šä¹‰æ— ç¬¦å·shortæŒ‡é’ˆå˜é‡ï¼ŒæŒ‡å‘16ä½è‰²æ·±çš„è´´å›¾åƒç´ æ•°æ®ï¼Œä»¥ä¾¿ä½¿æŒ‡é’ˆç›´æ¥å¯¹åº”æŒ‡å®šçš„ä¸€ä¸ªåƒç´ æ•°æ®ä½ç½®ã€‚</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">short</span>*           outPixel16 = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//å®šä¹‰boolå˜é‡hasAlphaå–å¾—å›¾ç‰‡æ˜¯å¦æœ‰Alphaé€šé“ã€‚</span></span><br><span class="line">    <span class="type">bool</span>                      hasAlpha = image-&gt;<span class="built_in">hasAlpha</span>();</span><br><span class="line">    <span class="comment">//å®šä¹‰å˜é‡imageSizeä¿å­˜å›¾ç‰‡å¤§å°ã€‚</span></span><br><span class="line">    CCSize                    imageSize = <span class="built_in">CCSizeMake</span>((<span class="type">float</span>)(image-&gt;<span class="built_in">getWidth</span>()), (<span class="type">float</span>)(image-&gt;<span class="built_in">getHeight</span>()));</span><br><span class="line">    <span class="comment">//å®šä¹‰å˜é‡pixelFormatç”¨æ¥ä¿å­˜è´´å›¾çš„åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line">    CCTexture2DPixelFormat    pixelFormat;</span><br><span class="line">    <span class="comment">//å®šä¹‰å˜é‡bppä¿å­˜å›¾ç‰‡çš„è‰²æ·±ã€‚</span></span><br><span class="line">    <span class="type">size_t</span>                    bpp = image-&gt;<span class="built_in">getBitsPerComponent</span>();</span><br><span class="line"> </span><br><span class="line"><span class="comment">// å¦‚æœæœ‰ALPHAé€šé“ï¼Œä½¿ç”¨é»˜è®¤çš„RGBA8888æ ¼å¼ã€‚</span></span><br><span class="line"><span class="keyword">if</span>(hasAlpha)</span><br><span class="line">    &#123;</span><br><span class="line">        pixelFormat = g_defaultAlphaPixelFormat;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;     <span class="comment">//å¦‚æœæ²¡æœ‰ALPHAé€šé“</span></span><br><span class="line">         <span class="comment">//å¦‚æœè‰²æ·±å¤§äºç­‰äº8ï¼Œåˆ™è½¬ä¸ºRGB888æ ¼å¼ï¼Œå¦åˆ™è½¬ä¸ºRGB565æ ¼å¼ã€‚è¿™é‡Œæœ‰ç‚¹é—®é¢˜ï¼Œæ„Ÿè§‰åº”è¯¥æŒ‰è‰²æ·±å¤§äº16æ¥è¿›è¡Œåˆ¤æ–­ã€‚å³24å’Œ32ä½éƒ½è½¬ä¸ºRGB888ï¼Œè€Œ16ä½åŠä»¥ä¸‹è½¬ä¸ºRGB565ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (bpp &gt;= )</span><br><span class="line">        &#123;</span><br><span class="line">            pixelFormat = kCCTexture2DPixelFormat_RGB888;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            pixelFormat = kCCTexture2DPixelFormat_RGB565;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// å–å¾—æ•°æ®çš„é•¿åº¦</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> length = width * height;</span><br><span class="line">    <span class="comment">//æ ¹æ®å›¾ç‰‡çš„ä¸åŒæ ¼å¼å’Œè¦åˆ›å»ºçš„çº¹ç†æ ¼å¼ï¼Œå°†æ•°æ®å¡«å……åˆ°çº¹ç†ä¸­ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (pixelFormat == kCCTexture2DPixelFormat_RGB565)</span><br><span class="line">&#123;</span><br><span class="line"> <span class="comment">//æ ¹æ®æ˜¯å¦æœ‰ALPHAé€šé“æ¥åˆ†åˆ«è¿›è¡Œå¡«å……å¤„ç†</span></span><br><span class="line">        <span class="keyword">if</span> (hasAlpha)</span><br><span class="line">        &#123;</span><br><span class="line">             <span class="comment">// è½¬æ¢RGBA8888åˆ°RGB565</span></span><br><span class="line">            <span class="comment">// Convert &quot;RRRRRRRRRGGGGGGGGBBBBBBBBAAAAAAAA&quot; to &quot;RRRRRGGGGGGBBBBB&quot;</span></span><br><span class="line">            <span class="comment">//ä¸€ä¸ªåƒç´ å 2ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥å›¾åƒä¸­æ‰€æœ‰åƒç´ å ç”¨çš„å­—èŠ‚æ•°ä¸ºwidth*height*2ã€‚ç”±æ­¤å¤§å°ç”³è¯·å†…å­˜ä½œä¸ºè´´å›¾çš„åƒç´ æ•°æ®ã€‚</span></span><br><span class="line">            tempData = <span class="keyword">new</span> <span class="type">unsigned</span> <span class="type">char</span>[width * height * ];</span><br><span class="line">             <span class="comment">//å°†è´´å›¾åƒç´ æ•°æ®çš„åœ°å€è¿”å›ç»™unsigned shortæŒ‡é’ˆã€‚è¿™æ ·outPixel16å°±æŒ‡å‘äº†è´´å›¾ä¸­çš„ç¬¬ä¸€ä¸ªåƒç´ çš„æ•°æ®ä½ç½®ã€‚</span></span><br><span class="line">            outPixel16 = (<span class="type">unsigned</span> <span class="type">short</span>*)tempData;</span><br><span class="line">             <span class="comment">//å› ä¸ºæœ‰alphaï¼Œåˆ™å›¾ç‰‡æ˜¯32ä½RGBA8888æ ¼å¼ã€‚å–å¾—å›¾åƒçš„åƒç´ æ•°æ®åœ°å€è¿”å›ç»™unsigned intæŒ‡é’ˆï¼Œåˆ™inPixel32æŒ‡å‘äº†è´´å›¾ä¸­ç¬¬ä¸€ä¸ªåƒç´ çš„æ•°æ®ä½ç½®ã€‚</span></span><br><span class="line">            inPixel32 = (<span class="type">unsigned</span> <span class="type">int</span>*)image-&gt;<span class="built_in">getData</span>();</span><br><span class="line">            <span class="comment">//éå†å›¾ç‰‡ä¸­æ‰€æœ‰çš„åƒç´ ï¼Œé€åƒç´ å¤„ç†ã€‚</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">unsigned</span> <span class="type">int</span> i = ; i &lt; length; ++i, ++inPixel32)</span><br><span class="line">            &#123;   <span class="comment">//å°†inPixel32æŒ‡å‘çš„unsigned intæ•°æ®é€šè¿‡å–å‡ºR,G,Bå„8ä½æ•°æ®å€¼ï¼Œç„¶åç»„æˆRGB565å€¼ã€‚æ”¾å…¥outPixel16æŒ‡å‘çš„unsigned shortæ•°æ®ä¸­ã€‚</span></span><br><span class="line">                *outPixel16++ =</span><br><span class="line">                ((((*inPixel32 &gt;&gt;  ) &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; ) |  <span class="comment">// R</span></span><br><span class="line">                ((((*inPixel32 &gt;&gt;  ) &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; )  |  <span class="comment">// G</span></span><br><span class="line">                ((((*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; );    <span class="comment">// B</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;    <span class="comment">// è½¬æ¢RGB888åˆ°RGB565</span></span><br><span class="line">            <span class="comment">// Convert &quot;RRRRRRRRRGGGGGGGGBBBBBBBB&quot; to &quot;RRRRRGGGGGGBBBBB&quot;</span></span><br><span class="line">            <span class="comment">//ä¸€ä¸ªåƒç´ å 2ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥å›¾åƒä¸­æ‰€æœ‰åƒç´ å ç”¨çš„å­—èŠ‚æ•°ä¸ºwidth*height*2ã€‚ç”±æ­¤å¤§å°ç”³è¯·å†…å­˜ä½œä¸ºè´´å›¾çš„åƒç´ æ•°æ®ã€‚</span></span><br><span class="line">            tempData = <span class="keyword">new</span> <span class="type">unsigned</span> <span class="type">char</span>[width * height * ];</span><br><span class="line">            <span class="comment">//å°†è´´å›¾åƒç´ æ•°æ®çš„åœ°å€è¿”å›ç»™unsigned shortæŒ‡é’ˆã€‚è¿™æ ·outPixel16å°±æŒ‡å‘äº†è´´å›¾ä¸­çš„ç¬¬ä¸€ä¸ªåƒç´ çš„æ•°æ®ä½ç½®ã€‚</span></span><br><span class="line">            outPixel16 = (<span class="type">unsigned</span> <span class="type">short</span>*)tempData;</span><br><span class="line">            <span class="comment">//å¦‚æœå›¾åƒçš„æ ¼å¼ä¸ºRGB888ã€‚å–å¾—å›¾åƒçš„åƒç´ æ•°æ®åœ°å€è¿”å›ç»™unsigned charæŒ‡é’ˆï¼Œåˆ™inPixel8æŒ‡å‘äº†è´´å›¾ä¸­ç¬¬ä¸€ä¸ªåƒç´ çš„Rå€¼ä½ç½®ã€‚</span></span><br><span class="line">            inPixel8 = (<span class="type">unsigned</span> <span class="type">char</span>*)image-&gt;<span class="built_in">getData</span>();</span><br><span class="line">            <span class="comment">//éå†å›¾ç‰‡ä¸­æ‰€æœ‰çš„åƒç´ ï¼Œé€åƒç´ å¤„ç†ã€‚</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">unsigned</span> <span class="type">int</span> i = ; i &lt; length; ++i)</span><br><span class="line">            &#123;   <span class="comment">//inPixel8æŒ‡å‘çš„æ˜¯unsigned charå€¼ï¼Œé€šè¿‡++æ“ä½œæ¥å–å‡ºR,G,Bæ•°æ®å€¼ï¼Œç„¶åç»„æˆRGB565å€¼ã€‚æ”¾å…¥outPixel16æŒ‡å‘çš„unsigned shortæ•°æ®ä¸­ã€‚</span></span><br><span class="line"> </span><br><span class="line">                *outPixel16++ =</span><br><span class="line">                (((*inPixel8++ &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; ) |  <span class="comment">// R</span></span><br><span class="line">                (((*inPixel8++ &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; )  |  <span class="comment">// G</span></span><br><span class="line">                (((*inPixel8++ &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; );    <span class="comment">// B</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (pixelFormat == kCCTexture2DPixelFormat_RGBA4444)</span><br><span class="line">    &#123;   <span class="comment">// è½¬æ¢RGBA8888åˆ°RGBA4444</span></span><br><span class="line">        <span class="comment">// Convert &quot;RRRRRRRRRGGGGGGGGBBBBBBBBAAAAAAAA&quot; to &quot;RRRRGGGGBBBBAAAA&quot;</span></span><br><span class="line">        <span class="comment">//å–å¾—å›¾åƒçš„åƒç´ æ•°æ®åœ°å€è¿”å›ç»™unsigned intæŒ‡é’ˆï¼Œåˆ™inPixel32æŒ‡å‘äº†è´´å›¾ä¸­ç¬¬ä¸€ä¸ªåƒç´ çš„æ•°æ®ä½ç½®ã€‚</span></span><br><span class="line">        inPixel32 = (<span class="type">unsigned</span> <span class="type">int</span>*)image-&gt;<span class="built_in">getData</span>();</span><br><span class="line">         <span class="comment">//ä¸€ä¸ªåƒç´ å 2ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥å›¾åƒä¸­æ‰€æœ‰åƒç´ å ç”¨çš„å­—èŠ‚æ•°ä¸ºwidth*height*2ã€‚ç”±æ­¤å¤§å°ç”³è¯·å†…å­˜ä½œä¸ºè´´å›¾çš„åƒç´ æ•°æ®ã€‚</span></span><br><span class="line">        tempData = <span class="keyword">new</span> <span class="type">unsigned</span> <span class="type">char</span>[width * height * ];</span><br><span class="line">        <span class="comment">//å°†è´´å›¾åƒç´ æ•°æ®çš„åœ°å€è¿”å›ç»™unsigned shortæŒ‡é’ˆã€‚è¿™æ ·outPixel16å°±æŒ‡å‘äº†è´´å›¾ä¸­çš„ç¬¬ä¸€ä¸ªåƒç´ çš„æ•°æ®ä½ç½®ã€‚</span></span><br><span class="line">        outPixel16 = (<span class="type">unsigned</span> <span class="type">short</span>*)tempData;</span><br><span class="line">        <span class="comment">//éå†å›¾ç‰‡ä¸­æ‰€æœ‰çš„åƒç´ ï¼Œé€åƒç´ å¤„ç†ã€‚</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">unsigned</span> <span class="type">int</span> i = ; i &lt; length; ++i, ++inPixel32)</span><br><span class="line">        &#123;   <span class="comment">//å°†inPixel32æŒ‡å‘çš„unsigned intæ•°æ®é€šè¿‡å–å‡ºR,G,B,Aå„8ä½æ•°æ®å€¼ï¼Œç„¶åç»„æˆRGBA4444å€¼ã€‚æ”¾å…¥outPixel16æŒ‡å‘çš„unsigned shortæ•°æ®ä¸­ã€‚</span></span><br><span class="line">            *outPixel16++ =</span><br><span class="line">            ((((*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; ) | <span class="comment">// R</span></span><br><span class="line">            ((((*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt;  ) | <span class="comment">// G</span></span><br><span class="line">            ((((*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; ) | <span class="comment">// B</span></span><br><span class="line">            ((((*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; );  <span class="comment">// A</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (pixelFormat == kCCTexture2DPixelFormat_RGB5A1)</span><br><span class="line">    &#123;   <span class="comment">// è½¬æ¢RGBA8888åˆ°RGBA5551</span></span><br><span class="line">        <span class="comment">// Convert &quot;RRRRRRRRRGGGGGGGGBBBBBBBBAAAAAAAA&quot; to &quot;RRRRRGGGGGBBBBBA&quot;</span></span><br><span class="line">        inPixel32 = (<span class="type">unsigned</span> <span class="type">int</span>*)image-&gt;<span class="built_in">getData</span>();</span><br><span class="line">         <span class="comment">//ä¸€ä¸ªåƒç´ å 2ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥å›¾åƒä¸­æ‰€æœ‰åƒç´ å ç”¨çš„å­—èŠ‚æ•°ä¸ºwidth*height*2ã€‚ç”±æ­¤å¤§å°ç”³è¯·å†…å­˜ä½œä¸ºè´´å›¾çš„åƒç´ æ•°æ®ã€‚</span></span><br><span class="line">        tempData = <span class="keyword">new</span> <span class="type">unsigned</span> <span class="type">char</span>[width * height * ];</span><br><span class="line">        <span class="comment">//å°†è´´å›¾åƒç´ æ•°æ®çš„åœ°å€è¿”å›ç»™unsigned shortæŒ‡é’ˆã€‚è¿™æ ·outPixel16å°±æŒ‡å‘äº†è´´å›¾ä¸­çš„ç¬¬ä¸€ä¸ªåƒç´ çš„æ•°æ®ä½ç½®ã€‚</span></span><br><span class="line">        outPixel16 = (<span class="type">unsigned</span> <span class="type">short</span>*)tempData;</span><br><span class="line">        <span class="comment">//éå†å›¾ç‰‡ä¸­æ‰€æœ‰çš„åƒç´ ï¼Œé€åƒç´ å¤„ç†ã€‚</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">unsigned</span> <span class="type">int</span> i = ; i &lt; length; ++i, ++inPixel32)</span><br><span class="line">        &#123;   <span class="comment">//å°†inPixel32æŒ‡å‘çš„unsigned intæ•°æ®é€šè¿‡å–å‡ºR,G,B,Aå„8ä½æ•°æ®å€¼ï¼Œç„¶åç»„æˆRGB5A1å€¼ã€‚æ”¾å…¥outPixel16æŒ‡å‘çš„unsigned shortæ•°æ®ä¸­ã€‚</span></span><br><span class="line">            *outPixel16++ =</span><br><span class="line">            ((((*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; ) | <span class="comment">// R</span></span><br><span class="line">            ((((*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt;  ) | <span class="comment">// G</span></span><br><span class="line">            ((((*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; ) | <span class="comment">// B</span></span><br><span class="line">            ((((*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>) &gt;&gt; ) &lt;&lt; );  <span class="comment">// A</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (pixelFormat == kCCTexture2DPixelFormat_A8)</span><br><span class="line">    &#123;   <span class="comment">// è½¬æ¢RGBA8888åˆ°A8ï¼ŒåŒç†ï¼Œä¸å†èµ˜è¿°</span></span><br><span class="line">        <span class="comment">// Convert &quot;RRRRRRRRRGGGGGGGGBBBBBBBBAAAAAAAA&quot; to &quot;AAAAAAAA&quot;</span></span><br><span class="line">        inPixel32 = (<span class="type">unsigned</span> <span class="type">int</span>*)image-&gt;<span class="built_in">getData</span>();</span><br><span class="line">        tempData = <span class="keyword">new</span> <span class="type">unsigned</span> <span class="type">char</span>[width * height];</span><br><span class="line">        <span class="type">unsigned</span> <span class="type">char</span> *outPixel8 = tempData;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">unsigned</span> <span class="type">int</span> i = ; i &lt; length; ++i, ++inPixel32)</span><br><span class="line">        &#123;</span><br><span class="line">            *outPixel8++ = (*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>;  <span class="comment">// A</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (hasAlpha &amp;&amp; pixelFormat == kCCTexture2DPixelFormat_RGB888)</span><br><span class="line">    &#123;   <span class="comment">// è½¬æ¢RGBA8888åˆ°RGB888ï¼ŒåŒç†ï¼Œä¸å†èµ˜è¿°</span></span><br><span class="line">        <span class="comment">// Convert &quot;RRRRRRRRRGGGGGGGGBBBBBBBBAAAAAAAA&quot; to &quot;RRRRRRRRGGGGGGGGBBBBBBBB&quot;</span></span><br><span class="line">        inPixel32 = (<span class="type">unsigned</span> <span class="type">int</span>*)image-&gt;<span class="built_in">getData</span>();</span><br><span class="line">        tempData = <span class="keyword">new</span> <span class="type">unsigned</span> <span class="type">char</span>[width * height * ];</span><br><span class="line">        <span class="type">unsigned</span> <span class="type">char</span> *outPixel8 = tempData;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">unsigned</span> <span class="type">int</span> i = ; i &lt; length; ++i, ++inPixel32)</span><br><span class="line">        &#123;</span><br><span class="line">            *outPixel8++ = (*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>; <span class="comment">// R</span></span><br><span class="line">            *outPixel8++ = (*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>; <span class="comment">// G</span></span><br><span class="line">            *outPixel8++ = (*inPixel32 &gt;&gt; ) &amp; <span class="number">0xFF</span>; <span class="comment">// B</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å› ä¸ºæœ€ç»ˆç›¸åº”åƒç´ æ ¼å¼çš„æ•°æ®éƒ½å­˜æ”¾åœ¨tempDataä¸­ï¼Œæ‰€ä»¥è¿™é‡Œé€šè¿‡åƒç´ æ•°æ®æ¥ç”ŸæˆOpenGLè´´å›¾ã€‚</span></span><br><span class="line">    <span class="built_in">initWithData</span>(tempData, pixelFormat, width, height, imageSize);</span><br><span class="line">    <span class="comment">//å¦‚æœæ˜¯ä»¥ä¸Šç›¸åº”æ ¼å¼ï¼Œåˆ™tempDataéƒ½æ˜¯æ–°ç”³è¯·çš„å†…å­˜å—ï¼Œåˆ™åœ¨è¿™é‡Œé‡Šæ”¾ç”³è¯·çš„å†…å­˜ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (tempData != image-&gt;<span class="built_in">getData</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">delete</span> [] tempData;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å–å¾—æ˜¯å¦æœ‰ALPHAæ¸å˜é€šé“æ•°æ®</span></span><br><span class="line">    m_bHasPremultipliedAlpha = image-&gt;<span class="built_in">isPremultipliedAlpha</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ä»å­—ç¬¦ä¸²ä¸­åˆ›å»ºOpenGL è´´å›¾ã€‚</span></span><br><span class="line"><span class="comment">//å‚1:å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">//å‚2:å­—ä½“åç§°</span></span><br><span class="line"><span class="comment">//å‚3:å­—ä½“å¤§å°</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexture2D::initWithString</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *text, <span class="type">const</span> <span class="type">char</span> *fontName, <span class="type">float</span> fontSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">initWithString</span>(text, <span class="built_in">CCSizeMake</span>(,), kCCTextAlignmentCenter, kCCVerticalTextAlignmentTop, fontName, fontSize);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä»å­—ç¬¦ä¸²ä¸­åˆ›å»ºOpenGL è´´å›¾,å¯æŒ‡å®šæ›´å¤šå‚æ•°ã€‚</span></span><br><span class="line"><span class="comment">//å‚1:å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">//å‚2:è¿”å›å‚æ•°ï¼Œä»£è¡¨åœ¨å±å¹•ä¸Šå ç”¨çš„åŒºåŸŸå¤§å°</span></span><br><span class="line"><span class="comment">//å‚3:æ–‡å­—çš„æ¨ªå‘å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="comment">//å‚4:æ–‡å­—çš„çºµå‘å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="comment">//å‚5:å­—ä½“åç§°</span></span><br><span class="line"><span class="comment">//å‚6:å­—ä½“å¤§å°</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexture2D::initWithString</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *text, <span class="type">const</span> CCSize&amp; dimensions, CCTextAlignment hAlignment, CCVerticalTextAlignment vAlignment, <span class="type">const</span> <span class="type">char</span> *fontName, <span class="type">float</span> fontSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœå®šä¹‰ä½¿ç”¨å¯å˜çº¹ç†</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ENABLE_CACHE_TEXTURE_DATA</span></span><br><span class="line">    <span class="comment">// cache the texture data</span></span><br><span class="line">    VolatileTexture::<span class="built_in">addStringTexture</span>(<span class="keyword">this</span>, text, dimensions, hAlignment, vAlignment, fontName, fontSize);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªCCImageå®ä¾‹å¯¹è±¡</span></span><br><span class="line">    CCImage image;</span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªCCImageè¿›è¡Œç”±å­—ç¬¦ä¸²åˆ›å»ºå›¾ç‰‡æ—¶æŒ‡å®šçš„æ–‡å­—å¯¹é½æ–¹å¼çš„å˜é‡eAlign</span></span><br><span class="line">    CCImage::ETextAlign eAlign;</span><br><span class="line">    <span class="comment">//å¦‚æœæ–‡å­—çºµå‘å¯¹é½æ–¹å¼ä¸ºé¡¶éƒ¨å¯¹é½ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (kCCVerticalTextAlignmentTop == vAlignment)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ ¹æ®æ–‡å­—æ¨ªå‘å¯¹é½æ–¹å¼çš„ä¸åŒåˆ†åˆ«å¯¹eAlignè¿›è¡Œè®¾ç½®ã€‚</span></span><br><span class="line">        eAlign = (kCCTextAlignmentCenter == hAlignment) ? CCImage::kAlignTop</span><br><span class="line">            : (kCCTextAlignmentLeft == hAlignment) ? CCImage::kAlignTopLeft : CCImage::kAlignTopRight;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœæ–‡å­—çºµå‘å¯¹é½æ–¹å¼ä¸ºå±…ä¸­å¯¹é½ã€‚</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (kCCVerticalTextAlignmentCenter == vAlignment)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ ¹æ®æ–‡å­—æ¨ªå‘å¯¹é½æ–¹å¼çš„ä¸åŒåˆ†åˆ«å¯¹eAlignè¿›è¡Œè®¾ç½®ã€‚</span></span><br><span class="line">        eAlign = (kCCTextAlignmentCenter == hAlignment) ? CCImage::kAlignCenter</span><br><span class="line">            : (kCCTextAlignmentLeft == hAlignment) ? CCImage::kAlignLeft : CCImage::kAlignRight;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœæ–‡å­—çºµå‘å¯¹é½æ–¹å¼ä¸ºåº•éƒ¨å¯¹é½ã€‚</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (kCCVerticalTextAlignmentBottom == vAlignment)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ ¹æ®æ–‡å­—æ¨ªå‘å¯¹é½æ–¹å¼çš„ä¸åŒåˆ†åˆ«å¯¹eAlignè¿›è¡Œè®¾ç½®ã€‚</span></span><br><span class="line">        eAlign = (kCCTextAlignmentCenter == hAlignment) ? CCImage::kAlignBottom</span><br><span class="line">            : (kCCTextAlignmentLeft == hAlignment) ? CCImage::kAlignBottomLeft : CCImage::kAlignBottomRight;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">         <span class="comment">//å…¶å®ƒå¯¹é½æ–¹å¼ä¸åº”å­˜åœ¨ï¼Œæ•…æ‰“å°é”™è¯¯ã€‚</span></span><br><span class="line">        <span class="built_in">CCAssert</span>(<span class="literal">false</span>, <span class="string">&quot;Not supported alignment format!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è°ƒç”¨CCImageçš„æˆå‘˜å‡½æ•°ç”±å­—ç¬¦ä¸²åˆ›å»ºå‡ºå›¾ç‰‡æ•°æ®ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (!image.<span class="built_in">initWithString</span>(text, (<span class="type">int</span>)dimensions.width, (<span class="type">int</span>)dimensions.height, eAlign, fontName, (<span class="type">int</span>)fontSize))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å†ç”±CCImageå®ä¾‹å¯¹è±¡æ¥åˆ›å»ºå‡ºOpenGLè´´å›¾ï¼Œåˆå§‹åŒ–çº¹ç†ã€‚</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">initWithImage</span>(&amp;image);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// åœ¨æŒ‡å®šçš„ä½ç½®ç»˜åˆ¶è´´å›¾ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::drawAtPoint</span><span class="params">(<span class="type">const</span> CCPoint&amp; point)</span></span></span><br><span class="line"><span class="function"></span>&#123;    <span class="comment">//å®šä¹‰è´´å›¾ä¸­å›¾åƒåŒºåŸŸçš„UVåæ ‡ã€‚ä»å·¦ä¸Šè‡³å³ä¸‹ã€‚</span></span><br><span class="line">    GLfloat    coordinates[] = &#123;</span><br><span class="line">        <span class="number">0.0f</span>,    m_fMaxT,</span><br><span class="line">        m_fMaxS,m_fMaxT,</span><br><span class="line">        <span class="number">0.0f</span>,    <span class="number">0.0f</span>,</span><br><span class="line">        m_fMaxS,<span class="number">0.0f</span> &#125;;</span><br><span class="line">    <span class="comment">//å–å¾—è´´å›¾ä¸­å›¾åƒåŒºåŸŸçš„å®½é«˜</span></span><br><span class="line">    GLfloat    width = (GLfloat)m_uPixelsWide * m_fMaxS,</span><br><span class="line">        height = (GLfloat)m_uPixelsHigh * m_fMaxT;</span><br><span class="line">    <span class="comment">//å®šä¹‰å¯¹åº”çš„é¡¶ç‚¹åæ ‡</span></span><br><span class="line">    GLfloat        vertices[] = &#123;</span><br><span class="line">        point.x,            point.y,</span><br><span class="line">        width + point.x,    point.y,</span><br><span class="line">        point.x,            height  + point.y,</span><br><span class="line">        width + point.x,    height  + point.y &#125;;</span><br><span class="line">    <span class="comment">//Shaderä¸­ä½¿ç”¨ä½ç½®å’Œçº¹ç†åæ ‡é€šé“ã€‚</span></span><br><span class="line">    <span class="built_in">ccGLEnableVertexAttribs</span>( kCCVertexAttribFlag_Position | kCCVertexAttribFlag_TexCoords );</span><br><span class="line">    <span class="comment">//åé¢çš„ä»£ç ä¾¿ç”¨Shaderè¿›è¡Œæ¸²æŸ“</span></span><br><span class="line">    m_pShaderProgram-&gt;<span class="built_in">use</span>();</span><br><span class="line">    <span class="comment">//è®¾ç½®Shaderä½¿ç”¨çš„æœ€ç»ˆç»“æœçŸ©é˜µ</span></span><br><span class="line">    m_pShaderProgram-&gt;<span class="built_in">setUniformForModelViewProjectionMatrix</span>();</span><br><span class="line">    <span class="comment">//å°†è´´å›¾ç»‘å®š</span></span><br><span class="line">    <span class="built_in">ccGLBindTexture2D</span>( m_uName );</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//å°†verticesè®¾ç½®ä¸ºé¡¶ç‚¹ä½ç½®å‚æ•°</span></span><br><span class="line">    <span class="built_in">glVertexAttribPointer</span>(kCCVertexAttrib_Position, , GL_FLOAT, GL_FALSE, , vertices);</span><br><span class="line">    <span class="comment">//å°†coordinatesè®¾ç½®ä¸ºé¡¶ç‚¹çš„çº¹ç†åæ ‡å‚æ•°</span></span><br><span class="line">    <span class="built_in">glVertexAttribPointer</span>(kCCVertexAttrib_TexCoords, , GL_FLOAT, GL_FALSE, , coordinates);</span><br><span class="line">    <span class="comment">//ç»˜åˆ¶ä¸‰è§’å½¢ï¼Œå‚1ä¸ºç»˜å›¾æ–¹å¼ï¼Œå‚2ä¸ºé¡¶ç‚¹èµ·å§‹ç´¢å¼•ï¼Œå‚3ä¸ºä¸‰è§’å½¢é¢æ•°ã€‚</span></span><br><span class="line">    <span class="built_in">glDrawArrays</span>(GL_TRIANGLE_STRIP, , );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç»˜åˆ¶çº¹ç†ä¸Šçš„ä¸€ä¸ªåŒºåŸŸã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::drawInRect</span><span class="params">(<span class="type">const</span> CCRect&amp; rect)</span></span></span><br><span class="line"><span class="function"></span>&#123;    <span class="comment">//å®šä¹‰è´´å›¾ä¸­å›¾åƒåŒºåŸŸçš„UVåæ ‡ã€‚ä»å·¦ä¸Šè‡³å³ä¸‹ã€‚</span></span><br><span class="line">    GLfloat    coordinates[] = &#123;</span><br><span class="line">        <span class="number">0.0f</span>,    m_fMaxT,</span><br><span class="line">        m_fMaxS,m_fMaxT,</span><br><span class="line">        <span class="number">0.0f</span>,    <span class="number">0.0f</span>,</span><br><span class="line">        m_fMaxS,<span class="number">0.0f</span> &#125;;</span><br><span class="line">    <span class="comment">//ç»˜åˆ¶åˆ°çš„åŒºåŸŸ</span></span><br><span class="line">    GLfloat    vertices[] = &#123;    rect.origin.x,        rect.origin.y,                            <span class="comment">/*0.0f,*/</span></span><br><span class="line">        rect.origin.x + rect.size.width,        rect.origin.y,                            <span class="comment">/*0.0f,*/</span></span><br><span class="line">        rect.origin.x,                            rect.origin.y + rect.size.height,        <span class="comment">/*0.0f,*/</span></span><br><span class="line">        rect.origin.x + rect.size.width,        rect.origin.y + rect.size.height,        <span class="comment">/*0.0f*/</span> &#125;;</span><br><span class="line">    <span class="comment">//Shaderä¸­ä½¿ç”¨ä½ç½®å’Œçº¹ç†åæ ‡é€šé“ã€‚</span></span><br><span class="line">    <span class="built_in">ccGLEnableVertexAttribs</span>( kCCVertexAttribFlag_Position | kCCVertexAttribFlag_TexCoords );</span><br><span class="line">    <span class="comment">//åé¢çš„ä»£ç ä¾¿ç”¨Shaderè¿›è¡Œæ¸²æŸ“</span></span><br><span class="line">    m_pShaderProgram-&gt;<span class="built_in">use</span>();</span><br><span class="line">    <span class="comment">//è®¾ç½®Shaderä½¿ç”¨çš„æœ€ç»ˆç»“æœçŸ©é˜µ</span></span><br><span class="line">    m_pShaderProgram-&gt;<span class="built_in">setUniformForModelViewProjectionMatrix</span>();</span><br><span class="line">    <span class="comment">//å°†è´´å›¾ç»‘å®š</span></span><br><span class="line">    <span class="built_in">ccGLBindTexture2D</span>( m_uName );</span><br><span class="line">    <span class="comment">//å°†verticesè®¾ç½®ä¸ºé¡¶ç‚¹ä½ç½®å‚æ•°</span></span><br><span class="line">    <span class="built_in">glVertexAttribPointer</span>(kCCVertexAttrib_Position, , GL_FLOAT, GL_FALSE, , vertices);</span><br><span class="line">    <span class="comment">//å°†coordinatesè®¾ç½®ä¸ºé¡¶ç‚¹çš„çº¹ç†åæ ‡å‚æ•°</span></span><br><span class="line">    <span class="built_in">glVertexAttribPointer</span>(kCCVertexAttrib_TexCoords, , GL_FLOAT, GL_FALSE, , coordinates);</span><br><span class="line">    <span class="comment">//ç»˜åˆ¶ä¸‰è§’å½¢ï¼Œå‚1ä¸ºç»˜å›¾æ–¹å¼ï¼Œå‚2ä¸ºé¡¶ç‚¹èµ·å§‹ç´¢å¼•ï¼Œå‚3ä¸ºä¸‰è§’å½¢é¢æ•°ã€‚</span></span><br><span class="line">    <span class="built_in">glDrawArrays</span>(GL_TRIANGLE_STRIP, , );</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> CC_SUPPORT_PVRTC</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// å¦‚æœæ”¯æŒPVRæ–‡ä»¶çš„å‹ç¼©æ ¼å¼ã€‚æä¾›çš„è¯»å–PVRå‹ç¼©æ–‡ä»¶çš„å‡½æ•°ã€‚</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexture2D::initWithPVRTCData</span><span class="params">(<span class="type">const</span> <span class="type">void</span> *data, <span class="type">int</span> level, <span class="type">int</span> bpp, <span class="type">bool</span> hasAlpha, <span class="type">int</span> length, CCTexture2DPixelFormat pixelFormat)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( !(CCConfiguration::<span class="built_in">sharedConfiguration</span>()-&gt;<span class="built_in">supportsPVRTC</span>()) )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: WARNING: PVRTC images is not supported.&quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">release</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//äº§ç”Ÿä¸€ä¸ªOpenGLçš„è´´å›¾ç´¢å¼•ã€‚</span></span><br><span class="line"><span class="built_in">glGenTextures</span>(, &amp;m_uName);</span><br><span class="line">    <span class="comment">//ç»‘å®šçº¹ç†</span></span><br><span class="line">    <span class="built_in">glBindTexture</span>(GL_TEXTURE_2D, m_uName);</span><br><span class="line">    <span class="comment">//è®¾ç½®çº¹ç†æŠ—é”¯é½¿</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">setAntiAliasTexParameters</span>();</span><br><span class="line">    <span class="comment">//è´´å›¾æ ¼å¼</span></span><br><span class="line">    GLenum format;</span><br><span class="line">    <span class="comment">//æ•°æ®å¤§å°</span></span><br><span class="line">    GLsizei size = length * length * bpp / ;</span><br><span class="line">    <span class="comment">//æ ¹æ®æ˜¯å¦æœ‰Alphaæ¥å–å¾—è´´å›¾æ ¼å¼</span></span><br><span class="line">    <span class="keyword">if</span>(hasAlpha) &#123;</span><br><span class="line">        format = (bpp == ) ? GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG : GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        format = (bpp == ) ? GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG : GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(size &lt; ) &#123;</span><br><span class="line">        size = ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åŠ è½½å‹ç¼©çº¹ç†ã€‚</span></span><br><span class="line">    <span class="built_in">glCompressedTexImage2D</span>(GL_TEXTURE_2D, level, format, length, length, , size, data);</span><br><span class="line">    <span class="comment">//è®¾ç½®å…¶å®ƒå±æ€§ã€‚</span></span><br><span class="line">    m_tContentSize = <span class="built_in">CCSizeMake</span>((<span class="type">float</span>)(length), (<span class="type">float</span>)(length));</span><br><span class="line">    m_uPixelsWide = length;</span><br><span class="line">    m_uPixelsHigh = length;</span><br><span class="line">    m_fMaxS = <span class="number">1.0f</span>;</span><br><span class="line">    m_fMaxT = <span class="number">1.0f</span>;</span><br><span class="line">    m_bHasPremultipliedAlpha = PVRHaveAlphaPremultiplied_;</span><br><span class="line">    m_ePixelFormat = pixelFormat;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CC_SUPPORT_PVRTC</span></span></span><br><span class="line"><span class="comment">//åŠ è½½PVRæ™®é€šæ–‡ä»¶çš„å‡½æ•°ã€‚</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexture2D::initWithPVRFile</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* file)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">bool</span> bRet = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// nothing to do with CCObject::init</span></span><br><span class="line"> </span><br><span class="line">    CCTexturePVR *pvr = <span class="keyword">new</span> CCTexturePVR;</span><br><span class="line">    bRet = pvr-&gt;<span class="built_in">initWithContentsOfFile</span>(file);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (bRet)</span><br><span class="line">    &#123;</span><br><span class="line">        pvr-&gt;<span class="built_in">setRetainName</span>(<span class="literal">true</span>); <span class="comment">// don&#x27;t dealloc texture on release</span></span><br><span class="line"> </span><br><span class="line">        m_uName = pvr-&gt;<span class="built_in">getName</span>();</span><br><span class="line">        m_fMaxS = <span class="number">1.0f</span>;</span><br><span class="line">        m_fMaxT = <span class="number">1.0f</span>;</span><br><span class="line">        m_uPixelsWide = pvr-&gt;<span class="built_in">getWidth</span>();</span><br><span class="line">        m_uPixelsHigh = pvr-&gt;<span class="built_in">getHeight</span>();</span><br><span class="line">        m_tContentSize = <span class="built_in">CCSizeMake</span>((<span class="type">float</span>)m_uPixelsWide, (<span class="type">float</span>)m_uPixelsHigh);</span><br><span class="line">        m_bHasPremultipliedAlpha = PVRHaveAlphaPremultiplied_;</span><br><span class="line">        m_ePixelFormat = pvr-&gt;<span class="built_in">getFormat</span>();</span><br><span class="line">        m_bHasMipmaps = pvr-&gt;<span class="built_in">getNumberOfMipmaps</span>() &gt; ;       </span><br><span class="line"> </span><br><span class="line">        pvr-&gt;<span class="built_in">release</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: Couldn&#x27;t load PVR image %s&quot;</span>, file);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> bRet;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®PVRæ–‡ä»¶åŠ è½½æ—¶æ˜¯å¦ä½¿ç”¨ALPHAæ¸å˜ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::PVRImagesHavePremultipliedAlpha</span><span class="params">(<span class="type">bool</span> haveAlphaPremultiplied)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    PVRHaveAlphaPremultiplied_ = haveAlphaPremultiplied;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//ç”Ÿæˆå¤šçº§çº¹ç†ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::generateMipmap</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">CCAssert</span>( m_uPixelsWide == <span class="built_in">ccNextPOT</span>(m_uPixelsWide) &amp;&amp; m_uPixelsHigh == <span class="built_in">ccNextPOT</span>(m_uPixelsHigh), <span class="string">&quot;Mimpap texture only works in POT textures&quot;</span>);</span><br><span class="line">    <span class="built_in">ccGLBindTexture2D</span>( m_uName );</span><br><span class="line">    <span class="built_in">glGenerateMipmap</span>(GL_TEXTURE_2D);</span><br><span class="line">    m_bHasMipmaps = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ˜¯å¦æœ‰å¤šçº§çº¹ç†</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexture2D::hasMipmaps</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_bHasMipmaps;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®çº¹ç†å‚æ•°ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::setTexParameters</span><span class="params">(ccTexParams *texParams)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">CCAssert</span>( (m_uPixelsWide == <span class="built_in">ccNextPOT</span>(m_uPixelsWide) || texParams-&gt;wrapS == GL_CLAMP_TO_EDGE) &amp;&amp;</span><br><span class="line">        (m_uPixelsHigh == <span class="built_in">ccNextPOT</span>(m_uPixelsHigh) || texParams-&gt;wrapT == GL_CLAMP_TO_EDGE),</span><br><span class="line">        <span class="string">&quot;GL_CLAMP_TO_EDGE should be used in NPOT dimensions&quot;</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">ccGLBindTexture2D</span>( m_uName );</span><br><span class="line">    <span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, texParams-&gt;minFilter );</span><br><span class="line">    <span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, texParams-&gt;magFilter );</span><br><span class="line">    <span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, texParams-&gt;wrapS );</span><br><span class="line">    <span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, texParams-&gt;wrapT );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®ä¸ºéæŠ—é”¯é½¿çº¹ç†æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::setAliasTexParameters</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;    <span class="comment">//ç»‘å®šçº¹ç†</span></span><br><span class="line">    <span class="built_in">ccGLBindTexture2D</span>( m_uName );</span><br><span class="line">    <span class="comment">//è®¾ç½®å¤šçº§çº¹ç†</span></span><br><span class="line">    <span class="keyword">if</span>( ! m_bHasMipmaps )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//è®¾ç½®æœ€å°æ»¤æ³¢æ–¹å¼ä¸ºæœ€è¿‘ç‚¹é‡‡æ ·,è¿™ç§æ–¹å¼æœ€å¿«ï¼Œä½†æœ‰é”¯é½¿ã€‚</span></span><br><span class="line">        <span class="built_in">glTexParameteri</span>( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;     <span class="comment">//è®¾ç½®æœ€å°æ»¤æ³¢æ–¹å¼ä¸ºå¤šçº§çº¹ç†æ–¹å¼ã€‚</span></span><br><span class="line">        <span class="built_in">glTexParameteri</span>( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST_MIPMAP_NEAREST );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®¾ç½®æ”¾å¤§æ»¤æ³¢æ–¹å¼ä¸ºæœ€è¿‘ç‚¹é‡‡æ ·</span></span><br><span class="line">    <span class="built_in">glTexParameteri</span>( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®ä¸ºæŠ—é”¯é½¿çº¹ç†æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::setAntiAliasTexParameters</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;   <span class="comment">//ç»‘å®šçº¹ç†</span></span><br><span class="line">    <span class="built_in">ccGLBindTexture2D</span>( m_uName );</span><br><span class="line">    <span class="comment">//è®¾ç½®å¤šçº§çº¹ç†</span></span><br><span class="line">    <span class="keyword">if</span>( ! m_bHasMipmaps )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//è®¾ç½®æœ€å°æ»¤æ³¢æ–¹å¼ä¸ºçº¿æ€§è¿‡æ»¤,è¿™ç§æ–¹å¼çº¹ç†ä¼šæœ‰ä¸€å®šç¨‹åº¦æ¨¡ç³Šã€‚</span></span><br><span class="line">        <span class="built_in">glTexParameteri</span>( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;    <span class="comment">//è®¾ç½®æœ€å°æ»¤æ³¢æ–¹å¼ä¸ºå¤šçº§çº¹ç†æ–¹å¼ã€‚</span></span><br><span class="line">        <span class="built_in">glTexParameteri</span>( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®¾ç½®æ”¾å¤§æ»¤æ³¢æ–¹å¼ä¸ºæœ€è¿‘ç‚¹é‡‡æ ·</span></span><br><span class="line">    <span class="built_in">glTexParameteri</span>( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—çº¹ç†æ ¼å¼çš„åå­—å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">CCTexture2D::stringForFormat</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (m_ePixelFormat)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_RGBA8888:</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">&quot;RGBA8888&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_RGB888:</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">&quot;RGB888&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_RGB565:</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">&quot;RGB565&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_RGBA4444:</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">&quot;RGBA4444&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_RGB5A1:</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">&quot;RGB5A1&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_AI88:</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">&quot;AI88&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_A8:</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">&quot;A8&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_I8:</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">&quot;I8&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_PVRTC4:</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">&quot;PVRTC4&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_PVRTC2:</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">&quot;PVRTC2&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="built_in">CCAssert</span>(<span class="literal">false</span> , <span class="string">&quot;unrecognised pixel format&quot;</span>);</span><br><span class="line">            <span class="built_in">CCLOG</span>(<span class="string">&quot;stringForFormat: %ld, cannot give useful result&quot;</span>, (<span class="type">long</span>)m_ePixelFormat);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span>  <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//è®¾ç½®é»˜è®¤å¸¦ALPHAé€šé“çš„çº¹ç†æ ¼å¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTexture2D::setDefaultAlphaPixelFormat</span><span class="params">(CCTexture2DPixelFormat format)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    g_defaultAlphaPixelFormat = format;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å–å¾—é»˜è®¤å¸¦ALPHAé€šé“çš„çº¹ç†æ ¼å¼</span></span><br><span class="line"><span class="function">CCTexture2DPixelFormat <span class="title">CCTexture2D::defaultAlphaPixelFormat</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> g_defaultAlphaPixelFormat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—ç›¸åº”çº¹ç†æ ¼å¼çš„è‰²æ·±ã€‚</span></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">int</span> <span class="title">CCTexture2D::bitsPerPixelForFormat</span><span class="params">(CCTexture2DPixelFormat format)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> ret=;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">switch</span> (format) &#123;</span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_RGBA8888:</span><br><span class="line">            ret = ;<span class="comment">//32ä½çœŸå½©è‰²</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_RGB888:</span><br><span class="line">            <span class="comment">// çœ‹èµ·æ¥æ˜¯ç”¨24ä½ï¼Œä½†å†…éƒ¨å®é™…æ˜¯ç”¨DWORDæ¥å­˜æ•°æ®çš„ï¼Œæ‰€ä»¥è¿˜æ˜¯32ä½ã€‚åªä¸è¿‡Alphaé€šé“æ²¡ç”¨ã€‚</span></span><br><span class="line">            ret = ;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_RGB565:</span><br><span class="line">            ret = ;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_RGBA4444:</span><br><span class="line">            ret = ;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_RGB5A1:</span><br><span class="line">            ret = ;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_AI88:</span><br><span class="line">            ret = ;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_A8:</span><br><span class="line">            ret = ;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_I8:</span><br><span class="line">            ret = ;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_PVRTC4:</span><br><span class="line">            ret = ;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kCCTexture2DPixelFormat_PVRTC2:</span><br><span class="line">            ret = ;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            ret = -;</span><br><span class="line">            <span class="built_in">CCAssert</span>(<span class="literal">false</span> , <span class="string">&quot;unrecognised pixel format&quot;</span>);</span><br><span class="line">            <span class="built_in">CCLOG</span>(<span class="string">&quot;bitsPerPixelForFormat: %ld, cannot give useful result&quot;</span>, (<span class="type">long</span>)format);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—å½“å‰çº¹ç†æ ¼å¼çš„è‰²æ·±ã€‚</span></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">int</span> <span class="title">CCTexture2D::bitsPerPixelForFormat</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;<span class="built_in">bitsPerPixelForFormat</span>(m_ePixelFormat);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">NS_CC_END</span><br></pre></td></tr></table></figure>

<h3 id="CCTexturePVR"><a href="#CCTexturePVR" class="headerlink" title="CCTexturePVR"></a>CCTexturePVR</h3><p><code>CCTexturePVR.h</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __CCPVRTEXTURE_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __CCPVRTEXTURE_H__</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCStdC.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCGL.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cocoa/CCObject.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cocoa/CCArray.h&quot;</span></span></span><br><span class="line"><span class="comment">//Cocos2då‘½åç©ºé—´</span></span><br><span class="line">NS_CC_BEGIN</span><br><span class="line"> </span><br><span class="line"><span class="comment">//ç”¨äºå¤šçº§çº¹ç†çš„ç»“æ„</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CCPVRMipmap</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> *address;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> len;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æœ€å¤§çš„å¤šçº§çº¹ç†çº§æ•°</span></span><br><span class="line"><span class="keyword">enum</span> &#123;</span><br><span class="line">    CC_PVRMIPMAP_MAX = ,</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ‰€æ”¯æŒçš„ PVR å›¾ç‰‡æ ¼å¼:</span></span><br><span class="line">    - RGBA8888</span><br><span class="line">    - BGRA8888</span><br><span class="line">    - RGBA4444</span><br><span class="line">    - RGBA5551</span><br><span class="line">    - RGB565</span><br><span class="line">    - A8</span><br><span class="line">    - I8</span><br><span class="line">    - AI88</span><br><span class="line">    - PVRTC <span class="number">4B</span>PP</span><br><span class="line">    - PVRTC <span class="number">2B</span>PP</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CCTexturePVR</span> : <span class="keyword">public</span> CCObject</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//æ„é€ </span></span><br><span class="line">    <span class="built_in">CCTexturePVR</span>();</span><br><span class="line">    <span class="comment">//ææ„</span></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">CCTexturePVR</span>();</span><br><span class="line">    <span class="comment">//æˆå‘˜å‡½æ•°ï¼šè½½å…¥ä¸€ä¸ªPVRå›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">initWithContentsOfFile</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* path)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//å¯¼å‡ºçš„é™æ€å‡½æ•°ï¼šè½½å…¥ä¸€ä¸ªPVRå›¾ç‰‡æ–‡ä»¶ã€‚æ­¤å‡½æ•°ä¸ºå¯ä¾›jsè°ƒç”¨ã€‚</span></span><br><span class="line">    CC_DEPRECATED_ATTRIBä¸€ä¸ª<span class="function">UTE <span class="type">static</span> CCTexturePVR* <span class="title">pvrTextureWithContentsOfFile</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* path)</span></span>;</span><br><span class="line">    <span class="comment">//é™æ€å‡½æ•°ï¼šè½½å…¥ä¸€ä¸ªPVRå›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">    <span class="function"><span class="type">static</span> CCTexturePVR* <span class="title">create</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* path)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç›¸å…³å±æ€§çš„è·å–</span></span><br><span class="line">    <span class="comment">//å–å¾—è´´å›¾ç´¢å¼•</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">unsigned</span> <span class="type">int</span> <span class="title">getName</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> m_uName; &#125;</span><br><span class="line">    <span class="comment">//å–å¾—</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">unsigned</span> <span class="type">int</span> <span class="title">getWidth</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> m_uWidth; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">unsigned</span> <span class="type">int</span> <span class="title">getHeight</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> m_uHeight; &#125;</span><br><span class="line">    <span class="comment">//å–å¾—æ˜¯å¦æœ‰ALPHAé€šé“</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">hasAlpha</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> m_bHasAlpha; &#125;</span><br><span class="line">    <span class="comment">//å–å¾—å¤šçº§çº¹ç†çš„çº§æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">unsigned</span> <span class="type">int</span> <span class="title">getNumberOfMipmaps</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> m_uNumberOfMipmaps; &#125;</span><br><span class="line">    <span class="comment">//å–å¾—å›¾ç‰‡æ ¼å¼</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> CCTexture2DPixelFormat <span class="title">getFormat</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> m_eFormat; &#125;</span><br><span class="line">    <span class="comment">//å–å¾—æ˜¯å¦æ˜¯ä¾›Retainæ˜¾ç¤ºå±ä½¿ç”¨çš„é«˜æ¸…å›¾ç‰‡ ã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">isRetainName</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> m_bRetainName; &#125;</span><br><span class="line">    <span class="comment">//è®¾ç½®ä¸ºä¾›Retainæ˜¾ç¤ºå±ä½¿ç”¨çš„é«˜æ¸…å›¾ç‰‡ã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">setRetainName</span><span class="params">(<span class="type">bool</span> retainName)</span> </span>&#123; m_bRetainName = retainName; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//è§£å‹PVRå›¾ç‰‡æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">unpackPVRData</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span>* data, <span class="type">unsigned</span> <span class="type">int</span> len)</span></span>;</span><br><span class="line">    <span class="comment">//åˆ›å»ºOpenGLçº¹ç†</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">createGLTexture</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">//å¤šçº§çº¹ç†çš„å„çº§ä¿¡æ¯ç»“æ„ã€‚</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">CCPVRMipmap</span> m_asMipmaps[CC_PVRMIPMAP_MAX];   <span class="comment">// pointer to mipmap images</span></span><br><span class="line">    <span class="comment">//å¤šçº§çº¹ç†çš„æœ€å¤§çº§åˆ«æ•°</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> m_uNumberOfMipmaps;                    <span class="comment">// number of mipmap used</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> m_uTableFormatIndex;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> m_uWidth, m_uHeight;</span><br><span class="line">    <span class="comment">//è´´å›¾ç´¢å¼•</span></span><br><span class="line">    GLuint m_uName;</span><br><span class="line">    <span class="comment">//æ˜¯å¦æœ‰Alphaé€šé“</span></span><br><span class="line">    <span class="type">bool</span> m_bHasAlpha;</span><br><span class="line">    <span class="comment">//æ˜¯å¦æ˜¯ä¾›Retainæ˜¾ç¤ºå±ä½¿ç”¨çš„é«˜æ¸…å›¾ç‰‡ ã€‚</span></span><br><span class="line">    <span class="type">bool</span> m_bRetainName;</span><br><span class="line">    <span class="comment">//å›¾ç‰‡æ ¼å¼</span></span><br><span class="line">    CCTexture2DPixelFormat m_eFormat;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">NS_CC_END</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//__CCPVRTEXTURE_H__</span></span></span><br></pre></td></tr></table></figure>
<p><code>CCTexturePVR.cpp:</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCTexture2D.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCTexturePVR.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ccMacros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCConfiguration.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;support/ccUtils.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCStdC.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;platform/CCFileUtils.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;support/zip_support/ZipUtils.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;shaders/ccGLStateCache.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="comment">//Cocos2då‘½åç©ºé—´</span></span><br><span class="line">NS_CC_BEGIN</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PVR_TEXTURE_FLAG_TYPE_MASK    0xff</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//PVRæ–‡ä»¶çš„ä¿¡æ¯æ ‡å¿—ä½çš„å„bitä½æ„ä¹‰</span></span><br><span class="line"><span class="keyword">enum</span> &#123;</span><br><span class="line">    kPVRTextureFlagMipmap         = (&lt;&lt;),        <span class="comment">// æœ‰å¤šçº§çº¹ç†</span></span><br><span class="line">    kPVRTextureFlagTwiddle        = (&lt;&lt;),        <span class="comment">// is twiddled</span></span><br><span class="line">    kPVRTextureFlagBumpmap        = (&lt;&lt;),       <span class="comment">// æ˜¯æ³•çº¿è´´å›¾ï¼ˆç”¨äºäº§ç”Ÿå‡¹å‡¸æ„Ÿï¼‰</span></span><br><span class="line">    kPVRTextureFlagTiling         = (&lt;&lt;),       <span class="comment">// is bordered for tiled pvr</span></span><br><span class="line">    kPVRTextureFlagCubemap        = (&lt;&lt;),       <span class="comment">// æ˜¯ç«‹æ–¹ä½“ç¯å¢ƒæ˜ å°„è´´å›¾ï¼ˆä¸€èˆ¬ç”¨äºåšå¤©ç©ºç›’ï¼‰</span></span><br><span class="line">    kPVRTextureFlagFalseMipCol    = (&lt;&lt;),       <span class="comment">// are there false coloured MIP levels</span></span><br><span class="line">    kPVRTextureFlagVolume         = (&lt;&lt;),       <span class="comment">// ç«‹ä½“çº¹ç†ï¼Œç›¸å½“äºæœ‰å¤šå±‚çš„çº¹ç†ã€‚</span></span><br><span class="line">    kPVRTextureFlagAlpha          = (&lt;&lt;),       <span class="comment">// v2.1 is there transparency info in the texture</span></span><br><span class="line">    kPVRTextureFlagVerticalFlip   = (&lt;&lt;),       <span class="comment">// v2.1 is the texture vertically flipped</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//PVRæ–‡ä»¶å¤´æ ‡è¯†</span></span><br><span class="line"><span class="type">static</span> <span class="type">char</span> gPVRTexIdentifier[] = <span class="string">&quot;PVR!&quot;</span>;</span><br><span class="line"><span class="comment">//æ‰€æœ‰PVRæ–‡ä»¶çš„æ ¼å¼</span></span><br><span class="line"><span class="keyword">enum</span></span><br><span class="line">&#123;</span><br><span class="line">    kPVRTexturePixelTypeRGBA_4444= <span class="number">0x10</span>,</span><br><span class="line">    kPVRTexturePixelTypeRGBA_5551,</span><br><span class="line">    kPVRTexturePixelTypeRGBA_8888,</span><br><span class="line">    kPVRTexturePixelTypeRGB_565,</span><br><span class="line">    kPVRTexturePixelTypeRGB_555,                <span class="comment">// è¿™ä¸ªCocos2d-xæš‚ä¸æ”¯æŒ</span></span><br><span class="line">    kPVRTexturePixelTypeRGB_888,</span><br><span class="line">    kPVRTexturePixelTypeI_8,</span><br><span class="line">    kPVRTexturePixelTypeAI_88,</span><br><span class="line">    kPVRTexturePixelTypePVRTC_2,</span><br><span class="line">    kPVRTexturePixelTypePVRTC_4,</span><br><span class="line">    kPVRTexturePixelTypeBGRA_8888,</span><br><span class="line">    kPVRTexturePixelTypeA_8,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//ä¿¡æ¯æ•°ç»„</span></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">unsigned</span> <span class="type">int</span> tableFormats[][] = &#123;</span><br><span class="line">    <span class="comment">//æ•°ç»„å…ƒç´ çš„ç»“æ„ä¸ºï¼š</span></span><br><span class="line">    <span class="comment">// 1- PVR æ–‡ä»¶æ ¼å¼</span></span><br><span class="line">    <span class="comment">// 2- OpenGL å†…éƒ¨æ ¼å¼</span></span><br><span class="line">    <span class="comment">// 3- OpenGL æ ¼å¼</span></span><br><span class="line">    <span class="comment">// 4- OpenGL æ•°æ®ç±»å‹</span></span><br><span class="line">    <span class="comment">// 5- è‰²æ·±</span></span><br><span class="line">    <span class="comment">// 6- æ˜¯å¦å‹ç¼©</span></span><br><span class="line">    <span class="comment">// 7- Cocos2d åƒç´ æ ¼å¼</span></span><br><span class="line">    &#123; kPVRTexturePixelTypeRGBA_4444, GL_RGBA,    GL_RGBA, GL_UNSIGNED_SHORT_4_4_4_4,            , <span class="literal">false</span>, kCCTexture2DPixelFormat_RGBA4444    &#125;,</span><br><span class="line">    &#123; kPVRTexturePixelTypeRGBA_5551, GL_RGBA,    GL_RGBA, GL_UNSIGNED_SHORT_5_5_5_1,            , <span class="literal">false</span>, kCCTexture2DPixelFormat_RGB5A1    &#125;,</span><br><span class="line">    &#123; kPVRTexturePixelTypeRGBA_8888, GL_RGBA,    GL_RGBA, GL_UNSIGNED_BYTE,                    , <span class="literal">false</span>, kCCTexture2DPixelFormat_RGBA8888    &#125;,</span><br><span class="line">    &#123; kPVRTexturePixelTypeRGB_565,     GL_RGB,    GL_RGB,     GL_UNSIGNED_SHORT_5_6_5,            , <span class="literal">false</span>, kCCTexture2DPixelFormat_RGB565    &#125;,</span><br><span class="line">    &#123; kPVRTexturePixelTypeRGB_888,     GL_RGB,    GL_RGB,     GL_UNSIGNED_BYTE,                    , <span class="literal">false</span>,    kCCTexture2DPixelFormat_RGB888    &#125;,</span><br><span class="line">    &#123; kPVRTexturePixelTypeA_8,         GL_ALPHA,    GL_ALPHA,    GL_UNSIGNED_BYTE,                ,    <span class="literal">false</span>, kCCTexture2DPixelFormat_A8        &#125;,</span><br><span class="line">    &#123; kPVRTexturePixelTypeI_8,         GL_LUMINANCE,    GL_LUMINANCE,    GL_UNSIGNED_BYTE,        ,    <span class="literal">false</span>, kCCTexture2DPixelFormat_I8        &#125;,</span><br><span class="line">    &#123; kPVRTexturePixelTypeAI_88,     GL_LUMINANCE_ALPHA,    GL_LUMINANCE_ALPHA, GL_UNSIGNED_BYTE,,    <span class="literal">false</span>, kCCTexture2DPixelFormat_AI88    &#125;,</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (CC_TARGET_PLATFORM == CC_PLATFORM_IOS)</span></span><br><span class="line">    <span class="comment">//å¦‚æœç¨‹åºè¿è¡Œåœ¨IOSä¸Šï¼Œè¿˜å¯æ”¯æŒä»¥ä¸‹ä¿¡æ¯</span></span><br><span class="line">    &#123; kPVRTexturePixelTypePVRTC_2,     GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG, (<span class="type">unsigned</span> <span class="type">int</span>)-, (<span class="type">unsigned</span> <span class="type">int</span>)-,            ,    <span class="literal">true</span>, kCCTexture2DPixelFormat_PVRTC2    &#125;,</span><br><span class="line">    &#123; kPVRTexturePixelTypePVRTC_4,     GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG, (<span class="type">unsigned</span> <span class="type">int</span>)-, (<span class="type">unsigned</span> <span class="type">int</span>)-,            ,    <span class="literal">true</span>, kCCTexture2DPixelFormat_PVRTC4    &#125;,</span><br><span class="line"> </span><br><span class="line">    &#123; kPVRTexturePixelTypeBGRA_8888, GL_RGBA,    GL_BGRA, GL_UNSIGNED_BYTE,                    ,    <span class="literal">false</span>, kCCTexture2DPixelFormat_RGBA8888    &#125;,</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//ä¿¡æ¯è¡¨çš„å…ƒç´ æ•°é‡</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_TABLE_ELEMENTS (sizeof(tableFormats) / sizeof(tableFormats[0]))</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">enum</span> &#123;</span><br><span class="line">    kCCInternalPVRTextureFormat,</span><br><span class="line">    kCCInternalOpenGLInternalFormat,</span><br><span class="line">    kCCInternalOpenGLFormat,</span><br><span class="line">    kCCInternalOpenGLType,</span><br><span class="line">    kCCInternalBPP,</span><br><span class="line">    kCCInternalCompressedImage,</span><br><span class="line">    kCCInternalCCTexture2DPixelFormat,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//PVRæ–‡ä»¶å¤´ä¿¡æ¯ç»“æ„</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_PVRTexHeader</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> headerLength;    <span class="comment">//å¤´ä¿¡æ¯é•¿åº¦</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> height;            <span class="comment">//é«˜</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> width;            <span class="comment">//å®½</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> numMipmaps;    <span class="comment">//æ˜¯å¦æœ‰å¤šçº§çº¹ç†</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> flags;            <span class="comment">//æ ‡è®°ä½</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> dataLength;    <span class="comment">//åé¢çš„åƒç´ æ•°æ®é•¿åº¦</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> bpp;            <span class="comment">//è‰²æ·±</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> bitmaskRed;    <span class="comment">//å¯¹åº”çº¢è‰²çš„åƒç´ ä½</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> bitmaskGreen;    <span class="comment">//å¯¹åº”ç»¿è‰²çš„åƒç´ ä½</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> bitmaskBlue;     <span class="comment">//å¯¹åº”è“è‰²çš„åƒç´ ä½</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> bitmaskAlpha; <span class="comment">//å¯¹åº”ALPHAè‰²çš„åƒç´ ä½</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> pvrTag;            <span class="comment">//</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> numSurfs;        <span class="comment">//æ˜¯å¦æœ‰å¤šå±‚</span></span><br><span class="line">&#125; PVRTexHeader;</span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line">CCTexturePVR::<span class="built_in">CCTexturePVR</span>()</span><br><span class="line">: <span class="built_in">m_uTableFormatIndex</span>()</span><br><span class="line">, <span class="built_in">m_uNumberOfMipmaps</span>()</span><br><span class="line">, <span class="built_in">m_uWidth</span>()</span><br><span class="line">, <span class="built_in">m_uHeight</span>()</span><br><span class="line">, <span class="built_in">m_bRetainName</span>(<span class="literal">false</span>)</span><br><span class="line">, <span class="built_in">m_bHasAlpha</span>(<span class="literal">false</span>)</span><br><span class="line">, <span class="built_in">m_uName</span>()</span><br><span class="line">, <span class="built_in">m_eFormat</span>(kCCTexture2DPixelFormat_Default)</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">CCTexturePVR::~<span class="built_in">CCTexturePVR</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">CCLOGINFO</span>( <span class="string">&quot;Cocos2d: deallocing CCTexturePVR&quot;</span> );</span><br><span class="line">    <span class="comment">//é‡Šæ”¾OpenGLè´´å›¾</span></span><br><span class="line">    <span class="keyword">if</span> (m_uName !=  &amp;&amp; ! m_bRetainName)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">ccGLDeleteTexture</span>(m_uName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è§£å‹PVRåƒç´ æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexturePVR::unpackPVRData</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span>* data, <span class="type">unsigned</span> <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">bool</span> success = <span class="literal">false</span>;</span><br><span class="line">    PVRTexHeader *header = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> flags, pvrTag;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> dataLength = , dataOffset = , dataSize = ;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> blockSize = , widthBlocks = , heightBlocks = ;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> width = , height = , bpp = ;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> *bytes = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> formatFlags;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//å°†æ•°æ®åœ°å€è½¬ä¸ºå¤´ä¿¡æ¯æŒ‡é’ˆï¼Œè¿™ä¸ªå°±å¯ä»¥ç›´æ¥é€šè¿‡ç»“æ„æŒ‡é’ˆè¿›è¡Œå­˜å–ã€‚</span></span><br><span class="line">    header = (PVRTexHeader *)data;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//æ ¼å¼æœ‰æ•ˆæ€§æ£€æŸ¥</span></span><br><span class="line">    pvrTag = <span class="built_in">CC_SWAP_INT32_LITTLE_TO_HOST</span>(header-&gt;pvrTag);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        Check that given data really represents pvrtexture</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">        [0] = &#x27;P&#x27;</span></span><br><span class="line"><span class="comment">        [1] = &#x27;V&#x27;</span></span><br><span class="line"><span class="comment">        [2] = &#x27;R&#x27;</span></span><br><span class="line"><span class="comment">        [3] = &#x27;!&#x27;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">if</span> (gPVRTexIdentifier[] != ((pvrTag &gt;&gt;  ) &amp; <span class="number">0xff</span>) ||</span><br><span class="line">        gPVRTexIdentifier[] != ((pvrTag &gt;&gt;  ) &amp; <span class="number">0xff</span>) ||</span><br><span class="line">        gPVRTexIdentifier[] != ((pvrTag &gt;&gt; ) &amp; <span class="number">0xff</span>) ||</span><br><span class="line">        gPVRTexIdentifier[] != ((pvrTag &gt;&gt; ) &amp; <span class="number">0xff</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CCLOG</span>(<span class="string">&quot;Unsupported PVR format. Use the Legacy format until the new format is supported&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å–å¾—é…ç½®ä¿¡æ¯</span></span><br><span class="line">    CCConfiguration *configuration = CCConfiguration::<span class="built_in">sharedConfiguration</span>();</span><br><span class="line">    <span class="comment">//å–å¾—æ ‡è®°</span></span><br><span class="line">    flags = <span class="built_in">CC_SWAP_INT32_LITTLE_TO_HOST</span>(header-&gt;flags);</span><br><span class="line">    formatFlags = flags &amp; PVR_TEXTURE_FLAG_TYPE_MASK;</span><br><span class="line">    <span class="type">bool</span> flipped = (flags &amp; kPVRTextureFlagVerticalFlip) ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (flipped)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: WARNING: Image is flipped. Regenerate it using PVRTexTool&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æŸ¥çœ‹æ˜¯å¦æ”¯æŒé2çš„å¹‚æ¬¡æ–¹å¤§å°çš„çº¹ç†</span></span><br><span class="line">    <span class="keyword">if</span> (! configuration-&gt;<span class="built_in">supportsNPOT</span>() &amp;&amp;</span><br><span class="line">        (header-&gt;width != <span class="built_in">ccNextPOT</span>(header-&gt;width) || header-&gt;height != <span class="built_in">ccNextPOT</span>(header-&gt;height)))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: ERROR: Loding an NPOT texture (%dx%d) but is not supported on this device&quot;</span>, header-&gt;width, header-&gt;height);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//éå†æ‰€æœ‰çš„æ ¼å¼ä¿¡æ¯æ•°æ®ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ ¼å¼ä¿¡æ¯ã€‚</span></span><br><span class="line">    <span class="keyword">for</span> (m_uTableFormatIndex = ; m_uTableFormatIndex &lt; (<span class="type">unsigned</span> <span class="type">int</span>)MAX_TABLE_ELEMENTS; m_uTableFormatIndex++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (tableFormats[m_uTableFormatIndex][kCCInternalPVRTextureFormat] == formatFlags)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//Reset num of mipmaps</span></span><br><span class="line">            m_uNumberOfMipmaps = ;</span><br><span class="line"> </span><br><span class="line">            <span class="comment">//å–å¾—å›¾ç‰‡å¤§å°</span></span><br><span class="line">            m_uWidth = width = <span class="built_in">CC_SWAP_INT32_LITTLE_TO_HOST</span>(header-&gt;width);</span><br><span class="line">            m_uHeight = height = <span class="built_in">CC_SWAP_INT32_LITTLE_TO_HOST</span>(header-&gt;height);</span><br><span class="line"> </span><br><span class="line">            <span class="comment">//æ£€æŸ¥æ˜¯å¦æœ‰ALPHAé€šé“</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">CC_SWAP_INT32_LITTLE_TO_HOST</span>(header-&gt;bitmaskAlpha))</span><br><span class="line">            &#123;</span><br><span class="line">                m_bHasAlpha = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                m_bHasAlpha = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            <span class="comment">//å–å¾—æ•°æ®é•¿åº¦</span></span><br><span class="line">            dataLength = <span class="built_in">CC_SWAP_INT32_LITTLE_TO_HOST</span>(header-&gt;dataLength);</span><br><span class="line"> </span><br><span class="line">            <span class="comment">//å°†æ•°æ®æŒ‡é’ˆåç§»åˆ°å¤´ä¿¡æ¯ä¹‹åï¼Œå³åƒç´ æ•°æ®æ‰€åœ¨ä½ç½®</span></span><br><span class="line">            bytes = ((<span class="type">unsigned</span> <span class="type">char</span> *)data) + <span class="built_in">sizeof</span>(PVRTexHeader);</span><br><span class="line">            m_eFormat = (CCTexture2DPixelFormat)(tableFormats[m_uTableFormatIndex][kCCInternalCCTexture2DPixelFormat]);</span><br><span class="line">            bpp = tableFormats[m_uTableFormatIndex][kCCInternalBPP];</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// éå†æ¯ä¸ªå¤šçº§çº¹ç†å›¾åƒå—</span></span><br><span class="line">            <span class="keyword">while</span> (dataOffset &lt; dataLength)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">switch</span> (formatFlags) &#123;</span><br><span class="line">                    <span class="keyword">case</span> kPVRTexturePixelTypePVRTC_2:</span><br><span class="line">                        blockSize =  * ; <span class="comment">// Pixel by pixel block size for 2bpp</span></span><br><span class="line">                        widthBlocks = width / ;</span><br><span class="line">                        heightBlocks = height / ;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> kPVRTexturePixelTypePVRTC_4:</span><br><span class="line">                        blockSize =  * ; <span class="comment">// Pixel by pixel block size for 4bpp</span></span><br><span class="line">                        widthBlocks = width / ;</span><br><span class="line">                        heightBlocks = height / ;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> kPVRTexturePixelTypeBGRA_8888:</span><br><span class="line">                        <span class="keyword">if</span> (CCConfiguration::<span class="built_in">sharedConfiguration</span>()-&gt;<span class="built_in">supportsBGRA8888</span>() == <span class="literal">false</span>)</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: TexturePVR. BGRA8888 not supported on this device&quot;</span>);</span><br><span class="line">                            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                        blockSize = ;</span><br><span class="line">                        widthBlocks = width;</span><br><span class="line">                        heightBlocks = height;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">                <span class="comment">// Clamp to minimum number of blocks</span></span><br><span class="line">                <span class="keyword">if</span> (widthBlocks &lt; )</span><br><span class="line">                &#123;</span><br><span class="line">                    widthBlocks = ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (heightBlocks &lt; )</span><br><span class="line">                &#123;</span><br><span class="line">                    heightBlocks = ;</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">                dataSize = widthBlocks * heightBlocks * ((blockSize  * bpp) / );</span><br><span class="line">                <span class="type">unsigned</span> <span class="type">int</span> packetLength = (dataLength - dataOffset);</span><br><span class="line">                packetLength = packetLength &gt; dataSize ? dataSize : packetLength;</span><br><span class="line"> </span><br><span class="line">                <span class="comment">//è®°å½•æ¯ä¸ªå¤šçº§çº¹ç†å›¾åƒå—çš„åƒç´ æ•°æ®åœ°å€å’Œé•¿åº¦ã€‚</span></span><br><span class="line">                m_asMipmaps[m_uNumberOfMipmaps].address = bytes + dataOffset;</span><br><span class="line">                m_asMipmaps[m_uNumberOfMipmaps].len = packetLength;</span><br><span class="line">                m_uNumberOfMipmaps++;</span><br><span class="line"> </span><br><span class="line">                <span class="comment">//æ£€æŸ¥æ˜¯å¦è¶…å‡ºæœ€å¤§çº§æ•°</span></span><br><span class="line">                <span class="built_in">CCAssert</span>(m_uNumberOfMipmaps &lt; CC_PVRMIPMAP_MAX,</span><br><span class="line">                         <span class="string">&quot;TexturePVR: Maximum number of mimpaps reached. Increate the CC_PVRMIPMAP_MAX value&quot;</span>);</span><br><span class="line">                <span class="comment">//åç§»åˆ°ä¸‹ä¸€ä¸ªå¤šçº§çº¹ç†å›¾åƒå—ã€‚</span></span><br><span class="line">                dataOffset += packetLength;</span><br><span class="line"> </span><br><span class="line">                <span class="comment">//å¤§å°å‡ä¸ºåŸæ¥1/2ã€‚</span></span><br><span class="line">                width = <span class="built_in">MAX</span>(width &gt;&gt; , );</span><br><span class="line">                height = <span class="built_in">MAX</span>(height &gt;&gt; , );</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            <span class="comment">//è¯»å–å®Œæˆ</span></span><br><span class="line">            success = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æˆåŠŸåˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (! success)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: WARNING: Unsupported PVR Pixel Format: 0x%2x. Re-encode it with a OpenGL pixel format variant&quot;</span>, formatFlags);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> success;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºOpenGLè´´å›¾</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexturePVR::createGLTexture</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//ä¿å­˜å®½é«˜</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> width = m_uWidth;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> height = m_uHeight;</span><br><span class="line">    GLenum err;</span><br><span class="line">    <span class="comment">//å¦‚æœæ–‡ä»¶ä¸­æœ‰å¤šçº§çº¹ç†</span></span><br><span class="line">    <span class="keyword">if</span> (m_uNumberOfMipmaps &gt; )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å…ˆé‡Šæ”¾åŸæ¥çš„çº¹ç†</span></span><br><span class="line">        <span class="keyword">if</span> (m_uName != )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">ccGLDeleteTexture</span>(m_uName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åƒç´ æ•°æ®æ¯å­—èŠ‚å¯¹é½</span></span><br><span class="line">        <span class="built_in">glPixelStorei</span>(GL_UNPACK_ALIGNMENT,);</span><br><span class="line">        <span class="comment">//äº§ç”ŸOpenGLè´´å›¾</span></span><br><span class="line">        <span class="built_in">glGenTextures</span>(, &amp;m_uName);</span><br><span class="line">        <span class="built_in">glBindTexture</span>(GL_TEXTURE_2D, m_uName);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// å¦‚æœæ— å¤šçº§çº¹ç†ï¼Œè®¾ç½®æœ€å°æ»¤æ³¢æ–¹å¼ä¸ºçº¿æ€§è¿‡æ»¤ï¼Œäº§ç”ŸæŠ—é”¯é½¿æ•ˆæœã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (m_uNumberOfMipmaps == )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;  <span class="comment">//è®¾ç½®æœ€å°æ»¤æ³¢æ–¹å¼ä¸ºæœ€è¿‘ç‚¹é‡‡æ ·,è¿™ç§æ–¹å¼æœ‰é”¯é½¿ã€‚</span></span><br><span class="line">            <span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è®¾ç½®æœ€å¤§æ»¤æ³¢æ–¹å¼ä¸ºçº¿æ€§è¿‡æ»¤</span></span><br><span class="line">        <span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line">    <span class="comment">//è®¾ç½®è´´å›¾çš„æ¨ªå‘çº¹ç†å¯»å€æ¨¡å¼ä¸ºè¾¹ç¼˜æˆªå–æ¨¡å¼ã€‚æ€»æ˜¯å¿½ç•¥è¾¹ç•Œã€‚</span></span><br><span class="line">        <span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);</span><br><span class="line">        <span class="comment">//è®¾ç½®è´´å›¾çš„çºµå‘çº¹ç†å¯»å€æ¨¡å¼ä¸ºè¾¹ç¼˜æˆªå–æ¨¡å¼ã€‚æ€»æ˜¯å¿½ç•¥è¾¹ç•Œã€‚</span></span><br><span class="line">        <span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ£€é”™</span></span><br><span class="line">    <span class="built_in">CHECK_GL_ERROR_DEBUG</span>(); <span class="comment">// clean possible GL error</span></span><br><span class="line">    <span class="comment">//å–å¾—å¯¹åº”æ ¼å¼çš„ç›¸å…³ä¿¡æ¯ã€‚</span></span><br><span class="line">    GLenum internalFormat = tableFormats[m_uTableFormatIndex][kCCInternalOpenGLInternalFormat];</span><br><span class="line">    GLenum format = tableFormats[m_uTableFormatIndex][kCCInternalOpenGLFormat];</span><br><span class="line">    GLenum type = tableFormats[m_uTableFormatIndex][kCCInternalOpenGLType];</span><br><span class="line">    <span class="type">bool</span> compressed = ( == tableFormats[m_uTableFormatIndex][kCCInternalCompressedImage]) ? <span class="literal">false</span> : <span class="literal">true</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// å¾ªç¯äº§ç”Ÿå¤šçº§çº¹ç†è´´å›¾ã€‚</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">int</span> i = ; i &lt; m_uNumberOfMipmaps; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ£€æŸ¥é…ç½®ä¿¡æ¯æ˜¯å¦æ”¯æŒå‹ç¼©æ ¼å¼ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (compressed &amp;&amp; ! CCConfiguration::<span class="built_in">sharedConfiguration</span>()-&gt;<span class="built_in">supportsPVRTC</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: WARNING: PVRTC images are not supported&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å–å¾—å½“å‰çº§åˆ«çš„å›¾åƒå—çš„åƒç´ æ•°æ®åœ°å€å’Œé•¿åº¦ã€‚</span></span><br><span class="line">        <span class="type">unsigned</span> <span class="type">char</span> *data = m_asMipmaps[i].address;</span><br><span class="line">        <span class="type">unsigned</span> <span class="type">int</span> datalen = m_asMipmaps[i].len;</span><br><span class="line">        <span class="comment">//å¦‚æœæ˜¯å‹ç¼©æ ¼å¼ï¼Œåˆ™äº§ç”Ÿå‹ç¼©æ ¼å¼çš„è´´å›¾ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (compressed)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">glCompressedTexImage2D</span>(GL_TEXTURE_2D, i, internalFormat, width, height, , datalen, data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;<span class="comment">//äº§ç”Ÿä¸€èˆ¬æ ¼å¼çš„è´´å›¾ã€‚</span></span><br><span class="line">            <span class="built_in">glTexImage2D</span>(GL_TEXTURE_2D, i, internalFormat, width, height, , format, type, data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœæ˜¯é2çš„å¹‚æ¬¡æ–¹å¤§å°ï¼Œåˆ™æç¤ºã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (i &gt;  &amp;&amp; (width != height || <span class="built_in">ccNextPOT</span>(width) != width ))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: TexturePVR. WARNING. Mipmap level %u is not squared. Texture won&#x27;t render correctly. width=%u != height=%u&quot;</span>, i, width, height);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ£€é”™</span></span><br><span class="line">        err = <span class="built_in">glGetError</span>();</span><br><span class="line">        <span class="keyword">if</span> (err != GL_NO_ERROR)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: TexturePVR: Error uploading compressed texture level: %u . glError: 0x%04X&quot;</span>, i, err);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å˜ä¸ºåŸæ¥å¤§å°çš„1/2ã€‚</span></span><br><span class="line">        width = <span class="built_in">MAX</span>(width &gt;&gt; , );</span><br><span class="line">        height = <span class="built_in">MAX</span>(height &gt;&gt; , );</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•°ï¼šåŠ è½½PVRå›¾ç‰‡</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CCTexturePVR::initWithContentsOfFile</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span>* pvrdata = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">int</span> pvrlen = ;</span><br><span class="line">     <span class="comment">//å®šä¹‰å­—ç¬¦ä¸²å˜é‡ï¼Œå­˜å‚¨è½¬æ¢ä¸ºå°å†™çš„è·¯å¾„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line">    <span class="function">std::string <span class="title">lowerCase</span><span class="params">(path)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">int</span> i = ; i &lt; lowerCase.<span class="built_in">length</span>(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        lowerCase[i] = <span class="built_in">tolower</span>(lowerCase[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ£€æŸ¥æ˜¯å¦æ˜¯cczæ ¼å¼ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (lowerCase.<span class="built_in">find</span>(<span class="string">&quot;.ccz&quot;</span>) != std::string::npos)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//è°ƒç”¨å‹ç¼©åº“å‡½æ•°å°†æ–‡ä»¶æ•°æ®è¯»å–åˆ°ä¸ºpvrdataç”³è¯·çš„å†…å­˜ä¸­ã€‚å–å¾—å…¶å¤§å°å­˜å…¥pvrlenå˜é‡ä¸­ã€‚</span></span><br><span class="line">        pvrlen = ZipUtils::<span class="built_in">ccInflateCCZFile</span>(path, &amp;pvrdata);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ£€æŸ¥æ˜¯å¦æ˜¯gzæ ¼å¼ã€‚</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (lowerCase.<span class="built_in">find</span>(<span class="string">&quot;.gz&quot;</span>) != std::string::npos)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//è°ƒç”¨å‹ç¼©åº“å‡½æ•°å°†æ–‡ä»¶æ•°æ®è¯»å–åˆ°ä¸ºpvrdataç”³è¯·çš„å†…å­˜ä¸­ã€‚å–å¾—å…¶å¤§å°å­˜å…¥pvrlenå˜é‡ä¸­ã€‚</span></span><br><span class="line">        pvrlen = ZipUtils::<span class="built_in">ccInflateGZipFile</span>(path, &amp;pvrdata);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">         <span class="comment">//æ™®é€šPVRæ–‡ä»¶ï¼Œå°†æ–‡ä»¶æ•°æ®è¯»å–åˆ°ä¸€å—å†…å­˜ä¸­è¿”å›ç»™pvrdataã€‚å–å¾—å…¶å¤§å°å­˜å…¥pvrlenå˜é‡ä¸­ã€‚</span></span><br><span class="line">        pvrdata = CCFileUtils::<span class="built_in">sharedFileUtils</span>()-&gt;<span class="built_in">getFileData</span>(path, <span class="string">&quot;rb&quot;</span>, (<span class="type">unsigned</span> <span class="type">long</span> *)(&amp;pvrlen));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœè¯»å–å¤±è´¥åˆ™è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (pvrlen &lt; )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">release</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    m_uNumberOfMipmaps = ;</span><br><span class="line"> </span><br><span class="line">    m_uName = ;</span><br><span class="line">    m_uWidth = m_uHeight = ;</span><br><span class="line">    m_bHasAlpha = <span class="literal">false</span>;</span><br><span class="line"> </span><br><span class="line">    m_bRetainName = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//å¦‚æœè§£å‹æ•°æ®å¤±è´¥åˆ™è¿”å›ã€‚</span></span><br><span class="line">    <span class="comment">//è§£å‹åï¼Œå¦‚æœåˆ›å»ºè´´å›¾å¤±è´¥åˆ™è¿”å›ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">unpackPVRData</span>(pvrdata, pvrlen)  || !<span class="built_in">createGLTexture</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CC_SAFE_DELETE_ARRAY</span>(pvrdata);</span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">release</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é‡Šæ”¾æ•°æ®å ç”¨çš„å†…å­˜ã€‚</span></span><br><span class="line">    <span class="built_in">CC_SAFE_DELETE_ARRAY</span>(pvrdata);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¯¼å‡ºçš„é™æ€å‡½æ•°ï¼šåŠ è½½PVRå›¾ç‰‡</span></span><br><span class="line"><span class="function">CCTexturePVR * <span class="title">CCTexturePVR::pvrTextureWithContentsOfFile</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> CCTexturePVR::<span class="built_in">create</span>(path);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é™æ€å‡½æ•°ï¼šåŠ è½½PVRå›¾ç‰‡</span></span><br><span class="line"><span class="function">CCTexturePVR * <span class="title">CCTexturePVR::create</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//new ä¸€ä¸ªæ–°çš„CCTexturePVR</span></span><br><span class="line">    CCTexturePVR * pTexture = <span class="keyword">new</span> <span class="built_in">CCTexturePVR</span>();</span><br><span class="line">    <span class="keyword">if</span> (pTexture)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//è°ƒç”¨æˆå‘˜å‡½æ•°åŠ è½½PVRå›¾ç‰‡</span></span><br><span class="line">        <span class="keyword">if</span> (pTexture-&gt;<span class="built_in">initWithContentsOfFile</span>(path))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœæˆåŠŸ,è®¾ç½®äº¤ç”±å†…å­˜ç®¡ç†å™¨ä½¿ç”¨å¼•ç”¨è®¡æ•°å™¨è¿›è¡Œå†…å­˜ç®¡ç†ã€‚</span></span><br><span class="line">            pTexture-&gt;<span class="built_in">autorelease</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">              <span class="comment">//å¦åˆ™é‡Šæ”¾çº¹ç†</span></span><br><span class="line">            <span class="keyword">delete</span> pTexture;</span><br><span class="line">            pTexture = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿”å›è¿™ä¸ªCCTexturePVR</span></span><br><span class="line">    <span class="keyword">return</span> pTexture;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">NS_CC_END</span><br></pre></td></tr></table></figure>

<h3 id="CCTextureCache"><a href="#CCTextureCache" class="headerlink" title="CCTextureCache"></a>CCTextureCache</h3><p><code>CCTextureCache.h:</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __CCTEXTURE_CACHE_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __CCTEXTURE_CACHE_H__</span></span><br><span class="line"><span class="comment">//ç”±CCObjectæ´¾ç”Ÿ</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cocoa/CCObject.h&quot;</span></span></span><br><span class="line"><span class="comment">//éœ€è¦ç”¨åˆ°å­—å…¸</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cocoa/CCDictionary.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;textures/CCTexture2D.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//è¿™é‡Œç”¨åˆ°CCImageç±»å’ŒSTLå®¹å™¨ä¹‹ä¸€list</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ENABLE_CACHE_TEXTURE_DATA</span></span><br><span class="line">    <span class="meta">#<span class="keyword">include</span> <span class="string">&quot;platform/CCImage.h&quot;</span></span></span><br><span class="line">    <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//Cocos2då‘½åç©ºé—´</span></span><br><span class="line">NS_CC_BEGIN</span><br><span class="line"><span class="comment">//ç”¨åˆ°çº¿ç¨‹é”</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CCLock</span>;</span><br><span class="line"><span class="comment">//ç”¨åˆ°CCImageå¤„ç†å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CCImage</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//çº¹ç†ç®¡ç†å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CC_DLL</span> CCTextureCache : <span class="keyword">public</span> CCObject</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">//å­—å…¸å¯¹è±¡æŒ‡é’ˆã€‚</span></span><br><span class="line">CCDictionary*                 m_pTextures;</span><br><span class="line"><span class="comment">//çº¿ç¨‹ä¸´ç•ŒåŒºã€‚ç”¨äºé”å®šå­—å…¸è®¿é—®ï¼Œè²Œä¼¼ç”¨ä¸åˆ°ã€‚è¿™é‡Œå±è”½äº†~</span></span><br><span class="line">    <span class="comment">//pthread_mutex_t          *m_pDictLock;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// è®¾ç½®å¤šçº¿ç¨‹åŠ è½½å›¾ç‰‡æ—¶çš„å›è°ƒå‡½æ•°ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addImageAsyncCallBack</span><span class="params">(<span class="type">float</span> dt)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">CCTextureCache</span>();</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">CCTextureCache</span>();</span><br><span class="line">    <span class="comment">//å–å¾—å½“å‰ç±»æè¿°</span></span><br><span class="line">    <span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">description</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//å–å¾—å½“å‰å­—å…¸çš„å¿«ç…§ï¼ˆæ‹·è´ï¼‰</span></span><br><span class="line">    <span class="function">CCDictionary* <span class="title">snapshotTextures</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//è¿”å›å”¯ä¸€çº¹ç†ç®¡ç†å™¨çš„å®ä¾‹æŒ‡é’ˆ</span></span><br><span class="line">    <span class="function"><span class="type">static</span> CCTextureCache * <span class="title">sharedTextureCache</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//é”€æ¯å”¯ä¸€çº¹ç†ç®¡ç†å™¨çš„å®ä¾‹æŒ‡é’ˆ</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">purgeSharedTextureCache</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//åŠ è½½ä¸€ä¸ªå›¾ç‰‡ç”Ÿæˆçº¹ç†ï¼Œæ–‡ä»¶ååšä¸ºå­—å…¸çš„æŸ¥è¯¢å¯¹åº”å…³é”®å­—ã€‚è¿”å›ç”Ÿæˆçš„çº¹ç†æŒ‡é’ˆï¼Œæ”¯æŒpng,bmp,tiff,jpeg,pvr,gifç­‰æ ¼å¼ã€‚</span></span><br><span class="line">    <span class="function">CCTexture2D* <span class="title">addImage</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* fileimage)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//æ­¤å‡½æ•°å¯ä»¥æ”¯æŒå¤šçº¿ç¨‹è½½å…¥å›¾ç‰‡ï¼Œè°ƒç”¨æ—¶ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¼‚æ­¥åŠ è½½ï¼ŒåŠ è½½æˆåŠŸåç”±ä¸»çº¿ç¨‹è°ƒç”¨è®¾ç½®çš„å›è°ƒå‡½æ•°ï¼Œå½“ç„¶åˆ›å»ºçš„çº¹ç†ä¼šåšä¸ºå‚æ•°ä¼ é€’ã€‚æ”¯æŒpngå’Œjpg</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addImageAsync</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *path, CCObject *target, SEL_CallFuncO selector)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//åŠ è½½ä¸€ä¸ªå›¾ç‰‡ç”Ÿæˆçº¹ç†ï¼ŒæŒ‡å®šå‚æ•°keyï¼ˆå…¶å®è¦æ±‚æ˜¯å›¾ç‰‡çš„ç›¸å¯¹è·¯å¾„å­—ç¬¦ä¸²ï¼‰åšä¸ºå­—å…¸çš„æŸ¥è¯¢å¯¹åº”å…³é”®å­—ã€‚</span></span><br><span class="line">    <span class="function">CCTexture2D* <span class="title">addUIImage</span><span class="params">(CCImage *image, <span class="type">const</span> <span class="type">char</span> *key)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//é€šè¿‡æŸ¥è¯¢å…³é”®å­—ï¼ˆå…¶å®è¦æ±‚æ˜¯å›¾ç‰‡çš„ç›¸å¯¹è·¯å¾„å­—ç¬¦ä¸²ï¼‰ä»å­—å…¸é‡Œæ‰¾åˆ°å¯¹åº”çš„çº¹ç†ã€‚</span></span><br><span class="line"><span class="function">CCTexture2D* <span class="title">textureForKey</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* key)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//æ¸…ç©ºå­—å…¸ï¼Œé‡Šæ”¾æ‰€æœ‰çº¹ç†ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">removeAllTextures</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//æ¸…é™¤æœªè¢«å¤–éƒ¨ä½¿ç”¨çš„çº¹ç†ã€‚æ€ä¹ˆçŸ¥é“æœªä½¿ç”¨å‘¢ï¼Ÿå› ä¸ºåœ¨Cocos2d-xä¸­ä½¿ç”¨â€œå¼•ç”¨è®¡æ•°å™¨â€æ¥ç®¡ç†å„ç§èµ„æºçš„ä½¿ç”¨æƒ…å†µï¼Œçº¹ç†ä¹Ÿä¸ä¾‹å¤–ã€‚åœ¨èµ„æºç±»æ„é€ æ—¶ï¼Œçº¹ç†çš„è®¡æ•°å™¨å€¼ä¸º0ï¼Œä½†ç”±CCTextureCacheæ¥åˆ›å»ºå®Œæˆåï¼Œä¼šå¯¹çº¹ç†çš„èµ„æºè®¡æ•°å™¨åšåŠ 1æ“ä½œä»¥é€šçŸ¥çº¹ç†è¯´â€œä½ ç°åœ¨è¢«æˆ‘å ç”¨å‘¢â€ã€‚å¦‚æœçº¹ç†è¢«å¤–éƒ¨ä½¿ç”¨ï¼Œåº”è¯¥å†æ¬¡è°ƒç”¨å…¶èµ„æºè®¡æ•°å™¨åšåŠ 1æ“ä½œï¼Œé€€å‡ºä½¿ç”¨æ—¶åšå‡1æ“ä½œé€šçŸ¥å…¶â€œæˆ‘ç°åœ¨ä¸ç”¨ä½ äº†â€ã€‚æ‰€ä»¥è¿™é‡Œåªéœ€è¦éå†ä¸‹è®¡æ•°å™¨å€¼ä¸º1çš„çº¹ç†å³æœªè¢«å¤–éƒ¨ä½¿ç”¨çš„çº¹ç†è¿›è¡Œé‡Šæ”¾å³å¯ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">removeUnusedTextures</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç§»é™¤ä¸€ä¸ªçº¹ç†</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">removeTexture</span><span class="params">(CCTexture2D* texture)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç”±å­—å…¸æŸ¥è¯¢å…³é”®å­—æ‰¾åˆ°ç›¸åº”çº¹ç†å¹¶ç§»é™¤ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">removeTextureForKey</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *textureKeyName)</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//æ‰“å°å‡ºå½“å‰ç®¡ç†çš„çº¹ç†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç°åœ¨çº¹ç†å ç”¨çš„å†…å­˜å’Œæ€»çš„çº¹ç†å†…å­˜ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dumpCachedTextureInfo</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> CC_SUPPORT_PVRTC</span></span><br><span class="line"><span class="comment">//å¦‚æœå¼€å¯æ”¯æŒPVRçš„å‹ç¼©æ ¼å¼ï¼Œè¿™é‡Œæä¾›åŠ è½½PVRå‹ç¼©æ–‡ä»¶ç”Ÿæˆçº¹ç†çš„å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">//å‚1:PVRå‹ç¼©æ–‡ä»¶å</span></span><br><span class="line"><span class="comment">//å‚2:å‹ç¼©è´¨é‡å‚æ•°ï¼Œåªèƒ½è®¾ä¸º2æˆ–4ï¼Œ4æ¯”2è´¨é‡é«˜ï¼Œä½†å‹ç¼©æ¯”ä½ã€‚2åˆ™ç›¸åã€‚</span></span><br><span class="line"><span class="comment">//å‚3:æ˜¯å¦æœ‰Alphaé€šé“ã€‚è¿™é‡Œä¼šæ ¹æ®æ˜¯å¦æœ‰ALPHAé€šé“ä»¥ç”Ÿæˆç›¸åº”çš„é»˜è®¤çº¹ç†æ ¼å¼ã€‚</span></span><br><span class="line"><span class="comment">//å‚4:å›¾ç‰‡å¿…é¡»æ˜¯2çš„å¹‚æ¬¡æ–¹å¤§å°çš„æ­£æ–¹å½¢ï¼Œæ‰€ä»¥è¿™é‡Œåªéœ€è¦å¡«å†™ä¸€ä¸‹å®½åº¦ï¼Œä¹Ÿå°±æ˜¯å›¾ç‰‡å¤§å°ã€‚</span></span><br><span class="line">    <span class="function">CCTexture2D* <span class="title">addPVRTCImage</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* fileimage, <span class="type">int</span> bpp, <span class="type">bool</span> hasAlpha, <span class="type">int</span> width)</span></span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CC_SUPPORT_PVRTC</span></span></span><br><span class="line"> </span><br><span class="line">   <span class="comment">//åŠ è½½æ™®é€šçš„PVRå›¾ç‰‡æ–‡ä»¶ç”Ÿæˆçº¹ç†ã€‚</span></span><br><span class="line">    <span class="function">CCTexture2D* <span class="title">addPVRImage</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* filename)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å¦‚æœCC_ENABLE_CACHE_TEXTURE_DATAå®å®šä¹‰ä¸ºå¯ç”¨ï¼ˆå³å€¼ä¸º1ï¼‰ï¼Œåˆ™è°ƒç”¨æ­¤å‡½æ•°ä¼šå°†æ‰€æœ‰çš„çº¹ç†éƒ½é¢„åŠ è½½è¿›å†…å­˜ç”Ÿæˆç›¸åº”çº¹ç†ã€‚</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">reloadAllTextures</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å¦‚æœå®šä¹‰äº†CC_ENABLE_CACHE_TEXTURE_DATAï¼Œè¿™é‡Œå®šä¹‰ä¸€ä¸ªæ–°çš„ç±»</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ENABLE_CACHE_TEXTURE_DATA</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ–°å®šä¹‰çš„ç±»åç§°ä¸ºVolatileTextureï¼Œæ„æ€æ˜¯å¤šå˜çº¹ç†ã€‚è¿™é‡Œä»£è¡¨äº†å¤šç§æ•°æ®æºç”Ÿæˆçš„çº¹ç†çš„ç®¡ç†å™¨ã€‚</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VolatileTexture</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è¿™é‡Œå£°æ˜äº†ä¸€ä¸ªæšä¸¾ï¼Œä»£è¡¨äº†å¤šå˜çº¹ç†å¯¹åº”çš„å‡ ç§æ•°æ®æºç±»å‹</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123;</span><br><span class="line">    kInvalid = ,<span class="comment">//æ— æ•ˆæœªåŠ è½½ä»»ä½•æ•°æ®çš„çŠ¶æ€</span></span><br><span class="line">    kImageFile,  <span class="comment">//å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">    kImageData,  <span class="comment">//å†…å­˜ä¸­çš„å›¾ç‰‡æ•°æ®</span></span><br><span class="line">    kString,     <span class="comment">//å­—ç¬¦ä¸²</span></span><br><span class="line">    kImage,      <span class="comment">//å›¾ç‰‡å¯¹è±¡(CCImage)</span></span><br><span class="line">&#125;ccCachedImageType;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//æ„é€ </span></span><br><span class="line"><span class="built_in">VolatileTexture</span>(CCTexture2D *t);</span><br><span class="line"><span class="comment">//ææ„</span></span><br><span class="line">    ~<span class="built_in">VolatileTexture</span>();</span><br><span class="line">     <span class="comment">//é™æ€å‡½æ•°ï¼šé€šè¿‡å›¾ç‰‡æ–‡ä»¶ç”Ÿæˆçš„çº¹ç†åŠç›¸å…³ä¿¡æ¯ç”Ÿæˆä¸€ä¸ªå¤šå˜çº¹ç†å¹¶å°†å…¶æŒ‡é’ˆæ”¾å…¥å®¹å™¨ã€‚</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">addImageTexture</span><span class="params">(CCTexture2D *tt, <span class="type">const</span> <span class="type">char</span>* imageFileName, CCImage::EImageFormat format)</span></span>;</span><br><span class="line"><span class="comment">//é™æ€å‡½æ•°ï¼šé€šè¿‡å­—ç¬¦ä¸²ç”Ÿæˆçš„çº¹ç†åŠç›¸å…³ä¿¡æ¯ç”Ÿæˆä¸€ä¸ªå¤šå˜çº¹ç†å¹¶å°†å…¶æŒ‡é’ˆæ”¾å…¥å®¹å™¨ã€‚</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">addStringTexture</span><span class="params">(CCTexture2D *tt, <span class="type">const</span> <span class="type">char</span>* text, <span class="type">const</span> CCSize&amp; dimensions, CCTextAlignment alignment,</span></span></span><br><span class="line"><span class="params"><span class="function">                                 CCVerticalTextAlignment vAlignment, <span class="type">const</span> <span class="type">char</span> *fontName, <span class="type">float</span> fontSize)</span></span>;</span><br><span class="line">    <span class="comment">//é€šè¿‡å›¾ç‰‡æ•°æ®ç”Ÿæˆçš„çº¹ç†åŠç›¸å…³ä¿¡æ¯ç”Ÿæˆä¸€ä¸ªå¤šå˜çº¹ç†å¹¶å°†å…¶æŒ‡é’ˆæ”¾å…¥å®¹å™¨ã€‚</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">addDataTexture</span><span class="params">(CCTexture2D *tt, <span class="type">void</span>* data, CCTexture2DPixelFormat pixelFormat, <span class="type">const</span> CCSize&amp; contentSize)</span></span>;</span><br><span class="line"><span class="comment">//é€šè¿‡å›¾ç‰‡å¯¹è±¡ç”Ÿæˆçš„çº¹ç†åŠç›¸å…³ä¿¡æ¯ç”Ÿæˆä¸€ä¸ªå¤šå˜çº¹ç†å¹¶å°†å…¶æŒ‡é’ˆæ”¾å…¥å®¹å™¨ã€‚</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">addCCImage</span><span class="params">(CCTexture2D *tt, CCImage *image)</span></span>;</span><br><span class="line">    <span class="comment">//é€šè¿‡çº¹ç†æŒ‡é’ˆå‚æ•°ä»å®¹å™¨ä¸­åˆ é™¤å¯¹åº”çš„å¤šå˜çº¹ç†</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">removeTexture</span><span class="params">(CCTexture2D *t)</span></span>;</span><br><span class="line"><span class="comment">//é‡æ–°è½½å…¥æ‰€æœ‰çš„çº¹ç†</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">reloadAllTextures</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//é™æ€å¤šå˜çº¹ç†æŒ‡é’ˆå®¹å™¨ï¼Œç”¨æ¥å­˜å‚¨æ‰€æœ‰çš„å¤šå˜çº¹ç†å¯¹è±¡æŒ‡é’ˆã€‚</span></span><br><span class="line"><span class="type">static</span> std::list&lt;VolatileTexture*&gt; textures;</span><br><span class="line"><span class="comment">//æ˜¯å¦æ­£åœ¨è¿›è¡Œå…¨éƒ¨é‡æ–°è½½å…¥</span></span><br><span class="line">    <span class="type">static</span> <span class="type">bool</span> isReloading;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//é€šè¿‡çº¹ç†æŒ‡é’ˆå‚æ•°ä»å®¹å™¨æ‰¾åˆ°å¯¹åº”çš„å¤šå˜çº¹ç†å¯¹è±¡æŒ‡é’ˆ</span></span><br><span class="line">    <span class="function"><span class="type">static</span> VolatileTexture* <span class="title">findVolotileTexture</span><span class="params">(CCTexture2D *tt)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">//ä¸å½“å‰å¤šå˜çº¹ç†å¯¹åº”çš„çº¹ç†æŒ‡é’ˆ</span></span><br><span class="line">    CCTexture2D *texture;</span><br><span class="line">    <span class="comment">//å¯¹åº”çš„å›¾ç‰‡å¯¹è±¡</span></span><br><span class="line">    CCImage *uiImage;</span><br><span class="line"><span class="comment">//æ•°æ®æºç±»å‹</span></span><br><span class="line">    ccCachedImageType m_eCashedImageType;</span><br><span class="line"><span class="comment">//çº¹ç†æ•°æ®æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">void</span> *m_pTextureData;</span><br><span class="line"><span class="comment">//çº¹ç†çš„å®é™…å¤§å°</span></span><br><span class="line">CCSize m_TextureSize;</span><br><span class="line"><span class="comment">//çº¹ç†çš„åƒç´ æ ¼å¼</span></span><br><span class="line">    CCTexture2DPixelFormat m_PixelFormat;</span><br><span class="line"><span class="comment">//å¯¹åº”çš„å›¾ç‰‡åç§°</span></span><br><span class="line">std::string m_strFileName;</span><br><span class="line"><span class="comment">//å›¾ç‰‡çš„åƒç´ æ ¼å¼</span></span><br><span class="line">    CCImage::EImageFormat m_FmtImage;</span><br><span class="line"><span class="comment">//å›¾ç‰‡çš„å¤§å°</span></span><br><span class="line">    CCSize          m_size;</span><br><span class="line">    <span class="comment">//æ¨ªå‘æ–‡å­—çš„å¯¹é½æ–¹å¼</span></span><br><span class="line">CCTextAlignment m_alignment;</span><br><span class="line"> <span class="comment">//çºµå‘æ–‡å­—çš„å¯¹é½æ–¹å¼</span></span><br><span class="line">CCVerticalTextAlignment m_vAlignment;</span><br><span class="line"><span class="comment">//å­—ä½“åç§°</span></span><br><span class="line">std::string     m_strFontName;</span><br><span class="line"><span class="comment">//æ–‡å­—</span></span><br><span class="line">std::string     m_strText;</span><br><span class="line"><span class="comment">//å­—ä½“å¤§å°</span></span><br><span class="line">    <span class="type">float</span>           m_fFontSize;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">NS_CC_END</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//__CCTEXTURE_CACHE_H__</span></span></span><br></pre></td></tr></table></figure>
<p><code>CCTextureCache.cpp:</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCTextureCache.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCTexture2D.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ccMacros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCDirector.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;platform/platform.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;platform/CCFileUtils.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;platform/CCThread.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;platform/CCImage.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;support/ccUtils.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CCScheduler.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cocoa/CCString.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;semaphore.h&gt;</span></span></span><br><span class="line"><span class="comment">//ä½¿ç”¨æ ‡å‡†åº“å‘½åç©ºé—´</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//ä½¿ç”¨Cocos2då‘½åç©ºé—´</span></span><br><span class="line">NS_CC_BEGIN</span><br><span class="line"><span class="comment">//å¼‚æ­¥åŠ è½½æ‰€ç”¨çš„æ¶ˆæ¯ç»“æ„</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_AsyncStruct</span></span><br><span class="line">&#123;</span><br><span class="line">    std::string          filename;<span class="comment">//æ–‡ä»¶å</span></span><br><span class="line">    CCObject                *target;  <span class="comment">//è°ƒç”¨è€…</span></span><br><span class="line">    SEL_CallFuncO        selector; <span class="comment">//è½½å›å®Œçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">&#125; AsyncStruct;</span><br><span class="line"><span class="comment">//å›¾ç‰‡ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_ImageInfo</span></span><br><span class="line">&#123;</span><br><span class="line">    AsyncStruct    *asyncStruct;    <span class="comment">//å¼‚æ­¥åŠ è½½æ¶ˆæ¯ç»“æ„</span></span><br><span class="line">    CCImage        *image;         <span class="comment">//å›¾ç‰‡æŒ‡é’ˆ</span></span><br><span class="line">    CCImage::EImageFormat imageType<span class="comment">//å›¾ç‰‡ç±»å‹</span></span><br><span class="line">&#125; ImageInfo;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//åŠ è½½å›¾ç‰‡çš„çº¿ç¨‹</span></span><br><span class="line"><span class="type">static</span> <span class="type">pthread_t</span> s_loadingThread;</span><br><span class="line"><span class="comment">//ç”¨äºè¯»å–å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—çš„çº¿ç¨‹ä¸´ç•ŒåŒº</span></span><br><span class="line"><span class="type">static</span> <span class="type">pthread_mutex_t</span>      s_asyncStructQueueMutex;</span><br><span class="line"><span class="comment">//ç”¨äºå­˜å‚¨å›¾ç‰‡ä¿¡æ¯ç»“æ„å¤„ç†çš„ä¸´ç•ŒåŒº</span></span><br><span class="line"><span class="type">static</span> <span class="type">pthread_mutex_t</span>      s_ImageInfoMutex;</span><br><span class="line"><span class="comment">//ä¿¡å·é‡æŒ‡é’ˆã€‚ä¿¡å·é‡æ˜¯å½“å‰è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹é€šä¿¡çš„ä¸€ç§æ–¹å¼ã€‚</span></span><br><span class="line"><span class="type">static</span> <span class="type">sem_t</span>* s_pSem = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">//å¤šçº¿ç¨‹åŠ è½½å›¾ç‰‡çš„æ•°é‡ã€‚</span></span><br><span class="line"><span class="type">static</span> <span class="type">unsigned</span> <span class="type">long</span> s_nAsyncRefCount = ;</span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯IOSå¹³å°ï¼Œåˆ™å®šä¹‰æ˜¯å¦ä½¿ç”¨ä¿¡å·é‡å‘½åã€‚</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_TARGET_PLATFORM == CC_PLATFORM_IOS</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> CC_ASYNC_TEXTURE_CACHE_USE_NAMED_SEMAPHORE 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> CC_ASYNC_TEXTURE_CACHE_USE_NAMED_SEMAPHORE 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//å¦‚æœä½¿ç”¨ä¿¡å·é‡å‘½åï¼Œåˆ™å®šä¹‰å‘½åçš„å­—ç¬¦ä¸²å®ï¼Œå¦åˆ™å®šä¹‰é™æ€å…¨å±€çš„ä¿¡å·é‡ç»“æ„ã€‚</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ASYNC_TEXTURE_CACHE_USE_NAMED_SEMAPHORE</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> CC_ASYNC_TEXTURE_CACHE_SEMAPHORE <span class="string">&quot;ccAsync&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    <span class="type">static</span> <span class="type">sem_t</span> s_sem;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ˜¯å¦åœ¨å½“å‰åŠ è½½çº¿ç¨‹å¤„ç†å®Œæ‰‹ä¸Šçš„æ´»å„¿å°±é€€å‡ºã€‚</span></span><br><span class="line"><span class="type">static</span> <span class="type">bool</span> need_quit = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">//å¼‚æ­¥åŠ è½½å›¾ç‰‡çš„æ¶ˆæ¯ç»“æ„æŒ‡é’ˆå®¹å™¨ï¼Œå³æ¶ˆæ¯é˜Ÿåˆ—ã€‚</span></span><br><span class="line"><span class="type">static</span> std::queue&lt;AsyncStruct*&gt;* s_pAsyncStructQueue = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">//å¼‚æ­¥å­˜å‚¨å›¾ç‰‡ä¿¡æ¯ç»“æ„æŒ‡é’ˆçš„å®¹å™¨ã€‚</span></span><br><span class="line"><span class="type">static</span> std::queue&lt;ImageInfo*&gt;*   s_pImageQueue = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">//é€šè¿‡æ–‡ä»¶æ‰©å±•åå–å¾—å›¾ç‰‡æ ¼å¼</span></span><br><span class="line"><span class="function"><span class="type">static</span> CCImage::EImageFormat <span class="title">computeImageFormatType</span><span class="params">(string&amp; filename)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CCImage::EImageFormat ret = CCImage::kFmtUnKnown;</span><br><span class="line">    <span class="comment">//JPG</span></span><br><span class="line">    <span class="keyword">if</span> ((std::string::npos != filename.<span class="built_in">find</span>(<span class="string">&quot;.jpg&quot;</span>)) || (std::string::npos != filename.<span class="built_in">find</span>(<span class="string">&quot;.jpeg&quot;</span>)))</span><br><span class="line">    &#123;</span><br><span class="line">        ret = CCImage::kFmtJpg;</span><br><span class="line">    &#125;<span class="comment">//PNG</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((std::string::npos != filename.<span class="built_in">find</span>(<span class="string">&quot;.png&quot;</span>)) || (std::string::npos != filename.<span class="built_in">find</span>(<span class="string">&quot;.PNG&quot;</span>)))</span><br><span class="line">    &#123;</span><br><span class="line">        ret = CCImage::kFmtPng;</span><br><span class="line">    &#125;<span class="comment">//TIFF</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((std::string::npos != filename.<span class="built_in">find</span>(<span class="string">&quot;.tiff&quot;</span>)) || (std::string::npos != filename.<span class="built_in">find</span>(<span class="string">&quot;.TIFF&quot;</span>)))</span><br><span class="line">    &#123;</span><br><span class="line">        ret = CCImage::kFmtTiff;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ è½½å›¾ç‰‡çš„çº¿ç¨‹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span>* <span class="title">loadImage</span><span class="params">(<span class="type">void</span>* data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    CCThread thread;</span><br><span class="line">    thread.<span class="built_in">createAutoreleasePool</span>();</span><br><span class="line">    <span class="comment">//å¤šçº¿ç¨‹åŠ è½½æ¶ˆæ¯ç»“æ„</span></span><br><span class="line">    AsyncStruct *pAsyncStruct = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//çº¿ç¨‹å°†å¤„ç†æ‰€æœ‰éšæ—¶è¦è¿›è¡Œå¤šçº¿ç¨‹åŠ è½½çš„å›¾ç‰‡ï¼Œæ‰€ä»¥ä¼šæœ‰ä¸€ä¸ªWhileå¾ªç¯ã€‚</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å½“å‰çº¿ç¨‹ç­‰å¾…ä¿¡å·é‡å˜ä¸ºéé›¶å€¼ï¼Œå¹¶å‡1ã€‚</span></span><br><span class="line">        <span class="type">int</span> semWaitRet = <span class="built_in">sem_wait</span>(s_pSem);</span><br><span class="line">         <span class="comment">//å¦‚æœä¿¡å·é‡ä¸ºè´Ÿå€¼ï¼Œæ‰“å°å‡ºé”™ä¿¡æ¯å¹¶ä¸­æ–­ã€‚</span></span><br><span class="line">        <span class="keyword">if</span>( semWaitRet &lt;  )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">CCLOG</span>( <span class="string">&quot;CCTextureCache async thread semaphore error: %s\n&quot;</span>, <span class="built_in">strerror</span>( errno ) );</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å–å¾—å…¨å±€çš„å¼‚æ­¥åŠ è½½ä¿¡æ¯ç»“æ„æŒ‡é’ˆå®¹å™¨</span></span><br><span class="line">        std::queue&lt;AsyncStruct*&gt; *pQueue = s_pAsyncStructQueue;</span><br><span class="line">         <span class="comment">//ä¸‹é¢ä»£ç ä½œä¸ºä¸´ç•ŒåŒºä¸Šé”</span></span><br><span class="line">        <span class="built_in">pthread_mutex_lock</span>(&amp;s_asyncStructQueueMutex);</span><br><span class="line">        <span class="comment">//å¦‚æœæ²¡æœ‰éœ€è¦å¼‚æ­¥åŠ è½½çš„å›¾ç‰‡</span></span><br><span class="line">        <span class="keyword">if</span> (pQueue-&gt;<span class="built_in">empty</span>())</span><br><span class="line">        &#123;</span><br><span class="line">              <span class="comment">//è§£é”ä¸´ç•ŒåŒº</span></span><br><span class="line">            <span class="built_in">pthread_mutex_unlock</span>(&amp;s_asyncStructQueueMutex);</span><br><span class="line">            <span class="comment">//å¦‚æœé€€å‡ºçº¿ç¨‹æ ‡è®°ä¸ºtrueåˆ™ä¸­æ–­é€€å‡ºï¼Œå¦åˆ™ç»§ç»­ã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (need_quit)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">              <span class="comment">//å¦‚æœæœ‰éœ€è¦å¼‚æ­¥åŠ è½½çš„å›¾ç‰‡ï¼Œåˆ™ä»é˜Ÿåˆ—ä¸­å–ç¬¬ä¸€ä¸ªæ¶ˆæ¯æŒ‡é’ˆä¿å­˜åœ¨å˜é‡pAsyncStructä¸­éšåå°†å…¶ä»é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚</span></span><br><span class="line">            pAsyncStruct = pQueue-&gt;<span class="built_in">front</span>();</span><br><span class="line">            pQueue-&gt;<span class="built_in">pop</span>();</span><br><span class="line">             <span class="comment">//è§£é”ä¸´ç•ŒåŒº</span></span><br><span class="line">            <span class="built_in">pthread_mutex_unlock</span>(&amp;s_asyncStructQueueMutex);</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="comment">//å–å¾—è¦è¿›è¡Œå¼‚æ­¥åŠ è½½çš„å›¾ç‰‡åç§°</span></span><br><span class="line">        <span class="type">const</span> <span class="type">char</span> *filename = pAsyncStruct-&gt;filename.<span class="built_in">c_str</span>();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//å–å¾—å›¾ç‰‡ç±»å‹</span></span><br><span class="line">        CCImage::EImageFormat imageType = <span class="built_in">computeImageFormatType</span>(pAsyncStruct-&gt;filename);</span><br><span class="line">         <span class="comment">//å¦‚æœä¸æ˜¯PNG,JPGæˆ–TIFFå°±ä¸æ”¯æŒäº†ã€‚æ‰“å°é”™è¯¯åè¿›è¡Œç›¸åº”å¤„ç†ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (imageType == CCImage::kFmtUnKnown)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">CCLOG</span>(<span class="string">&quot;unsupportted format %s&quot;</span>,filename);</span><br><span class="line">            <span class="keyword">delete</span> pAsyncStruct;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯æœ‰æ•ˆæ ¼å¼ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„CCImageå¯¹è±¡</span></span><br><span class="line">        CCImage *pImage = <span class="keyword">new</span> <span class="built_in">CCImage</span>();</span><br><span class="line">        <span class="comment">// ç”±æ–‡ä»¶åå’Œå›¾ç‰‡æ ¼å¼å°†å›¾ç‰‡åŠ è½½åˆ°CCImageä¸­ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (! pImage-&gt;<span class="built_in">initWithImageFileThreadSafe</span>(filename, imageType))</span><br><span class="line">        &#123;     <span class="comment">//å¦‚æœå¤±è´¥ï¼Œé‡Šæ”¾CCImageå¯¹è±¡å¹¶æ‰“å°é”™è¯¯ã€‚</span></span><br><span class="line">            <span class="keyword">delete</span> pImage;</span><br><span class="line">            <span class="built_in">CCLOG</span>(<span class="string">&quot;can not load %s&quot;</span>, filename);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// åŠ¨æ€åˆ›å»ºä¸€ä¸ªæ–°çš„å›¾ç‰‡ä¿¡æ¯ç»“æ„å¹¶å¡«å……ç›¸åº”ä¿¡æ¯</span></span><br><span class="line">        ImageInfo *pImageInfo = <span class="keyword">new</span> <span class="built_in">ImageInfo</span>();</span><br><span class="line">        pImageInfo-&gt;asyncStruct = pAsyncStruct;</span><br><span class="line">        pImageInfo-&gt;image = pImage;</span><br><span class="line">        pImageInfo-&gt;imageType = imageType;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//ä¸‹é¢ä»£ç ä½œä¸ºä¸´ç•ŒåŒºä¸Šé”</span></span><br><span class="line">        <span class="built_in">pthread_mutex_lock</span>(&amp;s_ImageInfoMutex);</span><br><span class="line">        <span class="comment">//å°†æ–°çš„å›¾ç‰‡ä¿¡æ¯æ”¾å…¥å›¾ç‰‡ä¿¡æ¯ç»“æ„å®¹å™¨ã€‚</span></span><br><span class="line">        s_pImageQueue-&gt;<span class="built_in">push</span>(pImageInfo);</span><br><span class="line">        <span class="comment">//è§£é”ä¸´ç•ŒåŒº</span></span><br><span class="line">        <span class="built_in">pthread_mutex_unlock</span>(&amp;s_ImageInfoMutex);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœé€€å‡ºå¾ªç¯ï¼Œé‡Šæ”¾ä¿¡å·é‡</span></span><br><span class="line">    <span class="keyword">if</span>( s_pSem != <span class="literal">NULL</span> )</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="meta">#<span class="keyword">if</span> CC_ASYNC_TEXTURE_CACHE_USE_NAMED_SEMAPHORE</span></span><br><span class="line">        <span class="built_in">sem_unlink</span>(CC_ASYNC_TEXTURE_CACHE_SEMAPHORE);</span><br><span class="line">        <span class="built_in">sem_close</span>(s_pSem);</span><br><span class="line">    <span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">        <span class="built_in">sem_destroy</span>(s_pSem);</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">        s_pSem = <span class="literal">NULL</span>;</span><br><span class="line">         <span class="comment">//é‡Šæ”¾å¤šçº¿ç¨‹åŠ è½½æ‰€ç”¨çš„æ¶ˆæ¯é˜Ÿåˆ—å’Œä¸ä¹‹å¯¹åº”çš„å›¾ç‰‡ä¿¡æ¯é˜Ÿåˆ—ã€‚</span></span><br><span class="line">        <span class="keyword">delete</span> s_pAsyncStructQueue;</span><br><span class="line">        <span class="keyword">delete</span> s_pImageQueue;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// å”¯ä¸€çš„å…¨å±€çº¹ç†æ•°æ®ç¼“å†²åŒºå¯¹è±¡æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">static</span> CCTextureCache *g_sharedTextureCache = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">//å–å¾—å”¯ä¸€çš„å…¨å±€çº¹ç†æ•°æ®ç¼“å†²åŒºå¯¹è±¡æŒ‡é’ˆ</span></span><br><span class="line"><span class="function">CCTextureCache * <span class="title">CCTextureCache::sharedTextureCache</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!g_sharedTextureCache)</span><br><span class="line">    &#123;</span><br><span class="line">        g_sharedTextureCache = <span class="keyword">new</span> <span class="built_in">CCTextureCache</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> g_sharedTextureCache;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line">CCTextureCache::<span class="built_in">CCTextureCache</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">CCAssert</span>(g_sharedTextureCache == <span class="literal">NULL</span>, <span class="string">&quot;Attempted to allocate a second instance of a singleton.&quot;</span>);</span><br><span class="line">      <span class="comment">//ç”Ÿæˆä¸€ä¸ªå­—å…¸</span></span><br><span class="line">    m_pTextures = <span class="keyword">new</span> <span class="built_in">CCDictionary</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">CCTextureCache::~<span class="built_in">CCTextureCache</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">CCLOGINFO</span>(<span class="string">&quot;Cocos2d: deallocing CCTextureCache.&quot;</span>);</span><br><span class="line">    need_quit = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (s_pSem != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">sem_post</span>(s_pSem);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é‡Šæ”¾å­—å…¸</span></span><br><span class="line">    <span class="built_in">CC_SAFE_RELEASE</span>(m_pTextures);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡Šæ”¾å”¯ä¸€çš„å…¨å±€çº¹ç†æ•°æ®ç¼“å†²åŒºå¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTextureCache::purgeSharedTextureCache</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">CC_SAFE_RELEASE_NULL</span>(g_sharedTextureCache);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—å½“å‰ç±»æè¿°</span></span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">CCTextureCache::description</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> CCString::<span class="built_in">createWithFormat</span>(<span class="string">&quot;&lt;CCTextureCache | Number of textures = %u&gt;&quot;</span>, m_pTextures-&gt;<span class="built_in">count</span>())-&gt;<span class="built_in">getCString</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å–å¾—å½“å‰å­—å…¸çš„å¿«ç…§</span></span><br><span class="line"><span class="function">CCDictionary* <span class="title">CCTextureCache::snapshotTextures</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//åŠ¨æ€åˆ›å»ºä¸€ä¸ªæ–°çš„å­—å…¸</span></span><br><span class="line">    CCDictionary* pRet = <span class="keyword">new</span> <span class="built_in">CCDictionary</span>();</span><br><span class="line">CCDictElement* pElement = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">//éå†åŸæ¥å­—å…¸å°†æ•°æ®å¡«å……åˆ°æ–°å­—å…¸ä¸­</span></span><br><span class="line">    <span class="built_in">CCDICT_FOREACH</span>(m_pTextures, pElement)</span><br><span class="line">    &#123;</span><br><span class="line">        pRet-&gt;<span class="built_in">setObject</span>(pElement-&gt;<span class="built_in">getObject</span>(), pElement-&gt;<span class="built_in">getStrKey</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pRet;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä½¿ç”¨å¤šçº¿ç¨‹è½½å…¥å›¾ç‰‡ã€‚</span></span><br><span class="line"><span class="comment">//å‚1:å›¾ç‰‡ç›¸å¯¹è·¯å¾„åã€‚</span></span><br><span class="line"><span class="comment">//å‚2:è½½å…¥å®Œæˆåè¦é€šçŸ¥çš„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">//å‚3:è½½å…¥å®Œæˆåè¦é€šçŸ¥å¯¹è±¡è°ƒç”¨çš„å‡½æ•°ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTextureCache::addImageAsync</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *path, CCObject *target, SEL_CallFuncO selector)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ–‡ä»¶åä¸èƒ½ä¸ºç©º</span></span><br><span class="line">    <span class="built_in">CCAssert</span>(path != <span class="literal">NULL</span>, <span class="string">&quot;TextureCache: fileimage MUST not be NULL&quot;</span>);</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªçº¹ç†æŒ‡é’ˆå¹¶ç½®ç©º</span></span><br><span class="line">    CCTexture2D *texture = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//åˆ›å»ºå­—ç¬¦ä¸²pathKeyåšä¸ºå­—å…¸æŸ¥è¯¢å…³é”®å­—ã€‚</span></span><br><span class="line">    std::string pathKey = path;</span><br><span class="line"><span class="comment">//å–å¾—å›¾ç‰‡æ‰€åœ¨ä½ç½®çš„å…¨è·¯å¾„å</span></span><br><span class="line">pathKey = CCFileUtils::<span class="built_in">sharedFileUtils</span>()-&gt;<span class="built_in">fullPathFromRelativePath</span>(pathKey.<span class="built_in">c_str</span>());</span><br><span class="line"><span class="comment">//å…ˆæŸ¥è¯¢ä¸€ä¸‹æ˜¯å¦å­—å…¸é‡Œå·²ç»æœ‰äº†æ­¤çº¹ç†ã€‚</span></span><br><span class="line">    texture = (CCTexture2D*)m_pTextures-&gt;<span class="built_in">objectForKey</span>(pathKey.<span class="built_in">c_str</span>());</span><br><span class="line"> </span><br><span class="line">    std::string fullpath = pathKey;</span><br><span class="line"><span class="comment">//å¦‚æœå·²ç»æœ‰äº†ï¼Œåˆ™ç›´æ¥æŠŠçº¹ç†åšä¸ºå‚æ•°è°ƒç”¨è¦é€šçŸ¥çš„å¯¹è±¡çš„å‡½æ•°ã€‚</span></span><br><span class="line"><span class="keyword">if</span> (texture != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (target &amp;&amp; selector)</span><br><span class="line">        &#123;</span><br><span class="line">            (target-&gt;*selector)(texture);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨å¤šçº¿ç¨‹è½½å…¥ï¼Œåˆ›å»ºä¿¡å·é‡å¹¶è¿›è¡Œç›¸åº”åˆå§‹åŒ–ã€‚</span></span><br><span class="line"><span class="keyword">if</span> (s_pSem == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ä¿¡å·é‡å‘½åï¼Œå¦‚æœæ˜¯ï¼Œåˆ›å»ºä¸€ä¸ªä¿¡å·é‡è¿”å›å…¶åœ°å€ç»™æŒ‡é’ˆs_pSemã€‚</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ASYNC_TEXTURE_CACHE_USE_NAMED_SEMAPHORE</span></span><br><span class="line">        s_pSem = <span class="built_in">sem_open</span>(CC_ASYNC_TEXTURE_CACHE_SEMAPHORE, O_CREAT, , );</span><br><span class="line">        <span class="keyword">if</span>( s_pSem == SEM_FAILED )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">CCLOG</span>( <span class="string">&quot;CCTextureCache async thread semaphore init error: %s\n&quot;</span>, <span class="built_in">strerror</span>( errno ) );</span><br><span class="line">            s_pSem = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">         <span class="comment">//å¦‚æœä¸ä½¿ç”¨ä¿¡å·é‡å‘½åï¼Œç›´æ¥ç”¨sem_initæ¥åˆå§‹åŒ–ä¿¡å·é‡å¯¹è±¡s_semã€‚</span></span><br><span class="line">        <span class="type">int</span> semInitRet = <span class="built_in">sem_init</span>(&amp;s_sem, , );</span><br><span class="line">        <span class="keyword">if</span>( semInitRet &lt;  )</span><br><span class="line">        &#123;</span><br><span class="line">              <span class="comment">//å¦‚æœå¤±è´¥ï¼Œæ‰“å°å‡ºé”™å¹¶é€€å‡ºã€‚</span></span><br><span class="line">            <span class="built_in">CCLOG</span>( <span class="string">&quot;CCTextureCache async thread semaphore init error: %s\n&quot;</span>, <span class="built_in">strerror</span>( errno ) );</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="comment">//å¦‚æœæˆåŠŸï¼Œå°†ä¿¡å·é‡å¯¹è±¡åœ°å€ç»™æŒ‡é’ˆs_pSemã€‚</span></span><br><span class="line">        s_pSem = &amp;s_sem;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> <span class="comment">//å»ºç«‹åŠ è½½æ¶ˆæ¯é˜Ÿåˆ—</span></span><br><span class="line">        s_pAsyncStructQueue = <span class="keyword">new</span> <span class="built_in">queue</span>&lt;AsyncStruct*&gt;();</span><br><span class="line">        <span class="comment">//å»ºç«‹åŠ è½½çš„å›¾ç‰‡ä¿¡æ¯ç»“æ„é˜Ÿåˆ—</span></span><br><span class="line">        s_pImageQueue = <span class="keyword">new</span> <span class="built_in">queue</span>&lt;ImageInfo*&gt;();</span><br><span class="line">        <span class="comment">//çº¿ç¨‹é”åˆå§‹åŒ–</span></span><br><span class="line">        <span class="built_in">pthread_mutex_init</span>(&amp;s_asyncStructQueueMutex, <span class="literal">NULL</span>);</span><br><span class="line">        <span class="built_in">pthread_mutex_init</span>(&amp;s_ImageInfoMutex, <span class="literal">NULL</span>);</span><br><span class="line"> <span class="comment">//åˆ›å»ºåŠ è½½çº¿ç¨‹ã€‚</span></span><br><span class="line">        <span class="built_in">pthread_create</span>(&amp;s_loadingThread, <span class="literal">NULL</span>, loadImage, <span class="literal">NULL</span>);</span><br><span class="line">         <span class="comment">//å°†é€€å‡ºæŒ‡ä»¤è®¾ä¸ºfalseã€‚</span></span><br><span class="line">        need_quit = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å¤šçº¿ç¨‹åŠ è½½å›¾ç‰‡çš„å¼•ç”¨è®¡æ•°å™¨å¦‚æœä¸º0ï¼Œ</span></span><br><span class="line">    <span class="keyword">if</span> ( == s_nAsyncRefCount)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="comment">//å°†addImageAsyncCallBackå‡½æ•°åŠ å…¥æ˜¾ç¤ºè®¾å¤‡ä¸Šçš„å›è°ƒå‡½æ•°å¤„ç†å™¨ä¸­ã€‚</span></span><br><span class="line">CCDirector::<span class="built_in">sharedDirector</span>()-&gt;<span class="built_in">getScheduler</span>()-&gt;<span class="built_in">scheduleSelector</span>(<span class="built_in">schedule_selector</span>(CCTextureCache::addImageAsyncCallBack), <span class="keyword">this</span>, , <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//è®¡æ•°å™¨åŠ 1</span></span><br><span class="line">    ++s_nAsyncRefCount;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">    <span class="keyword">if</span> (target)</span><br><span class="line">    &#123;</span><br><span class="line">        target-&gt;<span class="built_in">retain</span>();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// äº§ç”Ÿä¸€ä¸ªæ–°çš„åŠ è½½æ¶ˆæ¯ï¼Œæ”¾å…¥åŠ è½½æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚</span></span><br><span class="line">    AsyncStruct *data = <span class="keyword">new</span> <span class="built_in">AsyncStruct</span>();</span><br><span class="line">    data-&gt;filename = fullpath.<span class="built_in">c_str</span>();</span><br><span class="line">    data-&gt;target = target;</span><br><span class="line">    data-&gt;selector = selector;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// å½“ç„¶ï¼Œæ”¾å…¥æ—¶å¾—é”ä¸€ä¸‹ï¼Œæ”¾å…¥åå†è§£é”ã€‚</span></span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;s_asyncStructQueueMutex);</span><br><span class="line">    s_pAsyncStructQueue-&gt;<span class="built_in">push</span>(data);</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;s_asyncStructQueueMutex);</span><br><span class="line"><span class="comment">//ç»™ä¿¡å·é‡åŠ 1ï¼Œsem_postæ˜¯åŸå­æ“ä½œï¼Œå³å¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨å¹¶ä¸ä¼šäº§ç”Ÿå†²çªã€‚</span></span><br><span class="line">    <span class="built_in">sem_post</span>(s_pSem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¤šçº¿ç¨‹åŠ è½½å›¾ç‰‡æ—¶çš„å›è°ƒå‡½æ•°ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTextureCache::addImageAsyncCallBack</span><span class="params">(<span class="type">float</span> dt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å–å¾—å¤šçº¿ç¨‹åŠ è½½çš„å›¾ç‰‡ä¿¡æ¯é˜Ÿåˆ—</span></span><br><span class="line">    std::queue&lt;ImageInfo*&gt; *imagesQueue = s_pImageQueue;</span><br><span class="line">    <span class="comment">//ä¸‹é¢ä»£ç ä½œä¸ºä¸´ç•ŒåŒºä¸Šé”</span></span><br><span class="line"><span class="built_in">pthread_mutex_lock</span>(&amp;s_ImageInfoMutex);</span><br><span class="line"><span class="comment">//å¦‚æœå›¾ç‰‡ä¿¡æ¯é˜Ÿåˆ—ä¸ºç©ºç›´æ¥è§£é”ï¼Œå¦åˆ™è¿›è¡Œå¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span> (imagesQueue-&gt;<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">pthread_mutex_unlock</span>(&amp;s_ImageInfoMutex);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">     <span class="comment">//å–å‡ºå›¾ç‰‡ä¿¡æ¯é˜Ÿåˆ—çš„å¤´ä¸€ä¸ªä¿¡æ¯ä»é˜Ÿåˆ—ä¸­å¼¹å‡ºã€‚</span></span><br><span class="line">        ImageInfo *pImageInfo = imagesQueue-&gt;<span class="built_in">front</span>();</span><br><span class="line">        imagesQueue-&gt;<span class="built_in">pop</span>();</span><br><span class="line">        <span class="comment">//è§£é”ä¸´ç•ŒåŒº</span></span><br><span class="line">        <span class="built_in">pthread_mutex_unlock</span>(&amp;s_ImageInfoMutex);</span><br><span class="line">        <span class="comment">//å–å¾—ä¿¡æ¯ä¸­çš„åŠ è½½æ¶ˆæ¯ã€‚</span></span><br><span class="line">        AsyncStruct *pAsyncStruct = pImageInfo-&gt;asyncStruct;</span><br><span class="line">         <span class="comment">//å–å¾—å›¾ç‰‡ä¿¡æ¯ä¸­çš„CCImageæŒ‡é’ˆã€‚</span></span><br><span class="line">        CCImage *pImage = pImageInfo-&gt;image;</span><br><span class="line">         <span class="comment">//å–å¾—åŠ è½½å®Œæˆåè¦é€šçŸ¥çš„å¯¹è±¡ä»¥åŠè¦è°ƒç”¨çš„å‡½æ•°ã€‚</span></span><br><span class="line">        CCObject *target = pAsyncStruct-&gt;target;</span><br><span class="line">        SEL_CallFuncO selector = pAsyncStruct-&gt;selector;</span><br><span class="line">         <span class="comment">//å–å¾—å›¾ç‰‡æ–‡ä»¶å</span></span><br><span class="line">        <span class="type">const</span> <span class="type">char</span>* filename = pAsyncStruct-&gt;filename.<span class="built_in">c_str</span>();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// æ–°å»ºä¸€ä¸ªçº¹ç†ã€‚</span></span><br><span class="line">        CCTexture2D *texture = <span class="keyword">new</span> <span class="built_in">CCTexture2D</span>();</span><br><span class="line">        <span class="comment">//ä½¿ç”¨CCImageæŒ‡é’ˆpImageæ¥åˆå§‹åŒ–çº¹ç†ç”ŸæˆOpenGLè´´å›¾ã€‚</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 0 <span class="comment">//<span class="doctag">TODO:</span> (CC_TARGET_PLATFORM == CC_PLATFORM_IOS)</span></span></span><br><span class="line">        texture-&gt;<span class="built_in">initWithImage</span>(pImage, kCCResolutioniPhone);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">        texture-&gt;<span class="built_in">initWithImage</span>(pImage);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ENABLE_CACHE_TEXTURE_DATA</span></span><br><span class="line">       <span class="comment">//ä½¿ç”¨çº¹ç†å’Œå›¾ç‰‡ä¿¡æ¯ç”Ÿæˆç›¸åº”çš„å¯å˜çº¹ç†</span></span><br><span class="line">       VolatileTexture::<span class="built_in">addImageTexture</span>(texture, filename, pImageInfo-&gt;imageType);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">        <span class="comment">//ä½¿ç”¨æ–‡ä»¶ååšä¸ºæŸ¥è¯¢å…³é”®å­—å°†çº¹ç†å­˜å…¥å­—å…¸</span></span><br><span class="line">        m_pTextures-&gt;<span class="built_in">setObject</span>(texture, filename);</span><br><span class="line">        texture-&gt;<span class="built_in">autorelease</span>();</span><br><span class="line">        <span class="comment">//è°ƒç”¨é€šçŸ¥ç›®æ ‡çš„ç›¸åº”å‡½æ•°ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (target &amp;&amp; selector)</span><br><span class="line">        &#123;</span><br><span class="line">            (target-&gt;*selector)(texture);</span><br><span class="line">            target-&gt;<span class="built_in">release</span>();</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="comment">//é‡Šæ”¾CCImageå¯¹è±¡ã€‚</span></span><br><span class="line">        pImage-&gt;<span class="built_in">release</span>();</span><br><span class="line">         <span class="comment">//é‡Šæ”¾newå‡ºæ¥çš„æ¶ˆæ¯ç»“æ„å’Œå›¾ç‰‡ä¿¡æ¯ç»“æ„ã€‚</span></span><br><span class="line">        <span class="keyword">delete</span> pAsyncStruct;</span><br><span class="line">        <span class="keyword">delete</span> pImageInfo;</span><br><span class="line">        <span class="comment">//å¤šçº¿ç¨‹åŠ è½½å¼•ç”¨è®¡æ•°å™¨å‡1ï¼Œ</span></span><br><span class="line">        --s_nAsyncRefCount;</span><br><span class="line">        <span class="keyword">if</span> ( == s_nAsyncRefCount)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="comment">//ä»æ˜¾ç¤ºè®¾å¤‡ä¸Šçš„å›è°ƒå‡½æ•°å¤„ç†å™¨ä¸­ç§»é™¤åŠ è½½å›è°ƒå‡½æ•°ã€‚</span></span><br><span class="line">CCDirector::<span class="built_in">sharedDirector</span>()-&gt;<span class="built_in">getScheduler</span>()-&gt;<span class="built_in">unscheduleSelector</span>(<span class="built_in">schedule_selector</span>(CCTextureCache::addImageAsyncCallBack), <span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ è½½ä¸€ä¸ªå›¾ç‰‡ç”Ÿæˆçº¹ç†ã€‚</span></span><br><span class="line"><span class="function">CCTexture2D * <span class="title">CCTextureCache::addImage</span><span class="params">(<span class="type">const</span> <span class="type">char</span> * path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å‚æ•°æœ‰æ•ˆæ€§åˆ¤æ–­</span></span><br><span class="line">    <span class="built_in">CCAssert</span>(path != <span class="literal">NULL</span>, <span class="string">&quot;TextureCache: fileimage MUST not be NULL&quot;</span>);</span><br><span class="line"><span class="comment">//å®šä¹‰çº¹ç†æŒ‡é’ˆå˜é‡å¹¶ç½®ç©º</span></span><br><span class="line">    CCTexture2D * texture = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//éå¤šçº¿ç¨‹ï¼Œæ•…å±è”½ï¼Œå¦‚æœaddImageAsyncåœ¨å…¶å®ƒçº¿ç¨‹è°ƒç”¨æ­¤å‡½æ•°ï¼Œåˆ™æ‰“å¼€è¿™æ®µä»£ç ã€‚</span></span><br><span class="line">    <span class="comment">//pthread_mutex_lock(m_pDictLock);</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//åˆ›å»ºå­—ç¬¦ä¸²pathKeyåšä¸ºå­—å…¸æŸ¥è¯¢å…³é”®å­—ã€‚</span></span><br><span class="line">    std::string pathKey = path;</span><br><span class="line"><span class="comment">//å–å¾—å›¾ç‰‡æ‰€åœ¨ä½ç½®çš„å…¨è·¯å¾„å</span></span><br><span class="line">pathKey = CCFileUtils::<span class="built_in">sharedFileUtils</span>()-&gt;<span class="built_in">fullPathFromRelativePath</span>(pathKey.<span class="built_in">c_str</span>());</span><br><span class="line">    <span class="comment">//ç”¨pathKeyæŸ¥è¯¢å­—å…¸ä¸­æ˜¯å¦æœ‰æ­¤çº¹ç†ã€‚</span></span><br><span class="line">    texture = (CCTexture2D*)m_pTextures-&gt;<span class="built_in">objectForKey</span>(pathKey.<span class="built_in">c_str</span>());</span><br><span class="line"><span class="comment">//æ–°å»ºå­—ç¬¦ä¸²fullpathå­˜å‚¨å…¨è·¯å¾„ã€‚</span></span><br><span class="line">std::string fullpath = pathKey;</span><br><span class="line"><span class="comment">//å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œ</span></span><br><span class="line">    <span class="keyword">if</span>( ! texture )</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å°†æ–‡ä»¶è·¯å¾„æ”¾å…¥æ–°å­—ç¬¦ä¸²lowerCaseã€‚å¹¶å°†å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å­—æ¯è½¬ä¸ºå°å†™ã€‚</span></span><br><span class="line">        <span class="function">std::string <span class="title">lowerCase</span><span class="params">(path)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">int</span> i = ; i &lt; lowerCase.<span class="built_in">length</span>(); ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            lowerCase[i] = <span class="built_in">tolower</span>(lowerCase[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line"> <span class="comment">//å¦‚æœå­—ç¬¦ä¸²èƒ½å¤Ÿæ‰¾åˆ°&quot;.pvr&quot;ï¼Œåˆ™ä»£è¡¨æ˜¯pvræ–‡ä»¶ã€‚è°ƒç”¨ç›¸åº”å‡½æ•°å°†å…¶è½½å…¥ã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (std::string::npos != lowerCase.<span class="built_in">find</span>(<span class="string">&quot;.pvr&quot;</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                texture = <span class="keyword">this</span>-&gt;<span class="built_in">addPVRImage</span>(fullpath.<span class="built_in">c_str</span>());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//å¦åˆ™åˆ†åˆ«å–å¾—æ–‡ä»¶çš„æ ¼å¼ã€‚</span></span><br><span class="line">                CCImage::EImageFormat eImageFormat = CCImage::kFmtUnKnown;</span><br><span class="line">                <span class="keyword">if</span> (std::string::npos != lowerCase.<span class="built_in">find</span>(<span class="string">&quot;.png&quot;</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    eImageFormat = CCImage::kFmtPng;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (std::string::npos != lowerCase.<span class="built_in">find</span>(<span class="string">&quot;.jpg&quot;</span>) || std::string::npos != lowerCase.<span class="built_in">find</span>(<span class="string">&quot;.jpeg&quot;</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    eImageFormat = CCImage::kFmtJpg;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (std::string::npos != lowerCase.<span class="built_in">find</span>(<span class="string">&quot;.tif&quot;</span>) || std::string::npos != lowerCase.<span class="built_in">find</span>(<span class="string">&quot;.tiff&quot;</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    eImageFormat = CCImage::kFmtTiff;</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">                  <span class="comment">//åˆ›å»ºCCImageå¯¹è±¡ï¼Œä»æ–‡ä»¶ä¸­è¯»å–æ–‡ä»¶çš„æ•°æ®å¹¶åˆå§‹åŒ–CCImageå¯¹è±¡ã€‚</span></span><br><span class="line">                CCImage image;</span><br><span class="line">                <span class="comment">//å–å¾—æ–‡ä»¶å¤§å°</span></span><br><span class="line">                <span class="type">unsigned</span> <span class="type">long</span> nSize = ;</span><br><span class="line">                  <span class="comment">//è¯»å…¥æ•°æ®è¿”å›ç»™BYTEç±»å‹æŒ‡é’ˆã€‚</span></span><br><span class="line">                <span class="type">unsigned</span> <span class="type">char</span>* pBuffer = CCFileUtils::<span class="built_in">sharedFileUtils</span>()-&gt;<span class="built_in">getFileData</span>(fullpath.<span class="built_in">c_str</span>(), <span class="string">&quot;rb&quot;</span>, &amp;nSize);</span><br><span class="line">                <span class="comment">//ä½¿ç”¨è¯»å…¥çš„æ•°æ®åˆå§‹åŒ–ç›¸åº”çš„å›¾ç‰‡å¯¹è±¡ã€‚</span></span><br><span class="line">                <span class="built_in">CC_BREAK_IF</span>(! image.<span class="built_in">initWithImageData</span>((<span class="type">void</span>*)pBuffer, nSize, eImageFormat));</span><br><span class="line">                <span class="comment">//è¯»å®Œåé‡Šæ”¾æ•°æ®å ç”¨çš„å†…å­˜ã€‚</span></span><br><span class="line">                <span class="built_in">CC_SAFE_DELETE_ARRAY</span>(pBuffer);</span><br><span class="line">  <span class="comment">//åˆ›å»ºä¸€ä¸ªçº¹ç†ã€‚</span></span><br><span class="line">                texture = <span class="keyword">new</span> <span class="built_in">CCTexture2D</span>();</span><br><span class="line">                <span class="comment">//ä½¿ç”¨å›¾ç‰‡å¯¹è±¡åˆ›å»ºçº¹ç†ã€‚</span></span><br><span class="line">                <span class="keyword">if</span>( texture &amp;&amp;</span><br><span class="line">                    texture-&gt;<span class="built_in">initWithImage</span>(&amp;image) )</span><br><span class="line">                &#123;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ENABLE_CACHE_TEXTURE_DATA</span></span><br><span class="line">                    <span class="comment">// ä½¿ç”¨å›¾ç‰‡å¯¹è±¡ç”Ÿæˆå¯å˜çº¹ç†</span></span><br><span class="line">                    VolatileTexture::<span class="built_in">addImageTexture</span>(texture, fullpath.<span class="built_in">c_str</span>(), eImageFormat);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">                    <span class="comment">//åˆ©ç”¨è·¯å¾„ååšä¸ºæŸ¥è¯¢å…³é”®å­—å°†çº¹ç†å­˜å…¥å­—å…¸ã€‚</span></span><br><span class="line">                    m_pTextures-&gt;<span class="built_in">setObject</span>(texture, pathKey.<span class="built_in">c_str</span>());</span><br><span class="line">                    <span class="comment">//è®¡æ•°å™¨å‡1ã€‚åˆ™åˆšå­˜å…¥å­—å…¸çš„çº¹ç†çš„å¼•ç”¨è®¡æ•°å™¨å€¼æ ‡è®°ä¸ºå°šæœªä½¿ç”¨ã€‚</span></span><br><span class="line">                    texture-&gt;<span class="built_in">release</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//å¤±è´¥åˆ™æ‰“å°é”™è¯¯ã€‚</span></span><br><span class="line">                    <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: Couldn&#x27;t add image:%s in CCTextureCache&quot;</span>, path);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">while</span> ();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//ä¸ä¸Šé¢å±è”½åŠ é”ä¸€æ ·ï¼Œè¿™é‡Œå±è”½è§£é”ã€‚</span></span><br><span class="line">    <span class="comment">//pthread_mutex_unlock(m_pDictLock);</span></span><br><span class="line">    <span class="keyword">return</span> texture;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å¦‚æœæ”¯æŒPVRçš„å‹ç¼©æ ¼å¼ã€‚</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> CC_SUPPORT_PVRTC</span></span><br><span class="line"><span class="comment">//åŠ è½½ä¸€ä¸ªPVRçš„å‹ç¼©æ ¼å¼çš„å›¾ç‰‡ã€‚</span></span><br><span class="line"><span class="function">CCTexture2D* <span class="title">CCTextureCache::addPVRTCImage</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* path, <span class="type">int</span> bpp, <span class="type">bool</span> hasAlpha, <span class="type">int</span> width)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å‚æ•°æœ‰æ•ˆæ€§åˆ¤æ–­</span></span><br><span class="line"><span class="built_in">CCAssert</span>(path != <span class="literal">NULL</span>, <span class="string">&quot;TextureCache: fileimage MUST not be nill&quot;</span>);</span><br><span class="line"><span class="comment">//å‹ç¼©ç±»å‹å‚æ•°æœ‰æ•ˆæ€§åˆ¤æ–­ï¼Œåªèƒ½ä¸º2æˆ–4</span></span><br><span class="line">    <span class="built_in">CCAssert</span>( bpp== || bpp==, <span class="string">&quot;TextureCache: bpp must be either 2 or 4&quot;</span>);</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªæ–°çš„çº¹ç†æŒ‡é’ˆ</span></span><br><span class="line">    CCTexture2D * texture;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å®šä¹‰ä¸´æ—¶å­—ç¬¦ä¸²å­˜å‚¨ç›¸å¯¹è·¯å¾„åã€‚</span></span><br><span class="line">    <span class="function">std::string <span class="title">temp</span><span class="params">(path)</span></span>;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢å­—å…¸ä¸­æ˜¯å¦å·²ç»æœ‰æ­¤çº¹ç†ã€‚æœ‰åˆ™å–å¾—å¹¶ç›´æ¥è¿”å›çº¹ç†ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> ( (texture = (CCTexture2D*)m_pTextures-&gt;<span class="built_in">objectForKey</span>(temp.<span class="built_in">c_str</span>())) )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> texture;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// å–å¾—æ–‡ä»¶çš„å…¨è·¯å¾„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line">    <span class="function">std::string <span class="title">fullpath</span><span class="params">( CCFileUtils::sharedFileUtils()-&gt;fullPathFromRelativePath(path) )</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//æ–°å»ºå˜é‡nLengç”¨äºå­˜å‚¨è¯»å–åˆ°çš„æ•°æ®å¤§å°ã€‚åˆå§‹åŒ–ä¸º0ã€‚</span></span><br><span class="line"> <span class="type">unsigned</span> <span class="type">long</span> nLen = ;</span><br><span class="line"><span class="comment">//æ–°å»ºå­—ç¬¦æŒ‡é’ˆpDataç”¨äºå­˜å‚¨è¯»å–åˆ°çš„æ•°æ®å¹¶å®é™…è¯»å–æ–‡ä»¶æ•°æ®ã€‚</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span>* pData = CCFileUtils::<span class="built_in">sharedFileUtils</span>()-&gt;<span class="built_in">getFileData</span>(fullpath.<span class="built_in">c_str</span>(), <span class="string">&quot;rb&quot;</span>, &amp;nLen);</span><br><span class="line"> <span class="comment">//æ–°å»ºåˆ›ä¸€ä¸ªçº¹ç†ã€‚</span></span><br><span class="line">    texture = <span class="keyword">new</span> <span class="built_in">CCTexture2D</span>();</span><br><span class="line">    <span class="comment">//ä½¿ç”¨è¯»å–åˆ°çš„æ•°æ®åˆ›å»ºçº¹ç†ã€‚</span></span><br><span class="line">    <span class="keyword">if</span>( texture-&gt;<span class="built_in">initWithPVRTCData</span>(pData, , bpp, hasAlpha, width,</span><br><span class="line">                                   (bpp== ? kCCTexture2DPixelFormat_PVRTC2 : kCCTexture2DPixelFormat_PVRTC4)))</span><br><span class="line">&#123;</span><br><span class="line">        <span class="comment">//å°†çº¹ç†ä»¥æ–‡ä»¶ååšä¸ºå…³é”®å­—å­˜å…¥å­—å…¸ã€‚</span></span><br><span class="line">        m_pTextures-&gt;<span class="built_in">setObject</span>(texture, temp.<span class="built_in">c_str</span>());</span><br><span class="line"> <span class="comment">//å°†çº¹ç†äº¤ç”±å†…å­˜ç®¡ç†å™¨å¤„ç†ã€‚</span></span><br><span class="line">        texture-&gt;<span class="built_in">autorelease</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœåˆ›å»ºå¤±è´¥æˆ–è¯»å–PVRæ–‡ä»¶å¤±è´¥ï¼Œæ‰“å°é”™è¯¯æ—¥å¿—ã€‚\</span></span><br><span class="line"><span class="comment">        CCLOG(&quot;Cocos2d: Couldn&#x27;t add PVRTCImage:%s in CCTextureCache&quot;,path);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡Šæ”¾è¯»å–æ–‡ä»¶çš„æ•°æ®æ‰€å ç”¨çš„å†…å­˜ã€‚</span></span><br><span class="line">    <span class="built_in">CC_SAFE_DELETE_ARRAY</span>(pData);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> texture;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CC_SUPPORT_PVRTC</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//åŠ è½½ä¸€ä¸ªæ™®é€šçš„PVRå›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line"><span class="function">CCTexture2D * <span class="title">CCTextureCache::addPVRImage</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ–‡ä»¶åå‚æ•°æœ‰æ•ˆæ€§åˆ¤æ–­ã€‚</span></span><br><span class="line">    <span class="built_in">CCAssert</span>(path != <span class="literal">NULL</span>, <span class="string">&quot;TextureCache: fileimage MUST not be nill&quot;</span>);</span><br><span class="line"><span class="comment">//æ–°å»ºçº¹ç†æŒ‡é’ˆå˜é‡ç½®ç©ºã€‚</span></span><br><span class="line">CCTexture2D* texture = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸´æ—¶å­—ç¬¦ä¸²å­˜å‚¨ç›¸å¯¹è·¯å¾„åã€‚</span></span><br><span class="line">    <span class="function">std::string <span class="title">key</span><span class="params">(path)</span></span>;</span><br><span class="line">    <span class="comment">//å…ˆä½¿ç”¨æ–‡ä»¶åæŸ¥è¯¢æ˜¯å¦å­—å…¸ä¸­å·²ç»æœ‰æ­¤çº¹ç†äº†ã€‚å¦‚æœæœ‰ç›´æ¥å–å¾—å¹¶è¿”å›çº¹ç†ã€‚</span></span><br><span class="line">    <span class="keyword">if</span>( (texture = (CCTexture2D*)m_pTextures-&gt;<span class="built_in">objectForKey</span>(key.<span class="built_in">c_str</span>())) )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> texture;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ç”±æ–‡ä»¶åå­—ç¬¦ä¸²å–å¾—å›¾ç‰‡çš„å…¨è·¯å¾„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line">std::string fullpath = CCFileUtils::<span class="built_in">sharedFileUtils</span>()-&gt;<span class="built_in">fullPathFromRelativePath</span>(key.<span class="built_in">c_str</span>());</span><br><span class="line"><span class="comment">//åŠ¨æ€åˆ›å»ºä¸€ä¸ªçº¹ç†ã€‚</span></span><br><span class="line">    texture = <span class="keyword">new</span> <span class="built_in">CCTexture2D</span>();</span><br><span class="line">     <span class="comment">//å¦‚æœåˆ›å»ºæˆåŠŸï¼Œåˆ™è¯»å–ç›¸åº”çš„PVRæ–‡ä»¶æ¥åˆå§‹åŒ–çº¹ç†ã€‚</span></span><br><span class="line">    <span class="keyword">if</span>(texture != <span class="literal">NULL</span> &amp;&amp; texture-&gt;<span class="built_in">initWithPVRFile</span>(fullpath.<span class="built_in">c_str</span>()) )</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–æˆåŠŸã€‚</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ENABLE_CACHE_TEXTURE_DATA</span></span><br><span class="line">        <span class="comment">// ä½¿ç”¨çº¹ç†å’Œå›¾ç‰‡ä¿¡æ¯ç”Ÿæˆå¯å˜çº¹ç†ã€‚</span></span><br><span class="line">        VolatileTexture::<span class="built_in">addImageTexture</span>(texture, fullpath.<span class="built_in">c_str</span>(), CCImage::kFmtRawData);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="comment">//å°†çº¹ç†ä»¥æ–‡ä»¶ååšä¸ºæŸ¥è¯¢å…³é”®å­—å­˜å…¥å­—å…¸ã€‚</span></span><br><span class="line">        m_pTextures-&gt;<span class="built_in">setObject</span>(texture, key.<span class="built_in">c_str</span>());</span><br><span class="line">        texture-&gt;<span class="built_in">autorelease</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœåˆ›å»ºå¤±è´¥æˆ–è¯»å–PVRæ–‡ä»¶å¤±è´¥ï¼Œæ‰“å°é”™è¯¯æ—¥å¿—ã€‚</span></span><br><span class="line">        <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: Couldn&#x27;t add PVRImage:%s in CCTextureCache&quot;</span>,key.<span class="built_in">c_str</span>());</span><br><span class="line">        <span class="built_in">CC_SAFE_DELETE</span>(texture);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> texture;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ è½½ä¸€ä¸ªå›¾ç‰‡ç”Ÿæˆçº¹ç†ï¼ŒæŒ‡å®šå‚æ•°keyåšä¸ºå­—å…¸çš„æŸ¥è¯¢å¯¹åº”å…³é”®å­—ã€‚</span></span><br><span class="line"><span class="function">CCTexture2D* <span class="title">CCTextureCache::addUIImage</span><span class="params">(CCImage *image, <span class="type">const</span> <span class="type">char</span> *key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å‚æ•°æœ‰æ•ˆæ€§åˆ¤æ–­</span></span><br><span class="line">    <span class="built_in">CCAssert</span>(image != <span class="literal">NULL</span>, <span class="string">&quot;TextureCache: image MUST not be nill&quot;</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//å®šä¹‰çº¹ç†æŒ‡é’ˆå˜é‡texureåšä¸ºè¿”å›å€¼ã€‚è¿™é‡Œåˆå§‹åŒ–ä¸ºç©ºã€‚</span></span><br><span class="line">    CCTexture2D * texture = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//å®šä¹‰å­—ç¬¦ä¸²å˜é‡forKeyç”¨æ¥å­˜å‚¨å®Œæ•´çš„å›¾ç‰‡è·¯å¾„åç§°ã€‚</span></span><br><span class="line">    std::string forKey;</span><br><span class="line">    <span class="keyword">if</span> (key)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å–å¾—æ–‡ä»¶åæ‰€å¯¹åº”çš„å…¨è·¯å¾„åï¼Œå‘µå‘µï¼Œè¿™ä¸ªkeyä¹Ÿè¿˜æ˜¯ä¸ªç›¸å¯¹è·¯å¾„åå•Šã€‚</span></span><br><span class="line">        forKey = CCFileUtils::<span class="built_in">sharedFileUtils</span>()-&gt;<span class="built_in">fullPathFromRelativePath</span>(key);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢å­—å…¸æ˜¯å¦å·²ç»æœ‰æ­¤çº¹ç†äº†ã€‚å¦‚æœæœ‰ï¼Œå–å‡ºçº¹ç†è¿”å›ç»™textureï¼Œä¸­æ–­é€€å‡ºã€‚</span></span><br><span class="line">        <span class="keyword">if</span>(key &amp;&amp; (texture = (CCTexture2D *)m_pTextures-&gt;<span class="built_in">objectForKey</span>(forKey.<span class="built_in">c_str</span>())))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//åŠ¨æ€åˆ›å»ºä¸€ä¸ªçº¹ç†å¯¹è±¡.è¿”å›ç»™textureã€‚</span></span><br><span class="line">        texture = <span class="keyword">new</span> <span class="built_in">CCTexture2D</span>();</span><br><span class="line">        <span class="comment">//ä½¿ç”¨imageæ¥åˆå§‹åŒ–çº¹ç†.æ³¨æ„:è¿™ä¸€å¥åº”è¯¥ç§»åˆ°ä¸‹é¢çš„ifä¸­ã€‚</span></span><br><span class="line">        texture-&gt;<span class="built_in">initWithImage</span>(image);</span><br><span class="line">         <span class="comment">//åˆå§‹åŒ–å®Œæˆåä»¥è·¯å¾„ååšä¸ºæŸ¥è¯¢å…³é”®å­—å°†çº¹ç†å­˜å…¥å­—å…¸ã€‚</span></span><br><span class="line">        <span class="keyword">if</span>(key &amp;&amp; texture)</span><br><span class="line">        &#123;</span><br><span class="line">            m_pTextures-&gt;<span class="built_in">setObject</span>(texture, forKey.<span class="built_in">c_str</span>());</span><br><span class="line">            texture-&gt;<span class="built_in">autorelease</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">             <span class="comment">//å¦‚æœkeyä¸ºç©ºæˆ–textureä¸ºç©ºæ‰“å°é”™è¯¯</span></span><br><span class="line">            <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: Couldn&#x27;t add UIImage in CCTextureCache&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125; <span class="keyword">while</span> ();</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ENABLE_CACHE_TEXTURE_DATA</span></span><br><span class="line">    <span class="comment">//ä½¿ç”¨çº¹ç†å’ŒCCImageå¯¹è±¡ç”Ÿæˆå¯å˜çº¹ç†ã€‚</span></span><br><span class="line">    VolatileTexture::<span class="built_in">addCCImage</span>(texture, image);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> texture;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ¸…ç©ºå­—å…¸ï¼Œé‡Šæ”¾æ‰€æœ‰çº¹ç†ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTextureCache::removeAllTextures</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_pTextures-&gt;<span class="built_in">removeAllObjects</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ¸…é™¤æœªè¢«å¤–éƒ¨ä½¿ç”¨çš„çº¹ç†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTextureCache::removeUnusedTextures</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/*åŸæ¥çš„åšæ³•ï¼Œå› ä¸ºæœ‰é—®é¢˜ç»™å±è”½äº†ï¼Œä»ç„¶è§£é‡Šä¸‹ï¼š</span></span><br><span class="line"><span class="comment">//å®šä¹‰å­—å…¸è¯æ±‡æŒ‡é’ˆå˜é‡pElementã€‚</span></span><br><span class="line"><span class="comment">CCDictElement* pElement = NULL;</span></span><br><span class="line"><span class="comment">//éå†å­—å…¸</span></span><br><span class="line"><span class="comment">    CCDICT_FOREACH(m_pTextures, pElement)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    //æ‰“å°è¯æ±‡ä¿¡æ¯</span></span><br><span class="line"><span class="comment">        CCLOG(&quot;Cocos2d: CCTextureCache: texture: %s&quot;, pElement-&gt;getStrKey());</span></span><br><span class="line"><span class="comment">        //å–å¾—è¯æ±‡å¯¹åº”çš„çº¹ç†</span></span><br><span class="line"><span class="comment">        CCTexture2D *value = (CCTexture2D*)pElement-&gt;getObject();</span></span><br><span class="line"><span class="comment">         //å¦‚æœå¼•ç”¨è®¡æ•°å™¨å€¼ä¸º1ï¼Œä»å­—å…¸ä¸­åˆ é™¤ã€‚</span></span><br><span class="line"><span class="comment">        if (value-&gt;retainCount() == 1)</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">            CCLOG(&quot;Cocos2d: CCTextureCache: removing unused texture: %s&quot;, pElement-&gt;getStrKey());</span></span><br><span class="line"><span class="comment">            m_pTextures-&gt;removeObjectForElememt(pElement);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç°åœ¨çš„åšæ³•</span></span><br><span class="line">    <span class="comment">// åˆ¤æ–­å­—å…¸ä¸ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (m_pTextures-&gt;<span class="built_in">count</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å®šä¹‰å­—å…¸è¯æ±‡æŒ‡é’ˆå˜é‡pElementã€‚</span></span><br><span class="line">CCDictElement* pElement = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªlistå®¹å™¨ç”¨æ¥å­˜å‚¨æœªè¢«å¤–éƒ¨ä½¿ç”¨çš„çº¹ç†æŒ‡é’ˆã€‚</span></span><br><span class="line">        list&lt;CCDictElement*&gt; elementToRemove;</span><br><span class="line">        <span class="comment">//éå†å­—å…¸</span></span><br><span class="line">        <span class="built_in">CCDICT_FOREACH</span>(m_pTextures, pElement)</span><br><span class="line">        &#123;</span><br><span class="line">             <span class="comment">//æ‰“å°è¯æ±‡ä¿¡æ¯</span></span><br><span class="line">            <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: CCTextureCache: texture: %s&quot;</span>, pElement-&gt;<span class="built_in">getStrKey</span>());</span><br><span class="line">            <span class="comment">//å–å¾—è¯æ±‡å¯¹åº”çš„çº¹ç†</span></span><br><span class="line">            CCTexture2D *value = (CCTexture2D*)pElement-&gt;<span class="built_in">getObject</span>();</span><br><span class="line">            <span class="keyword">if</span> (value-&gt;<span class="built_in">retainCount</span>() == )</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//å¦‚æœå¼•ç”¨è®¡æ•°å™¨å€¼ä¸º1ï¼Œå…ˆå­˜å…¥å®¹å™¨ä¸­ã€‚</span></span><br><span class="line">                elementToRemove.<span class="built_in">push_back</span>(pElement);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// éå†listä¸­çš„å…ƒç´ ä»å­—å…¸ä¸­åˆ é™¤</span></span><br><span class="line">        <span class="keyword">for</span> (list&lt;CCDictElement*&gt;::iterator iter = elementToRemove.<span class="built_in">begin</span>(); iter != elementToRemove.<span class="built_in">end</span>(); ++iter)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//æ‰“å°åˆ é™¤å…ƒç´ æ—¥å¿—ã€‚</span></span><br><span class="line">            <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: CCTextureCache: removing unused texture: %s&quot;</span>, (*iter)-&gt;<span class="built_in">getStrKey</span>());</span><br><span class="line">           <span class="comment">//ä»å­—å…¸ä¸­åˆ é™¤</span></span><br><span class="line">            m_pTextures-&gt;<span class="built_in">removeObjectForElememt</span>(*iter);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¥½å§ï¼Œç­”æ¡ˆæ˜¯å› ä¸ºCCDICT_FOREACHå’ŒremoveObjectForElememtä¼šäº’ç›¸å½±å“ï¼ŒCCDICT_FOREACHä¸­ä¼šè°ƒç”¨HASH_ITERå¾ªç¯éå†ã€‚è€Œå¾ªç¯çš„è®¡æ•°å™¨æ˜¯ä½ç½®ï¼Œé€šè¿‡åœ°å€å¯¹æ¯”æ¥æ‰¾ä¸‹ä¸€ä¸ªç»“ç‚¹ä½ç½®ã€‚è€ŒremoveObjectForElememtä¼šè°ƒç”¨HASH_DELETEåˆ é™¤å…ƒç´ å¯¼è‡´é“¾è¡¨çš„é‡æ„ã€‚é‡æ„åä¼šå½±å“åˆ°HASK_ITERçš„æŸ¥è¯¢ã€‚</span></span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç§»é™¤ä¸€ä¸ªçº¹ç†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTextureCache::removeTexture</span><span class="params">(CCTexture2D* texture)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å‚æ•°æœ‰æ•ˆæ€§åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span>( ! texture )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ‰€æœ‰å¯¹åº”æ­¤çº¹ç†çš„è¯æ±‡</span></span><br><span class="line">CCArray* keys = m_pTextures-&gt;<span class="built_in">allKeysForObject</span>(texture);</span><br><span class="line"><span class="comment">//ä»å­—å…¸ä¸­æŠŠè¿™äº›è¯æ±‡åŠç›¸åº”çº¹ç†åˆ é™¤ã€‚</span></span><br><span class="line">    m_pTextures-&gt;<span class="built_in">removeObjectsForKeys</span>(keys);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç”±å­—å…¸æŸ¥è¯¢å…³é”®å­—æ‰¾åˆ°ç›¸åº”çº¹ç†å¹¶ç§»é™¤ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTextureCache::removeTextureForKey</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *textureKeyName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å‚æ•°æœ‰æ•ˆæ€§åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (textureKeyName == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢å…³é”®å­—å®é™…æ˜¯æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼Œè¿™é‡Œå–å¾—å…¨è·¯å¾„ã€‚</span></span><br><span class="line">string fullPath = CCFileUtils::<span class="built_in">sharedFileUtils</span>()-&gt;<span class="built_in">fullPathFromRelativePath</span>(textureKeyName);</span><br><span class="line"><span class="comment">//å°†å…¨è·¯å¾„åšä¸ºæŸ¥è¯¢å…³é”®å­—ä»å­—å…¸ä¸­åˆ é™¤ç›¸åº”è¯æ±‡åŠçº¹ç†</span></span><br><span class="line">    m_pTextures-&gt;<span class="built_in">removeObjectForKey</span>(fullPath.<span class="built_in">c_str</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç”±å­—å…¸æŸ¥è¯¢å…³é”®å­—æ‰¾åˆ°ç›¸åº”çº¹ç†</span></span><br><span class="line"><span class="function">CCTexture2D* <span class="title">CCTextureCache::textureForKey</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (CCTexture2D*)m_pTextures-&gt;<span class="built_in">objectForKey</span>(CCFileUtils::<span class="built_in">sharedFileUtils</span>()-&gt;<span class="built_in">fullPathFromRelativePath</span>(key));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡æ–°è½½å…¥æ‰€æœ‰çš„çº¹ç†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTextureCache::reloadAllTextures</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ENABLE_CACHE_TEXTURE_DATA</span></span><br><span class="line">    <span class="comment">//è°ƒç”¨å¯å˜çº¹ç†çš„é™æ€å‡½æ•°é‡æ–°è½½å…¥æ‰€æœ‰çš„çº¹ç†</span></span><br><span class="line">    VolatileTexture::<span class="built_in">reloadAllTextures</span>();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‰“å°å­—å…¸ä¸­çš„çº¹ç†ç»Ÿè®¡ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CCTextureCache::dumpCachedTextureInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> count = ;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> totalBytes = ;</span><br><span class="line"> </span><br><span class="line">CCDictElement* pElement = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">//éå†å­—å…¸ä¸­çš„æ‰€æœ‰è¯æ±‡ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">CCDICT_FOREACH</span>(m_pTextures, pElement)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å–å¾—è¯æ±‡å¯¹åº”çš„çº¹ç†</span></span><br><span class="line">    CCTexture2D* tex = (CCTexture2D*)pElement-&gt;<span class="built_in">getObject</span>();</span><br><span class="line">     <span class="comment">//å–å¾—çº¹ç†å¯¹åº”è´´å›¾çš„è‰²æ·±</span></span><br><span class="line">        <span class="type">unsigned</span> <span class="type">int</span> bpp = tex-&gt;<span class="built_in">bitsPerPixelForFormat</span>();</span><br><span class="line">        <span class="comment">// ç”Ÿæˆè´´å›¾å ç”¨çš„å†…å­˜å¤§å°(å­—èŠ‚æ•°é‡)</span></span><br><span class="line">        <span class="type">unsigned</span> <span class="type">int</span> bytes = tex-&gt;<span class="built_in">getPixelsWide</span>() * tex-&gt;<span class="built_in">getPixelsHigh</span>() * bpp / ;</span><br><span class="line">         <span class="comment">// ç»Ÿè®¡å†…å­˜æ€»å¤§å°</span></span><br><span class="line">        totalBytes += bytes;</span><br><span class="line">        count++;</span><br><span class="line">         <span class="comment">//æ‰“å°çº¹ç†ä¿¡æ¯</span></span><br><span class="line">        <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: \&quot;%s\&quot; rc=%lu id=%lu %lu x %lu @ %ld bpp =&gt; %lu KB&quot;</span>,</span><br><span class="line">               pElement-&gt;<span class="built_in">getStrKey</span>(),        <span class="comment">//æŸ¥è¯¢å…³é”®å­—</span></span><br><span class="line">               (<span class="type">long</span>)tex-&gt;<span class="built_in">retainCount</span>(),    <span class="comment">//ä½¿ç”¨æ¬¡æ•°</span></span><br><span class="line">               (<span class="type">long</span>)tex-&gt;<span class="built_in">getName</span>(),        <span class="comment">//å›¾ç‰‡åç§°</span></span><br><span class="line">               (<span class="type">long</span>)tex-&gt;<span class="built_in">getPixelsWide</span>(),<span class="comment">//å¯¹åº”è´´å›¾çš„å®½åº¦</span></span><br><span class="line">               (<span class="type">long</span>)tex-&gt;<span class="built_in">getPixelsHigh</span>(),<span class="comment">//å¯¹åº”è´´å›¾çš„é«˜åº¦</span></span><br><span class="line">               (<span class="type">long</span>)bpp,                    <span class="comment">//å¯¹åº”è´´å›¾è‰²æ·±</span></span><br><span class="line">               (<span class="type">long</span>)bytes / );        <span class="comment">//å ç”¨å†…å­˜å¤§å°(åƒå­—èŠ‚æ•°é‡)</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ‰“å°æ€»çš„æ•°é‡æ•°é‡ï¼Œå ç”¨å†…å­˜æ•°é‡ã€‚</span></span><br><span class="line">    <span class="built_in">CCLOG</span>(<span class="string">&quot;Cocos2d: CCTextureCache dumpDebugInfo: %ld textures, for %lu KB (%.2f MB)&quot;</span>, (<span class="type">long</span>)count, (<span class="type">long</span>)totalBytes / , totalBytes / (<span class="number">1024.0f</span>*<span class="number">1024.0f</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœå¼€å¯äº†ä½¿ç”¨å¤šå˜çº¹ç†</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CC_ENABLE_CACHE_TEXTURE_DATA</span></span><br><span class="line"><span class="comment">//å®šä¹‰å…¨å±€çš„listå®¹å™¨ï¼Œç”¨æ¥å­˜å‚¨äº§ç”Ÿçš„å¤šå˜çº¹ç†å¯¹è±¡æŒ‡é’ˆ</span></span><br><span class="line">std::list&lt;VolatileTexture*&gt; VolatileTexture::textures;</span><br><span class="line"><span class="comment">//å®šä¹‰å¸ƒå°”å˜é‡æ ‡è®°æ˜¯å¦åœ¨å…¨éƒ¨é‡æ–°è½½å…¥</span></span><br><span class="line"><span class="type">bool</span> VolatileTexture::isReloading = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line">VolatileTexture::<span class="built_in">VolatileTexture</span>(CCTexture2D *t)</span><br><span class="line">: <span class="built_in">texture</span>(t)</span><br><span class="line">, <span class="built_in">m_eCashedImageType</span>(kInvalid)</span><br><span class="line">, <span class="built_in">m_pTextureData</span>(<span class="literal">NULL</span>)</span><br><span class="line">, <span class="built_in">m_PixelFormat</span>(kTexture2DPixelFormat_RGBA8888)</span><br><span class="line">, <span class="built_in">m_strFileName</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">, <span class="built_in">m_FmtImage</span>(CCImage::kFmtPng)</span><br><span class="line">, <span class="built_in">m_alignment</span>(kCCTextAlignmentCenter)</span><br><span class="line">, <span class="built_in">m_vAlignment</span>(kCCVerticalTextAlignmentCenter)</span><br><span class="line">, <span class="built_in">m_strFontName</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">, <span class="built_in">m_strText</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">, <span class="built_in">uiImage</span>(<span class="literal">NULL</span>)</span><br><span class="line">, <span class="built_in">m_fFontSize</span>(<span class="number">0.0f</span>)</span><br><span class="line">&#123;</span><br><span class="line">    m_size = <span class="built_in">CCSizeMake</span>(, );</span><br><span class="line">    textures.<span class="built_in">push_back</span>(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">VolatileTexture::~<span class="built_in">VolatileTexture</span>()</span><br><span class="line">&#123;</span><br><span class="line">    textures.<span class="built_in">remove</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="built_in">CC_SAFE_RELEASE</span>(uiImage);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€šè¿‡çº¹ç†å›¾ç‰‡å±æ€§ä¿¡æ¯ç”Ÿæˆå¯å˜çº¹ç†ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">VolatileTexture::addImageTexture</span><span class="params">(CCTexture2D *tt, <span class="type">const</span> <span class="type">char</span>* imageFileName, CCImage::EImageFormat format)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœæ­£åœ¨é‡æ–°è½½å…¥è¿‡ç¨‹ä¸­ï¼Œç›´æ¥è¿”å›ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (isReloading)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é€šè¿‡çº¹ç†æŒ‡é’ˆæ‰¾åˆ°ç›¸åº”çš„å¯å˜çº¹ç†ï¼Œå¦‚æœæ²¡æœ‰åˆ™newä¸€ä¸ªè¿”å›å…¶æŒ‡é’ˆã€‚</span></span><br><span class="line">    VolatileTexture *vt = <span class="built_in">findVolotileTexture</span>(tt);</span><br><span class="line">    <span class="comment">//è®¾ç½®ç›¸å…³å±æ€§ï¼Œæ³¨æ„:è¿™é‡Œæœ€å¥½å¯¹vtåšä¸‹æœ‰æ•ˆæ€§æ£€æŸ¥ï¼Œå¦‚æœä¸ºNULLçš„è¯ä¼šå´©æºƒçš„ã€‚</span></span><br><span class="line">    vt-&gt;m_eCashedImageType = kImageFile;</span><br><span class="line">    vt-&gt;m_strFileName = imageFileName;</span><br><span class="line">    vt-&gt;m_FmtImage    = format;</span><br><span class="line">    vt-&gt;m_PixelFormat = tt-&gt;<span class="built_in">getPixelFormat</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€šè¿‡CCImageå¯¹è±¡ç”Ÿæˆå¯å˜çº¹ç†ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">VolatileTexture::addCCImage</span><span class="params">(CCTexture2D *tt, CCImage *image)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//é€šè¿‡çº¹ç†æŒ‡é’ˆæ‰¾åˆ°ç›¸åº”çš„å¯å˜çº¹ç†ï¼Œå¦‚æœæ²¡æœ‰åˆ™newä¸€ä¸ªè¿”å›å…¶æŒ‡é’ˆã€‚</span></span><br><span class="line">    VolatileTexture *vt = <span class="built_in">findVolotileTexture</span>(tt);</span><br><span class="line">image-&gt;<span class="built_in">retain</span>();</span><br><span class="line"><span class="comment">//è®¾ç½®ç›¸å…³å±æ€§</span></span><br><span class="line">    vt-&gt;uiImage = image;</span><br><span class="line">    vt-&gt;m_eCashedImageType = kImage;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€šè¿‡çº¹ç†æŒ‡é’ˆæ‰¾åˆ°ç›¸åº”çš„å¯å˜çº¹ç†ï¼Œå¦‚æœæ²¡æœ‰åˆ™newå‡ºä¸€ä¸ªè¿”å›ã€‚</span></span><br><span class="line"><span class="function">VolatileTexture* <span class="title">VolatileTexture::findVolotileTexture</span><span class="params">(CCTexture2D *tt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">VolatileTexture *vt = ;</span><br><span class="line"><span class="comment">//éå†listå®¹å™¨ï¼Œå¯¹æ¯”æŸ¥è¯¢ã€‚</span></span><br><span class="line">    std::list&lt;VolatileTexture *&gt;::iterator i = textures.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span> (i != textures.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        VolatileTexture *v = *i++;</span><br><span class="line">        <span class="keyword">if</span> (v-&gt;texture == tt)</span><br><span class="line">        &#123;</span><br><span class="line">            vt = v;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ç”±çº¹ç†å‚æ•°newå‡ºä¸€ä¸ªå¯å˜çº¹ç†ï¼Œnewä¼šè°ƒç”¨å…¶å¸¦å‚æ•°çš„æ‹·è´æ„é€ å‡½æ•°è®¾ç½®å…¶å¯¹åº”çº¹ç†ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (! vt)</span><br><span class="line">    &#123;</span><br><span class="line">        vt = <span class="keyword">new</span> <span class="built_in">VolatileTexture</span>(tt);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> vt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€šè¿‡æŒ‡å®šå›¾åƒæ•°æ®ï¼Œåƒç´ æ ¼å¼å’Œå›¾ç‰‡å¤§å°æ¥ç”Ÿæˆå¯å˜çº¹ç†ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">VolatileTexture::addDataTexture</span><span class="params">(CCTexture2D *tt, <span class="type">void</span>* data, CCTexture2DPixelFormat pixelFormat, <span class="type">const</span> CCSize&amp; contentSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœæ­£åœ¨é‡æ–°è½½å…¥è¿‡ç¨‹ä¸­ï¼Œç›´æ¥è¿”å›ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (isReloading)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é€šè¿‡çº¹ç†æŒ‡é’ˆæ‰¾åˆ°ç›¸åº”çš„å¯å˜çº¹ç†ï¼Œå¦‚æœæ²¡æœ‰åˆ™newä¸€ä¸ªè¿”å›å…¶æŒ‡é’ˆã€‚</span></span><br><span class="line">    VolatileTexture *vt = <span class="built_in">findVolotileTexture</span>(tt);</span><br><span class="line">    <span class="comment">//è®¾ç½®ç›¸å…³å±æ€§</span></span><br><span class="line">    vt-&gt;m_eCashedImageType = kImageData;</span><br><span class="line">    vt-&gt;m_pTextureData = data;</span><br><span class="line">    vt-&gt;m_PixelFormat = pixelFormat;</span><br><span class="line">    vt-&gt;m_TextureSize = contentSize;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç”±å­—ç¬¦ä¸²å’Œç›¸åº”ä¿¡æ¯ç”Ÿæˆå¯å˜çº¹ç†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">VolatileTexture::addStringTexture</span><span class="params">(CCTexture2D *tt, <span class="type">const</span> <span class="type">char</span>* text, <span class="type">const</span> CCSize&amp; dimensions, CCTextAlignment alignment,</span></span></span><br><span class="line"><span class="params"><span class="function">                                       CCVerticalTextAlignment vAlignment, <span class="type">const</span> <span class="type">char</span> *fontName, <span class="type">float</span> fontSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœæ­£åœ¨é‡æ–°è½½å…¥è¿‡ç¨‹ä¸­ï¼Œç›´æ¥è¿”å›ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (isReloading)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é€šè¿‡çº¹ç†æŒ‡é’ˆæ‰¾åˆ°ç›¸åº”çš„å¯å˜çº¹ç†ï¼Œå¦‚æœæ²¡æœ‰åˆ™newä¸€ä¸ªè¿”å›å…¶æŒ‡é’ˆã€‚</span></span><br><span class="line">    VolatileTexture *vt = <span class="built_in">findVolotileTexture</span>(tt);</span><br><span class="line">    <span class="comment">//è®¾ç½®ç›¸å…³å±æ€§</span></span><br><span class="line">    vt-&gt;m_eCashedImageType = kString;</span><br><span class="line">    vt-&gt;m_size        = dimensions;</span><br><span class="line">    vt-&gt;m_strFontName = fontName;</span><br><span class="line">    vt-&gt;m_alignment   = alignment;</span><br><span class="line">    vt-&gt;m_vAlignment  = vAlignment;</span><br><span class="line">    vt-&gt;m_fFontSize   = fontSize;</span><br><span class="line">    vt-&gt;m_strText     = text;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€šè¿‡çº¹ç†æŒ‡é’ˆæ‰¾åˆ°ç›¸åº”çš„å¯å˜çº¹ç†å¹¶åˆ é™¤ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">VolatileTexture::removeTexture</span><span class="params">(CCTexture2D *t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> </span><br><span class="line">    std::list&lt;VolatileTexture *&gt;::iterator i = textures.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span> (i != textures.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        VolatileTexture *vt = *i++;</span><br><span class="line">        <span class="keyword">if</span> (vt-&gt;texture == t)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">delete</span> vt;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡æ–°è½½å…¥æ‰€æœ‰çš„çº¹ç†ã€‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">VolatileTexture::reloadAllTextures</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®å¼€å§‹è¿›è¡Œé‡æ–°è½½å…¥æ‰€æœ‰çº¹ç†ã€‚</span></span><br><span class="line">    isReloading = <span class="literal">true</span>;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">CCLOG</span>(<span class="string">&quot;reload all texture&quot;</span>);</span><br><span class="line"><span class="comment">//é€šè¿‡è¿­ä»£å™¨éå†listå®¹å™¨</span></span><br><span class="line">    std::list&lt;VolatileTexture *&gt;::iterator iter = textures.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span> (iter != textures.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        VolatileTexture *vt = *iter++;</span><br><span class="line">         <span class="comment">//æ ¹æ®ä¸åŒçš„æ ¼å¼è¿›è¡Œçº¹ç†çš„é‡å»º</span></span><br><span class="line">        <span class="keyword">switch</span> (vt-&gt;m_eCashedImageType)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> kImageFile:</span><br><span class="line">            &#123;</span><br><span class="line">                  <span class="comment">//è¿™é‡Œå®šä¹‰ä¸€ä¸ªCCImageå¯¹è±¡image</span></span><br><span class="line">                CCImage image;</span><br><span class="line">                  <span class="comment">//å…ˆå°†è·¯å¾„åéƒ½å˜æˆå°å†™å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line">                <span class="function">std::string <span class="title">lowerCase</span><span class="params">(vt-&gt;m_strFileName.c_str())</span></span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">int</span> i = ; i &lt; lowerCase.<span class="built_in">length</span>(); ++i)</span><br><span class="line">                &#123;</span><br><span class="line">                    lowerCase[i] = <span class="built_in">tolower</span>(lowerCase[i]);</span><br><span class="line">                &#125;</span><br><span class="line">                  <span class="comment">//æ‰©å±•åå¯¹æ¯”ï¼Œå¦‚æœæ˜¯PVRæ–‡ä»¶</span></span><br><span class="line">                <span class="keyword">if</span> (std::string::npos != lowerCase.<span class="built_in">find</span>(<span class="string">&quot;.pvr&quot;</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                      <span class="comment">//å–å¾—åŸæ¥çš„é»˜è®¤å¸¦ALPHAé€šé“çš„åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line">                    CCTexture2DPixelFormat oldPixelFormat = CCTexture2D::<span class="built_in">defaultAlphaPixelFormat</span>();</span><br><span class="line">                    <span class="comment">//é‡è®¾é»˜è®¤å¸¦ALPHAé€šé“çš„åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line">CCTexture2D::<span class="built_in">setDefaultAlphaPixelFormat</span>(vt-&gt;m_PixelFormat);</span><br><span class="line"> </span><br><span class="line">                    <span class="comment">//çº¹ç†é‡æ–°ç”±PVRæ–‡ä»¶è¿›è¡Œåˆå§‹åŒ–ã€‚ä¼šç”¨åˆ°æ–°çš„é»˜è®¤å¸¦ALPHAé€šé“çš„åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line">vt-&gt;texture-&gt;<span class="built_in">initWithPVRFile</span>(vt-&gt;m_strFileName.<span class="built_in">c_str</span>());</span><br><span class="line">                    <span class="comment">//é‡è®¾åŸæ¥çš„é»˜è®¤å¸¦ALPHAé€šé“çš„åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line">CCTexture2D::<span class="built_in">setDefaultAlphaPixelFormat</span>(oldPixelFormat);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                      <span class="comment">//å¦‚æœæ˜¯éPVRæ–‡ä»¶ã€‚</span></span><br><span class="line">                    <span class="type">unsigned</span> <span class="type">long</span> nSize = ;</span><br><span class="line">                      <span class="comment">//é€šè¿‡æ–‡ä»¶å·¥å…·é›†ä¸­çš„æ¥å£è¯»å…¥å›¾ç‰‡æ–‡ä»¶å¹¶è¿”å›æ•°æ®åœ°å€ã€‚</span></span><br><span class="line">                    <span class="type">unsigned</span> <span class="type">char</span>* pBuffer = CCFileUtils::<span class="built_in">sharedFileUtils</span>()-&gt;<span class="built_in">getFileData</span>(vt-&gt;m_strFileName.<span class="built_in">c_str</span>(), <span class="string">&quot;rb&quot;</span>, &amp;nSize);</span><br><span class="line">                       <span class="comment">//ä½¿ç”¨æ•°æ®åœ°å€å¯¹å‰é¢å®šä¹‰çš„CCImageå¯¹è±¡imageè¿›è¡Œåˆå§‹åŒ–ã€‚</span></span><br><span class="line">                    <span class="keyword">if</span> (image.<span class="built_in">initWithImageData</span>((<span class="type">void</span>*)pBuffer, nSize, vt-&gt;m_FmtImage))</span><br><span class="line">                    &#123;</span><br><span class="line">                           <span class="comment">//å–å¾—åŸæ¥çš„é»˜è®¤å¸¦ALPHAé€šé“çš„åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line">                        CCTexture2DPixelFormat oldPixelFormat = CCTexture2D::<span class="built_in">defaultAlphaPixelFormat</span>();</span><br><span class="line">                        <span class="comment">//é‡è®¾é»˜è®¤å¸¦ALPHAé€šé“çš„åƒç´ æ ¼å¼ã€‚CCTexture2D::setDefaultAlphaPixelFormat(vt-&gt;m_PixelFormat);</span></span><br><span class="line">                          <span class="comment">//çº¹ç†é‡æ–°ç”±å›¾ç‰‡å¯¹è±¡åˆå§‹åŒ–ã€‚ä¼šç”¨åˆ°æ–°çš„é»˜è®¤å¸¦ALPHAé€šé“çš„åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line"> </span><br><span class="line">                        vt-&gt;texture-&gt;<span class="built_in">initWithImage</span>(&amp;image);</span><br><span class="line">                        <span class="comment">//é‡è®¾åŸæ¥çš„é»˜è®¤å¸¦ALPHAé€šé“çš„åƒç´ æ ¼å¼ã€‚</span></span><br><span class="line">CCTexture2D::<span class="built_in">setDefaultAlphaPixelFormat</span>(oldPixelFormat);</span><br><span class="line">                    &#125;</span><br><span class="line"> </span><br><span class="line">                    <span class="built_in">CC_SAFE_DELETE_ARRAY</span>(pBuffer);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kImageData:</span><br><span class="line">            &#123;</span><br><span class="line">                  <span class="comment">//çº¹ç†é‡æ–°ç”±å›¾ç‰‡æ•°æ®åˆå§‹åŒ–ã€‚</span></span><br><span class="line">                vt-&gt;texture-&gt;<span class="built_in">initWithData</span>(vt-&gt;m_pTextureData,</span><br><span class="line">                                          vt-&gt;m_PixelFormat,</span><br><span class="line">                                          vt-&gt;m_TextureSize.width,</span><br><span class="line">                                          vt-&gt;m_TextureSize.height,</span><br><span class="line">                                          vt-&gt;m_TextureSize);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kString:</span><br><span class="line">            &#123;</span><br><span class="line">                  <span class="comment">//çº¹ç†é‡æ–°ç”±å­—ç¬¦ä¸²åˆå§‹åŒ–ã€‚</span></span><br><span class="line">                vt-&gt;texture-&gt;<span class="built_in">initWithString</span>(vt-&gt;m_strText.<span class="built_in">c_str</span>(),</span><br><span class="line">                    vt-&gt;m_size,</span><br><span class="line">                    vt-&gt;m_alignment,</span><br><span class="line">                    vt-&gt;m_vAlignment,</span><br><span class="line">                    vt-&gt;m_strFontName.<span class="built_in">c_str</span>(),</span><br><span class="line">                    vt-&gt;m_fFontSize);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> kImage:</span><br><span class="line">            &#123;</span><br><span class="line">                  <span class="comment">//çº¹ç†é‡æ–°ç”±å›¾ç‰‡å¯¹è±¡åˆå§‹åŒ–ã€‚</span></span><br><span class="line">                vt-&gt;texture-&gt;<span class="built_in">initWithImage</span>(vt-&gt;uiImage);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®¾ç½®é‡æ–°è½½å…¥å®Œæˆ</span></span><br><span class="line">    isReloading = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CC_ENABLE_CACHE_TEXTURE_DATA</span></span></span><br><span class="line"> </span><br><span class="line">NS_CC_END</span><br></pre></td></tr></table></figure>

<p>åŸæ–‡é“¾æ¥ï¼š<a href=",https://www.bbsmax.com/A/lk5aEAZa51/" title="" target="">BBSMAX</a></p>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cocos2dx</tag>
        <tag>æ¸¸æˆå¼€å‘</tag>
        <tag>çº¹ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos CreatorèŠ‚ç‚¹æ·»åŠ åŒå‡»äº‹ä»¶</title>
    <url>/c260f47.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = cc.<span class="property">_decorator</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ccclass</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">DoubleClickHandler</span> <span class="keyword">extends</span> <span class="title class_ inherited__">cc.Component</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">lastClickTime</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="attr">doubleClickInterval</span>: <span class="built_in">number</span> = <span class="number">300</span>; <span class="comment">// ä¸¤æ¬¡ç‚¹å‡»çš„æ—¶é—´é—´éš”</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">on</span>(cc.<span class="property">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_END</span>, <span class="variable language_">this</span>.<span class="property">onTouchEnd</span>, <span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onTouchEnd</span>(<span class="params">event: cc.Event.EventTouch</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> currentTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>(); <span class="comment">// è·å–ç‚¹å‡»æ—¶çš„ç³»ç»Ÿæ—¶é—´ï¼Œæ—¶é—´æˆ³</span></span><br><span class="line">        <span class="keyword">if</span> (currentTime - <span class="variable language_">this</span>.<span class="property">lastClickTime</span> &lt;= <span class="variable language_">this</span>.<span class="property">doubleClickInterval</span>) &#123;</span><br><span class="line">            <span class="comment">// your code</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Double click!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">lastClickTime</span> = currentTime;  <span class="comment">// è®°å½•ä¸‹ç‚¹å‡»æ—¶çš„ç³»ç»Ÿæ—¶é—´</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º <code>DoubleClickHandler</code> çš„ç»„ä»¶ï¼Œç›‘å¬èŠ‚ç‚¹çš„<br><code>TOUCH_END </code>äº‹ä»¶ã€‚å½“è§¦æ‘¸ç»“æŸæ—¶ï¼Œå®ƒä¼šè®¡ç®—ä¸¤æ¬¡è§¦æ‘¸ä¹‹é—´çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ—¶é—´é—´éš”å°äºè®¾å®šçš„é˜ˆå€¼ï¼ˆ<code>doubleClickIntervalï¼‰</code>ï¼Œåˆ™ä¼šæ‰§è¡ŒåŒå‡»æ“ä½œã€‚</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorè¿è¡Œpythonè„šæœ¬å‡ºé”™</title>
    <url>/adf7652d.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<img data-src="https://s1.ax1x.com/2023/04/12/ppjAScq.png" style="width:600px;height:200px" alt="" />

<p>åœ¨Cocos Creatorä¸­è¿è¡Œä¸€ä¸ªpythonè„šæœ¬ï¼Œå‡ºç°äº†ä¸Šé¢é‚£ä¸ªé—®é¢˜ã€‚æŸ¥çœ‹pythonè„šæœ¬ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œéƒé—·äº†å¥½ä¹…ã€‚<br>è¿™ä¸ªæ—¶å€™æƒ³èµ·æ¥ä¸€å¥è¯ï¼šå…³æœºé‡å¯è§£å†³80%çš„é—®é¢˜ï¼Œäºæ˜¯ä¹é‡å¯Cocos Creatorï¼Œæ²¡æƒ³åˆ°çœŸçš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚<br>å¤ç›˜äº†ä¸€ä¸‹ï¼ŒçŒœæµ‹åŸå› ï¼šå®‰è£… Python3 æ—¶, Cocos æ˜¯æ‰“å¼€çš„çŠ¶æ€, å¯¼è‡´å®‰è£…åçš„ py ç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ, é‡å¯ç¼–è¾‘å™¨å°±å¯ä»¥ã€‚</p>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorè·å–æ‰‹æœºå‰ªåˆ‡æ¿å†…å®¹</title>
    <url>/1d25c150.html</url>
    <content><![CDATA[<p>æœ€è¿‘æ¸¸æˆä¸­éœ€è¦åŠ ä¸Šå¤åˆ¶ç²˜è´´çš„åŠŸèƒ½ï¼Œè¿™ä¸ªæ—¶å€™å°±æ¶‰åŠåˆ°å®‰å“åŸç”Ÿå±‚çš„ä¸œè¥¿ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="å¤åˆ¶åŠŸèƒ½"><a href="#å¤åˆ¶åŠŸèƒ½" class="headerlink" title="å¤åˆ¶åŠŸèƒ½"></a>å¤åˆ¶åŠŸèƒ½</h2><h3 id="tsä»£ç "><a href="#tsä»£ç " class="headerlink" title="tsä»£ç "></a>tsä»£ç </h3><p>è°ƒç”¨ä»£ç ï¼Œåœ¨éœ€è¦å¤åˆ¶çš„åœ°æ–¹è°ƒç”¨å³å¯ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">copyToClipBoard</span>(<span class="params">str</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (sys.<span class="property">platform</span> == sys.<span class="property">Platform</span>.<span class="property">ANDROID</span>) &#123;</span><br><span class="line">          <span class="title class_">PlatformMgr</span>.<span class="title function_">callNativeFn</span>(<span class="string">&quot;copyToClipboard&quot;</span>, str);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">callNativeFn</span>(<span class="attr">funcName</span>: <span class="built_in">string</span>, jsonMsg?: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;&#123; <span class="attr">msg</span>: <span class="built_in">string</span>, <span class="attr">isSucc</span>: <span class="built_in">boolean</span> &#125;&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (sys.<span class="property">platform</span> != sys.<span class="property">Platform</span>.<span class="property">ANDROID</span>) <span class="comment">// <span class="doctag">TODO:</span> web æš‚æ—¶åªæ”¯æŒ Android è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> fn = <span class="title class_">PlatformMgr</span>.<span class="property">Ins</span>.<span class="property">_platformIns</span>[funcName]</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> (fn) == <span class="string">&quot;function&quot;</span>) &#123; <span class="comment">// æ”¯æŒé‡å†™æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">fn</span>(funcName, jsonMsg)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">await</span> <span class="title class_">PlatformMgr</span>.<span class="property">Ins</span>.<span class="property">_platformIns</span>.<span class="title function_">callNativeFn</span>(funcName, jsonMsg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NativeMgr</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../../module/native/NativeMgr&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">PlatformBase</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€ç»ˆè°ƒç”¨ natvie æ¥å£</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">callNativeFn</span>(<span class="params">funcName: <span class="built_in">string</span>, jsonMsg?: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;&#123; <span class="attr">msg</span>: <span class="built_in">string</span>, <span class="attr">isSucc</span>: <span class="built_in">boolean</span> &#125;&gt;(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">NativeMgr</span>.<span class="property">Ins</span>.<span class="title function_">callNativeFunc</span>(<span class="function">(<span class="params">msg: <span class="built_in">string</span>, isSucc: <span class="built_in">boolean</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(&#123; <span class="attr">msg</span>: msg, <span class="attr">isSucc</span>: isSucc &#125;)</span><br><span class="line">            &#125;, funcName, jsonMsg)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="javaä»£ç "><a href="#javaä»£ç " class="headerlink" title="javaä»£ç "></a>javaä»£ç </h3><p>æ”¾åœ¨ä½ è‡ªå·±çš„é€»è¾‘ä¸­ï¼Œæ”¾åœ¨<code>AppActivity.java</code>ä¸­å³å¯ã€‚å‰é¢éœ€è¦<code>import</code>ç›¸å…³çš„åº“æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.ClipData;</span><br><span class="line"><span class="keyword">import</span> android.content.ClipboardManager;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨ä»£ç :</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyToClipboard</span><span class="params">(String textToCopy)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–å‰ªè´´æ¿ç®¡ç†å™¨</span></span><br><span class="line">        <span class="type">ClipboardManager</span> <span class="variable">clipboardManager</span> <span class="operator">=</span> (ClipboardManager) getActivity().getApplicationContext().getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»º ClipData å¯¹è±¡</span></span><br><span class="line">        <span class="type">ClipData</span> <span class="variable">clipData</span> <span class="operator">=</span> ClipData.newPlainText(<span class="string">&quot;Copied Text&quot;</span>, textToCopy);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°† ClipData è®¾ç½®åˆ°å‰ªè´´æ¿</span></span><br><span class="line">        clipboardManager.setPrimaryClip(clipData);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonobj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">            jsonobj.put(<span class="string">&quot;type&quot;</span>, <span class="string">&quot;copyText&quot;</span>);</span><br><span class="line">            jsonobj.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">            Log.d(<span class="string">&quot;copyToClipboard&quot;</span>,  jsonobj.toString());</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> String.format(<span class="string">&quot;NativeAndroid.javaCallback(\&#x27;%s\&#x27;)&quot;</span>, jsonobj.toString());</span><br><span class="line"><span class="comment">//                    CocosJavascriptJavaBridge.evalString(str);</span></span><br><span class="line">            callJsGlobalFunc(str);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="è·å–å‰ªåˆ‡æ¿å†…å®¹"><a href="#è·å–å‰ªåˆ‡æ¿å†…å®¹" class="headerlink" title="è·å–å‰ªåˆ‡æ¿å†…å®¹"></a>è·å–å‰ªåˆ‡æ¿å†…å®¹</h2><h3 id="tsä»£ç -1"><a href="#tsä»£ç -1" class="headerlink" title="tsä»£ç "></a>tsä»£ç </h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">copyToClipBoard</span>(<span class="params">str</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (sys.<span class="property">platform</span> == sys.<span class="property">Platform</span>.<span class="property">ANDROID</span>) &#123;</span><br><span class="line">          <span class="keyword">let</span> android = <span class="keyword">new</span> <span class="title class_">AndroidNative</span>();</span><br><span class="line">          android.<span class="title function_">getText</span>(<span class="string">&quot;getText&quot;</span>);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AndroidNative</span> <span class="keyword">implements</span> <span class="title class_">INativeCaller</span> &#123;</span><br><span class="line">     <span class="title function_">getText</span>(<span class="params">funcName: <span class="built_in">string</span>, jsonMsg: <span class="built_in">string</span> = <span class="string">&quot;&#123;&#125;&quot;</span></span>) &#123;   </span><br><span class="line">          <span class="keyword">let</span> getText = native.<span class="property">reflection</span>.<span class="title function_">callStaticMethod</span>(<span class="variable language_">this</span>.<span class="property">_activityName</span>, funcName, <span class="string">&quot;()Ljava/lang/String;&quot;</span>);</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‰ªåˆ‡æ¿å†…å®¹&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="javaä»£ç -1"><a href="#javaä»£ç -1" class="headerlink" title="javaä»£ç "></a>javaä»£ç </h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getText</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ClipboardManager</span> <span class="variable">clipboard</span> <span class="operator">=</span> (ClipboardManager) getActivity().getApplicationContext().getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">    <span class="type">ClipData</span> <span class="variable">clip</span> <span class="operator">=</span> clipboard.getPrimaryClip();</span><br><span class="line">    <span class="keyword">if</span> (clip != <span class="literal">null</span> &amp;&amp; clip.getItemCount() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        Log.d(<span class="string">&quot;å‰ªåˆ‡æ¿å†…å®¹ = &quot;</span>,clip.getItemAt(<span class="number">0</span>).coerceToText(getActivity().getApplicationContext()).toString());</span><br><span class="line">        <span class="keyword">return</span> clip.getItemAt(<span class="number">0</span>).coerceToText(getActivity().getApplicationContext()).toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatoråˆ¶ä½œåœ†å½¢è¿›åº¦æ¡</title>
    <url>/e68dac10.html</url>
    <content><![CDATA[<blockquote>
<p>æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸è¦ç”¨åˆ°åœ†å½¢è¿›åº¦æ¡ï¼Œä¾‹å¦‚æŠ€èƒ½CD</p>
</blockquote>
<p>ä¹‹å‰å†™äº†ä¸€ç¯‡<a href="https://lengmo714.top/18736.html">Cocos2dx-lua_ProgressTimeråˆ›å»ºæ‰‡å½¢è¿›åº¦æ¡</a>,è¿™é‡Œç®€å•è®°å½•ä¸‹åœ¨Cocos Creatorä¸­å¦‚ä½•åˆ¶ä½œã€‚</p>
<span id="more"></span>

<p>æ•ˆæœå›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/664de6b3d9c307b7e90d6ffc.gif" alt="æ•ˆæœå›¾"></p>
<h3 id="å…·ä½“æ–¹æ³•"><a href="#å…·ä½“æ–¹æ³•" class="headerlink" title="å…·ä½“æ–¹æ³•"></a>å…·ä½“æ–¹æ³•</h3><p>Cocos Creatoråšèµ·æ¥æ¯”2dxè¿˜æ˜¯è¦ç®€å•å¾ˆå¤šï¼Œé¦–å…ˆç»™èŠ‚ç‚¹æ·»åŠ <code>progress</code>ç»„ä»¶</p>
<h4 id="progressè®¾ç½®"><a href="#progressè®¾ç½®" class="headerlink" title="progressè®¾ç½®"></a>progressè®¾ç½®</h4><p>è®¾ç½®<code>Sprite</code>çš„<code>Fill Type</code>ä¸º<code>RADIAL</code>,å…·ä½“çš„å‚æ•°å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚<br><img data-src="https://pic.imgdb.cn/item/664de6b3d9c307b7e90d703c.png" alt="sprite"></p>
<blockquote>
<p>æ³¨æ„ï¼Œè¿™é‡Œçš„<code>Reverse</code>æ˜¯ç”¨æ¥ç¡®å®šè¿›åº¦æ¡çš„é©±è¿›æ–¹å‘ï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©æ˜¯å¦å‹¾é€‰ã€‚</p>
</blockquote>
<h4 id="Barè®¾ç½®"><a href="#Barè®¾ç½®" class="headerlink" title="Barè®¾ç½®"></a>Barè®¾ç½®</h4><p><img data-src="https://pic.imgdb.cn/item/664de6b3d9c307b7e90d7024.png" alt="Bar"><br>åªéœ€è¦è®¾ç½®è¿™å‡ ä¸ªåœ°æ–¹ï¼Œå°±æŠŠåœ†å½¢è¿›åº¦æ¡ç»™æå®šå•¦~ï¼Œèµ¶ç´§æ¥è¯•è¯•å§</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>Creating Circular Progress Bars in Cocos Creator</title>
    <url>/e68dac10.html</url>
    <content><![CDATA[<blockquote>
<p>Circular progress bars are often used in game development, such as for skill cooldowns.</p>
</blockquote>
<p>I previously wrote an article on <a href="https://lengmo714.top/18736.html">Cocos2dx-lua_ProgressTimer Creating Circular Progress Bars</a>, and here is a simple guide on how to do it in Cocos Creator.</p>
<span id="more"></span>

<h3 id="Example-Output"><a href="#Example-Output" class="headerlink" title="Example Output:"></a>Example Output:</h3><p><img data-src="https://pic.imgdb.cn/item/664de6b3d9c307b7e90d6ffc.gif" alt="æ•ˆæœå›¾"></p>
<h3 id="Steps-to-Create-a-Circular-Progress-Bar"><a href="#Steps-to-Create-a-Circular-Progress-Bar" class="headerlink" title="Steps to Create a Circular Progress Bar"></a>Steps to Create a Circular Progress Bar</h3><p>Creating a circular progress bar in Cocos Creator is simpler compared to 2dx. First, add a <code>progress</code> component to the node.</p>
<h4 id="Progress-Component-Settings"><a href="#Progress-Component-Settings" class="headerlink" title="Progress Component Settings"></a>Progress Component Settings</h4><p>Set the <code>Sprite</code>â€˜s <code>Fill Type</code> to <code>RADIAL</code>. The specific parameters are shown in the image below:<br><img data-src="https://pic.imgdb.cn/item/664de6b3d9c307b7e90d703c.png" alt="sprite"></p>
<blockquote>
<p>Note: The <code>Reverse</code> option determines the direction of the progress barâ€™s movement. Choose to check it or not based on your requirements.</p>
</blockquote>
<h4 id="Bar-Settings"><a href="#Bar-Settings" class="headerlink" title="Bar Settings"></a>Bar Settings</h4><p><img data-src="https://pic.imgdb.cn/item/664de6b3d9c307b7e90d7024.png" alt="Bar"><br>Just configure these few settings, and you will have your circular progress bar ready. Give it a try!</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>cè¯­è¨€ä¸­çš„ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹</title>
    <url>/23361.html</url>
    <content><![CDATA[<p>ä¸‹é¢è¿™ä¸ªç¤ºä¾‹å®ç°äº†ä¸€ç§å¾ˆç®€å•çš„ç±»å‹ï¼Œå³å¸ƒå°”ç±»å‹ã€‚é€‰ç”¨è¿™ä¸ªç¤ºä¾‹çš„åªè¦åŠ¨æœºåœ¨äºå®ƒä¸æ¶‰åŠå¤æ‚çš„ç®—æ³•ï¼Œä¾¿äºæˆ‘ä»¬ä¸“æ³¨äºAPIçš„é—®é¢˜ã€‚ä¸è¿‡å°½ç®¡å¦‚æ­¤ï¼Œè¿™ä¸ªç¤ºä¾‹æœ¬èº«è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Luaä¸­ç”¨æ¥è¡¨ç¤ºå®ç°å¸ƒå°”æ•°ç»„ã€‚ä½†æ˜¯ï¼Œåœ¨Cè¯­è¨€å®ç°ä¸­ï¼Œå¯ä»¥å°†æ¯ä¸ªå¸ƒå°”å€¼å­˜å‚¨åœ¨ä¸€ä¸ªæ¯”ç‰¹ä¸­ï¼Œæ‰€ä½¿ç”¨çš„å†…å­˜é‡ä¸åˆ°ä½¿ç”¨è¡¨æ–¹æ³•çš„3%ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>è¿™ä¸ªç¤ºä¾‹éœ€è¦ä»¥ä¸‹å®šä¹‰ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BITS_PER_WORD (CHAR_BIT * sizeof(unsigned int))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I_WORD(i)     ((unsigned int)(i) / BITS_PER_WORD)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I_BIT(i)	  (1 &lt;&lt; ((unsigned int)(i) % BITS_PER_WORD))</span></span><br></pre></td></tr></table></figure>
<p>BITS_PER_WORDè¡¨ç¤ºä¸€ä¸ªæ— ç¬¦å·æ•´å‹æ•°çš„ä½æ•°ï¼Œå®I_WORDç”¨äºæ ¹æ®æŒ‡å®šçš„ç´¢å¼•æ¥è®¡ç®—å­˜æ”¾ç›¸åº”æ¯”ç‰¹ä½çš„å­—ï¼ŒI_BITç”¨äºè®¡ç®—è®¿é—®è¿™ä¸ªå­—ä¸­ç›¸åº”æ¯”ç‰¹ä½è¦ç”¨çš„æ©ç ã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸‹çš„ç»“æ„ä½“æ¥è¡¨ç¤ºå¸ƒå°”æ•°ç»„ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">BitArray</span>&#123;</span></span><br><span class="line">	<span class="type">int</span> size;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> values[<span class="number">1</span>];</span><br><span class="line">&#125;BitArray;</span><br></pre></td></tr></table></figure>
<p>ç”±äºC89æ ‡å‡†ä¸å…è®¸åˆ†é…é•¿åº¦ä¸ºé›¶çš„æ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬å£°æ˜æ•°ç»„valuesçš„å¤§å°ä¸º1ï¼Œä»…æœ‰ä¸€ä¸ªå ä½ç¬¦ï¼›ç­‰åˆ†é…æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬å†è®¾ç½®æ•°ç»„çš„å®é™…å¤§å°ã€‚ä¸‹é¢è¿™ä¸ªè¡¨è¾¾å¼å¯ä»¥è®¡ç®—å‡ºæ‹¥æœ‰nä¸ªå…ƒç´ çš„æ•°ç»„å¤§å°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sizeof</span>(BitArray) * I_WORD(n <span class="number">-1</span>) * <span class="keyword">sizeof</span>(<span class="type">unsigned</span> <span class="type">int</span>)</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤„nå‡å»1æ˜¯å› ä¸ºåŸç»“æ„ä¸­å·²ç»åŒ…å«äº†ä¸€ä¸ªå…ƒç´ çš„ç©ºé—´ã€‚</p>
<h2 id="ç”¨æˆ·æ•°æ®"><a href="#ç”¨æˆ·æ•°æ®" class="headerlink" title="ç”¨æˆ·æ•°æ®"></a>ç”¨æˆ·æ•°æ®</h2><p>åœ¨ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ˜¾ç¤ºçš„è°ƒç”¨æ¥è®¾ç½®å’Œè·å–å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">a = <span class="built_in">array</span>.new(<span class="number">1000</span>)</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">1000</span> <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">array</span>.<span class="built_in">set</span>(a,i,i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">end</span><br><span class="line">print(<span class="built_in">array</span>.get(a,<span class="number">10</span>))			-- <span class="literal">true</span></span><br><span class="line">print(<span class="built_in">array</span>.get(a,<span class="number">11</span>))			-- fales</span><br><span class="line">paint(<span class="built_in">array</span>.size(a))			-- <span class="number">1000</span></span><br></pre></td></tr></table></figure>
<p>åç»­æˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•åŒæ—¶æ”¯æŒåƒa:get(i)è¿™æ ·çš„é¢å‘å¯¹è±¡é£æ ¼å’Œåƒa[i]è¿™æ ·çš„å¸¸è§è¯­æ³•ã€‚<br>åœ¨æ‰€æœ‰ç‰ˆæœ¬ä¸­ï¼Œä¸‹åˆ—å‡½æ•°æ˜¯ä¸€æ ·çš„ï¼Œå‚åŠ ç¤ºä¾‹ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ æ“ä½œå¸ƒå°”æ•°ç»„</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">newarray</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">int</span> i ;</span><br><span class="line">	<span class="type">size_t</span> nbytes;</span><br><span class="line">	BitArray *a;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> n = (<span class="type">int</span>)luaL_checkinteger(L,<span class="number">1</span>);</span><br><span class="line">	luaL_argcheck(L, n &gt;= <span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;invalid size&quot;</span>);</span><br><span class="line">	nbytes = <span class="keyword">sizeof</span>(BitArray) + I_WORD(n<span class="number">-1</span>)*<span class="keyword">sizeof</span>(<span class="type">unsigned</span> <span class="type">int</span>);</span><br><span class="line">	a = (BitArray *)lua_newuserdata(L,nbytes);</span><br><span class="line">	a -&gt; size = n;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= I_WORD(n<span class="number">-1</span>); i++)</span><br><span class="line">		a -&gt; values[i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">setarray</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	BitArray *a = (BitArray *)lua_touserdata(L,<span class="number">1</span>);</span><br><span class="line">	<span class="type">int</span> index = (<span class="type">int</span>)luaL_checkinteger(L,<span class="number">2</span>) - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	luaL_argcheck(L,a != <span class="literal">NULL</span> , <span class="number">1</span>, <span class="string">&quot;&#x27;array&#x27; expected&quot;</span>);</span><br><span class="line">	luaL_argcheck(L,<span class="number">0</span> &lt;= index &amp;&amp; index &lt; a-&gt;size, <span class="number">2</span> <span class="string">&quot;index out of range&quot;</span>);</span><br><span class="line"></span><br><span class="line">	luaL_checkany(L,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (lua_toboolean(L,<span class="number">3</span>))</span><br><span class="line">		a -&gt; values[I_WORD(index)] |= I_BIT(index);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		a -&gt; values[I_WORD(index)] &amp;= ~I_BIT(index);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">getarray</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	BitArray *a = (BitArray *)lua_touserdata(L,<span class="number">1</span>);</span><br><span class="line">	<span class="type">int</span> index = (<span class="type">int</span>)luaL_checkinteger(L,<span class="number">2</span>) - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	luaL_argcheck(L,a != <span class="literal">NULL</span>, <span class="number">1</span>, <span class="string">&quot;&#x27;array&#x27; expected&quot;</span>);</span><br><span class="line">	luaL_argcheck(L,<span class="number">0</span> &lt;= index &amp;&amp; index &lt;  a-&gt;size , <span class="number">2</span>, <span class="string">&quot;index out of range&quot;</span>);</span><br><span class="line"></span><br><span class="line">	lua_pushboolean(L, a-&gt; values[I_WORD(index)] &amp; I_BIT(index));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢è®©æˆ‘ä»¬ä¸€ç‚¹ä¸€ç‚¹åœ°åˆ†æã€‚<br>æˆ‘ä»¬é¦–å…ˆå…³å¿ƒçš„æ˜¯å¦‚ä½•åœ¨Luaä¸­è¡¨ç¤ºä¸€ä¸ªCè¯­è¨€ç»“æ„ä½“ã€‚Luaè¯­è¨€ä¸“é—¨ä¸ºè¿™ç±»ä»»åŠ¡æä¾›äº†ä¸€ä¸ªåä¸ºç”¨æˆ·æ•°æ®çš„å‰§æœ¬ç±»å‹ã€‚ç”¨æˆ·æ•°æ®ä¸ºLuaè¯­è¨€æä¾›äº†å¯ä»¥ç”¨æ¥å­˜å‚¨ä»»ä½•æ•°æ®çš„åŸå§‹å†…å­˜åŒºåŸŸï¼Œæ²¡æœ‰é¢„å®šä¹‰çš„æ“ä½œã€‚<br>å‡½æ•°lua_newuserdataåˆ†é…ä¸€å—æŒ‡å®šå¤§å°çš„å†…å­˜ï¼Œç„¶åå°†ç›¸åº”çš„ç”¨æˆ·æ•°æ®å‹æ ˆï¼Œå¹¶è¿”å›è¯¥å—å†…å­˜çš„åœ°å€ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> *<span class="title function_">lua_newuserdata</span> <span class="params">(lua_State *L, <span class="type">size_t</span> ,size)</span>;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå› ä¸ºä¸€äº›åŸå› éœ€è¦ç”¨å…¶ä»–æ–¹æ³•æ¥åˆ†é…å†…å­˜ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¤§å°çš„ç”¨æˆ·æ•°æ®å¹¶åœ¨å…¶ä¸­å­˜å‚¨ä¸€ä¸ªæŒ‡å‘çœŸå®å†…å­˜å—çš„æŒ‡é’ˆã€‚<br>ç¤ºä¾‹ä¸­ç¬¬ä¸€ä¸ªå‡½æ•°newarrayä½¿ç”¨lua_newuserdataåˆ›å»ºæ–°çš„æ•°ç»„ã€‚newarrayçš„ä»£ç å¾ˆç®€å•ï¼Œå®ƒæ£€æŸ¥äº†å…¶å”¯ä¸€çš„å‚æ•°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½è®¡ç®—å‡ºæ•°ç»„çš„å¤§å°ï¼Œåˆ›å»ºäº†ä¸€ä¸ªé€‚å½“å¤§å°çš„ç”¨æˆ·æ•°æ®ï¼Œåˆå§‹åŒ–ç”¨æˆ·æ•°æ®çš„å„ä¸ªå­—æ®µå¹¶å°†å…¶è¿”å›ç»™Luaã€‚<br>ç¬¬äºŒå‡½æ•°æ˜¯setarrayï¼Œå®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼šæ•°ç»„ã€ç´¢å¼•å’Œæ–°çš„å€¼ã€‚setarrayå‡å®šæ•°ç»„ç´¢å¼•åƒLuaè¯­è¨€ä¸­çš„é‚£æ ·æ˜¯ä»1å¼€å§‹çš„ã€‚å› ä¸ºLuaå¯ä»¥å°†ä»»æ„å€¼å½“åšå¸ƒå°”ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨luaL_checkanyæ£€æŸ¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œä¸è¿‡luaL_checkanyåªèƒ½ç¡®ä¿è¯¥å‚æ•°æœ‰ä¸€ä¸ªå€¼ã€‚å¦‚æœç”¨ä¸ç¬¦åˆæ¡ä»¶çš„å‚æ•°è°ƒç”¨äº†setarrayï¼Œå°†ä¼šæ”¶åˆ°ä¸€æ¡è§£é‡Šé”™è¯¯çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">array</span>.<span class="built_in">set</span>(<span class="number">0</span>,<span class="number">11</span>,<span class="number">0</span>)</span><br><span class="line">	-- <span class="built_in">stdin</span>:<span class="number">1</span>:bad argument #<span class="number">1</span> to <span class="string">&#x27;set&#x27;</span> (<span class="string">&#x27;array&#x27;</span> expected)</span><br><span class="line"><span class="built_in">array</span>.<span class="built_in">set</span>(a,<span class="number">1</span>)</span><br><span class="line">	-- <span class="built_in">stdin</span>:<span class="number">1</span>:bad argument #<span class="number">3</span> to <span class="string">&#x27;set&#x27;</span> (value expected)</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ä¸­çš„æœ€åä¸€ä¸ªå‡½æ•°æ˜¯getarrayï¼Œè¯¥å‡½æ•°ç±»ä¼¼äºsetarray,ç”¨äºè·å–å…ƒç´ ã€‚<br>æˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€ä¸ªè·å–æ•°ç»„å¤§å°çš„å‡½æ•°å’Œä¸€äº›åˆå§‹åŒ–åº“çš„é¢å¤–ä»£ç ï¼Œå‚è§ç¤ºä¾‹ï¼š</p>
<blockquote>
<p>ç¤ºä¾‹ å¸ƒå°”æ•°ç»„åº“çš„é¢å¤–ä»£ç </p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">getsize</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	BitArray *a = (BitArray *)lua_touserdata(L<span class="number">.1</span>);</span><br><span class="line">	luaL_argcheck(L,a != <span class="literal">NULL</span> , <span class="number">1</span>, <span class="string">&quot;&#x27;array&#x27; expected&quot;</span>);</span><br><span class="line">	lua_pushinteger(L, a -&gt; size);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">arraylib</span>[] =</span>&#123;</span><br><span class="line">	&#123;<span class="string">&quot;new&quot;</span>,newarray&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;set&quot;</span>,setarray&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;get&quot;</span>,getarray&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;size&quot;</span>,getsize&#125;,</span><br><span class="line">	&#123;<span class="literal">NULL</span>,<span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">luaopen_array</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	luaL_newlib(L, arraylib);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å†ä¸€æ¬¡ä½¿ç”¨äº†è¾…åŠ©åº“ä¸­çš„luaL_newlibï¼Œè¯¥å‡½æ•°åˆ›å»ºäº†ä¸€å¼ è¡¨ï¼Œå¹¶ä¸”ç”¨æ•°ç»„arraylibæŒ‡å®šçš„â€å‡½æ•°å-å‡½æ•°æŒ‡é’ˆâ€å¡«å……äº†è¿™å¼ è¡¨ã€‚</p>
<h2 id="å…ƒè¡¨"><a href="#å…ƒè¡¨" class="headerlink" title="å…ƒè¡¨"></a>å…ƒè¡¨</h2><p>æˆ‘ä»¬å½“å‰çš„é¢å®ç°æœ‰ä¸€ä¸ªé‡å¤§çš„æ¼æ´ã€‚å‡è®¾ç”¨æˆ·æ³„éœ²ä¸€æ¡åƒarray.set(io.stdin,1,false)è¿™æ ·çš„è¯­å¥ï¼Œé‚£ä¹ˆio.stdinçš„å€¼ä¼šæ˜¯ä¸€ä¸ªå¸¦æœ‰æŒ‡å‘æ–‡ä»¶æµï¼ˆFILE*ï¼‰çš„æŒ‡é’ˆçš„ç”¨æˆ·æ•°æ®ï¼Œarray.setä¼šå¼€å¿ƒåœ°è®¤ä¸ºå®ƒæ—¶ä¸€ä¸ªåˆæ³•çš„å‚æ•°ï¼›å…¶åæœå¯èƒ½å°±æ˜¯å†…å­˜å´©æºƒã€‚è¿™ç§è¡Œä¸ºå¯¹äºä»»ä½•ä¸€ä¸ªLuaåº“è€Œè¨€éƒ½æ˜¯ä¸å¯æ¥å—çš„ã€‚æ— è®ºä½ å¦‚ä½•ä½¿ç”¨åº“ï¼Œéƒ½ä¸åº”è¯¥ç ´åCè¯­è¨€çš„æ•°æ®ï¼Œä¹Ÿä¸åº”è¯¥è®©Luaè¯­è¨€å´©æºƒã€‚<br>è¦åŒºåˆ«ä¸åŒç±»å‹çš„ç”¨æˆ·æ•°æ®ï¼Œä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯ä¸ºæ¯ç§ç±»å‹åˆ›å»ºå”¯ä¸€çš„å…ƒè¡¨ã€‚æ¯æ¬¡åˆ›å»ºç”¨æˆ·æ•°æ®æ—¶ï¼Œç”¨ç›¸åº”çš„å…ƒè¡¨è¿›è¡Œæ ‡è®°ï¼›æ¯å½“è·å–ç”¨æˆ·æ•°æ®æ—¶ï¼Œæ£€æŸ¥å…¶æ˜¯å¦æœ‰æ­£ç¡®çš„å…ƒè¡¨ã€‚ç”±äºLuaä»£ç ä¸èƒ½æ”¹å˜ç”¨æˆ·æ•°æ®çš„å…ƒè¡¨ï¼Œå› æ­¤ä¸èƒ½ç»•è¿‡è¿™äº›æ£€æŸ¥ã€‚<br>æˆ‘ä»¬è¿˜éœ€è¦æœ‰ä¸ªåœ°æ–¹æ¥å­˜å‚¨è¿™ä¸ªæ–°çš„å…ƒè¡¨ï¼Œç„¶åæ‰èƒ½ç”¨å®ƒæ¥åˆ›å»ºæ–°çš„ç”¨æˆ·æ•°æ®å’Œæ£€æŸ¥æŒ‡å®šçš„ç”¨æˆ·æ•°æ®æ˜¯å¦å…·æœ‰æ­£ç¡®çš„ç±»å‹ã€‚æˆ‘ä»¬ä¹‹å‰å·²ç»çœ‹åˆ°è¿‡ï¼Œå­˜å‚¨å…ƒè¡¨æœ‰ä¸¤ç§æ–¹æ³•ï¼Œå³å­˜å‚¨åœ¨æ³¨å†Œè¡¨ä¸­æˆ–è€…åº“å‡½æ•°çš„ä¸Šå€¼ä¸­ã€‚åœ¨Luaè¯­è¨€ä¸­ï¼Œæƒ¯ä¾‹æ˜¯å°†æ‰€æœ‰æ–°çš„CåŸå› ç±»å‹æ³¨å†Œåˆ°æ³¨å†Œè¡¨ä¸­ï¼Œç”¨ç±»å‹åä½œä¸ºç´¢å¼•ï¼Œä»¥å…ƒè¡¨ä½œä¸ºå€¼ã€‚ç”±äºæ³¨å†Œè¡¨ä¸­è¿˜æœ‰å…¶ä»–ç´¢å¼•ï¼Œæ‰€ä»¥å¿…é¡»è°¨æ…é€‰æ‹©ç±»å‹åä»¥é¿å…å†²çªã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­å°†ä½¿ç”¨â€LuaBook.arrayâ€ä½œä¸ºè¿™ä¸ªæ–°ç±»å‹çš„åç§°ã€‚<br>é€šå¸¸ï¼Œè¾…åŠ©åº“ä¼šæä¾›ä¸€äº›å‡½æ•°æ¥å¸®å¿™å®ç°è¿™äº›å†…å®¹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨æ–°çš„è¾…åŠ©å‡½æ•°åŒ…æ‹¬ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>		<span class="title function_">luaL_newmetatable</span><span class="params">(lua_State *L, <span class="type">const</span> <span class="type">char</span> *tname)</span>;</span><br><span class="line"><span class="type">void</span> 	<span class="title function_">luaL_getmatatable</span><span class="params">(lua_State *L, <span class="type">const</span> <span class="type">char</span> *tname)</span>;</span><br><span class="line"><span class="type">void</span>   *<span class="title function_">luaL_checkudata</span>  <span class="params">(lua_State *L, <span class="type">int</span> index, <span class="type">const</span> <span class="type">char</span> *tname)</span>;</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°luaL_newmetatableä¼šåˆ›å»ºä¸€å¼ æ–°è¡¨ï¼Œç„¶åå°†å…¶å‹å…¥æ ˆé¡¶ï¼Œå¹¶å°†è¯¥è¡¨ä¸æ³¨å†Œè¡¨ä¸­çš„æŒ‡å®šåç§°å…³è”èµ·æ¥ã€‚å‡½æ•°luaL_getmetatableä»æ³¨å†Œè¡¨ä¸­è·å–ä¸tnameå…³è”çš„å…ƒè¡¨ã€‚æœ€åï¼ŒluaL_checkudataä¼šæ£€æŸ¥æ ˆä¸­æŒ‡å®šä½ç½®ä¸Šçš„å¯¹è±¡æ˜¯å¦æ˜¯äºæŒ‡å®šåç§°çš„å…ƒè¡¨åŒ¹é…çš„ç”¨æˆ·æ•°æ®ã€‚å¦‚æœè¯¥å¯¹è±¡ä¸æ˜¯ç”¨æˆ·æ•°æ•°æ®ï¼Œæˆ–è€…è¯¥ç”¨æˆ·æ•°æ®æ²¡æœ‰æ­£ç¡®çš„å…ƒè¡¨ï¼ŒluaL_checkudataå°±ä¼šå¼•å‘é”™è¯¯ï¼›å¦åˆ™ï¼ŒluaL_checkudataå°±è¿”å›è¿™ä¸ªç”¨æˆ·æ•°æ®çš„åœ°å€ã€‚<br>ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹ä¿®æ”¹å‰é¢çš„ä»£ç ã€‚ç¬¬ä¸€æ­¥æ˜¯ä¿®æ”¹æ‰“å¼€åº“çš„å‡½æ•°ï¼Œè®©è¯¥å‡½æ•°ä¸ºæ•°ç»„åˆ›å»ºå…ƒè¡¨ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">luaopen_array</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	luaL_newmetatable(L,<span class="string">&quot;LuaBook.array&quot;</span>);</span><br><span class="line">	luaL_newlib(L,arraylib);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹ä¸€æ­¥æ˜¯ä¿®æ”¹newarrayä½¿å…¶èƒ½ä¸ºå…¶æ–°å»ºçš„æ‰€æœ‰æ•°ç»„è®¾ç½®è¿™ä¸ªå…ƒè¡¨ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">newarray</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	åŒå‰</span><br><span class="line">	luaL_getmatatable(L,<span class="string">&quot;LuaBook.array&quot;</span>);</span><br><span class="line">	lua_setmetatable(L,<span class="number">-2</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°lua_setmetatableä¼šä»æ ˆä¸­å¼¹å‡ºä¸€ä¸ªè¡¨ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºæŒ‡å®šç´¢å¼•ä¸Šå¯¹è±¡çš„å…ƒè¡¨ã€‚åœ¨æœ¬ä¾‹ä¸­è¿™ä¸ªå¯¹è±¡å°±æ˜¯æ–°å»ºçš„ç”¨æˆ·æ•°æ®ã€‚<br>æœ€åï¼Œsetarrayã€getarrayå’Œgetsizeå¿…é¡»æ£€æŸ¥å…¶ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ•°ç»„ã€‚ä¸ºäº†ç®€åŒ–è¿™é¡¹ä»»åŠ¡ï¼Œæˆ‘ä»¬å®šä¹‰å¦‚ä¸‹çš„å®ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> checkarray(L) (BitArray *)luaL_checkudata(L,1,<span class="string">&quot;LuaBook.array&quot;</span>)</span></span><br></pre></td></tr></table></figure>
<p>æœ‰äº†è¿™ä¸ªå®ï¼Œgetsizeçš„å®šä¹‰å°±å¾ˆç®€å•äº†ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">getsize</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	BitArray *a = checkarray(L);</span><br><span class="line">	lua_pushinteger(L,a-&gt;size);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±äºsetarrayå’Œgetarrayè¿˜å…±äº«äº†ç”¨æ¥è¯»å–å’Œæ£€æŸ¥å®ƒä»¬çš„ç¬¬äºŒä¸ªå‚æ•°çš„ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶é€šç”¨éƒ¨åˆ†æå–å‡ºæ¥ç»„æˆäº†ä¸€ä¸ªæ–°çš„è¾…åŠ©å‡½æ•°ï¼ˆgetparamsï¼‰</p>
<blockquote>
<p>ç¤ºä¾‹ setarray&#x2F;getarrayçš„æ–°ç‰ˆæœ¬</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">unsigned</span> <span class="type">int</span> *<span class="title function_">getparams</span> <span class="params">(lua_State *L, <span class="type">unsigned</span> <span class="type">int</span> *mask)</span>&#123;</span><br><span class="line">	BitArray *a = checkarray(L);</span><br><span class="line">	<span class="type">int</span> index = (<span class="type">int</span>)luaL_checkinteger(L,<span class="number">2</span>) <span class="number">-1</span> ;</span><br><span class="line">	luaL_argcheck(L,<span class="number">0</span> &lt;= index &amp;&amp; index &lt; a-&gt; size, <span class="number">2</span>, <span class="string">&quot;index out of range&quot;</span>);</span><br><span class="line">	*mask = I_BIT(index);</span><br><span class="line">	<span class="keyword">return</span> &amp;a -&gt; values[I_WORD(index)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">setarray</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> mask;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> *entry = getparams(L,&amp;mask);</span><br><span class="line">	luaL_checkany(L,<span class="number">3</span>);</span><br><span class="line">	<span class="keyword">if</span> (lua_toboolean(L,<span class="number">3</span>))</span><br><span class="line">		*entry |= mask;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		*entry &amp;= ~mask;</span><br><span class="line">		reuturn <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">getarray</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> mask;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> *entry = getparams(L,&amp;mask);</span><br><span class="line">	lua_pushboolean(L,*entry &amp; mask);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªæ–°ç‰ˆæœ¬ä¸­ï¼Œsetarrayå’Œgetarrayéƒ½å¾ˆç®€å•ï¼Œå‚è§ç¤ºä¾‹ã€‚ç°åœ¨ï¼Œå¦‚æœè°ƒç”¨ä»–ä»¬æ—¶ä½¿ç”¨äº†æ— æ•ˆçš„ç”¨æˆ·æ•°æ®ï¼Œæˆ‘ä»¬å°†ä¼šæ”¶åˆ°ä¸€æ¡ç›¸åº”çš„é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">a = <span class="built_in">array</span>.get(io.<span class="built_in">stdin</span>,<span class="number">10</span>)</span><br><span class="line">-- bad argument #<span class="number">1</span> to <span class="string">&#x27;get&#x27;</span> (LuaBook.<span class="built_in">array</span> expected, got FILE*)</span><br></pre></td></tr></table></figure>

<h2 id="é¢å‘å¯¹è±¡è®¿é—®"><a href="#é¢å‘å¯¹è±¡è®¿é—®" class="headerlink" title="é¢å‘å¯¹è±¡è®¿é—®"></a>é¢å‘å¯¹è±¡è®¿é—®</h2><p>ä¸‹ä¸€æ­¥æ˜¯å°†è¿™ç§æ–°ç±»å‹è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿ç”¨æ™®é€šçš„é¢å‘å¯¹è±¡è¯­æ³•æ¥æ“ä½œå…¶å®ä¾‹ã€‚ä¾‹å¦‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = array.new(<span class="number">1000</span>)</span><br><span class="line"><span class="built_in">print</span>(a:size())			-- <span class="number">1000</span></span><br><span class="line">a:<span class="built_in">set</span>(<span class="number">10</span>,true)</span><br><span class="line"><span class="built_in">print</span>(a:get(<span class="number">10</span>))		-- true</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œa:size()ç­‰ä»·äºa.size(a)ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»è®©è¡¨è¾¾å¼a.sizeè¿”å›å‡½æ•°getsizeã€‚æ­¤å¤„çš„å…³é”®æœºåˆ¶åœ¨äºå…ƒæ–¹æ³•__indexã€‚å¯¹äºè¡¨è€Œè¨€ï¼ŒLuaä¼šåœ¨æ‰¾ä¸åˆ°çš„æŒ‡å®šé”®æ—¶è°ƒç”¨è¿™ä¸ªå…ƒæ–¹æ³•ï¼›è€Œå¯¹äºç”¨æˆ·æ•°æ®è€Œè¨€ï¼Œç”±äºç”¨æˆ·æ•°æ®æ ¹æœ¬æ²¡æœ‰é”®ï¼Œæ‰€ä»¥Luaåœ¨æ¯æ¬¡è®¿é—®æ—¶éƒ½ä¼šè°ƒç”¨è¯¥å…ƒæ–¹æ³•ã€‚<br>å‡è®¾æˆ‘ä»¬è¿è¡Œäº†ä¸€ä¸‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">do </span><br><span class="line">	local metaarry = getmetatable(array.new(<span class="number">1</span>))</span><br><span class="line">	metaarry.__index = metaarry</span><br><span class="line">	metaarry.<span class="built_in">set</span> = array.<span class="built_in">set</span></span><br><span class="line">	metaarry.get = array.get</span><br><span class="line">	metaarry.size = array.sizeo</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>åœ¨ç¬¬ä¸€è¡Œä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„ç”¨æˆ·è·å–åˆ†é…ç»™metaarrayçš„å…ƒè¡¨ï¼ˆæˆ‘ä»¬æ— æ³•åœ¨Luaä¸­è®¾ç½®ç”¨æˆ·æ•°æ®çš„å…ƒè¡¨ï¼Œä½†æ˜¯å¯ä»¥è·å–ç”¨æˆ·æ•°æ®çš„å…ƒè¡¨ï¼‰ã€‚ç„¶åï¼Œå°†metaarray.__indexè®¾ç½®ä¸ºmetaarrayã€‚å½“å¯¹a.sizeæ±‚å€¼æ—¶ï¼Œå› ä¸ºå¯¹è±¡aæ˜¯ä¸€ä¸ªç”¨æˆ·æ•°æ®ï¼Œæ‰€ä»¥Luaåœ¨å¯¹è±¡aä¸­æ— æ³•æ‰¾åˆ°é”®â€sizeâ€ã€‚å› æ­¤ï¼ŒLuaä¼šå°è¯•é€šè¿‡açš„å…ƒè¡¨çš„__indexå­—æ®µæ¥è·å–è¿™ä¸ªå€¼ï¼Œè€Œè¿™ä¸ªå­—æ®µæ­£å¥½å°±æ˜¯metaarrayã€‚ç”±äºmetaarray.sizeå°±æ˜¯array.sizeï¼Œæ‰€ä»¥a.size(a)å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„array.size(a)ã€‚<br>å½“ç„¶ï¼Œç”¨Cè¯­è¨€ä¹Ÿå¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼Œç”šè‡³è¿˜å¯ä»¥åšå¾—æ›´å¥½ï¼šæ—¢ç„¶æ•°ç»„æœ‰è‡ªå·±çš„æ“ä½œçš„å¯¹è±¡ï¼Œé‚£ä¹ˆåœ¨è¡¨arrayä¸­ä¹Ÿå°±æ— éœ€åŒ…å«è¿™äº›æ“ä½œäº†ã€‚æˆ‘ä»¬çš„åº“åªéœ€å¯¼å‡ºä¸€ä¸ªç”¨äºåˆ›å»ºæ–°æ•°ç»„çš„å‡½æ•°newå°±è¡Œäº†ï¼Œæ‰€æœ‰çš„å…¶ä»–æ“ä½œéƒ½å˜æˆäº†å¯¹è±¡çš„æ–¹æ³•ã€‚Cè¯­è¨€ä»£ç åŒæ ·å¯ä»¥ç›´æ¥æ³¨å†Œè¿™äº›æ–¹æ³•ã€‚<br>æ“ä½œgetsizeã€getarrayå’Œsetarrayæ— é¡»åšä»»ä½•æ”¹å˜ï¼Œå”¯ä¸€éœ€è¦æ”¹å˜çš„æ˜¯æ³¨å†Œå®ƒä»¬çš„æ–¹å¼ã€‚æ¢è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬å¿…é¡»ä¿®æ”¹æ‰“å¼€åº“çš„å‡½æ•°ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªç‹¬ç«‹çš„å‡½æ•°åˆ—è¡¨ï¼Œä¸€ä¸ªç”¨æˆ·å¸¸è§„çš„å‡½æ•°ï¼Œå¦ä¸€ä¸ªç”¨æˆ·æ–¹æ³•ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">arraylib_f</span>[] =</span> &#123;</span><br><span class="line">	&#123;<span class="string">&quot;new&quot;</span>,newarray&#125;,</span><br><span class="line">	&#123;<span class="literal">NULL</span>,<span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">arraylib_m</span>[] =</span> &#123;</span><br><span class="line">	&#123;<span class="string">&quot;set&quot;</span>,setarray&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;get&quot;</span>,getarray&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;size&quot;</span>,getsize&#125;,</span><br><span class="line">	&#123;<span class="literal">NULL</span>,<span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ–°çš„æ‰“å¼€å‡½æ•°luaopen_arrayå¿…é¡»åˆ›å»ºå…ƒè¡¨ï¼Œå¹¶æŠŠå®ƒèµ‹ç»™è‡ªå·±çš„__indexå­—æ®µï¼Œç„¶ååœ¨å…ƒè¡¨ä¸­æ³¨å†Œæ‰€æœ‰æ–¹æ³•ï¼Œåˆ›å»ºå’Œå¡«å……è¡¨array:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">luaopen_array</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	luaL+newetatable(L,<span class="string">&quot;LuaBook.array&quot;</span>);  <span class="comment">// åˆ›å»ºå…ƒè¡¨</span></span><br><span class="line">	lua_pushvalue(L,<span class="number">-1</span>);   <span class="comment">// å¤åˆ¶å…ƒè¡¨</span></span><br><span class="line">	lua_setfield(L,<span class="number">-2</span>,<span class="string">&quot;__index&quot;</span>); <span class="comment">// mt.__index = mt</span></span><br><span class="line">	luaL_setfuncs(L,arraylib_m,<span class="number">0</span>);  <span class="comment">// æ³¨å†Œå…ƒæ–¹æ³•</span></span><br><span class="line">	luaL_newlib(L,arraylib_f);   <span class="comment">// åˆ›å»ºåº“</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬å†æ¬¡ä½¿ç”¨äº†luaL_setfuncså°†åˆ—è¡¨arraylib_mä¸­çš„å‡½æ•°èµ‹å€¼åˆ°æ ˆé¡¶çš„å…ƒè¡¨ä¸­ã€‚ç„¶åï¼Œè°ƒç”¨luaL_newlibåˆ›å»ºä¸€å¼ æ–°è¡¨ï¼Œå¹¶åœ¨è¯¥è¡¨ä¸­æ³¨å†Œæ¥è‡ªåˆ—è¡¨arraylib_fçš„å‡½æ•°ã€‚<br>æœ€åï¼Œå‘æ–°ç±»å‹ä¸­æ–°å¢ä¸€ä¸ª__tostringå…ƒæ–¹æ³•ï¼Œè¿™æ ·print(a)å°±å¯ä»¥æ‰“å°å‡ºâ€arrayâ€ä»¥åŠç”¨æ‹¬å·æ‹¬èµ·æ¥çš„æ•°ç»„çš„å¤§å°äº†ã€‚è¯¥å‡½æ•°å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">array2string</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	BitArray *a = checkarray(L);</span><br><span class="line">	lua_pushfstring(L.<span class="string">&quot;array(%d)&quot;</span>, a-&gt; size);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨lua_pushfstringæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶ä¿ç•™åœ¨æ ˆé¡¶ã€‚æˆ‘ä»¬è¿˜éœ€è¦å°†array2stringæ·»åŠ åˆ°åˆ—è¡¨arraylib_mä¸­ï¼Œä»¥æ­¤å°†å‡½æ•°åŠ å…¥åˆ°æ•°ç»„å¯¹è±¡çš„å…ƒè¡¨ä¸­ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">arraylib_m</span>[] =</span> &#123;</span><br><span class="line">	&#123;<span class="string">&quot;__tostring&quot;</span>, array2string&#125;,</span><br><span class="line">	other <span class="title function_">methods</span><span class="params">(å…¶ä»–æ–¹æ³•)</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="æ•°ç»„è®¿é—®"><a href="#æ•°ç»„è®¿é—®" class="headerlink" title="æ•°ç»„è®¿é—®"></a>æ•°ç»„è®¿é—®</h2><p>å¦ä¸€ç§æ›´å¥½çš„é¢å‘å¯¹è±¡çš„è¡¨ç¤ºæ–¹æ³•æ˜¯ï¼Œä½¿ç”¨æ™®é€šçš„æ•°ç»„ç¬¦å·æ¥è®¿é—®æ•°ç»„ã€‚åªéœ€è¦ç®€å•åœ°ä½¿ç”¨a[i]å°±å¯ä»¥æ›¿ä»£a:get(i)ã€‚å¯¹äºä¸Šé¢çš„æ˜¯ç¤ºä¾‹ï¼Œç”±äºå‡½æ•°setarrayå’Œgetarrayæœ¬èº«å°±æ˜¯æŒ‰ç…§ä¼ é€’ç»™ç›¸åº”å…ƒæ–¹æ³•çš„å‚æ•°çš„é¡ºåºæ¥æ¥æ”¶å‚æ•°çš„ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“åšåˆ°è¿™ä¸€ç‚¹ã€‚ä¸€ç§å¿«é€Ÿçš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ç›´æ¥åœ¨Luaä¸­å®šä¹‰è¿™äº›å…ƒæ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">local metaarry = getmetatable(array.new(<span class="number">1</span>))</span><br><span class="line">metaarry.__index = array.get</span><br><span class="line">metaarry.__newindex = array.<span class="built_in">set</span></span><br><span class="line">metaarry.__<span class="built_in">len</span> = array.sizeof</span><br></pre></td></tr></table></figure>
<p>å¿…é¡»åœ¨æ•°ç»„åŸæ¥çš„å®ç°ä¸­è¿è¡Œè¿™æ®µä»£ç ï¼Œæ— é¡»ä¿®æ”¹é¢å‘å¯¹è±¡çš„è®¿é—®ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥ä½¿ç”¨æ ‡å‡†è¯­æ³•äº†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = array.new(<span class="number">1000</span>)</span><br><span class="line">a[<span class="number">10</span>] = true 			-- <span class="string">&#x27;setarray&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">10</span>])			-- <span class="string">&#x27;getarray&#x27;</span>		-- true</span><br><span class="line"><span class="built_in">print</span>(<span class="comment">#a)				-- &#x27;getsize&#x27;		-- 1000</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¿˜è¦æ›´åŠ å®Œç¾ï¼Œå¯ä»¥åœ¨Cè¯­è¨€ä¸­æ³¨å†Œè¿™äº›å…ƒæ–¹æ³•ã€‚ä¸ºæ­¤ï¼Œéœ€è¦å†æ¬¡ä¿®æ”¹åˆå§‹åŒ–å‡½æ•°ã€‚å‚è§å¦‚ä¸‹ç¤ºä¾‹ï¼š</p>
<blockquote>
<p>ç¤ºä¾‹ æ–°çš„åˆå§‹åŒ–æ¯”ç‰¹æ•°ç»„åº“çš„ä»£ç </p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">arraylib_f</span>[] =</span> &#123;</span><br><span class="line">	&#123;<span class="string">&quot;new&quot;</span>,newarray&#125;,</span><br><span class="line">	&#123;<span class="literal">NULL</span>,<span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">arraylib_m</span>[] =</span> &#123;</span><br><span class="line">	&#123;<span class="string">&quot;__newindex&quot;</span>,setarray&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;__index&quot;</span>,getarray&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;__len&quot;</span>,getsize&#125;,</span><br><span class="line">	(<span class="string">&quot;__tostring&quot;</span>,array2string),</span><br><span class="line">	&#123;<span class="literal">NULL</span>,<span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">luaopen_array</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	luaL_newmetatable(L,<span class="string">&quot;LuaBook.array&quot;</span>);</span><br><span class="line">	luaL_setfuncs(L,arraylib_m,<span class="number">0</span>);</span><br><span class="line">	luaL_newlib(L,arraylib_f);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªæ–°ç‰ˆæœ¬ä¸­ï¼Œä»ç„¶åªæœ‰ä¸€ä¸ªå…¬æœ‰å‡½æ•°newï¼Œæ‰€æœ‰çš„å…¶ä»–å‡½æ•°éƒ½åªæ˜¯ç‰¹å®šæ“ä½œçš„å…ƒæ–¹æ³•ã€‚</p>
<p>##è½»é‡çº§ç”¨æˆ·æ•°æ®<br>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ç”¨æˆ·æ•°æ®æˆä¸ºå®Œå…¨ç”¨æˆ·æ•°æ®ã€‚Luaè¯­è¨€è¿˜æä¾›äº†å¦ä¸€ç§æ•°æ®ï¼Œæˆä¸ºè½»é‡çº§ç”¨æˆ·æ•°æ®ã€‚<br>è½»é‡çº§ç”¨æˆ·æ•°æ®æ—¶ä¸€ä¸ªä»£è¡¨Cè¯­è¨€æŒ‡é’ˆçš„å€¼ï¼Œå³å®ƒæ—¶ä¸€ä¸ªvoid*å€¼ã€‚å› ä¸ºè½»é‡çº§ç”¨æˆ·æ•°æ®æ˜¯ä¸€ä¸ªå€¼è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥æ— é¡»åˆ›å»ºå®ƒï¼ˆå°±å¥½æ¯”æˆ‘ä»¬ä¹Ÿä¸éœ€è¦åˆ›å»ºæ•°ç»„ï¼‰ã€‚è¦å°†ä¸€ä¸ªè½»é‡çº§ç”¨æˆ·æ•°æ®æ”¾å…¥æ ˆä¸­ï¼Œå¯ä»¥è°ƒç”¨lua_pushlightuserdata:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">lua_pushlightuserdata</span><span class="params">(lua_State *L,<span class="type">void</span> *p)</span>;</span><br></pre></td></tr></table></figure>
<p>å°½ç®¡åå­—å·®ä¸å¤šï¼Œä½†å®é™…ä¸Šè½»é‡çº§ç”¨æˆ·æ•°æ®å’Œå®Œå…¨ç”¨æˆ·æ•°æ®ä¹‹é—´åŒºåˆ«å¾ˆå¤§ã€‚è½»é‡çº§ç”¨æˆ·æ•°æ®ä¸æ˜¯ç¼“å†²åŒºï¼Œè€Œåªæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒä»¬ä¹Ÿæ²¡æœ‰å…ƒè¡¨ã€‚ä¸æ•°å€¼ä¸€æ ·ï¼Œè½»é‡çº§ç”¨æˆ·æ•°æ®ä¸å—åƒåœ¾æ”¶é›†å™¨çš„ç®¡ç†ã€‚<br>æœ‰æ—¶ï¼Œäººä»¬ä¼šå°†è½»é‡çº§ç”¨æˆ·æ•°æ®å½“åšå®Œå…¨ç”¨æˆ·æ•°æ®çš„ä¸€ç§å»‰ä»·æ›¿ä»£ç‰©æ¥ä½¿ç”¨ï¼Œä½†è¿™ç§ç”¨æ³•å¹¶ä¸æ™®éã€‚é¦–å…ˆï¼Œè½»é‡çº§ç”¨æˆ·æ•°æ•°æ®æ²¡æœ‰å…ƒè¡¨ï¼Œå› æ­¤æ²¡æœ‰åŠæ³•å¾—çŸ¥å…¶ç±»å‹ã€‚å…¶æ¬¡ï¼Œä¸è¦â€œå®Œå…¨â€äºŒå­—æ‰€è¿·æƒ‘ï¼Œå®é™…ä¸Šå®Œå…¨ç”¨æˆ·æ•°æ®çš„å¼€é”€ä¹Ÿå¹¶ä¸å¤§ã€‚å¯¹äºç»™å®šçš„å†…å­˜å¤§å°ï¼Œå®Œå…¨ç”¨æˆ·æ•°æ®ä¸mallocç›¸æ¯”å€¼å¢åŠ äº†ä¸€ç‚¹å¼€é”€ã€‚<br>è½»é‡çº§ç”¨æˆ·æ•°æ®çš„çœŸæ­£ç”¨é€”æ˜¯ç›¸ç­‰æ€§åˆ¤æ–­ã€‚ç”±äºå®Œå…¨ç”¨æˆ·æ•°æ®æ—¶ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å®ƒåªå’Œè‡ªèº«ç›¸ç­‰ï¼›ç„¶è€Œï¼Œä¸€ä¸ªè½»é‡çº§ç”¨æˆ·æ•°æ®è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªCè¯­è¨€æŒ‡é’ˆçš„å€¼ã€‚å› æ­¤ï¼Œå®ƒä¸æ‰€æœ‰è¡¨ç¤ºç›¸åŒæŒ‡é’ˆçš„è½»é‡çº§ç”¨æˆ·æ•°æ®ç›¸ç­‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è½»é‡çº§ç”¨æˆ·æ•°æ®åœ¨Luaè¯­è¨€ä¸­æŸ¥æ‰¾Cè¯­è¨€å¯¹è±¡ã€‚<br>æˆ‘ä»¬å·²ç»è§åˆ°è¿‡è½»é‡çº§ç”¨æˆ·æ•°æ®çš„ä¸€ç§å…¸å‹ç”¨æ³•ï¼Œå³åœ¨æ³¨å†Œè¡¨ä¸­è¢«ç”¨ä½œé”®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè½»é‡çº§ç”¨æˆ·æ•°æ®çš„ç›¸ç­‰æ€§æ˜¯è‡³å…³é‡è¦çš„ã€‚æ¯æ¬¡ä½¿ç”¨lua_pushlightuserdataå‹å…¥ç›¸åŒçš„åœ°å€æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šå¾—åˆ°ç›¸åŒçš„Luaå€¼ï¼Œä¹Ÿå°±æ˜¯æ³¨å†Œè¡¨ä¸­ç›¸åŒçš„å…ƒç´ ã€‚<br>Luaè¯­è¨€ä¸­å¦ä¸€ç§å…¸å‹çš„åœºæ™¯æ˜¯æŠŠLuaè¯­è¨€å¯¹è±¡å½“åšå¯¹åº”çš„Cè¯­è¨€å¯¹è±¡çš„ä»£ç†ã€‚ä¾‹å¦‚ï¼šè¾“å…¥&#x2F;è¾“å‡ºåº“ä½¿ç”¨Luaä¸­çš„ç”¨æˆ·æ•°æ®æ¥è¡¨ç¤ºCè¯­è¨€çš„æµã€‚å½“æ“ä½œæ—¶ä»Luaè¯­è¨€åˆ°Cè¯­è¨€æ—¶ï¼Œä»Luaå¯¹è±¡åˆ°Cå¯¹è±¡çš„æ˜ å°„å¾ˆç®€å•ã€‚è¿˜æ˜¯ä»¥è¾“å…¥&#x2F;è¾“å‡ºåº“ä¸ºä¾‹ï¼Œæ¯ä¸ªLuaè¯­è¨€æµä¼šä¿å­˜æŒ‡å‘å…¶ç›¸åº”Cè¯­è¨€æµçš„æŒ‡é’ˆã€‚ä¸è¿‡ï¼Œå½“æ“ä½œæ—¶ä»Cè¯­è¨€åˆ°Luaè¯­è¨€æ—¶ï¼Œè¿™ç§æ˜ å°„å°±å¯èƒ½æ¯”è¾ƒæ£˜æ‰‹ã€‚ä¾‹å¦‚ï¼Œå‡è®¾åœ¨è¾“å…¥&#x2F;è¾“å‡ºç³»ç»Ÿä¸­æœ‰æŸäº›å›è°ƒå‡½æ•°ï¼ˆä¾‹å¦‚ï¼Œé‚£äº›å‘Šè¯‰æˆ‘ä»¬è¿˜æœ‰å¤šå°‘æ•°æ®éœ€è¦è¢«è¯»å–çš„å‡½æ•°ï¼‰ï¼Œå›è°ƒå‡½æ•°æ¥æ”¶å®ƒè¦æ“ä½œçš„Cè¯­è¨€æµï¼Œé‚£ä¹ˆå¦‚ä½•ä»ä¸­å¾—åˆ°å…¶ç›¸åº”çš„Luaå¯¹è±¡å‘¢ï¼Ÿç”±äºCè¯­è¨€æµæ˜¯ç”±Cè¯­è¨€æ ‡å‡†åº“å®šä¹‰çš„è€Œä¸æ˜¯æˆ‘ä»¬å®šä¹‰çš„ï¼Œå› æ­¤æ— æ³•åœ¨Cè¯­è¨€æµä¸­å­˜å‚¨ä»»ä½•ä¸œè¥¿ã€‚<br>è½»é‡çº§ç”¨æˆ·æ•°æ®ä¸ºè¿™ç§æ˜ å°„æä¾›äº†ä¸€ç§å¥½çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬å¯ä»¥ä¿å­˜ä¸€å¼ è¡¨ï¼Œå…¶ä¸­é”®æ˜¯å¸¦æœ‰æµåœ°å€çš„è½»é‡çº§ç”¨æˆ·æ•°æ®ï¼Œå€¼æ˜¯Luaä¸­è¡¨ç¤ºæµçš„å®Œå…¨ç”¨æˆ·æ•°æ®ã€‚åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œä¸€æ—¦æœ‰äº†æµåœ°å€ï¼Œå°±å¯ä»¥å°†å…¶ä½œä¸ºè½»é‡çº§ç”¨æˆ·æ•°æ®ï¼ŒæŠŠå®ƒå½“åšè¿™å¼ è¡¨çš„ç´¢å¼•æ¥è·å–å¯¹åº”çš„Luaå¯¹è±¡ï¼ˆè¿™å¼ è¡¨å¾ˆå¯èƒ½å¾—äº‹å¼±å¼•ç”¨çš„ï¼›å¦åˆ™ï¼Œè¿™äº›å®Œå…¨ç”¨æˆ·æ•°æ®å¯èƒ½æ°¸è¿œä¸ä¼šè¢«ä½œä¸ºåƒåœ¾å›æ”¶ï¼‰ã€‚</p>
]]></content>
      <tags>
        <tag>C</tag>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>androidStudio build type isn&#39;t debuggable</title>
    <url>/dfc8d152.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»Šå¤©åœ¨ä½¿ç”¨<code>android studio</code>è°ƒè¯•ä»£ç çš„æ—¶å€™ï¼ŒæŠ¥é”™ï¼š<code>build type isn&#39;t debuggable</code>ï¼›<br>æ¨èä¸ªäººè§‰å¾—æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•ï¼š</p>
<ul>
<li>ç‚¹å‡»æ—¥å¿—æ¡†å·¦ä¾§çš„<code>BuildVariants</code></li>
<li>å°±ä¼šçœ‹åˆ°ä¸‹å›¾å·¦ä¸Šæ–¹çš„æ ·å¼</li>
<li>ç‚¹å‡»<code>release</code>ï¼Œé€‰æ‹©<code>debug</code>å³å¯<br>å…·ä½“å¦‚ä¸‹å›¾ï¼š<img data-src="https://s11.ax1x.com/2024/02/22/pFNIFXV.png"  alt="" /></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>Entry name &#39;classes.dex&#39; collided</title>
    <url>/680185d4.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»Šå¤©åœ¨ä½¿ç”¨<code>android studio</code>æ‰“<code>release</code>åŒ…çš„æ—¶å€™ï¼ŒæŠ¥é”™ï¼š<code>Entry name &#39;classes.dex&#39; collided</code>ï¼›<br>å¦‚ä¸‹å›¾ï¼š</p>
<img data-src="https://pic.imgdb.cn/item/662a68b60ea9cb14030fd7e0.png"  alt="" />

<p>è§£å†³æ–¹æ³•ï¼š<br>æ¸…é™¤é¡¹ç›®ç¼“å­˜ï¼Œç‚¹å‡»èœå•æ ä¸­çš„<code>Build</code>ï¼Œç„¶åé€‰æ‹©<code>Clean Project</code>ã€‚ç­‰æ¸…é™¤å®Œåï¼Œå†æ¬¡æ‰“åŒ…å°±å¯ä»¥äº†ï¼Œ<br>å¦‚ä¸‹å›¾:<br><img data-src="https://pic.imgdb.cn/item/662a68b70ea9cb14030fd825.png"  alt="" /></p>
]]></content>
  </entry>
  <entry>
    <title>Cè¯­è¨€å¤§å­¦ç”Ÿè€ƒè¯•å…¨é¢é¢˜åº“</title>
    <url>/27faa6a3.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="è®¡ç®—A-Bçš„å€¼"><a href="#è®¡ç®—A-Bçš„å€¼" class="headerlink" title="è®¡ç®—A-Bçš„å€¼"></a>è®¡ç®—A-Bçš„å€¼</h3><p><strong>è¾“å…¥æè¿°ï¼š</strong></p>
<blockquote>
<p>è¾“å…¥ä¸¤ä¸ªæ•´æ•°  a,b<br>è¾“å‡ºæè¿°æè¿°ï¼š</p>
</blockquote>
<p>è¾“å‡ºa-bçš„ç»“æœ</p>
<blockquote>
<p>æ ·å¼è¾“å…¥ï¼š7 4<br>æ ·å¼è¾“å‡ºï¼š3</p>
</blockquote>
<span id="more"></span>
<p><strong>æºä»£ç ï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a-b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="æ‰¾å‡ºæœ€é‡çš„è‹¹æœ"><a href="#æ‰¾å‡ºæœ€é‡çš„è‹¹æœ" class="headerlink" title="æ‰¾å‡ºæœ€é‡çš„è‹¹æœ"></a>æ‰¾å‡ºæœ€é‡çš„è‹¹æœ</h3><p> <strong>é¢˜ç›®æè¿°ï¼š</strong></p>
<blockquote>
<p>å°æ˜æœ‰nä¸ªè‹¹æœ(n&lt;20),æ¯ä¸€ä¸ªè‹¹æœéƒ½æœ‰ä¸€å®šçš„é‡é‡,è¯·æ‰¾å‡ºæœ€é‡çš„è‹¹æœ,å¹¶è¾“å‡ºè¯¥è‹¹æœçš„é‡é‡</p>
</blockquote>
<p> <strong>è¾“å…¥æè¿°ï¼š</strong></p>
<blockquote>
<p>ç¬¬ä¸€ä¸ªæ•´æ•°æ˜¯n,è¡¨ç¤ºè‹¹æœçš„ä¸ªæ•°,æ¥ä¸‹æ¥çš„nä¸ªæ•´æ•°æ˜¯è‹¹æœçš„é‡é‡,æ¯ä¸ªæ•´æ•°ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€</p>
</blockquote>
<p> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong></p>
<blockquote>
<p>æœ€é‡çš„è‹¹æœçš„é‡é‡</p>
</blockquote>
<p><strong>æ ·å¼è¾“å…¥ï¼š</strong>  2 45 93<br><strong>æ ·å¼è¾“å‡ºï¼š</strong> 93<br><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i,max,a[<span class="number">20</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    max=a[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;max)</span><br><span class="line">            max=a[i];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,max);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="æ±½æ°´ç“¶"><a href="#æ±½æ°´ç“¶" class="headerlink" title="æ±½æ°´ç“¶"></a>æ±½æ°´ç“¶</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong></p>
<blockquote>
<p>æœ‰è¿™æ ·ä¸€é“æ™ºåŠ›é¢˜ï¼šâ€œæŸå•†åº—è§„å®šï¼šä¸‰ä¸ªç©ºæ±½æ°´ç“¶å¯ä»¥æ¢ä¸€ç“¶æ±½æ°´ã€‚å°å¼ æ‰‹ä¸Šæœ‰åä¸ªç©ºæ±½æ°´ç“¶ï¼Œå¥¹æœ€å¤šå¯ä»¥æ¢å¤šå°‘ç“¶æ±½æ°´å–ï¼Ÿâ€ç­”æ¡ˆæ˜¯5ç“¶ï¼Œ<br>æ–¹æ³•å¦‚ä¸‹ï¼šå…ˆç”¨9ä¸ªç©ºç“¶å­æ¢3ç“¶æ±½æ°´ï¼Œå–æ‰3ç“¶æ»¡çš„ï¼Œå–å®Œä»¥å4ä¸ªç©ºç“¶å­ï¼Œç”¨3ä¸ªå†æ¢ä¸€ç“¶ï¼Œå–æ‰è¿™ç“¶æ»¡çš„ï¼Œè¿™æ—¶å€™å‰©2ä¸ªç©ºç“¶å­ã€‚ç„¶åä½ è®©è€æ¿å…ˆå€Ÿç»™ä½ ä¸€ç“¶æ±½æ°´ï¼Œå–æ‰è¿™ç“¶æ»¡çš„ï¼Œå–å®Œä»¥åç”¨3ä¸ªç©ºç“¶å­æ¢ä¸€ç“¶æ»¡çš„è¿˜ç»™è€æ¿ã€‚å¦‚æœå°å¼ æ‰‹ä¸Šæœ‰nä¸ªç©ºæ±½æ°´ç“¶ï¼Œæœ€å¤šå¯ä»¥æ¢å¤šå°‘ç“¶æ±½æ°´å–ï¼Ÿ</p>
</blockquote>
<p><strong>è¾“å…¥æè¿°ï¼š</strong></p>
<blockquote>
<p>è¾“å…¥ä¸ºä¸€ä¸ªæ­£æ•´æ•°nï¼ˆ1&lt;&#x3D;n&lt;&#x3D;100ï¼‰ï¼Œè¡¨ç¤ºç©ºæ±½æ°´ç“¶ä¸ªæ•°ã€‚</p>
</blockquote>
<p><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong></p>
<blockquote>
<p>è¾“å‡ºä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºå¯æ¢æ±½æ°´çš„ç“¶æ•°ã€‚</p>
</blockquote>
<p><strong>æ ·å¼è¾“å…¥ï¼š</strong> 10<br><strong>æ ·å¼è¾“å‡ºï¼š</strong> 5<br><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,sum=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n)</span><br><span class="line">    &#123;</span><br><span class="line">        sum+=n/<span class="number">3</span>;</span><br><span class="line">        n=n%<span class="number">3</span>+n/<span class="number">3</span>;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            sum++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="å¯†ç ç ´è¯‘"><a href="#å¯†ç ç ´è¯‘" class="headerlink" title="å¯†ç ç ´è¯‘"></a>å¯†ç ç ´è¯‘</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>æŸç»„ç»‡æ¬²ç ´è·ä¸€ä¸ªå¤–æ˜Ÿäººçš„å¯†ç ï¼Œå¯†ç ç”±ä¸€å®šé•¿åº¦çš„å­—ä¸²ç»„æˆã€‚æ­¤ç»„ç»‡æ‹¥æœ‰ä¸€äº›ç ´è¯‘æ­¤å¯†ç çš„é•¿åº¦ä¸åŒçš„é’¥åŒ™ï¼Œè‹¥ä¸¤ä¸ªé’¥åŒ™çš„é•¿åº¦ä¹‹å’Œæ°å¥½ä¸ºæ­¤å¯†ç çš„é•¿åº¦ï¼Œåˆ™æ­¤å¯†ç è¢«æˆåŠŸç ´è¯‘ã€‚ç°åœ¨å°±è¯·ä½ ç¼–ç¨‹æ‰¾å‡ºèƒ½ç ´è¯‘æ­¤å¯†ç çš„ä¸¤ä¸ªé’¥åŒ™ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ç¬¬ä¸€è¡Œä¸ºé’¥åŒ™çš„ä¸ªæ•°Nï¼ˆ1â‰¤Nâ‰¤5000ï¼‰<br>è¾“å…¥ç¬¬äºŒè¡Œä¸ºå¯†ç çš„é•¿åº¦<br>ä»¥ä¸‹Nè¡Œä¸ºæ¯ä¸ªé’¥åŒ™çš„é•¿åº¦<br> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è‹¥æ— æ³•æ‰¾åˆ°ç ´è¯‘æ­¤å¯†ç çš„é’¥åŒ™ï¼Œåˆ™è¾“å‡ºä»…1è¡Œ0 ã€‚è‹¥æ‰¾åˆ°ä¸¤æŠŠç ´è¯‘çš„é’¥åŒ™ï¼Œåˆ™è¾“å‡ºæœ‰ä¸¤è¡Œï¼Œåˆ†åˆ«ä¸ºä¸¤æŠŠé’¥åŒ™çš„ç¼–å·ã€‚è‹¥æœ‰å¤šç§ç ´è¯‘æ–¹æ¡ˆï¼Œåˆ™åªè¾“å‡ºä¸€ç§å³å¯ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>10<br>80<br>27<br>9<br>4<br>73<br>23<br>68<br>12<br>64<br>92<br>24 </p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>6<br>7</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,len,s[<span class="number">100</span>],a=<span class="number">0</span>,b=<span class="number">0</span>,i,j;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;len);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s[i]);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">            <span class="keyword">if</span>(s[i]+s[j]==len)</span><br><span class="line">            &#123;</span><br><span class="line">                a=i+<span class="number">1</span>;</span><br><span class="line">                b=j+<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="keyword">if</span>(a!=<span class="number">0</span>&amp;&amp;b!=<span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n%d&quot;</span>,a,b);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æœ€å¤§å…¬çº¦æ•°"><a href="#æœ€å¤§å…¬çº¦æ•°" class="headerlink" title="æœ€å¤§å…¬çº¦æ•°"></a>æœ€å¤§å…¬çº¦æ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>è¾“å…¥ä¸¤ä¸ªæ•´æ•°a,b(1â‰¤a,bâ‰¤100000)ï¼Œè¯·ç¼–å†™ç¨‹åºæ±‚å‡ºä»–ä»¬çš„æœ€å¤§å…¬çº¦æ•°ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸¤ä¸ªæ•´æ•°a bï¼Œç”¨ç©ºæ ¼éš”å¼€<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºå¯¹åº”a,bçš„æœ€å¤§å…¬çº¦æ•°<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>25 10</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>5</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> min,a,b,i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">    min=(a&gt;b)?b:a;</span><br><span class="line">    <span class="keyword">for</span>(i=min;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(a%i==<span class="number">0</span>&amp;&amp;b%i==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,i);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²æ¯”å¯¹"><a href="#å­—ç¬¦ä¸²æ¯”å¯¹" class="headerlink" title="å­—ç¬¦ä¸²æ¯”å¯¹"></a>å­—ç¬¦ä¸²æ¯”å¯¹</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>æœ‰å­—ç¬¦ä¸²a(é•¿åº¦&lt;&#x3D;100)ï¼Œb(é•¿åº¦&lt;&#x3D;10)ï¼Œè®¡ç®—bä¸²åœ¨aä¸²ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚<br><strong>è§£é¢˜æ€è·¯ï¼š</strong><br>1ã€ç”¨getsè¯­å¥ä»é”®ç›˜è¾“å…¥ä¸¤ä¸ªå­—ç¬¦ä¸²èµ‹äºˆaï¼Œbå­—ç¬¦æ•°ç»„ï¼›<br>2ã€å»ºç«‹ä¸¤å±‚åµŒå¥—å¾ªç¯ï¼Œå¤–å¾ªç¯è‡³aä¸²ç»“æŸæ ‡å¿—ä¸ºæ­¢ï¼Œå†…å¾ªç¯è‡³bä¸²ç»“æŸæ ‡å¿—ä¸ºæ­¢ï¼›<br>3ã€å†…å¾ªç¯ä¸­æ¯”å¯¹bä¸²ä¸aä¸²çš„æ•°æ®ï¼Œæ»¡è¶³æ¡ä»¶æ—¶è®¡æ•°ï¼Œå¦åˆ™breakï¼›<br>4ã€æ‰€æœ‰å¾ªç¯ç»“æŸåè¾“å‡ºè®¡æ•°å€¼ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²é•¿åº¦å°äº100ï¼Œç¬¬äºŒä¸ªå­—ç¬¦ä¸²é•¿åº¦å°äº10ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>abcdefghijklmnababcdeabc<br>abc</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>3</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>],b[<span class="number">10</span>];</span><br><span class="line">    <span class="type">int</span> i,j,len1,len2,s,sum=<span class="number">0</span>,k;</span><br><span class="line">    gets(a);</span><br><span class="line">    gets(b);</span><br><span class="line">    len1=<span class="built_in">strlen</span>(a);</span><br><span class="line">    len2=<span class="built_in">strlen</span>(b);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;(len1-len2+<span class="number">1</span>);i++)</span><br><span class="line">    &#123;</span><br><span class="line">        k=i;</span><br><span class="line">        s=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;len2;j++)</span><br><span class="line">            <span class="keyword">if</span>(b[j]==a[i])</span><br><span class="line">            &#123;</span><br><span class="line">                s++;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        i=k;</span><br><span class="line">        <span class="keyword">if</span>(s==len2)</span><br><span class="line">            sum++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å›´åœˆæŠ¥æ•°"><a href="#å›´åœˆæŠ¥æ•°" class="headerlink" title="å›´åœˆæŠ¥æ•°"></a>å›´åœˆæŠ¥æ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>æœ‰nï¼ˆn&lt;&#x3D;100ï¼‰å›´æˆä¸€åœˆï¼Œé¡ºåºæ’å·ï¼ˆä»1æ’åˆ°nï¼‰ã€‚<br>ä»ç¬¬ä¸€ä¸ªäººå¼€å§‹æŠ¥æ•°ï¼ˆä»1æŠ¥åˆ°mï¼ˆm&lt;&#x3D;9))ï¼Œå‡¡æŠ¥åˆ°mçš„äººé€€å‡ºåœˆå­ï¼Œé—®æœ€åç•™ä¸‹çš„æ˜¯åŸæ¥ç¬¬å‡ å·çš„é‚£ä½ï¼Ÿ<br><strong>è§£é¢˜æ€è·¯ï¼š</strong><br>1ã€å®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸º100æ•°ç»„aï¼Œåˆå§‹åŒ–ä¸º0ï¼›<br>2ã€æ¥æ”¶é”®ç›˜è¾“å…¥å€¼nï¼Œmï¼Œæ•°ç»„açš„å‰n-1ä¸ªå…ƒç´ èµ‹å€¼ä¸º1~nï¼›<br>3ã€å»ºç«‹ä¸¤å±‚åµŒå¥—å¾ªç¯ï¼Œå¤–å¾ªç¯è‡³é€€å‡ºäººæ•°ä¸ºn-1ä¸ºæ­¢ï¼Œ<br>å†…å¾ªç¯ä¸­ä»0å¾ªç¯è‡³nï¼Œå°†aæ•°ç»„ä¸­é0çš„æ•°æ®é€¢mç½®é›¶ï¼ŒåŒæ—¶è®°å½•é€€å‡ºäººæ•°ï¼›<br>4ã€å¾ªç¯å…¨éƒ¨ç»“æŸåè¾“å‡ºæœ€åç•™ä¸‹çš„ä¸€ä¸ªaæ•°ç»„çš„éé›¶å…ƒç´ çš„å€¼ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸ºä¸¤ä¸ªæ­£æ•´æ•°ï¼Œç¬¬ä¸€ä¸ª&lt;&#x3D;100ï¼Œç¬¬äºŒä¸ª&lt;&#x3D;9ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>100 3</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>91</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">100</span>];</span><br><span class="line">    <span class="type">int</span> n,m,i,sum=<span class="number">0</span>,k=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        a[i]=i+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(sum&gt;=<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">            <span class="keyword">if</span>(a[i]!=<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                k++;</span><br><span class="line">                <span class="keyword">if</span>(k==m)</span><br><span class="line">                &#123;</span><br><span class="line">                    a[i]=<span class="number">0</span>;</span><br><span class="line">                    k=<span class="number">0</span>;</span><br><span class="line">                    sum++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span>(sum==n<span class="number">-1</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            i=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=n<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(a[i]!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ˜ŸæœŸå‡ ï¼Ÿ"><a href="#æ˜ŸæœŸå‡ ï¼Ÿ" class="headerlink" title="æ˜ŸæœŸå‡ ï¼Ÿ"></a>æ˜ŸæœŸå‡ ï¼Ÿ</h3><p> <strong>é¢˜ç›®æè¿°ï¼š</strong><br>ç¼–ä¸€ä¸ªç¨‹åºï¼Œå·²çŸ¥ä»Šå¤©æ˜¯æ˜ŸæœŸå‡ ï¼Œè®¡ç®—å‡ºnå¤©åæ˜¯æ˜ŸæœŸå‡ ã€‚è¦æ±‚ä½¿ç”¨æšä¸¾å˜é‡ã€‚<br>æç¤ºï¼šæšä¸¾å˜é‡çš„èµ‹å€¼åªèƒ½ç”¨æšä¸¾å¸¸é‡æ¥è¡¨ç¤ºï¼Œä½†æ˜¯æšä¸¾å¸¸é‡å‡æœ‰ä¸€ä¸ªæ•´å½¢æ•°ä»£è¡¨ï¼Œå¯å°†æ”¹æ•´å½¢æ•°å­˜å…¥æšä¸¾å˜é‡åœ°å€ä»¥å®ç°å¤–éƒ¨èµ‹å€¼çš„ç›®çš„ã€‚<br>å¦‚ï¼š<code>enum day&#123;Sun,Mon,Tue,Wed,Thu,Fri,Sat&#125; d1;     scanf(&quot;%d&quot;,&amp;d1);</code><br>å½“é”®ç›˜è¾“å…¥1æ—¶ï¼Œç›¸å½“äºå°†d1èµ‹å€¼ä¸ºMonï¼Œå³d1&#x3D;Mon<br>æšä¸¾å˜é‡çš„è¾“å‡ºï¼Œåªèƒ½è¾“å‡ºå…¶ä»£è¡¨çš„æ•´å½¢æ•°ï¼Œå¦‚éœ€è¾“å‡ºå…¶å¯¹åº”çš„æšä¸¾å¸¸é‡ï¼Œå¯å€ŸåŠ©å­—ç¬¦ä¸²æ•°ç»„çš„æ–¹å¼å¤„ç†ï¼›<br>å¦‚ï¼š<code>char *p[]=&#123;â€œSunâ€,â€œMonâ€,â€œTueâ€,&quot;Wed&quot;,&quot;Thu&quot;,&quot;Fri&quot;,&quot;Sat&quot;&#125;;     printf(&quot;%s&quot;,*(p+2));</code><br>å…¶è¾“å‡ºç»“æœä¸ºï¼šTue<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸ºä¸¤ä¸ªæ­£æ•´æ•°ï¼Œç¬¬ä¸€ä¸ªæ•°n(n&lt;&#x3D;6)è¡¨ç¤ºä»Šå¤©æ˜¯æ˜ŸæœŸå‡ ï¼Œç¬¬äºŒä¸ªæ•°m(m&lt;&#x3D;1000)ï¼Œè¡¨ç¤ºæ±‚må¤©åæ˜¯æ˜ŸæœŸå‡ ï¼›<br> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸ºä¸€ä¸ªé•¿åº¦ä¸º3çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ˜ŸæœŸå‡ çš„åç§°ï¼›<br> <strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>1 4</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>Fri</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> m;</span><br><span class="line">    <span class="type">char</span> p[][<span class="number">4</span>]=&#123;<span class="string">&quot;Sun&quot;</span>,<span class="string">&quot;Mon&quot;</span>,<span class="string">&quot;Tue&quot;</span>,<span class="string">&quot;Wed&quot;</span>,<span class="string">&quot;Thu&quot;</span>,<span class="string">&quot;Fri&quot;</span>,<span class="string">&quot;Sat&quot;</span>&#125;;</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">day</span>&#123;</span>Sun,Mon,Tue,Wed,Thu,Fri,Sat&#125; n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    m%=<span class="number">7</span>;</span><br><span class="line">    n+=m;</span><br><span class="line">    n%=<span class="number">7</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,*(p+n));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ•´æ•°å„ä½å–å¥‡æ•°"><a href="#æ•´æ•°å„ä½å–å¥‡æ•°" class="headerlink" title="æ•´æ•°å„ä½å–å¥‡æ•°"></a>æ•´æ•°å„ä½å–å¥‡æ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>å°†ä¸€ä¸ªæ•´æ•°ä¸­çš„æ¯ä¸€ä½ä¸Šä¸ºå¥‡æ•°çš„æ•°ä¾æ¬¡å–å‡ºï¼Œæ„æˆä¸€ä¸ªæ–°æ•°æ”¾åœ¨tä¸­ã€‚é«˜ä½ä»åœ¨é«˜ä½ï¼Œä½ä½ä»åœ¨ä½ä½ã€‚<br>ä¾‹å¦‚ï¼Œå½“sä¸­çš„æ•°ä¸ºï¼š87653142æ—¶ï¼Œtä¸­çš„æ•°ä¸ºï¼š7531ã€‚<br><em>ï¼ˆçŸ¥è¯†ç‚¹ï¼šæ§åˆ¶è¯­å¥ã€å‡½æ•°ã€æŒ‡é’ˆï¼‰</em><br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥æ•°æ®ä¸ºä¸€ä¸ªä¸å¤§äº100000000çš„æ•´å½¢æ•°ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºæ•°æ®ä¸ºä¸€ä¸ªä¸å¤§äº100000000çš„æ•´å½¢æ•°ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>987654321</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>97531</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> s,i,k=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s);</span><br><span class="line">    <span class="keyword">while</span>(s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>((s%<span class="number">10</span>)%<span class="number">2</span>!=<span class="number">0</span>)</span><br><span class="line">            a[k++]=s%<span class="number">10</span>;</span><br><span class="line">        s/=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=k<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å››ä½ååºæ•°"><a href="#å››ä½ååºæ•°" class="headerlink" title="å››ä½ååºæ•°"></a>å››ä½ååºæ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>è®¾ï¼®æ˜¯ä¸€ä¸ªå››ä½æ•°ï¼Œå®ƒçš„nå€æ°å¥½æ˜¯å…¶ååºæ•°ï¼ˆä¾‹å¦‚ï¼š123çš„ååºæ•°æ˜¯321ï¼‰ï¼Œ<br>ç¼–ç¨‹ï¼Œè¾“å‡ºä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„ï¼®ã€‚ï¼ˆçŸ¥è¯†ç‚¹ï¼šæ§åˆ¶è¯­å¥ï¼‰<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸ºä¸€ä¸ªæ•´å½¢æ•°n(2&lt;&#x3D;n&lt;&#x3D;9)<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸ºä¸€ä¸ªå››ä½æ•°çš„æ•´å½¢æ•°<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>9</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1089</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i,k,a,b,sum;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1000</span>;i&lt;<span class="number">10000</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sum=i;</span><br><span class="line">        b=<span class="number">0</span>;</span><br><span class="line">        k=i*n;</span><br><span class="line">        <span class="keyword">while</span>(sum)</span><br><span class="line">        &#123;</span><br><span class="line">            a=sum%<span class="number">10</span>;</span><br><span class="line">            b=b*<span class="number">10</span>+a;</span><br><span class="line">            sum/=<span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(k==b)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,i);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å­—æ¯ç¿»è¯‘"><a href="#å­—æ¯ç¿»è¯‘" class="headerlink" title="å­—æ¯ç¿»è¯‘"></a>å­—æ¯ç¿»è¯‘</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>ç¼–ç¨‹: æ±‚è§£ä¸‹åˆ—å¼ä¸­å„å­—æ¯ä»£è¡¨çš„æ•°å­—å¹¶è¾“å‡º<br>             PEAR-ARA&#x3D;PEA<br><em>(çŸ¥è¯†ç‚¹:æ§åˆ¶è¯­å¥)</em><br> <strong>è¾“å…¥æè¿°ï¼š</strong><br>æ— <br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸ºå››ä¸ªæ•°å­—ï¼Œä»¥ç©ºæ ¼åˆ†å¼€ï¼Œä¾æ¬¡ä¸ºä»£è¡¨P E A R çš„æ•°å­—ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>æ— </p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>8 7 6 5</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> p,e,a,r,x,y,z;</span><br><span class="line">    <span class="keyword">for</span>(p=<span class="number">1</span>;p&lt;=<span class="number">9</span>;p++)</span><br><span class="line">        <span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;=<span class="number">9</span>;e++)</span><br><span class="line">            <span class="keyword">for</span>(a=<span class="number">1</span>;a&lt;=<span class="number">9</span>;a++)</span><br><span class="line">                <span class="keyword">for</span>(r=<span class="number">0</span>;r&lt;=<span class="number">9</span>;r++)</span><br><span class="line">                &#123;</span><br><span class="line">                    x=p*<span class="number">1000</span>+e*<span class="number">100</span>+a*<span class="number">10</span>+r;</span><br><span class="line">                    y=a*<span class="number">100</span>+r*<span class="number">10</span>+a;</span><br><span class="line">                    z=p*<span class="number">100</span>+e*<span class="number">10</span>+a;</span><br><span class="line">                    <span class="keyword">if</span>(x-y==z)</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>,p,e,a,r);</span><br><span class="line">                &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²å¤åˆ¶"><a href="#å­—ç¬¦ä¸²å¤åˆ¶" class="headerlink" title="å­—ç¬¦ä¸²å¤åˆ¶"></a>å­—ç¬¦ä¸²å¤åˆ¶</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬nä¸ªå­—ç¬¦ã€‚å†™ä¸€ä¸ªå‡½æ•°ï¼Œå°†æ­¤å­—ç¬¦ä¸²ä»ç¬¬mä¸ªå­—ç¬¦å¼€å§‹çš„å…¨éƒ¨å­—ç¬¦å¤åˆ¶æˆå¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¦æ±‚åœ¨ä¸»å‡½æ•°è¾“å…¥å­—ç¬¦ä¸²åŠmå€¼å¹¶è¾“å‡ºå¤åˆ¶ç»“æœã€‚<br><em>ï¼ˆçŸ¥è¯†ç‚¹ï¼šæ§åˆ¶è¯­å¥ã€å­—ç¬¦ä¸²ã€æŒ‡é’ˆï¼‰</em><br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆé•¿åº¦å°äº80ï¼‰åŠä¸€ä¸ªæ•´å½¢æ•°ï¼ˆå°äºå­—ç¬¦ä¸²çš„å®é™…é•¿åº¦ï¼‰<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸ºä¸€ä¸ªå­—ç¬¦ä¸²<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>abcdefghijklmnopqrst<br>8</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>hijklmnopqrst</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">80</span>];</span><br><span class="line">    <span class="type">char</span> *p;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    gets(a);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    p=a+n<span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,p);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="äºŒç»´å­—ç¬¦æ•°ç»„è½¬æ¢"><a href="#äºŒç»´å­—ç¬¦æ•°ç»„è½¬æ¢" class="headerlink" title="äºŒç»´å­—ç¬¦æ•°ç»„è½¬æ¢"></a>äºŒç»´å­—ç¬¦æ•°ç»„è½¬æ¢</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>ç¼–å†™å‡½æ•°fun, å‡½æ•°çš„åŠŸèƒ½æ˜¯: å°†Mè¡ŒNåˆ—çš„äºŒç»´æ•°ç»„ä¸­çš„å­—ç¬¦æ•°æ®, æŒ‰åˆ—çš„ é¡ºåºä¾æ¬¡æ”¾åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚<br>ä¾‹å¦‚, äºŒç»´æ•°ç»„ä¸­çš„æ•°æ®ä¸º:<br>W W W W<br>S S S S<br>H H H H<br>åˆ™å­—ç¬¦ä¸²ä¸­çš„å†…å®¹åº”æ˜¯: WSHWSHWSHã€‚<br><em>ï¼ˆçŸ¥è¯†ç‚¹ï¼šæ•°ç»„ã€æŒ‡é’ˆï¼‰</em><br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸ºä¸€ä¸ª3è¡Œ4åˆ—äºŒç»´å­—ç¬¦æ•°ç»„æ•°æ®<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸ºä¸€ä¸ªé•¿åº¦ä¸º12çš„å­—ç¬¦æ•°ç»„ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>A B C D<br>E F G H<br>I J K L</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>AEIBFJCGKDHL</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">fun</span><span class="params">(<span class="type">char</span> a[<span class="number">3</span>][<span class="number">5</span>])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,j,k=<span class="number">0</span>;</span><br><span class="line">    <span class="type">char</span> s[<span class="number">13</span>];</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,a[j][i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,j;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">3</span>][<span class="number">5</span>],*p;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">4</span>;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;a[i][j]);</span><br><span class="line">            getchar();</span><br><span class="line">        &#125;</span><br><span class="line">    fun(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;    </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å¹´é¾„åˆ†ç»„"><a href="#å¹´é¾„åˆ†ç»„" class="headerlink" title="å¹´é¾„åˆ†ç»„"></a>å¹´é¾„åˆ†ç»„</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>ç»Ÿè®¡å„å¹´é¾„æ®µçš„äººæ•°ã€‚N(N&#x3D;20)ä¸ªå¹´é¾„é€šè¿‡é”®ç›˜è¾“å…¥,å¹¶æ”¾åœ¨ageæ•°ç»„ä¸­ï¼›<br>è¦æ±‚å‡½æ•°æŠŠ0è‡³9å²å¹´é¾„æ®µçš„äººæ•°æ”¾åœ¨d[0]ä¸­,æŠŠ10è‡³19å²å¹´é¾„æ®µçš„äººæ•°æ”¾åœ¨d[1]ä¸­,<br>æŠŠ20è‡³29å²å¹´é¾„æ®µçš„äººæ•°æ”¾åœ¨d[2]ä¸­, å…¶ä½™ä¾æ­¤ç±»æ¨,<br>æŠŠ100å² (å«100)ä»¥ä¸Šå¹´é¾„çš„äººæ•°éƒ½æ”¾åœ¨d[10]ä¸­ã€‚ä¾æ¬¡è¾“å‡ºd[0]è‡³d[10]ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸º20ä¸ªæ­£æ•´æ•°ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸º11ä¸ªæ­£æ•´æ•°ï¼›<br> <strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>1 2 11 12 22 23 33 34 44 45 55 56 66 67 68 88 99 100 101 102</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>2 2 2 2 2 2 3 0 1 1 3</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">20</span>];</span><br><span class="line">    <span class="type">int</span> d[<span class="number">11</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;=<span class="number">0</span> &amp;&amp; a[i]&lt;=<span class="number">9</span>)</span><br><span class="line">            d[<span class="number">0</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">10</span> &amp;&amp; a[i]&lt;=<span class="number">19</span>)</span><br><span class="line">            d[<span class="number">1</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">20</span> &amp;&amp; a[i]&lt;=<span class="number">29</span>)</span><br><span class="line">            d[<span class="number">2</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">30</span> &amp;&amp; a[i]&lt;=<span class="number">39</span>)</span><br><span class="line">            d[<span class="number">3</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">40</span> &amp;&amp; a[i]&lt;=<span class="number">49</span>)</span><br><span class="line">            d[<span class="number">4</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">50</span> &amp;&amp; a[i]&lt;=<span class="number">59</span>)</span><br><span class="line">            d[<span class="number">5</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">60</span> &amp;&amp; a[i]&lt;=<span class="number">69</span>)</span><br><span class="line">            d[<span class="number">6</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">70</span> &amp;&amp; a[i]&lt;=<span class="number">79</span>)</span><br><span class="line">            d[<span class="number">7</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">80</span> &amp;&amp; a[i]&lt;=<span class="number">89</span>)</span><br><span class="line">            d[<span class="number">8</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">90</span> &amp;&amp; a[i]&lt;=<span class="number">99</span>)</span><br><span class="line">            d[<span class="number">9</span>]++;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            d[<span class="number">10</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,d[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,d[<span class="number">10</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ•°æ•°åˆ—æ±‚å’Œ"><a href="#åˆ†æ•°æ•°åˆ—æ±‚å’Œ" class="headerlink" title="åˆ†æ•°æ•°åˆ—æ±‚å’Œ"></a>åˆ†æ•°æ•°åˆ—æ±‚å’Œ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>æœ‰ä¸€ä¸ªåˆ†æ•°æ•°åˆ—ä¸ºï¼š<br>2&#x2F;1,3&#x2F;2,4&#x2F;3,5&#x2F;4â€¦â€¦<br>æ±‚å‡ºè¿™ä¸ªæ•°åˆ—çš„å‰nï¼ˆn&lt;&#x3D;20ï¼‰é¡¹ä¹‹å’Œï¼Œä¿ç•™å°æ•°ç‚¹å4ä½ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸€ä¸ªæ•´æ•°nï¼ˆn&lt;&#x3D;20ï¼‰ï¼›<br> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸ºä¸€ä¸ªå°æ•°ï¼Œä¿ç•™å°æ•°ç‚¹å4ä½ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>7.2833</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,k;</span><br><span class="line">    <span class="type">double</span> m,n,a[<span class="number">20</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;k);</span><br><span class="line">    a[<span class="number">0</span>]=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>,m=<span class="number">3</span>,n=<span class="number">2</span>;i&lt;<span class="number">20</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        a[i]=a[i<span class="number">-1</span>]+m/n;</span><br><span class="line">        m++;</span><br><span class="line">        n++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.4lf&quot;</span>,a[k<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ¨è¾‰ä¸‰è§’å½¢"><a href="#æ¨è¾‰ä¸‰è§’å½¢" class="headerlink" title="æ¨è¾‰ä¸‰è§’å½¢"></a>æ¨è¾‰ä¸‰è§’å½¢</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>è¾“å‡ºnè¡Œæ¨è¾‰ä¸‰è§’å½¢ï¼Œå¦‚ä¸‹ï¼š<br>1<br>1 1<br>1 2 1<br>1 3 3 1<br>1 4 6 4 1<br>1 5 10 10 5 1<br>â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸ºä¸€ä¸ªæ­£æ•´æ•°n&lt;n&lt;&#x3D;10)ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸ºnè¡Œæ¨è¾‰ä¸‰è§’å½¢ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>3</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1<br>1 1<br>1 2 1</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">10</span>][<span class="number">10</span>];</span><br><span class="line">    <span class="type">int</span> i,j,n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">if</span>(n&gt;<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            a[i][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[i][<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;i;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                a[i][j]=a[i<span class="number">-1</span>][j<span class="number">-1</span>]+a[i<span class="number">-1</span>][j];</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot; %d&quot;</span>,a[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                a[i][i]=<span class="number">1</span>;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot; %d&quot;</span>,a[i][i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">            a[n<span class="number">-1</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[n<span class="number">-1</span>][<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;n<span class="number">-1</span>;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                a[n<span class="number">-1</span>][j]=a[n<span class="number">-2</span>][j<span class="number">-1</span>]+a[n<span class="number">-2</span>][j];</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[n<span class="number">-1</span>][j]);</span><br><span class="line">            &#125;</span><br><span class="line">            a[n<span class="number">-1</span>][n<span class="number">-1</span>]=<span class="number">1</span>;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[n<span class="number">-1</span>][n<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="éç‚¹"><a href="#éç‚¹" class="headerlink" title="éç‚¹"></a>éç‚¹</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>æ‰¾å‡ºä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­çš„éç‚¹ï¼Œå³è¯¥ä½ç½®ä¸Šçš„å…ƒç´ åœ¨è¯¥è¡Œä¸Šæœ€å¤§ã€åœ¨è¯¥åˆ—ä¸Šæœ€å°ã€‚ä¹Ÿå¯èƒ½æ²¡æœ‰éç‚¹ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸€ä¸ª3è¡Œ3åˆ—çš„äºŒç»´æ•´å½¢æ•°ç»„ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>å¦‚æœéç‚¹å­˜åœ¨ï¼Œè¾“å‡ºå…¶åæ ‡ï¼›å¦åˆ™è¾“å‡º-1ï¼›å¦‚ï¼šéç‚¹ä½äºç¬¬ä¸€è¡Œç¬¬ä¸‰åˆ—ï¼Œåˆ™è¾“å‡º1 3ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>1 2 3<br>4 5 6<br>7 8 9</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1 3</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">3</span>][<span class="number">3</span>],i,j,max,min,k1,k2,k,sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i][j]);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        max=a[i][<span class="number">0</span>];</span><br><span class="line">        k1=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;<span class="number">3</span>;j++)</span><br><span class="line">            <span class="keyword">if</span>(max&lt;a[i][j])</span><br><span class="line">            &#123;</span><br><span class="line">                max=a[i][j];</span><br><span class="line">                k1=j;</span><br><span class="line">            &#125;</span><br><span class="line">        min=a[<span class="number">0</span>][k1];</span><br><span class="line">        k2=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(k=<span class="number">1</span>;k&lt;<span class="number">3</span>;k++)</span><br><span class="line">            <span class="keyword">if</span>(min&gt;a[k][k1])</span><br><span class="line">            &#123;</span><br><span class="line">                min=a[k][k1];</span><br><span class="line">                k2=k;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span>(k2==i)</span><br><span class="line">        &#123;</span><br><span class="line">            sum++;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d %d&quot;</span>,i+<span class="number">1</span>,k1+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(sum==<span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;-1&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æœ€é•¿å•è¯"><a href="#æœ€é•¿å•è¯" class="headerlink" title="æœ€é•¿å•è¯"></a>æœ€é•¿å•è¯</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†å…¶ä¸­æœ€é•¿çš„å•è¯è¾“å‡ºï¼ˆä¸å«æ ‡ç‚¹ç¬¦å·ï¼‰ï¼›å¦‚æœæœ€é•¿å•è¯çš„æ•°é‡æœ‰å¤šä¸ªï¼Œè¾“å‡ºç¬¬ä¸€ä¸ªå³å¯ï¼›<br><em>æ³¨ï¼šå¤§å†™å­—æ¯çš„asciiç ä»<code>65~90</code>ï¼Œå°å†™å­—æ¯çš„asciiç ä»<code>97~122</code>ï¼›</em><br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸ºé•¿åº¦å°äº100çš„å­—ç¬¦ä¸²ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸ºé•¿åº¦å°äº100çš„å­—ç¬¦ä¸²ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>Helo!I am chinese,nice to meet you!</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>chinese</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,j=<span class="number">1</span>,len,len1,len2,k=<span class="number">0</span>,max=<span class="number">0</span>,s[<span class="number">100</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>],b[<span class="number">100</span>],c[<span class="number">100</span>];</span><br><span class="line">    gets(a);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>((a[i]&lt;=<span class="string">&#x27;z&#x27;</span> &amp;&amp; a[i]&gt;=<span class="string">&#x27;a&#x27;</span>) || (a[i]&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; a[i]&lt;=<span class="string">&#x27;Z&#x27;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            s[j]++;</span><br><span class="line">            b[k]=a[i];</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            b[k]=<span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span>(s[j]&gt;max)</span><br><span class="line">            &#123;</span><br><span class="line">                max=s[j];</span><br><span class="line">                <span class="built_in">strcpy</span>(c,b);</span><br><span class="line">            &#125;</span><br><span class="line">            k=<span class="number">0</span>;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    len2=<span class="built_in">strlen</span>(c);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len2;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,c[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥æ‰¾ä¸åŒçš„æœ¨æ£"><a href="#æŸ¥æ‰¾ä¸åŒçš„æœ¨æ£" class="headerlink" title="æŸ¥æ‰¾ä¸åŒçš„æœ¨æ£"></a>æŸ¥æ‰¾ä¸åŒçš„æœ¨æ£</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>å°æ˜çš„æ”¶é›†äº†ä¸€äº›æœ¨æ£,å¹¶æµ‹é‡äº†æ¯ä¸ªæœ¨æ£çš„é•¿åº¦,è®°å½•ä¸‹æ¥.å‡è®¾å°æ˜æœ‰å¥‡æ•°æ ¹æœ¨æ£,åªæœ‰ä¸€ä¸ªæœ¨æ£æ‰¾ä¸åˆ°è·Ÿå®ƒä¸€æ ·é•¿çš„å¦å¤–ä¸€æ ¹æœ¨æ£.è¯·ç¼–ç¨‹æ‰¾å‡ºè¿™ä¸ªæ²¡æœ‰ç›¸åŒé•¿åº¦çš„æœ¨æ£,è¾“å‡ºå®ƒçš„é•¿åº¦.<br><em>çŸ¥è¯†ç‚¹: æ’åº;æˆ–è€…ç”¨å¼‚æˆ–æ“ä½œ 0 å¼‚æˆ–x&#x3D;x;xå¼‚æˆ–x&#x3D;0;aå¼‚æˆ–bå¼‚æˆ–c&#x3D;aå¼‚æˆ–(bå¼‚æˆ–c)&#x3D;(aå¼‚æˆ–b)å¼‚æˆ–c&#x3D;aå¼‚æˆ–cå¼‚æˆ–b</em><br> <strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥åŒ…å«ä¸€ä¸ªå¥‡æ•°n(n&lt;30000),ç„¶åæ˜¯nä¸ªæ•´æ•°,è¡¨ç¤ºæ¯ä¸ªæœ¨æ£çš„é•¿åº¦,å¹¶ä¿è¯åªæœ‰ä¸€æ ¹æœ¨æ£æ‰¾ä¸åˆ°è·Ÿä»–ä¸€æ ·é•¿çš„æœ¨æ£.<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºç¬¦åˆæ¡ä»¶çš„æœ¨æ£çš„é•¿åº¦<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5 22 76 87 76 22</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>87</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">30000</span>],i,n,j,k,sum=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="number">0</span>)</span><br><span class="line">            k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">            <span class="keyword">if</span>(a[i]==a[j])</span><br><span class="line">            &#123;</span><br><span class="line">                a[i]=<span class="number">0</span>;</span><br><span class="line">                a[j]=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]!=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            sum++;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(sum==<span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æœ€é•¿ä¸Šå‡å­åºåˆ—æ•°-é—«åšé’Š"><a href="#æœ€é•¿ä¸Šå‡å­åºåˆ—æ•°-é—«åšé’Š" class="headerlink" title="æœ€é•¿ä¸Šå‡å­åºåˆ—æ•°(é—«åšé’Š)"></a>æœ€é•¿ä¸Šå‡å­åºåˆ—æ•°(é—«åšé’Š)</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>ä¸€ä¸ªæ•°çš„åºåˆ—biï¼Œå½“<code>b1&lt;b2&lt;...&lt;bS</code>çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªåºåˆ—æ˜¯ä¸Šå‡çš„ã€‚å¯¹äºç»™å®šçš„ä¸€ä¸ªåºåˆ—(a1,a2,â€¦,aN)ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€äº›ä¸Šå‡çš„å­åºåˆ—(ai1,ai2,â€¦,aiK)ï¼Œè¿™é‡Œ<code>1&lt;=i1&lt;i2&lt;...&lt;iK&lt;=N</code>ã€‚æ¯”å¦‚ï¼Œå¯¹äºåºåˆ—(1,7,3,5,9,4,8)ï¼Œæœ‰å®ƒçš„ä¸€äº›ä¸Šå‡å­åºåˆ—ï¼Œå¦‚(1,7),(3,4,8)ç­‰ç­‰ã€‚è¿™äº›å­åºåˆ—ä¸­æœ€é•¿çš„é•¿åº¦æ˜¯4ï¼Œæ¯”å¦‚å­åºåˆ—(1,3,5,8)<br>ä½ çš„ä»»åŠ¡ï¼Œå°±æ˜¯å¯¹äºç»™å®šçš„åºåˆ—ï¼Œæ±‚å‡ºæœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>ç¬¬ä¸€è¡Œè¾“å…¥åºåˆ—çš„é•¿åº¦N(1&lt;&#x3D;N&lt;&#x3D;1000)ã€‚ç¬¬äºŒè¡Œç»™å‡ºåºåˆ—ä¸­çš„Nä¸ªæ•´æ•°ï¼Œè¿™äº›æ•´æ•°çš„å–å€¼èŒƒå›´éƒ½åœ¨0åˆ°10000ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºæœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>7<br>1 7 3 5 9 4 8</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>4</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i,j,max=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">1000</span>],b[<span class="number">1000</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        b[i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=n<span class="number">-1</span>;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">        <span class="keyword">for</span>(j=i<span class="number">-1</span>;j&gt;=<span class="number">0</span>;j--)</span><br><span class="line">            <span class="keyword">if</span>(a[j]&lt;a[i]&amp;&amp;b[j]==b[i])</span><br><span class="line">                b[j]++;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">if</span>(max&lt;b[i])</span><br><span class="line">            max=b[i];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,max);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ±‚åé¡ºåºæ•°"><a href="#æ±‚åé¡ºåºæ•°" class="headerlink" title="æ±‚åé¡ºåºæ•°"></a>æ±‚åé¡ºåºæ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¦æ±‚ä»¥ç›¸åçš„é¡ºåºè¾“å‡ºè¯¥æ•°ã€‚ä¾‹å¦‚è¾“å…¥12345ï¼Œè¾“å‡ºä½54321<br> <strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸€ä¸ªæ•´æ•°n,<br> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸€ä¸ªåé¡ºåºçš„æ•°<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>123456</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>654321</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> len,i;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=len<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,a[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ±‚ä¸‰ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°"><a href="#æ±‚ä¸‰ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°" class="headerlink" title="æ±‚ä¸‰ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°"></a>æ±‚ä¸‰ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>å¯¹ä»»æ„ä¸‰ä¸ªæ•´æ•°ï¼Œæ±‚å®ƒä»¬çš„æœ€å¤§å…¬çº¦æ•°<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>ä¸‰ä¸ªæ•´æ•°a,b,c<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>a,b,cçš„æœ€å¤§å…¬çº¦æ•°<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>4 24 32</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>4</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a,b,c,max,i,k=<span class="number">0</span>,m=<span class="number">0</span>,n=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> A[<span class="number">100</span>]=&#123;<span class="number">1</span>&#125;,B[<span class="number">100</span>],C[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=a;i++)</span><br><span class="line">        <span class="keyword">if</span>(a%i==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            A[k]=i;</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;k;i++)</span><br><span class="line">        <span class="keyword">if</span>(b%A[i]==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            B[m]=A[i];</span><br><span class="line">            m++;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">        <span class="keyword">if</span>(c%B[i]==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            C[n]=B[i];</span><br><span class="line">            n++;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,C[n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬å‡ å¤©"><a href="#ç¬¬å‡ å¤©" class="headerlink" title="ç¬¬å‡ å¤©"></a>ç¬¬å‡ å¤©</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>è¾“å…¥æŸå¹´æŸæœˆæŸæ—¥ï¼Œåˆ¤æ–­è¿™ä¸€å¤©æ˜¯è¿™ä¸€å¹´çš„ç¬¬å‡ å¤©ï¼Ÿ<br>ç¨‹åºåˆ†æï¼šä»¥3æœˆ5æ—¥ä¸ºä¾‹ï¼Œåº”è¯¥å…ˆæŠŠå‰ä¸¤ä¸ªæœˆçš„åŠ èµ·æ¥ï¼Œç„¶åå†åŠ ä¸Š5å¤©å³æœ¬å¹´çš„ç¬¬å‡ å¤©ï¼Œ<br>ç‰¹æ®Šæƒ…å†µï¼Œé—°å¹´ä¸”è¾“å…¥æœˆä»½å¤§äº3æ—¶éœ€è€ƒè™‘å¤šåŠ ä¸€å¤©ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥ä¸ºä¸‰ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºå¹´ã€æœˆã€æ—¥ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºä¸ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè¾“å…¥çš„å¹´æœˆæ—¥ä¸ºå½“å¹´çš„ç¬¬å‡ å¤©ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>2010 1 1</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> yy,m,dd,n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;yy,&amp;m,&amp;dd);</span><br><span class="line">    <span class="keyword">if</span>(m==<span class="number">1</span>)</span><br><span class="line">        n=dd;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(m==<span class="number">2</span>)</span><br><span class="line">        n=<span class="number">31</span>+dd;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(m==<span class="number">3</span>)</span><br><span class="line">        n=<span class="number">59</span>+dd;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(m==<span class="number">4</span>)</span><br><span class="line">        n=<span class="number">90</span>+dd;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(m==<span class="number">5</span>)</span><br><span class="line">        n=<span class="number">120</span>+dd;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(m==<span class="number">6</span>)</span><br><span class="line">        n=<span class="number">151</span>+dd;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(m==<span class="number">7</span>)</span><br><span class="line">        n=<span class="number">181</span>+dd;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(m==<span class="number">8</span>)</span><br><span class="line">        n=<span class="number">212</span>+dd;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(m==<span class="number">9</span>)</span><br><span class="line">        n=<span class="number">243</span>+dd;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(m==<span class="number">10</span>)</span><br><span class="line">        n=<span class="number">273</span>+dd;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(m==<span class="number">11</span>)</span><br><span class="line">        n=<span class="number">304</span>+dd;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        n=<span class="number">334</span>+dd;</span><br><span class="line">    <span class="keyword">if</span>(yy%<span class="number">400</span>==<span class="number">0</span> || (yy%<span class="number">4</span>==<span class="number">0</span> &amp;&amp; yy%<span class="number">100</span>!=<span class="number">0</span>))</span><br><span class="line">        <span class="keyword">if</span>(m&gt;<span class="number">2</span>)</span><br><span class="line">            n++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,n);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å‘æ”¾å¥–é‡‘"><a href="#å‘æ”¾å¥–é‡‘" class="headerlink" title="å‘æ”¾å¥–é‡‘"></a>å‘æ”¾å¥–é‡‘</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æŸè½¦é—´æŒ‰å·¥äººåŠ å·¥é›¶ä»¶çš„æ•°é‡å‘æ”¾å¥–é‡‘ï¼Œå¥–é‡‘åˆ†ä¸ºäº”ä¸ªç­‰çº§ï¼šæ¯æœˆåŠ å·¥é›¶ä»¶æ•°N &lt; 100è€…å¥–é‡‘ä¸º10å…ƒï¼›100 &lt; &#x3D; N &lt; 110è€…å¥–é‡‘ä¸º30å…ƒï¼›110 &lt; &#x3D; N &lt;120 è€…å¥–é‡‘ä¸º50å…ƒï¼›120 &lt; &#x3D; N &lt;130 è€…å¥–é‡‘ä¸º70å…ƒï¼›N &gt; 130è€…å¥–é‡‘ä¸º80å…ƒã€‚ è¯·ç¼–ç¨‹ï¼Œç”±é”®ç›˜è¾“å…¥åŠ å·¥é›¶ä»¶æ•°é‡ï¼Œæ˜¾ç¤ºåº”å‘å¥–é‡‘æ•°ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥10ä¸ªåŠ å·¥é›¶ä»¶æ•°é‡,æ•°é‡å°äº400.<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>å¯¹æ¯ä¸€ä¸ªåŠ å·¥é›¶ä»¶ä¸ªæ•°,è¾“å‡ºåº”å‘å¥–é‡‘æ•°,æ¯ä¸ªå¥–é‡‘æ•°ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>85 85 85 85 85 85 85 85 85 85</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>10 10 10 10 10 10 10 10 10 10</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">10</span>],i,b[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&lt;<span class="number">100</span>)</span><br><span class="line">            b[i]=<span class="number">10</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">100</span>&amp;&amp;a[i]&lt;<span class="number">110</span>)</span><br><span class="line">            b[i]=<span class="number">30</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">110</span>&amp;&amp;a[i]&lt;<span class="number">120</span>)</span><br><span class="line">            b[i]=<span class="number">50</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="number">120</span>&amp;&amp;a[i]&lt;<span class="number">130</span>)</span><br><span class="line">            b[i]=<span class="number">70</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            b[i]=<span class="number">80</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">9</span>;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,b[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,b[<span class="number">9</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h3><a href="http://lengmo714.top/552db6f9.html" title="" target="">æ›´å¤šé¢˜åº“é“¾æ¥ ,</a>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>C</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorè§£å†³Chromeæµè§ˆå™¨è·¨åŸŸé—®é¢˜</title>
    <url>/3a1a4bc4.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<p>å¯¹äºå‰ç«¯æ¥è¯´ï¼Œæœ¬åœ°å¼€å‘å¾ˆç»å¸¸ä¼šé‡åˆ°è·¨åŸŸé—®é¢˜ã€‚è¿™ç§é—®é¢˜å¯ä»¥äº¤ç»™æœåŠ¡å™¨å»è§£å†³ï¼Œä½†æ˜¯æœ‰ä¸ªæ›´ç®€å•çš„æ–¹æ³•å°±æ˜¯è®²æµè§ˆå™¨è®¾ç½®ä¸ºå¯è·¨åŸŸçš„ã€‚</p>
<p><a href="https://juejin.cn/post/7019171779478290463">å‚è€ƒé“¾æ¥</a></p>
<h2 id="windowså¹³å°"><a href="#windowså¹³å°" class="headerlink" title="windowså¹³å°"></a>windowså¹³å°</h2><p>å³å‡»æ‰“å¼€å±æ€§ï¼Œæ‰¾åˆ°<code>ç›®æ ‡</code>å­—æ®µï¼Œå¹¶åœ¨ç›®æ ‡å­—æ®µåé¢åŠ ä¸Šå‚æ•°ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attr">--disable-web-security</span> <span class="attr">--user-data-dir</span>=D:\ChromeData\MyChromeDevUserData</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img data-src="https://s1.ax1x.com/2023/04/13/ppxRCpq.png" style="width:300px;height:500px" alt="" /></p>
<p>å†æ‰“å¼€Google chromeï¼Œå¦‚ä¸‹å›¾åˆ™è¡¨ç¤ºChromeæµè§ˆå™¨è®¾ç½®è·¨åŸŸæˆåŠŸï¼ˆå‡ºç°çº¢è‰²æ¡†æ¡†çš„æ–‡å­—æç¤ºï¼Œå¯èƒ½æ˜¯è‹±æ–‡ï¼‰<br><img data-src="https://s1.ax1x.com/2023/04/13/ppxRP10.png" style="width:500px;height:200px" alt="" /></p>
<blockquote>
<p>åšä¸»è¿™é‡Œè®¾ç½®è·¨åŸŸåï¼Œæ¡Œé¢å‡ºç°äº†2ä¸ªgoogle chromeæµè§ˆå™¨çš„å¿«æ·æ–¹å¼å›¾æ ‡ï¼Œä¸€ä¸ªå¯ä»¥è·¨åŸŸï¼Œä¸€ä¸ªä¸å¯ä»¥è·¨åŸŸ</p>
</blockquote>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
        <tag>Cocos</tag>
      </tags>
  </entry>
  <entry>
    <title>invalid key hash.the key hash does not match any stored key hashes.Configure your app key hashes at</title>
    <url>/ce912ca5.html</url>
    <content><![CDATA[<p>æ¥ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæ·»åŠ å®Œæµ‹è¯•è´¦å·åï¼Œç‚¹å‡»ç™»å½•ï¼Œåˆåˆåˆåˆå‡ºç°äº†æ–°çš„é—®é¢˜ï¼Œä¸€ä¸Šåˆå°±æ•´ä¸ªè§£å†³å„ç§é—®é¢˜äº†:<code>invalid key hash.the key hash does not match any stored key hashes.Configure your app key hashes at</code>.</p>
<span id="more"></span>
<p>å¦‚ä¸‹å›¾ï¼š<img data-src="https://pic.imgdb.cn/item/6646eadad9c307b7e9d68ab3.png" alt="" /></p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="é—®é¢˜å‡ºç°çš„åŸå› "><a href="#é—®é¢˜å‡ºç°çš„åŸå› " class="headerlink" title="é—®é¢˜å‡ºç°çš„åŸå› "></a>é—®é¢˜å‡ºç°çš„åŸå› </h3><p>è‡ªå·±åœ¨facebookå¼€å‘è€…åå°æ·»åŠ çš„å¯†é’¥æ•£åˆ—ä¸å¯¹ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><h4 id="ç½‘ä¼ æ–¹æ³•"><a href="#ç½‘ä¼ æ–¹æ³•" class="headerlink" title="ç½‘ä¼ æ–¹æ³•"></a>ç½‘ä¼ æ–¹æ³•</h4><ul>
<li>ç½‘ä¼ æ–¹æ³•ï¼šæœ‰äººè¯´å°†è¿™é‡Œæç¤ºçš„<code>key hash</code>æ·»åŠ åˆ°åå°å¯†é’¥æ•£åˆ—çš„åœ°æ–¹å°±è¡Œäº†</li>
<li>æ•ˆæœï¼šæˆ‘è¿™é‡Œä¸é€‚ç”¨</li>
<li>åˆ†æåŸå› ï¼šå¯èƒ½æ˜¯å› ä¸ºæˆ‘çš„åº”ç”¨å·²ç»åœ¨<code>google play</code>ä¸Šæ¶ï¼ŒapkåŒ…å·²ç»è¢«<code>google play</code>åå°é‡æ–°ç­¾åäº†ã€‚</li>
</ul>
<h4 id="æ–¹æ³•2"><a href="#æ–¹æ³•2" class="headerlink" title="æ–¹æ³•2"></a>æ–¹æ³•2</h4><ul>
<li>ä¸‹è½½å½“å‰åº”ç”¨åœ¨<code>google play</code>çš„è¯ä¹¦</li>
<li>è·å–è¯ä¹¦çš„hashå€¼<br>æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œè·å–hashå€¼<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openssl dgst -sha1 -binary &lt;GooglePlayçš„å‘å¸ƒè¯ä¹¦åœ°å€&gt;.der | openssl base64</span><br></pre></td></tr></table></figure></li>
<li>å°†è·å–åˆ°çš„hashå€¼æ³¨å†Œåˆ°facebook<br>æ•ˆæœï¼šå¯è¡Œ</li>
</ul>
]]></content>
      <categories>
        <category>android studio</category>
        <category>facebook</category>
      </categories>
      <tags>
        <tag>facebook</tag>
      </tags>
  </entry>
  <entry>
    <title>excelè½¬æ¢ä¸ºjson</title>
    <url>/90e6e480.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å…ˆæ¥çœ‹ä¸‹æ•ˆæœ<br>å°†è„šæœ¬å’Œæ”¾excelè¡¨æ ¼çš„æ–‡ä»¶å¤¹ç½®äºåŒä¸€çº§ç›®å½•<br><img data-src="https://s1.ax1x.com/2023/08/14/pPMrZtS.png" alt="" /></p>
<p>åœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œjsè„šæœ¬<br>è¡¨æ ¼å†…å®¹å¦‚ä¸‹ï¼š<br><img data-src="https://s1.ax1x.com/2023/08/14/pPMrnpQ.png" alt="" /><br>è½¬ä¸ºjsonåï¼š<br><img data-src="https://s1.ax1x.com/2023/08/14/pPMrefg.png" alt="" /></p>
<p>è„šæœ¬ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> xlsx = <span class="built_in">require</span>(<span class="string">&#x27;node-xlsx&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dirs = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯»å–æ–‡ä»¶å¤¹é‡Œæ‰€æœ‰çš„æ–‡ä»¶</span></span><br><span class="line">fs.<span class="title function_">readdir</span>(__dirname+<span class="string">&#x27;/excel/&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, files</span>)&#123;</span><br><span class="line">    </span><br><span class="line">    (<span class="keyword">function</span> <span class="title function_">iterator</span>(<span class="params">i</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(i == files.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‰€æœ‰æ–‡ä»¶åœ¨ä¸€ä¸ªæ•°ç»„é‡Œï¼š&#x27;</span>,dirs);</span><br><span class="line">        <span class="comment">//æŠŠæ–‡ä»¶åæå–å‡ºæ¥</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i1 =<span class="number">0</span>;i1&lt;dirs.<span class="property">length</span>;i1++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">let</span> ss = dirs[i1].<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æŠŠæ–‡ä»¶åæå–å‡ºæ¥:&#x27;</span>,ss[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å¼€å§‹å°†excelæ–‡ä»¶è½¬å˜æˆjsonæ–‡ä»¶</span></span><br><span class="line">            <span class="comment">//è¯»å–æ–‡ä»¶å†…å®¹</span></span><br><span class="line">            <span class="keyword">var</span> obj = xlsx.<span class="title function_">parse</span>(__dirname+<span class="string">&#x27;/excel/&#x27;</span>+dirs[i1]);</span><br><span class="line">            <span class="keyword">var</span> excelObj=obj[<span class="number">0</span>].<span class="property">data</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(excelObj);</span><br><span class="line">            <span class="keyword">var</span> data = [];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> excelObj)&#123;</span><br><span class="line">              <span class="keyword">var</span> arr=[];</span><br><span class="line">              <span class="keyword">var</span> value=excelObj[i];</span><br><span class="line">              <span class="keyword">for</span>(<span class="keyword">var</span> j <span class="keyword">in</span> value)&#123;</span><br><span class="line">                arr.<span class="title function_">push</span>(value[j]);</span><br><span class="line">              &#125;</span><br><span class="line">              data.<span class="title function_">push</span>(arr);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;data:&#x27;</span>,data);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> array_json = &#123;&#125;;</span><br><span class="line">            <span class="keyword">var</span> array_json_index = [];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>,j=<span class="number">0</span>;i&lt;data.<span class="property">length</span>;i++,j++)</span><br><span class="line">            &#123;</span><br><span class="line">                array_json_index[j] = data[i];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;array_json_index:&#x27;</span>,array_json_index);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>;i&lt;array_json_index.<span class="property">length</span>;i++)</span><br><span class="line">            &#123;</span><br><span class="line">                array_json[array_json_index[i][<span class="number">0</span>]] = &#123;&#125;;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;array_json_index[0].length&#x27;</span>,array_json_index[<span class="number">0</span>].<span class="property">length</span>);</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">let</span> j=<span class="number">1</span>;j&lt;array_json_index[<span class="number">0</span>].<span class="property">length</span>;j++)</span><br><span class="line">                &#123;</span><br><span class="line">                  array_json[array_json_index[i][<span class="number">0</span>]][array_json_index[<span class="number">0</span>][j]] = array_json_index[i][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;array_json:&#x27;</span>,array_json);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> str = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(array_json)</span><br><span class="line">             </span><br><span class="line">            <span class="keyword">let</span> dir_json = ss[<span class="number">0</span>]+<span class="string">&#x27;.json&#x27;</span>;</span><br><span class="line">            fs.<span class="title function_">writeFile</span>(__dirname+<span class="string">&#x27;/excel/&#x27;</span>+dir_json,str,<span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">send</span>(<span class="string">&#x27;Server is error...&#x27;</span>)&#125;</span><br><span class="line">            &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">      &#125;</span><br><span class="line">      fs.<span class="title function_">stat</span>(path.<span class="title function_">join</span>(__dirname+<span class="string">&#x27;/excel/&#x27;</span>, files[i]), <span class="keyword">function</span>(<span class="params">err, data</span>)&#123;     </span><br><span class="line">        <span class="keyword">if</span>(data.<span class="title function_">isFile</span>())&#123;               </span><br><span class="line">            dirs.<span class="title function_">push</span>(files[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">iterator</span>(i+<span class="number">1</span>);</span><br><span class="line">       &#125;);   </span><br><span class="line">    &#125;)(<span class="number">0</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>è¿è¡Œæ—¶å¦‚æœæŠ¥é”™ï¼Œç¼ºå°‘æŸäº›model,åˆ™ä½¿ç”¨ä¸‹é¢å‘½ä»¤å®‰è£…å³å¯<br><code>npm install model_name</code>,<code>model_name</code>ä¸ºç¼ºå°‘çš„æ¨¡å—å</p>
</blockquote>
</blockquote>
]]></content>
      <categories>
        <category>Cocos Creator</category>
        <category>json</category>
        <category>js</category>
        <category>node</category>
        <category>TypeScript</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
      </tags>
  </entry>
  <entry>
    <title>facebookç”Ÿæˆç§˜é’¥æ•£åˆ—è¸©å‘</title>
    <url>/caa789c3.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="ç”Ÿæˆå¯†é’¥æ•£åˆ—"><a href="#ç”Ÿæˆå¯†é’¥æ•£åˆ—" class="headerlink" title="ç”Ÿæˆå¯†é’¥æ•£åˆ—"></a>ç”Ÿæˆå¯†é’¥æ•£åˆ—</h3><p>ä»Šå¤©æŒ‰ç…§å®˜æ–¹è¯´æ˜ï¼Œåœ¨ç”Ÿæˆfacebookç”Ÿæˆå¯†é’¥æ•£åˆ—æ—¶ï¼Œç”Ÿæˆçš„å¯†é’¥<strong>å±…ç„¶åªæœ‰24ä½</strong>ï¼Œå®˜æ–¹è¦æ±‚28ä½ã€‚<br>å‘½ä»¤:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">keytool -exportcert -alias YOUR_RELEASE_KEY_ALIAS -keystore YOUR_RELEASE_KEY_PATH | openssl sha1 -binary | openssl base64</span><br></pre></td></tr></table></figure>
<p>ç°è±¡ï¼š<br><img data-src="https://pic.imgdb.cn/item/664626b7d9c307b7e9060e0c.png" alt="" />è¯•äº†å¥½å¤šéï¼Œæ¯æ¬¡éƒ½åªæœ‰24ä½ï¼Œæœ€ç»ˆä¸å¾—ä¸æ”¾å¼ƒè¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœæœ‰å¤§ä½¬çŸ¥é“åŸå› ï¼Œè¿˜è¯·å‘ŠçŸ¥ï¼Œæˆ‘å°†ååˆ†æ„Ÿè°¢ã€‚</p>
<h3 id="æ¢äº†ç§æ–¹æ³•"><a href="#æ¢äº†ç§æ–¹æ³•" class="headerlink" title="æ¢äº†ç§æ–¹æ³•"></a>æ¢äº†ç§æ–¹æ³•</h3><p>ç”±äºå®˜æ–¹ç»™çš„æ–¹æ³•ä¸è¡Œï¼ˆæˆ‘è¿™é‡Œè¿˜æœªå®ç°ï¼‰ï¼Œäºæ˜¯åªèƒ½åœ¨ç½‘ä¸Šæ‰¾å…¶ä»–çš„æ–¹æ³•ï¼Œç»“æœè¿˜çœŸè®©æˆ‘ç»™æ‰¾åˆ°äº†ã€‚<br>åœ¨<code>Android studio</code>ä¸­è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">keytool -list -v -keystore key.jks -alias key0  // æ³¨æ„key.jkså’Œkey0æ¢æˆè‡ªå·±çš„è·¯å¾„å’Œåˆ«å</span><br></pre></td></tr></table></figure>
<p>æ‹¿åˆ°è¯ä¹¦æŒ‡çº¹çš„SHA1å€¼<br>å¦‚ä¸‹ï¼š<br><img data-src="https://pic.imgdb.cn/item/6646283ad9c307b7e9091a4c.png" alt="" />ç„¶åé€šè¿‡<a href="https://tomeko.net/online_tools/hex_to_base64.php">è½¬æ¢å·¥å…·</a>è½¬æ¢æˆæˆ‘ä»¬æƒ³è¦çš„å¯†é’¥å³å¯ã€‚</p>
]]></content>
      <categories>
        <category>android studio</category>
        <category>facebook</category>
      </categories>
      <tags>
        <tag>facebook</tag>
        <tag>android studio</tag>
      </tags>
  </entry>
  <entry>
    <title>gitå¼ºåˆ¶æ‹‰å–è¿œç¨‹é¡¹ç›®è¦†ç›–æœ¬åœ°é¡¹ç›®</title>
    <url>/20023.html</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨å·¥ä½œä¸­ç»å¸¸éœ€è¦ä»gitæ‹‰å–åˆ°ä¸€äº›é¡¹ç›®åˆ°æœ¬åœ°ï¼Œä½†æ˜¯å› ä¸ºæœ¬åœ°é¡¹ç›®è¢«æˆ‘è‡ªå·±ä¿®æ”¹ï¼Œæ‰€ä»¥æ— æ³•ç”¨ä¼ ç»Ÿçš„æ–¹å¼å°†è¿œç¨‹ä»“åº“çš„é¡¹ç›®æ‹‰å–ä¸‹æ¥ã€‚ä¸‹é¢ä»‹ç»ä¸€ç§è¿œç¨‹ä»“åº“å¼ºåˆ¶æ‹‰å–é¡¹ç›®åˆ°æœ¬åœ°çš„æ–¹æ³•ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<blockquote>
<p>é™¤éå¿…é¡»å¼ºåˆ¶ï¼Œä¸è¦è½»æ˜“ä½¿ç”¨ã€‚</p>
</blockquote>
<p><strong>éœ€è¦å°†è¿™äº›æ›´æ–°å–å›æœ¬åœ°ï¼Œç”¨å‘½ä»¤<code>git fetch</code>.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git fetch --all</span><br></pre></td></tr></table></figure>
<p><strong>æ’¤é”€æœ¬åœ°ã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“(ç”¨è¿œç¨‹æœåŠ¡å™¨çš„origin&#x2F;masteræ›¿æ¢æœ¬åœ°ã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git reset --hard origin/master</span><br></pre></td></tr></table></figure>

<p><strong>git pullæ¥ä»è¿œç¨‹ä»“åº“â€åŒæ­¥â€ä»£ç </strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git pull origin master</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…ç”¨ä¸‹é¢ä¸€è¡Œå‘½ä»¤<br><strong>gitå¼ºåˆ¶è¦†ç›–æœ¬åœ°å‘½ä»¤ï¼ˆå•æ¡æ‰§è¡Œï¼‰ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git fetch --all &amp;&amp; git reset --hard origin/master &amp;&amp; git pull</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>å¼€å‘å·¥å…·çš„ä½¿ç”¨</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>gité—®é¢˜ error: remote origin already exists.</title>
    <url>/33da5f54.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å¦‚æœä½ cloneä¸‹æ¥ä¸€ä¸ªåˆ«äººçš„ä»“åº“ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå®Œæˆä½ çš„ä»£ç ï¼Œæ¨é€åˆ°è‡ªå·±çš„ä»“åº“å¯èƒ½é‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š<br><code>error: remote origin already exists.</code>è¡¨ç¤ºè¿œç¨‹ä»“åº“å·²å­˜åœ¨ã€‚<br>å› æ­¤ä½ è¦è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š<br>1ã€å…ˆè¾“å…¥<code>git remote rm origin </code>åˆ é™¤å…³è”çš„originçš„è¿œç¨‹åº“<br>2ã€å…³è”è‡ªå·±çš„ä»“åº“ <code>git remote add origin &lt;https://gitee.com/xxxxxx.git&gt;</code><br>3ã€æœ€å<code>git push origin master</code>ï¼Œè¿™æ ·å°±æ¨é€åˆ°è‡ªå·±çš„ä»“åº“äº†ã€‚</p>
]]></content>
      <categories>
        <category>å¼€å‘å·¥å…·çš„ä½¿ç”¨</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoåšå®¢æ·»åŠ algoliaæœç´¢</title>
    <url>/ed933f20.html</url>
    <content><![CDATA[<p>ä¹‹å‰åšå®¢ä¸€ç›´éƒ½æ²¡æœ‰æœç´¢ç³»ç»Ÿï¼Œè¶ç€å‘¨æœ«ï¼Œç»™åšå®¢æ·»åŠ ä¸€ä¸ªæœç´¢ç³»ç»Ÿï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ä½¿ç”¨<code>algolia</code>æœç´¢ã€‚<br>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°äº†å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œè¿™é‡Œç‰¹æ„è¯´æ˜ä¸‹ï¼š</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="algoliaæ³¨å†Œ"><a href="#algoliaæ³¨å†Œ" class="headerlink" title="algoliaæ³¨å†Œ"></a>algoliaæ³¨å†Œ</h3><p>å…ˆå»<a href="https://dashboard.algolia.com/">algoliaå®˜ç½‘</a>,è¿›è¡Œæ³¨å†Œã€‚</p>
<h3 id="å®‰è£…æ•™ç¨‹"><a href="#å®‰è£…æ•™ç¨‹" class="headerlink" title="å®‰è£…æ•™ç¨‹"></a>å®‰è£…æ•™ç¨‹</h3><p>ä½ éœ€è¦å®‰è£…<a href="https://github.com/LouisBarranqueiro/hexo-algoliasearch">hexo-algoliasearche</a>ã€‚<br>æŒ‰ç…§è¿™ä¸Šé¢çš„æ­¥éª¤è¿›è¡Œæ“ä½œå°±è¡Œäº†~<br><code>api Key</code>çš„ä½ç½®å¦‚ä¸‹ï¼Œä¸€ä¸€å¯¹åº”çš„å¡«å†™å¥½å°±è¡Œ<br><img data-src="https://s1.ax1x.com/2023/08/19/pP8ni40.jpg" alt="" /></p>
<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>1ã€é…ç½®æ–‡ä»¶éœ€è¦æ”¾åœ¨æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>ä¸­ï¼Œè€Œä¸æ˜¯ä¸»é¢˜çš„<code>_config.yml</code>,</p>
<p>è¿™ä¸ªæ—¶å€™åšå®¢çš„æœç´¢æ˜¯æœç´¢ä¸åˆ°ä»»ä½•å†…å®¹çš„ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ <code>Hexo Aloglia</code> è·å–ç«™ç‚¹æ•°æ®</p>
<h3 id="Hexo-Alogliaè·å–ç«™ç‚¹æ•°æ®"><a href="#Hexo-Alogliaè·å–ç«™ç‚¹æ•°æ®" class="headerlink" title="Hexo Alogliaè·å–ç«™ç‚¹æ•°æ®"></a>Hexo Alogliaè·å–ç«™ç‚¹æ•°æ®</h3><p>1ã€é…ç½®æœ¬åœ°ç¯å¢ƒ<br>æˆ‘ä»¬éœ€è¦é…ç½®ä¸€ä¸ªåç§°ä¸º <code>HEXO_ALGOLIA_INDEXING_KEY</code>ï¼Œå†…å®¹ä¸º <code>Alogolia</code> ç½‘é¡µä¸­ <code>Admin API KEY </code>çš„ç¯å¢ƒå˜é‡,<br>ä»¥macç«¯ä¸ºä¾‹:<br>æ‰“å¼€ç»ˆç«¯<code>vim ~/.bash_profile</code>æ·»åŠ ä¸‹é¢è¯­å¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export HEXO_ALGOLIA_INDEXING_KEY=d9987de239cbf5ad94ddcad7a5ef1682</span><br><span class="line">export PATH=$PATH:$GOROOT/bin:$GOPATH/bin:$MYSQL_HOME/bin:$MAVEN_HOME/bin:$CATALINA_HOME/bin:$CALIBRE_HOME:$JAVA_HOME/bin:$HEXO_ALGOLIA_INDEXING_KEY</span><br></pre></td></tr></table></figure>
<p>å†æ‰§è¡Œ<code>source ~/.bash_profile</code>åˆ·æ–°å³å¯ã€‚</p>
<p>å†åœ¨ <code>hexo</code>ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰§è¡Œ<code>hexo algolia</code> æ¥æœé›†æ•°æ®æ›´æ–°åˆ°æˆ‘ä»¬åˆšåˆ›å»ºçš„ <code>Index</code> ä¸­,æˆ‘ä»¬å¯ä»¥åœ¨ç½‘é¡µä¸­çœ‹åˆ°æ‰€æœ‰çš„æ•°æ®ï¼Œå¦‚ä¸‹å›¾<br><img data-src="https://s1.ax1x.com/2023/08/19/pP8nkCV.jpg" alt="" /></p>
<h3 id="é‡æ–°éƒ¨ç½²"><a href="#é‡æ–°éƒ¨ç½²" class="headerlink" title="é‡æ–°éƒ¨ç½²"></a>é‡æ–°éƒ¨ç½²</h3><p>æ‰§è¡Œ<code>hexo clean &amp;&amp; hexo g -d</code>é‡æ–°éƒ¨ç½²ï¼Œéƒ¨ç½²å®Œæˆåå†æ¬¡è®¿é—®ï¼Œå³å¯çœ‹åˆ°æœç´¢åŠŸèƒ½å·²ç»é…ç½®å®Œæˆï¼š<br><img data-src="https://s1.ax1x.com/2023/08/19/pP8u3on.jpg" alt="" /></p>
]]></content>
      <categories>
        <category>Hexo</category>
        <category>algolia</category>
      </categories>
  </entry>
  <entry>
    <title>hexo + materyä¸»é¢˜ç¾åŒ–åˆ†ç±»é¡µ</title>
    <url>/f223ff9c.html</url>
    <content><![CDATA[<p>æœ€è¿‘æ–°æ¢äº†ä¸ªåšå®¢ä¸»é¢˜ï¼Œmateryï¼Œæ„Ÿè§‰è¿™ä¸ªä¸»é¢˜è¿˜æŒºå¥½çœ‹çš„ã€‚<br>ç›¸ä¿¡å¾ˆå¤šäººå’Œæˆ‘ä¸€æ ·ï¼Œæ¢äº†ä¸»é¢˜å°±æƒ³ç€å„ç§ç¾åŒ–ï¼Œé­”æ”¹ï¼Œæ€å¥ˆæŠ€æœ¯ä¸åˆ°ä½ï¼Œè‡ªå·±æ²¡æœ‰è¿™ä¸ªèƒ½åŠ›ï¼Œåªèƒ½åœ¨ç½‘ä¸Šçœ‹çœ‹åˆ«äººæ˜¯æ€ä¹ˆæ”¹çš„ï¼Œç„¶åè‡ªå·±ç…§åšã€‚åºŸè¯ä¸å¤šè¯´ï¼Œæ­¥å…¥æ­£é¢˜ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å…ˆç»™çœ‹ä¸‹æ•ˆæœå›¾å§ï¼Œå–œæ¬¢å°±æ¥ç€å¾€ä¸‹çœ‹<br><img data-src="https://s1.ax1x.com/2022/11/03/xqs36I.png" alt="æ•ˆæœå›¾" /></p>
<img data-src="https://s1.ax1x.com/2022/11/03/xqs11A.png" alt="æ•ˆæœå›¾"/>

<h2 id="æ–‡ç« åˆ†ç±»é¡µç¾åŒ–"><a href="#æ–‡ç« åˆ†ç±»é¡µç¾åŒ–" class="headerlink" title="æ–‡ç« åˆ†ç±»é¡µç¾åŒ–"></a>æ–‡ç« åˆ†ç±»é¡µç¾åŒ–</h2><h3 id="å¼•å…¥ä»£ç "><a href="#å¼•å…¥ä»£ç " class="headerlink" title="å¼•å…¥ä»£ç "></a>å¼•å…¥ä»£ç </h3><ul>
<li>é¦–å…ˆï¼Œæ‰“å¼€â€&#x2F;layout&#x2F;category-cloud.ejsâ€æ–‡ä»¶</li>
<li>æ‰¾åˆ°ä¸‹é¢ä»£ç <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;span <span class="keyword">class</span>=<span class="string">&quot;chip center-align waves-effect waves-light</span></span><br><span class="line"><span class="string">          &lt;% if (isCategory &amp;&amp; category.name == page.category) &#123; %&gt; chip-active &lt;% &#125; else &#123; %&gt; chip-default &lt;% &#125; %&gt;&quot;</span></span><br><span class="line">          style=<span class="string">&quot;background-color: &lt;%- color %&gt;;&quot;</span>&gt;&lt;%- category.<span class="property">name</span> %&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;tag-length&quot;</span>&gt;</span>&lt;%- category.length %&gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">  &lt;/span&gt;</span><br></pre></td></tr></table></figure></li>
<li>å°†ä¸Šé¢ä»£ç ä¿®æ”¹ä¸ºä¸‹é¢ä»£ç <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;moleskine-wrapper&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;moleskine-notebook&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;chip notebook-cover center-align waves-effect waves-light</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">          &lt;% if (isCategory &amp;&amp; category.name == page.category) &#123; %&gt; chip-active &lt;% &#125; else &#123; %&gt; chip-default &lt;% &#125; %&gt;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&quot;background-color: &lt;%- color %&gt;;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">class</span>=<span class="string">&quot;notebook-skin</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">                  &lt;% if (isCategory &amp;&amp; category.name == page.category) &#123; %&gt; chip-active &lt;% &#125; else &#123; %&gt; chip-default &lt;% &#125; %&gt;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &lt;%- category.name %&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;notebook-page dotted&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;     </span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="è®¾ç½®css"><a href="#è®¾ç½®css" class="headerlink" title="è®¾ç½®css"></a>è®¾ç½®css</h3><p>å°†ä¸‹é¢ä»£ç æ”¾åœ¨<code>category-cloud.ejs</code>æ–‡ä»¶æœ«å°¾</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="comment">/* æ–‡ç« åˆ†ç±»ä¹¦æœ¬æ ·å¼ */</span></span><br><span class="line">.<span class="property">chip</span>-container .<span class="property">tag</span>-chips &#123;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">    flex-<span class="attr">wrap</span>: wrap;</span><br><span class="line">    justify-<span class="attr">content</span>: space-around;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">chip</span>-container .<span class="property">tag</span>-chips a &#123;</span><br><span class="line">    <span class="attr">margin</span>: <span class="number">0</span> 7px 10px;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">chip</span>-container .<span class="property">chip</span> &#123;</span><br><span class="line">    max-<span class="attr">width</span>: <span class="title function_">calc</span>(<span class="number">100</span>% / <span class="number">4</span>);</span><br><span class="line">    min-<span class="attr">width</span>: 10em;</span><br><span class="line">    <span class="attr">height</span>: 200px;</span><br><span class="line">    <span class="attr">position</span>: relative;</span><br><span class="line">    <span class="attr">transition</span>: .5s linear;</span><br><span class="line">    <span class="attr">padding</span>: 19px <span class="number">0</span>;</span><br><span class="line">    line-<span class="attr">height</span>: 20px;</span><br><span class="line">    z-<span class="attr">index</span>: <span class="number">990</span>;</span><br><span class="line">    border-<span class="attr">radius</span>: 5px 15px 15px 5px;</span><br><span class="line">    transform-<span class="attr">origin</span>: left center <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">chip</span>-container .<span class="property">notebook</span>-<span class="attr">cover</span>::before &#123;</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attr">position</span>: absolute;</span><br><span class="line">    <span class="attr">width</span>: 10px;</span><br><span class="line">    <span class="attr">height</span>: <span class="title function_">calc</span>(<span class="number">100</span>% + 2px);</span><br><span class="line">    <span class="attr">top</span>: -1px;</span><br><span class="line">    z-<span class="attr">index</span>: <span class="number">100</span>;</span><br><span class="line">    border-<span class="attr">radius</span>: 2px;</span><br><span class="line">    <span class="attr">right</span>: 25px;</span><br><span class="line">    <span class="attr">transition</span>: 2s ease;</span><br><span class="line">    <span class="comment">/* background: linear-gradient(to right,#9c2e2b 0,#cc4b48 12%,#9c2e2b 25%,#cc4b48 37%,#9c2e2b 50%,#cc4b48 62%,#9c2e2b 75%,#cc4b48 87%,#9c2e2b 100%); */</span></span><br><span class="line">    <span class="attr">background</span>: linear-<span class="title function_">gradient</span>(to right,#1e606e <span class="number">0</span>,#2e95aa <span class="number">12</span>%,#1e606e <span class="number">25</span>%,#2e95aa <span class="number">37</span>%,#1e606e <span class="number">50</span>%,#2e95aa <span class="number">62</span>%,#1e606e <span class="number">75</span>%,#2e95aa <span class="number">87</span>%,#1e606e <span class="number">100</span>%);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">chip</span> .<span class="property">notebook</span>-skin &#123;</span><br><span class="line">    <span class="attr">height</span>: 50px;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">100</span>%;</span><br><span class="line">    <span class="attr">background</span>: #e8e8e0;</span><br><span class="line">    margin-<span class="attr">top</span>: 42px;</span><br><span class="line">    <span class="attr">padding</span>: 10px 32px 64px 10px;</span><br><span class="line">    font-<span class="attr">size</span>: 19px;</span><br><span class="line">    <span class="attr">position</span>: relative;</span><br><span class="line">    z-<span class="attr">index</span>: <span class="number">10</span>;</span><br><span class="line">    <span class="attr">color</span>: #<span class="number">222</span>;</span><br><span class="line">    text-<span class="attr">align</span>: left;</span><br><span class="line">    box-<span class="attr">shadow</span>: <span class="number">0</span> 1px 1px <span class="title function_">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">.2</span>);</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">chip</span> .<span class="property">notebook</span>-<span class="attr">skin</span>:before &#123;</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attr">position</span>: absolute;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">100</span>%;</span><br><span class="line">    <span class="attr">height</span>: 15px;</span><br><span class="line">    <span class="attr">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attr">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attr">background</span>: #cddc39;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">notebook</span>-cover &#123;</span><br><span class="line">    <span class="attr">background</span>: #cc4b48;</span><br><span class="line">    <span class="attr">height</span>: 200px;</span><br><span class="line">    <span class="attr">width</span>: 140px;</span><br><span class="line">    <span class="attr">position</span>: absolute;</span><br><span class="line">    border-<span class="attr">radius</span>: 5px 15px 15px 5px;</span><br><span class="line">    z-<span class="attr">index</span>: <span class="number">10</span>;</span><br><span class="line">    <span class="attr">transition</span>: .5s linear;</span><br><span class="line">    transform-<span class="attr">style</span>: preserve-3d;</span><br><span class="line">    transform-<span class="attr">origin</span>: left center <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">moleskine</span>-wrapper &#123;</span><br><span class="line">    max-<span class="attr">width</span>: <span class="title function_">calc</span>(<span class="number">100</span>% / <span class="number">4</span>);</span><br><span class="line">    min-<span class="attr">width</span>: 10em;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">moleskine</span>-<span class="attr">notebook</span>:hover .<span class="property">notebook</span>-cover &#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">rotateY</span>(-50deg);</span><br><span class="line">    z-<span class="attr">index</span>: <span class="number">99</span>;</span><br><span class="line">    box-<span class="attr">shadow</span>: 20px 10px 50px <span class="title function_">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">.2</span>);</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">moleskine</span>-notebook &#123;</span><br><span class="line">    <span class="attr">height</span>: 200px;</span><br><span class="line">    <span class="attr">position</span>: relative;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">    flex-<span class="attr">wrap</span>: wrap;</span><br><span class="line">    justify-<span class="attr">content</span>: space-around;</span><br><span class="line">    <span class="attr">transition</span>: .5s linear;</span><br><span class="line">    border-<span class="attr">radius</span>: 5px 15px 15px 5px;</span><br><span class="line">    transform-<span class="attr">origin</span>: left center <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">moleskine</span>-<span class="attr">notebook</span>:hover &#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">rotateZ</span>(-10deg);</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">notebook</span>-page.<span class="property">dotted</span> &#123;</span><br><span class="line">    <span class="attr">background</span>: linear-<span class="title function_">gradient</span>(to bottom,#fbfae8 9px,#e4e4e4 1px);</span><br><span class="line">    background-<span class="attr">size</span>: <span class="number">100</span>% 10px;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">chip</span>-container .<span class="property">chip</span>:hover &#123;</span><br><span class="line">    <span class="attr">background</span>: none;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">notebook</span>-page &#123;</span><br><span class="line">    <span class="attr">height</span>: <span class="number">100</span>%;</span><br><span class="line">    <span class="attr">width</span>: 140px;</span><br><span class="line">    <span class="attr">position</span>: absolute;</span><br><span class="line">    <span class="attr">top</span>: 10px;</span><br><span class="line">    background-<span class="attr">color</span>: #fbfae8;</span><br><span class="line">    z-<span class="attr">index</span>: <span class="number">0</span>;</span><br><span class="line">    border-<span class="attr">radius</span>: 5px 16px 16px 5px;</span><br><span class="line">    <span class="attr">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>åšäº†å¦‚ä¸Šæ“ä½œï¼Œç„¶åéƒ¨ç½²åšå®¢å°±å¯ä»¥çœ‹åˆ°å˜åŒ–äº†å“¦~</p>
<h3 id="è¿›ä¸€æ­¥ä¼˜åŒ–"><a href="#è¿›ä¸€æ­¥ä¼˜åŒ–" class="headerlink" title="è¿›ä¸€æ­¥ä¼˜åŒ–"></a>è¿›ä¸€æ­¥ä¼˜åŒ–</h3><p>å¦‚æœå¯¹é¢œè‰²ä¸æ»¡æ„ï¼Œè¿˜å¯ä»¥è¿›è¡Œé¢œè‰²çš„è°ƒæ•´ï¼Œæ–¹æ³•å¦‚ä¸‹<br>æ‰“å¼€<code>source/css/matery.css</code>æ–‡ä»¶ï¼Œä¿®æ”¹ä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">.<span class="property">chip</span>-container .<span class="property">chip</span>:hover &#123;</span><br><span class="line">    <span class="attr">color</span>: #2ea451;</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">.8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">chip</span>-container .<span class="property">chip</span>-active &#123;</span><br><span class="line">    <span class="attr">color</span>: #2ea451 !important;</span><br><span class="line">    box-<span class="attr">shadow</span>: 2px 5px 10px #aaa !important;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ˜¯åšä¸»è‡ªå·±è®¾ç½®çš„é¢œè‰²ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºè‡ªå·±å–œæ¬¢çš„é¢œè‰²</p>
<h2 id="æ ‡ç­¾ç¾åŒ–"><a href="#æ ‡ç­¾ç¾åŒ–" class="headerlink" title="æ ‡ç­¾ç¾åŒ–"></a>æ ‡ç­¾ç¾åŒ–</h2><p>æ ‡ç­¾é¡µå°±å¾ˆç®€å•äº†å‘€<br>æ‰“å¼€<code>matery.css</code>æ–‡ä»¶ï¼Œä¿®æ”¹é¢œè‰²ä»£ç </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">.<span class="property">chip</span>-<span class="keyword">default</span> .<span class="property">tag</span>-length &#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="title function_">rgba</span>(<span class="number">66</span>, <span class="number">92</span>, <span class="number">118</span>, <span class="number">.8</span>);</span><br><span class="line">    margin-<span class="attr">top</span>: 1px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">chip</span>-active .<span class="property">tag</span>-length &#123;</span><br><span class="line">    <span class="attr">color</span>: #64c45b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚å›¾ï¼š<br><img data-src="https://s1.ax1x.com/2022/11/03/xqs8Xt.png" alt="æ•ˆæœå›¾"/></p>
<p><a href="https://blog.csdn.net/weixin_43662760/article/details/122311171?spm=1001.2101.3001.6650.14&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-14-122311171-blog-109411974.pc_relevant_3mothn_strategy_recovery&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-14-122311171-blog-109411974.pc_relevant_3mothn_strategy_recovery&utm_relevant_index=15">æ–‡ç« å‚è€ƒé“¾æ¥</a></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
  </entry>
  <entry>
    <title>hexoNextä¸»é¢˜æ·»åŠ ç›¸å†Œ</title>
    <url>/86212de4.html</url>
    <content><![CDATA[<p>æœ€è¿‘å°†åšå®¢çš„ä¸»é¢˜æ¢å›äº†<code>next</code>ä¸»é¢˜ã€‚ä»¥å‰å–œæ¬¢å°†è‡ªå·±çš„ä¸»é¢˜å¼„çš„èŠ±é‡Œèƒ¡å“¨çš„ã€‚ç°åœ¨åè€Œæ›´å–œæ¬¢ç®€å•ç‚¹çš„ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<span id="more"></span>

<p>æ”¹ä¸º<code>next</code>ä¸»é¢˜åï¼Œæœ‰äº›è‡ªå·±æƒ³è¦çš„åŠŸèƒ½æ²¡æœ‰ï¼Œæ¯”å¦‚ç›¸å†Œã€‚åœ¨ç½‘ä¸ŠæŸ¥äº†å¥½å¤šèµ„æ–™ï¼Œä¹Ÿæœ‰äººå®ç°äº†ï¼Œä½†æ˜¯éƒ½æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ–è€…ä¸æ˜¯è‡ªå·±æƒ³è¦çš„æ•ˆæœã€‚äºæ˜¯è‡ªå·±æ¢äº†ç§æ€è·¯ï¼Œç›´æ¥ç”¨<code>html</code>çš„æ–¹å¼å®ç°ï¼Œå†åŠ å…¥åˆ°åšå®¢ä¸­ã€‚è¿™æ ·ä»¥åä¸ç®¡æ¢ä»€ä¹ˆä¸»é¢˜ï¼Œç›¸å†ŒåŠŸèƒ½éƒ½å¯ä»¥ç›´æ¥ç§»æ¤ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚</p>
<a href="https://lengmo714.top/photos/" title="" target="">ç¬”è€…æ•ˆæœ,</a>

<h3 id="åœ¨åšå®¢å·¦ä¾§æ·»åŠ ç›¸å†Œé€‰é¡¹"><a href="#åœ¨åšå®¢å·¦ä¾§æ·»åŠ ç›¸å†Œé€‰é¡¹" class="headerlink" title="åœ¨åšå®¢å·¦ä¾§æ·»åŠ ç›¸å†Œé€‰é¡¹"></a>åœ¨åšå®¢å·¦ä¾§æ·»åŠ ç›¸å†Œé€‰é¡¹</h3><p>1ã€åœ¨å‘½ä»¤è¡Œè¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new page ç›¸å†Œ</span><br></pre></td></tr></table></figure>
<p>2ã€ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.yml</code><br>åœ¨<code>menu:</code>ä¸‹æ·»åŠ ä¸‹é¢è¿™è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç›¸å†Œ: /photos/ || fa fa-camera</span><br></pre></td></tr></table></figure>
<p>3ã€ä¿®æ”¹ç«™ç‚¹ä¸‹<code>source/photos/index.md</code>æ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢å†…å®¹</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 100%&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">marginwidth</span>=<span class="string">&quot;0&quot;</span> <span class="attr">marginheight</span>=<span class="string">&quot;0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;750px&quot;</span><span class="attr">src</span>=<span class="string">/net/photos/index.html</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><code>src=</code>åé¢æ¥ä½ æ”¾ç›¸å†Œçš„åœ°å€ï¼Œè¿™é‡Œæ˜¯æƒ³å¯¹äº<code>next/source</code>çš„ç›¸å¯¹ä½ç½®ã€‚å…¶ç»å¯¹ä½ç½®ä¸º<code>next/source/net/photos/index.html</code>ï¼Œè¿™é‡Œæ”¹ä¸ºä½ è‡ªå·±çš„ä½ç½®å³å¯ã€‚</p>
<h3 id="åˆ›å»ºç›¸å†Œ"><a href="#åˆ›å»ºç›¸å†Œ" class="headerlink" title="åˆ›å»ºç›¸å†Œ"></a>åˆ›å»ºç›¸å†Œ</h3><p>ç›¸å†Œæœ‰ä¸€äºŒçº§ç›®å½•ï¼Œåœ¨ä¸€çº§ç›®å½•ç‚¹å‡»å›¾ç‰‡ä¼šè¿›å…¥äºŒçº§ç›¸å†Œï¼Œè¿›å…¥äºŒçº§ç›¸å†Œåç‚¹å‡»ç›¸åº”çš„å›¾ç‰‡ä¼šæœ‰æ”¾å¤§æ•ˆæœã€‚<br>1ã€åœ¨<code>next/source/net</code>åˆ›å»º<code>photos</code>æ–‡ä»¶å¤¹ã€‚<br>2ã€åˆ›å»º<code>scripts.js</code>æ–‡ä»¶</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> modal = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;modal&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> modalImg = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;modal-img&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> captionText = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;caption&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> close = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;close&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.thumbnail&#x27;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">img</span> =&gt;</span> &#123;</span><br><span class="line">        img.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            modal.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span>;</span><br><span class="line">            modalImg.<span class="property">src</span> = img.<span class="property">src</span>;</span><br><span class="line">            captionText.<span class="property">innerHTML</span> = img.<span class="property">alt</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    close.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        modal.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (event.<span class="property">target</span> == modal) &#123;</span><br><span class="line">            modal.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>3ã€åˆ›å»º<code>styles.css</code>æ–‡ä»¶</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Arial, sans-serif;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album-cover</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album-cover</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">object-fit</span>: cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.gallery</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.thumbnail</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">object-fit</span>: cover;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.2s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.thumbnail</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.modal</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.modal-content</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">700px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#caption</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">700px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.close</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#f1f1f1</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.close</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.close</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#bbb</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4ã€åœ¨<code>photos</code>ä¸‹åˆ›å»º<code>index.html</code>æ–‡ä»¶ï¼Œç›¸å†Œä¸€çº§ç›®å½•ï¼Œå¹¶è¾“å…¥ä¸‹é¢å†…å®¹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ç›¸å†Œ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;styles.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç›¸å†Œ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;album&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;album1.html&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;album-cover&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://s1.ax1x.com/2023/07/08/pCgn83Q.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ç›¸å†Œ 1&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç›¸å†Œ 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Add more photos as needed --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>5ã€åˆ›å»ºäºŒçº§ç›¸å†Œ<code>album1.html</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>äº”ä¸€å¸¦å¥³æœ‹å‹å›é•¿æ²™<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;styles.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;scripts.js&quot;</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>äº”ä¸€å¸¦å¥³æœ‹å‹å›é•¿æ²™<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://s1.ax1x.com/2023/07/10/pCR5uZT.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;å¸¦å¥³æœ‹å‹å›å¤§å­¦å­¦æ ¡èµ°èµ°&quot;</span> <span class="attr">class</span>=<span class="string">&quot;thumbnail&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Add more photos as needed --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span>&gt;</span><span class="symbol">&amp;times;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;modal-content&quot;</span> <span class="attr">id</span>=<span class="string">&quot;modal-img&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;caption&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åšåˆ°è¿™é‡Œï¼Œä¸€ä¸ªç›¸å†ŒåŠŸèƒ½å°±åšå®Œå•¦ã€‚<a href="https://lengmo714.top/photos/" title="" target="">ç¬”è€…æ•ˆæœ,</a></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
  </entry>
  <entry>
    <title>hexoéƒ¨ç½²åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨</title>
    <url>/574ca0fa.html</url>
    <content><![CDATA[<blockquote>
<p>è¯´æ˜:è¿™é‡Œå…¶å®æ˜¯åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ªéƒ¨åˆ†æ˜¯å°†hexoç”Ÿæˆçš„é™æ€æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œç¬¬äºŒä¸ªéƒ¨åˆ†å°±æ˜¯éƒ¨ç½²ç½‘ç«™äº†ï¼ˆä¸ªäººç†è§£ï¼‰</p>
</blockquote>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨"><a href="#æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨"></a>æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨</h2><h3 id="åˆ›å»ºgitç”¨æˆ·"><a href="#åˆ›å»ºgitç”¨æˆ·" class="headerlink" title="åˆ›å»ºgitç”¨æˆ·"></a>åˆ›å»ºgitç”¨æˆ·</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adduser git</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹gitç”¨æˆ·å¯†ç "><a href="#ä¿®æ”¹gitç”¨æˆ·å¯†ç " class="headerlink" title="ä¿®æ”¹gitç”¨æˆ·å¯†ç "></a>ä¿®æ”¹gitç”¨æˆ·å¯†ç </h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo passwd git</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®æç¤ºæ“ä½œå³å¯</p>
<h3 id="è®¾ç½®æƒé™"><a href="#è®¾ç½®æƒé™" class="headerlink" title="è®¾ç½®æƒé™"></a>è®¾ç½®æƒé™</h3><p>ä½¿ç”¨vimç¼–è¾‘<code>/etc/sudoers</code>(vimçš„ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œä¸ä¼šå¯ä»¥ç™¾åº¦)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/sudoers</span><br></pre></td></tr></table></figure>
<p>æ‰¾åˆ°<code>User privilege specification</code>éƒ¨åˆ†ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git     ALL=(ALL:ALL) ALL</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://s1.ax1x.com/2023/07/11/pCfkGFO.jpg" alt="" /></p>
<h3 id="åˆ‡æ¢è‡³gitç”¨æˆ·"><a href="#åˆ‡æ¢è‡³gitç”¨æˆ·" class="headerlink" title="åˆ‡æ¢è‡³gitç”¨æˆ·"></a>åˆ‡æ¢è‡³gitç”¨æˆ·</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">su git</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œéœ€è¦è¾“å…¥<code>git</code>çš„ç”¨æˆ·å¯†ç </p>
<h3 id="æ·»åŠ å¯†é’¥"><a href="#æ·»åŠ å¯†é’¥" class="headerlink" title="æ·»åŠ å¯†é’¥"></a>æ·»åŠ å¯†é’¥</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p ~/.ssh</span><br><span class="line">touch ~/.ssh/authorized_keys</span><br><span class="line">chmod 600 ~/.ssh/authorzied_keys</span><br><span class="line">chmod 700 ~/.ssh</span><br><span class="line">vim ~/.ssh/authorized_keys    #å°†sshå¯†é’¥ç²˜è´´è¿›å»</span><br></pre></td></tr></table></figure>
<h3 id="ç™»å½•æµ‹è¯•"><a href="#ç™»å½•æµ‹è¯•" class="headerlink" title="ç™»å½•æµ‹è¯•"></a>ç™»å½•æµ‹è¯•</h3><p>åœ¨æœ¬åœ°æ‰“å¼€ç»ˆç«¯ï¼Œä»¥<code>ssh</code>çš„æ–¹å¼ç™»å½•äº‘æœåŠ¡å™¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh -v git@ä½ çš„ipåœ°å€</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºgitä»“åº“"><a href="#åˆ›å»ºgitä»“åº“" class="headerlink" title="åˆ›å»ºgitä»“åº“"></a>åˆ›å»ºgitä»“åº“</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir /www/git/ </span><br><span class="line">cd /www/git/</span><br><span class="line">git init --bare blog.git  #åœ¨/www/gitä¸‹åˆ›å»ºæ–°ä»“åº“blog.git</span><br><span class="line">chown git:git -R blog.git #ç»™äºˆgitç”¨æˆ·æƒé™</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>blog.git/hooks</code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª <code>post-receive</code> é’©å­</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd blog.git/hooks</span><br><span class="line">vim post-receive</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>post-receive</code> æ–‡ä»¶ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span> </span><br><span class="line">git --work-tree=/www/wwwroot/hexo --git-dir=/www/git/blog.git checkout -f</span><br></pre></td></tr></table></figure>
<p>æˆäºˆ <code>post-receive</code> æ–‡ä»¶å¯æ‰§è¡Œæƒé™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod +x /www/git/blog.git/hooks/post-receive</span><br></pre></td></tr></table></figure>
<p>åˆ›å»º<code>www/wwwroot/hexo</code>ç›®å½•ï¼Œç”¨äºNginxæ‰˜ç®¡ï¼ˆ<code>**gitç”¨æˆ·ä¸‹æ“ä½œ**</code>ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mkdir -p /www/wwwroot/hexo</span><br><span class="line">sudo chown -R $USER:$USER /www/wwwroot/hexo/ è®¾ç½®ç›®å½•æ‰€æœ‰æƒ</span><br><span class="line">sudo chmod -R 755 /www/wwwroot/hexo/</span><br></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œï¼ŒæœåŠ¡å™¨ä¸Šgitå°±å·²ç»å¼„å¥½äº†</p>
<h3 id="Hexoé…ç½®"><a href="#Hexoé…ç½®" class="headerlink" title="Hexoé…ç½®"></a>Hexoé…ç½®</h3><p>åœ¨hexoçš„<code>_config.yml</code>ä¸­è®¾ç½®ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: &#x27;git&#x27;</span><br><span class="line">  repo: git@æœåŠ¡å™¨ip:/www/git/blog.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>æœ€åä¸‰è¿å°±å¯ä»¥äº†<code>hexo clean &amp;&amp; hexo g -d</code></p>
<p>åˆ°è¿™é‡Œï¼Œè¿˜åªæ˜¯å°†hexoçš„é™æ€æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œä¸‹é¢æˆ‘ä»¬è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p>
<h2 id="æ­å»ºç½‘ç«™"><a href="#æ­å»ºç½‘ç«™" class="headerlink" title="æ­å»ºç½‘ç«™"></a>æ­å»ºç½‘ç«™</h2><p>æ­å»ºç½‘ç«™æ¯”è¾ƒç®€å•</p>
<h3 id="å®‰è£…å®å¡”"><a href="#å®‰è£…å®å¡”" class="headerlink" title="å®‰è£…å®å¡”"></a>å®‰è£…å®å¡”</h3><p>æ³¨æ„ï¼šå®å¡”å®‰è£…å®Œåéœ€è¦å®‰è£…<code>nginx</code>ï¼Œé¦–æ¬¡è¿›å…¥å®å¡”ä¼šæœ‰å®‰è£…æç¤ºï¼Œæ ¹æ®æç¤ºå®‰è£…å³å¯ã€‚</p>
<h3 id="æ·»åŠ ç½‘ç«™"><a href="#æ·»åŠ ç½‘ç«™" class="headerlink" title="æ·»åŠ ç½‘ç«™"></a>æ·»åŠ ç½‘ç«™</h3><p>åœ¨å®å¡”ç•Œé¢ç›´æ¥æ·»åŠ ç½‘ç«™å³å¯ï¼Œå¡«å†™è‡ªå·±çš„åŸŸåï¼Œæ ¹ç›®å½•é€‰æ‹©æœåŠ¡å™¨å­˜æ”¾hexoé™æ€æ–‡ä»¶çš„æ–‡ä»¶ç›®å½•å³å¯ï¼Œå¦‚ä¸‹å›¾<br><img data-src="https://s1.ax1x.com/2023/07/11/pCfAptO.jpg" alt="" /><br><img data-src="https://s1.ax1x.com/2023/07/11/pCfAnN8.jpg" alt="" /><br><img data-src="https://s1.ax1x.com/2023/07/11/pCfAmAf.jpg" alt="" /></p>
<h2 id="æ•´ä¸ªè¿‡ç¨‹è¸©çš„å‡ ä¸ªå‘"><a href="#æ•´ä¸ªè¿‡ç¨‹è¸©çš„å‡ ä¸ªå‘" class="headerlink" title="æ•´ä¸ªè¿‡ç¨‹è¸©çš„å‡ ä¸ªå‘"></a>æ•´ä¸ªè¿‡ç¨‹è¸©çš„å‡ ä¸ªå‘</h2><h3 id="ç½‘ç«™éƒ¨ç½²å®ŒååŸŸåæ— æ³•è®¿é—®"><a href="#ç½‘ç«™éƒ¨ç½²å®ŒååŸŸåæ— æ³•è®¿é—®" class="headerlink" title="ç½‘ç«™éƒ¨ç½²å®ŒååŸŸåæ— æ³•è®¿é—®"></a>ç½‘ç«™éƒ¨ç½²å®ŒååŸŸåæ— æ³•è®¿é—®</h3><p>å¯èƒ½æ€§ï¼š<br>1ã€è¿è¡Œç›®å½•é€‰æ‹©é”™è¯¯ã€‚<br>è§£å†³æ–¹æ³•ï¼šæŸ¥çœ‹è¿è¡Œç›®å½•ä¸‹æ˜¯å¦æœ‰æœ¬åœ°æ¨é€ä¸Šæ¥çš„æ–‡ä»¶<br>2ã€åŸŸåæ˜¯å¦è§£æ<br>åŸŸåè¦æ­£å¸¸è§£æåˆ°è‡ªå·±çš„æœåŠ¡å™¨<br>3ã€ç½‘ç«™æ˜¯å¦æœ‰SSLè¯ä¹¦<br>åšä¸»è¿™é‡Œå°±æ˜¯é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œç½‘ç«™æ²¡æœ‰é…ç½®SSLè¯ä¹¦ï¼ŒåŸŸåå§‹ç»ˆæ‰“ä¸æ¥ï¼Œé…ç½®å¥½è¯ä¹¦åå¯ä»¥æ­£å¸¸è®¿é—®</p>
<h3 id="æ–‡ä»¶æ— æ³•æ¨é€"><a href="#æ–‡ä»¶æ— æ³•æ¨é€" class="headerlink" title="æ–‡ä»¶æ— æ³•æ¨é€"></a>æ–‡ä»¶æ— æ³•æ¨é€</h3><p>å…¨éƒ¨é…ç½®å¥½åœ¨æ‰§è¡Œä¸‰è¿çš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°æœ¬åœ°æ–‡ä»¶æ— æ³•æ¨é€çš„é—®é¢˜ï¼Œå¯èƒ½æ˜¯å› ä¸ºæœåŠ¡å™¨ä¸Šå­˜æ”¾è¿™äº›æ–‡ä»¶çš„æ–‡ä»¶å¤¹æƒé™é—®é¢˜ï¼Œä¿®æ”¹å¥½æƒé™å³å¯ã€‚</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
  </entry>
  <entry>
    <title>httpå¼ºåˆ¶è·³åˆ°https</title>
    <url>/f4442f9c.html</url>
    <content><![CDATA[<p>åšä¸»æœ€è¿‘å¿ƒè¡€æ¥æ½®ï¼Œå°†ç½‘ç«™ä»githubéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ä¸Šã€‚<br>åœ¨åŸŸåè§£æä¹‹åå‘ç°è®¿é—®åšå®¢åªèƒ½é€šè¿‡<code>http</code>è®¿é—®ï¼Œè€Œä¸”æ€»æ˜¯æç¤ºç½‘ç«™ä¸å®‰å…¨ï¼Œäºæ˜¯ä¾¿å¿ƒç”Ÿäº†å°†<code>http</code>å¼ºåˆ¶è·³è½¬åˆ°<code>https</code>çš„æƒ³æ³•~</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åšæ³•å¾ˆç®€å•</p>
<h3 id="ä¸‹è½½sslè¯ä¹¦"><a href="#ä¸‹è½½sslè¯ä¹¦" class="headerlink" title="ä¸‹è½½sslè¯ä¹¦"></a>ä¸‹è½½sslè¯ä¹¦</h3><p>ä¸‹è½½nginxçš„sslè¯ä¹¦ï¼Œæ²¡æœ‰çš„éœ€è¦å…ˆå»ç”³è¯·ï¼Œç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†</p>
<h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>æ‰“å¼€äº‘æœåŠ¡å™¨ç»ˆç«¯ï¼Œä¿®æ”¹<code>nginx.conf</code>é…ç½®ï¼Œè¾“å…¥å‘½ä»¤<br><code>vim /etc/nginx/nginx.conf</code><br>å°†ä¸‹é¢ä»£ç å¤åˆ¶ç²˜è´´åˆ°åŸæœ‰çš„é…ç½®çš„<code>server&#123;&#125;</code>ä¸‹é¢</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">        listen <span class="number">443</span> ssl;</span><br><span class="line">        server_name localhost;  <span class="comment"># localhostä¿®æ”¹ä¸ºæ‚¨è¯ä¹¦ç»‘å®šçš„åŸŸåã€‚</span></span><br><span class="line">        ssl_certificate cert/domain_name.top.pem;   <span class="comment">#å°†domain_name.pemæ›¿æ¢æˆæ‚¨è¯ä¹¦çš„æ–‡ä»¶åã€‚</span></span><br><span class="line">        ssl_certificate_key cert/domain_name.top.key;   <span class="comment">#å°†domain_name.keyæ›¿æ¢æˆæ‚¨è¯ä¹¦çš„å¯†é’¥æ–‡ä»¶åã€‚</span></span><br><span class="line">        ssl_session_timeout 5m;</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;  <span class="comment">#ä½¿ç”¨æ­¤åŠ å¯†å¥—ä»¶ã€‚</span></span><br><span class="line">        ssl_protocols TLSv1 TLSv1<span class="number">.1</span> TLSv1<span class="number">.2</span>;   <span class="comment">#ä½¿ç”¨è¯¥åè®®è¿›è¡Œé…ç½®ã€‚</span></span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass   http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">80</span>;  <span class="comment">#é€‰å¡«ä½ çš„ç«¯å£å·</span></span><br><span class="line">            proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_set_header Host $host;</span><br><span class="line">            proxy_set_header Upgrade-Insecure-Requests <span class="number">1</span>;</span><br><span class="line">            proxy_set_header X-Forwarded-Proto https;</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å¤åˆ¶å¥½åï¼ŒæŒ‰<code>esc</code>é”®ï¼Œç„¶åæŒ‰<code>shift + :</code>é”®ï¼Œè¾“å…¥<code>x</code>ä¿å­˜é€€å‡º<br>å†åœ¨ç»ˆç«¯è¾“å…¥<code>nginx -s reload</code>é‡å¯nginxæœåŠ¡å³å¯<br><img data-src="https://s1.ax1x.com/2022/11/06/xj0uLt.md.jpg" alt=""/></p>
]]></content>
      <categories>
        <category>https</category>
      </categories>
      <tags>
        <tag>http</tag>
        <tag>https</tag>
      </tags>
  </entry>
  <entry>
    <title>httpè¯·æ±‚è¿”å›404é”™è¯¯å¯èƒ½çš„åŸå› åŠè§£å†³æ–¹æ¡ˆ</title>
    <url>/9432c199.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h3 id="è§£å†³-HTTP-è¯·æ±‚è¿”å›-404-é”™è¯¯"><a href="#è§£å†³-HTTP-è¯·æ±‚è¿”å›-404-é”™è¯¯" class="headerlink" title="è§£å†³ HTTP è¯·æ±‚è¿”å› 404 é”™è¯¯"></a>è§£å†³ HTTP è¯·æ±‚è¿”å› 404 é”™è¯¯</h3><p>å¦‚æœåœ¨è¿›è¡Œ HTTP è¯·æ±‚æ—¶é‡åˆ° 404 é”™è¯¯ï¼Œé€šå¸¸è¡¨ç¤ºè¯·æ±‚çš„èµ„æºæœªæ‰¾åˆ°ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½å¯¼è‡´è¿™ç§æƒ…å†µçš„åŸå› ä»¥åŠç›¸åº”çš„è§£å†³æ–¹æ³•ï¼š</p>
<ol>
<li><p><strong>URL é”™è¯¯ï¼š</strong><br>ç¡®ä¿è¯·æ±‚çš„ URL æ˜¯æ­£ç¡®çš„ï¼ŒåŒ…æ‹¬è·¯å¾„å’Œæ–‡ä»¶åã€‚ä»”ç»†æ£€æŸ¥ URL æ˜¯å¦æ‹¼å†™æ­£ç¡®ã€‚</p>
</li>
<li><p><strong>èµ„æºä¸å­˜åœ¨ï¼š</strong><br>å¦‚æœè¯·æ±‚çš„æ˜¯æ–‡ä»¶ï¼Œç¡®ä¿æ–‡ä»¶å­˜åœ¨äºæœåŠ¡å™¨ä¸Šçš„æŒ‡å®šä½ç½®ã€‚å¯¹äºåŠ¨æ€èµ„æºï¼Œç¡®ä¿ç›¸åº”çš„æœåŠ¡ç«¯ç«¯ç‚¹æˆ–è·¯ç”±å­˜åœ¨ã€‚</p>
</li>
<li><p><strong>æƒé™é—®é¢˜ï¼š</strong><br>æ£€æŸ¥æ˜¯å¦å…·æœ‰è®¿é—®èµ„æºçš„æƒé™ã€‚æœ‰æ—¶æœåŠ¡å™¨å¯èƒ½è¿”å› 404 é”™è¯¯ï¼Œå³ä½¿èµ„æºå­˜åœ¨ï¼Œå› ä¸ºç¼ºä¹è¶³å¤Ÿçš„æƒé™ã€‚</p>
</li>
<li><p><strong>æœåŠ¡å™¨é…ç½®é—®é¢˜ï¼š</strong><br>404 é”™è¯¯å¯èƒ½ç”±äºæœåŠ¡å™¨é…ç½®é—®é¢˜å¼•èµ·ã€‚ç¡®ä¿æœåŠ¡å™¨é…ç½®æ­£ç¡®ï¼ŒåŒ…æ‹¬æ–‡ä»¶è·¯å¾„ã€æƒé™å’Œè·¯ç”±è®¾ç½®ã€‚</p>
</li>
<li><p><strong>æ–‡ä»¶å¤§å°å†™é—®é¢˜ï¼š</strong><br>æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦åŒºåˆ†æ–‡ä»¶è·¯å¾„çš„å¤§å°å†™ã€‚ç¡®ä¿ URL ä¸­çš„å¤§å°å†™ä¸æœåŠ¡å™¨ä¸Šçš„å®é™…æ–‡ä»¶ååŒ¹é…ã€‚</p>
</li>
<li><p><strong>ç½‘ç»œé—®é¢˜ï¼š</strong><br>æœ‰æ—¶ç½‘ç»œé—®é¢˜å¯èƒ½å¯¼è‡´è¯·æ±‚æœªèƒ½æ­£ç¡®åˆ°è¾¾æœåŠ¡å™¨ã€‚ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œå°è¯•ä½¿ç”¨å…¶ä»–ç½‘ç»œç¯å¢ƒè¿›è¡Œæµ‹è¯•ã€‚</p>
</li>
<li><p><strong>æœåŠ¡å™¨æ•…éšœï¼š</strong><br>å¦‚æœç¡®å®š URL å’Œèµ„æºéƒ½æ­£ç¡®ï¼Œå¯èƒ½æ˜¯æœåŠ¡å™¨å‡ºç°æ•…éšœã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·è”ç³»æœåŠ¡å™¨ç®¡ç†å‘˜ä»¥è·å–å¸®åŠ©ã€‚</p>
</li>
<li><p><strong>URL ç¼–ç é—®é¢˜ï¼š</strong><br>å¦‚æœ URL åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œç¡®ä¿è¿›è¡Œäº†æ­£ç¡®çš„ URL ç¼–ç ã€‚æŸäº›å­—ç¬¦åœ¨ URL ä¸­éœ€è¦è¿›è¡Œç¼–ç ä»¥ç¡®ä¿æ­£ç¡®ä¼ é€’ã€‚</p>
</li>
</ol>
<p>é€šè¿‡æ£€æŸ¥è¿™äº›æ–¹é¢ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿæ‰¾åˆ°å¯¼è‡´ HTTP 404 é”™è¯¯çš„åŸå› ã€‚å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå¯èƒ½éœ€è¦æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ä»¥è·å–æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ã€‚</p>
]]></content>
      <categories>
        <category>Web Development</category>
      </categories>
      <tags>
        <tag>HTTP</tag>
        <tag>è¯·æ±‚</tag>
        <tag>404</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaä¸­ifæ¡ä»¶è¯­å¥</title>
    <url>/5fc050ec.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h1 id="if-è¯­å¥"><a href="#if-è¯­å¥" class="headerlink" title="if è¯­å¥"></a>if è¯­å¥</h1><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>å½“æˆ‘ä»¬éœ€è¦æ ¹æ®ç»™å®šçš„æ¡ä»¶æ¥å†³å®šæ˜¯å¦æ‰§è¡Œä¸€æ®µä»£ç æ—¶ï¼Œ<code>if</code> è¯­å¥å°±æ´¾ä¸Šç”¨åœºäº†ã€‚<code>if</code> å—ä»…åœ¨ä¸å…¶å…³è”çš„å¸ƒå°”è¡¨è¾¾å¼ä¸º <code>true</code> æ—¶æ‰§è¡Œã€‚<code>if</code> å—çš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (æ¡ä»¶) &#123;</span><br><span class="line">    <span class="comment">// å½“æ¡ä»¶æˆç«‹æ—¶æ‰§è¡Œæ­¤å¤„ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤§æ‹¬å·ä¸­åŒ…å«çš„å†…å®¹å°±ç§°ä¸ºè¯­å¥å—ã€‚</p>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª <code>if</code> è¯­å¥çš„å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfStatement1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">18</span>;</span><br><span class="line">        <span class="keyword">if</span>(age &gt;= <span class="number">18</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åœ¨ä¸­å›½ä½ å·²ç»æˆå¹´&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨ä¸­å›½ä½ å·²ç»æˆå¹´</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å½“æ¡ä»¶<code>age &gt;= 18</code> æˆç«‹æ—¶ï¼Œä¹Ÿå°±æ˜¯å¸ƒå°”è¡¨è¾¾å¼è®¡ç®—ç»“æœä¸º <code>true</code>(çœŸ)ï¼Œ<code>if</code> è¯­å¥å—ä¼šæ‰§è¡Œã€‚æ˜¾ç„¶ä¸Šé¢å®ä¾‹ä¸­ <code>age</code> å˜é‡çš„å€¼ä¸º 18ï¼Œæ¡ä»¶æ˜¯æˆç«‹çš„ï¼Œæ‰§è¡Œç¨‹åºï¼Œå±å¹•ä¸Šå°†ä¼šæ‰“å° â€œåœ¨ä¸­å›½ä½ å·²ç»æˆå¹´â€ã€‚</p>
<p>å¦‚æœè¯­å¥å—å†…åªæœ‰ä¸€æ¡è¯­å¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å»æ‰èŠ±æ‹¬å· <code>&#123;&#125;</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(age &gt;= <span class="number">18</span>)</span><br><span class="line">    System.out.println(<span class="string">&quot;åœ¨ä¸­å›½ä½ å·²ç»æˆå¹´&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œå³ä½¿ <code>if</code> è¯­å¥å—åªæœ‰ä¸€æ¡è¯­å¥ï¼Œä¹Ÿå¹¶ä¸æ¨èè¿™ç§ä¸æ˜“äºé˜…è¯»çš„å†™æ³•ã€‚</p>
<h1 id="if-â€¦-else-â€¦-è¯­å¥"><a href="#if-â€¦-else-â€¦-è¯­å¥" class="headerlink" title="if â€¦ else â€¦ è¯­å¥"></a>if â€¦ else â€¦ è¯­å¥</h1><h2 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p><code>if</code> è¯­å¥å¯ä»¥ç»“åˆ <code>else</code> æ¥ä½¿ç”¨ï¼Œå½“å¸ƒå°”è¡¨è¾¾å¼è®¡ç®—ç»“æœä¸º <code>false</code> ï¼ˆå‡ï¼‰æ—¶ï¼Œ<code>else</code> è¯­å¥å—å°†ä¼šæ‰§è¡Œã€‚</p>
<p><code>if .. .else</code> è¯­å¥ç”¨äºæœ‰æ¡ä»¶åœ°æ‰§è¡Œä¸¤ä¸ªä»£ç å—çš„å…¶ä¸­ä¸€ä¸ªï¼Œå…·ä½“æ‰§è¡Œå“ªä¸€ä¸ªä»£ç å—ï¼Œå–å†³äºå¸ƒå°”æ¡ä»¶çš„ç»“æœã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (æ¡ä»¶) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ¡ä»¶æˆç«‹ï¼Œæ‰§è¡Œæ­¤å¤„ä»£ç </span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ¡ä»¶ä¸æˆç«‹ï¼Œæ‰§è¡Œæ­¤å¤„ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>æ”¹å†™ä¸Šé¢ <code>if</code> è¯­å¥çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfElseStatement1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">15</span>;</span><br><span class="line">        <span class="keyword">if</span>(age &gt;= <span class="number">18</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åœ¨ä¸­å›½ä½ å·²ç»æˆå¹´&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åœ¨ä¸­å›½ä½ è¿˜æœªæˆå¹´&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨ä¸­å›½ä½ è¿˜æœªæˆå¹´</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å°†å˜é‡ <code>age</code> èµ‹å€¼ä¸º 15ï¼Œå¹¶ä¸”åœ¨ <code>if</code> è¯­å¥å—çš„åé¢åŠ äº†ä¸€æ®µ <code>else &#123;...&#125;</code> è¯­å¥å—ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæ¡ä»¶ <code>age &gt;= 18</code> çš„è®¡ç®—ç»“æœå°±ä¸º <code>false</code> äº†ï¼Œç¨‹åºå°†ä¼šæ‰§è¡Œ <code>else</code> è¯­å¥å—ä¸­çš„ä»£ç ã€‚æ‰§è¡Œä»£ç ï¼Œå±å¹•å°†ä¼šæ‰“å° â€œåœ¨ä¸­å›½ä½ è¿˜æœªæˆå¹´â€ã€‚</p>
<blockquote>
<p>è¡¥å……<br>Java æ”¯æŒä½¿ç”¨<strong>æ¡ä»¶è¡¨è¾¾å¼</strong>ï¼ˆåˆç§°ä¸‰ç›®è¿ç®—ç¬¦ï¼‰<code>è¡¨è¾¾å¼1 ? è¡¨è¾¾å¼2 : è¡¨è¾¾å¼3</code> æ¥ç®€åŒ– <code>if else</code> è¯­å¥çš„ä»£ç ã€‚<br>è¡¨è¾¾å¼ 1 çš„ä½œç”¨ç­‰åŒäº <code>if</code> è¯­å¥åé¢çš„æ¡ä»¶ï¼Œå¦‚æœè¡¨è¾¾å¼ 1 ä¸º <code>true</code>ï¼Œ åˆ™æ‰§è¡Œ <code>è¡¨è¾¾å¼2</code>ï¼Œ å¦åˆ™æ‰§è¡Œ <code>è¡¨è¾¾å¼3</code></p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ä¸Šé¢çš„ä»£ç å¯ä»¥ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦æ¥å®ç°åŒæ ·çš„åŠŸèƒ½ã€‚å®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfElseStatement2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">15</span>;</span><br><span class="line">        System.out.println(age &gt;= <span class="number">18</span> ? <span class="string">&quot;åœ¨ä¸­å›½ä½ å·²ç»æˆå¹´&quot;</span> :  <span class="string">&quot;åœ¨ä¸­å›½ä½ è¿˜æœªæˆå¹´&quot;</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="if-â€¦-else-if-â€¦-else-è¯­å¥"><a href="#if-â€¦-else-if-â€¦-else-è¯­å¥" class="headerlink" title="if â€¦ else if â€¦ else è¯­å¥"></a>if â€¦ else if â€¦ else è¯­å¥</h1><h2 id="è¯­æ³•-2"><a href="#è¯­æ³•-2" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><blockquote>
<p><code>if</code> è¯­å¥å¯ä»¥ç»“åˆ <code>else if</code> æ¥å®ç°æ›´å¤æ‚çš„ç¨‹åºåˆ†æ”¯ç»“æ„ï¼š</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (æ¡ä»¶<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ¡ä»¶1æˆç«‹ï¼Œæ‰§è¡Œæ­¤å¤„ä»£ç </span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (æ¡ä»¶<span class="number">2</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ¡ä»¶1ä¸æˆç«‹ï¼Œå¹¶ä¸”æ¡ä»¶2æˆç«‹ï¼Œæ‰§è¡Œæ­¤å¤„ä»£ç </span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ¡ä»¶1ã€æ¡ä»¶2éƒ½ä¸æˆç«‹ï¼Œæ‰§è¡Œæ­¤å¤„ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®ä¾‹-2"><a href="#å®ä¾‹-2" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p><code>if</code> è¯­å¥å¯ä»¥æ­é…ä»»æ„å¤šæ•°é‡çš„ <code>else if</code> è¯­å¥ä½¿ç”¨ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ª <code>else</code>ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®ç»™å®šåˆ†æ•°å‘å±å¹•æ‰“å°è¯„çº§</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfElseIfStatement</span> &#123;</span><br><span class="line">	  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> <span class="number">70</span>;</span><br><span class="line">        <span class="keyword">if</span> (score &gt;= <span class="number">90</span>) &#123;</span><br><span class="line">          	System.out.println(<span class="string">&quot;ä¼˜ç§€&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(score &gt;= <span class="number">70</span>) &#123;</span><br><span class="line">          	System.out.println(<span class="string">&quot;è‰¯å¥½&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">          	System.out.println(<span class="string">&quot;åŠæ ¼&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          	System.out.println(<span class="string">&quot;ä¸åŠæ ¼&quot;</span>);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è‰¯å¥½</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿è¡Œç»“æœä¸º â€œè‰¯å¥½â€ï¼Œä½ ä¹Ÿè®¸ä¼šç–‘æƒ‘ï¼Œscore ä¸º 70ï¼ŒåŒæ ·ä¹Ÿå¤§äºç­‰äº 60ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰è¾“å…¥ â€œåŠæ ¼â€ å‘¢ï¼Ÿ<br>è¿™æ˜¯ç”±äºå½“ç¨‹åºé‡åˆ°ç¬¦åˆæ¡ä»¶çš„åˆ†æ”¯å°±ä¼šæ‰§è¡Œå…¶åˆ†æ”¯è¯­å¥å—ä¸­çš„è¯­å¥ï¼Œä¸ä¼šæ‰§è¡Œå…¶ä»–åˆ†æ”¯è¯­å¥å—çš„è¯­å¥ã€‚</p>
</blockquote>
<h2 id="åµŒå¥—-if-â€¦-else-è¯­å¥"><a href="#åµŒå¥—-if-â€¦-else-è¯­å¥" class="headerlink" title="åµŒå¥— if â€¦ else è¯­å¥"></a>åµŒå¥— if â€¦ else è¯­å¥</h2><p>ä½ ä¹Ÿå¯ä»¥åœ¨å¦ä¸€ä¸ª <code>if</code> æˆ–è€… <code>else if</code> è¯­å¥ä¸­ä½¿ç”¨ <code>if</code> æˆ–è€… <code>else if</code> è¯­å¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(æ¡ä»¶<span class="number">1</span>)&#123;</span><br><span class="line">   <span class="comment">// å¦‚æœæ¡ä»¶1ä¸ºçœŸï¼Œæ‰§è¡Œè¿™é‡Œçš„è¯­å¥</span></span><br><span class="line">   <span class="keyword">if</span>(æ¡ä»¶<span class="number">2</span>)&#123;</span><br><span class="line">      <span class="comment">////å¦‚æœæ¡ä»¶2ä¸ºçœŸï¼Œæ‰§è¡Œè¿™é‡Œçš„è¯­å¥</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªåµŒå¥—è¯­å¥çš„å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfElseStatement1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      	<span class="comment">// åˆå§‹åŒ–æ•´å‹å˜é‡ageï¼Œå€¼ä¸º25</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">25</span>;</span><br><span class="line">				<span class="type">int</span> <span class="variable">sex</span> <span class="operator">=</span> <span class="number">1</span>;  <span class="comment">// æ­¤å¤„ç”¨sexå˜é‡è¡¨ç¤ºæ€§åˆ«ï¼Œ1ï¼šç”·  2ï¼šå¥³</span></span><br><span class="line">        <span class="keyword">if</span>(age &gt;= <span class="number">20</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åœ¨ä¸­å›½ä½ å·²ç»æˆå¹´&quot;</span>);</span><br><span class="line">          	<span class="keyword">if</span>(sex == <span class="number">2</span>) &#123;</span><br><span class="line">              	System.out.println(<span class="string">&quot;å¹¶ä¸”åˆ°äº†æ³•å®šçš„ç»“å©šå¹´é¾„&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          	<span class="keyword">if</span>(sex == <span class="number">1</span> &amp;&amp; age &gt;= <span class="number">22</span>) &#123;</span><br><span class="line">              	System.out.println(<span class="string">&quot;å¹¶ä¸”åˆ°äº†æ³•å®šçš„ç»“å©šå¹´é¾„&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åœ¨ä¸­å›½ä½ è¿˜æœªæˆå¹´&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨ä¸­å›½ä½ å·²ç»æˆå¹´</span><br><span class="line">å¹¶ä¸”åˆ°äº†æ³•å®šçš„ç»“å©šå¹´é¾„</span><br></pre></td></tr></table></figure>

<h1 id="switch-è¯­å¥"><a href="#switch-è¯­å¥" class="headerlink" title="switch è¯­å¥"></a>switch è¯­å¥</h1><h2 id="è¯­æ³•-3"><a href="#è¯­æ³•-3" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p><code>switch</code> æ¡ä»¶è¯­å¥å¯ä»¥ç†è§£ä¸ºç®€å†™ç‰ˆçš„å¤šä¸ª <code>if .. else</code> è¯­å¥ã€‚<code>switch</code> è¯­å¥çš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> (å€¼) &#123;</span><br><span class="line">    <span class="keyword">case</span> å€¼<span class="number">1</span>:</span><br><span class="line">       è¯­å¥<span class="number">1.1</span></span><br><span class="line">       ...</span><br><span class="line">	   è¯­å¥n<span class="number">.1</span></span><br><span class="line">       <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> å€¼<span class="number">2</span>:</span><br><span class="line">        è¯­å¥<span class="number">2.1</span></span><br><span class="line">        ...</span><br><span class="line">        è¯­å¥<span class="number">2.</span>n</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        è¯­å¥n<span class="number">.1</span></span><br><span class="line">        ...</span><br><span class="line">        è¯­å¥n.n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>switch case è¯­å¥æœ‰å¦‚ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li>switch è¯­å¥ä¸­çš„å˜é‡ç±»å‹å¯ä»¥æ˜¯ï¼š <code>byte</code>ã€<code>short</code>ã€<code>int</code>ã€ <code>char</code> æˆ–è€… <code>String</code>ï¼›</li>
<li>switch è¯­å¥å¯ä»¥æ‹¥æœ‰å¤šä¸ª case è¯­å¥ã€‚æ¯ä¸ª case åé¢è·Ÿä¸€ä¸ªè¦æ¯”è¾ƒçš„å€¼å’Œå†’å·ï¼›</li>
<li>case è¯­å¥ä¸­çš„å€¼çš„æ•°æ®ç±»å‹å¿…é¡»ä¸å˜é‡çš„æ•°æ®ç±»å‹ç›¸åŒï¼Œè€Œä¸”åªèƒ½æ˜¯å¸¸é‡æˆ–è€…å­—é¢å¸¸é‡ï¼›</li>
<li>å½“å˜é‡çš„å€¼ä¸ case è¯­å¥çš„å€¼ç›¸ç­‰æ—¶ï¼Œé‚£ä¹ˆ case è¯­å¥ä¹‹åçš„è¯­å¥å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ° break è¯­å¥å‡ºç°æ‰ä¼šè·³å‡º switch è¯­å¥ï¼›</li>
<li>å½“é‡åˆ° break è¯­å¥æ—¶ï¼Œswitch è¯­å¥ç»ˆæ­¢ã€‚ç¨‹åºè·³è½¬åˆ° switch è¯­å¥åé¢çš„è¯­å¥æ‰§è¡Œã€‚case è¯­å¥ä¸ä¸€å®šè¦åŒ…å« break è¯­å¥ã€‚å¦‚æœæ²¡æœ‰ break è¯­å¥å‡ºç°ï¼Œç¨‹åºä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡ case è¯­å¥ï¼Œç›´åˆ°å‡ºç° break è¯­å¥ï¼›</li>
<li>switch è¯­å¥å¯ä»¥åŒ…å«ä¸€ä¸ª default åˆ†æ”¯ï¼Œè¯¥åˆ†æ”¯ä¸€èˆ¬æ˜¯ switch è¯­å¥çš„æœ€åä¸€ä¸ªåˆ†æ”¯ï¼ˆå¯ä»¥åœ¨ä»»ä½•ä½ç½®ï¼Œä½†å»ºè®®åœ¨æœ€åä¸€ä¸ªï¼‰ã€‚default åœ¨æ²¡æœ‰ case è¯­å¥çš„å€¼å’Œå˜é‡å€¼ç›¸ç­‰çš„æ—¶å€™æ‰§è¡Œã€‚default åˆ†æ”¯ä¸éœ€è¦ break è¯­å¥ã€‚</li>
</ul>
<h2 id="å®ä¾‹-3"><a href="#å®ä¾‹-3" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢çš„ä¸€ä¸ªç®€å•å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchStatement1</span> &#123;</span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">      	<span class="keyword">switch</span> (i) &#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">              <span class="comment">// i çš„å€¼ä¸ç­‰äº1ï¼Œæ‰€ä»¥ä¸æ‰§è¡Œæ­¤å¤„ä»£ç </span></span><br><span class="line">              System.out.println(<span class="string">&quot;içš„å€¼ä¸º1&quot;</span>);</span><br><span class="line">            	<span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">              <span class="comment">// i çš„å€¼ç­‰äº2ï¼Œæ‰€ä»¥æ‰§è¡Œæ­¤å¤„ä»£ç </span></span><br><span class="line">              System.out.println(<span class="string">&quot;içš„å€¼ä¸º2&quot;</span>);</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">default</span>:</span><br><span class="line">			  <span class="comment">// case 2 åˆ†æ”¯å·²æ‰§è¡Œå¹¶breakï¼Œæ‰€ä»¥æ­¤å¤„ä»£ç ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">              System.out.println(<span class="string">&quot;içš„å€¼æ—¢ä¸ç­‰äº1ï¼Œä¹Ÿä¸ç­‰äº2&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">içš„å€¼ä¸º<span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>ä» JDK5 å¼€å§‹ï¼Œ<code>switch</code> è¯­å¥å¯ä»¥ä¸ æšä¸¾å€¼ä¸€èµ·ä½¿ç”¨ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯æ ¹æ®æ•°å­—æ˜¾ç¤ºå¯¹åº”æ˜ŸæœŸå‡ çš„å®ä¾‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchStatement2</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">      <span class="type">Day</span> <span class="variable">day</span> <span class="operator">=</span> day.MONDAY; <span class="comment">// å‡è®¾ Day æ˜¯ä¸€ç§æšä¸¾ç±»å‹ï¼Œé‡Œé¢åŒ…å«æ˜ŸæœŸä¸€åˆ°æ˜ŸæœŸå¤©ã€‚</span></span><br><span class="line">      <span class="keyword">switch</span> (day) &#123;</span><br><span class="line">         <span class="keyword">case</span> MONDAY :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸä¸€&quot;</span>); </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> TUESDAY :</span><br><span class="line">          	System.out.println(<span class="string">&quot;æ˜ŸæœŸäºŒ&quot;</span>); </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> WEDNESDAY :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸä¸‰&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> THURSDAY :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸå››&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> FRIDAY :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸäº”&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> SATURDAY :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸå…­&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> SUNDAY :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸå¤©&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä» JDK8 å¼€å§‹ï¼Œ<code>switch</code> è¯­å¥å¯ä»¥ä¸ <code>String</code> å€¼ä¸€èµ·ä½¿ç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchStatement3</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">      <span class="type">String</span> <span class="variable">day</span> <span class="operator">=</span> <span class="string">&quot;TUESDAY&quot;</span>;</span><br><span class="line">      <span class="keyword">switch</span> (day) &#123;</span><br><span class="line">         <span class="keyword">case</span> <span class="string">&quot;Wednesday&quot;</span> :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸä¸€&quot;</span>); </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> <span class="string">&quot;TUESDAY&quot;</span> :</span><br><span class="line">          	System.out.println(<span class="string">&quot;æ˜ŸæœŸäºŒ&quot;</span>); </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> <span class="string">&quot;WEDNESDAY&quot;</span> :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸä¸‰&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> <span class="string">&quot;THURSDAY&quot;</span> :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸå››&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> <span class="string">&quot;FRIDAY&quot;</span> :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸäº”&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> <span class="string">&quot;SATURDAY&quot;</span> :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸå…­&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> <span class="string">&quot;SUNDAY&quot;</span> :</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜ŸæœŸå¤©&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">æ˜ŸæœŸäºŒ</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>pipé—®é¢˜Traceback (most recent call last)</title>
    <url>/39939.html</url>
    <content><![CDATA[<p>åˆšåˆšåœ¨ç”¨pipå®‰è£…ipythonæ—¶ï¼Œé‡åˆ°äº†ä¸‹é¢è¿™ä¸ªé”™è¯¯</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<blockquote>
<p>ç¬”è€…è¿™é‡Œç”¨çš„æ˜¯python3.7.2ç‰ˆæœ¬</p>
</blockquote>
<p><img data-src="https://pic.imgdb.cn/item/664340940ea9cb1403bb81b5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼šæ‰“å¼€python çš„å®‰è£…è·¯å¾„ï¼Œåˆ°<code>python3.7\Lib\site-packages\pip</code>è·¯å¾„ä¸‹ï¼Œæ‰“å¼€<br><code>__main__.py</code>æ–‡ä»¶ï¼Œä¿®æ”¹æœ€åä¸€è¡Œï¼Œ<br>å°†åŸæœ¬çš„<code>sys.exit(_main())</code> æ”¹ä¸º <code>sys.exit(_main__._main())</code> ,å¦‚ä¸‹å›¾<br><img data-src="https://pic.imgdb.cn/item/664340940ea9cb1403bb8198.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>å¸¸è§bug</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>pipé—®é¢˜ï¼šSyntaxError:invalid syntax</title>
    <url>/19849.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»Šå¤©åœ¨ä½¿ç”¨pythonå®‰è£…ipythonæ—¶å‡ºç°äº†ä¸‹é¢é”™è¯¯</p>
<p><img data-src="https://pic.imgdb.cn/item/664340d90ea9cb1403bbdb61.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œé€€å‡ºpythonå‘½ä»¤è¡Œ<br>é‡æ–°è¾“å…¥å‘½ä»¤ï¼š<code>pip3 install ipython</code> å³å¯</p>
<p><img data-src="https://pic.imgdb.cn/item/664340d90ea9cb1403bbdb4e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>å¸¸è§bug</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonä¸Tkinterç‰ˆæœ¬å†²çª</title>
    <url>/d8291b27.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å‘¨æœ«åœ¨å®¶é—²ç€æ— èŠï¼Œå°±æƒ³ç€å†™ç‚¹å¥½ç©çš„ä»£ç ã€‚åœ¨å°è¯•Pythonçš„GUIç¼–ç¨‹çš„æ—¶å€™ï¼Œå°±å‡ºç°äº†é—®é¢˜ã€‚<br>å­¦ä¹ äº†åŸºæœ¬è¯­æ³•åï¼Œå°±å¼€å§‹äº†è‡ªå·±çš„GUIä¹‹æ—…ã€‚è¿è¡Œç¬¬ä¸€æ®µä»£ç ä¹‹åå‘ç°å®ƒé•¿è¿™æ ·<br><img data-src="https://s1.ax1x.com/2023/02/19/pSLs2OH.jpg" style="width:300px;height:200px" alt="" /><br>å“â€¦â€¦å¥½åƒæœ‰ç‚¹ä¸å¯¹ï¼Œæˆ‘é‚£è¡Œå­—å‘¢ï¼Ÿè€Œä¸”æ€ä¹ˆè¿™ä¹ˆé»‘ï¼Œæˆ‘çœ‹äººå®¶çš„æ•ˆæœä¸æ˜¯è¿™æ ·å•Šâ€¦â€¦<br>çœ‹ç»ˆç«¯è¾“å‡ºï¼Œæœ‰ä¸€è¡Œè­¦å‘Šï¼š</p>
<blockquote>
<p>DEPRECATION WARNING: The system version of Tk is deprecated and may be removed in a future release. Please donâ€™t rely on it. Set TK_SILENCE_DEPRECATION&#x3D;1 to suppress this warning.<br><img data-src="https://s1.ax1x.com/2023/02/19/pSLsf0A.jpg" style="width:300px;height:200px" alt="" /></p>
</blockquote>
<p>å‘ç°æ˜¯ç‰ˆæœ¬é—®é¢˜ï¼Œå‘ç°é—®é¢˜å°±å¥½è§£å†³äº†ã€‚äºæ˜¯åœ¨ç½‘ä¸Šç–¯ç‹‚çš„æœèµ„æ–™ï¼Œç»ˆäºæ‰¾åˆ°äº†æ–¹æ³•ã€‚<br>åœ¨æŸä½åšä¸»çš„æ–‡ç« ä¸­äº†è§£åˆ°äº†<code>Conda</code>è¿™ä¸ªç©æ„å„¿</p>
<blockquote>
<p>Conda is an open-source package management system and environment management system that runs on Windows, macOS, and Linux. Conda quickly installs, runs, and updates packages and their dependencies. Conda easily creates, saves, loads, and switches between environments on your local computer. It was created for Python programs but it can package and distribute software for any language.</p>
</blockquote>
<p>ç®€å•è¯´ï¼Œcondaæ˜¯ä¸€ä¸ªå¼€æºçš„åŒ…ç®¡ç†ç³»ç»ŸåŠç¯å¢ƒç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒè·¨å¹³å°ï¼Œå¯ç®¡ç†å¤šä¸ªç‰ˆæœ¬çš„è½¯ä»¶åŒ…åŠå®ƒä»¬çš„ä¾èµ–å…³ç³»ï¼Œå¯æ–¹ä¾¿åœ°åœ¨ä¸åŒç‰ˆæœ¬ä¹‹é—´çµæ´»åˆ‡æ¢ï¼Œå¹¶ä¸”condaæ”¯æŒåŒ…æ‹¬pythonåœ¨å†…çš„ä»»ä½•è¯­è¨€ã€‚</p>
<p>ä»¥å‰éƒ½æ˜¯ç”¨venvæ¥ç®¡ç†å¤šä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œä½†æ˜¯venvåªèƒ½ç®¡ç†ä¸åŒçš„åŒ…ç‰ˆæœ¬ï¼Œpythonè¿˜æ˜¯åŒä¸€ä¸ªï¼›condaåˆ™æ˜¯ä»pythonåˆ°è½¯ä»¶åŒ…éƒ½å¯ä»¥å®Œå…¨éš”ç¦»ï¼Œå°±åƒä¸€ä¸ªå°å‹çš„è™šæ‹Ÿæœºã€‚ç®€ç›´æ˜¯å¼ºè¿«ç—‡æ‚£è€…çš„ç¦éŸ³ï¼</p>
<p>è¦ä½¿ç”¨condaï¼Œæœ€æ–¹ä¾¿çš„é€‰æ‹©æ˜¯å®‰è£…Anacondaï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼€æºçš„pythonå‘è¡Œç‰ˆï¼ŒåŒ…æ‹¬äº†pythonã€condaä»¥åŠNumPyã€SciPyç­‰å¤šè¾¾250+ä¸ªè½¯ä»¶åŒ…ï¼ŒåŠŸèƒ½éå¸¸å…¨é¢ã€‚ä½†æ˜¯åŠŸèƒ½å…¨é¢å°±æ„å‘³ç€ä½“ç§¯åºå¤§ï¼ŒAnacondaå®‰è£…åŒ…è¦591Mï¼Œå®‰è£…ä¹‹åçš„ç©ºé—´å ç”¨æ¥è¿‘3ä¸ªGï¼Œåšä¸ºæ—¥å¸¸pythonç ”ç©¶å­¦ä¹ çš„è¯å®åœ¨æ²¡æœ‰å¿…è¦ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥è½¬å‘condaçš„å¦å¤–ä¸€ä¸ªé€‰æ‹©ï¼Œå³Minicondaï¼Œå®ƒæ˜¯Anacondaçš„è½»é‡åŒ–ç‰ˆæœ¬ï¼ˆ It is a small, bootstrap version of Anaconda ï¼‰ï¼ŒåªåŒ…å«äº†pythonå’Œcondaï¼Œä»¥åŠä¸€äº›åŸºæœ¬çš„ç¨‹åºåŒ…æ¯”å¦‚pipç­‰ã€‚Minicondaçš„å®‰è£…åŒ…åªæœ‰ä¸åˆ°60Mï¼Œå®‰è£…ååœ¨æˆ‘çš„Macä¸Šå¤§çº¦å ç”¨490Mç©ºé—´ã€‚</p>
<p>å®‰è£…å’Œä½¿ç”¨Minicondaçš„è¿‡ç¨‹ååˆ†ç®€å•ï¼Œé¦–å…ˆä»<a href="https://docs.conda.io/projects/conda/en/latest/commands.html">å®˜ç½‘</a>ä¸‹è½½ä¸æ“ä½œç³»ç»Ÿå¯¹åº”çš„å®‰è£…åŒ…ï¼Œä¸‹è½½å®Œæˆååœ¨ç»ˆç«¯æ‰§è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bash Miniconda3-latest-MacOSX-x86_64.sh</span><br></pre></td></tr></table></figure>
<p>å®‰è£…åˆ°åé¢è¿˜ä¼šæœ‰ä¸€ä¸ªåˆå§‹åŒ–çš„è¿‡ç¨‹ï¼Œä¸€è·¯æŒ‰ç…§é»˜è®¤é…ç½®æ‰§è¡Œå®Œæ¯•å³å¯ï¼Œä¸­é—´éœ€è¦é€‰æ‹©<code>yes/no</code>çš„åœ°æ–¹è¾“å…¥<code>yes</code>ã€‚å®‰è£…å®Œæˆåè®°å¾—é‡å¯ç»ˆç«¯çª—å£ï¼Œå¦åˆ™ç¯å¢ƒå˜é‡å¯èƒ½ä¸ç”Ÿæ•ˆå¯¼è‡´condaå‘½ä»¤æ‰§è¡Œä¸æˆåŠŸã€‚å®‰è£…å®Œæˆååœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼šconda -Vï¼Œå‡ºç°ç‰ˆæœ¬å·å°±è¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨condaæ¥ç®¡ç†pythonç‰ˆæœ¬äº†ï¼Œæ¯”å¦‚æƒ³è¦åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„pythonç¯å¢ƒï¼Œåšä¸»è¿™é‡Œpythonç‰ˆæœ¬ä¸º3.9.6ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">conda create -n python3 python=3.9.6</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­è¿™é‡Œ<code>python3</code>ä¸ºä½ æŒ‡å®šçš„ç¯å¢ƒåç§°ï¼Œåç§°æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥å–ã€‚<br>ç¯å¢ƒåˆ›å»ºå¥½ä¹‹åï¼Œä¸venvç±»ä¼¼ï¼Œå¯ä»¥ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">conda activate python3</span><br></pre></td></tr></table></figure>
<p>å’Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">conda deactivate</span><br></pre></td></tr></table></figure>
<p>æ¥è¿›å…¥å’Œé€€å‡ºç¯å¢ƒã€‚<br>å¦‚æœè¿›å…¥condaç¯å¢ƒï¼Œç»ˆç«¯æ˜¯ä¼šæœ‰è¡¨ç¤ºçš„ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img data-src="https://s1.ax1x.com/2023/02/19/pSLyZA1.jpg"  alt="" /><br>ä¼šå‘ç°æˆ‘ä»¬çš„ç»ˆç«¯å‰é¢ä¼šå¤šä¸€ä¸ªç¯å¢ƒåã€‚</p>
<a href="https://docs.conda.io/en/latest/miniconda.html#macos-installers" title="" target="">å‚è€ƒ:condaå‘½ä»¤ ,</a>

<p>åˆ°è¿™é‡ŒTkinterç‰ˆæœ¬çš„é—®é¢˜å°±å·²ç»è§£å†³ï¼Œæˆ‘ä»¬é‡æ–°è¿è¡Œä¸‹ç¨‹åºï¼Œå‡ºç°é¢„æœŸæ•ˆæœ<br><img data-src="https://s1.ax1x.com/2023/02/19/pSLsWmd.jpg" style="width:300px;height:200px" alt="" /></p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>Thinter</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonå®ç°å¾®ä¿¡ä¸æ–­ç»™å¥½å‹å‘æ¶ˆæ¯</title>
    <url>/20289.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<blockquote>
<p>æ¸©é¦¨æç¤ºï¼šå¯¹å¥½å‹è°¨æ…ä½¿ç”¨ï¼Œä»¥å…è¢«åˆ å¥½å‹</p>
</blockquote>
<span id="more"></span>
<p>å¾®ä¿¡éœ€è¦èƒ½å¤Ÿç™»å½•ç½‘é¡µç‰ˆå¾®ä¿¡æ‰èƒ½ä½¿ç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> itchat</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æ‰«ä¸€ä¸‹å¼¹å‡ºæ¥çš„äºŒç»´ç &#x27;</span>)</span><br><span class="line">itchat.auto_login(hotReload = <span class="literal">True</span>)</span><br><span class="line">boom_remark_name = <span class="built_in">input</span>(<span class="string">&#x27;è¾“å…¥ä½ è¦å‘æ¶ˆæ¯çš„äººçš„å¾®ä¿¡å¤‡æ³¨ï¼ŒæŒ‰å›è½¦é”®ç»§ç»­ï¼š&#x27;</span>)</span><br><span class="line">message = <span class="built_in">input</span>(<span class="string">&#x27;è¾“å…¥ä½ è¦å‘é€çš„å†…å®¹ï¼ŒæŒ‰å›è½¦é”®å¼€å§‹å‘é€ï¼š&#x27;</span>)</span><br><span class="line">boom_obj = itchat.search_friends(remarkName = boom_remark_name)[<span class="number">0</span>][<span class="string">&#x27;UserName&#x27;</span>]</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">	time.sleep(<span class="number">0.5</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;æ¶ˆæ¯å·²ç»å‘é€&#x27;</span>)</span><br><span class="line">	itchat.send_msg(msg=message, toUserName=boom_obj)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>quickCocos2dxç¼–è¯‘ç”Ÿæˆapk</title>
    <url>/3315f663.html</url>
    <content><![CDATA[<p>æ¯•ä¸šåå¼€å§‹åšæ¸¸æˆï¼Œä¸€ç›´éƒ½æ˜¯åšçš„iosç«¯çš„ï¼Œæœ€è¿‘æ¢ä»½æ–°å·¥ä½œï¼Œåšandroidç«¯æ¸¸æˆå¼€å‘ã€‚<br>androidç«¯+quickCocosè¿™ç®€ç›´å°±æ˜¯ä¸ªå‘å•Šï¼Œéƒ½2å¤©äº†ï¼Œä¸€ä¸ªå¼€å‘ç¯å¢ƒéƒ½è¿˜æ²¡æœ‰æ­å»ºå¥½ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œå¼€å§‹ä»‹ç»åšä¸»é‡åˆ°çš„å‘å§~</p>
<h3 id="é¦–å…ˆå°±æ˜¯å„ç§æ’ä»¶çš„å®‰è£…"><a href="#é¦–å…ˆå°±æ˜¯å„ç§æ’ä»¶çš„å®‰è£…" class="headerlink" title="é¦–å…ˆå°±æ˜¯å„ç§æ’ä»¶çš„å®‰è£…"></a>é¦–å…ˆå°±æ˜¯å„ç§æ’ä»¶çš„å®‰è£…</h3><p>ä»€ä¹ˆjdkã€android-ndkã€adtä»€ä¹ˆçš„ï¼Œç½‘ä¸Šæœ‰æ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸ç»†è¯´äº†ï¼Œä½†æ˜¯åƒä¸‡è¦æ³¨æ„ç‰ˆæœ¬~</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="ç”Ÿæˆosåº“"><a href="#ç”Ÿæˆosåº“" class="headerlink" title="ç”Ÿæˆosåº“"></a>ç”Ÿæˆosåº“</h3><p>æ’ä»¶å®‰è£…å¥½åï¼Œå°±å¯ä»¥å¼€å§‹ç”Ÿæˆosåº“<br>ç½‘ä¸Šçš„æ•™ç¨‹éƒ½è¯´æ˜¯åœ¨<code>frameworks\runtime-src\proj.android</code>ä¸‹æ‰§è¡Œä»€ä¹ˆ<code>clean.bat</code>ç­‰å‘½ä»¤ï¼Œä½†æ˜¯åšä¸»æ–°å»ºçš„é¡¹ç›®ä¸‹é¢å°±æ²¡æœ‰è¿™å‡ ä¸ªbatæ–‡ä»¶ã€‚äºæ˜¯è‡ªå·±æ‰§è¡Œäº†<code>python .\build_native.py</code></p>
<img data-src="https://s1.ax1x.com/2022/11/03/xq6X6A.png" alt=""/>
æ‰§è¡ŒåæŠ¥é”™ï¼Œè¯´`ndk-buildä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤`,å°†å…¶åŠ å…¥ç¯å¢ƒå˜é‡å³å¯ã€‚

<img data-src="https://s1.ax1x.com/2022/11/03/xq67FO.png" alt=""/>

<p>ç„¶åå†æ‰§è¡Œ<code>python .\build_native.py</code>å‘½ä»¤å°±å¯ä»¥å•¦</p>
<h3 id="æ›´æ–°ç¼–è¯‘ç¯å¢ƒ"><a href="#æ›´æ–°ç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="æ›´æ–°ç¼–è¯‘ç¯å¢ƒ"></a>æ›´æ–°ç¼–è¯‘ç¯å¢ƒ</h3><p>osåº“ç”Ÿæˆå¥½åï¼Œæ‰§è¡Œ<code>android update project -p . -t 1</code><br>å…³äºè¿™ä¸ªç½‘ä¸Šæœ‰ä¸åŒçš„è¯´æ³•ï¼Œæœ‰çš„è¯´ä¸ç”¨æ‰§è¡Œè¿™è¡Œå‘½ä»¤ï¼Œæœ‰çš„è¯´æ˜¯åœ¨<code>frameworks\runtime-src\proj.android</code>ç›®å½•ä¸‹æ‰§è¡Œã€‚åšä¸»éƒ½è¯•äº†ï¼Œè‡³å°‘åœ¨åšä¸»è¿™é‡Œè¡Œä¸é€šã€‚<br>åšä¸»è¿™é‡Œéœ€è¦åœ¨<code>frameworks\runtime-src\proj.android\src\main</code>ä¸‹æ‰§è¡Œï¼Œå› ä¸ºéœ€è¦ç”Ÿæˆä¸€ä¸ª<code>build.xml</code>æ–‡æœ¬ã€‚</p>
<img data-src="https://s1.ax1x.com/2022/11/03/xq6Old.png" alt=""/>


<h3 id="ç”Ÿæˆapk"><a href="#ç”Ÿæˆapk" class="headerlink" title="ç”Ÿæˆapk"></a>ç”Ÿæˆapk</h3><p>æœ‰äº†<code>build.xml</code>ä¹‹åå°±å¯ä»¥ç”Ÿæˆapkäº†ã€‚<br>åœ¨åŒçº§ç›®å½•ä¸‹æ‰§è¡Œ<code>ant debug</code>,ä½†æ˜¯åšä¸»è¿™é‡Œé‡åˆ°äº†é—®é¢˜ï¼ŒæŠ¥å¦‚ä¸‹é”™è¯¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[javac]é”™è¯¯ï¼šä¸å†æ”¯æŒæºé€‰é¡¹5ã€‚è¯·ä½¿ç”¨7æˆ–è€…æ›´é«˜ç‰ˆæœ¬</span><br><span class="line">[jabac]é”™è¯¯ï¼šä¸å†æ”¯æŒç›®æ ‡é€‰é¡¹5ã€‚è¯·ä½¿ç”¨7æˆ–è€…æ›´é«˜ç‰ˆæœ¬</span><br></pre></td></tr></table></figure>
<p>ç›®å‰åšä¸»è¿˜æ²¡æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œç­‰è§£å†³äº†å†å›æ¥è¡¥å……ã€‚æœ‰æ‡‚çš„å¤§ä½¬ä¹Ÿå¯ä»¥æŒ‡ç‚¹æŒ‡ç‚¹</p>
<p>ç¬¬ä¸€æ¬¡æ¥è§¦å®‰å“å¼€å‘ï¼Œå¾ˆå¤šä¸æ‡‚ï¼Œè¿˜å¸Œæœ›æ‡‚çš„å¤§ä½¬å¤šå¤šæŒ‡æ•™</p>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>quick Cocos</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonç”»ç´ æç”»</title>
    <url>/7941.html</url>
    <content><![CDATA[<p>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç </p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageFilter, ImageOps</span><br><span class="line">img = Image.<span class="built_in">open</span>(<span class="string">&#x27;/Users/demo/Desktop/b.png&#x27;</span>)  <span class="comment"># åŸå›¾è·¯å¾„</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dodge</span>(<span class="params">a,b,alpha</span>):</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">min</span>(<span class="built_in">int</span>(a*<span class="number">255</span>/(<span class="number">256</span>-b*alpha)),<span class="number">255</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw</span>(<span class="params">img,blur=<span class="number">25</span>,alpha=<span class="number">1.0</span></span>):</span><br><span class="line">	img1 = img.convert(<span class="string">&#x27;L&#x27;</span>)</span><br><span class="line">	img2 = img1.copy()</span><br><span class="line">	img2 = ImageOps.invert(img2)</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(blur):</span><br><span class="line">		img2 = img2.<span class="built_in">filter</span>(ImageFilter.BLUR)</span><br><span class="line">	width,height = img1.size</span><br><span class="line">	<span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(width):</span><br><span class="line">		<span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(height):</span><br><span class="line">			a = img1.getpixel((x,y))</span><br><span class="line">			b = img2.getpixel((x,y))</span><br><span class="line">			img1.putpixel((x,y),dodge(a,b,alpha))</span><br><span class="line">	img1.show()</span><br><span class="line">	img1.save(<span class="string">&quot;/Users/demo/Desktop/a1.png&quot;</span>)   <span class="comment"># ç”Ÿæˆåçš„å›¾ç‰‡</span></span><br><span class="line">draw(img)</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå›¾<br>åŸå›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/66433e2d0ea9cb1403b7a7ad.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è½¬æ¢åçš„å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/66433e2d0ea9cb1403b7a799.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>sshæ— æ³•ç™»å½•è¿œç¨‹æœåŠ¡å™¨</title>
    <url>/4002b8ea.html</url>
    <content><![CDATA[<p>SSHè¿œç¨‹ç™»å½•å¤±è´¥ï¼Œæç¤ºâ€œPassword authentication failedâ€ã€‚<br>æ–°ä¹°äº†ä¸€ä¸ªé˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œä½†æ˜¯åœ¨æœ¬åœ°ç»ˆç«¯è¿›è¡Œsshè¿æ¥çš„æ—¶å€™æ€»æ˜¯æç¤ºâ€œPassword authentication failedâ€ã€‚<br>åˆšå¼€å§‹æˆ‘è¿˜ä»¥ä¸ºæ˜¯å¯†ç é”™äº†ï¼Œè¿˜å»åå°æ”¹äº†å¯†ç ï¼Œåé¢å‘ç°ä¸æ˜¯å¯†ç çš„é—®é¢˜ã€‚<br>è€Œæ˜¯åœ¨ç½‘ä¸Šæ‰¾äº†å¥½ä¹…çš„è§£å†³æ–¹æ³•ï¼ŒåŒ…æ‹¬ä¿®æ”¹<code>/etc/ssh/sshd_config</code>é…ç½®æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æ²¡å•¥ç”¨ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<p>æœ€åæ¢äº†é“¾æ¥å‘½ä»¤<br>å°†åŸæ¥çš„<code>ssh å…¬ç½‘ip</code>æ”¹ä¸º<code>ssh -v root@å…¬ç½‘ip</code>ï¼Œæ„å¤–å‘ç°å¯ä»¥è¿ä¸Šã€‚<br>å¦‚æœä½ ä¹Ÿé‡åˆ°äº†è¿™æ ·çš„é—®é¢˜ï¼Œä¸å¦¨ä¸€è¯•ã€‚</p>
]]></content>
      <categories>
        <category>ssh</category>
      </categories>
      <tags>
        <tag>ssh</tag>
        <tag>æœåŠ¡å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>telegramBotä¹‹å–æ¶ˆæŒ‰é’®çš„ç›‘å¬</title>
    <url>/8baa366.html</url>
    <content><![CDATA[<p>æœ€è¿‘å‘ç°æˆ‘ä»¬ç”¨telegram botæ‰“å¼€ä¸€ä¸ª<code>web App</code>çš„æ—¶å€™ï¼Œå®¹æ˜“è¯¯ç‚¹åˆ°å±å¹•å·¦ä¸Šè§’çš„<code>å–æ¶ˆ</code>æŒ‰é’®ï¼Œå¸Œæœ›è¿™ä¸ªæ—¶å€™èƒ½å¤Ÿå¼¹å‡ºä¸€ä¸ª2æ¬¡ç¡®è®¤å¼¹çª—ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="æƒ³æ³•ä¸è¸©å‘"><a href="#æƒ³æ³•ä¸è¸©å‘" class="headerlink" title="æƒ³æ³•ä¸è¸©å‘"></a>æƒ³æ³•ä¸è¸©å‘</h3><p>åˆšå¼€æˆ‘ä»¥ä¸ºæ˜¯åœ¨botæœºå™¨äººä»£ç ä¸­å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå¦‚æœå„ç§ç½‘ä¸Šæ‰¾ï¼Œä¸æ–­çš„é—®chatGPT,ä½†æ˜¯chatGPTç»™å‡ºçš„ä¸€äº›ä»£ç éƒ½æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æœ€åè¿˜æ˜¯åœ¨<code>TONå¿ƒç²‰ç¾¤èŠ</code>é‡Œä¸€ä¸ªå¤§ä½¬æŒ‡å‡ºåœ¨å¼€å‘æ–‡æ¡£çš„SDKä¸­æœ‰è¯´æ˜ã€‚å¦‚æ˜¯è‡ªå·±è·‘å»çœ‹äº†ä¸‹SDKçš„æºä»£ç ï¼Œå‘ç°ç¡®å®æœ‰ã€‚<br>SDKæºä»£ç é“¾æ¥<a href="https://core.telegram.org/bots/webapps#initializing-mini-apps">SDKæºä»£ç é“¾æ¥</a><br><strong>æ„Ÿæ‚Ÿ:</strong> è¿˜æ˜¯è¦å¤šçœ‹çœ‹å¼€å‘æ–‡æ¡£å’ŒAPI</p>
<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>çœ‹äº†ä¹‹åå‘ç°è¿™ä¸ªå¹¶ä¸æ˜¯åœ¨botæœºå™¨äººä¸­è®¾å®šçš„ï¼Œè€Œæ˜¯åœ¨ä½ çš„h5ä»£ç ä¸­è®¾å®šï¼Œä¹‹å‰å°±å®Œå…¨èµ°é”™äº†æ–¹å‘ã€‚<br>æ¯”è¾ƒç®€å•ï¼Œè®¾ç½®<code>isClosingConfirmationEnabled</code>å‚æ•°å€¼ä¸º<code>true</code>å³å¯ã€‚</p>
<p>æ­¥éª¤ï¼š<br>1ã€åœ¨ä½ htmlä»£ç çš„<code>&lt;head&gt;</code>ä¸­åŠ å…¥tgçš„å¼•ç”¨<code>&lt;script src=&quot;https://telegram.org/js/telegram-web-app.js&quot;&gt;&lt;/script&gt;</code><br>2ã€è¿™æ—¶ä½ åœ¨<code>&lt;script&gt;</code>ä¸­å°±å¯ä»¥ä½¿ç”¨<code>window.Telegram.WebApp</code>äº†ï¼Œåœ¨<code>&lt;script&gt;</code>ä¸­æ·»åŠ ä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> tg = <span class="variable language_">window</span>.<span class="property">Telegram</span>.<span class="property">WebApp</span>;</span><br><span class="line">tg.<span class="property">isClosingConfirmationEnabled</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±okå•¦ï¼Œæ‰“å¼€æœºå™¨äººï¼ŒåŠ è½½webappï¼Œç‚¹å‡»<code>å–æ¶ˆ</code>æŒ‰é’®ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥çœ‹åˆ°å±å¹•åº•éƒ¨å¼¹å‡ºäº†ä¸€ä¸ª2æ¬¡å¼¹çª—ï¼Œå¦‚ä¸‹å›¾ï¼š<br>&#96;<a href="https://pic.imgdb.cn/item/668e3e69d9c307b7e97b3155.png">ç¤ºä¾‹å›¾</a></p>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonå®ç°å¾®ä¿¡è‡ªåŠ¨èŠå¤©</title>
    <url>/61950.html</url>
    <content><![CDATA[<p>é—²ç€æ— èŠï¼Œåœ¨ç½‘ä¸Šæ‰¾äº†ä¸€äº›å¥½ç©çš„ä»£ç ï¼Œæ¯”å¦‚ç”¨Pythonå®ç°å¾®ä¿¡è‡ªåŠ¨å›æ¶ˆæ¯<br>ä¹‹å‰å¼„äº†ä¸€ä¸ªå®šæ—¶è‡ªåŠ¨ç»™å¥½å‹å‘å¤©æ°”æˆ–è€…å‘å¿ƒçµé¸¡æ±¤çš„è„šæœ¬ï¼Œä¸‹è½½é“¾æ¥ï¼š<a href="https://download.csdn.net/download/silent_f/11162951">https://download.csdn.net/download/silent_f/11162951</a></p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<p>ä»Šå¤©è¿™é‡Œå°±ä»‹ç»å‡ ä¸ªå¾®ä¿¡æ¥å…¥å›¾çµæœºå™¨äººï¼Œè‡ªåŠ¨å’Œå¥½å‹èŠå¤©çš„è„šæœ¬</p>
<h3 id="1ã€è‡ªåŠ¨å’Œæ‰€æœ‰å¥½å‹èŠå¤©ï¼Œåªè¦å¥½å‹å‘æ¶ˆæ¯æ¥ï¼Œå°±ä¼šç»™å¥½å‹å›å¤"><a href="#1ã€è‡ªåŠ¨å’Œæ‰€æœ‰å¥½å‹èŠå¤©ï¼Œåªè¦å¥½å‹å‘æ¶ˆæ¯æ¥ï¼Œå°±ä¼šç»™å¥½å‹å›å¤" class="headerlink" title="1ã€è‡ªåŠ¨å’Œæ‰€æœ‰å¥½å‹èŠå¤©ï¼Œåªè¦å¥½å‹å‘æ¶ˆæ¯æ¥ï¼Œå°±ä¼šç»™å¥½å‹å›å¤"></a>1ã€è‡ªåŠ¨å’Œæ‰€æœ‰å¥½å‹èŠå¤©ï¼Œåªè¦å¥½å‹å‘æ¶ˆæ¯æ¥ï¼Œå°±ä¼šç»™å¥½å‹å›å¤</h3><p>è¿™é‡Œç¬”è€…ç”¨çš„æ˜¯3.6ç‰ˆæœ¬python ,å®‰è£…itchat,<br>ç”¨ä¸‹é¢å‘½ä»¤</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip3 install itchat </span><br></pre></td></tr></table></figure>
<p>ç„¶åå»å›¾çµæœºå™¨äººå®˜ç½‘æ³¨å†Œè´¦å·ï¼Œè·å–ä¸€ä¸ªkey</p>
<p>å…·ä½“ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> itchat</span><br><span class="line"><span class="keyword">import</span> importlib,sys </span><br><span class="line">importlib.reload(sys)</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_response</span>(<span class="params">_info</span>):</span><br><span class="line">    <span class="built_in">print</span>(_info)                                       <span class="comment"># ä»å¥½å‹å‘è¿‡æ¥çš„æ¶ˆæ¯</span></span><br><span class="line">    api_url = <span class="string">&#x27;http://www.tuling123.com/openapi/api&#x27;</span>   <span class="comment"># å›¾çµæœºå™¨äººç½‘å€</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;key&#x27;</span>: <span class="string">&#x27;466856743b3442bf95acb1e21a5218e2&#x27;</span>,     <span class="comment"># å¦‚æœè¿™ä¸ª apiKey å¦‚ä¸èƒ½ç”¨ï¼Œé‚£å°±æ³¨å†Œä¸€æ¬¡</span></span><br><span class="line">        <span class="string">&#x27;info&#x27;</span>: _info,                                 <span class="comment"># è¿™æ˜¯æˆ‘ä»¬ä»å¥½å‹æ¥æ”¶åˆ°çš„æ¶ˆæ¯ ç„¶åè½¬å‘ç»™å›¾çµæœºå™¨äºº</span></span><br><span class="line">        <span class="string">&#x27;userid&#x27;</span>: <span class="string">&#x27;wechat-robot&#x27;</span>,                      <span class="comment"># è¿™é‡Œä½ æƒ³æ”¹ä»€ä¹ˆéƒ½å¯ä»¥</span></span><br><span class="line">    &#125;</span><br><span class="line">    r = requests.post(api_url, data=data).json()       <span class="comment"># æŠŠdataæ•°æ®å‘</span></span><br><span class="line">    <span class="built_in">print</span>(r.get(<span class="string">&#x27;text&#x27;</span>))                               <span class="comment"># æœºå™¨äººå›å¤ç»™å¥½å‹çš„æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line"><span class="meta">@itchat.msg_register(<span class="params">itchat.content.TEXT</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">text_reply</span>(<span class="params">msg</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span> + get_response(msg[<span class="string">&quot;Text&quot;</span>])[<span class="string">&quot;text&quot;</span>]</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    itchat.auto_login()                  <span class="comment"># hotReload = True, ä¿æŒåœ¨çº¿ï¼Œä¸‹æ¬¡è¿è¡Œä»£ç å¯è‡ªåŠ¨ç™»å½•  hotReload=True</span></span><br><span class="line">    itchat.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2ã€å’ŒæŒ‡å®šå¥½å‹èŠå¤©"><a href="#2ã€å’ŒæŒ‡å®šå¥½å‹èŠå¤©" class="headerlink" title="2ã€å’ŒæŒ‡å®šå¥½å‹èŠå¤©"></a>2ã€å’ŒæŒ‡å®šå¥½å‹èŠå¤©</h3><p>ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> wxpy <span class="keyword">import</span> Bot,Tuling,embed,ensure_one</span><br><span class="line">bot = Bot()</span><br><span class="line">my_friend = ensure_one(bot.search(<span class="string">&#x27;å¼ ä¸‰&#x27;</span>))  <span class="comment">#æƒ³å’Œæœºå™¨äººèŠå¤©çš„å¥½å‹çš„å¤‡æ³¨</span></span><br><span class="line">tuling = Tuling(api_key=<span class="string">&#x27;466856743b3442bf95acb1e21a5218e2&#x27;</span>)     <span class="comment">#è¿™é‡Œæ˜¯å›¾çµæœºå™¨äººç”³è¯·åçš„api</span></span><br><span class="line"><span class="meta">@bot.register(<span class="params">my_friend</span>)  </span><span class="comment"># ä½¿ç”¨å›¾çµæœºå™¨äººè‡ªåŠ¨ä¸æŒ‡å®šå¥½å‹èŠå¤©</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reply_my_friend</span>(<span class="params">msg</span>):</span><br><span class="line">    tuling.do_reply(msg)</span><br><span class="line">embed()</span><br></pre></td></tr></table></figure>

<h3 id="3ã€åœ¨æŒ‡å®šå¾®ä¿¡ç¾¤é‡ŒèŠå¤©"><a href="#3ã€åœ¨æŒ‡å®šå¾®ä¿¡ç¾¤é‡ŒèŠå¤©" class="headerlink" title="3ã€åœ¨æŒ‡å®šå¾®ä¿¡ç¾¤é‡ŒèŠå¤©"></a>3ã€åœ¨æŒ‡å®šå¾®ä¿¡ç¾¤é‡ŒèŠå¤©</h3><p>ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> wxpy <span class="keyword">import</span> Bot,Tuling,embed</span><br><span class="line">bot = Bot(cache_path=<span class="literal">True</span>)</span><br><span class="line">my_group = bot.groups().search(<span class="string">&#x27;8ä¸ªäººå„¿? ? ? ? ?&#x27;</span>)[<span class="number">0</span>]  <span class="comment"># æ›´æ”¹ä¸ºè‡ªå·±çš„ç¾¤èŠåç§°</span></span><br><span class="line">tuling = Tuling(api_key=<span class="string">&#x27;466856743b3442bf95acb1e21a5218e2&#x27;</span>)  <span class="comment"># å›¾çµæœºå™¨äººç”³è¯·çš„apikey</span></span><br><span class="line"><span class="meta">@bot.register(<span class="params">my_group, except_self=<span class="literal">False</span></span>)  </span><span class="comment"># ä½¿ç”¨å›¾çµæœºå™¨äººè‡ªåŠ¨åœ¨æŒ‡å®šç¾¤èŠå¤©</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reply_my_friend</span>(<span class="params">msg</span>):</span><br><span class="line">    <span class="built_in">print</span>(tuling.do_reply(msg))</span><br><span class="line">embed()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Handling the Cancel Button in Telegram Bot WebApp</title>
    <url>/8baa366en.html</url>
    <content><![CDATA[<p>Recently, we noticed that when opening a <code>web app</code> via a Telegram bot, users often accidentally click the <code>Cancel</code> button at the top left corner. We wanted to show a double-confirmation popup in such cases.</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Idea-and-Challenges"><a href="#Idea-and-Challenges" class="headerlink" title="Idea and Challenges"></a>Idea and Challenges</h3><p>Initially, I thought this feature could be implemented within the botâ€™s code. I searched online and asked ChatGPT multiple times, but none of the solutions provided worked. Finally, a helpful person in the <code>TON Fans Group Chat</code> pointed out that the SDK documentation had relevant information. After checking the SDK source code, I found the solution.<br>SDK Source Code Link: <a href="https://core.telegram.org/bots/webapps#initializing-mini-apps">SDK Source Code</a><br><strong>Lesson:</strong> Always refer to the official documentation and API guides.</p>
<h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><p>After reviewing the documentation, I found that this feature is not set in the botâ€™s code but directly in the HTML code of the web app. Previously, I was looking in the wrong place.<br>Itâ€™s straightforward: set the <code>isClosingConfirmationEnabled</code> parameter to <code>true</code>.</p>
<p>Steps:</p>
<ol>
<li>Include the Telegram script in the <code>&lt;head&gt;</code> of your HTML:<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://telegram.org/js/telegram-web-app.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>Now, you can use <code>window.Telegram.WebApp</code> in your <code>&lt;script&gt;</code> section. Add the following code:<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> tg = <span class="variable language_">window</span>.<span class="property">Telegram</span>.<span class="property">WebApp</span>;</span><br><span class="line">tg.<span class="property">isClosingConfirmationEnabled</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
Thatâ€™s it! Open the bot, load the web app, and when you click the <code>Cancel</code> button, youâ€™ll see a double-confirmation popup at the bottom of the screen, as shown below:<br>&#96;<a href="https://pic.imgdb.cn/item/668e3e69d9c307b7e97b3155.png">ç¤ºä¾‹å›¾</a></li>
</ol>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>telegram Botæœºå™¨äºº æ‰“å¼€webAppæœ‰æœ¬åœ°ç¼“å­˜</title>
    <url>/39e5712d.html</url>
    <content><![CDATA[<p>æ˜¨å¤©æˆ‘ä»¬çš„æ¸¸æˆæ›´æ–°äº†ä¸€ä¸ªç‰ˆæœ¬ï¼Œä½†æ˜¯å‘ç°ä½¿ç”¨botæœºå™¨äººæ‰“å¼€è¿˜æ˜¯ä¹‹å‰çš„è€ç‰ˆæœ¬ï¼Œæ²¡æœ‰è¿›å…¥åˆ°æ–°æ›´çš„ç‰ˆæœ¬ï¼Œå½“æ—¶å°±æœ‰ç‚¹æ‡µäº†ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="åŸå› ï¼šç¼“å­˜"><a href="#åŸå› ï¼šç¼“å­˜" class="headerlink" title="åŸå› ï¼šç¼“å­˜"></a>åŸå› ï¼šç¼“å­˜</h3><p>åˆšå¼€å§‹æˆ‘ä»¬ä»¥ä¸ºæ˜¯æœåŠ¡å™¨çš„ç¼“å­˜ï¼Œä½†æ˜¯æ¸…é™¤æœåŠ¡å™¨ç¼“å­˜åæ²¡ç”¨ã€‚äºæ˜¯æŠ“åŒ…ï¼ŒæŸ¥çœ‹botæ‰“å¼€webAppæ—¶æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ã€‚å‘ç°æ¯æ¬¡æ‰“å¼€webAppçš„æ—¶å€™éƒ½æ²¡æœ‰é‡æ–°æ‹‰å–èµ„æºï¼Œå› ä¸ºæ›´æ–°åçš„æ–‡ä»¶åå’Œæ–‡ä»¶è·¯å¾„å’Œæ›´æ–°å‰æ˜¯ä¸€æ ·çš„ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><p>æ¯æ¬¡æ›´æ–°çš„æ—¶å€™æ–‡ä»¶ååé¢ç»Ÿä¸€åŠ ä¸Šä¸€ä¸ªåç¼€ï¼Œè¯´å¹²å°±å¹²ï¼Œåœ¨ç½‘ä¸Šæ‰¾æ’ä»¶ï¼Œç”šè‡³è¦chatGPTå†™è„šæœ¬ï¼Œéƒ½æ²¡æå®šã€‚å› ä¸ºæˆ‘ä»¬çš„webæ˜¯ç”¨Cocos Creatorå¼€å‘çš„(ç›´æ¥ä»å®‰å“è½¬è¿‡æ¥çš„)ã€‚åœ¨ç”¨è„šæœ¬åŠ åç¼€åï¼Œæ–‡ä»¶ç´¢å¼•ä¼šå‡ºé—®é¢˜ã€‚åœ¨è¿™é‡Œä¹Ÿå¡äº†ä¸€ä¼šå„¿ï¼Œæœ€åæ²¡åŠæ³•å»æŸ¥çœ‹Cocos Creatorçš„å®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°æ–‡æ¡£ä¸Šå·²ç»ç»™å‡ºäº†è§£å†³æ–¹æ³•ã€‚å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/669666ced9c307b7e91688f0.png">;<br>å…¶å®ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨æ‰“åŒ…çš„æ—¶å€™å‹¾é€‰ä¸ŠMD5ç¼“å­˜ï¼Œå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚<br>å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/66966705d9c307b7e916faf6.png">;<br>æˆ‘ä»¬æ¥åº·åº·æ„å»ºåçš„æ–‡ä»¶åï¼š<br><img data-src="https://pic.imgdb.cn/item/66966750d9c307b7e9179139.png">;<br>å®Œç¾ï¼Œæ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚</p>
<p>å…ˆåœ¨æœ¬åœ°è¿è¡Œï¼Œçœ‹æœ‰æ²¡æœ‰æ–‡ä»¶ç´¢å¼•ä¸åˆ°çš„bugï¼Œæ²¡é—®é¢˜ç›´æ¥æ¨é€åˆ°æœåŠ¡å™¨æˆ–CDNå³å¯ã€‚</p>
<h3 id="æ„Ÿæ‚Ÿ"><a href="#æ„Ÿæ‚Ÿ" class="headerlink" title="æ„Ÿæ‚Ÿ"></a>æ„Ÿæ‚Ÿ</h3><p>è¿˜æ˜¯å¾—å¤šçœ‹çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæœ‰æ—¶å€™çœ‹å®˜æ–¹æ–‡æ¡£å¯ä»¥ä¸ºä½ èŠ‚çº¦å¾ˆé•¿çš„æ—¶é—´ã€‚</p>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>Telegram Bot Opens WebApp with Local Cache</title>
    <url>/39e5712den.html</url>
    <content><![CDATA[<p>Yesterday, we released a new version of our game, but when we used the bot to open it, it still showed the old version instead of the new update, which left us a bit puzzled.</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Reason-Cache"><a href="#Reason-Cache" class="headerlink" title="Reason: Cache"></a>Reason: Cache</h3><p>At first, we thought it was a server cache issue, but clearing the server cache didnâ€™t help. So, we captured network packets to inspect all the requests when the bot opened the WebApp. We found out that every time the WebApp opened, it didnâ€™t fetch the new resources because the filenames and paths after the update were the same as before.</p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>For every update, we decided to add a suffix to the filenames. We searched for plugins online, even tried having ChatGPT write scripts, but nothing worked. Our web project was developed using Cocos Creator (originally ported from Android). When we used a script to add a suffix, the file indexing broke. This was another issue we got stuck on for a while. Eventually, we checked Cocos Creatorâ€™s official documentation and found the solution already there. See the screenshot below:<br><img data-src="https://pic.imgdb.cn/item/669666ced9c307b7e91688f0.png">;<br>Basically, just check the MD5 cache option during the build process, and this will resolve the issue. It looks like this:<br><img data-src="https://pic.imgdb.cn/item/66966705d9c307b7e916faf6.png">;<br>Now, letâ€™s take a look at the filenames after building:<br><img data-src="https://pic.imgdb.cn/item/66966750d9c307b7e9179139.png">;<br>Perfect, this is the outcome we wanted.</p>
<p>Run it locally first to check for any file indexing issues. If everything is okay, you can push it to the server or CDN.</p>
<h3 id="Reflection"><a href="#Reflection" class="headerlink" title="Reflection"></a>Reflection</h3><p>Itâ€™s important to check the official documentation often. Sometimes, reading the official docs can save you a lot of time.</p>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>telegram Botæœºå™¨äººæ‰“å¼€webappè‡ªåŠ¨å±•å¼€å…¨å±</title>
    <url>/688ebf18.html</url>
    <content><![CDATA[<p>åœ¨telegramä¸Šæ‰“å¼€webappçš„æ—¶å€™ï¼Œé»˜è®¤åªæ˜¾ç¤ºåŠä¸ªå±å¹•ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨å¾€ä¸Šæ»‘ä¸€ä¸‹æ‰èƒ½å…¨å±ã€‚æˆ‘ä»¬ç°åœ¨æƒ³è¦ç”¨æˆ·æ‰“å¼€æˆ‘ä»¬çš„webappï¼Œè‡ªåŠ¨ç»™ä»–å…¨å±æ˜¾ç¤ºã€‚å…¶å®æ–¹æ³•å¾ˆç®€å•ï¼š</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>è¦åœ¨ Telegram bot æœºå™¨äººä¸­æ‰“å¼€ WebApp æ—¶è®¾ç½®ä¸ºå…¨å±ï¼Œtelegramå®˜æ–¹å·²ç»ç»™å‡ºäº†ç›¸å…³çš„apiï¼Œåªéœ€è¦åœ¨ WebApp çš„ <code>HTML</code> å’Œ <code>JavaScript</code> ä¸­ç›´æ¥è°ƒç”¨å³å¯ã€‚</p>
<h3 id="apiè°ƒç”¨"><a href="#apiè°ƒç”¨" class="headerlink" title="apiè°ƒç”¨"></a>apiè°ƒç”¨</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Telegram</span>.<span class="property">WebApp</span>.<span class="title function_">expand</span>();</span><br></pre></td></tr></table></figure>
<p>åªéœ€è¦åŠ ä¸Šä¸Šé¢ä¸€è¡Œä»£ç å°±èƒ½å®ç°ã€‚</p>
<h3 id="å®Œæ•´ä¾‹ç¨‹"><a href="#å®Œæ•´ä¾‹ç¨‹" class="headerlink" title="å®Œæ•´ä¾‹ç¨‹"></a>å®Œæ•´ä¾‹ç¨‹</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0, user-scalable=no&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Telegram WebApp<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>, <span class="selector-tag">html</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.full-screen</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;full-screen&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Your WebApp Content<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// å…¨å±è®¾ç½®</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Telegram</span>.<span class="property">WebApp</span>.<span class="title function_">expand</span>();</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>Telegram Bot WebApp Auto Full-Screen on Open</title>
    <url>/688ebf18en.html</url>
    <content><![CDATA[<p>When opening a WebApp on Telegram, it defaults to showing only half of the screen, and users need to swipe up to make it full-screen. Now, we want the WebApp to automatically open in full-screen mode when users access it. The solution is straightforward:</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>To set a WebApp to open in full-screen mode via a Telegram bot, Telegram has provided an API that can be called directly in the WebAppâ€™s <code>HTML</code> and <code>JavaScript</code>.</p>
<h3 id="API-Call"><a href="#API-Call" class="headerlink" title="API Call"></a>API Call</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Telegram</span>.<span class="property">WebApp</span>.<span class="title function_">expand</span>();</span><br></pre></td></tr></table></figure>

<p>Just adding the line above will make the WebApp open in full-screen.</p>
<h3 id="Full-Example"><a href="#Full-Example" class="headerlink" title="Full Example"></a>Full Example</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0, user-scalable=no&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Telegram WebApp<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>, <span class="selector-tag">html</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.full-screen</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;full-screen&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Your WebApp Content<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Full-screen setting</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Telegram</span>.<span class="property">WebApp</span>.<span class="title function_">expand</span>();</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>telegram Bot è®¾ç½®å·¦ä¸‹è§’çš„èœå•æŒ‰é’®</title>
    <url>/69613828.html</url>
    <content><![CDATA[<p>æˆ‘ä»¬åœ¨å’ŒBotFatherå¯¹è¯çš„æ—¶å€™å‘ç°å®ƒçš„å·¦ä¸‹è§’æœ‰ä¸ªèœå•æŒ‰é’®ï¼Œè€Œä¸”é‡Œé¢æœ‰å¾ˆå¤šå‘½ä»¤ï¼Œè¿™ä¸ªæ˜¯æ€ä¹ˆå®ç°çš„äº†ï¼Ÿæ¥ç€å¾€ä¸‹çœ‹</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="è·³è½¬åˆ°url"><a href="#è·³è½¬åˆ°url" class="headerlink" title="è·³è½¬åˆ°url"></a>è·³è½¬åˆ°url</h3><p>æ¯”å¦‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç½‘é¡µï¼Œç„¶åæƒ³è¦ç‚¹å‡»å·¦ä¸‹è§’èœå•æ çš„æ—¶å€™å°±ç›´æ¥è·³è½¬åˆ°æˆ‘ä»¬çš„ç½‘é¡µï¼Œå¾ˆç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>, api &#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// ä½ æœºå™¨äººçš„token</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®å‘½ä»¤</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="function">(<span class="params">ctx</span>) =&gt;</span> &#123;</span><br><span class="line">  ctx.<span class="title function_">reply</span>(<span class="string">&quot;æ¬¢è¿ä½¿ç”¨æˆ‘çš„Telegramæœºå™¨äºº!&quot;</span>);</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">setWebAppMenuButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">setChatMenuButton</span>(&#123;</span><br><span class="line">      <span class="attr">menu_button</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;web_app&quot;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;Open WebApp&quot;</span>, <span class="comment">// æŒ‰é’®æ–‡æœ¬</span></span><br><span class="line">        <span class="attr">web_app</span>: &#123;</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&quot;https://lengmo714.top&quot;</span> <span class="comment">// æ›¿æ¢ä¸ºä½ çš„WebApp URL</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Menu button set response:&quot;</span>, response);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">setWebAppMenuButton</span>();</span><br><span class="line">&#125;);</span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šé¢ä»£ç ï¼Œå†æ‰“å¼€è‡ªå·±çš„æœºå™¨äººç•Œé¢ï¼Œå°±ä¼šçœ‹åˆ°è‡ªå·±çš„èœå•æŒ‰é’®å·²ç»å˜æˆäº†<code>Open WebApp</code>ï¼Œå¦‚ä¸‹å›¾ã€‚è¦æ˜¯åœ¨æ‰‹æœºä¸Šé¢çœ‹ï¼Œä¼šå‘ç°è¿™ä¸ªæŒ‰é’®çš„å·¦è¾¹æœ‰ä¸€ä¸ªçª—å£çš„æ ‡å¿—ï¼Œè¯´æ˜æ˜¯æ²¡é—®é¢˜çš„ã€‚<br><img data-src="https://pic.imgdb.cn/item/6687e484d9c307b7e9239939.png" alt="Open WebApp"></p>
<h3 id="è®¾ç½®èœå•"><a href="#è®¾ç½®èœå•" class="headerlink" title="è®¾ç½®èœå•"></a>è®¾ç½®èœå•</h3><p>æˆ‘ä»¬åƒè¦å’ŒBotFatherä¸€æ ·ï¼Œåœ¨èœå•ä¸­è®¾ç½®å¾ˆå¤šå‘½ä»¤ï¼Œå¯ä»¥ç»™æˆ‘ä»¬çš„æœºå™¨äººæ·»åŠ å¾ˆå¤šçš„åŠŸèƒ½ã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>, api &#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// token</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="function">(<span class="params">ctx</span>) =&gt;</span> &#123;</span><br><span class="line">  ctx.<span class="title function_">reply</span>(<span class="string">&quot;æ¬¢è¿ä½¿ç”¨æˆ‘çš„Telegramæœºå™¨äºº!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">bot.<span class="property">api</span>.<span class="title function_">setMyCommands</span>([</span><br><span class="line">  &#123; <span class="attr">command</span>: <span class="string">&quot;one&quot;</span>, <span class="attr">description</span>: <span class="string">&quot;ä¸€&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">command</span>: <span class="string">&quot;two&quot;</span>, <span class="attr">description</span>: <span class="string">&quot;äºŒ&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">command</span>: <span class="string">&quot;three&quot;</span>, <span class="attr">description</span>: <span class="string">&quot;ä¸‰&quot;</span> &#125;,</span><br><span class="line">  <span class="comment">// å¯ä»¥æ·»åŠ æ›´å¤šå‘½ä»¤</span></span><br><span class="line">])</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‘½ä»¤è®¾ç½®æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;è®¾ç½®å‘½ä»¤æ—¶å‡ºé”™&quot;</span>, err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¹¶æ‰“å°ç°æœ‰çš„å‘½ä»¤</span></span><br><span class="line">bot.<span class="property">api</span>.<span class="title function_">getMyCommands</span>()</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">commands</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å½“å‰å‘½ä»¤ï¼š&quot;</span>, commands);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;è·å–å‘½ä»¤æ—¶å‡ºé”™&quot;</span>, err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å§‹ç›‘å¬</span></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šé¢ä»£ç ï¼Œå†æ‰“å¼€æœºå™¨äººï¼Œå°±å¯ä»¥çœ‹åˆ°å·¦ä¸‹è§’ä½ è®¾ç½®çš„èœå•å•¦~ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img data-src="https://pic.imgdb.cn/item/6687e770d9c307b7e929508e.png" alt="èœå•æŒ‰é’®"></p>
<blockquote>
<p>æ³¨æ„ï¼Œæ— è®ºä¸Šé¢å“ªç§æ–¹æ³•ï¼Œéƒ½ä¸ä¼šç«‹é©¬ç”Ÿæ•ˆï¼Œå¯èƒ½æ˜¯æœ‰ç¼“å­˜ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>Setting the Bottom-Left Menu Button on Telegram Bot</title>
    <url>/69613828en.html</url>
    <content><![CDATA[<p>When chatting with BotFather, you might notice a menu button at the bottom-left corner with various commands. How is this achieved? Keep reading to find out.</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Redirect-to-a-URL"><a href="#Redirect-to-a-URL" class="headerlink" title="Redirect to a URL"></a>Redirect to a URL</h3><p>For example, if youâ€™ve created a webpage and want the bottom-left menu button to open this webpage directly, itâ€™s quite simple. Hereâ€™s the code:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>, api &#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// Your bot token</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set the command</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="function">(<span class="params">ctx</span>) =&gt;</span> &#123;</span><br><span class="line">  ctx.<span class="title function_">reply</span>(<span class="string">&quot;Welcome to my Telegram bot!&quot;</span>);</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">setWebAppMenuButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">setChatMenuButton</span>(&#123;</span><br><span class="line">      <span class="attr">menu_button</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;web_app&quot;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;Open WebApp&quot;</span>, <span class="comment">// Button text</span></span><br><span class="line">        <span class="attr">web_app</span>: &#123;</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&quot;https://lengmo714.top&quot;</span> <span class="comment">// Replace with your WebApp URL</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Menu button set response:&quot;</span>, response);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">setWebAppMenuButton</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Run the code above, and when you open your bot interface, youâ€™ll see that the menu button has changed to <code>Open WebApp</code>. On a mobile device, youâ€™ll notice a window icon next to the button, indicating that itâ€™s correctly set up.<br><img data-src="https://pic.imgdb.cn/item/6687e484d9c307b7e9239939.png" alt="Open WebApp"></p>
<h3 id="Setting-Commands-in-the-Menu"><a href="#Setting-Commands-in-the-Menu" class="headerlink" title="Setting Commands in the Menu"></a>Setting Commands in the Menu</h3><p>If you want to set up multiple commands in the menu like BotFather does, you can add various features to your bot. Hereâ€™s how:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>, api &#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// Your bot token</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="function">(<span class="params">ctx</span>) =&gt;</span> &#123;</span><br><span class="line">  ctx.<span class="title function_">reply</span>(<span class="string">&quot;Welcome to my Telegram bot!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="property">api</span>.<span class="title function_">setMyCommands</span>([</span><br><span class="line">  &#123; <span class="attr">command</span>: <span class="string">&quot;one&quot;</span>, <span class="attr">description</span>: <span class="string">&quot;One&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">command</span>: <span class="string">&quot;two&quot;</span>, <span class="attr">description</span>: <span class="string">&quot;Two&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">command</span>: <span class="string">&quot;three&quot;</span>, <span class="attr">description</span>: <span class="string">&quot;Three&quot;</span> &#125;,</span><br><span class="line">  <span class="comment">// More commands can be added</span></span><br><span class="line">])</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Commands set successfully&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error setting commands&quot;</span>, err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Fetch and display the existing commands</span></span><br><span class="line">bot.<span class="property">api</span>.<span class="title function_">getMyCommands</span>()</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">commands</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Current commands:&quot;</span>, commands);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error fetching commands&quot;</span>, err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start the bot</span></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Run the code above, and when you open your bot, youâ€™ll see the menu you configured at the bottom left, as shown below:<br><img data-src="https://pic.imgdb.cn/item/6687e770d9c307b7e929508e.png" alt="èœå•æŒ‰é’®"></p>
<blockquote>
<p>Note: Neither of the methods above may take effect immediately due to potential caching.</p>
</blockquote>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>telegram mini APPæˆ–æ¸¸æˆå¼€å‘ä¹‹botè®¾ç½®</title>
    <url>/6e79860b.html</url>
    <content><![CDATA[<p>æ— æ„ä¸­å‘ç°telegramä¸Šå±…ç„¶ä¹Ÿèƒ½å‘å¸ƒå°ç¨‹åºå’Œæ¸¸æˆäº†ï¼Œæ„Ÿè§‰å‘ç°äº†æ–°å¤§é™†ä¸€æ ·ï¼Œè‡ªå·±å¥½ç©è¯•äº†ä¸‹ã€‚<br><a href="https://grammy.dev/zh/guide/">å‚è€ƒæ•™ç¨‹</a></p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>è¦åœ¨telegramä¸Šå¼€å‘ä¸€ä¸ª<code>mini App</code>æˆ–è€…<code>game</code>ï¼Œåˆ›å»ºä¸€ä¸ªä¸“å±äºä½ çš„æœºå™¨äººå°±å¿…ä¸å¯å°‘äº†ã€‚</p>
<h3 id="åˆ›å»ºbotæœºå™¨äºº"><a href="#åˆ›å»ºbotæœºå™¨äºº" class="headerlink" title="åˆ›å»ºbotæœºå™¨äºº"></a>åˆ›å»ºbotæœºå™¨äºº</h3><p>åœ¨telegramä¸Šæœç´¢<code>@BotFather</code>æˆ–è€…ç‚¹å‡»è¯¥è¿™é‡Œ<a href="https://t.me/BotFather">BotFather</a>ã€‚<br>å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/667e6133d9c307b7e9486bb0.png" alt="BotFatherå¯¹è¯æ¡†"><br>è¿›å…¥å¯¹è¯æ¡†åï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©<code>èœå•</code>-&gt; <code>/newbot</code>ã€‚æˆ–è€…åœ¨è¾“å…¥æ ç›´æ¥è¾“å…¥<code>/newbot</code>æ¥åˆ›å»ºæœºå™¨äººï¼Œåªéœ€è¦æ ¹æ®å®ƒçš„å›å¤ä¸€æ­¥ä¸€æ­¥æ“ä½œå°±å¯ä»¥äº†ã€‚</p>
<h3 id="åˆ›å»ºminiAppæˆ–è€…game"><a href="#åˆ›å»ºminiAppæˆ–è€…game" class="headerlink" title="åˆ›å»ºminiAppæˆ–è€…game"></a>åˆ›å»ºminiAppæˆ–è€…game</h3><p>åˆ›å»ºå¥½æœºå™¨äººåï¼Œå†åˆ›å»ºminiAppæˆ–è€…game,çœ‹ä½ çš„ä¸ªäººéœ€æ±‚ã€‚<br>æ–¹æ³•å’Œä¸Šé¢åˆ›å»ºbotä¸€æ ·ï¼Œç»™<code>@BotFather</code>å‘æ¶ˆæ¯å°±è¡Œäº†ã€‚ä¸Šé¢ç»™å‡ºçš„å‚è€ƒæ•™ç¨‹ä¸­ä¹Ÿæœ‰ã€‚</p>
<h3 id="éƒ¨ç½²å¼€å‘ç¯å¢ƒ"><a href="#éƒ¨ç½²å¼€å‘ç¯å¢ƒ" class="headerlink" title="éƒ¨ç½²å¼€å‘ç¯å¢ƒ"></a>éƒ¨ç½²å¼€å‘ç¯å¢ƒ</h3><p>è¿™é‡Œçš„å¼€å‘ç¯å¢ƒä¸æ˜¯ä½ çš„miniAppæˆ–è€…gameçš„å¼€å‘ç¯å¢ƒï¼Œè€Œæ˜¯ç”¨æ¥å¯¹botæœºå™¨äººçš„ã€‚è¿™é‡Œå¯ä»¥ç”¨<code>Node.js</code>å’Œ<code>Deno</code>ä¸¤ç§æ–¹å¼å¼€å‘ï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯<code>Deno</code>ã€‚<br>éƒ¨ç½²æ–¹æ³•å‚è€ƒé“¾æ¥<br><a href="https://deno.com/">Denoæ•™ç¨‹</a><br>å‰©ä¸‹çš„çœ‹æ•™ç¨‹ï¼Œè¿™é‡Œä¸å¤šè¯´ï¼Œç›´æ¥è¯´é‡ç‚¹</p>
<h3 id="æœºå™¨äººå›å¤ç”¨æˆ·ä¸€ä¸ªæ¸¸æˆ"><a href="#æœºå™¨äººå›å¤ç”¨æˆ·ä¸€ä¸ªæ¸¸æˆ" class="headerlink" title="æœºå™¨äººå›å¤ç”¨æˆ·ä¸€ä¸ªæ¸¸æˆ"></a>æœºå™¨äººå›å¤ç”¨æˆ·ä¸€ä¸ªæ¸¸æˆ</h3><p>1ã€ åˆ›å»ºä¸€ä¸ªtsè„šæœ¬ï¼Œå¤åˆ¶ç²˜è´´ä¸‹é¢å†…å®¹ï¼Œæ³¨æ„:<code>TOKEN</code>å’Œ<code>GAME_SHORT_NAME</code>éœ€è¦æ¢æˆä½ è‡ªå·±çš„ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Bot</span>&#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// è¿™é‡Œå¡«å†™ä½ æœºå™¨äººçš„token</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">GAME_SHORT_NAME</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// è¿™é‡Œå¡«å†™ä½ åˆ›å»ºæ¸¸æˆçš„æ—¶å€™ç»™å®ƒèµ·çš„çŸ­å</span></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª `Bot` ç±»çš„å®ä¾‹ï¼Œå¹¶å°†ä½ çš„ bot token ä¼ ç»™å®ƒã€‚</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>); </span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">replyWithGame</span>(<span class="variable constant_">GAME_SHORT_NAME</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>(); <span class="comment">// å¯åŠ¨æœºå™¨äºº</span></span><br></pre></td></tr></table></figure>
<p>2ã€æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä¸‹é¢å‘½ä»¤æ‰§è¡Œè„šæœ¬</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deno run --allow-net tsè„šæœ¬.ts</span><br></pre></td></tr></table></figure>
<p>3ã€å›åˆ°tgï¼Œç»™ä½ è‡ªå·±çš„æœºå™¨äººï¼Œæ³¨æ„ï¼Œä¸æ˜¯<code>BotFather</code>ï¼Œæ˜¯ä½ è‡ªå·±åˆ›å»ºçš„æœºå™¨äººï¼Œå‘é€<code>/start</code>æ¶ˆæ¯ï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±ä¼šçœ‹åˆ°ä½ çš„æœºå™¨äººç»™ä½ å›äº†ä¸€ä¸ªæ¸¸æˆçš„å¯¹è¯æ¡†ï¼Œå¦‚ä¸‹å›¾:<br><img data-src="https://pic.imgdb.cn/item/667e657ed9c307b7e950201c.png" alt="å¯¹è¯æ¡†">;<br>è¿™ä¸ªæ—¶å€™ä½ ä¼šå‘ç°ï¼Œä½ ç‚¹å‡»æ¸¸æˆä¸‹é¢çš„<code>play</code>æŒ‰é’®æ²¡æœ‰ä»»ä½•ååº”ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨ä¸Šé¢ä»£ç ä¸­ç»™æŒ‰é’®æ·»åŠ å›è°ƒäº‹ä»¶ã€‚<br>4ã€ç»™æŒ‰é’®æ·»åŠ å›è°ƒ<br>åœ¨ä¸Šé¢è„šæœ¬ä¸­åŠ å…¥ä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">GAME_URL</span> = <span class="string">&quot;https://lengmo714.top&quot;</span>;</span><br><span class="line">bot.<span class="title function_">on</span>(<span class="string">&quot;callback_query:game_short_name&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ctx.callbackQuery.game_short_name = &quot;</span>,ctx.<span class="property">callbackQuery</span>.<span class="property">game_short_name</span>)</span><br><span class="line">    <span class="keyword">if</span> (ctx.<span class="property">callbackQuery</span>.<span class="property">game_short_name</span> === <span class="variable constant_">GAME_SHORT_NAME</span>) &#123;</span><br><span class="line">        <span class="keyword">await</span> ctx.<span class="title function_">answerCallbackQuery</span>(&#123; <span class="attr">url</span>: <span class="variable constant_">GAME_URL</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ä¿å­˜ä»£ç åé‡æ–°æ‰§è¡Œè„šæœ¬ï¼Œå†ç»™æœºå™¨äººå‘é€<code>/start</code>,è¿™ä¸ªæ—¶å€™å†ç‚¹<code>play</code>æŒ‰é’®ï¼Œä½ å°±ä¼šå‘ç°è·³è½¬åˆ°ä½ è‡ªå·±æå‰å‡†å¤‡å¥½çš„æ¸¸æˆé“¾æ¥äº†ã€‚</p>
<h3 id="æœºå™¨äººå›å¤ç”¨æˆ·ä¸€ä¸ªminiApp"><a href="#æœºå™¨äººå›å¤ç”¨æˆ·ä¸€ä¸ªminiApp" class="headerlink" title="æœºå™¨äººå›å¤ç”¨æˆ·ä¸€ä¸ªminiApp"></a>æœºå™¨äººå›å¤ç”¨æˆ·ä¸€ä¸ªminiApp</h3><p>1ã€ åˆ›å»ºä¸€ä¸ªtsè„šæœ¬ï¼Œå¤åˆ¶ç²˜è´´ä¸‹é¢å†…å®¹ï¼Œæ³¨æ„:<code>TOKEN</code>å’Œè·³è½¬åˆ°mini appçš„é“¾æ¥éœ€è¦æ¢æˆä½ è‡ªå·±çš„ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Bot</span>&#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç† &quot;/start&quot; å‘½ä»¤</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(</span><br><span class="line">        <span class="string">&#x27;&lt;b&gt;Hi!&lt;/b&gt; &lt;i&gt;Welcome&lt;/i&gt; to &lt;a href=&quot;https://lengmo714.top&quot;&gt;grammY&lt;/a&gt;.&#x27;</span>,</span><br><span class="line">        &#123; <span class="attr">parse_mode</span>: <span class="string">&quot;HTML&quot;</span> &#125;,</span><br><span class="line">    )</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>2ã€æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä¸‹é¢å‘½ä»¤æ‰§è¡Œè„šæœ¬</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deno run --allow-net tsè„šæœ¬.ts</span><br></pre></td></tr></table></figure>
<p>3ã€å›åˆ°tgï¼Œç»™ä½ è‡ªå·±çš„æœºå™¨äººï¼Œæ³¨æ„ï¼Œä¸æ˜¯<code>BotFather</code>ï¼Œæ˜¯ä½ è‡ªå·±åˆ›å»ºçš„æœºå™¨äººï¼Œå‘é€<code>/start</code>æ¶ˆæ¯ï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±ä¼šçœ‹åˆ°ä½ çš„æœºå™¨äººç»™ä½ å›äº†ä¸€ä¸ªminiappçš„å¯¹è¯æ¡†ï¼Œå¦‚ä¸‹å›¾:<br><img data-src="https://pic.imgdb.cn/item/667e6c98d9c307b7e95bbe1e.png" alt="å¯¹è¯æ¡†">;</p>
<p>4ã€ç‚¹å‡»æ‰“å¼€åº”ç”¨ï¼Œå°±ä¼šè·³è½¬åˆ°ä½ ä¹‹å‰è®¾ç½®å¥½çš„mini app</p>
<h3 id="æ·»åŠ å†…è”æŒ‰é’®"><a href="#æ·»åŠ å†…è”æŒ‰é’®" class="headerlink" title="æ·»åŠ å†…è”æŒ‰é’®"></a>æ·»åŠ å†…è”æŒ‰é’®</h3><p>æ¯”æˆ‘ä»¬åœ¨å‘é€<code>/start</code>ï¼Œéœ€è¦æœºå™¨äººå›å¤æˆ‘ä»¬ä¸€äº›å¯é€‰çš„æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨æœºå™¨äººçš„å›å¤ä¸­æ·»åŠ å‡ ä¸ªé€‰æ‹©æŒ‰é’®ï¼Œè¿™ä¸ªå°±æ˜¯å†…è”æŒ‰é’®ã€‚<br>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Bot</span>,<span class="title class_">InlineKeyboard</span>&#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>().<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ1&quot;</span>, <span class="string">&quot;one&quot;</span>).<span class="title function_">row</span>()</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ2&quot;</span>, <span class="string">&quot;two&quot;</span>).<span class="title function_">row</span>()</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ3&quot;</span>,<span class="string">&quot;three&quot;</span>);</span><br><span class="line"><span class="comment">// å¤„ç† &quot;/start&quot; å‘½ä»¤</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">&quot;è¯·é€‰æ‹©ä½ éœ€è¦ç‚¹å‡»çš„æŒ‰é’®&quot;</span>,&#123;</span><br><span class="line">        <span class="attr">reply_markup</span>: keyboard,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œè„šæœ¬åå‡ºç°å¦‚ä¸‹å›¾:<br><img data-src="https://pic.imgdb.cn/item/667e6ea9d9c307b7e960ac34.png" alt="å¯¹è¯æ¡†"><br>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè¿™ä¸‰ä¸ªæŒ‰é’®æ—¶å‚ç›´æ’åˆ—ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è®©è¿™ä¸‰ä¸ªæŒ‰é’®æ’æˆä¸€æ’ï¼Œä¿®æ”¹ä¸Šé¢<code>keyboard</code>ä¸­çš„<code>row()</code>å³å¯ï¼Œå¦‚ä¸‹ä»£ç </p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>().<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ1&quot;</span>, <span class="string">&quot;one&quot;</span>)</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ2&quot;</span>, <span class="string">&quot;two&quot;</span>)</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ3&quot;</span>,<span class="string">&quot;three&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šè¿™é‡Œçš„æ·»åŠ çš„æŒ‰é’®æœ‰å¥½å‡ ç§ç±»å‹ï¼š<code>.text</code>ã€<code>.game</code>ã€<code>.url</code>ã€<code>webApp</code>ç›®å‰æˆ‘åªç”¨åˆ°è¿™å››ç§ï¼Œå¯èƒ½è¿˜æœ‰å…¶ä»–çš„ã€‚</p>
<h3 id="æœºå™¨äººå›å¤çš„å†…å®¹ä¸ºå›¾ç‰‡-æ–‡å­—-æŒ‰é’®"><a href="#æœºå™¨äººå›å¤çš„å†…å®¹ä¸ºå›¾ç‰‡-æ–‡å­—-æŒ‰é’®" class="headerlink" title="æœºå™¨äººå›å¤çš„å†…å®¹ä¸ºå›¾ç‰‡+æ–‡å­—+æŒ‰é’®"></a>æœºå™¨äººå›å¤çš„å†…å®¹ä¸ºå›¾ç‰‡+æ–‡å­—+æŒ‰é’®</h3><p>ä»Šå¤©åœ¨telegramä¸Šçœ‹è§ä¸€ä¸ªéå¸¸å–œæ¬¢çš„å›å¤ï¼Œå¦‚ä¸‹å›¾ï¼Œè¿™æ˜¯åˆ«äººçš„ã€‚<br><img data-src="https://pic.imgdb.cn/item/667e7068d9c307b7e9640de7.png" alt="å¯¹è¯æ¡†"><br>æ˜¯ç”±ä¸€ä¸ªgifåŠ¨ç”»+æ–‡å­—+ä¸‰ä¸ªæŒ‰é’®ç»„æˆï¼Œè€Œä¸”è¿˜èƒ½è·å–åˆ°å‘é€ç”¨æˆ·çš„idã€‚æ„Ÿè§‰éå¸¸niceï¼Œäºæ˜¯è‡ªå·±ä¹Ÿå‚è€ƒè¿™ä¸ªåšäº†ä¸ªç±»ä¼¼çš„ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>,<span class="title class_">InlineKeyboard</span> &#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TELEGRAM_GAME_URL</span> = <span class="string">&#x27;https://lengmo714.top&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†…è”é”®ç›˜ï¼ŒåŒ…å«æ¸¸æˆæŒ‰é’®å’Œè®¿é—®ç½‘ç«™æŒ‰é’®</span></span><br><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ1&quot;</span>,<span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ2&quot;</span>,<span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ3&quot;</span>,<span class="variable constant_">TELEGRAM_GAME_URL</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç† /start å‘½ä»¤</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ctx.update.message = &quot;</span>,ctx.<span class="property">update</span>.<span class="property">message</span>.<span class="property">from</span>.<span class="property">first_name</span>);</span><br><span class="line">    <span class="keyword">const</span> gifUrl = <span class="string">&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> caption = <span class="string">`Hi <span class="subst">$&#123;ctx.update.message.<span class="keyword">from</span>.first_name&#125;</span>!\n\nç»™ä½ å¸¦æ¥ä¸€æ¬¾éå¸¸å¥½çš„æ¸¸æˆ\n\nğŸ° ç»™ä½ å¸¦æ¥ä¸€æ¬¾éå¸¸å¥½çš„æ¸¸æˆ\n\nğŸ’¸ ç»™ä½ å¸¦æ¥ä¸€æ¬¾éå¸¸å¥½çš„æ¸¸æˆ\n\nğŸ ç»™ä½ å¸¦æ¥ä¸€æ¬¾éå¸¸å¥½çš„æ¸¸æˆ`</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">replyWithAnimation</span>(gifUrl, &#123;</span><br><span class="line">      <span class="attr">caption</span>: caption,</span><br><span class="line">      <span class="attr">reply_markup</span>: keyboard,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// å¤„ç†å›è°ƒæŸ¥è¯¢</span></span><br><span class="line">bot.<span class="title function_">start</span>(); <span class="comment">// å¯åŠ¨æœºå™¨äºº</span></span><br></pre></td></tr></table></figure>
<p>æœ€åè¿è¡Œå¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/667e7162d9c307b7e965dc7d.png" alt="å¯¹è¯æ¡†"></p>
<h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»åˆ›å»ºäº†3ä¸ªå†…è”æŒ‰é’®ï¼Œä½†æ˜¯æŒ‰é’®éƒ½æ˜¯ç”¨çš„urlæ–¹å¼ï¼ŒæŒ‰é’®çš„å³ä¸Šè§’æ˜¯ä¸€ä¸ªç®­å¤´çš„æ ‡è¯†ã€‚è¿™é‡Œç”¨èµ·æ¥æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å’Œæˆ‘æ‰¾çš„å‚è€ƒä¸ä¸€æ ·ã€‚äººå®¶æŒ‰é’®çš„å³ä¸Šè§’æ˜¯ä¸¤ä¸ªçª—å£çš„æ ‡è¯†ï¼Œè¿™é‡Œéœ€è¦å¯¹æŒ‰é’®çš„ç±»å‹å°±è¡Œä¿®æ”¹å°±è¡Œäº†ï¼Œä»£ç å¦‚ä¸‹:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>()</span><br><span class="line">  .<span class="title function_">webApp</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ&quot;</span>, <span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">webApp</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ&quot;</span>, <span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ&quot;</span>, <span class="variable constant_">TELEGRAM_GAME_URL</span>);</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹åå°±å¯ä»¥çœ‹åˆ°æ•ˆæœå¦‚ä¸‹ï¼š<br><img data-src="https://pic.imgdb.cn/item/66836d9fd9c307b7e9f4ad96.png" alt="å¯¹è¯æ¡†"><br>è¿™æ‰æ˜¯æˆ‘ä»¬æœ€ç»ˆæƒ³è¦çš„æ•ˆæœã€‚</p>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>Telegram Mini APP or Game Development Bot Setup</title>
    <url>/6e79860ben.html</url>
    <content><![CDATA[<p>I accidentally discovered that itâ€™s possible to release mini apps and games on Telegram, and it felt like discovering a new world. So I tried it out for fun.<br><a href="https://grammy.dev/zh/guide/">Reference Guide</a></p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>To develop a <code>mini App</code> or <code>game</code> on Telegram, creating a dedicated bot is essential.</p>
<h3 id="Create-a-Bot"><a href="#Create-a-Bot" class="headerlink" title="Create a Bot"></a>Create a Bot</h3><p>Search for <code>@BotFather</code> on Telegram or click <a href="https://t.me/BotFather">BotFather</a>.<br>As shown below:<br><img data-src="https://pic.imgdb.cn/item/667e6133d9c307b7e9486bb0.png" alt="BotFather Dialog"><br>After entering the dialog, you can select <code>Menu</code> -&gt; <code>/newbot</code>, or just type <code>/newbot</code> in the input field to create a bot. Follow the step-by-step instructions it provides.</p>
<h3 id="Create-a-Mini-App-or-Game"><a href="#Create-a-Mini-App-or-Game" class="headerlink" title="Create a Mini App or Game"></a>Create a Mini App or Game</h3><p>After creating the bot, proceed to create a mini app or game, depending on your needs. The process is similar to creating a botâ€”just send a message to <code>@BotFather</code>. The reference guide mentioned above also covers this.</p>
<h3 id="Set-Up-the-Development-Environment"><a href="#Set-Up-the-Development-Environment" class="headerlink" title="Set Up the Development Environment"></a>Set Up the Development Environment</h3><p>The development environment here is for the bot, not your mini app or game. You can develop using either <code>Node.js</code> or <code>Deno</code>. I am using <code>Deno</code>.<br>Refer to the link for setup instructions:<br><a href="https://deno.com/">Deno Tutorial</a><br>Follow the guide; weâ€™ll skip to the main points here.</p>
<h3 id="Bot-Replying-with-a-Game"><a href="#Bot-Replying-with-a-Game" class="headerlink" title="Bot Replying with a Game"></a>Bot Replying with a Game</h3><ol>
<li>Create a TypeScript script and copy-paste the following code. Note: replace <code>TOKEN</code> and <code>GAME_SHORT_NAME</code> with your own.<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Bot</span>&#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// Your bot token here</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">GAME_SHORT_NAME</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// Short name of your game</span></span><br><span class="line"><span class="comment">// Create an instance of the `Bot` class and pass your bot token.</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>); </span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">replyWithGame</span>(<span class="variable constant_">GAME_SHORT_NAME</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>(); <span class="comment">// Start the bot</span></span><br></pre></td></tr></table></figure>
2ã€Open the terminal and run the script with the following command:<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">deno run --allow-net your-script.<span class="property">ts</span></span><br></pre></td></tr></table></figure>
3ã€Go back to Telegram, send <code>/start</code> to your bot (not <code>BotFather</code>, your created bot), and youâ€™ll see a game reply from the bot, as shown below:<br><img data-src="https://pic.imgdb.cn/item/667e657ed9c307b7e950201c.png" alt="å¯¹è¯æ¡†">;<br> At this point, you may notice that clicking the <code>play</code> button doesnâ€™t do anything. We need to add a callback event to the button in the script above.<br>4ã€Add a Callback to the Button Include the following code in the script:<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">GAME_URL</span> = <span class="string">&quot;https://lengmo714.top&quot;</span>;</span><br><span class="line">bot.<span class="title function_">on</span>(<span class="string">&quot;callback_query:game_short_name&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ctx.callbackQuery.game_short_name = &quot;</span>,ctx.<span class="property">callbackQuery</span>.<span class="property">game_short_name</span>)</span><br><span class="line">    <span class="keyword">if</span> (ctx.<span class="property">callbackQuery</span>.<span class="property">game_short_name</span> === <span class="variable constant_">GAME_SHORT_NAME</span>) &#123;</span><br><span class="line">        <span class="keyword">await</span> ctx.<span class="title function_">answerCallbackQuery</span>(&#123; <span class="attr">url</span>: <span class="variable constant_">GAME_URL</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
After saving the code, run the script again. Send <code>/start</code> to the bot, and this time, when you click the <code>play</code> button, it will redirect to your pre-configured game link.</li>
</ol>
<h3 id="Bot-Replying-with-a-Mini-App"><a href="#Bot-Replying-with-a-Mini-App" class="headerlink" title="Bot Replying with a Mini App"></a>Bot Replying with a Mini App</h3><p>1ã€ Create a TypeScript script and copy-paste the following code. Note: replace <code>TOKEN</code> and the mini app URL with your own.</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Bot</span>&#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Handle the &quot;/start&quot; command</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(</span><br><span class="line">        <span class="string">&#x27;&lt;b&gt;Hi!&lt;/b&gt; &lt;i&gt;Welcome&lt;/i&gt; to &lt;a href=&quot;https://lengmo714.top&quot;&gt;grammY&lt;/a&gt;.&#x27;</span>,</span><br><span class="line">        &#123; <span class="attr">parse_mode</span>: <span class="string">&quot;HTML&quot;</span> &#125;,</span><br><span class="line">    )</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>2ã€Open the terminal and run the script:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deno run --allow-net tsè„šæœ¬.ts</span><br></pre></td></tr></table></figure>
<p>3ã€Go back to Telegram, send <code>/start</code> to your bot (not <code>BotFather</code>, your created bot), and youâ€™ll see a mini app reply from the bot, as shown below:<br><img data-src="https://pic.imgdb.cn/item/667e6c98d9c307b7e95bbe1e.png" alt="å¯¹è¯æ¡†">;</p>
<p>4ã€Click to open the mini app, and it will redirect to the mini app URL you set earlier.</p>
<h3 id="Adding-Inline-Buttons"><a href="#Adding-Inline-Buttons" class="headerlink" title="Adding Inline Buttons"></a>Adding Inline Buttons</h3><p>When sending <code>/start</code>, you may want the bot to reply with selectable options. You can add inline buttons in the botâ€™s response. Example code:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Bot</span>,<span class="title class_">InlineKeyboard</span>&#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>().<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ1&quot;</span>, <span class="string">&quot;one&quot;</span>).<span class="title function_">row</span>()</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ2&quot;</span>, <span class="string">&quot;two&quot;</span>).<span class="title function_">row</span>()</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ3&quot;</span>,<span class="string">&quot;three&quot;</span>);</span><br><span class="line"><span class="comment">// Handle the &quot;/start&quot; command</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">&quot;è¯·é€‰æ‹©ä½ éœ€è¦ç‚¹å‡»çš„æŒ‰é’®&quot;</span>,&#123;</span><br><span class="line">        <span class="attr">reply_markup</span>: keyboard,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>After running the script, youâ€™ll see:<br><img data-src="https://pic.imgdb.cn/item/667e6ea9d9c307b7e960ac34.png" alt="å¯¹è¯æ¡†"><br>By default, these buttons are vertically aligned. If you want them to be in a row, modify the <code>keyboard</code> as follows:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>().<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ1&quot;</span>, <span class="string">&quot;one&quot;</span>)</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ2&quot;</span>, <span class="string">&quot;two&quot;</span>)</span><br><span class="line">                                    .<span class="title function_">text</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ3&quot;</span>,<span class="string">&quot;three&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>Note: There are several types of buttons you can add: <code>.text</code>, <code>.game</code>, <code>.url</code>, <code>webApp</code>. I have only used these four, but there may be others.</p>
<h3 id="Bot-Reply-with-Image-Text-Button"><a href="#Bot-Reply-with-Image-Text-Button" class="headerlink" title="Bot Reply with Image + Text + Button"></a>Bot Reply with Image + Text + Button</h3><p>I saw a very nice reply on Telegram today, like the one below (from someone elseâ€™s bot):<br><img data-src="https://pic.imgdb.cn/item/667e7068d9c307b7e9640de7.png" alt="å¯¹è¯æ¡†"><br>Itâ€™s composed of a GIF animation + text + three buttons, and it also captures the userâ€™s ID. I thought it was very cool, so I made a similar one. Hereâ€™s the code:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>,<span class="title class_">InlineKeyboard</span> &#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TELEGRAM_GAME_URL</span> = <span class="string">&#x27;https://lengmo714.top&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Inline keyboard with game and web visit buttons</span></span><br><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;Start Game 1&quot;</span>,<span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;Start Game 2&quot;</span>,<span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;Start Game 3&quot;</span>,<span class="variable constant_">TELEGRAM_GAME_URL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Handle the /start command</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ctx.update.message = &quot;</span>,ctx.<span class="property">update</span>.<span class="property">message</span>.<span class="property">from</span>.<span class="property">first_name</span>);</span><br><span class="line">    <span class="keyword">const</span> gifUrl = <span class="string">&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> caption = <span class="string">`Hi <span class="subst">$&#123;ctx.update.message.<span class="keyword">from</span>.first_name&#125;</span>!\n\nHereâ€™s a great game for you!\n\nğŸ° A great game for you\n\nğŸ’¸ A great game for you\n\nğŸ A great game for you`</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">replyWithAnimation</span>(gifUrl, &#123;</span><br><span class="line">      <span class="attr">caption</span>: caption,</span><br><span class="line">      <span class="attr">reply_markup</span>: keyboard,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// Handle callback query</span></span><br><span class="line">bot.<span class="title function_">start</span>(); <span class="comment">// Start the bot</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>After running, you get:<br><img data-src="https://pic.imgdb.cn/item/667e7162d9c307b7e965dc7d.png" alt="å¯¹è¯æ¡†"></p>
<h3 id="Optimization"><a href="#Optimization" class="headerlink" title="Optimization"></a>Optimization</h3><p>From the image above, we have created three inline buttons using the URL option. The top right corner of these buttons displays an arrow icon. It works fine, but in the reference, the button had a two-window icon. To achieve this, modify the button type:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> keyboard = <span class="keyword">new</span> <span class="title class_">InlineKeyboard</span>()</span><br><span class="line">  .<span class="title function_">webApp</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ&quot;</span>, <span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">webApp</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ&quot;</span>, <span class="variable constant_">TELEGRAM_GAME_URL</span>).<span class="title function_">row</span>()</span><br><span class="line">  .<span class="title function_">url</span>(<span class="string">&quot;å¼€å§‹æ¸¸æˆ&quot;</span>, <span class="variable constant_">TELEGRAM_GAME_URL</span>);</span><br></pre></td></tr></table></figure>
<p>After modification, you can see the effect as follows:<br><img data-src="https://pic.imgdb.cn/item/66836d9fd9c307b7e9f4ad96.png" alt="Dialog box"><br>This is the effect we ultimately want.</p>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨telegramæ‰“å¼€miniAppå¦‚ä½•åˆ¤æ–­æ˜¯ä½¿ç”¨æ‰‹æœºæ‰“å¼€æ˜¯ç”µè„‘ç«¯æ‰“å¼€</title>
    <url>/9a29c8a1.html</url>
    <content><![CDATA[<p>æ¥ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå¥½telegramæœºå™¨äººåï¼Œå¼€å§‹å¼€å‘å°æ¸¸æˆæˆ–è€…mini Appï¼Œæˆ‘ä»¬æœ‰ä¸ªéœ€æ±‚æ˜¯éœ€è¦åˆ¤æ–­ç”¨æˆ·æ˜¯åœ¨æ‰‹æœºç«¯è¿˜æ˜¯PCç«¯æ‰“å¼€çš„ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å› ä¸ºæ˜¯tgå†…æ‰“å¼€ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥å»è·å–è®¾å¤‡æ˜¯æ‰‹æœºè¿˜æ˜¯PC(åé¢å‘ç°è¿˜æ˜¯æœ‰æ–¹æ³•çš„),è¿™é‡Œä»‹ç»ä¸‹æˆ‘è¿™é‡Œç”¨åˆ°çš„æ–¹æ³•ã€‚</p>
<h3 id="User-Agent-åˆ¤æ–­"><a href="#User-Agent-åˆ¤æ–­" class="headerlink" title="User Agent åˆ¤æ–­"></a>User Agent åˆ¤æ–­</h3><p>å½“ç”¨æˆ·é€šè¿‡ <code>WebApp</code> æ‰“å¼€ <code>mini app</code> æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>navigator.userAgent</code> æ¥åˆ¤æ–­ç”¨æˆ·æ‰€ä½¿ç”¨çš„è®¾å¤‡ç±»å‹ã€‚userAgent ä¼šæä¾›å…³äºæµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿç­‰ä¿¡æ¯ã€‚<br>åœ¨ <code>Telegram mini app</code> ä¸­ï¼Œé€šè¿‡ <code>User Agent</code>åˆ¤æ–­è®¾å¤‡ç±»å‹çš„ä»£ç é€šå¸¸åº”è¯¥æ”¾åœ¨ <code>mini app</code> åˆå§‹åŒ–æ—¶æ‰§è¡Œã€‚<br>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Telegram Mini App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> userAgent = navigator.<span class="property">userAgent</span>.<span class="title function_">toLowerCase</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> isMobile = <span class="regexp">/mobile|android|iphone|ipad|phone/i</span>.<span class="title function_">test</span>(userAgent);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (isMobile) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‰‹æœºç«¯&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;PCç”µè„‘ç«¯&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä½ å°±å¯ä»¥è·å–åˆ°æ˜¯åœ¨æ‰‹æœºç«¯è¿˜æ˜¯PCç«¯æ‰“å¼€çš„å•¦ã€‚</p>
<h3 id="Cocos-Creatorä¸­ä½¿ç”¨"><a href="#Cocos-Creatorä¸­ä½¿ç”¨" class="headerlink" title="Cocos Creatorä¸­ä½¿ç”¨"></a>Cocos Creatorä¸­ä½¿ç”¨</h3><p>æˆ‘ä»¬çš„æ¸¸æˆæ˜¯ä½¿ç”¨<code>Cocos Creator</code>å¼€å‘çš„ï¼Œå¯¼å‡º<code>web-mobile</code>åï¼Œåœ¨<code>index.html</code>ä¸­åŠ å…¥ä¸Šé¢ä»£ç ï¼Œè®¾ç½®ä¸€ä¸ªå…¨å±€å‚æ•°ï¼Œæ¯”å¦‚<code>window.Device</code>ã€‚<br>å†åœ¨<code>Cocos Creator</code>ä¸­ç›´æ¥è°ƒç”¨è¯¥å‚æ•°å°±å¯ä»¥äº†ã€‚<br>ç¤ºä¾‹htmlä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Telegram Mini App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> userAgent = navigator.<span class="property">userAgent</span>.<span class="title function_">toLowerCase</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> isMobile = <span class="regexp">/mobile|android|iphone|ipad|phone/i</span>.<span class="title function_">test</span>(userAgent);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (isMobile) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‰‹æœºç«¯&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">Device</span> = <span class="string">&quot;mobile&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;PCç”µè„‘ç«¯&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">Device</span> = <span class="string">&quot;Desktop&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹tsä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> paramA = <span class="variable language_">window</span>[<span class="string">&#x27;Device&#x27;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å‚æ•° Device:&#x27;</span>, paramA);  <span class="comment">// è¾“å‡º: å‚æ•° Device: Hello, Cocos!</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
  </entry>
  <entry>
    <title>How to Determine Whether a Telegram Mini App is Opened on Mobile or Desktop</title>
    <url>/9a29c8a1en.html</url>
    <content><![CDATA[<p>Following the previous article, after creating a Telegram bot, we began developing a mini game or mini app. We had a requirement to determine whether the user was accessing it via a mobile device or a PC.</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Since the app is opened within Telegram, it is not straightforward to directly detect whether the device is a phone or a PC (though there are ways to do it, as we later discovered). Here, Iâ€™ll introduce the method I used.</p>
<h3 id="User-Agent-Detection"><a href="#User-Agent-Detection" class="headerlink" title="User Agent Detection"></a>User Agent Detection</h3><p>When the user opens the <code>mini app</code> through a <code>WebApp</code>, you can use <code>navigator.userAgent</code> to determine the type of device. The userAgent string provides information about the browser, operating system, and more.<br>In a <code>Telegram mini app</code>, this device detection code should be executed during the initialization of the <code>mini app</code>.<br>Sample code:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Telegram Mini App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> userAgent = navigator.<span class="property">userAgent</span>.<span class="title function_">toLowerCase</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> isMobile = <span class="regexp">/mobile|android|iphone|ipad|phone/i</span>.<span class="title function_">test</span>(userAgent);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (isMobile) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Mobile Device&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;PC/Desktop&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>With this code, you can determine whether the app was opened on a mobile device or a PC.</p>
<h3 id="Usage-in-Cocos-Creator"><a href="#Usage-in-Cocos-Creator" class="headerlink" title="Usage in Cocos Creator"></a>Usage in Cocos Creator</h3><p>Our game was developed using <code>Cocos Creator</code>. After exporting to <code>web-mobile</code>, include the above code in the <code>index.html</code> file and set a global parameter, such as <code>window.Device</code>. Then, you can directly access this parameter in <code>Cocos Creator</code>.<br>Sample HTML code:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Telegram Mini App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> userAgent = navigator.<span class="property">userAgent</span>.<span class="title function_">toLowerCase</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> isMobile = <span class="regexp">/mobile|android|iphone|ipad|phone/i</span>.<span class="title function_">test</span>(userAgent);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (isMobile) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Mobile Device&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">Device</span> = <span class="string">&quot;mobile&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;PC/Desktop&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">Device</span> = <span class="string">&quot;Desktop&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹tsä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> paramA = <span class="variable language_">window</span>[<span class="string">&#x27;Device&#x27;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Device Parameter:&#x27;</span>, paramA);  <span class="comment">// Output: Device Parameter: mobile or Desktop</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
  </entry>
  <entry>
    <title>telegramæ”¯ä»˜</title>
    <url>/80ac2a18.html</url>
    <content><![CDATA[<p>ä»Šå¤©å¼€å§‹æ¥å…¥telegramæ”¯ä»˜ï¼Œ<a href="https://core.telegram.org/bots/payments#getting-a-token">å‚è€ƒæ•™ç¨‹</a>è¿™ä¸ªæ˜¯telegramçš„å®˜æ–¹è¯´æ˜ï¼Œè¯¦ç»†ä»‹ç»äº†æœºå™¨äººæ”¯ä»˜APIã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="æ–°å»ºæœºå™¨äºº"><a href="#æ–°å»ºæœºå™¨äºº" class="headerlink" title="æ–°å»ºæœºå™¨äºº"></a>æ–°å»ºæœºå™¨äºº</h3><p>å› ä¸ºæ”¯ä»˜æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç³»ç»Ÿï¼Œæ‰€ä»¥åœ¨åšæ”¯ä»˜çš„æ—¶å€™å•ç‹¬åˆ›å»ºäº†ä¸€ä¸ªbotï¼Œæ²¡æœ‰ç”¨ä¹‹å‰çš„botäº†ï¼Œç‰¹æ„è¿™æ ·å°†å…¶åˆ†å¼€ã€‚åˆ›å»ºbotçš„æ–¹æ³•å’Œä¹‹å‰ä¸å˜ï¼Œè¿™é‡Œä¸è¿‡å¤šä»‹ç»ã€‚</p>
<h3 id="è·å–æ”¯ä»˜tokenä»¤ç‰Œ"><a href="#è·å–æ”¯ä»˜tokenä»¤ç‰Œ" class="headerlink" title="è·å–æ”¯ä»˜tokenä»¤ç‰Œ"></a>è·å–æ”¯ä»˜tokenä»¤ç‰Œ</h3><p>æœºå™¨äººåˆ›å»ºå¥½åï¼Œæˆ‘ä»¬éœ€è¦è·å–æ”¯ä»˜tokenä»¤ç‰Œã€‚æ­¥éª¤å¦‚ä¸‹ï¼š<br><strong>1ã€</strong>åœ¨BotFatherå¯¹è¯ä¸­é€‰æ‹©ä½ ç”¨æ¥æ”¯ä»˜çš„æœºå™¨äºº<br><strong>2ã€</strong>ç„¶åé€‰æ‹©<code>Payments</code><br><img data-src="https://pic.imgdb.cn/item/6683fc51d9c307b7e93f6e86.png" alt="ç„¶åé€‰æ‹©Payments"><br><strong>3ã€</strong>é€‰æ‹©ä½ çš„æ”¯ä»˜æä¾›å•†ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ç¬¬äºŒä¸ª<code>Stripe</code>ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–çš„ï¼Œåé¢çš„æ­¥éª¤éƒ½æ˜¯åœ¨è¿™ä¸ªé€‰é¡¹ä¸‹è¿›è¡Œçš„ã€‚<br><img data-src="https://pic.imgdb.cn/item/6683fc9ad9c307b7e9400c1b.png" alt="é€‰æ‹©ä½ çš„æ”¯ä»˜æä¾›å•†"><br><strong>4ã€</strong>é€‰æ‹©<code>connect Stripe Test</code>è¿æ¥æµ‹è¯•<br><img data-src="https://pic.imgdb.cn/item/6683fcc4d9c307b7e9406898.png" alt="connect Stripe Test"><br><strong>5ã€</strong>é€‰æ‹©åä¼šè·³è½¬åˆ°<code>Stripe Test Bot</code>æ”¯ä»˜æä¾›å•†çš„æµ‹è¯•æœºå™¨äººï¼Œç‚¹å‡»<code>Authorize</code>æŒ‰é’®<br><img data-src="https://pic.imgdb.cn/item/6683fd22d9c307b7e9413852.png" alt="æµ‹è¯•æœºå™¨äºº"><br><strong>6ã€</strong>ç‚¹å‡»åä¼šç”Ÿæˆä¸€ä¸ªé“¾æ¥æ‰“å¼€ï¼Œå°±èƒ½ç»‘å®šä½ çš„botæœºå™¨äººäº†ã€‚<br><img data-src="https://pic.imgdb.cn/item/6683fd51d9c307b7e9419921.png" alt="ç»‘å®š"><br><strong>7ã€</strong>å†å›åˆ°ç¬¬3æ­¥ï¼Œä½ å°±ä¼šçœ‹åˆ°ä½ çš„æµ‹è¯•tokenäº†ï¼Œ<code>-Stripe Test:</code>åé¢çš„ä¸€ä¸²ï¼Œå› ä¸ºæˆ‘ç”Ÿæˆäº†3æ¬¡ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰3ä¸ªã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img data-src="https://pic.imgdb.cn/item/6683fdf9d9c307b7e942f5bb.png" alt="æµ‹è¯•token"></p>
<h3 id="ä»£ç é€»è¾‘å®ç°"><a href="#ä»£ç é€»è¾‘å®ç°" class="headerlink" title="ä»£ç é€»è¾‘å®ç°"></a>ä»£ç é€»è¾‘å®ç°</h3><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>, <span class="title class_">InlineKeyboard</span>&#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> botToken = <span class="string">&quot;&quot;</span>; <span class="comment">// ä½ æœºå™¨äººçš„token</span></span><br><span class="line"><span class="comment">// åˆ›å»ºbotå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(botToken);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æµ‹è¯•æä¾›å•†Tokenï¼ˆä¾‹å¦‚Stripeçš„æµ‹è¯•å¯†é’¥ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> providerToken = <span class="string">&quot;&quot;</span>;  <span class="comment">// æç¤ºæä¾›å•†çš„token,å°±æ˜¯ä¸Šé¢ç¬¬7æ­¥çœ‹åˆ°çš„</span></span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> title = <span class="string">&quot;æµ‹è¯•äº§å“&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> description = <span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•äº§å“&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> payload = <span class="string">&quot;test_payload&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> startParameter = <span class="string">&quot;test_start&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> currency = <span class="string">&quot;USD&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> prices = [</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&quot;æµ‹è¯•äº§å“&quot;</span>, <span class="attr">amount</span>: <span class="number">100</span>, <span class="attr">currency</span>: currency &#125;</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">const</span> photoUrl = <span class="string">&quot;https://api.telegram.org/file/botYOUR_BOT_TOKEN/photos/file_0.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> payloadData = &#123;</span><br><span class="line">      <span class="attr">chat_id</span>: ctx.<span class="property">chat</span>.<span class="property">id</span>,</span><br><span class="line">      <span class="attr">title</span>: title,</span><br><span class="line">      <span class="attr">description</span>: description,</span><br><span class="line">      <span class="attr">payload</span>: payload,</span><br><span class="line">      <span class="attr">provider_token</span>: providerToken,</span><br><span class="line">      <span class="attr">start_parameter</span>: startParameter,</span><br><span class="line">      <span class="attr">currency</span>: currency,</span><br><span class="line">      <span class="attr">prices</span>: prices,</span><br><span class="line">      <span class="attr">photo_url</span>: photoUrl,</span><br><span class="line">      <span class="attr">need_shipping_address</span>: <span class="literal">false</span>, <span class="comment">// å¦‚æœä¸éœ€è¦é…é€åœ°å€ï¼Œè¯·è®¾ç½®ä¸º false</span></span><br><span class="line">      <span class="attr">is_flexible</span>: <span class="literal">false</span>, <span class="comment">// å¦‚æœä»·æ ¼ä¸å¯çµæ´»è°ƒæ•´ï¼Œè¯·è®¾ç½®ä¸º false</span></span><br><span class="line">      <span class="attr">send_phone_number_to_provider</span>: <span class="literal">true</span>, <span class="comment">// å°†ç”¨æˆ·çš„æ‰‹æœºå·å‘é€ç»™æä¾›å•†ï¼Œå¯é€‰</span></span><br><span class="line">      <span class="attr">send_email_to_provider</span>: <span class="literal">true</span> <span class="comment">// å°†ç”¨æˆ·çš„é‚®ç®±å‘é€ç»™æä¾›å•†ï¼Œå¯é€‰</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://api.telegram.org/bot<span class="subst">$&#123;botToken&#125;</span>/sendInvoice`</span>, &#123;</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(payloadData)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    <span class="keyword">if</span> (!data.<span class="property">ok</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`<span class="subst">$&#123;data.error_code&#125;</span>: <span class="subst">$&#123;data.description&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‘ç¥¨å‘é€æˆåŠŸ:&quot;</span>, data);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;å‘é€å‘ç¥¨æ—¶å‡ºé”™:&quot;</span>, error.<span class="property">message</span>);</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">&quot;åˆ›å»ºå‘ç¥¨å¤±è´¥ï¼Œè¯·é‡è¯•ã€‚&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">on</span>(<span class="string">&quot;pre_checkout_query&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> ctx.<span class="title function_">answerPreCheckoutQuery</span>(<span class="literal">true</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">on</span>(<span class="string">&quot;message&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (ctx.<span class="property">message</span>.<span class="property">successful_payment</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ”¯ä»˜æˆåŠŸ!&quot;</span>, ctx.<span class="property">message</span>.<span class="property">successful_payment</span>);</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">&quot;æ”¯ä»˜æˆåŠŸï¼æ„Ÿè°¢æ‚¨çš„è´­ä¹°ã€‚&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>å°†ä¸Šé¢ä»£ç ä¿å­˜ä¸ºtsæ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deno run --allow-net tsè„šæœ¬.ts</span><br></pre></td></tr></table></figure>
<p>ç¡®ä¿ä»£ç æ­£ç¡®æ‰§è¡Œåï¼Œå›åˆ°ä½ åˆ›å»ºçš„æ”¯ä»˜æœºå™¨äººå¯¹è¯ç•Œé¢ï¼Œå‘é€<code>/start</code>ï¼Œå°†å‡ºç°å¦‚ä¸‹å›å¤<br><img data-src="https://pic.imgdb.cn/item/6683ff41d9c307b7e945dc03.png" alt="æœºå™¨äººç•Œé¢"><br>æˆ‘è¿™é‡Œä¸€ç‰‡é»‘è‰²æ˜¯å› ä¸ºå›¾ç‰‡æ²¡æœ‰åŠ è½½å‡ºæ¥ï¼Œå›¾ç‰‡ä¸‹è½½ä¸‹æ¥å°±å¥½äº†ã€‚<br>ç‚¹å‡»ä¸‹é¢çš„<code>pay</code>æŒ‰é’®å°±è·³è½¬åˆ°æ”¯ä»˜å•¦~</p>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>Telegram Payments</title>
    <url>/80ac2a18en.html</url>
    <content><![CDATA[<p>Starting today, we are integrating Telegram payments. <a href="https://core.telegram.org/bots/payments#getting-a-token">Reference Tutorial</a> is the official Telegram documentation, which explains the bot payment API in detail.</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Create-a-New-Bot"><a href="#Create-a-New-Bot" class="headerlink" title="Create a New Bot"></a>Create a New Bot</h3><p>Since payment is a separate system, we created a new bot specifically for payment instead of using the previous one. The method to create a bot remains unchanged, so we wonâ€™t elaborate here.</p>
<h3 id="Get-Payment-Token"><a href="#Get-Payment-Token" class="headerlink" title="Get Payment Token"></a>Get Payment Token</h3><p>After creating the bot, we need to get the payment token. The steps are as follows:<br><strong>1.</strong> Select the bot you want to use for payments in the BotFather chat.<br><strong>2.</strong> Then choose <code>Payments</code>.<br><img data-src="https://pic.imgdb.cn/item/6683fc51d9c307b7e93f6e86.png" alt="Then choose Payments"><br><strong>3.</strong> Choose your payment provider. I selected the second option <code>Stripe</code>, but you can choose others. The subsequent steps are based on this selection.<br><img data-src="https://pic.imgdb.cn/item/6683fc9ad9c307b7e9400c1b.png" alt="Choose your payment provider"><br><strong>4.</strong> Choose <code>connect Stripe Test</code> to connect to the test.<br><img data-src="https://pic.imgdb.cn/item/6683fcc4d9c307b7e9406898.png" alt="connect Stripe Test"><br><strong>5.</strong> After choosing, you will be redirected to the <code>Stripe Test Bot</code>, a test bot from the payment provider, where you can click the <code>Authorize</code> button.<br><img data-src="https://pic.imgdb.cn/item/6683fd22d9c307b7e9413852.png" alt="Test Bot"><br><strong>6.</strong> After clicking, a link will be generated, and you can bind your bot.<br><img data-src="https://pic.imgdb.cn/item/6683fd51d9c307b7e9419921.png" alt="Binding"><br><strong>7.</strong> Go back to step 3, and you will see your test token after <code>-Stripe Test:</code>. Since I generated it three times, there are three here. As shown below:<br><img data-src="https://pic.imgdb.cn/item/6683fdf9d9c307b7e942f5bb.png" alt="Test Token"></p>
<h3 id="Code-Logic-Implementation"><a href="#Code-Logic-Implementation" class="headerlink" title="Code Logic Implementation"></a>Code Logic Implementation</h3><p>Sample Code:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>, <span class="title class_">InlineKeyboard</span>&#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> botToken = <span class="string">&quot;&quot;</span>; <span class="comment">// Your bot token</span></span><br><span class="line"><span class="comment">// Create bot instance</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(botToken);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use test provider token (e.g., Stripe&#x27;s test key)</span></span><br><span class="line"><span class="keyword">const</span> providerToken = <span class="string">&quot;&quot;</span>;  <span class="comment">// Payment provider token from step 7</span></span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> title = <span class="string">&quot;Test Product&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> description = <span class="string">&quot;This is a test product&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> payload = <span class="string">&quot;test_payload&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> startParameter = <span class="string">&quot;test_start&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> currency = <span class="string">&quot;USD&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> prices = [</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&quot;Test Product&quot;</span>, <span class="attr">amount</span>: <span class="number">100</span>, <span class="attr">currency</span>: currency &#125;</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">const</span> photoUrl = <span class="string">&quot;https://api.telegram.org/file/botYOUR_BOT_TOKEN/photos/file_0.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> payloadData = &#123;</span><br><span class="line">      <span class="attr">chat_id</span>: ctx.<span class="property">chat</span>.<span class="property">id</span>,</span><br><span class="line">      <span class="attr">title</span>: title,</span><br><span class="line">      <span class="attr">description</span>: description,</span><br><span class="line">      <span class="attr">payload</span>: payload,</span><br><span class="line">      <span class="attr">provider_token</span>: providerToken,</span><br><span class="line">      <span class="attr">start_parameter</span>: startParameter,</span><br><span class="line">      <span class="attr">currency</span>: currency,</span><br><span class="line">      <span class="attr">prices</span>: prices,</span><br><span class="line">      <span class="attr">photo_url</span>: photoUrl,</span><br><span class="line">      <span class="attr">need_shipping_address</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">is_flexible</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">send_phone_number_to_provider</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">send_email_to_provider</span>: <span class="literal">true</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://api.telegram.org/bot<span class="subst">$&#123;botToken&#125;</span>/sendInvoice`</span>, &#123;</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(payloadData)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    <span class="keyword">if</span> (!data.<span class="property">ok</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`<span class="subst">$&#123;data.error_code&#125;</span>: <span class="subst">$&#123;data.description&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Invoice sent successfully:&quot;</span>, data);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error sending invoice:&quot;</span>, error.<span class="property">message</span>);</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">&quot;Failed to create invoice, please try again.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">on</span>(<span class="string">&quot;pre_checkout_query&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> ctx.<span class="title function_">answerPreCheckoutQuery</span>(<span class="literal">true</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">on</span>(<span class="string">&quot;message&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (ctx.<span class="property">message</span>.<span class="property">successful_payment</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Payment Successful!&quot;</span>, ctx.<span class="property">message</span>.<span class="property">successful_payment</span>);</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">&quot;Payment successful! Thank you for your purchase.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>Save the above code as a ts file and run it:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deno run --allow-net ts_script.ts</span><br></pre></td></tr></table></figure>
<p>After ensuring the code runs correctly, go back to the payment bot chat you created, send <code>/start</code>, and you will receive a reply as shown below:<br><img data-src="https://pic.imgdb.cn/item/6683ff41d9c307b7e945dc03.png" alt="Robot interface"><br>The black area is because the image did not load; downloading the image will resolve it. Click the <code>pay</code> button below to proceed to payment.</p>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>telegramè·å–ç”¨æˆ·ä¿¡æ¯</title>
    <url>/78a7bf41.html</url>
    <content><![CDATA[<p>æ¥ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå¥½telegramæœºå™¨äººåï¼Œå¼€å§‹å¼€å‘å°æ¸¸æˆæˆ–è€…mini Appï¼Œé‚£å°±é¿å…ä¸äº†ç™»å½•åŠŸèƒ½ã€‚è¿™æ ·å°±éœ€è¦æ¥å…¥ç”¨æˆ·çš„ä¿¡æ¯ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å‚è€ƒæ•™ç¨‹<a href="https://grammy.dev/ref/">å‚è€ƒæ•™ç¨‹</a>,telegramå·²ç»ç»™æˆ‘ä»¬æä¾›éå¸¸å¤šçš„apiï¼Œæˆ‘ä»¬åœ¨è·å–ç”¨æˆ·ä¿¡æ¯çš„æ—¶å€™åªéœ€è¦è°ƒç”¨å¯¹åº”çš„apiå³å¯ã€‚</p>
<h3 id="è·å–ç”¨æˆ·ä¿¡æ¯"><a href="#è·å–ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="è·å–ç”¨æˆ·ä¿¡æ¯"></a>è·å–ç”¨æˆ·ä¿¡æ¯</h3><p>è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œæˆ‘è¿™é‡Œä¸»è¦æ˜¯è·å–äº†ç”¨æˆ·çš„å¤´åƒã€idã€ç”¨æˆ·åã€åå­—å’ŒçŠ¶æ€ã€‚<br>ç”¨åˆ°2ä¸ªapiï¼Œ<code>getChatMember</code>å’Œ<code>getUserProfilePhotos</code>ã€‚<br>ç”¨æ³•åˆ†åˆ«å¦‚ä¸‹ï¼š<br><strong>è·å–ç”¨æˆ·å¤´åƒï¼š</strong></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–å¤´åƒURLä¸ºç©ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">let</span> photoUrl = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// è·å–ç”¨æˆ·å¤´åƒä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">const</span> profilePhotos = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getUserProfilePhotos</span>(userId, &#123; <span class="attr">limit</span>: <span class="number">1</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (profilePhotos.<span class="property">total_count</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> fileId = profilePhotos.<span class="property">photos</span>[<span class="number">0</span>][<span class="number">0</span>].<span class="property">file_id</span>;</span><br><span class="line">    <span class="keyword">const</span> file = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getFile</span>(fileId);</span><br><span class="line">    photoUrl = <span class="string">`https://api.telegram.org/file/bot<span class="subst">$&#123;TOKEN&#125;</span>/<span class="subst">$&#123;file.file_path&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;è·å–å¤´åƒå¤±è´¥: &quot;</span>, error);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯:</strong></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> userInfo = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> id = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> chatMember = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getChatMember</span>(ctx.<span class="property">chat</span>.<span class="property">id</span>, userId);</span><br><span class="line">  id = chatMember.<span class="property">user</span>.<span class="property">id</span>;</span><br><span class="line">  name = chatMember.<span class="property">user</span>.<span class="property">first_name</span>;</span><br><span class="line">  userInfo = <span class="string">`ç”¨æˆ·ä¿¡æ¯:\nID: <span class="subst">$&#123;chatMember.user.id&#125;</span>\nåå­—: <span class="subst">$&#123;chatMember.user.first_name&#125;</span>\nç”¨æˆ·å: <span class="subst">$&#123;chatMember.user.username&#125;</span>\nçŠ¶æ€: <span class="subst">$&#123;chatMember.status&#125;</span>`</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥: &quot;</span>, error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (photoUrl) &#123;</span><br><span class="line">  <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">`å¤´åƒé“¾æ¥: <span class="subst">$&#123;photoUrl&#125;</span>`</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">&quot;æœªèƒ½è·å–ä½ çš„å¤´åƒã€‚&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> ctx.<span class="title function_">reply</span>(userInfo || <span class="string">&quot;æœªèƒ½è·å–ä½ çš„ç”¨æˆ·ä¿¡æ¯ã€‚&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>å®Œæ•´ä»£ç </strong></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>, <span class="title class_">InlineKeyboard</span> &#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// botæœºå™¨äººçš„token</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç† /start å‘½ä»¤</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> firstName = ctx.<span class="property">update</span>.<span class="property">message</span>.<span class="property">from</span>.<span class="property">first_name</span>;</span><br><span class="line">  <span class="keyword">const</span> userId = ctx.<span class="property">from</span>.<span class="property">id</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–å¤´åƒURLä¸ºç©ºå­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">let</span> photoUrl = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–ç”¨æˆ·å¤´åƒä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">const</span> profilePhotos = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getUserProfilePhotos</span>(userId, &#123; <span class="attr">limit</span>: <span class="number">1</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (profilePhotos.<span class="property">total_count</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> fileId = profilePhotos.<span class="property">photos</span>[<span class="number">0</span>][<span class="number">0</span>].<span class="property">file_id</span>;</span><br><span class="line">      <span class="keyword">const</span> file = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getFile</span>(fileId);</span><br><span class="line">      photoUrl = <span class="string">`https://api.telegram.org/file/bot<span class="subst">$&#123;TOKEN&#125;</span>/<span class="subst">$&#123;file.file_path&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;è·å–å¤´åƒå¤±è´¥: &quot;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">let</span> userInfo = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">let</span> id = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> chatMember = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getChatMember</span>(ctx.<span class="property">chat</span>.<span class="property">id</span>, userId);</span><br><span class="line">    id = chatMember.<span class="property">user</span>.<span class="property">id</span>;</span><br><span class="line">    name = chatMember.<span class="property">user</span>.<span class="property">first_name</span>;</span><br><span class="line">    userInfo = <span class="string">`ç”¨æˆ·ä¿¡æ¯:\nID: <span class="subst">$&#123;chatMember.user.id&#125;</span>\nåå­—: <span class="subst">$&#123;chatMember.user.first_name&#125;</span>\nç”¨æˆ·å: <span class="subst">$&#123;chatMember.user.username&#125;</span>\nçŠ¶æ€: <span class="subst">$&#123;chatMember.status&#125;</span>`</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥: &quot;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (photoUrl) &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">`å¤´åƒé“¾æ¥: <span class="subst">$&#123;photoUrl&#125;</span>`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">&quot;æœªèƒ½è·å–ä½ çš„å¤´åƒã€‚&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(userInfo || <span class="string">&quot;æœªèƒ½è·å–ä½ çš„ç”¨æˆ·ä¿¡æ¯ã€‚&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨æœºå™¨äºº</span></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>

<h3 id="è¿è¡Œä»£ç çœ‹å…ˆç°è±¡"><a href="#è¿è¡Œä»£ç çœ‹å…ˆç°è±¡" class="headerlink" title="è¿è¡Œä»£ç çœ‹å…ˆç°è±¡"></a>è¿è¡Œä»£ç çœ‹å…ˆç°è±¡</h3><p>æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œè¿åŠ¨ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deno run --allow-net tsè„šæœ¬.ts</span><br></pre></td></tr></table></figure>

<p>å›åˆ°å’Œæœºå™¨äººçš„å¯¹è¯ç•Œé¢ï¼Œå‘é€<code>/start</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°æœºå™¨äººè¿”å›çš„ç”¨æˆ·ç™»å½•ä¿¡æ¯å’Œå¤´åƒäº†ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/6682669ad9c307b7e99b11e9.png" alt="å¯¹è¯æ¡†">;</p>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>telegramè·å–ç”¨æˆ·å‘é€çš„æ¶ˆæ¯å¹¶ä¸ŠæŠ¥ç»™æœåŠ¡å™¨</title>
    <url>/75509731.html</url>
    <content><![CDATA[<p>æœ€è¿‘åšçš„tg mini appæŠ•æ”¾åå‘ç°ä¸€äº›ç”¨æˆ·çš„æ“ä½œå¼‚å¸¸ï¼Œä½†æ˜¯åˆä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œäºæ˜¯åŠ ä¸Šäº†è¿™ä¸ªåŠŸèƒ½ï¼Œçœ‹ç”¨æˆ·æ˜¯å¦ç»™botæœºå™¨äººå‘é€äº†åé¦ˆæ¶ˆæ¯ï¼Œæˆ‘ä»¬æ²¡æœ‰æ”¶åˆ°ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>botæ¥æ”¶åˆ°ç”¨æˆ·å‘é€çš„æ¶ˆæ¯ï¼Œç„¶åå°†æ¶ˆæ¯è½¬å‘ç»™æœåŠ¡å™¨ï¼Œä»è€Œè¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„</p>
<h3 id="ä»£ç å¦‚ä¸‹ï¼š"><a href="#ä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="ä»£ç å¦‚ä¸‹ï¼š"></a>ä»£ç å¦‚ä¸‹ï¼š</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>, <span class="title class_">InlineKeyboard</span> &#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">//ä½ çš„æœºå™¨äººtoken</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"><span class="keyword">const</span> serverUrl = <span class="string">&quot;&quot;</span>; <span class="comment">// ä½ çš„æœåŠ¡å™¨åœ°å€</span></span><br><span class="line">bot.<span class="title function_">on</span>(<span class="string">&quot;message:text&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> messageText = ctx.<span class="property">message</span>.<span class="property">text</span>;</span><br><span class="line">  <span class="keyword">const</span> chatId = ctx.<span class="property">message</span>.<span class="property">chat</span>.<span class="property">id</span>;</span><br><span class="line">  <span class="keyword">const</span> firstName = ctx.<span class="property">update</span>.<span class="property">message</span>.<span class="property">from</span>.<span class="property">first_name</span>;</span><br><span class="line">  <span class="keyword">const</span> eventtime = (<span class="keyword">await</span> <span class="title function_">getCurrentTime</span>()).<span class="title function_">toString</span>();</span><br><span class="line">  <span class="keyword">const</span> payload = &#123;</span><br><span class="line">      <span class="attr">uid</span>: chatId,</span><br><span class="line">      <span class="attr">message</span>: messageText,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// å°†æ•°æ®å‘é€åˆ°æœåŠ¡å™¨</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(serverUrl, &#123;</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(payload),</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`HTTP error! status: <span class="subst">$&#123;response.status&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è§£ææœåŠ¡å™¨å“åº”</span></span><br><span class="line">    <span class="keyword">const</span> responseData = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æœåŠ¡å™¨å“åº”:&quot;</span>, responseData);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;å‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨å¤±è´¥:&quot;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨æœºå™¨äºº</span></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>Retrieve User Information from Telegram</title>
    <url>/78a7bf41en.html</url>
    <content><![CDATA[<p>Following the previous article, after creating a Telegram bot, we began developing a mini game or mini app, which inevitably involves a login feature. This means we need to access user information.</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Reference Guide <a href="https://grammy.dev/ref/">Reference Guide</a>, Telegram provides many APIs, and to retrieve user information, you simply need to call the appropriate API.</p>
<h3 id="Retrieve-User-Information"><a href="#Retrieve-User-Information" class="headerlink" title="Retrieve User Information"></a>Retrieve User Information</h3><p>Here, the main information retrieved is the userâ€™s avatar, ID, username, name, and status. We use two APIs, <code>getChatMember</code> and <code>getUserProfilePhotos</code>.<br>Usage examples:<br><strong>Retrieve User Avatar:</strong></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Initialize avatar URL as an empty string</span></span><br><span class="line"><span class="keyword">let</span> photoUrl = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// Get user avatar information</span></span><br><span class="line">  <span class="keyword">const</span> profilePhotos = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getUserProfilePhotos</span>(userId, &#123; <span class="attr">limit</span>: <span class="number">1</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (profilePhotos.<span class="property">total_count</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> fileId = profilePhotos.<span class="property">photos</span>[<span class="number">0</span>][<span class="number">0</span>].<span class="property">file_id</span>;</span><br><span class="line">    <span class="keyword">const</span> file = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getFile</span>(fileId);</span><br><span class="line">    photoUrl = <span class="string">`https://api.telegram.org/file/bot<span class="subst">$&#123;TOKEN&#125;</span>/<span class="subst">$&#123;file.file_path&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Failed to retrieve avatar: &quot;</span>, error);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Retrieve User Login Information:</strong></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">let</span> userInfo = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> id = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> chatMember = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getChatMember</span>(ctx.<span class="property">chat</span>.<span class="property">id</span>, userId);</span><br><span class="line">  id = chatMember.<span class="property">user</span>.<span class="property">id</span>;</span><br><span class="line">  name = chatMember.<span class="property">user</span>.<span class="property">first_name</span>;</span><br><span class="line">  userInfo = <span class="string">`User Information:\nID: <span class="subst">$&#123;chatMember.user.id&#125;</span>\nName: <span class="subst">$&#123;chatMember.user.first_name&#125;</span>\nUsername: <span class="subst">$&#123;chatMember.user.username&#125;</span>\nStatus: <span class="subst">$&#123;chatMember.status&#125;</span>`</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Failed to retrieve user information: &quot;</span>, error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (photoUrl) &#123;</span><br><span class="line">  <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">`Avatar URL: <span class="subst">$&#123;photoUrl&#125;</span>`</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">&quot;Failed to retrieve your avatar.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> ctx.<span class="title function_">reply</span>(userInfo || <span class="string">&quot;Failed to retrieve your user information.&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Complete Code</strong></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>, <span class="title class_">InlineKeyboard</span> &#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// Bot token</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Handle the /start command</span></span><br><span class="line">bot.<span class="title function_">command</span>(<span class="string">&quot;start&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> firstName = ctx.<span class="property">update</span>.<span class="property">message</span>.<span class="property">from</span>.<span class="property">first_name</span>;</span><br><span class="line">  <span class="keyword">const</span> userId = ctx.<span class="property">from</span>.<span class="property">id</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Initialize avatar URL as an empty string</span></span><br><span class="line">  <span class="keyword">let</span> photoUrl = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// Get user avatar information</span></span><br><span class="line">    <span class="keyword">const</span> profilePhotos = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getUserProfilePhotos</span>(userId, &#123; <span class="attr">limit</span>: <span class="number">1</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (profilePhotos.<span class="property">total_count</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> fileId = profilePhotos.<span class="property">photos</span>[<span class="number">0</span>][<span class="number">0</span>].<span class="property">file_id</span>;</span><br><span class="line">      <span class="keyword">const</span> file = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getFile</span>(fileId);</span><br><span class="line">      photoUrl = <span class="string">`https://api.telegram.org/file/bot<span class="subst">$&#123;TOKEN&#125;</span>/<span class="subst">$&#123;file.file_path&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Failed to retrieve avatar: &quot;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Retrieve user login information</span></span><br><span class="line">  <span class="keyword">let</span> userInfo = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">let</span> id = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> chatMember = <span class="keyword">await</span> bot.<span class="property">api</span>.<span class="title function_">getChatMember</span>(ctx.<span class="property">chat</span>.<span class="property">id</span>, userId);</span><br><span class="line">    id = chatMember.<span class="property">user</span>.<span class="property">id</span>;</span><br><span class="line">    name = chatMember.<span class="property">user</span>.<span class="property">first_name</span>;</span><br><span class="line">    userInfo = <span class="string">`User Information:\nID: <span class="subst">$&#123;chatMember.user.id&#125;</span>\nName: <span class="subst">$&#123;chatMember.user.first_name&#125;</span>\nUsername: <span class="subst">$&#123;chatMember.user.username&#125;</span>\nStatus: <span class="subst">$&#123;chatMember.status&#125;</span>`</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Failed to retrieve user information: &quot;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (photoUrl) &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">`Avatar URL: <span class="subst">$&#123;photoUrl&#125;</span>`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(<span class="string">&quot;Failed to retrieve your avatar.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> ctx.<span class="title function_">reply</span>(userInfo || <span class="string">&quot;Failed to retrieve your user information.&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start the bot</span></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Run-the-Code-and-Observe-the-Output"><a href="#Run-the-Code-and-Observe-the-Output" class="headerlink" title="Run the Code and Observe the Output"></a>Run the Code and Observe the Output</h3><p>Execute the following command to run the code:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deno run --allow-net your-script.ts</span><br></pre></td></tr></table></figure>

<p>Go back to the conversation with your bot and send <code>/start</code>. You will see the bot returning the user login information and avatar, as shown below:<br><img data-src="https://pic.imgdb.cn/item/6682669ad9c307b7e99b11e9.png" alt="å¯¹è¯æ¡†">;</p>
]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>Retrieve User Messages from Telegram and Report to Server</title>
    <url>/75509731en.html</url>
    <content><![CDATA[<p>Recently, after launching a Telegram mini app, we noticed some abnormal user behavior, but we couldnâ€™t determine why. So, we added this feature to see if users were sending feedback messages to the bot that we were not receiving.</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="Concept"><a href="#Concept" class="headerlink" title="Concept"></a>Concept</h3><p>The bot receives messages sent by users and then forwards them to the server, achieving our goal.</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code:"></a>Code:</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bot</span>, <span class="title class_">InlineKeyboard</span> &#125; <span class="keyword">from</span> <span class="string">&quot;https://deno.land/x/grammy@v1.25.0/mod.ts&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;&#x27;</span>;  <span class="comment">// Your bot token</span></span><br><span class="line"><span class="keyword">const</span> bot = <span class="keyword">new</span> <span class="title class_">Bot</span>(<span class="variable constant_">TOKEN</span>);</span><br><span class="line"><span class="keyword">const</span> serverUrl = <span class="string">&quot;&quot;</span>; <span class="comment">// Your server address</span></span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">on</span>(<span class="string">&quot;message:text&quot;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> messageText = ctx.<span class="property">message</span>.<span class="property">text</span>;</span><br><span class="line">  <span class="keyword">const</span> chatId = ctx.<span class="property">message</span>.<span class="property">chat</span>.<span class="property">id</span>;</span><br><span class="line">  <span class="keyword">const</span> firstName = ctx.<span class="property">update</span>.<span class="property">message</span>.<span class="property">from</span>.<span class="property">first_name</span>;</span><br><span class="line">  <span class="keyword">const</span> eventtime = (<span class="keyword">await</span> <span class="title function_">getCurrentTime</span>()).<span class="title function_">toString</span>();</span><br><span class="line">  <span class="keyword">const</span> payload = &#123;</span><br><span class="line">      <span class="attr">uid</span>: chatId,</span><br><span class="line">      <span class="attr">message</span>: messageText,</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Send data to the server</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(serverUrl, &#123;</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(payload),</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`HTTP error! status: <span class="subst">$&#123;response.status&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Parse server response</span></span><br><span class="line">    <span class="keyword">const</span> responseData = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server response:&quot;</span>, responseData);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Failed to send message to server:&quot;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start the bot</span></span><br><span class="line">bot.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>telegram</category>
        <category>mini APP</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>telegram</tag>
        <tag>mini APP</tag>
        <tag>Game</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos2dx-lua tolua</title>
    <url>/cf9e43b4.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="tolua-cast-å¯¹è±¡-ç±»å‹å-å¼ºåˆ¶ç±»å‹è½¬æ¢"><a href="#tolua-cast-å¯¹è±¡-ç±»å‹å-å¼ºåˆ¶ç±»å‹è½¬æ¢" class="headerlink" title="tolua.cast(å¯¹è±¡,ç±»å‹å)å¼ºåˆ¶ç±»å‹è½¬æ¢"></a>tolua.cast(å¯¹è±¡,ç±»å‹å)å¼ºåˆ¶ç±»å‹è½¬æ¢</h2><p><code>layer -&gt; node</code></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">tolua.cast(layer,<span class="string">&quot;cc.Node&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬ç”¨äºåœ¨æ–¹æ³•aå®šä¹‰ä¸€ä¸ªç²¾çµï¼Œè®¾ç½®tagä¸º2<br>ä½†åœ¨æ–¹æ³•bå–å‡ºæ¥ï¼Œå®ƒå´ä¸æ˜¯ç²¾çµï¼Œæ²¡æœ‰ç²¾çµçš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚<br>è¿™ä¸ªæ—¶å€™è¦å¼ºåˆ¶è½¬æ¢ç±»å‹äº†ã€‚</p>
<h2 id="tolua-type-ç±»å‹å"><a href="#tolua-type-ç±»å‹å" class="headerlink" title="tolua.type(ç±»å‹å)"></a>tolua.type(ç±»å‹å)</h2><p>è¿”å›ä¸€ä¸ªC++å¯¹è±¡çš„ç±»å‹æè¿°å­—ç¬¦ä¸²</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> node = display.newNode()</span><br><span class="line"><span class="built_in">print</span>(tolua.<span class="built_in">type</span>(node)) <span class="comment">-- è¾“å‡ºCCNode</span></span><br></pre></td></tr></table></figure>


<h2 id="tolua-isnull"><a href="#tolua-isnull" class="headerlink" title="tolua.isnull"></a>tolua.isnull</h2><p>æ£€æŸ¥æŒ‡å®šLuaå€¼ä¸­ä¿å­˜çš„C++å¯¹è±¡æ˜¯å¦å·²ç»è¢«åˆ é™¤ã€‚<br>æˆ‘ä»¬å°†åœ¨C++å¯¹è±¡ä¿å­˜åˆ°Luaå€¼åï¼Œåªè¦è¿˜æœ‰Luaä»£ç åœ¨ä½¿ç”¨è¿™äº›å€¼ï¼Œé‚£ä¹ˆå³ä½¿ C++ å¯¹è±¡å·²ç»è¢«åˆ é™¤äº†ï¼Œä½† Lua å€¼ä»ç„¶ä¼šå­˜åœ¨ã€‚å¦‚æœæ­¤æ—¶è°ƒç”¨ Lua å€¼çš„æ–¹æ³•å°±ä¼šå‡ºé”™ã€‚</p>
<p>å› æ­¤å¯ä»¥ç”¨ tolua.isnull() æ£€æŸ¥ Lua å€¼ä¸­çš„ C++ å¯¹è±¡æ˜¯å¦å·²ç»è¢«åˆ é™¤ã€‚</p>
<a href="https://www.jianshu.com/p/9e1fc2015aa2" title="" target="">åŸæ–‡é“¾æ¥ ,</a>]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>Cocos2dx</tag>
        <tag>tolua</tag>
      </tags>
  </entry>
  <entry>
    <title>The font size is too big to be fitted into texture atlas.</title>
    <url>/a6d8b8bb.html</url>
    <content><![CDATA[<p>ä»Šå¤©åœ¨åŒäº‹åœ¨ç”¨æµè§ˆå™¨ä½“éªŒæˆ‘ä»¬æ¸¸æˆçš„æ—¶å€™ï¼Œçªç„¶å‡ºç°äº†ä¸‹é¢é—®é¢˜â€The font size is too big to be fitted into texture atlas. Please switch to other label cache modes or choose a smaller font sizeâ€,å¦‚ä¸‹å›¾ï¼š</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p><img data-src="https://pic.imgdb.cn/item/666becc7d9c307b7e9869ffb.png" alt="ç¤ºæ„å›¾">  </p>
<p>åœ¨Cocos Creator ä¸­ï¼Œå¦‚æœé€‰æ‹©<code>Bitmap</code>æ¨¡å¼ï¼Œå­—ä½“å¤§å°çš„æœ€å¤§é™åˆ¶å–å†³äºçº¹ç†å›¾é›†çš„å¤§å°ä»¥åŠå­—ç¬¦æ•°é‡å’Œå¤æ‚åº¦ã€‚Cocos Creator æ²¡æœ‰æ˜ç¡®è§„å®šä¸€ä¸ªç»Ÿä¸€çš„æœ€å¤§å­—ä½“å¤§å°ï¼Œå› ä¸ºè¿™ä¼šå—åˆ°å…·ä½“é¡¹ç›®çš„çº¹ç†å›¾é›†é…ç½®ã€å­—ç¬¦é›†å†…å®¹å’Œå…¶ä»–å›¾å½¢èµ„æºçš„å½±å“ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœä½¿ç”¨ Bitmap æ¨¡å¼ï¼Œå­—ä½“å¤§å°å»ºè®®ä¿æŒåœ¨åˆç†èŒƒå›´å†…ï¼Œä»¥é¿å…è¶…å‡ºçº¹ç†å›¾é›†çš„å®¹é‡ã€‚</p>
<h3 id="è¯•éªŒä¸åŒå­—ä½“å¤§å°"><a href="#è¯•éªŒä¸åŒå­—ä½“å¤§å°" class="headerlink" title="è¯•éªŒä¸åŒå­—ä½“å¤§å°"></a>è¯•éªŒä¸åŒå­—ä½“å¤§å°</h3><p>é€šå¸¸ï¼Œå­—ä½“å¤§å°åœ¨ <code>20</code> åˆ° <code>40</code> ä¹‹é—´æ˜¯æ¯”è¾ƒå®‰å…¨çš„èŒƒå›´ã€‚å…·ä½“å¯æ¥å—çš„æœ€å¤§å­—ä½“å¤§å°è¿˜éœ€è¦æ ¹æ®é¡¹ç›®çš„å®é™…éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚</p>
<h3 id="æŸ¥çœ‹çº¹ç†å›¾é›†çš„å¤§å°"><a href="#æŸ¥çœ‹çº¹ç†å›¾é›†çš„å¤§å°" class="headerlink" title="æŸ¥çœ‹çº¹ç†å›¾é›†çš„å¤§å°"></a>æŸ¥çœ‹çº¹ç†å›¾é›†çš„å¤§å°</h3><p>ç¡®ä¿ä½ é¡¹ç›®ä¸­çš„çº¹ç†å›¾é›†å¤§å°è¶³å¤Ÿå¤§ï¼Œä»¥å®¹çº³æ‰€éœ€çš„å­—ä½“å’Œå…¶ä»–èµ„æºã€‚Cocos Creator é»˜è®¤çš„æœ€å¤§çº¹ç†å›¾é›†å¤§å°é€šå¸¸ä¸º 2048x2048 åƒç´ ã€‚å¦‚æœä½ çš„å­—ä½“å¤§å°è¿‡å¤§ï¼Œå¯èƒ½ä¼šè¶…å‡ºè¿™ä¸ªé™åˆ¶ã€‚</p>
<h3 id="è°ƒæ•´å­—ç¬¦é›†"><a href="#è°ƒæ•´å­—ç¬¦é›†" class="headerlink" title="è°ƒæ•´å­—ç¬¦é›†"></a>è°ƒæ•´å­—ç¬¦é›†</h3><p>å¦‚æœä½ çš„æ ‡ç­¾åªåŒ…å«å°‘é‡å­—ç¬¦ï¼Œå¯ä»¥å°è¯•å‡å°‘å­—ç¬¦é›†çš„æ•°é‡ï¼Œä»è€Œä½¿æ›´å¤§çš„å­—ä½“èƒ½å¤Ÿé€‚åº”çº¹ç†å›¾é›†ã€‚</p>
<h3 id="å®é™…æ“ä½œæ­¥éª¤"><a href="#å®é™…æ“ä½œæ­¥éª¤" class="headerlink" title="å®é™…æ“ä½œæ­¥éª¤"></a>å®é™…æ“ä½œæ­¥éª¤</h3><p>è®¾ç½® <code>Bitmap</code> æ¨¡å¼<br>æ‰“å¼€ Cocos Creator é¡¹ç›®ã€‚<br>é€‰æ‹©è¦è°ƒæ•´çš„æ ‡ç­¾èŠ‚ç‚¹ã€‚<br>åœ¨å³ä¾§çš„å±æ€§é¢æ¿ä¸­ï¼Œæ‰¾åˆ° <code>Cache Mode</code> å±æ€§ã€‚<br>å°† <code>Cache Mode</code> æ›´æ”¹ä¸º <code>Bitmap</code>ã€‚<br>é€æ­¥æµ‹è¯•å­—ä½“å¤§å°<br>è®¾ç½®å­—ä½“å¤§å°ä¸ºä¸€ä¸ªè¾ƒå°çš„å€¼ï¼Œä¾‹å¦‚ 20ã€‚<br>è¿è¡Œé¡¹ç›®å¹¶è§‚å¯Ÿæ•ˆæœï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œé€æ­¥å¢åŠ å­—ä½“å¤§å°ã€‚<br>å½“å‡ºç°é”™è¯¯æˆ–è­¦å‘Šä¿¡æ¯æ—¶ï¼Œå°†å­—ä½“å¤§å°è°ƒæ•´åˆ°æœ€åä¸€ä¸ªæ²¡æœ‰é—®é¢˜çš„å€¼ã€‚</p>
<blockquote>
<p>è¿™é‡Œå‡ºç°è­¦å‘Šæˆ–è€…é”™è¯¯å¹¶ä¸€å®šæ¯æ¬¡éƒ½ä¼šå‡ºç°ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œçš„å­—ä½“å¤§å°æ˜¯<code>56</code>ï¼Œä½†æ˜¯è¿™ç§æƒ…å†µåªæœ‰æŸç§æç«¯æƒ…å†µä¸‹æ‰ä¼šå‡ºç°ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
        <tag>Label</tag>
        <tag>font</tag>
      </tags>
  </entry>
  <entry>
    <title>tsæ•°å­—å­—ç¬¦ä¸²å»æ‰åé¢çš„0</title>
    <url>/67c55f29.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">removeTrailingZeros</span>(<span class="params">numberString: <span class="built_in">string</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> trimmedString = numberString.<span class="title function_">trim</span>(); <span class="comment">// å»é™¤é¦–å°¾ç©ºæ ¼</span></span><br><span class="line">  <span class="keyword">const</span> decimalIndex = trimmedString.<span class="title function_">indexOf</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (decimalIndex !== -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> endIndex = trimmedString.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (trimmedString[endIndex] === <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">      endIndex--;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (trimmedString[endIndex] === <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">      endIndex--; <span class="comment">// å¦‚æœå°æ•°ç‚¹åé¢å…¨æ˜¯é›¶ï¼Œä¹Ÿå»æ‰å°æ•°ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> trimmedString.<span class="title function_">slice</span>(<span class="number">0</span>, endIndex + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> trimmedString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ç”¨æ³•</span></span><br><span class="line"><span class="keyword">const</span> numberString1 = <span class="string">&#x27;3.1400&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> result1 = <span class="title function_">removeTrailingZeros</span>(numberString1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result1);  <span class="comment">// è¾“å‡º: &quot;3.14&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numberString2 = <span class="string">&#x27;10.00&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> result2 = <span class="title function_">removeTrailingZeros</span>(numberString2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2);  <span class="comment">// è¾“å‡º: &quot;10&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numberString3 = <span class="string">&#x27;5.50&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> result3 = <span class="title function_">removeTrailingZeros</span>(numberString3);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result3);  <span class="comment">// è¾“å‡º: &quot;5.5&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>typeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>tsæ—¶é—´æˆ³æ ¼å¼è½¬æ¢</title>
    <url>/db763ac0.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å·¥ä½œä¸­æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œåœ¨å±•ç¤ºç©å®¶æˆ˜ç»©çš„æ—¶å€™ï¼Œé™„ä¸Šæ—¶é—´èŠ‚ç‚¹ï¼Œä¸”æ—¶é—´èŠ‚ç‚¹çš„æ ¼å¼å¦‚ä¸‹ï¼š<br><code>2023-11-29 10:08:04</code><br>ä½†æ˜¯æœåŠ¡å™¨åç«¯ä¼ è¿‡æ¥çš„æ—¶é—´æˆ³ä¸º<code>2023-11-29T10:08:04.33+08:00</code>,ç”±äºæ˜¾ç¤ºçš„æ ¼å¼ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å°±éœ€è¦è¿›è¡Œç‰¹æ®Šçš„å¤„ç†ã€‚ä»£ç å¦‚ä¸‹</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> timestamp = <span class="string">&quot;2023-11-29T10:08:04.33+08:00&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(timestamp);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> year = date.<span class="title function_">getFullYear</span>();</span><br><span class="line"><span class="keyword">const</span> month = (date.<span class="title function_">getMonth</span>() + <span class="number">1</span>).<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> day = date.<span class="title function_">getDate</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> hours = date.<span class="title function_">getHours</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> minutes = date.<span class="title function_">getMinutes</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> seconds = date.<span class="title function_">getSeconds</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> formattedDate = <span class="string">`<span class="subst">$&#123;year&#125;</span>-<span class="subst">$&#123;month&#125;</span>-<span class="subst">$&#123;day&#125;</span> <span class="subst">$&#123;hours&#125;</span>:<span class="subst">$&#123;minutes&#125;</span>:<span class="subst">$&#123;seconds&#125;</span>`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(formattedDate);</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œåªæ˜¯ä»‹ç»æˆ‘ç”¨çš„ä¸€ç§æ–¹æ³•ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„æ–¹æ³•å¯ä»¥è¯„è®ºäº¤æµ</p>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>quick Cocos</tag>
        <tag>ts</tag>
      </tags>
  </entry>
  <entry>
    <title>vsCodeè°ƒè¯•quick-Cocos2dx</title>
    <url>/485b0e34.html</url>
    <content><![CDATA[<p>å¥½ä¹…æ²¡æœ‰åœ¨windowsä¸Šæ­å»ºCocos2dxçš„å¼€å‘ç¯å¢ƒäº†ï¼Œä»Šå¤©åœ¨æ­å»ºçš„è¿‡ç¨‹ä¸­å°±é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ã€‚ä½¿ç”¨vsCodeæ— æ³•è°ƒè¯•Cocoså·¥ç¨‹ã€‚ä¸‹é¢å°±è¯´ä¸‹æˆ‘çš„åšæ³•å§ã€‚å‰é¢çš„æ­¥éª¤ç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œä¸‹é¢ä¸»è¦æ˜¯ä»‹ç»vsCodeçš„é…ç½®ï¼ˆè¿™é‡Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šï¼Œä½†æ˜¯å¾ˆå¤šæ–¹æ³•è¡Œä¸é€šï¼Œä½œè€…åªæ˜¯è®°å½•è‡ªå·±çš„åšæ³•ï¼Œä»¥åå¦‚æœå†é‡åˆ°è¿™ç§é—®é¢˜ä¾¿èƒ½å¾ˆå¿«çš„è§£å†³ï¼‰</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h4 id="1ã€å®‰è£…æ’ä»¶"><a href="#1ã€å®‰è£…æ’ä»¶" class="headerlink" title="1ã€å®‰è£…æ’ä»¶"></a>1ã€å®‰è£…æ’ä»¶</h4><p>ä½œè€…è¿™é‡Œå®‰è£…çš„æ˜¯â€luaide-liteâ€æ’ä»¶ï¼Œè¿˜æœ‰å…¶ä»–çš„æ’ä»¶ä¹Ÿå¯ä»¥ç”¨ï¼Œä¸åŒçš„æ’ä»¶é…ç½®ç¨å¾®æœ‰ç‚¹ä¸åŒã€‚<br><img data-src="https://s1.ax1x.com/2022/11/01/x7LPOO.png" alt="æ’ä»¶å›¾" /><br>æ’ä»¶é¡µé¢æœ‰çº¤ç»†çš„ä»‹ç»ï¼Œå¯ä»¥ä»”ç»†çœ‹çœ‹ã€‚</p>
<h4 id="2ã€æ·»åŠ é…ç½®æ–‡ä»¶"><a href="#2ã€æ·»åŠ é…ç½®æ–‡ä»¶" class="headerlink" title="2ã€æ·»åŠ é…ç½®æ–‡ä»¶"></a>2ã€æ·»åŠ é…ç½®æ–‡ä»¶</h4><p>ç‚¹å‡»è¿è¡Œï¼Œä¾¿ä¼šæç¤ºæ·»åŠ <code>launch.json</code>é…ç½®æ–‡ä»¶ã€‚è¿™é‡Œæ³¨æ„ï¼Œåªéœ€è¦æ”¹<code>Cocos-launch</code>è¿™éƒ¨åˆ†å°±è¡Œï¼Œå…¶ä»–çš„éƒ½å¯ä»¥åˆ é™¤æ‰ã€‚<br>è¿™é‡Œæœ‰ä¸ªâ€œå‘â€ï¼Œå°±æ˜¯å…³äº<code>exePath</code>çš„è·¯å¾„é…ç½®ï¼Œç½‘ä¸Šå¾ˆå¤šäººè¯´æ˜¯é…ç½®<code>.exe</code>æ–‡ä»¶çš„è·¯å¾„ï¼Œä½œè€…è¯•äº†å¾ˆå¤šæ¬¡éƒ½æ²¡æœ‰æˆåŠŸã€‚æœ€åå°†è¿™é‡Œé…ç½®æˆäº†<code>player3</code>çš„æ‰§è¡Œè·¯å¾„ï¼Œä¾¿å¯æ­£å¸¸è¿è¡Œã€‚å¦‚å›¾<br><img data-src="https://s1.ax1x.com/2022/11/01/x7Lk0e.png" alt="è·¯å¾„é…ç½®å›¾" /></p>
<p>è¿™é‡Œè¿™æ ·é…ç½®å°±å¯ä»¥è¿è¡Œäº†ï¼Œä½†æ˜¯è¿˜ä¸èƒ½è°ƒè¯•</p>
<h4 id="3ã€æ·»åŠ luaDebug-luaè°ƒè¯•æ–‡ä»¶"><a href="#3ã€æ·»åŠ luaDebug-luaè°ƒè¯•æ–‡ä»¶" class="headerlink" title="3ã€æ·»åŠ luaDebug.luaè°ƒè¯•æ–‡ä»¶"></a>3ã€æ·»åŠ luaDebug.luaè°ƒè¯•æ–‡ä»¶</h4><p>åœ¨<code>src</code>ç›®å½•ä¸‹æ·»åŠ <code>luaDebug.lua</code>æ–‡ä»¶<br><img data-src="https://s1.ax1x.com/2022/11/01/x7LC6K.png" alt="luaDebug.lua" /></p>
<p><a href="https://github.com/lengmo714/lengmo714.github.io/blob/master/download/debug.lua">lueDebug.luaä»£ç é“¾æ¥</a></p>
<h4 id="4ã€ä¿®æ”¹main-luaæ–‡ä»¶"><a href="#4ã€ä¿®æ”¹main-luaæ–‡ä»¶" class="headerlink" title="4ã€ä¿®æ”¹main.luaæ–‡ä»¶"></a>4ã€ä¿®æ”¹main.luaæ–‡ä»¶</h4><p>åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œä»£ç </p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> breakSocketHandle, debugXpCall = <span class="built_in">require</span>(<span class="string">&quot;LuaDebug&quot;</span>)(<span class="string">&quot;localhost&quot;</span>, <span class="number">7003</span>)</span><br><span class="line">cc.Director:getInstance():getScheduler():scheduleScriptFunc(breakSocketHandle, <span class="number">0.3</span>, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure>
<img data-src="https://s1.ax1x.com/2022/11/01/x7LC6K.png"/>


<p>åšå®Œè¿™äº›ï¼Œä½ å°±å¯ä»¥å¼€å§‹æ„‰å¿«çš„æ¸¸æˆå¼€å‘ä¹‹è·¯äº†å‘€~</p>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cocos2dx</tag>
        <tag>vsCode</tag>
      </tags>
  </entry>
  <entry>
    <title>windowsç”µè„‘æ¸…é™¤ç³»ç»Ÿåƒåœ¾</title>
    <url>/628b7aeb.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å¤§å®¶åœ¨ä½¿ç”¨windowsçš„æ—¶å€™ï¼Œç»å¸¸ä¼šå‘ç°ç”¨ç€ç”¨ç€Cç›˜çš„å®¹é‡è¶Šæ¥è¶Šå°ï¼Œå¾ˆå¤šç³»ç»Ÿåƒåœ¾éƒ½ä¸çŸ¥é“æ€ä¹ˆåˆ é™¤ã€‚ä¸‹é¢ä»‹ç»ä¸€ç§æ–¹æ³•ï¼š</p>
<ol>
<li>å°†ä¸‹é¢ä»£ç å¤åˆ¶åœ¨ä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ä¸­ï¼ˆä»»ä½•ä¸€æ¬¾ä»£ç ç¼–è¾‘å™¨éƒ½å¯ä»¥ï¼‰</li>
<li>ä¿å­˜ï¼Œå¹¶å°†æ–‡ä»¶åç¼€æ”¹ä¸º<code>.bat</code>ï¼ŒåŒå‡»è¿è¡Œå³å¯<blockquote>
<p>æ³¨æ„ï¼šå¾ˆå¤šäººåœ¨ä½¿ç”¨çš„æ—¶å€™æ²¡æœ‰æ˜¾ç¤ºæ–‡ä»¶åç¼€ï¼Œè¿™é‡Œéœ€è¦å…ˆè®¾ç½®ç”µè„‘æ˜¾ç¤ºæ–‡ä»¶åç¼€</p>
</blockquote>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@echo off </span><br><span class="line">echo æ­£åœ¨æ¸…é™¤ç³»ç»Ÿåƒåœ¾æ–‡ä»¶ï¼Œè¯·ç¨ç­‰...... </span><br><span class="line">del /f /s /q %systemdrive%\*.tmp </span><br><span class="line">del /f /s /q %systemdrive%\*._mp </span><br><span class="line">del /f /s /q %systemdrive%\*.log </span><br><span class="line">del /f /s /q %systemdrive%\*.gid </span><br><span class="line">del /f /s /q %systemdrive%\*.chk </span><br><span class="line">del /f /s /q %systemdrive%\*.old </span><br><span class="line">del /f /s /q %systemdrive%\recycled\*.* </span><br><span class="line">del /f /s /q %windir%\*.bak </span><br><span class="line">del /f /s /q %windir%\prefetch\*.* </span><br><span class="line">rd /s /q %windir%\temp &amp; md %windir%\temp </span><br><span class="line">del /f /q %userprofile%\cookies\*.* </span><br><span class="line">del /f /q %userprofile%\recent\*.* </span><br><span class="line">del /f /s /q &quot;%userprofile%\Local Settings\Temporary Internet Files\*.*&quot; </span><br><span class="line">del /f /s /q &quot;%userprofile%\Local Settings\Temp\*.*&quot; </span><br><span class="line">del /f /s /q &quot;%userprofile%\recent\*.*&quot; </span><br><span class="line">echo æ¸…é™¤ç³»ç»ŸLJå®Œæˆï¼ </span><br><span class="line">echo. &amp; pause </span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ç”µè„‘ä½¿ç”¨æŠ€å·§</category>
      </categories>
      <tags>
        <tag>ç”µè„‘ä½¿ç”¨æŠ€å·§</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Cè¯­è¨€å¤§å­¦ç”Ÿè€ƒè¯•å…¨é¢é¢˜åº“2</title>
    <url>/552db6f9.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="åˆ†å‰²è‡ªç„¶æ•°æ¸¸æˆ"><a href="#åˆ†å‰²è‡ªç„¶æ•°æ¸¸æˆ" class="headerlink" title="åˆ†å‰²è‡ªç„¶æ•°æ¸¸æˆ"></a>åˆ†å‰²è‡ªç„¶æ•°æ¸¸æˆ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   å‘¨æœ«å¼ºå¼ºåœ¨å®¶åšä½œä¸šï¼Œé‡åˆ°äº†è¿™æ ·ä¸€é“é¢˜ï¼Œæ‰¾å‡ºNä½ï¼ˆN&lt;8ï¼‰çš„è‡ªç„¶æ•°ä¸­å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„æ•°ï¼šå¦‚æœå°†è¿™ä¸ªæ•°å­—ä»ä¸­é—´å¼€å§‹åˆ†å‰²æˆä¸¤éƒ¨åˆ†ï¼Œç„¶åå°†è¿™ä¸¤éƒ¨åˆ†ç›¸åŠ ï¼Œæ‰€å¾—åˆ°çš„å’Œçš„å¹³æ–¹ï¼Œç­‰äºåŸæ¥é‚£ä¸ªæ•°çš„(å¥‡æ•°çš„æ—¶å€™ï¼Œä¸­é—´çš„é‚£ä¸ªæ•°å­—é å‰)ã€‚ä»é”®ç›˜è¾“å…¥Nï¼Œç›´æ¥åœ¨å±å¹•ä¸Šè¾“å‡ºç­”æ¡ˆã€‚æ‰¾ä¸åˆ°æ»¡è¶³è¦æ±‚çš„æ•°æ—¶å€™ï¼Œè¾“å‡ºï¼‚NO FOUNDï¼‚ã€‚å¼ºå¼ºæƒ³äº†è®¸ä¹…ä¹Ÿæ²¡æƒ³å‡ºæ¥ï¼Œæƒ³è¯·ä½ æ¥å¸®å¿™ï¼Œé‚£ä¹ˆä½ è¯¥å¦‚ä½•æ¥å¸®åŠ©ä»–å‘¢ï¼Ÿ<br>   <span id="more"></span><br><strong>è¾“å…¥æè¿°ï¼š</strong><br>è¾“å…¥N<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>ç¬¦åˆæ¡ä»¶çš„Nä½æ•´æ•°<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>4</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>2025<br>3025<br>9801</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i,j,x1,x2,sum=<span class="number">0</span>,min,max,k;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">10</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    min=<span class="built_in">pow</span>(<span class="number">10</span>,n<span class="number">-1</span>);<span class="comment">//åˆ’åˆ†æ•´æ•°æ®µã€‚</span></span><br><span class="line">    max=<span class="built_in">pow</span>(<span class="number">10</span>,n);</span><br><span class="line">    <span class="keyword">if</span>(n!=<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=min;i&lt;max;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            k=<span class="built_in">pow</span>(<span class="number">10</span>,n/<span class="number">2</span>);<span class="comment">//åˆ’åˆ†åˆ†å‰²æ®µã€‚</span></span><br><span class="line">            x1=i%k;<span class="comment">//å³è¾¹çš„æ•°ã€‚</span></span><br><span class="line">            x2=i/k;<span class="comment">//å·¦è¾¹çš„æ•°ã€‚</span></span><br><span class="line">            <span class="keyword">if</span>((x1+x2)*(x1+x2)==i)</span><br><span class="line">            &#123;</span><br><span class="line">                a[sum]=i;</span><br><span class="line">                sum++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(sum==<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;NO FOUND&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;sum<span class="number">-1</span>;j++)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[j]);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[sum<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;NO FOUND&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="ä¹ä¹æ‘˜è‹¹æœ"><a href="#ä¹ä¹æ‘˜è‹¹æœ" class="headerlink" title="ä¹ä¹æ‘˜è‹¹æœ"></a>ä¹ä¹æ‘˜è‹¹æœ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>      ä¸€å¤©ä¹ä¹å»æœå›­ç©ï¼Œå‘ç°ä¸€æ£µè‹¹æœæ ‘ä¸Šç»“å‡º10ä¸ªè‹¹æœã€‚ä¹ä¹è·‘å»æ‘˜è‹¹æœã€‚ä¹ä¹æ‰¾åˆ°ä¸€ä¸ª30å˜ç±³é«˜çš„æ¿å‡³ï¼Œå½“å¥¹ä¸èƒ½ç›´æ¥ç”¨æ‰‹æ‘˜åˆ°è‹¹æœçš„æ—¶å€™ï¼Œå°±ä¼šè¸©åˆ°æ¿å‡³ä¸Šå†è¯•è¯•ã€‚ ç°åœ¨å·²çŸ¥10ä¸ªè‹¹æœåˆ°åœ°é¢çš„é«˜åº¦ï¼Œä»¥åŠä¹ä¹æŠŠæ‰‹ä¼¸ç›´çš„æ—¶å€™èƒ½å¤Ÿè¾¾åˆ°çš„æœ€å¤§é«˜åº¦ï¼Œè¯·å¸®ä¹ä¹ç®—ä¸€ä¸‹å¥¹èƒ½å¤Ÿæ‘˜åˆ°çš„è‹¹æœçš„æ•°ç›®ã€‚å‡è®¾å¥¹ç¢°åˆ°è‹¹æœï¼Œè‹¹æœå°±ä¼šæ‰ä¸‹æ¥ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…æ‹¬ä¸¤è¡Œæ•°æ®ã€‚ç¬¬ä¸€è¡ŒåŒ…å«10ä¸ª100åˆ°200ä¹‹é—´ï¼ˆåŒ…æ‹¬100å’Œ200ï¼‰çš„æ•´æ•°ï¼ˆä»¥å˜ç±³ä¸ºå•ä½ï¼‰åˆ†åˆ«è¡¨ç¤º10ä¸ªè‹¹æœåˆ°åœ°é¢çš„é«˜åº¦ï¼Œä¸¤ä¸ªç›¸é‚»çš„æ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚<br>ç¬¬äºŒè¡ŒåªåŒ…æ‹¬ä¸€ä¸ª100åˆ°120ä¹‹é—´ï¼ˆåŒ…å«100å’Œ120ï¼‰ çš„æ•´æ•°ï¼ˆä»¥å˜ç±³ä¸ºå•ä½ï¼‰ï¼Œè¡¨ç¤ºä¹ä¹æŠŠæ‰‹ä¼¸ç›´çš„æ—¶å€™èƒ½å¤Ÿè¾¾åˆ°çš„æœ€å¤§é«˜åº¦ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºåŒ…æ‹¬ä¸€è¡Œï¼Œè¿™ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¹ä¹èƒ½å¤Ÿæ‘˜åˆ°çš„æœçš„æ•°ç›®ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>100 200 150 140 129 134 167 198 200 111<br>110</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>5</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">10</span>],i,sum=<span class="number">0</span>,n;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]&lt;=n+<span class="number">30</span>)</span><br><span class="line">            sum++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="ä¸é«˜å…´çš„æ´¥æ´¥"><a href="#ä¸é«˜å…´çš„æ´¥æ´¥" class="headerlink" title="ä¸é«˜å…´çš„æ´¥æ´¥"></a>ä¸é«˜å…´çš„æ´¥æ´¥</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>       æ´¥æ´¥ä¸Šåˆä¸­äº†ã€‚å¦ˆå¦ˆè®¤ä¸ºæ´¥æ´¥åº”è¯¥æ›´åŠ ç”¨åŠŸå­¦ä¹ ï¼Œæ‰€ä»¥æ´¥æ´¥é™¤äº†ä¸Šå­¦ä¹‹å¤–ï¼Œè¿˜è¦å‚åŠ å¦ˆå¦ˆä¸ºå¥¹æŠ¥åçš„å„ç§‘å¤ä¹ ç­ã€‚å¦å¤–æ¯å‘¨å¦ˆå¦ˆè¿˜ä¼šé€å¥¹å»å­¦ä¹ æœ—è¯µã€èˆè¹ˆå’Œé’¢ç´ã€‚ä½†æ˜¯æ´¥æ´¥å¦‚æœä¸€å¤©ä¸Šè¯¾è¶…è¿‡å…«ä¸ªå°æ—¶å°±ä¼šä¸é«˜å…´ï¼Œè€Œä¸”ä¸Šå¾—è¶Šä¹…å°±ä¼šè¶Šä¸é«˜å…´ã€‚å‡è®¾æ´¥æ´¥ä¸ä¼šå› ä¸ºå…¶å®ƒäº‹ä¸é«˜å…´ï¼Œå¹¶ä¸”å¥¹çš„ä¸é«˜å…´ä¸ä¼šæŒç»­åˆ°ç¬¬äºŒå¤©ã€‚è¯·ä½ å¸®å¿™æ£€æŸ¥ä¸€ä¸‹æ´¥æ´¥ä¸‹å‘¨çš„æ—¥ç¨‹å®‰æ’ï¼Œçœ‹çœ‹ä¸‹å‘¨å¥¹ä¼šä¸ä¼šä¸é«˜å…´ï¼›å¦‚æœä¼šçš„è¯ï¼Œå“ªå¤©æœ€ä¸é«˜å…´ã€‚(æ´¥æ´¥ä¸€å¤©ä¸Šè¯¾çš„æ—¶é—´åº”åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šåœ¨å­¦æ ¡çš„æ—¶é—´å’Œåœ¨å¤ä¹ ç­çš„æ—¶é—´ï¼Œè¿™ä¸¤ä¸ªæ—¶é—´ç›¸åŠ å°±æ˜¯æ´¥æ´¥ä¸€å¤©ä¸Šè¯¾çš„æ—¶é—´ã€‚å¦‚æœè¿™ä¸ªæ—¶é—´å¤§äºå…«å°æ—¶æ´¥æ´¥å°±ä¼šä¸é«˜å…´ã€‚)<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>        è¾“å…¥åŒ…æ‹¬ä¸ƒè¡Œæ•°æ®ï¼Œåˆ†åˆ«è¡¨ç¤ºå‘¨ä¸€åˆ°å‘¨æ—¥çš„æ—¥ç¨‹å®‰æ’ã€‚æ¯è¡ŒåŒ…æ‹¬ä¸¤ä¸ªå°äº10çš„éè´Ÿæ•´æ•°ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºæ´¥æ´¥åœ¨å­¦æ ¡ä¸Šè¯¾çš„æ—¶é—´å’Œå¦ˆå¦ˆå®‰æ’å¥¹ä¸Šè¯¾çš„æ—¶é—´<br><strong>è¾“å‡ºæè¿°ï¼š</strong><br>   è¾“å‡ºåŒ…æ‹¬ä¸€è¡Œï¼Œè¿™ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªæ•°å­—ã€‚å¦‚æœä¸ä¼šä¸é«˜å…´åˆ™è¾“å‡º0ï¼Œå¦‚æœä¼šåˆ™è¾“å‡ºæœ€ä¸é«˜å…´çš„æ˜¯å‘¨å‡ ï¼ˆç”¨1, 2, 3, 4, 5, 6, 7åˆ†åˆ«è¡¨ç¤ºå‘¨ä¸€ï¼Œå‘¨äºŒï¼Œå‘¨ä¸‰ï¼Œå‘¨å››ï¼Œå‘¨äº”ï¼Œå‘¨å…­ï¼Œå‘¨æ—¥ï¼‰ã€‚å¦‚æœæœ‰ä¸¤å¤©æˆ–ä¸¤å¤©ä»¥ä¸Šä¸é«˜å…´çš„ç¨‹åº¦ç›¸å½“ï¼Œåˆ™è¾“å‡ºæ—¶é—´æœ€é å‰çš„ä¸€å¤©ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5  3<br>6  2<br>7  2<br>5  3<br>5  4<br>0  4<br>0  6</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>3</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a,b;</span><br><span class="line">    <span class="type">int</span> max,k,i;</span><br><span class="line">    max=<span class="number">8</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">        <span class="keyword">if</span>(a+b&gt;max)</span><br><span class="line">        &#123;</span><br><span class="line">            max=a+b;</span><br><span class="line">            k=i+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(max==<span class="number">8</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,k);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æœ€ä½ä½ï¼ˆäºŒè¿›åˆ¶çš„è½¬æ¢ï¼‰"><a href="#æœ€ä½ä½ï¼ˆäºŒè¿›åˆ¶çš„è½¬æ¢ï¼‰" class="headerlink" title="æœ€ä½ä½ï¼ˆäºŒè¿›åˆ¶çš„è½¬æ¢ï¼‰"></a>æœ€ä½ä½ï¼ˆäºŒè¿›åˆ¶çš„è½¬æ¢ï¼‰</h3><p> <strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ä»»æ„ä¸€ä¸ªæ­£æ•´æ•°Aï¼ˆ1&lt;&#x3D;A&lt;&#x3D;109ï¼‰ï¼Œè¾“å‡ºå®ƒçš„æœ€ä½ä½ã€‚ä¾‹å¦‚ï¼ŒA&#x3D;26ï¼Œæˆ‘ä»¬èƒ½å†™å‡ºå®ƒçš„äºŒè¿›åˆ¶ä½11010ï¼Œæ‰€ä»¥æœ€ä½ä½æ˜¯10ï¼Œè¾“å‡ºä¸º2ã€‚å†ä¾‹å¦‚ï¼ŒA&#x3D;88ï¼Œåˆ™äºŒè¿›åˆ¶ä½1011000ï¼Œåˆ™æœ€ä½ä½æ˜¯1000ï¼Œè¾“å‡ºä¸º8ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…å«ä¸€ä¸ªæ•´æ•°Aï¼ˆ1&lt;&#x3D;A&lt;&#x3D;109ï¼‰<br><strong>è¾“å‡ºæè¿°ï¼š</strong><br>   å¯¹åº”è¾“å…¥çš„æœ€ä½ä½<br> <strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>8</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>8</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i=<span class="number">0</span>,j,z,a[<span class="number">8</span>],b[<span class="number">8</span>],s=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n)</span><br><span class="line">    &#123;</span><br><span class="line">        a[i]=n%<span class="number">2</span>;</span><br><span class="line">        n/=<span class="number">2</span>;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;i;j++)</span><br><span class="line">    &#123;</span><br><span class="line">        b[j]=a[j];</span><br><span class="line">        <span class="keyword">if</span>(a[j]==<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(z=<span class="number">0</span>;z&lt;=j;z++)</span><br><span class="line">        <span class="keyword">if</span>(b[z]!=<span class="number">0</span>)</span><br><span class="line">            s+=<span class="built_in">pow</span>(<span class="number">2</span>,z);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,s);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="Fibonacciæ•°åˆ—"><a href="#Fibonacciæ•°åˆ—" class="headerlink" title="Fibonacciæ•°åˆ—"></a>Fibonacciæ•°åˆ—</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   Fibonacciæ•°åˆ—{0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, â€¦}ï¼Œå¯ä»¥å¦‚ä¸‹å®šä¹‰ï¼š<br>   F0&#x3D;0<br>   F1&#x3D;1<br>   Fi&#x3D;F(i-1)+F(i-2) å¯¹äºæ‰€æœ‰çš„iå¤§äº2<br>   å†™ä¸ªç¨‹åºè®¡ç®—Fibonacciæ•°<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ç¬¬ä¸€è¡Œä¸ºéœ€è¦æµ‹è¯•ä¸ªæ•°Tï¼Œæ¥ç€çš„Tè¡Œï¼Œæ¯ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•°nï¼ˆ0&lt;&#x3D;n&lt;&#x3D;45 ï¼‰ï¼Œå³ä½ éœ€è¦è®¡ç®—çš„F(n)<br><strong>è¾“å‡ºæè¿°ï¼š</strong><br>   æ¯è¾“å…¥ä¸€ä¸ªæ•°nï¼Œè¾“å‡ºå¯¹åº”çš„F(n)<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5<br>0<br>3<br>5<br>9<br>20</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>0<br>2<br>5<br>34<br>6765</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i,k,a[<span class="number">46</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    a[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    a[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;=<span class="number">45</span>;i++)</span><br><span class="line">        a[i]=a[i<span class="number">-1</span>]+a[i<span class="number">-2</span>];</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;k);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[k]);</span><br><span class="line">        <span class="keyword">if</span>(i&lt;n<span class="number">-1</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="è›‡å½¢çŸ©é˜µ"><a href="#è›‡å½¢çŸ©é˜µ" class="headerlink" title="è›‡å½¢çŸ©é˜µ"></a>è›‡å½¢çŸ©é˜µ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è›‡å½¢çŸ©é˜µæ˜¯ä»1å¼€å§‹çš„è‡ªç„¶æ•°ä¾æ¬¡æ’åˆ—æˆçš„ä¸€ä¸ªçŸ©é˜µä¸Šä¸‰è§’å½¢<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   çŸ©é˜µçš„å¤§å°Nï¼ˆN&lt;20ï¼‰<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸€ä¸ªè›‡å½¢çŸ©é˜µ,æ³¨æ„:æ¯è¡Œè¡Œæœ«æ²¡æœ‰ç©ºæ ¼,æœ€åä¸€è¡Œæ²¡æœ‰æ¢è¡Œã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1 3 6 10 15<br>2 5 9 14<br>4 8 13<br>7 12<br>11</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,a[<span class="number">20</span>]=&#123;<span class="number">1</span>&#125;,i,j;</span><br><span class="line">    <span class="type">int</span> N,k,z,s;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;N);</span><br><span class="line">    n=N;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>,z=<span class="number">1</span>;i&lt;N<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        s=i+<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            a[j]=a[j<span class="number">-1</span>]+s;</span><br><span class="line">            s++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;n<span class="number">-1</span>;k++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[k]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[n<span class="number">-1</span>]);</span><br><span class="line">        a[<span class="number">0</span>]+=z;</span><br><span class="line">        z++;</span><br><span class="line">        n--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>

<h3 id="çŒªçš„å®‰å®¶"><a href="#çŒªçš„å®‰å®¶" class="headerlink" title="çŒªçš„å®‰å®¶"></a>çŒªçš„å®‰å®¶</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   Andyå’ŒMaryå…»äº†å¾ˆå¤šçŒªã€‚ä»–ä»¬æƒ³è¦ç»™çŒªå®‰å®¶ã€‚ä½†æ˜¯Andyæ²¡æœ‰è¶³å¤Ÿçš„çŒªåœˆï¼Œå¾ˆå¤šçŒªåªèƒ½å¤Ÿåœ¨ä¸€ä¸ªçŒªåœˆå®‰å®¶ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚æœ‰16å¤´çŒªï¼ŒAndyå»ºäº†3ä¸ªçŒªåœˆï¼Œä¸ºäº†ä¿è¯å…¬å¹³ï¼Œå‰©ä¸‹1å¤´çŒªå°±æ²¡æœ‰åœ°æ–¹å®‰å®¶äº†ã€‚Maryç”Ÿæ°”äº†ï¼Œéª‚Andyæ²¡æœ‰è„‘å­ï¼Œå¹¶è®©ä»–é‡æ–°å»ºç«‹çŒªåœˆã€‚è¿™å›Andyå»ºé€ äº†5ä¸ªçŒªåœˆï¼Œä½†æ˜¯ä»ç„¶æœ‰1å¤´çŒªæ²¡æœ‰åœ°æ–¹å»ï¼Œç„¶åAndyåˆå»ºé€ äº†7ä¸ªçŒªåœˆï¼Œä½†æ˜¯è¿˜æœ‰2å¤´æ²¡æœ‰åœ°æ–¹å»ã€‚Andyéƒ½å¿«ç–¯äº†ã€‚ä½ å¯¹è¿™ä¸ªäº‹æƒ…æ„Ÿå…´è¶£èµ·æ¥ï¼Œä½ æƒ³é€šè¿‡Andyå»ºé€ çŒªåœˆçš„è¿‡ç¨‹ï¼ŒçŸ¥é“Andyå®¶è‡³å°‘å…»äº†å¤šå°‘å¤´çŒªã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…å«å¤šç»„æµ‹è¯•æ•°æ®ã€‚æ¯ç»„æ•°æ®ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°n (n &lt;&#x3D; 10),è¡¨ç¤ºAndyå»ºç«‹çŒªåœˆçš„æ¬¡æ•°ï¼Œæ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ai, bi( bi &lt;&#x3D; ai &lt;&#x3D; 1000), è¡¨ç¤ºAndyå»ºç«‹äº†aiä¸ªçŒªåœˆï¼Œæœ‰biå¤´çŒªæ²¡æœ‰å»å¤„ã€‚ä½ å¯ä»¥å‡å®š(ai, aj) &#x3D; 1<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºåŒ…å«ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå³ä¸ºAndyå®¶è‡³å°‘å…»çŒªçš„æ•°ç›®</p>
<p><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>3<br>3 1<br>5 1<br>7 2</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,ai,bi;</span><br><span class="line">    <span class="type">int</span> i,j,k,a[<span class="number">1000</span>],s=<span class="number">1000</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">1000</span>;i++)</span><br><span class="line">        a[i]=i+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;ai,&amp;bi);</span><br><span class="line">        k=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;s;j++)</span><br><span class="line">            <span class="keyword">if</span>(a[j]%ai==bi)</span><br><span class="line">            &#123;</span><br><span class="line">                a[k]=a[j];</span><br><span class="line">                k++;</span><br><span class="line">            &#125;</span><br><span class="line">        s=k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(k!=<span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;    </span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<h3 id="æœ€å¤§ä¹˜ç§¯çš„æ•´æ•°çš„æ‹†åˆ†"><a href="#æœ€å¤§ä¹˜ç§¯çš„æ•´æ•°çš„æ‹†åˆ†" class="headerlink" title="æœ€å¤§ä¹˜ç§¯çš„æ•´æ•°çš„æ‹†åˆ†"></a>æœ€å¤§ä¹˜ç§¯çš„æ•´æ•°çš„æ‹†åˆ†</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   å°†ä¸€ä¸ªæ•´æ•°Nåˆ†è§£æˆå„ä¸ç›¸åŒçš„åŠ æ•°çš„å’Œï¼Œä½¿è¿™äº›åŠ æ•°çš„ä¹˜ç§¯æœ€å¤§ã€‚NèŒƒå›´ä¸º[5,1000]<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€ä¸ªæ•´æ•°Nï¼ˆ5&lt;&#x3D;N&lt;&#x3D;1000)<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   èƒ½å¤Ÿä½¿å¾—ç§¯æœ€å¤§çš„åŠ æ•°åºåˆ—<br> <strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>7</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>3 4</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">if</span>(n%<span class="number">3</span>==<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        n-=<span class="number">4</span>;</span><br><span class="line">        <span class="keyword">while</span>(n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;3 &quot;</span>);</span><br><span class="line">            n-=<span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(n%<span class="number">3</span>==<span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        n-=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; 3&quot;</span>);</span><br><span class="line">            n-=<span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        n-=<span class="number">3</span>;</span><br><span class="line">        <span class="keyword">while</span>(n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; 3&quot;</span>);</span><br><span class="line">            n-=<span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>

<h3 id="æ’é˜Ÿ"><a href="#æ’é˜Ÿ" class="headerlink" title="æ’é˜Ÿ"></a>æ’é˜Ÿ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™ç¨‹åºï¼Œå¯¹ä¸€ä¸ªå·²ç»æ’å¥½åºçš„æ•°ç»„ï¼Œè¾“å…¥ä¸€ä¸ªå…ƒç´ ã€‚å°†è¯¥å…ƒç´ æŒ‰åŸæ¥çš„æ’åºè§„åˆ™å°†å®ƒæ’å…¥åˆ°æ•°ç»„ä¸­ã€‚<br>   ä¾‹å¦‚åŸæ•°ç»„ä¸ºï¼š1 2 6 7 9ï¼Œè¾“å…¥å¾…æ’å…¥çš„å…ƒç´ 3ï¼Œåˆ™æ’å…¥å®Œæˆåç»“æœä¸ºï¼š1 2 3 6 7 9ï¼›<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†å…ˆè¾“å…¥nï¼Œè¡¨ç¤ºæ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°ï¼Œæ¥ç€è¾“å…¥nä¸ªå·²ç»æ’åºå¥½çš„æ•°ï¼Œæ•°ç»„æœ€å¤§ä¸ªæ•°nä¸º20ï¼Œç¬¬äºŒéƒ¨åˆ†ä¸ºå¾…æ’å…¥çš„æ•°æ®<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   æ–°çš„æ’åºå¥½çš„æ•°ç»„å…ƒç´ <br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5<br>1 2 6 7 9<br>3</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1 2 3 6 7 9</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">101</span>],n,i,j;</span><br><span class="line">    <span class="type">int</span> s,temp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;s)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(j=n;j&gt;i;j--)</span><br><span class="line">                a[j]=a[j<span class="number">-1</span>];    </span><br><span class="line">            a[i]=s;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p><strong>2æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,a[<span class="number">21</span>],n,m,k=<span class="number">0</span>,j;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;m)</span><br><span class="line">        &#123;</span><br><span class="line">            k=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(j=n;j&gt;i;j--)</span><br><span class="line">                a[j]=a[j<span class="number">-1</span>];</span><br><span class="line">            a[i]=m;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(k==<span class="number">0</span>)</span><br><span class="line">        a[n]=m;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å«æ˜Ÿå®šä½"><a href="#å«æ˜Ÿå®šä½" class="headerlink" title="å«æ˜Ÿå®šä½"></a>å«æ˜Ÿå®šä½</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™ç¨‹åºï¼Œå¯¹ä¸€ä¸ªå·²ç»æ’å¥½åºçš„æ•°ç»„ï¼Œè¾“å…¥ä¸€ä¸ªå…ƒç´ ã€‚å°†è¯¥å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ç´¢å¼•å‡ºæ¥ï¼ˆæŠ˜åŠæŸ¥æ‰¾ï¼‰ã€‚<br>   ä¾‹å¦‚åŸæ•°ç»„ä¸ºï¼š1 2 6 7 9ï¼Œè¾“å…¥å¾…æŸ¥æ‰¾çš„å…ƒç´ 7ï¼Œåˆ™æŸ¥æ‰¾ç»“æœä¸º4ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¯¥å…ƒç´ ï¼Œåˆ™è¾“å‡º-1ï¼›<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†å…ˆè¾“å…¥n,è¡¨ç¤ºæ•°ç»„ä¸­å…ƒç´ æ•°ï¼Œæ¥ç€è¾“å…¥nä¸ªå·²ç»æ’åºå¥½çš„æ•°ï¼Œæ•°ç»„æœ€å¤§ä¸ªæ•°nä¸º20ï¼Œç¬¬äºŒéƒ¨åˆ†ä¸ºå¾…æŸ¥æ‰¾çš„æ•°æ®<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   å¾…æŸ¥æ‰¾çš„å…ƒç´ ä½ç½®<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5<br>1 2 6 7 9<br>7</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>4</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,a[<span class="number">20</span>],n,m,k=<span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]==m)</span><br><span class="line">        &#123;</span><br><span class="line">            k=i+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,k);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="è­¦å¯ŸæŠ“è´¼"><a href="#è­¦å¯ŸæŠ“è´¼" class="headerlink" title="è­¦å¯ŸæŠ“è´¼"></a>è­¦å¯ŸæŠ“è´¼</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™ç¨‹åºï¼Œå°†nï¼ˆn&lt;1000ï¼‰ä¸ªå…ƒç´ ä¸­çš„æŸä¸ªç‰¹å®šå…ƒç´ åˆ é™¤ã€‚å¦‚æœè¯¥å…ƒç´ å‡ºç°çš„æ¬¡æ•°tä¸ºå¥‡æ•°æ¬¡ï¼Œåˆ™åˆ é™¤ç¬¬ï¼ˆt+1ï¼‰&#x2F;2é‚£ä¸ªï¼Œå¦‚æœå‡ºç°çš„æ¬¡æ•°tä¸ºå¶æ•°æ¬¡ï¼Œåˆ™åˆ é™¤ç¬¬ï¼ˆt&#x2F;2ï¼‰ä¸ª<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†å…ˆè¾“å…¥n,æ¥ç€è¾“å…¥nä¸ªåŸæ•°æ®ã€‚ç¬¬äºŒéƒ¨åˆ†ä¸ºå¾…åˆ é™¤çš„å…ƒç´ ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   åˆ é™¤ç‰¹å®šå…ƒç´ åçš„å‰©ä½™å…ƒç´ <br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>8<br>1 3 4 6 3 5 3 6<br>3</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1 3 4 6 5 3 6</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,a[<span class="number">1000</span>];</span><br><span class="line">    <span class="type">int</span> s,i,t=<span class="number">0</span>,m,j=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]==s)</span><br><span class="line">            t++;</span><br><span class="line">    <span class="keyword">if</span>(t%<span class="number">2</span>!=<span class="number">0</span>)</span><br><span class="line">        m=(t+<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        m=t/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]!=s)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            j++;</span><br><span class="line">            <span class="keyword">if</span>(j!=m)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(a[n<span class="number">-1</span>]!=s)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        j++;</span><br><span class="line">        <span class="keyword">if</span>(j!=m)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[n<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<p><strong>2æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,a[<span class="number">1000</span>];</span><br><span class="line">    <span class="type">int</span> s,i,t=<span class="number">0</span>,m,j=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]==s)</span><br><span class="line">            t++;</span><br><span class="line">    <span class="keyword">if</span>(t%<span class="number">2</span>!=<span class="number">0</span>)</span><br><span class="line">        m=(t+<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        m=t/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]!=s)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            j++;</span><br><span class="line">            <span class="keyword">if</span>(j!=m)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æ˜¯éé»‘ç™½"><a href="#æ˜¯éé»‘ç™½" class="headerlink" title="æ˜¯éé»‘ç™½"></a>æ˜¯éé»‘ç™½</h3><p> <strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™å‡½æ•°å®ç°ä¸¤ä¸ªç­‰é•¿å­—ç¬¦ä¸²å¤§å°æ¯”è¾ƒã€‚æ¯”è¾ƒè§„åˆ™å¦‚ä¸‹ï¼šå­—ç¬¦å¤§å°æŒ‰å¯¹åº”çš„ASCII ç å€¼ï¼Œå­—ç¬¦ä¸²å¤§å°æ¯”è¾ƒæ—¶æŒ‰å¯¹åº”å­—ç¬¦æ¯”è¾ƒï¼Œå¦‚æœæ¯”è¾ƒçš„ä¸¤å­—ç¬¦ä¸ç­‰ï¼Œåˆ™è¯´æ˜å­˜åœ¨å¤§å°å…³ç³»ï¼Œåœæ­¢æ¯”è¾ƒæ“ä½œã€‚å¦‚æœç›¸ç­‰ï¼Œåˆ™æ¯”è¾ƒä¸‹ä¸€æ¬¡å­—ç¬¦ï¼Œç›´åˆ°æœ€åä¸€ä¸ªã€‚å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å°äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²åˆ™è¾“å‡ºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœå¤§äºåˆ™è¾“å‡ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœç›¸ç­‰åˆ™è¿”å›0ï¼›<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥å¾…æ¯”è¾ƒçš„ä¸¤ä¸ªå­—ç¬¦ä¸²<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>å­—ç¬¦ä¸²æ¯”è¾ƒç»“æœ<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>abcdefg<br>abcdeff</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>abcdefg</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">81</span>],b[<span class="number">81</span>];</span><br><span class="line">    <span class="type">int</span> i,len1,len2,max,s1=<span class="number">0</span>,s2=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,b);</span><br><span class="line">    len1=<span class="built_in">strlen</span>(a);</span><br><span class="line">    len2=<span class="built_in">strlen</span>(b);</span><br><span class="line">    max=(len1&gt;len2)?len1:len2;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len2;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&lt;b[i])</span><br><span class="line">        &#123;</span><br><span class="line">            s2++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;b[i])</span><br><span class="line">        &#123;</span><br><span class="line">            s1++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(s1==<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">puts</span>(a);</span><br><span class="line">    <span class="keyword">if</span>(s2==<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">puts</span>(b);</span><br><span class="line">    <span class="keyword">if</span>(s1==<span class="number">0</span> &amp;&amp; s2==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(len1&gt;len2)</span><br><span class="line">            <span class="built_in">puts</span>(a);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(len1&lt;len2)</span><br><span class="line">            <span class="built_in">puts</span>(b);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<h3 id="æ­æ¡¥"><a href="#æ­æ¡¥" class="headerlink" title="æ­æ¡¥"></a>æ­æ¡¥</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™å‡½æ•°å°†ä¸¤ä¸ªå‡åºæ’åˆ—çš„å­—ç¬¦ä¸²èåˆæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œèåˆåçš„å­—ç¬¦ä¸²ä»ç„¶æ˜¯å‡åºæ’åˆ—çš„ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸¤å‡åºå­—ç¬¦ä¸²<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   èåˆåçš„å­—ç¬¦ä¸²<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>acefi<br>bdfg</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>abcdeffgi</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">162</span>],b[<span class="number">81</span>];</span><br><span class="line">    <span class="type">int</span> i,j,len,temp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,b);</span><br><span class="line">    <span class="built_in">strcat</span>(a,b);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;len;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&gt;a[j])</span><br><span class="line">            &#123;</span><br><span class="line">                temp=a[i];</span><br><span class="line">                a[i]=a[j];</span><br><span class="line">                a[j]=temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p><strong>2æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">162</span>],b[<span class="number">81</span>];</span><br><span class="line">    <span class="type">int</span> i,j,len,temp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,b);</span><br><span class="line">    <span class="built_in">strcat</span>(a,b);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;len;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&gt;a[j])</span><br><span class="line">            &#123;</span><br><span class="line">                temp=a[i];</span><br><span class="line">                a[i]=a[j];</span><br><span class="line">                a[j]=temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="ä¸€æ¸…äºŒæ¥š"><a href="#ä¸€æ¸…äºŒæ¥š" class="headerlink" title="ä¸€æ¸…äºŒæ¥š"></a>ä¸€æ¸…äºŒæ¥š</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åŒ…å«å­—æ¯ã€æ•°å­—å’Œå…¶ä»–å­—ç¬¦ã€‚ç»Ÿè®¡è¯¥å­—ç¬¦ä¸²ä¸­æ•°å­—ã€å­—æ¯å’Œå…¶ä»–å­—ç¬¦å‡ºç°çš„é¢‘ç‡ã€‚ï¼ˆæ³¨æ„ï¼Œå…¶ä»–å­—ç¬¦åŒ…å«ç©ºæ ¼ï¼‰<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€æ··åˆå­—ç¬¦ä¸²ï¼Œæœ€å¤§é•¿åº¦ä¸º200<br>   å„ç±»å­—ç¬¦å‡ºç°é¢‘ç‡<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   å„ç±»å­—ç¬¦å‡ºç°é¢‘ç‡<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>abcdefg9999&#x2F;&#x2F;&#x2F;&#x2F;</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>ch:7<br>num:4<br>other:4</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">200</span>];</span><br><span class="line">    <span class="type">int</span> ch=<span class="number">0</span>,num=<span class="number">0</span>,other=<span class="number">0</span>,len,i;</span><br><span class="line">    gets(a);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; a[i]&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">            num++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>((a[i]&gt;=<span class="string">&#x27;a&#x27;</span> &amp;&amp; a[i]&lt;=<span class="string">&#x27;z&#x27;</span>) || (a[i]&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; a[i]&lt;=<span class="string">&#x27;Z&#x27;</span>))</span><br><span class="line">            ch++;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            other++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ch:%d\nnum:%d\nother:%d&quot;</span>,ch,num,other);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p><strong>2æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">200</span>];</span><br><span class="line">    <span class="type">int</span> ch=<span class="number">0</span>,num=<span class="number">0</span>,other=<span class="number">0</span>,len,i;</span><br><span class="line">    gets(a);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; a[i]&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">            num++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>((a[i]&gt;=<span class="string">&#x27;a&#x27;</span> &amp;&amp; a[i]&lt;=<span class="string">&#x27;z&#x27;</span>) || (a[i]&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; a[i]&lt;=<span class="string">&#x27;Z&#x27;</span>))</span><br><span class="line">            ch++;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            other++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ch:%d\nnum:%d\nother:%d&quot;</span>,ch,num,other);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="å…‹éš†"><a href="#å…‹éš†" class="headerlink" title="å…‹éš†"></a>å…‹éš†</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™ç¨‹åºå®ç°å­—ç¬¦ä¸²æ‹·è´ï¼Œè¾“å…¥ä¸¤å­—ç¬¦ä¸²(å­—ç¬¦ä¸²é•¿åº¦å°äº100)ï¼Œå°†ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ‹·è´åˆ°ç¬¬äºŒä¸ªå­—ç¬¦ä¸²ä¸­ï¼›å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦aå°äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²é•¿åº¦bï¼Œåˆ™ç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ä¹Ÿå°†ç¼©å‡è‡³ç¬¬ä¸€ä¸ªçš„é•¿åº¦aï¼Œå¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦aå¤§äºæˆ–ç­‰äºç¬¬äºŒä¸ªé•¿åº¦bï¼Œåˆ™åªå°†açš„å‰bä¸ªå­—ç¬¦æ‹·è´åˆ°ç¬¬äºŒä¸ªä¸­ï¼›<br> <strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸¤å­—ç¬¦ä¸²<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼Œæ³¨æ„ï¼šè¾“å‡ºä¸æ¢è¡Œã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>Abdfeg<br>Bdfad</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>Abdfe</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="number">1</span>: <span class="type">char</span> a[<span class="number">100</span>],b[<span class="number">100</span>];</span><br><span class="line">    <span class="type">int</span> len1,len2,i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s %s&quot;</span>,a,b);</span><br><span class="line">    len1=<span class="built_in">strlen</span>(a);</span><br><span class="line">    len2=<span class="built_in">strlen</span>(b);</span><br><span class="line">    <span class="keyword">if</span>(len1&lt;len2)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len1;i++)</span><br><span class="line">            b[i]=a[i];</span><br><span class="line">        b[len1]=<span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len2;i++)</span><br><span class="line">            b[i]=a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<p><strong>2æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> len1,len2,i;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>],b[<span class="number">100</span>];</span><br><span class="line">    gets(a);</span><br><span class="line">    gets(b);</span><br><span class="line">    len1=<span class="built_in">strlen</span>(a);</span><br><span class="line">    len2=<span class="built_in">strlen</span>(b);</span><br><span class="line">    <span class="keyword">if</span>(len1&lt;len2)</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len1;i++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,a[i]);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len2;i++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å››åˆ™è¿ç®—ç¨‹åº"><a href="#å››åˆ™è¿ç®—ç¨‹åº" class="headerlink" title="å››åˆ™è¿ç®—ç¨‹åº"></a>å››åˆ™è¿ç®—ç¨‹åº</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>       ç¼–åˆ¶ä¸€ä¸ªå®Œæˆä¸¤ä¸ªæ•°çš„å››åˆ™è¿ç®—ç¨‹åº(åŠ ã€å‡ã€ä¹˜ã€é™¤)ã€‚å¦‚ï¼šç”¨æˆ·è¾“å…¥34+56åˆ™è¾“å‡ºç»“æœ34.00+56.00&#x3D;90.00ã€‚è¦æ±‚è¿ç®—ç»“æœä¿ç•™ä¸¤ä½å°æ•°ï¼Œç”¨æˆ·è¾“å…¥æ—¶ä¸€æ¬¡å°†ä¸¤ä¸ªæ•°å’Œæ“ä½œç¬¦è¾“å…¥ã€‚<br>       æ•°å­—å¯èƒ½æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯èƒ½æ˜¯æµ®ç‚¹æ•°ã€‚<br>      çŸ¥è¯†ç‚¹ï¼šæ ¼å¼è¾“å‡ºï¼Œæ ¼å¼è¾“å…¥ï¼Œæ¡ä»¶è¯­å¥<br> <strong>è¾“å…¥æè¿°ï¼š</strong><br>   åŒ…å«5ç»„æµ‹è¯•æ•°æ®ï¼Œæ¯ä¸€ç»„å ä¸€è¡Œï¼Œæ¯ä¸€è¡ŒåŒ…å«æ•°å­—å’Œå­—ç¬¦ï¼Œè¿ç®—ç»“æœä¸è¶…è¿‡doubleèŒƒå›´ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   ä¸¤ä¸ªæ•°çš„è¿ç®—çš„ç»“æœï¼Œå¦‚æœè¿ç®—ç¬¦ä¸ä¸ºåŠ ã€å‡ã€ä¹˜ã€é™¤ï¼Œåˆ™è¾“å‡ºInput Error! æ¯ä¸ªæ•°å­—ä¿ç•™ä¸¤ä½å°æ•°ç²¾åº¦ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>1+1<br>1-1<br>1*1<br>1&#x2F;1<br>1^1</p>
</blockquote>
<p> <strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1.00+1.00&#x3D;2.00<br>1.00-1.00&#x3D;0.00<br>1.00*1.00&#x3D;1.00<br>1.00&#x2F;1.00&#x3D;1.00<br>Input Error!</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> a,b,s;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%lf%c%lf&quot;</span>,&amp;a,&amp;c,&amp;b)!=EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;+&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            s=a+b;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%.2lf%c%.2lf=%.2lf\n&quot;</span>,a,c,b,s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            s=a-b;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%.2lf%c%.2lf=%.2lf\n&quot;</span>,a,c,b,s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            s=a*b;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%.2lf%c%.2lf=%.2lf\n&quot;</span>,a,c,b,s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            s=a/b;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%.2lf%c%.2lf=%.2lf\n&quot;</span>,a,c,b,s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Input Error!\n&quot;</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="è½ä½“çƒåå¼¹"><a href="#è½ä½“çƒåå¼¹" class="headerlink" title="è½ä½“çƒåå¼¹"></a>è½ä½“çƒåå¼¹</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>       ä¸€çƒä»æŸä¸ªé«˜åº¦ï¼ˆå¤§äºç­‰äº100ç±³ï¼‰è‡ªç”±è½ä¸‹ï¼Œæ¯æ¬¡è½åœ°ååè·³å›åŸé«˜åº¦çš„ä¸€åŠï¼›å†è½ä¸‹ï¼Œæ±‚å®ƒåœ¨ç¬¬10æ¬¡è½åœ°æ—¶ï¼Œå…±ç»è¿‡å¤šå°‘ç±³ï¼Ÿç¬¬10æ¬¡åå¼¹å¤šé«˜ï¼Ÿã€‚ï¼ˆä¿è¯6ä½ç²¾åº¦ï¼‰<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>      é«˜åº¦ä¸ºå¤§äºç­‰äº100ç±³çš„å®æ•°,èŒƒå›´åœ¨doubleå†…ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   ç¬¬10æ¬¡è½åœ°æ—¶ï¼Œç»è¿‡å¤šå°‘ç±³ï¼Œç¬¬10æ¬¡åå¼¹é«˜åº¦ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>100</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>299.609375<br>0.097656</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">int</span> i=<span class="number">0</span>,k=<span class="number">10</span>;</span><br><span class="line">   <span class="type">double</span> sn,h,sum,n;</span><br><span class="line">   <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;n);</span><br><span class="line">   sum=n;</span><br><span class="line">   <span class="keyword">while</span>(i&lt;k)</span><br><span class="line">   &#123;</span><br><span class="line">      sn=n/<span class="number">2.0</span>;</span><br><span class="line">      sum+=(<span class="number">2</span>*sn);</span><br><span class="line">      n=sn;</span><br><span class="line">      i++;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;%.6lf\n%.6lf&quot;</span>,sum-(<span class="number">2</span>*sn),sn);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="ç”µè¯è–„ç®¡ç†"><a href="#ç”µè¯è–„ç®¡ç†" class="headerlink" title="ç”µè¯è–„ç®¡ç†"></a>ç”µè¯è–„ç®¡ç†</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>        åˆ©ç”¨ç»“æ„ä½“ç±»å‹æ•°ç»„è¾“å…¥äº”ä½ç”¨æˆ·çš„å§“åå’Œç”µè¯å·ç ï¼ŒæŒ‰å§“åçš„å­—å…¸é¡ºåºæ’åˆ—åï¼ˆå§“åç›¸åŒä¿æŒåŸä½ç½®ï¼‰ï¼Œè¾“å‡ºç”¨æˆ·çš„å§“åå’Œç”µè¯å·ç ã€‚ å·²çŸ¥ç»“æ„ä½“ç±»å‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> struct user </span><br><span class="line">&#123;  char  name[20]; </span><br><span class="line">   char  num[10]; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥å§“åå­—ç¬¦ä¸²å’Œç”µè¯å·ç å­—ç¬¦ä¸²ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºæŒ‰å§“åæ’åºåçš„å§“åå­—ç¬¦ä¸²å’Œç”µè¯å·ç å­—ç¬¦ä¸²ã€‚æ¯è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦åä¸èƒ½æœ‰ç©ºæ ¼.æ‰€æœ‰è¾“å‡ºçš„æœ€åä¸€è¡Œä¸èƒ½æœ‰å›è½¦<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>aa<br>12345<br>dd<br>23456<br>cc<br>34567<br>bb<br>21456<br>ee<br>12456</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>aa<br>12345<br>bb<br>21456<br>cc<br>34567<br>dd<br>23456<br>ee<br>12456</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">user</span> </span></span><br><span class="line"><span class="class">&#123;</span>  <span class="type">char</span>  name[<span class="number">20</span>]; </span><br><span class="line">   <span class="type">char</span>  num[<span class="number">10</span>]; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n=<span class="number">5</span>,i=<span class="number">0</span>,j;</span><br><span class="line">    <span class="type">char</span> temp1[<span class="number">20</span>],temp2[<span class="number">10</span>];</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">user</span> <span class="title">user</span>[5];</span></span><br><span class="line">    <span class="keyword">while</span>(n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,user[i].name);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,user[i].num);</span><br><span class="line">        i++;</span><br><span class="line">        n--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;<span class="number">5</span>;j++)</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">strcmp</span>(user[i].name,user[j].name)&gt;<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">strcpy</span>(temp1,user[i].name);</span><br><span class="line">                <span class="built_in">strcpy</span>(user[i].name,user[j].name);</span><br><span class="line">                <span class="built_in">strcpy</span>(user[j].name,temp1);</span><br><span class="line">                <span class="built_in">strcpy</span>(temp2,user[i].num);</span><br><span class="line">                <span class="built_in">strcpy</span>(user[i].num,user[j].num);</span><br><span class="line">                <span class="built_in">strcpy</span>(user[j].num,temp2);</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n%s\n&quot;</span>,user[i].name,user[i].num);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n%s&quot;</span>,user[<span class="number">4</span>].name,user[<span class="number">4</span>].num);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ ¡é—¨å¤–çš„æ ‘"><a href="#æ ¡é—¨å¤–çš„æ ‘" class="headerlink" title="æ ¡é—¨å¤–çš„æ ‘"></a>æ ¡é—¨å¤–çš„æ ‘</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>      æŸæ ¡å¤§é—¨å¤–é•¿åº¦ä¸ºLçš„é©¬è·¯ä¸Šæœ‰ä¸€æ’æ ‘ï¼Œæ¯ä¸¤æ£µç›¸é‚»çš„æ ‘ä¹‹é—´çš„é—´éš”éƒ½æ˜¯1ç±³ã€‚æˆ‘ä»¬å¯ä»¥æŠŠé©¬è·¯çœ‹æˆä¸€ä¸ªæ•°è½´ï¼Œé©¬è·¯çš„ä¸€ç«¯åœ¨æ•°è½´0çš„ä½ç½®ï¼Œå¦ä¸€ç«¯åœ¨Lçš„ä½ç½®ï¼›æ•°è½´ä¸Šçš„æ¯ä¸ªæ•´æ•°ç‚¹ï¼Œå³0ï¼Œ1ï¼Œ2ï¼Œâ€¦â€¦ï¼ŒLï¼Œéƒ½ç§æœ‰ä¸€æ£µæ ‘ã€‚ç”±äºé©¬è·¯ä¸Šæœ‰ä¸€äº›åŒºåŸŸè¦ç”¨æ¥å»ºåœ°é“ã€‚è¿™äº›åŒºåŸŸç”¨å®ƒä»¬åœ¨æ•°è½´ä¸Šçš„èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹è¡¨ç¤ºã€‚å·²çŸ¥ä»»ä¸€åŒºåŸŸçš„èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹çš„åæ ‡éƒ½æ˜¯æ•´æ•°ï¼ŒåŒºåŸŸä¹‹é—´å¯èƒ½æœ‰é‡åˆçš„éƒ¨åˆ†ã€‚ç°åœ¨è¦æŠŠè¿™äº›åŒºåŸŸä¸­çš„æ ‘ï¼ˆåŒ…æ‹¬åŒºåŸŸç«¯ç‚¹å¤„çš„ä¸¤æ£µæ ‘ï¼‰ç§»èµ°ã€‚ä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—å°†è¿™äº›æ ‘éƒ½ç§»èµ°åï¼Œé©¬è·¯ä¸Šè¿˜æœ‰å¤šå°‘æ£µæ ‘ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>       è¾“å…¥çš„ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªæ•´æ•°Lï¼ˆ1 &lt;&#x3D; L &lt;&#x3D; 10000ï¼‰å’Œ Mï¼ˆ1 &lt;&#x3D; M &lt;&#x3D; 100ï¼‰ï¼ŒLä»£è¡¨é©¬è·¯çš„é•¿åº¦ï¼ŒMä»£è¡¨åŒºåŸŸçš„æ•°ç›®ï¼ŒLå’ŒMä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚æ¥ä¸‹æ¥çš„Mè¡Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªä¸åŒçš„æ•´æ•°ï¼Œç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œè¡¨ç¤ºä¸€ä¸ªåŒºåŸŸçš„èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹çš„åæ ‡ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºåŒ…æ‹¬ä¸€è¡Œï¼Œè¿™ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé©¬è·¯ä¸Šå‰©ä½™çš„æ ‘çš„æ•°ç›®ã€‚æ‰€æœ‰è¾“å‡ºçš„æœ€åä¸€è¡Œä¸èƒ½æœ‰å›è½¦<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>500 3<br>150 300<br>100 200<br>470 471</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>298</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> L,M,sum,i,min,max;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">10000</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;L,&amp;M);</span><br><span class="line">    sum=L+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=L;i++)</span><br><span class="line">        a[i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(M)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;min,&amp;max);</span><br><span class="line">        <span class="keyword">for</span>(i=min;i&lt;=max;i++)</span><br><span class="line">            a[i]=<span class="number">0</span>;</span><br><span class="line">        M--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=L;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="number">0</span>)</span><br><span class="line">            sum--;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="æ­Œæ‰‹æ¯”èµ›"><a href="#æ­Œæ‰‹æ¯”èµ›" class="headerlink" title="æ­Œæ‰‹æ¯”èµ›"></a>æ­Œæ‰‹æ¯”èµ›</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>        é’å¹´æ­Œæ‰‹å‚åŠ æ­Œæ›²å¤§å¥–èµ›ï¼Œæœ‰10ä¸ªè¯„å§”å¯¹å¥¹çš„è¿›è¡Œæ‰“åˆ†ï¼Œè¯•ç¼–ç¨‹æ±‚è¿™ä½é€‰æ‰‹çš„å¹³å‡å¾—åˆ†ï¼ˆå»æ‰ä¸€ä¸ªæœ€é«˜åˆ†å’Œä¸€ä¸ªæœ€ä½åˆ†ï¼‰ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   10ä¸ªè¯„å§”çš„åˆ†æ•°,æ¯ä¸ªåˆ†æ•°æ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°.è¾“å…¥æ•°æ®ä¿è¯æœ‰ä¸€ä¸ªæœ€ä½åˆ†,ä¸€ä¸ªæœ€é«˜åˆ†,ä¸”æœ€é«˜åˆ†,æœ€ä½åˆ†ä¸ç›¸åŒ.å…¶å®ƒæ˜¯æ•°æ®ä¸æœ€ä½ã€æœ€é«˜å‡ä¸ç›¸åŒ<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºæ­Œæ‰‹çš„å¾—åˆ†,ä¿ç•™ä¸€ä½å°æ•°.æ‰€æœ‰è¾“å‡ºçš„æœ€åä¸€è¡Œä¸èƒ½æœ‰å›è½¦<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>8.5 9 9.8 6.5 8.7 8.5 9.3 9.6 8.9 8.2</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>8.8</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> a[<span class="number">10</span>],min,max,sum=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;a[i]);</span><br><span class="line">    max=a[<span class="number">0</span>];</span><br><span class="line">    min=a[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(max&lt;a[i])</span><br><span class="line">            max=a[i];</span><br><span class="line">        <span class="keyword">if</span>(min&gt;a[i])</span><br><span class="line">            min=a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        sum+=a[i];</span><br><span class="line">    sum-=max+min;</span><br><span class="line">    sum=sum/<span class="number">8.0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.1lf&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒç»´æ•°ç»„è½¬ç½®"><a href="#äºŒç»´æ•°ç»„è½¬ç½®" class="headerlink" title="äºŒç»´æ•°ç»„è½¬ç½®"></a>äºŒç»´æ•°ç»„è½¬ç½®</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–ç¨‹å®ç°ä½¿ç»™å®šçš„ä¸€ä¸ªNÃ—Mçš„äºŒç»´æ•´å‹æ•°ç»„è½¬ç½®ï¼Œå³è¡Œåˆ—äº’æ¢ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ç¬¬ä¸€è¡Œæ˜¯ä¸¤ä¸ªæ•´æ•°Nå’ŒM ,æ¥ä¸‹æ¥Nè¡Œæ•´æ•°,æ¯è¡ŒåŒ…å«Mä¸ªæ•´æ•°ã€‚æ•´æ•°ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºè½¬ç½®åçš„äºŒç»´æ•´å‹æ•°ç»„.æ¯ä¸€ä¸ªæ•°æ®ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€,ä½†æ¯è¡Œçš„æœ€åä¸€ä¸ªæ•°æ®åä¸èƒ½æœ‰ç©ºæ ¼.æ‰€æœ‰è¾“å‡ºçš„æœ€åä¸€è¡Œä¸èƒ½æœ‰å›è½¦<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>2 3<br>1 2 3<br>4 5 6</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1 4<br>2 5<br>3 6</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">100</span>][<span class="number">100</span>],i,j,n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i][j]);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;n<span class="number">-1</span>;j++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[j][i]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[n<span class="number">-1</span>][i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i][m<span class="number">-1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[n<span class="number">-1</span>][m<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="é­”æ–¹çŸ©é˜µ"><a href="#é­”æ–¹çŸ©é˜µ" class="headerlink" title="é­”æ–¹çŸ©é˜µ"></a>é­”æ–¹çŸ©é˜µ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€å¥‡æ•°nï¼ˆn&lt;20ï¼‰ï¼Œæ‰“å°å‡º1-&gt;n<em>næ„æˆçš„é­”æ–¹çŸ©é˜µã€‚<br>      é­”æ–¹çŸ©é˜µçš„è¡Œåˆ—åŠå¯¹è§’çº¿çš„å’Œéƒ½ç›¸ç­‰ã€‚<br> <strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€å¥‡æ•°nï¼ˆn&lt;20ï¼‰<br>**è¾“å‡ºæè¿°æè¿°ï¼š**<br>   æ‰“å°å‡º1-&gt;n</em>næ„æˆçš„é­”æ–¹çŸ©é˜µ,æ¯ä¸€ä¸ªæ•°æ®ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€,ä½†æ¯è¡Œçš„æœ€åä¸€ä¸ªæ•°æ®åä¸èƒ½æœ‰ç©ºæ ¼.æ‰€æœ‰è¾“å‡ºçš„æœ€åä¸€è¡Œä¸èƒ½æœ‰å›è½¦<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>3</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>8 1 6<br>3 5 7<br>4 9 2</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">20</span>][<span class="number">20</span>],i,j,n,k=<span class="number">1</span>,m1,m2;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">20</span>;j++)</span><br><span class="line">            a[i][j]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(k!=n*n+<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(k==<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            a[<span class="number">0</span>][n/<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line">            m1=<span class="number">0</span>;</span><br><span class="line">            m2=n/<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(m1==<span class="number">0</span>&amp;&amp;m2!=n<span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(a[n<span class="number">-1</span>][m2+<span class="number">1</span>]==<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    a[n<span class="number">-1</span>][m2+<span class="number">1</span>]=k;</span><br><span class="line">                    m1=n<span class="number">-1</span>;</span><br><span class="line">                    m2++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    a[m1+<span class="number">1</span>][m2]=k;</span><br><span class="line">                    m1++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(m2==n<span class="number">-1</span>&amp;&amp;m1!=<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(a[m1<span class="number">-1</span>][<span class="number">0</span>]==<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    a[m1<span class="number">-1</span>][<span class="number">0</span>]=k;</span><br><span class="line">                    m1--;</span><br><span class="line">                    m2=<span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    a[m1+<span class="number">1</span>][m2]=k;</span><br><span class="line">                    m1++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(a[m1<span class="number">-1</span>][m2+<span class="number">1</span>]==<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    a[m1<span class="number">-1</span>][m2+<span class="number">1</span>]=k;</span><br><span class="line">                    m1--;</span><br><span class="line">                    m2++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    a[m1+<span class="number">1</span>][m2]=k;</span><br><span class="line">                    m1++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;n<span class="number">-1</span>;j++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i][j]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[i][n<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;n<span class="number">-1</span>;j++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[n<span class="number">-1</span>][j]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[n<span class="number">-1</span>][n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="ç»Ÿè®¡"><a href="#ç»Ÿè®¡" class="headerlink" title="ç»Ÿè®¡"></a>ç»Ÿè®¡</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç»Ÿè®¡ä¸ªä½æ•°ä¸º6çš„nä½æ•°ï¼Œä¸”èƒ½è¢«mæ•´é™¤çš„å…±æœ‰å¤šå°‘ä¸ªï¼Ÿ<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ªæ•´æ•°n(n&lt;&#x3D;5),è¡¨ç¤ºè¯¥æ•´æ•°çš„ä½æ•°ï¼Œä¸€ä¸ªæ•´æ•°mï¼ˆ1~9ï¼‰ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   ç¬¦åˆæ¡ä»¶çš„æ•°çš„ä¸ªæ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>2 3</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>3</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> m,n,i,sum=<span class="number">0</span>,min,max;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    min=<span class="built_in">pow</span>(<span class="number">10</span>,n<span class="number">-1</span>);</span><br><span class="line">    max=<span class="built_in">pow</span>(<span class="number">10</span>,n);</span><br><span class="line">    <span class="keyword">for</span>(i=min;i&lt;max;i++)</span><br><span class="line">        <span class="keyword">if</span>(i%<span class="number">10</span>==<span class="number">6</span>)</span><br><span class="line">            <span class="keyword">if</span>(i%m==<span class="number">0</span>)</span><br><span class="line">                sum++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="å››ä½æ•°"><a href="#å››ä½æ•°" class="headerlink" title="å››ä½æ•°"></a>å››ä½æ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è®¡ç®—æ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„å››ä½æ•°çš„ä¸ªæ•°ï¼šæŠŠæ•°å­—abcdé‡æ–°ç»„æˆä¸¤ä¸ªæ–°çš„ä¸¤ä½æ•°ï¼šacåŠdbï¼Œ<br>   å¦‚æœæ–°ç»„æˆçš„ä¸¤ä¸ªåä½æ•°ac&gt;dbï¼Œä¸”acå¿…é¡»æ˜¯å¶æ•°ä¸”èƒ½è¢«nï¼ˆnä¸º1ï½9çš„æ•´æ•°ï¼‰æ•´é™¤ï¼Œdbå¿…é¡»æ˜¯å¥‡æ•°ï¼ŒåŒæ—¶ä¸¤ä¸ªæ–°æ•°çš„åä½æ•°å­—å‡ä¸ä¸ºé›¶ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ª1ï½9çš„æ•´æ•°ã€‚<br> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   ç¬¦åˆæ¡ä»¶çš„æ•°çš„ä¸ªæ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>180</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,s,i,x,y,sum=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1000</span>;i&lt;<span class="number">10000</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        x=i%<span class="number">10</span>+i/<span class="number">100</span>%<span class="number">10</span>*<span class="number">10</span>;</span><br><span class="line">        y=i/<span class="number">10</span>%<span class="number">10</span>+i/<span class="number">1000</span>%<span class="number">10</span>*<span class="number">10</span>;</span><br><span class="line">        <span class="keyword">if</span>(x&lt;y &amp;&amp; y%n==<span class="number">0</span> &amp;&amp; y%<span class="number">2</span>==<span class="number">0</span> &amp;&amp; x%<span class="number">2</span>==<span class="number">1</span> &amp;&amp; x/<span class="number">10</span>!=<span class="number">0</span> &amp;&amp;y/<span class="number">10</span>!=<span class="number">0</span>)</span><br><span class="line">            sum++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¯†ç ç¿»è¯‘"><a href="#å¯†ç ç¿»è¯‘" class="headerlink" title="å¯†ç ç¿»è¯‘"></a>å¯†ç ç¿»è¯‘</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æŠŠæŸå­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å°å†™å­—æ¯æ”¹å†™æˆè¯¥å­—æ¯çš„ä¸Šä¸€ä¸ªå­—æ¯ï¼Œå¦‚æœæ˜¯å­—æ¯aï¼Œåˆ™æ”¹å†™æˆå­—æ¯zï¼Œbæ”¹å†™æˆaï¼Œå¤§å†™å­—æ¯å’Œå…¶å®ƒå­—ç¬¦ä¿æŒä¸å˜ï¼Œå¹¶è¾“å‡ºç¿»è¯‘åçš„å­—ç¬¦æ•°ç»„ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥è¦ç¿»è¯‘çš„å¯†ç å­—ç¬¦ä¸²ï¼ˆé•¿åº¦å°äº100ï¼‰<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   ç¿»è¯‘åçš„å­—ç¬¦ä¸²ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>Adb Bcdza</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>Aca Bbcyz</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> len,i;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>];</span><br><span class="line">    gets(a);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;=<span class="string">&#x27;a&#x27;</span>&amp;&amp;a[i]&lt;=<span class="string">&#x27;z&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]==<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">                a[i]=<span class="string">&#x27;z&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                a[i]--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,a[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="èº«é«˜é¢„æµ‹"><a href="#èº«é«˜é¢„æµ‹" class="headerlink" title="èº«é«˜é¢„æµ‹"></a>èº«é«˜é¢„æµ‹</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æ¯ä¸ªåšçˆ¶æ¯çš„éƒ½å…³å¿ƒè‡ªå·±å­©å­æˆäººåçš„èº«é«˜ï¼Œæ®æœ‰å…³ç”Ÿç†å«ç”ŸçŸ¥è¯†ä¸æ•°ç†ç»Ÿè®¡åˆ†æè¡¨æ˜ï¼Œå½±å“å°å­©æˆäººåèº«é«˜çš„å› ç´ æœ‰é—ä¼ ã€é¥®é£Ÿä¹ æƒ¯ä¸åšæŒä½“è‚²é”»ç‚¼ç­‰ã€‚å°å­©æˆäººåèº«é«˜ä¸å…¶çˆ¶æ¯èº«é«˜å’Œè‡ªèº«æ€§åˆ«å¯†åˆ‡ç›¸å…³ã€‚<br>è®¾faHeightä¸ºå…¶çˆ¶èº«é«˜ï¼ŒmoHeightä¸ºå…¶æ¯èº«é«˜ï¼Œèº«é«˜é¢„æµ‹å…¬å¼ä¸ºï¼š<br>     ç”·æ€§æˆäººæ—¶èº«é«˜ &#x3D; (faHeight + moHeight) * 0.54(cm)<br>     å¥³æ€§æˆäººæ—¶èº«é«˜ &#x3D; (faHeight * 0.923 + moHeight) &#x2F; 2(cm)<br>   æ­¤å¤–ï¼Œå¦‚æœå–œçˆ±ä½“è‚²é”»ç‚¼ï¼Œé‚£ä¹ˆå¯å¢åŠ èº«é«˜2%ï¼Œå¦‚æœæœ‰è‰¯å¥½çš„å«ç”Ÿé¥®é£Ÿä¹ æƒ¯ï¼Œé‚£ä¹ˆå¯å¢åŠ èº«é«˜1.5%ã€‚<br>ç¼–ç¨‹ä»é”®ç›˜è¾“å…¥ä½ çš„æ€§åˆ«ï¼ˆç”¨å­—ç¬¦å‹å˜é‡å­˜å‚¨ï¼Œè¾“å…¥å­—ç¬¦fè¡¨ç¤ºå¥³æ€§ï¼Œè¾“å…¥å­—ç¬¦mè¡¨ç¤ºç”·æ€§ï¼‰ã€çˆ¶æ¯èº«é«˜ï¼ˆç”¨å®å‹å˜é‡å­˜å‚¨ï¼ŒfaHeightä¸ºå…¶çˆ¶èº«é«˜ï¼ŒmoHeightä¸ºå…¶æ¯èº«é«˜ï¼‰ã€æ˜¯å¦å–œçˆ±ä½“è‚²é”»ç‚¼ï¼ˆç”¨å­—ç¬¦å‹å˜é‡å­˜å‚¨ï¼Œè¾“å…¥å­—ç¬¦yè¡¨ç¤ºå–œçˆ±ï¼Œè¾“å…¥å­—ç¬¦nè¡¨ç¤ºä¸å–œçˆ±ï¼‰ã€æ˜¯å¦æœ‰è‰¯å¥½çš„é¥®é£Ÿä¹ æƒ¯ç­‰æ¡ä»¶ï¼ˆç”¨å­—ç¬¦å‹å˜é‡å­˜å‚¨ï¼Œè¾“å…¥å­—ç¬¦yè¡¨ç¤ºå–œçˆ±ï¼Œè¾“å…¥å­—ç¬¦nè¡¨ç¤ºä¸å–œçˆ±ï¼‰ï¼Œåˆ©ç”¨ç»™å®šå…¬å¼å’Œèº«é«˜é¢„æµ‹æ–¹æ³•å¯¹ä½ çš„èº«é«˜è¿›è¡Œé¢„æµ‹ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä»é”®ç›˜è¾“å…¥æ€§åˆ«ã€çˆ¶æ¯èº«é«˜ã€æ˜¯å¦å–œçˆ±ä½“è‚²é”»ç‚¼ã€æ˜¯å¦æœ‰è‰¯å¥½çš„é¥®é£Ÿä¹ æƒ¯ç­‰æ¡ä»¶ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>èº«é«˜ï¼ˆcmï¼‰ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>f<br>165<br>155<br>y<br>y</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>159.07</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> a,b,c,k=<span class="number">1</span>;</span><br><span class="line">    <span class="type">char</span> ch1,ch2,ch3;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;ch1);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;ch2);</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;ch3);</span><br><span class="line">    <span class="keyword">if</span>(ch1==<span class="string">&#x27;f&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        c=(a*<span class="number">0.923</span>+b)/<span class="number">2.0</span>;</span><br><span class="line">        <span class="keyword">if</span>(ch2==<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">            c*=<span class="number">1.02</span>;</span><br><span class="line">        <span class="keyword">if</span>(ch3==<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">            c*=<span class="number">1.015</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;        </span><br><span class="line">        c=(a+b)*<span class="number">0.54</span>*k;</span><br><span class="line">        <span class="keyword">if</span>(ch2==<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">            c*=<span class="number">1.02</span>;</span><br><span class="line">        <span class="keyword">if</span>(ch3==<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">            c*=<span class="number">1.015</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.2lf&quot;</span>,c);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å¤§å¥–èµ›ç°åœºç»Ÿåˆ†"><a href="#å¤§å¥–èµ›ç°åœºç»Ÿåˆ†" class="headerlink" title="å¤§å¥–èµ›ç°åœºç»Ÿåˆ†"></a>å¤§å¥–èµ›ç°åœºç»Ÿåˆ†</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™ä¸€ä¸ªä¸ºæŸå¤§å¥–èµ›ç°åœºç»Ÿåˆ†çš„ç¨‹åºï¼Œåœ¨è¯„å§”æ‰“åˆ†ä¹‹åï¼ŒåŠæ—¶é€šæŠ¥è¯„åˆ†ç»“æœã€‚å·²çŸ¥æŸå¤§å¥–èµ›æœ‰nä¸ªé€‰æ‰‹å‚èµ›ï¼Œmï¼ˆm&gt;2ï¼‰ä¸ªè¯„å§”ä¾æ¬¡ä¸ºå‚èµ›çš„é€‰æ‰‹è¯„åˆ¤æ‰“åˆ†ï¼Œæœ€é«˜10åˆ†ï¼Œæœ€ä½0åˆ†ã€‚<br>   ç»Ÿåˆ†è§„åˆ™ä¸ºï¼šåœ¨æ¯ä¸ªé€‰æ‰‹æ‰€å¾—çš„mä¸ªå¾—åˆ†ä¸­ï¼Œå»æ‰ä¸€ä¸ªæœ€é«˜åˆ†ï¼Œå»æ‰ä¸€ä¸ªæœ€ä½åˆ†åï¼Œå–å¹³å‡åˆ†ä¸ºè¯¥é€‰æ‰‹çš„æœ€åå¾—åˆ†ã€‚<br>   è¦æ±‚ç¼–ç¨‹å®ç°ï¼šæ ¹æ®nä¸ªé€‰æ‰‹çš„æœ€åå¾—åˆ†ï¼Œä»é«˜åˆ°ä½æ’å‡ºåæ¬¡è¡¨ï¼Œä»¥ä¾¿ç¡®å®šè·å¥–åå•ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   æŒ‰ä»¥ä¸‹é¡ºåºè¾“å…¥æ•°æ®ï¼Œæ•°æ®ä¹‹é—´ç”¨ç©ºæ ¼æˆ–å›è½¦é—´éš”ï¼š<br>   é€‰æ‰‹äººæ•°nï¼ˆä¸è¶…è¿‡40ï¼‰ï¼Œ<br>   è¯„å§”äººæ•°mï¼ˆä¸è¶…è¿‡20ï¼‰ï¼Œ<br>   ç¬¬1ä½é€‰æ‰‹çš„ç¼–å·ï¼Œ<br>   mä¸ªè¯„å§”çš„æ‰“åˆ†ï¼Œ<br>   ç¬¬2ä¸ªé€‰æ‰‹çš„ç¼–å·ï¼Œ<br>   mä¸ªè¯„å§”çš„æ‰“åˆ†<br>   ç¬¬nä½é€‰æ‰‹çš„ç¼–å·ï¼Œ<br>   mä¸ªè¯„å§”çš„æ‰“åˆ†ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   åˆ†è¡Œæ‰“å°æ¯ä¸ªé€‰æ‰‹çš„åæ¬¡ï¼Œç¼–å·ï¼Œæœ€åå¾—åˆ†ï¼Œé€‰æ‰‹å¾—åˆ†ä¿ç•™ä¸€ä½å°æ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5<br>5<br>11<br>9.5  9.6  9.7  9.4  9.0<br>12<br>9.0  9.2  9.1  9.3  8.9<br>13<br>9.6  9.7  9.5  9.8  9.4<br>14<br>8.9  8.8  8.7  9.0  8.6<br>15<br>9.0  9.1  8.8  8.9  9.2 </p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1 13 9.6<br>2 11 9.5<br>3 12 9.1<br>4 15 9.0<br>5 14 8.8  </p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,m,i=<span class="number">0</span>,j,z,a[<span class="number">40</span>];</span><br><span class="line">    <span class="type">int</span> k1,k2;</span><br><span class="line">    <span class="type">double</span> c[<span class="number">40</span>]=&#123;<span class="number">0</span>&#125;,b[<span class="number">40</span>][<span class="number">20</span>],f,min,max,temp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;m);</span><br><span class="line">    z=n;</span><br><span class="line">    <span class="keyword">while</span>(z)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;b[i][j]);</span><br><span class="line">        i++;</span><br><span class="line">        z--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        max=b[i][<span class="number">0</span>];</span><br><span class="line">        min=b[i][<span class="number">0</span>];</span><br><span class="line">        k1=<span class="number">0</span>;</span><br><span class="line">        k2=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;m;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(b[i][j]&gt;max)</span><br><span class="line">            &#123;</span><br><span class="line">                max=b[i][j];</span><br><span class="line">                k1=j;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(b[i][j]&lt;min)</span><br><span class="line">            &#123;</span><br><span class="line">                min=b[i][j];</span><br><span class="line">                k2=j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(z=<span class="number">0</span>;z&lt;m;z++)</span><br><span class="line">            <span class="keyword">if</span>(z!=k1 &amp;&amp; z!=k2)</span><br><span class="line">                c[i]+=b[i][z];</span><br><span class="line">        f=m<span class="number">-2</span>;</span><br><span class="line">        c[i]/=f;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">            <span class="keyword">if</span>(c[i]&lt;c[j])</span><br><span class="line">            &#123;</span><br><span class="line">                temp=c[i];</span><br><span class="line">                c[i]=c[j];</span><br><span class="line">                c[j]=temp;</span><br><span class="line">                temp=a[i];</span><br><span class="line">                a[i]=a[j];</span><br><span class="line">                a[j]=temp;</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d %.1lf\n&quot;</span>,i+<span class="number">1</span>,a[i],c[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;    </span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>

<h3 id="ç¤¼ç‚®å£°å“æ¬¡æ•°"><a href="#ç¤¼ç‚®å£°å“æ¬¡æ•°" class="headerlink" title="ç¤¼ç‚®å£°å“æ¬¡æ•°"></a>ç¤¼ç‚®å£°å“æ¬¡æ•°</h3><p> <strong>é¢˜ç›®æè¿°ï¼š</strong><br>   åœ¨åº†ç¥æ´»åŠ¨ä¸­ã€‚Aï¼ŒBï¼ŒCä¸‰æ¡å†›èˆ°è¦åŒæ—¶å¼€å§‹é¸£ç¤¼ç‚®å„nï¼ˆnä¸ºæ•´æ•°ï¼‰å“ã€‚å·²çŸ¥Aèˆ°æ¯éš”5ç§’æ”¾1æ¬¡ï¼ŒBèˆ°æ¯éš”6ç§’æ”¾1æ¬¡ï¼ŒCèˆ°æ¯éš”7ç§’æ”¾1æ¬¡ã€‚å‡è®¾å„ç‚®æ‰‹å¯¹æ—¶é—´çš„æŒæ¡éå¸¸å‡†ç¡®ï¼Œè¯·é—®è§‚ä¼—æ€»å…±å¯ä»¥å¬åˆ°å‡ æ¬¡ç¤¼ç‚®å£°ï¼Ÿ<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ªæ•´æ•°ï¼ˆnï¼‰<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   ä¸€ä¸ªæ•´æ•°ï¼Œå³å¬åˆ°ç¤¼ç‚®å£°çš„æ¬¡æ•°mã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>21</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>54</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,sum,i;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">21</span>]=&#123;<span class="number">0</span>&#125;,b[<span class="number">21</span>]=&#123;<span class="number">0</span>&#125;,c[<span class="number">21</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    sum=<span class="number">3</span>*n<span class="number">-2</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">5</span>*(n<span class="number">-1</span>);i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i%<span class="number">5</span>==<span class="number">0</span>&amp;&amp;i%<span class="number">6</span>==<span class="number">0</span>&amp;&amp;i%<span class="number">7</span>==<span class="number">0</span>)</span><br><span class="line">            sum-=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>((i%<span class="number">5</span>==<span class="number">0</span>&amp;&amp;i%<span class="number">6</span>==<span class="number">0</span>)||(i%<span class="number">5</span>==<span class="number">0</span>&amp;&amp;i%<span class="number">7</span>==<span class="number">0</span>)||(i%<span class="number">6</span>==<span class="number">0</span>&amp;&amp;i%<span class="number">7</span>==<span class="number">0</span>))</span><br><span class="line">            sum--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">5</span>*(n<span class="number">-1</span>)+<span class="number">1</span>;i&lt;=<span class="number">6</span>*(n<span class="number">-1</span>);i++)</span><br><span class="line">        <span class="keyword">if</span>(i%<span class="number">6</span>==<span class="number">0</span>&amp;&amp;i%<span class="number">7</span>==<span class="number">0</span>)</span><br><span class="line">            sum--;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="äº§å€¼ç¿»ç•ªè®¡ç®—"><a href="#äº§å€¼ç¿»ç•ªè®¡ç®—" class="headerlink" title="äº§å€¼ç¿»ç•ªè®¡ç®—"></a>äº§å€¼ç¿»ç•ªè®¡ç®—</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   å‡è®¾å½“å¹´å·¥ä¸šäº§å€¼ä¸º100ï¼Œå·¥ä¸šäº§å€¼çš„å¢é•¿ç‡æ¯å¹´ä¸ºc%ï¼Œä»é”®ç›˜è¾“å…¥ä¸€ä¸ªcï¼ˆ0&lt;&#x3D;c&lt;&#x3D;30ï¼‰ï¼Œè¯•æ±‚å·¥ä¸šäº§å€¼è¿‡å¤šå°‘å¹´å¯å®ç°ç¿»ç•ªï¼ˆå³å¢åŠ ä¸€å€ï¼‰ã€‚<br>   æ³¨ï¼šåä¸€å¹´çš„äº§å€¼æ˜¯åœ¨å‰ä¸€å¹´çš„åŸºç¡€ä¸Šå¢é•¿c%ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ª0ï½30çš„å®æ•°ï¼ˆå¢é•¿ç‡ï¼‰ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   å®ç°ç¿»ç•ªçš„å¹´æ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>6</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>12</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> c,yy=<span class="number">0</span>;</span><br><span class="line">    <span class="type">float</span> m=<span class="number">100</span>,k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;c);</span><br><span class="line">    k=c/<span class="number">100.0</span>;</span><br><span class="line">    <span class="keyword">while</span>(m&lt;<span class="number">200</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        yy++;</span><br><span class="line">        m+=k*m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,yy);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="ç¦åˆ©å½©ç¥¨ï¼ˆåŒè‰²çƒï¼‰"><a href="#ç¦åˆ©å½©ç¥¨ï¼ˆåŒè‰²çƒï¼‰" class="headerlink" title="ç¦åˆ©å½©ç¥¨ï¼ˆåŒè‰²çƒï¼‰"></a>ç¦åˆ©å½©ç¥¨ï¼ˆåŒè‰²çƒï¼‰</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>      ç°åœ¨ä¹°å½©ç¥¨æˆä¸ºä¸€ç§å‘è´¢è‡´å¯Œçš„é€”å¾„ï¼Œå½“ç„¶ä¸­å¥–çš„æœºä¼šè¿˜æ˜¯æ¯”è¾ƒå°‘ï¼Œç‰¹åˆ«æ˜¯å¤§å¥–ã€‚<br>å…¶æ¸¸æˆè§„åˆ™å¦‚ä¸‹ï¼š å½©æ°‘ä»1<del>33ä¸­é€‰æ‹©å…­ä¸ªéšæœºçš„å·ç ï¼Œä½œä¸ºçº¢çƒå·ç ï¼Œä»1</del>16ä¸­é€‰æ‹©ä¸€ä¸ªå·ç ä½œä¸ºç¯®çƒå·ç ã€‚è¿™æ ·ä¸€å…±æœ‰7ä¸ªå·ç ã€‚<br>ä¸­å¥–è§„åˆ™æ˜¯ï¼šä¸å¼€å¥–å·ç ç›¸æ¯”ï¼Œ<br>ä¸€ç­‰å¥–ï¼Œçº¢è‰²å·ç å’Œè“è‰²å·ç å¿…é¡»å®Œå…¨ä¸€æ ·ï¼›<br>äºŒç­‰å¥–ï¼Œå…­ä¸ªçº¢è‰²å·ç ç›¸åŒï¼Œä½†è“è‰²å·ç ä¸åŒï¼›<br>ä¸‰ç­‰å¥–5ä¸ªçº¢è‰²å·ç ç›¸åŒï¼ˆä¸åˆ†å…ˆåé¡ºåºï¼‰å’Œä¸€ä¸ªè“è‰²å·ç ç›¸åŒï¼›<br>å››ç­‰å¥–ï¼Œ5ä¸ªçº¢è‰²å·ç ç›¸åŒå¹¶ä¸”è“è‰²å·ç ä¸åŒ æˆ–è€… 4ä¸ªçº¢è‰²å·ç ç›¸åŒå¹¶ä¸”è“è‰²å·ç ç›¸åŒï¼›<br>äº”ç­‰å¥– 4ä¸ªçº¢è‰²å·ç ç›¸åŒå¹¶ä¸”è“è‰²å·ç ä¸åŒ æˆ–è€… 3ä¸ªçº¢è‰²å·ç ç›¸åŒå¹¶ä¸”è“è‰²å·ç ç›¸åŒï¼›<br>å…­ç­‰å¥– è“è‰²å·ç å¿…é¡»ç›¸åŒï¼Œçº¢è‰²å·ç å¯ä»¥ä¸º0ã€1ã€2ä¸ªã€‚<br>å…¶ä»–çš„å·ç å±äºæ²¡ä¸­å¥–<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ç¬¬ä¸€è¡Œæ˜¯7ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå¼€å¥–å·ç ,å‰é¢å…­ä¸ªæ˜¯çº¢è‰²çƒå·ç ï¼Œæœ€åä¸€ä¸ªæ˜¯ç¯®çƒå·ç ï¼Œæ¥ä¸‹æ¥çš„5è¡Œï¼Œæ¯è¡ŒåŒ…å«åˆæ³•çš„å½©ç¥¨å·ç ï¼ˆå‰é¢å…­ä¸ªæ˜¯çº¢è‰²çƒå·ç ï¼Œæœ€åä¸€ä¸ªæ˜¯ç¯®çƒå·ç ï¼‰ï¼Œæ¯ä¸ªå·ç ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   å¯¹äºæ¯ä¸€ä¸ªå½©ç¥¨å·ç ï¼Œåœ¨ä¸€è¡Œä¸­ è¾“å‡ºå…¶ç›¸åº”çš„å¥–åŠ±ç­‰çº§ï¼Œä¸€ç­‰å¥–ä¸º1ï¼ŒäºŒç­‰å¥–ä¸º2ï¼Œä¸‰ç­‰å¥–ä¸º3ï¼Œå››ç­‰å¥–ä¸º4ï¼Œäº”ç­‰å¥–ä¸º5ï¼Œå…­ç­‰å¥–ä¸º6ï¼Œæ— å¥–ä¸º0ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>23 1 8 9 28 16 9<br>2 3 4 5 6 22 9<br>2 3 4 5 6 22 9<br>2 3 4 5 6 22 9<br>2 3 4 5 6 22 9<br>2 3 4 5 6 22 9</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>6<br>6<br>6<br>6<br>6</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">7</span>],b[<span class="number">7</span>],i,sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d %d %d %d&quot;</span>,&amp;b[<span class="number">0</span>],&amp;b[<span class="number">1</span>],&amp;b[<span class="number">2</span>],&amp;b[<span class="number">3</span>],&amp;b[<span class="number">4</span>],&amp;b[<span class="number">5</span>],&amp;b[<span class="number">6</span>])!=EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)</span><br><span class="line">            <span class="keyword">if</span>(a[i]==b[i])</span><br><span class="line">                sum++;</span><br><span class="line">        <span class="keyword">if</span>(sum==<span class="number">6</span>&amp;&amp;a[<span class="number">6</span>]==b[<span class="number">6</span>])</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;1\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(sum==<span class="number">6</span>&amp;&amp;a[<span class="number">6</span>]!=b[<span class="number">6</span>])</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;2\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(sum==<span class="number">5</span>&amp;&amp;a[<span class="number">6</span>]==b[<span class="number">6</span>])</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;3\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>((sum==<span class="number">5</span>&amp;&amp;a[<span class="number">6</span>]!=b[<span class="number">6</span>])||(sum==<span class="number">4</span>&amp;&amp;a[<span class="number">6</span>]==b[<span class="number">6</span>]))</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;4\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>((sum==<span class="number">4</span>&amp;&amp;a[<span class="number">6</span>]!=b[<span class="number">6</span>])||(sum==<span class="number">3</span>&amp;&amp;a[<span class="number">6</span>]==b[<span class="number">6</span>]))</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;5\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[<span class="number">6</span>]==b[<span class="number">6</span>])</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;6\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;0\n&quot;</span>);</span><br><span class="line">        sum=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="ç§»åŠ¨æ•°åˆ—"><a href="#ç§»åŠ¨æ•°åˆ—" class="headerlink" title="ç§»åŠ¨æ•°åˆ—"></a>ç§»åŠ¨æ•°åˆ—</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æœ‰nä¸ªæ•´æ•°ï¼Œä½¿å…¶å‰é¢å„æ•°é¡ºåºå‘åç§»mä¸ªä½ç½®ï¼Œæœ€åmä¸ªæ•°å˜æˆæœ€å‰é¢çš„mä¸ªæ•°ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥æ€»æ•°nï¼ˆ0ï½20çš„æ•´æ•°ï¼‰ï¼Œåç§»ä½æ•°mï¼ˆm&lt;nï¼‰ï¼Œè¾“å…¥nä¸ªæ•´æ•°ï¼Œé—´éš”ä»¥ç©ºæ ¼ã€‚</p>
<p><strong>è¾“å‡ºæè¿°ï¼š</strong><br>   ç§»åŠ¨åçš„æ•°åˆ—ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>8<br>3<br>1 2 3 4 5 6 7 8</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>6 7 8 1 2 3 4 5</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">20</span>],i,n,m,b[<span class="number">20</span>],k=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(i=n<span class="number">-1</span>;i&gt;=n-m;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        b[k]=a[i];</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=n<span class="number">-1</span>;i&gt;=m;i--)</span><br><span class="line">        a[i]=a[i-m];</span><br><span class="line">    <span class="keyword">for</span>(i=k<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,b[i]);</span><br><span class="line">    <span class="keyword">for</span>(i=m;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="è¡Œææ‰˜è¿"><a href="#è¡Œææ‰˜è¿" class="headerlink" title="è¡Œææ‰˜è¿"></a>è¡Œææ‰˜è¿</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>       é“è·¯æ‰˜è¿è¡Œæè§„å®šï¼šè¡Œæé‡ä¸è¶…è¿‡50å…¬æ–¤çš„ï¼Œæ‰˜è¿è´¹æŒ‰æ¯å…¬æ–¤0.15å…ƒè®¡è´¹ï¼›å¦‚è¶…è¿‡50å…¬æ–¤ï¼Œè¶…è¿‡éƒ¨åˆ†æ¯å…¬æ–¤æŒ‰0.25å…ƒè®¡è´¹ã€‚è¯·ç¼–ç¨‹å®ç°è‡ªåŠ¨è®¡è´¹åŠŸèƒ½ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨è¿°è¦æ‰˜è¿çš„è¡Œæçš„é‡é‡ï¼Œå•ä½ä¸ºå…¬æ–¤<br><strong>è¾“å‡ºæè¿°ï¼š</strong><br>   æ‰˜è¿çš„è¡Œæé‡é‡ï¼ˆå•ä½å…¬æ–¤ï¼‰ç©ºæ ¼å’Œè¿è´¹ï¼ˆå•ä½ä¸ºå…ƒï¼Œä¿ç•™2ä½å°æ•°ï¼‰ã€‚<br> <strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>45</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>45 6.75</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="type">double</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,n);</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">50</span>)</span><br><span class="line">        sum+=<span class="number">0.15</span>*n;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        sum+=<span class="number">0.15</span>*<span class="number">50</span>+<span class="number">0.25</span>*(n<span class="number">-50</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.2lf&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ•°æ¯”è¾ƒ"><a href="#åˆ†æ•°æ¯”è¾ƒ" class="headerlink" title="åˆ†æ•°æ¯”è¾ƒ"></a>åˆ†æ•°æ¯”è¾ƒ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è¯·ç¼–ç¨‹å®ç°æ¯”è¾ƒä¸¤ä¸ªåˆ†æ•°çš„å¤§å°ã€‚ï¼ˆæ³¨ï¼šè¿›è¡Œåˆ†æ•°çš„é€šåˆ†åå†æ¯”è¾ƒåˆ†å­çš„å¤§å°ï¼‰<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸¤ä¸ªåˆ†æ•°ï¼Œæ ¼å¼ä¸ºåˆ†å­&#x2F;åˆ†æ¯ åˆ†å­&#x2F;åˆ†æ¯ï¼Œåˆ†å­ï¼Œåˆ†æ¯å‡ä¸ºæ•´æ•°ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºæ¯”è¾ƒåçš„ç»“æœã€‚å¦‚æœç­‰äºï¼Œåˆ™è¾“å‡ºåˆ†å­&#x2F;åˆ†æ¯&#x3D;åˆ†å­&#x2F;åˆ†æ¯;å¦‚æœå°äºåˆ†å­&#x2F;åˆ†æ¯&lt;åˆ†å­&#x2F;åˆ†æ¯;å¦‚æœå¤§äºï¼Œåˆ™è¾“å‡ºåˆ†å­&#x2F;åˆ†æ¯&gt;åˆ†å­&#x2F;åˆ†æ¯<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>1&#x2F;2 1&#x2F;3</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1&#x2F;2&gt;1&#x2F;3</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a,b,c,d,x,y;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d/%d %d/%d&quot;</span>,&amp;a,&amp;b,&amp;c,&amp;d);</span><br><span class="line">    x=a*d;</span><br><span class="line">    y=b*c;</span><br><span class="line">    <span class="keyword">if</span>(a&lt;<span class="number">0</span> || c&lt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a&gt;<span class="number">0</span> &amp;&amp; c&lt;<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d/%d&gt;%d/%d&quot;</span>,a,b,c,d);</span><br><span class="line">        <span class="keyword">if</span>(a&lt;<span class="number">0</span> &amp;&amp; c&gt;<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d/%d&lt;%d/%d&quot;</span>,a,b,c,d);</span><br><span class="line">        <span class="keyword">if</span>(a&lt;<span class="number">0</span> &amp;&amp; c&lt;<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">if</span>(x&gt;y)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d/%d&lt;%d/%d&quot;</span>,a,b,c,d);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(x==y)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d/%d=%d/%d&quot;</span>,a,b,c,d);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d/%d&gt;%d/%d&quot;</span>,a,b,c,d);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span>(x&gt;y)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d/%d&gt;%d/%d&quot;</span>,a,b,c,d);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(x==y)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d/%d=%d/%d&quot;</span>,a,b,c,d);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d/%d&lt;%d/%d&quot;</span>,a,b,c,d);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="æ±‚äººæ•°"><a href="#æ±‚äººæ•°" class="headerlink" title="æ±‚äººæ•°"></a>æ±‚äººæ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ŒåŠŸèƒ½æ˜¯è®¡ç®—nä¸ªå­¦ç”Ÿçš„æˆç»©ä¸­ï¼Œé«˜äºå¹³å‡æˆç»©çš„äººæ•°ï¼Œå¹¶ä½œä¸ºå‡½æ•°å€¼ã€‚ç”¨ä¸»å‡½æ•°æ¥è°ƒç”¨å®ƒï¼Œç»Ÿè®¡50ä¸ªå­¦ç”Ÿæˆç»©ä¸­ï¼Œé«˜äºå¹³å‡æˆç»©çš„æœ‰å¤šå°‘äººï¼Ÿ<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥50ä¸ªå­¦ç”Ÿçš„æˆç»©<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸€ä¸ªæ•´æ•°è¡¨ç¤ºé«˜äºå¹³å‡æˆç»©çš„äººæ•°</p>
<p><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>45 46 47 48 49 50 41 52 53 54<br>55 56 57 58 59 60 61 62 63 64<br>65 66 67 68 69 70 71 72 73 74<br>75 76 77 78 79 80 81 82 83 84<br>85 86 87 88 89 90 91 92 93 94</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>25</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">avg</span><span class="params">(<span class="type">int</span> a[<span class="number">50</span>])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,sum=<span class="number">0</span>;</span><br><span class="line">    <span class="type">double</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">50</span>;i++)</span><br><span class="line">        k+=a[i];</span><br><span class="line">    k/=<span class="number">50.0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">50</span>;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;k)</span><br><span class="line">            sum++;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">50</span>],n,i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">50</span>;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    n=avg(a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,n);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="eæ•°åˆ—"><a href="#eæ•°åˆ—" class="headerlink" title="eæ•°åˆ—"></a>eæ•°åˆ—</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br> â”Œ e(1)&#x3D;e(2)&#x3D;1,<br> â”” e(n)&#x3D;(n-1)*e(n-1)+(n-2)*e(n-2)  (n&gt;2) ç§°ä¸ºeæ•°åˆ—ï¼Œ<br>æ¯ä¸€ä¸ªe(n) (n&#x3D;1,2,â€¦)ç§°ä¸ºeæ•°ã€‚æ±‚[1ï¼Œm]ä¹‹å†…ï¼š<br>   (1)æœ€å¤§çš„eæ•°ã€‚<br>   (2)eæ•°çš„æ•°ç›®<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºmçš„å€¼ï¼Œm&lt;300000;<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸¤ä¸ªæ•´æ•°ï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºæœ€å¤§çš„eæ•°ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºeæ•°çš„æ•°ç›®ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>30000</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>16687<br>8</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> e[<span class="number">20</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;,m,j,i=<span class="number">2</span>,max;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;m);</span><br><span class="line">    <span class="keyword">while</span>(e[i]&lt;=<span class="number">300000</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        i++;</span><br><span class="line">        e[i]=(i<span class="number">-1</span>)*e[i<span class="number">-1</span>]+(i<span class="number">-2</span>)*e[i<span class="number">-2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;i;j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(e[j]&lt;=m)</span><br><span class="line">            max=e[j];</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n%d&quot;</span>,max,j<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="è¿ç®—ç¬¦-å‰ç½®åç½®ç»ƒä¹ -èƒ¡å®é™"><a href="#è¿ç®—ç¬¦-å‰ç½®åç½®ç»ƒä¹ -èƒ¡å®é™" class="headerlink" title="è¿ç®—ç¬¦++å‰ç½®åç½®ç»ƒä¹ (èƒ¡å®é™)"></a>è¿ç®—ç¬¦++å‰ç½®åç½®ç»ƒä¹ (èƒ¡å®é™)</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¨‹åºéƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼Œå†™å‡ºä¸€ä¸ªå®Œæ•´çš„ç¨‹åºï¼Œè¾“å‡ºmï¼Œnçš„å€¼ã€‚<br>  int i&#x3D;8,j&#x3D;10,m,n;<br>  m&#x3D;++i;<br>  n&#x3D;j++;<br>  m&#x3D;++j;<br>   n&#x3D;i++;<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   æ— è¾“å…¥<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºmï¼Œnçš„å€¼ï¼ˆä¸å«å›è½¦ï¼Œm nä¸­é—´æœ‰ä¸€ç©ºæ ¼ï¼‰<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>æ— </p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>12 9</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i=<span class="number">8</span>,j=<span class="number">10</span>,m,n;</span><br><span class="line">    m=++i;</span><br><span class="line">    n=j++;</span><br><span class="line">    m=++j;</span><br><span class="line">    n=i++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d&quot;</span>,m,n);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æŒ‰æ ¼å¼è¦æ±‚æ˜¾ç¤ºæ—¥æœŸ"><a href="#æŒ‰æ ¼å¼è¦æ±‚æ˜¾ç¤ºæ—¥æœŸ" class="headerlink" title="æŒ‰æ ¼å¼è¦æ±‚æ˜¾ç¤ºæ—¥æœŸ"></a>æŒ‰æ ¼å¼è¦æ±‚æ˜¾ç¤ºæ—¥æœŸ</h3><p> <strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æ¥æ”¶ç”¨æˆ·ä»é”®ç›˜è¾“å…¥çš„æ—¥æœŸä¿¡æ¯å¹¶å°†å…¶æ˜¾ç¤ºå‡ºæ¥ã€‚å…¶ä¸­ï¼Œè¾“å…¥æ—¥æœŸçš„å½¢å¼ä¸ºæœˆ&#x2F;æ—¥&#x2F;å¹´ï¼ˆå³mm&#x2F;dd&#x2F;yyyyï¼‰ï¼Œè¾“å‡ºæ—¥æœŸçš„å½¢å¼ä¸ºå¹´æœˆæ—¥ï¼ˆå³yyyymmddï¼‰ã€‚<br> <strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä»¥å½¢å¼ä¸ºâ€œæœˆ&#x2F;æ—¥&#x2F;å¹´â€ï¼ˆå³mm&#x2F;dd&#x2F;yyyyï¼‰çš„æ ¼å¼ï¼Œè¾“å…¥ä¸€ä¸ªæ—¥æœŸã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   ä»¥å½¢å¼ä¸ºå¹´æœˆæ—¥ï¼ˆå³yyyymmddï¼‰è¾“å‡ºæ—¥æœŸã€‚</p>
<p><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>2&#x2F;17&#x2F;2010</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>20100217</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> y,m,d;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d/%d/%d&quot;</span>,&amp;m,&amp;d,&amp;y);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d%02d%02d&quot;</span>,y,m,d);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="æ±‚åœ†çš„å‘¨é•¿å’Œé¢ç§¯"><a href="#æ±‚åœ†çš„å‘¨é•¿å’Œé¢ç§¯" class="headerlink" title="æ±‚åœ†çš„å‘¨é•¿å’Œé¢ç§¯"></a>æ±‚åœ†çš„å‘¨é•¿å’Œé¢ç§¯</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ä»é”®ç›˜è¾“å…¥åœ†çš„åŠå¾„ï¼Œæ±‚è¯¥åœ†çš„å‘¨é•¿å’Œé¢ç§¯ã€‚ï¼ˆæ³¨ï¼š å–3.14ï¼‰<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ªå®æ•°rã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   åœ†çš„å‘¨é•¿å’Œé¢ç§¯ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>1</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>r&#x3D;1.00,l&#x3D;6.28,s&#x3D;3.14</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PI 3.14</span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">float</span> r,l,s;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%f&quot;</span>,&amp;r);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;r=%.2f,l=%.2f,s=%.2f&quot;</span>,r,<span class="number">2</span>*PI*r,PI*r*r);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="è®¡ç®—åˆ†æ®µå‡½æ•°"><a href="#è®¡ç®—åˆ†æ®µå‡½æ•°" class="headerlink" title="è®¡ç®—åˆ†æ®µå‡½æ•°"></a>è®¡ç®—åˆ†æ®µå‡½æ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>è®¡ç®—åˆ†æ®µå‡½æ•°<br>y&#x3D;x   (x&lt;0)<br>y&#x3D;0   (x&#x3D;0)<br>y&#x3D;sqrt(x)  (x&gt;0)<br>è¾“å…¥xï¼Œæ‰“å°å‡ºyå€¼ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ªå®æ•°xã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   xçš„å€¼å’Œåˆ†æ®µå‡½æ•°yçš„å€¼ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>0</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>x&#x3D;0.000000,y&#x3D;0.000000</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> x,z;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;x);</span><br><span class="line">    <span class="keyword">if</span>(x&gt;<span class="number">0</span>)</span><br><span class="line">        z=<span class="built_in">sqrt</span>(x);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(x==<span class="number">0</span>)</span><br><span class="line">        z=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        z=x;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;x=%lf,y=%lf&quot;</span>,x,z);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="ç¡®å®šä¸€ä¸ªæ•°çš„ä½æ•°"><a href="#ç¡®å®šä¸€ä¸ªæ•°çš„ä½æ•°" class="headerlink" title="ç¡®å®šä¸€ä¸ªæ•°çš„ä½æ•°"></a>ç¡®å®šä¸€ä¸ªæ•°çš„ä½æ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™ç¨‹åºç”¨æ¥ç¡®å®šä¸€ä¸ªæ•°çš„ä½æ•°ã€‚å¦‚ï¼š<br>   è¾“å…¥ï¼š 567<br>   è¾“å‡ºï¼šThe number 567 has 3 digits<br>   å‡è®¾è¾“å…¥çš„æ•°æœ€å¤šä¸è¶…è¿‡å››ä½ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ªæ•´æ•°nã€‚<br> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   æŒ‰æŒ‡å®šæ ¼å¼è¾“å‡ºè¿™ä¸ªæ•°çš„ä½æ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>567</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>The number 567 has 3 digits</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,digits=<span class="number">1</span>,k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    k=n;</span><br><span class="line">    <span class="keyword">if</span>(n&gt;<span class="number">9</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(n/<span class="number">10</span>&gt;<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            digits++;</span><br><span class="line">            n/=<span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The number %d has %d digits&quot;</span>,k,digits);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;The number %d has 1 digit&quot;</span>,k);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="æ˜¾ç¤ºæŸä¸ªæ•°çš„è‹±æ–‡å•è¯"><a href="#æ˜¾ç¤ºæŸä¸ªæ•°çš„è‹±æ–‡å•è¯" class="headerlink" title="æ˜¾ç¤ºæŸä¸ªæ•°çš„è‹±æ–‡å•è¯"></a>æ˜¾ç¤ºæŸä¸ªæ•°çš„è‹±æ–‡å•è¯</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç”¨switchè¯­å¥ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥ä¸€ä¸ªä¸¤ä½çš„æ•´æ•°ï¼Œæ˜¾ç¤ºè¿™ä¸ªæ•°çš„è‹±æ–‡å•è¯ã€‚ä¾‹å¦‚ï¼šè¾“å…¥45ï¼Œæ˜¾ç¤ºforty-fiveã€‚æ³¨æ„ï¼šå¯¹11ï½19è¦è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ªä¸¤ä½çš„æ•´æ•°nã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¿™ä¸ªæ•°çš„è‹±æ–‡å•è¯ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>45</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>forty-five</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,s,m;<span class="comment">//sä¸ºåä½æ•°ï¼Œmä¸ºä¸ªä½æ•°ã€‚</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">switch</span>(n)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>:<span class="built_in">printf</span>(<span class="string">&quot;ten&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">11</span>:<span class="built_in">printf</span>(<span class="string">&quot;eleven&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">12</span>:<span class="built_in">printf</span>(<span class="string">&quot;twelve&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">13</span>:<span class="built_in">printf</span>(<span class="string">&quot;thirteen&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">14</span>:<span class="built_in">printf</span>(<span class="string">&quot;fourteen&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">15</span>:<span class="built_in">printf</span>(<span class="string">&quot;fifteen&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">16</span>:<span class="built_in">printf</span>(<span class="string">&quot;sixteen&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">17</span>:<span class="built_in">printf</span>(<span class="string">&quot;seventeen&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">18</span>:<span class="built_in">printf</span>(<span class="string">&quot;eighteen&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">19</span>:<span class="built_in">printf</span>(<span class="string">&quot;nineteen&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    s=n/<span class="number">10</span>;</span><br><span class="line">    m=n%<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">if</span>(s&gt;<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">switch</span>(s)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:<span class="built_in">printf</span>(<span class="string">&quot;twenty&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:<span class="built_in">printf</span>(<span class="string">&quot;thirty&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:<span class="built_in">printf</span>(<span class="string">&quot;fourty&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:<span class="built_in">printf</span>(<span class="string">&quot;fifty&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:<span class="built_in">printf</span>(<span class="string">&quot;sixty&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>:<span class="built_in">printf</span>(<span class="string">&quot;seventy&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>:<span class="built_in">printf</span>(<span class="string">&quot;eightty&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>:<span class="built_in">printf</span>(<span class="string">&quot;ninety&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span>(m)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:<span class="built_in">printf</span>(<span class="string">&quot;&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:<span class="built_in">printf</span>(<span class="string">&quot;-one&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:<span class="built_in">printf</span>(<span class="string">&quot;-two&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:<span class="built_in">printf</span>(<span class="string">&quot;-three&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:<span class="built_in">printf</span>(<span class="string">&quot;-four&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:<span class="built_in">printf</span>(<span class="string">&quot;-five&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:<span class="built_in">printf</span>(<span class="string">&quot;-six&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>:<span class="built_in">printf</span>(<span class="string">&quot;-seven&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>:<span class="built_in">printf</span>(<span class="string">&quot;-eight&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>:<span class="built_in">printf</span>(<span class="string">&quot;-nine&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>


<h3 id="æ‰¾å‡ºæœ€å¤§æ•°"><a href="#æ‰¾å‡ºæœ€å¤§æ•°" class="headerlink" title="æ‰¾å‡ºæœ€å¤§æ•°"></a>æ‰¾å‡ºæœ€å¤§æ•°</h3><p> <strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç”¨æˆ·ä»é”®ç›˜è¾“å…¥è‹¥å¹²ä¸ªæ•°ï¼Œå½“è¾“å…¥0æˆ–è´Ÿæ•°æ—¶è¾“å‡ºè¿™äº›æ•°ä¸­çš„æœ€å¤§éè´Ÿæ•°ã€‚æ³¨æ„ï¼Œè¾“å…¥çš„æ•°ä¸è¦æ±‚ä¸€å®šæ˜¯æ•´æ•°ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥è‹¥å¹²ä¸ªæ•°ï¼Œæœ€åä¸€ä¸ªä¸º0æˆ–è´Ÿæ•°ã€‚<br> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   æœ€å¤§éè´Ÿæ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>2.3<br>6.3<br>5.4<br>0</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>max&#x3D;6.300000</p>
</blockquote>
<p><strong>ä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">float</span> max=<span class="number">0</span>,n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%f&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n&gt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(max&lt;n)</span><br><span class="line">            max=n;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%f&quot;</span>,&amp;n);</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;max=%f&quot;</span>,max);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="æ±‚æœ€ç®€åˆ†å¼"><a href="#æ±‚æœ€ç®€åˆ†å¼" class="headerlink" title="æ±‚æœ€ç®€åˆ†å¼"></a>æ±‚æœ€ç®€åˆ†å¼</h3><p> <strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç”¨æˆ·è¾“å…¥ä¸€ä¸ªåˆ†æ•°ï¼Œè¦æ±‚å°†å…¶çº¦åˆ†ï¼Œè¾“å‡ºæœ€ç®€åˆ†å¼ã€‚ä¾‹å¦‚ï¼šè¾“å…¥3&#x2F;12ï¼Œè¾“å‡º1&#x2F;4ã€‚æç¤ºï¼šä¸ºäº†æŠŠåˆ†å¼åŒ–ç®€ä¸ºæœ€ç®€åˆ†å¼ï¼Œé¦–å…ˆæ±‚åˆ†å­å’Œåˆ†æ¯çš„æœ€å¤§å…¬çº¦æ•°ï¼Œç„¶ååˆ†å­å’Œåˆ†æ¯åˆ†åˆ«é™¤ä»¥æœ€å¤§å…¬çº¦æ•°ã€‚<br> <strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ªåˆ†æ•°ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   æœ€ç®€åˆ†å¼ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>3&#x2F;12</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>æœ€ç®€åˆ†æ•°ä¸º1&#x2F;4</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,m,i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d/%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=n;i&gt;<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(n%i==<span class="number">0</span> &amp;&amp; m%i==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;æœ€ç®€åˆ†æ•°ä¸º%d/%d&quot;</span>,n/i,m/i);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="è®¡ç®—å¤šé¡¹å¼çš„å’Œ"><a href="#è®¡ç®—å¤šé¡¹å¼çš„å’Œ" class="headerlink" title="è®¡ç®—å¤šé¡¹å¼çš„å’Œ"></a>è®¡ç®—å¤šé¡¹å¼çš„å’Œ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è®¡ç®—ä»2ï½nçš„è‡ªç„¶æ•°ä¸­å¶æ•°çš„å’Œï¼Œå³2+4+6+8+â€¦çš„å€¼ã€‚<br>æ³¨æ„ï¼šnå¯èƒ½æ˜¯å¶æ•°ï¼Œä¹Ÿå¯èƒ½æ˜¯å¥‡æ•°ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ªæ•´æ•°nã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   ä»2ï½nçš„è‡ªç„¶æ•°ä¸­å¶æ•°çš„å’Œã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>100</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>sum&#x3D;2550</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,sum=<span class="number">0</span>,i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(i%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line">            sum+=i;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;sum=%d&quot;</span>,sum);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="é˜¶ä¹˜ç´¯åŠ "><a href="#é˜¶ä¹˜ç´¯åŠ " class="headerlink" title="é˜¶ä¹˜ç´¯åŠ "></a>é˜¶ä¹˜ç´¯åŠ </h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è®¡ç®—1ï¼+2ï¼+3ï¼â€¦â€¦+nï¼<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ªæ•´æ•°nï¼ˆn&lt;&#x3D;20)ã€‚</p>
<p><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   1åˆ°nçš„é˜¶ä¹˜ç´¯åŠ ä¹‹å’Œã€‚<br> <strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>s&#x3D;153</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,s=<span class="number">0</span>,m,i,j;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>,m=<span class="number">1</span>;j&lt;=i;j++)</span><br><span class="line">            m*=j;</span><br><span class="line">        s+=m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;s=%d&quot;</span>,s);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="è®¡ç®—eçš„è¿‘ä¼¼å€¼"><a href="#è®¡ç®—eçš„è¿‘ä¼¼å€¼" class="headerlink" title="è®¡ç®—eçš„è¿‘ä¼¼å€¼"></a>è®¡ç®—eçš„è¿‘ä¼¼å€¼</h3><p> <strong>é¢˜ç›®æè¿°ï¼š</strong><br>   åˆ©ç”¨æ³°å‹’çº§æ•°<br>   e&#x3D;1+1&#x2F;1!+1&#x2F;2!+â€¦â€¦+1&#x2F;n!,<br>   è®¡ç®—eçš„è¿‘ä¼¼å€¼ã€‚ç²¾åº¦è¦æ±‚æœ€åä¸€é¡¹çš„ç»å¯¹å€¼å°äºfï¼ˆå¦‚ï¼šf&#x3D;1e-5ï¼‰ã€‚<br> <strong>è¾“å…¥æè¿°ï¼š</strong><br>   ç²¾åº¦ã€‚<br> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   eçš„è¿‘ä¼¼å€¼ï¼Œä¿ç•™6ä½å°æ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>1e-5</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>e&#x3D;2.718282</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,m=<span class="number">1</span>,i,k;</span><br><span class="line">    <span class="type">float</span> e=<span class="number">1</span>,s;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%f&quot;</span>,&amp;s);</span><br><span class="line">    <span class="keyword">for</span>(n=<span class="number">1</span>;;n++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>,k=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            k*=i;</span><br><span class="line">        m=k;</span><br><span class="line">        e+=<span class="number">1.0</span>/m;</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">1.0</span>/m&lt;s)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;e=%f&quot;</span>,e);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>


<h3 id="è®¡ç®—sinxçš„å€¼"><a href="#è®¡ç®—sinxçš„å€¼" class="headerlink" title="è®¡ç®—sinxçš„å€¼"></a>è®¡ç®—sinxçš„å€¼</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   åˆ©ç”¨æ³°å‹’çº§æ•°<br>   sinx&#x3D;x-x^3&#x2F;3!+x^5&#x2F;5!-x^7&#x2F;7!+â€¦â€¦<br>   è®¡ç®—sinxçš„å€¼ã€‚è¦æ±‚æœ€åä¸€é¡¹çš„ç»å¯¹å€¼å°äº1eï¼5ï¼Œå¹¶ç»Ÿè®¡å‡ºæ­¤æ—¶ç´¯åŠ çš„é¡¹æ•°ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ªå®æ•°xï¼ˆä¸€ä¸ªè§’åº¦çš„å¼§åº¦æ•°ï¼‰<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   sinxçš„å€¼å’Œç´¯åŠ çš„é¡¹æ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>1.57</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>sinx&#x3D;1.000000,n&#x3D;6</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n=<span class="number">1</span>,s=<span class="number">3</span>,j,m=<span class="number">1</span>;</span><br><span class="line">    <span class="type">double</span> sinx,x,z,i=<span class="number">3</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;x);</span><br><span class="line">    sinx=x;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>,m=<span class="number">1</span>;j&lt;=s;j++)</span><br><span class="line">            m*=j;</span><br><span class="line">        z=(<span class="built_in">pow</span>(<span class="number">-1</span>,n)*<span class="built_in">pow</span>(x,i))/m;</span><br><span class="line">        sinx+=z;</span><br><span class="line">        n++;</span><br><span class="line">        i+=<span class="number">2</span>;</span><br><span class="line">        s+=<span class="number">2</span>;</span><br><span class="line">    &#125;<span class="keyword">while</span>(<span class="built_in">fabs</span>(z)&gt;=<span class="number">1e-5</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;sinx=%lf,n=%d&quot;</span>,sinx,n);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æ‰“å°nï¼ˆä¸‰ä½çš„æ•´æ•°ï¼‰ä»¥å†…çš„æ‰€æœ‰æ°´ä»™èŠ±æ•°ã€‚æ‰€è°“æ°´ä»™èŠ±æ•°æ˜¯æŒ‡ä¸€ä¸ªä¸‰ä½çš„æ•´æ•°ï¼Œå…¶å„ä½æ•°å­—çš„ç«‹æ–¹å’Œç­‰äºè¯¥æ•°æœ¬èº«ã€‚ä¾‹å¦‚ï¼š153æ˜¯æ°´ä»™èŠ±æ•°ï¼Œå› ä¸º153&#x3D;1^3+5^3+3^3ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€ä¸ªæ•´æ•°nã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   ç¬¦åˆæ¡ä»¶çš„æ°´ä»™èŠ±æ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>400</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>153<br>   370<br>   371</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i,j,k,r;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">100</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        j=i%<span class="number">10</span>;</span><br><span class="line">        k=(i%<span class="number">100</span>)/<span class="number">10</span>;</span><br><span class="line">        r=i/<span class="number">100</span>;</span><br><span class="line">        <span class="keyword">if</span>(i==j*j*j+k*k*k+r*r*r)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="æ‰“å°ASCIIç å€¼ã€å­—ç¬¦å¯¹ç…§è¡¨"><a href="#æ‰“å°ASCIIç å€¼ã€å­—ç¬¦å¯¹ç…§è¡¨" class="headerlink" title="æ‰“å°ASCIIç å€¼ã€å­—ç¬¦å¯¹ç…§è¡¨"></a>æ‰“å°ASCIIç å€¼ã€å­—ç¬¦å¯¹ç…§è¡¨</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æ‰“å°ç å€¼ä¸ºn1ï½n2ï¼ˆ n1å’Œn2çš„å€¼åœ¨33ï½127èŒƒå›´å†…ï¼‰çš„ASCIIç å€¼ã€å­—ç¬¦å¯¹ç…§è¡¨ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸¤ä¸ªæ•´æ•°n1å’Œn2ï¼ˆå€¼åœ¨33ï½127èŒƒå›´å†…ï¼‰ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   å¯¹ç…§è¡¨ã€‚è¦æ±‚ï¼šASCIIç å€¼å 7åˆ—ï¼Œå­—ç¬¦å 9åˆ—ï¼Œå‘å³å¯¹é½ï¼Œæ¯è¡Œæ‰“3ä¸ªç å€¼ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>65<br>   70</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong><br>        65        A     66        B     67        C<br>        68        D     69        E     70        F<br><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n1,n2,i,j;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n1);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n2);</span><br><span class="line">    <span class="keyword">for</span>(i=n1,j=<span class="number">1</span>;i&lt;=n2;i++,j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%7d%9c&quot;</span>,i,i);</span><br><span class="line">        <span class="keyword">if</span>(j%<span class="number">3</span>==<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬nå¹´æ—¶æœ‰å¤šå°‘å¤´æ¯ç‰›"><a href="#ç¬¬nå¹´æ—¶æœ‰å¤šå°‘å¤´æ¯ç‰›" class="headerlink" title="ç¬¬nå¹´æ—¶æœ‰å¤šå°‘å¤´æ¯ç‰›?"></a>ç¬¬nå¹´æ—¶æœ‰å¤šå°‘å¤´æ¯ç‰›?</h3><p> <strong>é¢˜ç›®æè¿°ï¼š</strong><br>   é€’å¢çš„ç‰›ç¾¤ï¼šè‹¥ä¸€å¤´å°æ¯ç‰›ï¼Œä»ç¬¬4å¹´å¼€å§‹æ¯å¹´ç”Ÿä¸€å¤´å°æ¯ç‰›ã€‚æŒ‰æ­¤è§„å¾‹ï¼Œç¬¬nå¹´æ—¶æœ‰å¤šå°‘å¤´æ¯ç‰›ï¼Ÿ<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>ä¸€   ä¸ªæ•´æ•°n(n&gt;&#x3D;4 &amp;&amp; n&lt;&#x3D;20)ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   ç¬¬nå¹´æ—¶çš„æ¯ç‰›æ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>4</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>2</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,f,f1,f2,f3,i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">4</span>,f1=f2=f3=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f=f1+f3;</span><br><span class="line">        f3=f2;</span><br><span class="line">        f2=f1;</span><br><span class="line">        f1=f;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>


<h3 id="ç™¾é©¬ç™¾æ‹…é—®é¢˜"><a href="#ç™¾é©¬ç™¾æ‹…é—®é¢˜" class="headerlink" title="ç™¾é©¬ç™¾æ‹…é—®é¢˜"></a>ç™¾é©¬ç™¾æ‹…é—®é¢˜</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç™¾é©¬ç™¾æ‹…é—®é¢˜ï¼šæœ‰n1åŒ¹é©¬ï¼Œé©®n2æ‹…è´§ï¼Œå¤§é©¬é©®3æ‹…ï¼Œä¸­é©¬é©®2æ‹…ï¼Œä¸¤åŒ¹å°é©¬é©®1æ‹…ï¼Œé—®æœ‰å¤šå°‘ç§é©®æ³•ï¼Ÿ<br>   æ³¨æ„:æ¯ç§é©¬è‡³å°‘æœ‰1åŒ¹.<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸¤ä¸ªæ•´æ•°n1ï¼ˆé©¬åŒ¹æ•°ï¼‰å’Œn2ï¼ˆæ‹…è´§æ•°ï¼‰ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   é©®æ³•æ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>100  100</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>6</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n1,n2,sum=<span class="number">0</span>,x,y,z;<span class="comment">//x,y,zåˆ†åˆ«ä¸ºå¤§é©¬åŒ¹æ•°ï¼Œä¸­é©¬åŒ¹æ•°å’Œå°é©¬åŒ¹æ•°ã€‚</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;n1,&amp;n2);</span><br><span class="line">    <span class="keyword">for</span>(x=<span class="number">1</span>;x&lt;=n1;x++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(y=<span class="number">1</span>;y&lt;=n1-x;y++)</span><br><span class="line">        &#123;</span><br><span class="line">            z=n1-x-y;</span><br><span class="line">            <span class="keyword">if</span>((<span class="number">3</span>*x+<span class="number">2</span>*y+<span class="number">0.5</span>*z)==n2)</span><br><span class="line">                sum++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>


<h3 id="æ±‚å¯è¡Œçš„è´­é±¼æ–¹æ¡ˆ"><a href="#æ±‚å¯è¡Œçš„è´­é±¼æ–¹æ¡ˆ" class="headerlink" title="æ±‚å¯è¡Œçš„è´­é±¼æ–¹æ¡ˆ"></a>æ±‚å¯è¡Œçš„è´­é±¼æ–¹æ¡ˆ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æœ‰é’±må…ƒï¼Œè¦ä¹°é‡‘é±¼næ¡ã€‚å¸‚åœºä¸Šçš„é‡‘é±¼ä¸»è¦æœ‰ä¸‰ä¸ªå“ç§ï¼Œä»·æ ¼åˆ†åˆ«ä¸ºï¼šçº¢ç‹®å¤´æ¯æ¡0.9å…ƒï¼Œé»‘éª‘å£«æ¯æ¡1.2å…ƒï¼Œç™½é‡‘åˆšæ¯æ¡1.6å…ƒã€‚å¦‚æœæ¯ä¸€ä¸ªå“ç§éƒ½è‡³å°‘è´­ä¹°ä¸€æ¡ï¼Œè¦ä¹°è¶³næ¡é‡‘é±¼ï¼Œä¸”æ­£å¥½ç”¨å®Œnå…ƒã€‚è¯•ç¼–å†™ç¨‹åºæ±‚å‡ºå¯è¡Œçš„è´­é±¼æ–¹æ¡ˆã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸¤ä¸ªæ•´æ•°mï¼ˆé’±æ•°ï¼‰å’Œnï¼ˆé‡‘é±¼æ€»æ•°ï¼‰ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è´­é±¼æ–¹æ¡ˆã€‚æ³¨ï¼šä¸€ç§æ–¹æ¡ˆæ‰“ä¸€è¡Œï¼ŒæŒ‰çº¢ç‹®å¤´ã€é»‘éª‘å£«ã€ç™½é‡‘åˆšçš„é¡ºåºæ‰“å‡ºæ¡æ•°ï¼Œæ•°æ®ä¹‹é—´ç•™ä¸€ä¸ªç©ºæ ¼ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>30 25</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>4 18 3<br>   8 11 6<br>   12 4 9</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,m,i,j;</span><br><span class="line">    <span class="type">double</span> k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;m,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=m/<span class="number">1.6</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=(m<span class="number">-1.6</span>*i)/<span class="number">1.2</span>;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            k=<span class="number">1.6</span>*i+<span class="number">1.2</span>*j+<span class="number">0.9</span>*(n-i-j);</span><br><span class="line">        <span class="keyword">if</span>(k==m)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>,n-i-j,j,i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="æœ€ä½ä½ï¼ˆäºŒè¿›åˆ¶çš„è½¬æ¢ï¼‰-1"><a href="#æœ€ä½ä½ï¼ˆäºŒè¿›åˆ¶çš„è½¬æ¢ï¼‰-1" class="headerlink" title="æœ€ä½ä½ï¼ˆäºŒè¿›åˆ¶çš„è½¬æ¢ï¼‰"></a>æœ€ä½ä½ï¼ˆäºŒè¿›åˆ¶çš„è½¬æ¢ï¼‰</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ä»»æ„ä¸€ä¸ªæ­£æ•´æ•°Aï¼ˆ1&lt;&#x3D;A&lt;&#x3D;109ï¼‰ï¼Œè¾“å‡ºå®ƒçš„æœ€ä½ä½ã€‚ä¾‹å¦‚ï¼ŒA&#x3D;26ï¼Œæˆ‘ä»¬èƒ½å†™å‡ºå®ƒçš„äºŒè¿›åˆ¶ä½11010ï¼Œæ‰€ä»¥æœ€ä½ä½æ˜¯10ï¼Œè¾“å‡ºä¸º2ã€‚ä¾‹å¦‚ï¼ŒA&#x3D;88ï¼Œåˆ™äºŒè¿›åˆ¶ä½1011000ï¼Œåˆ™æœ€ä½ä½æ˜¯1000ï¼Œè¾“å‡ºä¸º8ã€‚å†ä¾‹å¦‚A&#x3D;7ï¼Œåˆ™äºŒè¿›åˆ¶ä½111ï¼Œåˆ™æœ€ä½ä½æ˜¯1ï¼Œè¾“å‡ºä¸º1ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…å«ä¸€ä¸ªæ•´æ•°Aï¼ˆ1&lt;&#x3D;A&lt;&#x3D;109ï¼‰<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   å¯¹åº”è¾“å…¥çš„æœ€ä½ä½ï¼ˆè¾“å‡ºä¸åŒ…å«å›è½¦ï¼‰<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>8</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>8</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 10</span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> A,law,a[N],i,j;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;A);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        a[i]=A%<span class="number">2</span>;</span><br><span class="line">        A/=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    law=<span class="built_in">pow</span>(<span class="number">2</span>,i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,law);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="Fibonacciæ•°åˆ—-1"><a href="#Fibonacciæ•°åˆ—-1" class="headerlink" title="Fibonacciæ•°åˆ—"></a>Fibonacciæ•°åˆ—</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   Fibonacciæ•°åˆ—{0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, â€¦}ï¼Œå¯ä»¥å¦‚ä¸‹å®šä¹‰ï¼š<br>   F0&#x3D;0<br>   F1&#x3D;1<br>   Fi&#x3D;F(i-1)+F(i-2) å¯¹äºæ‰€æœ‰çš„iå¤§äº2<br>   å†™ä¸ªç¨‹åºè®¡ç®—Fibonacciæ•°<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ç¬¬ä¸€è¡Œä¸ºéœ€è¦æµ‹è¯•ä¸ªæ•°Tï¼Œæ¥ç€çš„1è¡Œï¼Œè¾“å…¥Tä¸ªæ•°æ®ï¼Œæ¯ä¸€ä¸ªæ•°æ®åŒ…å«ä¸€ä¸ªæ•°nï¼ˆ0&lt;&#x3D;n&lt;&#x3D;45 ï¼‰ï¼Œå³ä½ éœ€è¦è®¡ç®—çš„F(n)<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   å¯¹æ¯è¾“å…¥çš„æ•°nï¼Œè¾“å‡ºå¯¹åº”çš„F(n)ï¼Œæ¯ä¸ªF(n)ä¹‹é—´åŒ…å«ä¸€ä¸ªç©ºæ ¼ï¼Œæœ€åä¸€è¡Œè¾“å‡ºä¸å«å›è½¦ã€‚</p>
<p><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5<br>   0 3 5 9 20</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>0 2 5 34 6765</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i,k;</span><br><span class="line">    <span class="type">int</span> b[<span class="number">46</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;=<span class="number">45</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        b[i]=b[i<span class="number">-1</span>]+b[i<span class="number">-2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        k=a[i];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,b[k]);</span><br><span class="line">    &#125;</span><br><span class="line">    k=a[n<span class="number">-1</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,b[k]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i,k;</span><br><span class="line">    <span class="type">int</span> b[<span class="number">46</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;=<span class="number">45</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        b[i]=b[i<span class="number">-1</span>]+b[i<span class="number">-2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        k=a[i];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,b[k]);</span><br><span class="line">    &#125;</span><br><span class="line">    k=a[n<span class="number">-1</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,b[k]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>   è›‡å½¢çŸ©é˜µ1â€”ä¸€ä¸ªæ–¹å‘ç”Ÿæˆ(èƒ¡å®é™)<br> <strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è›‡å½¢çŸ©é˜µæ˜¯ä»1å¼€å§‹çš„è‡ªç„¶æ•°ä¾æ¬¡æ’åˆ—æˆçš„ä¸€ä¸ªçŸ©é˜µä¸Šä¸‰è§’å½¢ã€‚æ³¨æ„çœ‹æ ·å¼è¾“å‡ºã€‚<br> <strong>è¾“å…¥æè¿°ï¼š</strong><br>   çŸ©é˜µçš„å¤§å°Nï¼ˆN&lt;20ï¼‰<br> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸€ä¸ªè›‡å½¢çŸ©é˜µ,æ³¨æ„:æ¯è¡Œè¡Œæœ«æ²¡æœ‰ç©ºæ ¼,æœ€åä¸€è¡Œæ²¡æœ‰æ¢è¡Œã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5</p>
</blockquote>
<p> <strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1 3 6 10 15<br>   2 5 9 14<br>   4 8 13<br>   7 12<br>   11</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,a[<span class="number">20</span>]=&#123;<span class="number">1</span>&#125;,i,j;</span><br><span class="line">    <span class="type">int</span> N,k,z,s;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;N);</span><br><span class="line">    n=N;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>,z=<span class="number">1</span>;i&lt;N<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        s=i+<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            a[j]=a[j<span class="number">-1</span>]+s;</span><br><span class="line">            s++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;n<span class="number">-1</span>;k++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[k]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[n<span class="number">-1</span>]);</span><br><span class="line">        a[<span class="number">0</span>]+=z;</span><br><span class="line">        z++;</span><br><span class="line">        n--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="è›‡å½¢çŸ©é˜µ2â€”åŒå‘ç”Ÿæˆ"><a href="#è›‡å½¢çŸ©é˜µ2â€”åŒå‘ç”Ÿæˆ" class="headerlink" title="è›‡å½¢çŸ©é˜µ2â€”åŒå‘ç”Ÿæˆ"></a>è›‡å½¢çŸ©é˜µ2â€”åŒå‘ç”Ÿæˆ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è›‡å½¢çŸ©é˜µæ˜¯ä»1å¼€å§‹çš„è‡ªç„¶æ•°ä¾æ¬¡æ’åˆ—æˆçš„ä¸€ä¸ªçŸ©é˜µä¸Šä¸‰è§’å½¢ã€‚æ³¨æ„çœ‹æ ·å¼è¾“å‡ºã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   çŸ©é˜µçš„å¤§å°Nï¼ˆN&lt;20ï¼‰<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸€ä¸ªè›‡å½¢çŸ©é˜µ,æ³¨æ„:æ¯è¡Œè¡Œæœ«æ²¡æœ‰ç©ºæ ¼,æœ€åä¸€è¡Œæ²¡æœ‰æ¢è¡Œã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1 3 4 10 11<br>   2 5 9 12<br>   6 8 13<br>   7 14<br>   15</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,a[<span class="number">20</span>][<span class="number">20</span>]=&#123;<span class="number">1</span>&#125;,i,j;</span><br><span class="line">    <span class="type">int</span> N,k,z,s,f;</span><br><span class="line">    <span class="type">int</span> temp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;N);</span><br><span class="line">    n=N;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>,z=<span class="number">1</span>;i&lt;N;)</span><br><span class="line">    &#123;</span><br><span class="line">        s=i+<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            a[i][j]=a[i][j<span class="number">-1</span>]+s;</span><br><span class="line">            s++;</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">        a[i][<span class="number">0</span>]=a[i<span class="number">-1</span>][<span class="number">0</span>]+z;</span><br><span class="line">        z++;</span><br><span class="line">        n--;</span><br><span class="line">    &#125;</span><br><span class="line">    n=N;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;N;i+=<span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        f=i;</span><br><span class="line">        <span class="keyword">for</span>(k=<span class="number">0</span>,j=<span class="number">0</span>;k&lt;=i/<span class="number">2</span>;k++)</span><br><span class="line">        &#123;</span><br><span class="line">            temp=a[i][j];</span><br><span class="line">            a[i][j]=a[j][i];</span><br><span class="line">            a[j][i]=temp;</span><br><span class="line">            i--;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        i=f;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;n<span class="number">-1</span>;k++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i][k]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[i][n<span class="number">-1</span>]);</span><br><span class="line">        n--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[N<span class="number">-1</span>][<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>


<h3 id="çŒªçš„å®‰å®¶-1"><a href="#çŒªçš„å®‰å®¶-1" class="headerlink" title="çŒªçš„å®‰å®¶"></a>çŒªçš„å®‰å®¶</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   Andyå’ŒMaryå…»äº†å¾ˆå¤šçŒªã€‚ä»–ä»¬æƒ³è¦ç»™çŒªå®‰å®¶ã€‚ä½†æ˜¯Andyæ²¡æœ‰è¶³å¤Ÿçš„çŒªåœˆï¼Œå¾ˆå¤šçŒªåªèƒ½å¤Ÿåœ¨ä¸€ä¸ªçŒªåœˆå®‰å®¶ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚æœ‰16å¤´çŒªï¼ŒAndyå»ºäº†3ä¸ªçŒªåœˆï¼Œä¸ºäº†ä¿è¯å…¬å¹³ï¼Œå‰©ä¸‹1å¤´çŒªå°±æ²¡æœ‰åœ°æ–¹å®‰å®¶äº†ã€‚Maryç”Ÿæ°”äº†ï¼Œéª‚Andyæ²¡æœ‰è„‘å­ï¼Œå¹¶è®©ä»–é‡æ–°å»ºç«‹çŒªåœˆã€‚è¿™å›Andyå»ºé€ äº†5ä¸ªçŒªåœˆï¼Œä½†æ˜¯ä»ç„¶æœ‰1å¤´çŒªæ²¡æœ‰åœ°æ–¹å»ï¼Œç„¶åAndyåˆå»ºé€ äº†7ä¸ªçŒªåœˆï¼Œä½†æ˜¯è¿˜æœ‰2å¤´æ²¡æœ‰åœ°æ–¹å»ã€‚Andyéƒ½å¿«ç–¯äº†ã€‚ä½ å¯¹è¿™ä¸ªäº‹æƒ…æ„Ÿå…´è¶£èµ·æ¥ï¼Œä½ æƒ³é€šè¿‡Andyå»ºé€ çŒªåœˆçš„è¿‡ç¨‹ï¼ŒçŸ¥é“Andyå®¶è‡³å°‘å…»äº†å¤šå°‘å¤´çŒªã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…å«å¤šç»„æµ‹è¯•æ•°æ®ã€‚æ¯ç»„æ•°æ®ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°n (n &lt;&#x3D; 10),è¡¨ç¤ºAndyå»ºç«‹çŒªåœˆçš„æ¬¡æ•°ï¼Œæ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ai, bi( bi &lt;&#x3D; ai &lt;&#x3D; 1000), è¡¨ç¤ºAndyå»ºç«‹äº†aiä¸ªçŒªåœˆï¼Œæœ‰biå¤´çŒªæ²¡æœ‰å»å¤„ã€‚ä½ å¯ä»¥å‡å®š(ai, aj) &#x3D; 1<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>è¾“å‡ºåŒ…å«ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå³ä¸ºAndyå®¶è‡³å°‘å…»çŒªçš„æ•°ç›®<br>   <strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>3<br>   3 1<br>   5 1<br>   7 2</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>16</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,ai,bi;</span><br><span class="line">    <span class="type">int</span> i,j,k,a[<span class="number">1000</span>],s=<span class="number">1000</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">1000</span>;i++)</span><br><span class="line">        a[i]=i+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;ai,&amp;bi);</span><br><span class="line">        k=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;s;j++)</span><br><span class="line">            <span class="keyword">if</span>(a[j]%ai==bi)</span><br><span class="line">            &#123;</span><br><span class="line">                a[k]=a[j];</span><br><span class="line">                k++;</span><br><span class="line">            &#125;</span><br><span class="line">        s=k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(k!=<span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;    </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="æœ€å¤§ä¹˜ç§¯çš„æ•´æ•°çš„æ‹†åˆ†-1"><a href="#æœ€å¤§ä¹˜ç§¯çš„æ•´æ•°çš„æ‹†åˆ†-1" class="headerlink" title="æœ€å¤§ä¹˜ç§¯çš„æ•´æ•°çš„æ‹†åˆ†"></a>æœ€å¤§ä¹˜ç§¯çš„æ•´æ•°çš„æ‹†åˆ†</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   å°†ä¸€ä¸ªæ•´æ•°Nåˆ†è§£æˆå„ä¸ç›¸åŒçš„åŠ æ•°çš„å’Œï¼Œä½¿è¿™äº›åŠ æ•°çš„ä¹˜ç§¯æœ€å¤§ã€‚NèŒƒå›´ä¸º[5,1000]<br>æç¤ºï¼šä»ä¹˜ç§¯æœ€å¤§çš„åŸåˆ™å‡ºå‘ï¼šå¤šæ‹†3ï¼Œå°‘æ‹†2,ä¸æ‹†1ï¼Œ1å¯¹ä¹˜æ³•æ²¡æœ‰è´¡çŒ®ã€‚å¦‚6æ‹†ä¸º3+3&gt;3+2+1;4æ‹†åˆ†ä¸º2+2&gt;3+1,å› æ­¤ï¼Œæ‹†åˆ†çš„æœ€å¤§æ•°ä¸º3.<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€ä¸ªæ•´æ•°Nï¼ˆ5&lt;&#x3D;N&lt;&#x3D;1000)<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   èƒ½å¤Ÿä½¿å¾—ç§¯æœ€å¤§çš„åŠ æ•°åºåˆ—,åºåˆ—æŒ‰æ‹†åˆ†æ•°ç”±å°åˆ°å¤§çš„é¡ºåºæ’åˆ—ï¼Œæ¯ä¸ªæ•°å­—ä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œæœ€åä¸€ä¸ªæ•°å­—æ²¡æœ‰ç©ºæ ¼ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>7</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>2 2 3</p>
</blockquote>
<p><strong>æºä»£ç 1</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">if</span>(n%<span class="number">3</span>==<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;2 2&quot;</span>);</span><br><span class="line">        n-=<span class="number">4</span>;</span><br><span class="line">        <span class="keyword">while</span>(n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; 3&quot;</span>);</span><br><span class="line">            n-=<span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//printf(&quot;4&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(n%<span class="number">3</span>==<span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        n-=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; 3&quot;</span>);</span><br><span class="line">            n-=<span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        n-=<span class="number">3</span>;</span><br><span class="line">        <span class="keyword">while</span>(n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; 3&quot;</span>);</span><br><span class="line">            n-=<span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">if</span>(n%<span class="number">3</span>==<span class="number">1</span>)<span class="comment">//ä½™æ•°ä¸ºä¸€çš„æœ€åæ‹†æˆ2å’Œ2ï¼Œå…¶ä½™æ‹†æˆ3.</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;2 2&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>(n!=<span class="number">4</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            n-=<span class="number">3</span>;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; 3&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(n%<span class="number">3</span>==<span class="number">2</span>)<span class="comment">//ä½™æ•°ä¸ºäºŒçš„æ‹†ä¸€ä¸ª2ï¼Œå…¶ä½™ä¸º3.</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>(n!=<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            n-=<span class="number">3</span>;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; 3&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span><span class="comment">//ä¸º0çš„å‡ä¸º3.</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(n!=<span class="number">3</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            n-=<span class="number">3</span>;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;3 &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="æ’é˜Ÿâ€”æ•°çš„æ’å…¥"><a href="#æ’é˜Ÿâ€”æ•°çš„æ’å…¥" class="headerlink" title="æ’é˜Ÿâ€”æ•°çš„æ’å…¥"></a>æ’é˜Ÿâ€”æ•°çš„æ’å…¥</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™ç¨‹åºï¼Œå¯¹ä¸€ä¸ªå·²ç»æ’å¥½åºçš„æ•°ç»„ï¼Œè¾“å…¥ä¸€ä¸ªå…ƒç´ ã€‚å°†è¯¥å…ƒç´ æŒ‰åŸæ¥çš„æ’åºè§„åˆ™å°†å®ƒæ’å…¥åˆ°æ•°ç»„ä¸­ã€‚<br>   ä¾‹å¦‚åŸæ•°ç»„ä¸ºï¼š1 2 6 7 9ï¼Œè¾“å…¥å¾…æ’å…¥çš„å…ƒç´ 3ï¼Œåˆ™æ’å…¥å®Œæˆåç»“æœä¸ºï¼š1 2 3 6 7 9ï¼›<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†å…ˆè¾“å…¥nï¼ˆ2&lt;n&lt;&#x3D;100ï¼‰ï¼Œè¡¨ç¤ºæ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°ï¼Œæ¥ç€è¾“å…¥nä¸ªå·²ç»æ’åºå¥½çš„æ•°ï¼Œç¬¬äºŒéƒ¨åˆ†ä¸ºå¾…æ’å…¥çš„æ•°æ®<br> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   æ–°çš„æ’åºå¥½çš„æ•°ç»„å…ƒç´ ï¼Œæ•°ç»„å…ƒç´ ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼åˆ†éš”ï¼Œæœ€åä¸€ä¸ªå…ƒç´ åä¸è¦ç©ºæ ¼ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5<br>   1 2 6 7 9<br>   3</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1 2 3 6 7 9</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">101</span>],n,i,j;</span><br><span class="line">    <span class="type">int</span> s,temp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;s)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(j=n;j&gt;i;j--)</span><br><span class="line">                a[j]=a[j<span class="number">-1</span>];    </span><br><span class="line">            a[i]=s;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="å«æ˜Ÿå®šä½â€”æ•°çš„æŸ¥æ‰¾"><a href="#å«æ˜Ÿå®šä½â€”æ•°çš„æŸ¥æ‰¾" class="headerlink" title="å«æ˜Ÿå®šä½â€”æ•°çš„æŸ¥æ‰¾"></a>å«æ˜Ÿå®šä½â€”æ•°çš„æŸ¥æ‰¾</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™ç¨‹åºï¼Œå¯¹ä¸€ä¸ªå·²ç»æ’å¥½åºçš„æ•°ç»„ï¼Œè¾“å…¥ä¸€ä¸ªå…ƒç´ ã€‚å°†è¯¥å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ç´¢å¼•å‡ºæ¥ï¼ˆæŠ˜åŠæŸ¥æ‰¾ï¼‰ã€‚<br>   ä¾‹å¦‚åŸæ•°ç»„ä¸ºï¼š1 2 6 7 9ï¼Œè¾“å…¥å¾…æŸ¥æ‰¾çš„å…ƒç´ 7ï¼Œåˆ™æŸ¥æ‰¾ç»“æœä¸º4ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¯¥å…ƒç´ ï¼Œåˆ™è¾“å‡ºæ•°å€¼-1ï¼›</p>
<p><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†å…ˆè¾“å…¥n,è¡¨ç¤ºæ•°ç»„ä¸­å…ƒç´ æ•°ï¼Œæ¥ç€è¾“å…¥nä¸ªå·²ç»æ’åºå¥½çš„æ•°ï¼Œæ•°ç»„æœ€å¤§ä¸ªæ•°nä¸º20ï¼Œç¬¬äºŒéƒ¨åˆ†ä¸ºå¾…æŸ¥æ‰¾çš„æ•°æ®<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   å¾…æŸ¥æ‰¾çš„å…ƒç´ ä½ç½®<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5<br>   1 2 6 7 9<br>   7</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>4</p>
</blockquote>
<p><strong>[æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,k,a[<span class="number">20</span>];</span><br><span class="line">    <span class="type">int</span> i,low,top,mid,loc=<span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;k);</span><br><span class="line">    low=<span class="number">0</span>;</span><br><span class="line">    top=n<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(low&lt;top)</span><br><span class="line">    &#123;</span><br><span class="line">        mid=(low+top)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(a[mid]&gt;k)</span><br><span class="line">            top=mid<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[mid]&lt;k)</span><br><span class="line">            low=mid;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            loc=mid+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,loc);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="è­¦å¯ŸæŠ“è´¼â€”æ•°çš„åˆ é™¤"><a href="#è­¦å¯ŸæŠ“è´¼â€”æ•°çš„åˆ é™¤" class="headerlink" title="è­¦å¯ŸæŠ“è´¼â€”æ•°çš„åˆ é™¤"></a>è­¦å¯ŸæŠ“è´¼â€”æ•°çš„åˆ é™¤</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™ç¨‹åºï¼Œå°†nï¼ˆn&lt;1000ï¼‰ä¸ªå…ƒç´ ä¸­çš„æŸä¸ªç‰¹å®šå…ƒç´ åˆ é™¤ã€‚å¦‚æœè¯¥å…ƒç´ å‡ºç°çš„æ¬¡æ•°tä¸ºå¥‡æ•°æ¬¡ï¼Œåˆ™åˆ é™¤ç¬¬ï¼ˆt+1ï¼‰&#x2F;2é‚£ä¸ªï¼Œå¦‚æœå‡ºç°çš„æ¬¡æ•°tä¸ºå¶æ•°æ¬¡ï¼Œåˆ™åˆ é™¤ç¬¬ï¼ˆt&#x2F;2ï¼‰ä¸ª<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†å…ˆè¾“å…¥n,æ¥ç€è¾“å…¥nä¸ªåŸæ•°æ®ã€‚ç¬¬äºŒéƒ¨åˆ†ä¸ºå¾…åˆ é™¤çš„å…ƒç´ ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   åˆ é™¤ç‰¹å®šå…ƒç´ åçš„å‰©ä½™å…ƒç´ ,å¦‚æœæ²¡æœ‰å…ƒç´ è¢«åˆ é™¤ï¼Œåˆ™åŸæ ·è¾“å‡ºï¼›å…ƒç´ ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼åˆ†éš”ï¼Œæœ€åä¸€ä¸ªå…ƒç´ æ²¡æœ‰å›è½¦ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>8<br>1 3 4 6 3 5 3 6<br>3</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1 3 4 6 5 3 6</p>
</blockquote>
<p> <strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,a[<span class="number">1000</span>];</span><br><span class="line">    <span class="type">int</span> s,i,t=<span class="number">0</span>,m,j=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]==s)</span><br><span class="line">            t++;</span><br><span class="line">    <span class="keyword">if</span>(t%<span class="number">2</span>!=<span class="number">0</span>)</span><br><span class="line">        m=(t+<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        m=t/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]!=s)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            j++;</span><br><span class="line">            <span class="keyword">if</span>(j!=m)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(a[n<span class="number">-1</span>]!=s)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        j++;</span><br><span class="line">        <span class="keyword">if</span>(j!=m)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[n<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ˜¯éé»‘ç™½â€”å­—ç¬¦ä¸²æ¯”è¾ƒ"><a href="#æ˜¯éé»‘ç™½â€”å­—ç¬¦ä¸²æ¯”è¾ƒ" class="headerlink" title="æ˜¯éé»‘ç™½â€”å­—ç¬¦ä¸²æ¯”è¾ƒ"></a>æ˜¯éé»‘ç™½â€”å­—ç¬¦ä¸²æ¯”è¾ƒ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™å‡½æ•°å®ç°ä¸¤ä¸ªç­‰é•¿å­—ç¬¦ä¸²å¤§å°æ¯”è¾ƒï¼ˆä¸¤å­—ç¬¦ä¸²é•¿åº¦&lt;81ï¼‰ã€‚æ¯”è¾ƒè§„åˆ™å¦‚ä¸‹ï¼šå­—ç¬¦å¤§å°æŒ‰å¯¹åº”çš„ASCII ç å€¼ï¼Œå­—ç¬¦ä¸²å¤§å°æ¯”è¾ƒæ—¶æŒ‰å¯¹åº”å­—ç¬¦æ¯”è¾ƒï¼Œå¦‚æœæ¯”è¾ƒçš„ä¸¤å­—ç¬¦ä¸ç­‰ï¼Œåˆ™è¯´æ˜å­˜åœ¨å¤§å°å…³ç³»ï¼Œåœæ­¢æ¯”è¾ƒæ“ä½œã€‚å¦‚æœç›¸ç­‰ï¼Œåˆ™æ¯”è¾ƒä¸‹ä¸€æ¬¡å­—ç¬¦ï¼Œç›´åˆ°æœ€åä¸€ä¸ªã€‚å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å°äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²åˆ™è¾“å‡ºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœå¤§äºåˆ™è¾“å‡ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå­—ç¬¦ä¸²è¾“å‡ºå«å›è½¦ï¼‰ï¼Œå¦‚æœç›¸ç­‰åˆ™è¿”å›æ•°å€¼0ï¼ˆä¸å«å›è½¦ï¼‰ï¼›è¦æ±‚ä¸ä½¿ç”¨cmpstr()å‡½æ•°å®Œæˆï¼›<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥å¾…æ¯”è¾ƒçš„ä¸¤ä¸ªå­—ç¬¦ä¸²<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   å­—ç¬¦ä¸²æ¯”è¾ƒç»“æœ<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>abcdefg<br>   abcdeff</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>abcdefg</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">81</span>],b[<span class="number">81</span>];</span><br><span class="line">    <span class="type">int</span> i,len1,len2,max,s1=<span class="number">0</span>,s2=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,b);</span><br><span class="line">    len1=<span class="built_in">strlen</span>(a);</span><br><span class="line">    len2=<span class="built_in">strlen</span>(b);</span><br><span class="line">    max=(len1&gt;len2)?len1:len2;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len2;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&lt;b[i])</span><br><span class="line">        &#123;</span><br><span class="line">            s2++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;b[i])</span><br><span class="line">        &#123;</span><br><span class="line">            s1++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(s1==<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">puts</span>(a);</span><br><span class="line">    <span class="keyword">if</span>(s2==<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">puts</span>(b);</span><br><span class="line">    <span class="keyword">if</span>(s1==<span class="number">0</span> &amp;&amp; s2==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(len1&gt;len2)</span><br><span class="line">            <span class="built_in">puts</span>(a);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(len1&lt;len2)</span><br><span class="line">            <span class="built_in">puts</span>(b);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="æ­æ¡¥â€”å­—ç¬¦ä¸²è¿æ¥"><a href="#æ­æ¡¥â€”å­—ç¬¦ä¸²è¿æ¥" class="headerlink" title="æ­æ¡¥â€”å­—ç¬¦ä¸²è¿æ¥"></a>æ­æ¡¥â€”å­—ç¬¦ä¸²è¿æ¥</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™å‡½æ•°å°†ä¸¤ä¸ªå‡åºæ’åˆ—çš„å­—ç¬¦ä¸²(ä¸²é•¿&lt;81)èåˆæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œèåˆåçš„å­—ç¬¦ä¸²ä»ç„¶æ˜¯å‡åºæ’åˆ—çš„ã€‚</p>
<p><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸¤å‡åºå­—ç¬¦ä¸²<br><strong>è¾“å‡ºæè¿°ï¼š</strong><br>   èåˆåçš„å­—ç¬¦ä¸² (å«å›è½¦ç¬¦)<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>acefi<br>   bdfg</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>abcdeffgi</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">162</span>],b[<span class="number">81</span>];</span><br><span class="line">    <span class="type">int</span> i,j,len,temp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,b);</span><br><span class="line">    <span class="built_in">strcat</span>(a,b);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;len;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&gt;a[j])</span><br><span class="line">            &#123;</span><br><span class="line">                temp=a[i];</span><br><span class="line">                a[i]=a[j];</span><br><span class="line">                a[j]=temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="ä¸€æ¸…äºŒæ¥šâ€”å­—ç¬¦ä¸²ç»Ÿè®¡"><a href="#ä¸€æ¸…äºŒæ¥šâ€”å­—ç¬¦ä¸²ç»Ÿè®¡" class="headerlink" title="ä¸€æ¸…äºŒæ¥šâ€”å­—ç¬¦ä¸²ç»Ÿè®¡"></a>ä¸€æ¸…äºŒæ¥šâ€”å­—ç¬¦ä¸²ç»Ÿè®¡</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åŒ…å«å­—æ¯ã€æ•°å­—å’Œå…¶ä»–å­—ç¬¦ã€‚ç»Ÿè®¡è¯¥å­—ç¬¦ä¸²ä¸­æ•°å­—ã€å­—æ¯å’Œå…¶ä»–å­—ç¬¦å‡ºç°çš„é¢‘ç‡ã€‚ï¼ˆæ³¨æ„ï¼Œå…¶ä»–å­—ç¬¦åŒ…å«ç©ºæ ¼ï¼‰<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ä¸€æ··åˆå­—ç¬¦ä¸²ï¼Œæœ€å¤§é•¿åº¦ä¸º200<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   å„ç±»å­—ç¬¦å‡ºç°é¢‘ç‡ï¼Œæœ€åä¸€è¡Œä¸å«å›è½¦ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>abcdefg9999&#x2F;&#x2F;&#x2F;&#x2F;</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>ch:7<br>   num:4<br>   other:4</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">  <span class="number">1</span>:  <span class="type">char</span> a[<span class="number">201</span>];</span><br><span class="line">    <span class="type">int</span> ch=<span class="number">0</span>,num=<span class="number">0</span>,other=<span class="number">0</span>,i,k;</span><br><span class="line">    gets(a);</span><br><span class="line">    k=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;k;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>((a[i]&gt;=<span class="string">&#x27;A&#x27;</span>&amp;&amp;a[i]&lt;=<span class="string">&#x27;Z&#x27;</span>)||(a[i]&gt;=<span class="string">&#x27;a&#x27;</span>&amp;&amp;a[i]&lt;=<span class="string">&#x27;z&#x27;</span>))</span><br><span class="line">            ch++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;a[i]&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">            num++;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            other++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ch:%d\nnum:%d\nother:%d&quot;</span>,ch,num,other);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">200</span>];</span><br><span class="line">    <span class="type">int</span> ch=<span class="number">0</span>,num=<span class="number">0</span>,other=<span class="number">0</span>,len,i;</span><br><span class="line">    gets(a);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; a[i]&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">            num++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>((a[i]&gt;=<span class="string">&#x27;a&#x27;</span> &amp;&amp; a[i]&lt;=<span class="string">&#x27;z&#x27;</span>) || (a[i]&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; a[i]&lt;=<span class="string">&#x27;Z&#x27;</span>))</span><br><span class="line">            ch++;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            other++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ch:%d\nnum:%d\nother:%d&quot;</span>,ch,num,other);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="å…‹éš†â€”å­—ç¬¦ä¸²çš„æ‹·è´-èƒ¡å®é™"><a href="#å…‹éš†â€”å­—ç¬¦ä¸²çš„æ‹·è´-èƒ¡å®é™" class="headerlink" title="å…‹éš†â€”å­—ç¬¦ä¸²çš„æ‹·è´(èƒ¡å®é™)"></a>å…‹éš†â€”å­—ç¬¦ä¸²çš„æ‹·è´(èƒ¡å®é™)</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ç¼–å†™ç¨‹åºå®ç°å­—ç¬¦ä¸²æ‹·è´ï¼Œè¾“å…¥ä¸¤å­—ç¬¦ä¸²(å­—ç¬¦ä¸²é•¿åº¦å°äº100)ï¼Œå°†ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ‹·è´åˆ°ç¬¬äºŒä¸ªå­—ç¬¦ä¸²ä¸­ï¼›å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦aå°äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²é•¿åº¦bï¼Œåˆ™ç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ä¹Ÿå°†ç¼©å‡è‡³ç¬¬ä¸€ä¸ªçš„é•¿åº¦aï¼Œå¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦aå¤§äºæˆ–ç­‰äºç¬¬äºŒä¸ªé•¿åº¦bï¼Œåˆ™åªå°†açš„å‰bä¸ªå­—ç¬¦æ‹·è´åˆ°ç¬¬äºŒä¸ªä¸­ï¼›<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸¤å­—ç¬¦ä¸²<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼Œæ³¨æ„ï¼šè¾“å‡ºå«å›è½¦ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>Abdfeg<br>   Bdfad</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>Abdfe</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>],b[<span class="number">100</span>];</span><br><span class="line">    <span class="type">int</span> len1,len2,i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s %s&quot;</span>,a,b);</span><br><span class="line">    len1=<span class="built_in">strlen</span>(a);</span><br><span class="line">    len2=<span class="built_in">strlen</span>(b);</span><br><span class="line">    <span class="keyword">if</span>(len1&lt;len2)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len1;i++)</span><br><span class="line">            b[i]=a[i];</span><br><span class="line">        b[len1]=<span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len2;i++)</span><br><span class="line">            b[i]=a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> <strong>2:æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> len1,len2,i;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>],b[<span class="number">100</span>];</span><br><span class="line">    gets(a);</span><br><span class="line">    gets(b);</span><br><span class="line">    len1=<span class="built_in">strlen</span>(a);</span><br><span class="line">    len2=<span class="built_in">strlen</span>(b);</span><br><span class="line">    <span class="keyword">if</span>(len1&lt;len2)</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len1;i++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,a[i]);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len2;i++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å­—æ¯è½¬æ¢"><a href="#å­—æ¯è½¬æ¢" class="headerlink" title="å­—æ¯è½¬æ¢"></a>å­—æ¯è½¬æ¢</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆé•¿åº¦&lt;100ï¼‰ï¼Œå°†å…¶ä¸­æ‰€æœ‰å¤§å†™å­—æ¯æ”¹ä¸ºå°å†™å­—æ¯ï¼Œè€Œæ‰€æœ‰å°å†™å­—æ¯å…¨éƒ¨æ”¹ä¸ºå¤§å†™å­—æ¯ï¼Œå…¶ä½™å­—ç¬¦åŸæ ·è¾“å‡ºç„¶åè¾“å‡ºå‰nä¸ªå­—ç¬¦ã€‚<br>   è®¾è®¡æ­¥éª¤<br>   â‘ è¾“å…¥å­—ç¬¦ä¸²ï¼›<br>   â‘¡ç”¨å¾ªç¯åˆ¤æ–­å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦æ˜¯å¤§å†™è¿˜æ˜¯å°å†™ï¼Œè‹¥æ˜¯å¤§å†™è¦è½¬æ¢æˆå°å†™ï¼Œæ˜¯å°å†™è¦è½¬æ¢æˆå¤§å†™ï¼šå¤§å†™ä¸å°å†™å­—æ¯çš„è½¬æ¢å…³ç³»æ˜¯â€œå°å†™å­—æ¯&#x3D;å¤§å†™å­—æ¯+32â€<br>   â‘¢ç”¨printfè¾“å‡ºè¯¥å­—ç¬¦ä¸²å‰nä¸ªå­—ç¬¦ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥æ•°æ®ä¸º1ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºè¾“å‡ºå­—ç¬¦çªœé•¿åº¦ï¼ˆn&lt;100ï¼‰ï¼Œæ¥ç€è¾“å…¥1ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶é•¿åº¦ä¸é™ï¼Œå¯åŒ…å«é”®ç›˜ä¸Šå¯è§çš„æ‰€æœ‰å­—ç¬¦<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸º1ä¸ªå­—ç¬¦ä¸²ï¼Œæ ¹æ®è¾“å…¥æ•°æ®ï¼Œå°†å…¶ä¸­çš„å¤§å†™å­—ç¬¦è½¬æ¢æˆå°å†™ï¼Œå°å†™è½¬æ¢æˆå¤§å†™ï¼Œå…¶ä½™å­—ç¬¦ä¸å˜<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5<br>   FG56hj</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>fg56H</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    getchar();</span><br><span class="line">    gets(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&lt;=<span class="string">&#x27;z&#x27;</span> &amp;&amp; a[i]&gt;=<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,a[i]<span class="number">-32</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&lt;=<span class="string">&#x27;Z&#x27;</span> &amp;&amp; a[i]&gt;=<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,a[i]+<span class="number">32</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ•°å­—è½¬æ¢"><a href="#æ•°å­—è½¬æ¢" class="headerlink" title="æ•°å­—è½¬æ¢"></a>æ•°å­—è½¬æ¢</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œå¤§å°&lt;100000ï¼Œå°†å…¶ä¸­æ¯ä½æ•°å­—è¿›è¡Œè½¬æ¢åè¾“å‡ºï¼Œè§„åˆ™å¦‚ä¸‹ï¼š<br>   æ•°å­—0ä¸9äº’æ¢ã€1ä¸8äº’æ¢ã€2ä¸7äº’æ¢ã€3ä¸6äº’æ¢ã€4ä¸5äº’æ¢ã€‚<br>   æ³¨æ„ï¼šè¦è€ƒè™‘é¦–ä½æ•°å­—ä¸º9æ—¶çš„è½¬æ¢ç»“æœã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥æ•°æ®ä¸º1ä¸ªæ•°å­—ï¼Œå¤§å°&lt;100000<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸º1ä¸ªæ ¹æ®è½¬æ¢è§„åˆ™è½¬æ¢å®Œæˆåçš„æ•°å­—<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>56789</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>43210</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">6</span>];</span><br><span class="line">    <span class="type">int</span> i,len;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">if</span>(a[<span class="number">0</span>]!=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[<span class="number">0</span>]==<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;8&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[<span class="number">0</span>]==<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;7&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[<span class="number">0</span>]==<span class="string">&#x27;3&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;6&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[<span class="number">0</span>]==<span class="string">&#x27;4&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[<span class="number">0</span>]==<span class="string">&#x27;5&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[<span class="number">0</span>]==<span class="string">&#x27;6&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[<span class="number">0</span>]==<span class="string">&#x27;7&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[<span class="number">0</span>]==<span class="string">&#x27;8&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;9&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;8&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;7&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;3&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;6&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;4&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;5&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;6&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;7&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;8&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="å‡½æ•°æ±‚è§£1-nçš„ç´¯ä¹˜"><a href="#å‡½æ•°æ±‚è§£1-nçš„ç´¯ä¹˜" class="headerlink" title="å‡½æ•°æ±‚è§£1&#x2F;nçš„ç´¯ä¹˜"></a>å‡½æ•°æ±‚è§£1&#x2F;nçš„ç´¯ä¹˜</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   åˆ©ç”¨è‡ªå®šä¹‰å‡½æ•°ç¼–å†™ç¨‹åºï¼Œæ±‚ä¸‹é¢çš„å¼å­ï¼š<br>    Y&#x3D;1<em>1&#x2F;2</em>1&#x2F;3â€¦â€¦*1&#x2F;n       ï¼ˆnçš„æ•°å€¼ç”±é”®ç›˜è¾“å…¥,n&lt;&#x3D;10ï¼‰</p>
<p><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°</p>
<p><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸ºå°æ•°ï¼Œä¿ç•™å°æ•°ç‚¹å12ä½æœ‰æ•ˆæ•°å­—ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>3</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>0.166666666667</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i;</span><br><span class="line">    <span class="type">double</span> s,y=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        s=i;</span><br><span class="line">        y*=<span class="number">1</span>/s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.12lf&quot;</span>,y);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="å‡½æ•°æ±‚è§£1-nçš„ç´¯å‡-è°Œæµ·å†›"><a href="#å‡½æ•°æ±‚è§£1-nçš„ç´¯å‡-è°Œæµ·å†›" class="headerlink" title="å‡½æ•°æ±‚è§£1&#x2F;nçš„ç´¯å‡(è°Œæµ·å†›)"></a>å‡½æ•°æ±‚è§£1&#x2F;nçš„ç´¯å‡(è°Œæµ·å†›)</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   åˆ©ç”¨è‡ªå®šä¹‰å‡½æ•°ç¼–å†™ç¨‹åºï¼Œæ±‚ä¸‹é¢çš„å¼å­ï¼š<br>    Y&#x3D;1-1&#x2F;2-1&#x2F;3â€¦â€¦-1&#x2F;n       ï¼ˆnçš„æ•°å€¼ç”±é”®ç›˜è¾“å…¥,n&lt;&#x3D;100ï¼‰<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸ºå°æ•°ï¼Œä¿ç•™å°æ•°ç‚¹å8ä½æœ‰æ•ˆæ•°å­—ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>8</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>-0.71785714</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i;</span><br><span class="line">    <span class="type">double</span> s,y=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        s=i;</span><br><span class="line">        y-=<span class="number">1</span>/s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.8lf&quot;</span>,y);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ¢æ±½æ°´"><a href="#æ¢æ±½æ°´" class="headerlink" title="æ¢æ±½æ°´"></a>æ¢æ±½æ°´</h3><p> <strong>é¢˜ç›®æè¿°ï¼š</strong><br>   1å—é’±1ç“¶æ±½æ°´ï¼Œ3ä¸ªç©ºæ±½æ°´ç“¶æ¢1ç“¶æ±½æ°´ã€‚nå—é’±èƒ½å–å‡ ç“¶æ±½æ°´ï¼Ÿ<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸ºä¸€ä¸ªæ­£æ•´æ•°nï¼ˆ1&lt;&#x3D;n&lt;&#x3D;100ï¼‰ï¼Œè¡¨ç¤ºé’±æ•°ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºå¯å–æ±½æ°´çš„ç“¶æ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>10</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>15</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,sum,s;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    sum=n;</span><br><span class="line">    <span class="keyword">while</span>(n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            sum+=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        s=n/<span class="number">3</span>;</span><br><span class="line">        sum+=s;</span><br><span class="line">        n=n%<span class="number">3</span>+s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>


<h3 id="èªæ˜çš„é¡¾å®¢"><a href="#èªæ˜çš„é¡¾å®¢" class="headerlink" title="èªæ˜çš„é¡¾å®¢"></a>èªæ˜çš„é¡¾å®¢</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   1ç“¶æ±½æ°´å–1å—é’±ï¼Œé¡¾å®¢è¿˜å¯ä»¥ç”¨3ä¸ªç©ºæ±½æ°´ç“¶æ¢1ç“¶æ±½æ°´å–ã€‚è¯·é—®èªæ˜çš„é¡¾å®¢æœ€å°‘å¯ä»¥èŠ±å¤šå°‘é’±ä¹°åˆ°nç“¶æ±½æ°´å–ï¼Ÿ<br>   è¯´æ˜ï¼šå½“é¡¾å®¢æ‰‹ä¸­æœ‰ä¸¤ä¸ªç©ºæ±½æ°´ç“¶çš„æ—¶å€™ï¼Œå¦‚æœåº—å®¶å‰©ä½™1ç“¶ä»¥ä¸Šï¼Œå¯ä»¥é€‰æ‹©å…ˆå€Ÿç”¨1ç“¶æ±½æ°´ï¼Œå–å®Œåè¿åŒæ‰‹é‡Œå…ˆå‰å·²æœ‰çš„ä¸¤ä¸ªç©ºæ±½æ°´ç“¶è¿˜ç»™åº—å®¶å³å¯ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸ºä¸€ä¸ªæ­£æ•´æ•°nï¼ˆ1&lt;&#x3D;n&lt;&#x3D;100ï¼‰ï¼Œè¡¨ç¤ºå¯å–æ±½æ°´ç“¶æ•°ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºæ‰€èŠ±é’±æ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>10</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>7</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,sum,s,i,k,a[<span class="number">70</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>&#125;;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;<span class="number">70</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        k=i;</span><br><span class="line">        sum=i;</span><br><span class="line">        <span class="keyword">while</span>(i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">2</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                sum+=<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">2</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            s=i/<span class="number">3</span>;</span><br><span class="line">            sum+=s;</span><br><span class="line">            i=i%<span class="number">3</span>+s;</span><br><span class="line">        &#125;</span><br><span class="line">        i=k;</span><br><span class="line">        a[i]=sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">70</span>;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]==n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,i);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²èµ·å§‹ä½ç½®"><a href="#å­—ç¬¦ä¸²èµ·å§‹ä½ç½®" class="headerlink" title="å­—ç¬¦ä¸²èµ·å§‹ä½ç½®"></a>å­—ç¬¦ä¸²èµ·å§‹ä½ç½®</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æœ‰å­—ç¬¦ä¸²a(é•¿åº¦&lt;&#x3D;100)ï¼Œb(é•¿åº¦&lt;&#x3D;10)ï¼Œè®¡ç®—bä¸²åœ¨aä¸²ä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²é•¿åº¦å°äº100ï¼Œç¬¬äºŒä¸ªå­—ç¬¦ä¸²é•¿åº¦å°äº10ï¼›<br> <strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è‹¥bä¸²åœ¨aä¸²ä¸­å‡ºç°ï¼Œè¾“å‡ºä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºbä¸²åœ¨aä¸²ä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®ï¼Œè‹¥bä¸²æœªå‡ºç°åœ¨aä¸²ä¸­ï¼Œåˆ™è¾“å‡º0ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>abcdefghijklmnababcdeabc<br>   abc</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> len1,len2,i,j,sum=<span class="number">0</span>,n=<span class="number">0</span>,k;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>],b[<span class="number">10</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,b);</span><br><span class="line">    len1=<span class="built_in">strlen</span>(a);</span><br><span class="line">    len2=<span class="built_in">strlen</span>(b);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len1;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        k=i;<span class="comment">//ç”¨æ¥æ¢å¤içš„å€¼ã€‚</span></span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;len2;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]==b[j])</span><br><span class="line">                sum++;<span class="comment">//å¦‚æœç›¸ç­‰åˆ™åŠ ä¸€ã€‚</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">            i++;<span class="comment">//iè¦åŒæ—¶åŠ ï¼Œä¿æŒå¯¹åº”æ¯”è¾ƒã€‚</span></span><br><span class="line">        &#125;</span><br><span class="line">        i=k;</span><br><span class="line">        <span class="keyword">if</span>(sum==len2)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,i+<span class="number">1</span>);</span><br><span class="line">            n++;<span class="comment">//ç”¨æ¥è®°å½•æ˜¯å¦æœ‰ä½ç½®å­˜åœ¨ã€‚</span></span><br><span class="line">            <span class="keyword">break</span>;<span class="comment">//æœ‰ä¸€ä¸ªä½ç½®å­˜åœ¨åˆ™è·³å‡ºã€‚</span></span><br><span class="line">        &#125;</span><br><span class="line">        sum=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²æ¸…ç†"><a href="#å­—ç¬¦ä¸²æ¸…ç†" class="headerlink" title="å­—ç¬¦ä¸²æ¸…ç†"></a>å­—ç¬¦ä¸²æ¸…ç†</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>    å‡å®šè¾“å…¥çš„å­—ç¬¦ä¸²ä¸­åªåŒ…å«å­—æ¯å’Œ<em>å·ã€‚è¯·ç¼–å†™å‡½æ•°funï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ï¼šå°†å­—ç¬¦ä¸²å°¾éƒ¨çš„</em>å·å…¨éƒ¨åˆ é™¤ï¼Œå‰é¢å’Œä¸­é—´çš„*å·ä¸åˆ é™¤ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²é•¿åº¦å°äº100ï¼›</p>
<p><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸ºæ¸…ç†åçš„å­—ç¬¦ä¸²ï¼›</p>
<p><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p><strong>A<em>BC</em>DEF<em>G</em></strong></p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p><em>*<em>A</em>BC*DEF</em>G</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line">fun(<span class="type">char</span> a[])</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> len,i,s;</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=len<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(a[i]!=<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            a[i+<span class="number">1</span>]=<span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>];</span><br><span class="line">    <span class="type">int</span> i,len;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    fun(a);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,a[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å›´åœˆæŠ¥æ•°æ¸¸æˆ"><a href="#å›´åœˆæŠ¥æ•°æ¸¸æˆ" class="headerlink" title="å›´åœˆæŠ¥æ•°æ¸¸æˆ"></a>å›´åœˆæŠ¥æ•°æ¸¸æˆ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æœ‰nï¼ˆn&lt;&#x3D;100ï¼‰å›´æˆä¸€åœˆï¼Œé¡ºåºæ’å·ï¼ˆä»1æ’åˆ°nï¼‰ã€‚<br>ä»ç¬¬ä¸€ä¸ªäººå¼€å§‹æŠ¥æ•°ï¼ˆä»1æŠ¥åˆ°mï¼ˆm&lt;&#x3D;9))ï¼Œå‡¡æŠ¥åˆ°mçš„äººé€€å‡ºåœˆå­ï¼Œæ­¤æ—¶æŠ¥æ•°é¡ºåºè°ƒè½¬ï¼Œå¦‚ï¼š11ä¸ªäººå›´æˆ1åœˆï¼Œä»1æŠ¥åˆ°4æ—¶ï¼ŒåŸæ¥4å·ä½çš„äººé€€å‡ºï¼Œæ­¤æ—¶è°ƒè½¬é¡ºåºæŠ¥æ•°ï¼ŒåŸæ¥3å·ä½çš„äººæŠ¥æ•°1ï¼ŒåŸæ¥2å·ä½çš„äººæŠ¥æ•°2ï¼ŒåŸæ¥1å·ä½çš„äººæŠ¥æ•°1ï¼ŒåŸæ¥11å·ä½çš„äººæŠ¥æ•°4ï¼Œæ­¤æ—¶11å·ä½çš„äººé€€å‡ºæ¸¸æˆï¼Œå†æ¬¡é€†è½¬é¡ºåºæŠ¥æ•°ï¼Œä»¥æ­¤ç±»æ¨ï¼Œé—®æœ€åç•™ä¸‹çš„æ˜¯åŸæ¥ç¬¬å‡ å·çš„é‚£ä½ï¼Ÿ<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸ºä¸¤ä¸ªæ­£æ•´æ•°ï¼Œç¬¬ä¸€ä¸ª&lt;&#x3D;100ï¼Œç¬¬äºŒä¸ª&lt;&#x3D;9ï¼›<br><strong>è¾“å‡ºæè¿°ï¼š</strong><br>   è¾“å‡ºä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>11 4</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>3</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,m,i,j,k1=<span class="number">0</span>,k2=<span class="number">0</span>,z1,sum1,sum2,a[<span class="number">101</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        a[i]=<span class="number">1</span>;</span><br><span class="line">    sum1=n;</span><br><span class="line">    z1=<span class="number">1</span>;</span><br><span class="line">    sum2=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(sum1!=<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=z1;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]!=<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                k1++;</span><br><span class="line">                <span class="keyword">if</span>(k1==m)</span><br><span class="line">                &#123;</span><br><span class="line">                    a[i]=<span class="number">0</span>;</span><br><span class="line">                    sum1--;</span><br><span class="line">                    <span class="keyword">if</span>(sum1==<span class="number">1</span>)</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">while</span>(sum2==<span class="number">0</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">for</span>(j=i<span class="number">-1</span>;j&gt;<span class="number">0</span>;j--)</span><br><span class="line">                            <span class="keyword">if</span>(a[j]!=<span class="number">0</span>)</span><br><span class="line">                            &#123;</span><br><span class="line">                                k2++;</span><br><span class="line">                                <span class="keyword">if</span>(k2==m)</span><br><span class="line">                                &#123;</span><br><span class="line">                                    a[j]=<span class="number">0</span>;</span><br><span class="line">                                    sum2++;</span><br><span class="line">                                    sum1--;</span><br><span class="line">                                    k2=<span class="number">0</span>;</span><br><span class="line">                                    <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        i=n+<span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    z1=j;</span><br><span class="line">                    k1=<span class="number">0</span>;</span><br><span class="line">                    sum2=<span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        z1=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,i);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æŠ¥æ•°æ¸¸æˆ"><a href="#æŠ¥æ•°æ¸¸æˆ" class="headerlink" title="æŠ¥æ•°æ¸¸æˆ"></a>æŠ¥æ•°æ¸¸æˆ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æœ‰nï¼ˆn&lt;&#x3D;100ï¼‰å›´æˆä¸€åœˆï¼Œé¡ºåºæ’å·ï¼ˆä»1æ’åˆ°nï¼‰ã€‚ä»ç¬¬ä¸€ä¸ªäººå¼€å§‹æŠ¥æ•°ï¼ˆä»1ä¸€ç›´å¾€ä¸ŠæŠ¥æ•°)ï¼Œå‡¡æŠ¥åˆ°måŠmçš„å€æ•°æˆ–è€…å°¾æ•°ä¸ºmçš„äººé€€å‡ºåœˆå­ï¼Œé—®æœ€åç•™ä¸‹çš„æ˜¯åŸæ¥ç¬¬å‡ å·çš„é‚£ä½ï¼Ÿ<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸ºä¸¤ä¸ªæ­£æ•´æ•°ï¼Œç¬¬ä¸€ä¸ª&lt;&#x3D;100ï¼Œç¬¬äºŒä¸ª&lt;&#x3D;9ï¼›<br><strong>è¾“å‡ºæè¿°ï¼š</strong><br>   è¾“å‡ºä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>10 3</p>
</blockquote>
<p> <strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>5</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,m,i,sum,a[<span class="number">101</span>],k=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    sum=n;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        a[i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(sum!=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            <span class="keyword">if</span>(a[i]!=<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                k++;</span><br><span class="line">                <span class="keyword">if</span>(k%m==<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    a[i]=<span class="number">0</span>;</span><br><span class="line">                    sum--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i]!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,i);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="æ•´æ•°å„ä½å–å¶æ•°"><a href="#æ•´æ•°å„ä½å–å¶æ•°" class="headerlink" title="æ•´æ•°å„ä½å–å¶æ•°"></a>æ•´æ•°å„ä½å–å¶æ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   å°†ä¸€ä¸ªæ•´æ•°ä¸­çš„æ¯ä¸€ä½ä¸Šä¸ºå¶æ•°çš„æ•°ä¾æ¬¡å–å‡ºï¼Œæ„æˆä¸€ä¸ªæ–°æ•°æ”¾åœ¨tä¸­ã€‚é«˜ä½ä»åœ¨é«˜ä½ï¼Œä½ä½ä»åœ¨ä½ä½ã€‚<br>   ä¾‹å¦‚ï¼Œå½“sä¸­çš„æ•°ä¸ºï¼š87653142æ—¶ï¼Œtä¸­çš„æ•°ä¸ºï¼š8642ã€‚<br>   ï¼ˆçŸ¥è¯†ç‚¹ï¼šæ§åˆ¶è¯­å¥ã€å‡½æ•°ã€æŒ‡é’ˆï¼‰<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥æ•°æ®ä¸ºä¸€ä¸ªä¸å¤§äº100000000çš„æ•´å½¢æ•°ï¼›<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºæ•°æ®ä¸ºä¸€ä¸ªä¸å¤§äº100000000çš„æ•´å½¢æ•°ï¼›<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>987654321</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>8642</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> s,i,k=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s);</span><br><span class="line">    <span class="keyword">while</span>(s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>((s%<span class="number">10</span>)%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line">            a[k++]=s%<span class="number">10</span>;</span><br><span class="line">        s/=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=k<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="äº”ä½ååºæ•°"><a href="#äº”ä½ååºæ•°" class="headerlink" title="äº”ä½ååºæ•°"></a>äº”ä½ååºæ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è®¾ï¼®æ˜¯ä¸€ä¸ªäº”ä½æ•°ï¼Œå®ƒçš„nå€æ°å¥½æ˜¯å…¶ååºæ•°ï¼ˆä¾‹å¦‚ï¼š123çš„ååºæ•°æ˜¯321ï¼‰ï¼Œ<br>   ç¼–ç¨‹ï¼Œè¾“å‡ºä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„ï¼®ã€‚ï¼ˆçŸ¥è¯†ç‚¹ï¼šæ§åˆ¶è¯­å¥ï¼‰<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸ºä¸€ä¸ªæ•´å½¢æ•°n(2&lt;&#x3D;n&lt;&#x3D;9)<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸ºä¸€ä¸ªäº”ä½æ•°çš„æ•´å½¢æ•°<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>9</p>
</blockquote>
<p> <strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>10989</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">fan</span><span class="params">(<span class="type">int</span> n)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> law=<span class="number">0</span>,b;</span><br><span class="line">    <span class="keyword">while</span>(n&gt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        b=n%<span class="number">10</span>;</span><br><span class="line">        law=law*<span class="number">10</span>+b;</span><br><span class="line">        n/=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> law;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,N;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(N=<span class="number">10000</span>;N&lt;<span class="number">100000</span>;N++)</span><br><span class="line">        <span class="keyword">if</span>(N*n==fan(N))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,N);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¤åˆ¶å­—ç¬¦ä¸²"><a href="#å¤åˆ¶å­—ç¬¦ä¸²" class="headerlink" title="å¤åˆ¶å­—ç¬¦ä¸²"></a>å¤åˆ¶å­—ç¬¦ä¸²</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬nä¸ªå­—ç¬¦ã€‚å†™ä¸€ä¸ªå‡½æ•°ï¼Œå°†æ­¤å­—ç¬¦ä¸²ä»ç¬¬aä¸ªå­—ç¬¦å¼€å§‹çš„bä¸ªå­—ç¬¦å¤åˆ¶æˆå¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚<br>   è¦æ±‚åœ¨ä¸»å‡½æ•°è¾“å…¥å­—ç¬¦ä¸²åŠa,bçš„å€¼å¹¶è¾“å‡ºå¤åˆ¶ç»“æœã€‚<br>   ï¼ˆçŸ¥è¯†ç‚¹ï¼šæ§åˆ¶è¯­å¥ã€å­—ç¬¦ä¸²ã€æŒ‡é’ˆï¼‰</p>
<p><strong>è¾“å…¥æè¿°ï¼š</strong>è¾“å…¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆé•¿åº¦å°äº80ï¼‰åŠä¸¤ä¸ªæ•´å½¢æ•°ï¼ˆa+bå°äºå­—ç¬¦ä¸²çš„å®é™…é•¿åº¦ï¼‰<br><strong>è¾“å‡ºæè¿°ï¼š</strong><br>   è¾“å‡ºä¸ºä¸€ä¸ªå­—ç¬¦ä¸²<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>abcdefghijklmnopqrst<br>   8 5</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>hijkl</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">80</span>],b[<span class="number">80</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> i,x,y,j;</span><br><span class="line">    gets(a);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">    <span class="keyword">for</span>(i=x<span class="number">-1</span>,j=<span class="number">1</span>;j&lt;=y;j++,i++)</span><br><span class="line">        b[j<span class="number">-1</span>]=a[i];</span><br><span class="line">    <span class="built_in">puts</span>(b);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å¢åŠ çš„å…”å­"><a href="#å¢åŠ çš„å…”å­" class="headerlink" title="å¢åŠ çš„å…”å­"></a>å¢åŠ çš„å…”å­</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   å¤å…¸é—®é¢˜ï¼Œæœ‰ä¸€å¯¹å…”å­ï¼Œä»å‡ºç”Ÿåç¬¬3ä¸ªæœˆèµ·æ¯ä¸ªæœˆéƒ½ç”Ÿä¸€å¯¹å…”å­ï¼Œå°å…”å­é•¿åˆ°ç¬¬ä¸‰ä¸ªæœˆåæ¯ä¸ªæœˆåˆç”Ÿä¸€å¯¹å…”å­ï¼Œå‡å¦‚å…”å­éƒ½ä¸æ­»ï¼Œé—®ä¸€å¹´ä¹‹å†…æ¯ä¸ªæœˆçš„å…”å­æ€»æ•°ä¸ºå¤šå°‘ï¼Ÿ<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   æ— <br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºä¸€å¹´ä¹‹ä¸­æ¯ä¸ªæœˆçš„å…”å­æ€»æ•°ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>æ— </p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1 1 2 3 5 8 13 21 34 55 89 144</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">12</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>&#125;,i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;<span class="number">12</span>;i++)</span><br><span class="line">        a[i]=a[i<span class="number">-1</span>]+a[i<span class="number">-2</span>];</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">11</span>;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a[<span class="number">11</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ•´æ•°çš„åˆ†è§£"><a href="#æ•´æ•°çš„åˆ†è§£" class="headerlink" title="æ•´æ•°çš„åˆ†è§£"></a>æ•´æ•°çš„åˆ†è§£</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   å°†ä¸€ä¸ªæ­£æ•´æ•°åˆ†è§£è´¨å› æ•°ã€‚ä¾‹å¦‚ï¼šè¾“å…¥90,æ‰“å°å‡º90&#x3D;2<em>3</em>3*5ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   ç­‰å¼å·¦è¾¹è¾“å‡ºæ•´æ•°ï¼Œç­‰å¼å³è¾¹æ•´æ•°ç›¸ä¹˜å½¢å¼ã€‚</p>
<p><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>90</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>90&#x3D;2x3x3x5</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">50</span>],i=<span class="number">2</span>,j,n,sum=<span class="number">0</span>,k=<span class="number">0</span>,b[<span class="number">50</span>]=&#123;<span class="number">0</span>&#125;,z;</span><br><span class="line">    <span class="keyword">while</span>(k!=<span class="number">50</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=i;j++)</span><br><span class="line">            <span class="keyword">if</span>(i%j==<span class="number">0</span>)</span><br><span class="line">                sum++;</span><br><span class="line">        <span class="keyword">if</span>(sum==<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            a[k]=i;</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">        sum=<span class="number">0</span>;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    k=<span class="number">0</span>;</span><br><span class="line">    z=n;</span><br><span class="line">    <span class="keyword">while</span>(n!=<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">50</span>;i++)</span><br><span class="line">            <span class="keyword">if</span>(n%a[i]==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                n=n/a[i];</span><br><span class="line">                b[k]=a[i];</span><br><span class="line">                k++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d=&quot;</span>,z);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;k<span class="number">-1</span>;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d*&quot;</span>,b[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,b[k<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="å°çƒè‡ªç”±è½ä½“é—®é¢˜"><a href="#å°çƒè‡ªç”±è½ä½“é—®é¢˜" class="headerlink" title="å°çƒè‡ªç”±è½ä½“é—®é¢˜"></a>å°çƒè‡ªç”±è½ä½“é—®é¢˜</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   ä¸€çƒä»100ç±³é«˜åº¦è‡ªç”±è½ä¸‹ï¼Œæ¯æ¬¡è½åœ°ååè·³å›åŸé«˜åº¦çš„ä¸€åŠï¼›å†è½ä¸‹ï¼Œæ±‚å®ƒåœ¨ç¬¬10æ¬¡è½åœ°æ—¶ï¼Œå…±ç»è¿‡å¤šå°‘ç±³ï¼Ÿç¬¬10æ¬¡åå¼¹å¤šé«˜ï¼Ÿ<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   æ— <br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   å°çƒåœ¨ç¬¬10æ¬¡è½åœ°æ—¶ç»è¿‡çš„è·¯ç¨‹æ•°snå’Œç¬¬10æ¬¡åå¼¹çš„é«˜åº¦hnã€‚<br> <strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>æ— </p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>the total of road is 299.609375<br>the tenth is 0.097656 meter</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">double</span> sn,a[<span class="number">11</span>]=&#123;<span class="number">100</span>&#125;;</span><br><span class="line">    sn=<span class="number">100</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;=<span class="number">10</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        a[i<span class="number">-1</span>]=a[i<span class="number">-2</span>]/<span class="number">2.0</span>;</span><br><span class="line">        sn+=<span class="number">2</span>*a[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    a[<span class="number">10</span>]=a[<span class="number">9</span>]/<span class="number">2.0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;the total of road is %lf\n&quot;</span>,sn);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;the tenth is %lf meter&quot;</span>,a[<span class="number">10</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="ç»Ÿè®¡å­—ç¬¦"><a href="#ç»Ÿè®¡å­—ç¬¦" class="headerlink" title="ç»Ÿè®¡å­—ç¬¦"></a>ç»Ÿè®¡å­—ç¬¦</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong>è¾“å…¥ä¸€è¡Œå­—ç¬¦ï¼Œåˆ†åˆ«ç»Ÿè®¡å‡ºå…¶ä¸­è‹±æ–‡å­—æ¯ã€ç©ºæ ¼ã€æ•°å­—å’Œå…¶å®ƒå­—ç¬¦çš„ä¸ªæ•°<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŒ…å«è‹±æ–‡å­—æ¯ã€ç©ºæ ¼ã€æ•°å­—å’Œå…¶ä»–å­—ç¬¦çš„å­—ç¬¦ä¸²<br><strong>è¾“å‡ºæè¿°ï¼š</strong><br>   è¾“å‡ºè‹±æ–‡å­—æ¯ï¼Œç©ºæ ¼ï¼Œæ•°å­—å’Œå…¶ä»–å­—ç¬¦çš„ä¸ªæ•°<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>avc i2g3 &amp;*#4</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>5,2,3,3<br><strong>æºä»£ç </strong></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>];</span><br><span class="line">    <span class="type">int</span> len,i,s1=<span class="number">0</span>,s2=<span class="number">0</span>,s3=<span class="number">0</span>,s4=<span class="number">0</span>;</span><br><span class="line">    gets(a);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>((a[i]&gt;=<span class="string">&#x27;a&#x27;</span>&amp;&amp;a[i]&lt;=<span class="string">&#x27;z&#x27;</span>)||(a[i]&gt;=<span class="string">&#x27;A&#x27;</span>&amp;&amp;a[i]&lt;=<span class="string">&#x27;Z&#x27;</span>))</span><br><span class="line">            s1++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]==<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">            s2++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i]&lt;=<span class="string">&#x27;9&#x27;</span> &amp;&amp; a[i]&gt;=<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">            s3++;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            s4++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d,%d,%d,%d&quot;</span>,s1,s2,s3,s4);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ•°aæ±‚å’Œ"><a href="#æ•°aæ±‚å’Œ" class="headerlink" title="æ•°aæ±‚å’Œ"></a>æ•°aæ±‚å’Œ</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   æ±‚s&#x3D;a+aa+aaa+aaaa+aaâ€¦açš„å€¼ï¼Œå…¶ä¸­aæ˜¯ä¸€ä¸ªæ•°å­—ã€‚ä¾‹å¦‚2+22+222+2222+22222(æ­¤æ—¶å…±æœ‰5ä¸ªæ•°ç›¸åŠ )ï¼Œå‡ ä¸ªæ•°ç›¸åŠ ç”±é”®ç›˜æ§åˆ¶è¾“å…¥ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   è¾“å…¥åŸºæ•°aå’Œéœ€è¦ç›¸åŠ çš„ä¸ªæ•°n<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºç›¸åŠ çš„ç»“æœï¼Œæ³¨æ„ç»“æœæœ€åä¸éœ€è¦å›è½¦æ¢è¡Œã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>2 5</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>24690</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,j,n,a,s,z,w;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(s=<span class="number">0</span>,i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>,w=<span class="number">1</span>,z=<span class="number">0</span>;j&lt;=i;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            z+=a*w;</span><br><span class="line">            w*=<span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        s+=z;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,s);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<h3 id="ç»Ÿè®¡å•è¯ä¸ªæ•°"><a href="#ç»Ÿè®¡å•è¯ä¸ªæ•°" class="headerlink" title="ç»Ÿè®¡å•è¯ä¸ªæ•°"></a>ç»Ÿè®¡å•è¯ä¸ªæ•°</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   è¾“å…¥ä¸€è¡Œå­—ç¬¦ï¼Œç»Ÿè®¡å…¶ä¸­æœ‰å¤šå°‘ä¸ªå•è¯ï¼Œå•è¯ä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”å¼€ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ï¼šI am a boy,é‡Œé¢åŒ…å«äº†å››ä¸ªè‹±æ–‡å•è¯ã€‚<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   åˆ©ç”¨getsè¾“å…¥å­—ç¬¦ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºå•è¯ä¸ªæ•°ï¼Œç¨‹åºæœ€åä¸éœ€è¦å›è½¦æ¢è¡Œã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>I am a boy</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>There are 4 words in the line</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">100</span>];</span><br><span class="line">    <span class="type">int</span> len,i,b[<span class="number">26</span>]=&#123;<span class="number">0</span>&#125;,sum=<span class="number">1</span>;</span><br><span class="line">    gets(a);</span><br><span class="line">    len=<span class="built_in">strlen</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">            sum++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;There are %d words in the line&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰è§’å½¢æ±‚æœ€å¤§å’Œçš„é—®é¢˜"><a href="#ä¸‰è§’å½¢æ±‚æœ€å¤§å’Œçš„é—®é¢˜" class="headerlink" title="ä¸‰è§’å½¢æ±‚æœ€å¤§å’Œçš„é—®é¢˜"></a>ä¸‰è§’å½¢æ±‚æœ€å¤§å’Œçš„é—®é¢˜</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   å¦‚å›¾æ‰€ç¤ºæ˜¯ä¸€ä¸ªç”±æ•°å­—ç»„æˆçš„ä¸‰è§’å½¢ï¼Œç¼–å†™ç¨‹åºæŒ‰ç…§æŸæ¡è·¯çº¿éå†ä»ç¬¬ä¸€è¡Œçš„é¦–æ•°å­—åˆ°æœ€åä¸€è¡Œçš„æŸä¸ªæ•°ï¼Œä½¿æ¯ä¸€è¡Œç»è¿‡çš„æ•°å­—ç›¸åŠ çš„å’Œä¸ºæœ€å¤§å€¼ï¼Œæ¯ä¸€æ¬¡è·³è½¬å¯ä»¥å‘å·¦ä¸‹æ–¹æˆ–è€…å³ä¸‹æ–¹è¿›è¡Œã€‚ä¾‹å¦‚æ ·å›¾ä¸­ç¬¬ä¸€è¡Œä¸º7,é€‰æ‹©å·¦ä¸‹æ–¹çš„æ•°å­—3çš„è¯ï¼Œç»§ç»­é€‰æ‹©å·¦ä¸‹æ–¹çš„æ•°å­—8ï¼Œç¬¬å››è¡Œé€‰æ‹©å³ä¸‹æ–¹çš„7ï¼Œæœ€ååˆ°è¾¾å·¦ä¸‹æ–¹çš„æ•°å­—5ã€‚è¿™æ ·ï¼Œ7+3+8+7+5&#x3D;30ä¸ºæœ€å¤§ã€‚</p>
<pre><code>    7
  3   8
8   1   0
</code></pre>
<p>  2   7   4   4<br>4   5   2   6   5<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   å…ˆç”±é”®ç›˜è¾“å…¥ä¸‰è§’å½¢çš„è¡Œæ•°N(1&lt;N&lt;&#x3D;100)ï¼Œæ¥ä¸‹æ¥è¾“å…¥æ¯è¡Œçš„æ•°å­—ï¼Œæ•°å­—å–å€¼èŒƒå›´ä¸º0~99ã€‚<br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   è¾“å‡ºè®¡ç®—å‡ºçš„æ•°å­—ç›¸åŠ å’Œçš„æœ€å¤§å€¼ã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>5<br>7<br>3 8<br>8 1 0<br>2 7 4 4<br>4 5 2 6 5</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>30</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">100</span>][<span class="number">100</span>],i,j,n,max=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;=i;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i][j]);</span><br><span class="line">    a[<span class="number">1</span>][<span class="number">0</span>]+=a[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    a[<span class="number">1</span>][<span class="number">1</span>]+=a[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        a[i][<span class="number">0</span>]+=a[i<span class="number">-1</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;i;j++)</span><br><span class="line">            a[i][j]+=(a[i<span class="number">-1</span>][j<span class="number">-1</span>]&gt;a[i<span class="number">-1</span>][j])?a[i<span class="number">-1</span>][j<span class="number">-1</span>]:a[i<span class="number">-1</span>][j];</span><br><span class="line">        a[i][j]+=a[i<span class="number">-1</span>][j<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">if</span>(a[n<span class="number">-1</span>][i]&gt;max)</span><br><span class="line">            max=a[n<span class="number">-1</span>][i];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,max);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="èŠ‚çº¦å­—èŠ‚"><a href="#èŠ‚çº¦å­—èŠ‚" class="headerlink" title="èŠ‚çº¦å­—èŠ‚"></a>èŠ‚çº¦å­—èŠ‚</h3><p><strong>é¢˜ç›®æè¿°ï¼š</strong><br>   Johnåœ¨åšä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®å¯¹å­˜å‚¨å®¹é‡æœ‰ç€è¿‘ä¹è‹›åˆ»çš„è¦æ±‚ï¼Œä¸ºæ­¤Johnéœ€è¦å¯¹ä¸€äº›ä¸œè¥¿è¿›è¡Œå‹ç¼©å­˜å‚¨ã€‚Johnçš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä¸€å¤§å †çš„å­—ç¬¦ä¸²ï¼Œå­˜å‚¨å®ƒä»¬å¤ªå åœ°æ–¹äº†ï¼Œä¸ºæ­¤ä»–æƒ³äº†ä¸€ä¸ªåŠæ³•ï¼šå¦‚æœå­—ç¬¦ä¸²å…·æœ‰ç›¸åŒçš„åç¼€ï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¹ˆå­—ç¬¦ä¸²çš„ç›¸åŒåç¼€å’Œåœ¨ä¸€èµ·ï¼Œè¿™æ ·å°±èƒ½èŠ‚çº¦ä¸€ç‚¹ç©ºé—´äº†ã€‚æ¯”å¦‚è¯´æœ‰ä¸‰ä¸ªå­—ç¬¦ä¸²åˆ†åˆ«ä¸ºâ€johnâ€ã€â€ajohnâ€å’Œâ€bjohnâ€,è¿™æ ·å®ƒä»¬æœ‰ç›¸åŒçš„åç¼€â€johnâ€,è¿™æ—¶å€™åªéœ€å­˜å‚¨ä¸€ä¸ªåç¼€â€johnâ€,èŠ‚çœäº†8ä¸ªå­—æ¯çš„å­˜å‚¨ç©ºé—´ã€‚è¯·ç¼–å†™ç¨‹åºè®¡ç®—å¯¹äºä¸åŒçš„å­—ç¬¦ä¸²èƒ½èŠ‚çœçš„å­˜å‚¨ç©ºé—´ï¼Ÿ<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>   ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°kï¼Œè¡¨ç¤ºå¯ä»¥è¾“å…¥å¤šå°‘ä¸ªæµ‹è¯•ç”¨ä¾‹.æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å n+1è¡Œå³æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„ç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ•´æ•°nï¼ˆ1&lt;&#x3D;n&lt;&#x3D;20ï¼‰ï¼Œä»ç¬¬äºŒè¡Œå¼€å§‹ä¾æ¬¡ä¸ºnä¸ªå­—ç¬¦ä¸²,å­—ç¬¦ä¸²ç”±è‹±æ–‡å­—æ¯ç»„æˆï¼Œå¤§å°å†™æ•æ„Ÿã€‚<br><strong>è¾“å‡ºæè¿°</strong><br>   ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹è¾“å‡ºå®Œæ¯•ä¹‹åï¼Œæ¢è¡Œè¾“å‡ºè¿™ä¸ªæµ‹è¯•ç”¨ä¾‹èŠ‚çœäº†å¤šå°‘å­˜å‚¨ç©ºé—´ã€‚<br><strong>æ ·å¼è¾“å…¥</strong>ï¼š</p>
<blockquote>
<p>1<br>3<br>john<br>ajohn<br>bjohn</p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>save 8 characters</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">20</span>]=&#123;<span class="number">0</span>&#125;,i,n,k,j,z,m,t,len[<span class="number">20</span>],min;</span><br><span class="line">    <span class="type">char</span> s[<span class="number">20</span>][<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;k);</span><br><span class="line">    <span class="keyword">while</span>(k)</span><br><span class="line">    &#123;</span><br><span class="line">        i=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">        z=n;</span><br><span class="line">        <span class="keyword">while</span>(z)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s[i]);</span><br><span class="line">            i++;</span><br><span class="line">            z--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">            len[i]=<span class="built_in">strlen</span>(s[i]);</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">        &#123;    </span><br><span class="line">            m=len[<span class="number">0</span>]<span class="number">-1</span>;</span><br><span class="line">            t=len[j]<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">while</span>(j)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(s[<span class="number">0</span>][m]==s[j][t])</span><br><span class="line">                    a[j]++;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                m--;</span><br><span class="line">                t--;</span><br><span class="line">                <span class="keyword">if</span>(m&lt;<span class="number">0</span>||t&lt;<span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        min=a[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;n;i++)</span><br><span class="line">            <span class="keyword">if</span>(min&gt;a[i])</span><br><span class="line">                min=a[i];</span><br><span class="line">        min*=n<span class="number">-1</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;save %d characters\n&quot;</span>,min);</span><br><span class="line">        k--;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">            a[i]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="çŒ´å­åƒæ¡ƒé—®é¢˜"><a href="#çŒ´å­åƒæ¡ƒé—®é¢˜" class="headerlink" title="çŒ´å­åƒæ¡ƒé—®é¢˜"></a>çŒ´å­åƒæ¡ƒé—®é¢˜</h3><p><strong>é¢˜ç›®æè¿°</strong>ï¼š<br>   çŒ´å­ç¬¬ä¸€å¤©æ‘˜ä¸‹è‹¥å¹²æ¡ƒå­ï¼Œåƒäº†ä¸€åŠï¼Œè¿˜ä¸è¿‡ç˜¾ï¼Œåˆå¤šåƒäº†ä¸€ä¸ªã€‚ç¬¬äºŒå¤©åƒæ‰å‰©ä¸‹æ¡ƒå­çš„ä¸€åŠï¼Œåˆå¤šåƒäº†ä¸€ä¸ªã€‚ä»¥æ­¤ç±»æ¨ï¼Œåˆ°ç¬¬10å¤©æ—¶ï¼Œå°±åªæœ‰ä¸€ä¸ªæ¡ƒå­äº†ã€‚é—®çŒ´å­ç¬¬ä¸€å¤©æ‘˜ä¸‹äº†å¤šå°‘æ¡ƒå­ï¼Ÿ<br><strong>è¾“å…¥æè¿°ï¼š</strong><br>æ— <br><strong>è¾“å‡ºæè¿°æè¿°ï¼š</strong><br>   çŒ´å­æ‘˜ä¸‹æ¡ƒå­çš„æ€»æ•°ï¼Œæ³¨æ„ç¨‹åºæœ€åä¸éœ€è¦å›è½¦æ¢è¡Œã€‚<br><strong>æ ·å¼è¾“å…¥ï¼š</strong></p>
<blockquote>
<p>æ— </p>
</blockquote>
<p><strong>æ ·å¼è¾“å‡ºï¼š</strong></p>
<blockquote>
<p>1534</p>
</blockquote>
<p><strong>æºä»£ç </strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,sum=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        sum=(sum+<span class="number">1</span>)*<span class="number">2</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p><strong>2æºä»£ç </strong> </p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n,i,sum=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">        sum=(sum+<span class="number">1</span>)*<span class="number">2</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h3 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h3><a href="http://lengmo714.top/27faa6a3.html" title="" target="">æ›´å¤šé¢˜åº“é“¾æ¥,</a>]]></content>
      <tags>
        <tag>C</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸¤ä¸ªHC05è“ç‰™æ¨¡å—ç›¸äº’ä¹‹é—´çš„é€šä¿¡</title>
    <url>/56859.html</url>
    <content><![CDATA[<p>è“ç‰™æ¨¡å—å…·æœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼šå‘½ä»¤å“åº”å·¥ä½œæ¨¡å¼å’Œè‡ªåŠ¨è¿æ¥å·¥ä½œæ¨¡å¼<br>å…·ä½“çš„èµ„æ–™çœ‹è¿™é‡Œï¼šé“¾æ¥ï¼šé“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1YB1QLrWcKV19XYg9yY7smg">https://pan.baidu.com/s/1YB1QLrWcKV19XYg9yY7smg</a> å¯†ç ï¼šq9mf</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="ä¸¤ä¸ªè“ç‰™æ¨¡å—é€šä¿¡"><a href="#ä¸¤ä¸ªè“ç‰™æ¨¡å—é€šä¿¡" class="headerlink" title="ä¸¤ä¸ªè“ç‰™æ¨¡å—é€šä¿¡"></a>ä¸¤ä¸ªè“ç‰™æ¨¡å—é€šä¿¡</h2><p>ä¸¤ä¸ªè“ç‰™æ¨¡å—é€šä¿¡ï¼Œé¦–å…ˆæ˜¯è¦è®©ä¸¤ä¸ªè“ç‰™æ¨¡å—è¿›å…¥å‘½ä»¤å“åº”å·¥ä½œæ¨¡å¼å³äº”ä¸‹é¢è¯´è¯´çš„ATæ¨¡å¼ï¼ˆENæ¥ä¸ŠUSBè½¬TTLçš„VCCæˆ–è€…3.3Vï¼Œå†é•¿æŒ‰è“ç‰™æ¨¡å—ä¸Šçš„é‚£ä¸ªé”®ï¼Œä¸Šç”µï¼Œçº¢ç¯ä¸€ç§’é’Ÿé—ªä¸€ä¸‹å³è¿›å…¥äº†ATæ¨¡å¼ï¼‰</p>
<h3 id="é…ç½®æ­¥éª¤"><a href="#é…ç½®æ­¥éª¤" class="headerlink" title="é…ç½®æ­¥éª¤"></a>é…ç½®æ­¥éª¤</h3><p><strong>1ã€</strong> [ATæ¨¡å¼]ä¸¤ä¸ªè“ç‰™æ¨¡å—çš„PIO11æ¥VCCï¼Œä¸Šç”µåå³è¿›å…¥ATæŒ‡ä»¤æ¨¡å¼ï¼Œéƒ½ç”¨USBè½¬TTLæ¨¡å—è¿æ¥åˆ°ç”µè„‘çš„USBæ¥å£ã€‚(ç¬”è€…è¿™é‡Œæ˜¯è“ç‰™æ¨¡å—çš„ENè¿æ¥3.3V)</p>
<p><strong>2ã€</strong>[æ‰“å¼€ä¸²å£è°ƒè¯•åŠ©æ‰‹]å¼€å¯2ä¸ªä¸²å£è°ƒè¯•çª—å£ï¼Œä¸€ä¸ªæ‰“å¼€è“ç‰™Açš„COM15å£ï¼Œä¸€ä¸ªæ‰“å¼€è“ç‰™Bçš„COM14å£ã€‚(é»˜è®¤æ³¢ç‰¹ç‡ä¸€èˆ¬ä¸º38400ï¼Œæ•°æ®ä½ä¸º8ï¼Œåœæ­¢ä½ä¸º1)</p>
<p><strong>3ã€</strong>[æ¢å¤Aé»˜è®¤è®¾ç½®]ä¸²å£è°ƒè¯•åŠ©æ‰‹Aï¼Œç«¯å£ä¸ºcom15,å°†è“ç‰™Aæ¢å¤é»˜è®¤è®¾ç½®ï¼šAT+ORGL\r\n (\r\nå³å›è½¦ã€æ¢è¡Œï¼Œæˆ–è€…åœ¨ä¸²å£è°ƒè¯•åŠ©æ‰‹ä¸Šè¾“å…¥AT+ORGLå†æŒ‰ä¸‹å›è½¦å³å¯)</p>
<p><strong>4ã€</strong>[è®¾ç½®Aé…å¯¹ç ]ä¸²å£è°ƒè¯•åŠ©æ‰‹Aï¼Œé…ç½®è“ç‰™Açš„é…å¯¹ç ï¼šAT+PSWD&#x3D;1234\r\n,(è“ç‰™Aä¸è“ç‰™Bçš„é…å¯¹ç ç›¸åŒï¼Œè¿™æ ·æ‰èƒ½æˆåŠŸé…å¯¹)</p>
<p><strong>5ã€</strong>[è®¾ç½®Aä¸»æ¨¡å¼]ä¸²å£è°ƒè¯•åŠ©æ‰‹Aï¼Œå°†è“ç‰™Aé…ç½®ä¸ºä¸»æœºæ¨¡å¼ï¼šAT+ROLE&#x3D;1\r\n</p>
<p><strong>6ã€</strong>[æ¢å¤Bé»˜è®¤è®¾ç½®]ä¸²å£è°ƒè¯•åŠ©æ‰‹B,å°†è“ç‰™Bæ¢å¤é»˜è®¤è®¾ç½®ï¼šAT+ORGL\r\n</p>
<p><strong>7ã€</strong>[è®¾ç½®Bé…å¯¹ç ]ä¸²å£è°ƒè¯•åŠ©æ‰‹Bï¼Œé…ç½®è“ç‰™Bçš„é…å¯¹ç ä¸è“ç‰™Aä¸€è‡´ï¼šAT+PSWD&#x3D;1234\r\n</p>
<p><strong>8ã€</strong>[è®¾ç½®Bä»æ¨¡å¼]ä¸²å£è°ƒè¯•åŠ©æ‰‹Bï¼Œå°†è“ç‰™Bé…ç½®ä¸ºä»æœºæ¨¡å¼ï¼šAT+ROLE&#x3D;0\r\n</p>
<p><strong>9ã€</strong>[æŸ¥è¯¢Båœ°å€]ä¸²å£è°ƒè¯•åŠ©æ‰‹Bï¼ŒæŸ¥è¯¢è“ç‰™Bçš„åœ°å€ï¼šAT+ADDR?\r\n (å¦‚ï¼š+ADDR:98d3:37:90efca)</p>
<p><strong>10ã€</strong>[è“ç‰™Aç»‘å®šè“ç‰™B]ä¸²å£è°ƒè¯•åŠ©æ‰‹Aï¼Œè“ç‰™Aç»‘å®šè“ç‰™Båœ°å€ï¼š<br>AT+BIND&#x3D;98d3ï¼Œ37ï¼Œ90efca\r\nï¼ˆæ³¨æ„æŠŠåœ°å€çš„å†’å·æ¢æˆé€—å·ï¼‰</p>
<p><strong>11ã€</strong>[å¸¸è§„å·¥ä½œæ¨¡å¼]2ä¸ªæ¨¡å—çš„PIO11å¼•è„šéƒ½æ¥åœ°ï¼Œé‡æ–°ä¸Šç”µåè¿›å…¥å¸¸è§„å·¥ä½œæ¨¡å¼ï¼Œè‡ªåŠ¨å®Œæˆé…å¯¹ã€‚ä¹‹åï¼Œä¸²å£è°ƒè¯•åŠ©æ‰‹Aå’Œä¸²å£è°ƒè¯•åŠ©æ‰‹Bå°±èƒ½äº’ä¼ æ•°æ®äº†ã€‚ï¼ˆç¬”è€…è¿™é‡Œæ˜¯ç›´æ¥å°†ENè„šç½®ç©ºï¼‰</p>
<p><strong>æ³¨æ„</strong>ï¼šç¡®ä¿2ä¸ªè“ç‰™æ¨¡å—çš„é…å¯¹ç ï¼ˆPSWDï¼‰ç›¸åŒï¼Œéƒ½ä¸Šç”µåä¸¤ä¸ªæ¨¡å—ä¼šè‡ªåŠ¨ç›¸è¿ã€‚<br>ï¼ˆè“ç‰™çš„è¿æ¥æ¨¡å¼é»˜è®¤æ˜¯ï¼š0â€”â€”æŒ‡å®šè“ç‰™åœ°å€è¿æ¥æ¨¡å¼ï¼Œè¿™æ ·è“ç‰™Aæ‰èƒ½è‡ªåŠ¨è¿æ¥ç»‘å®šçš„åœ°å€ï¼Œå¦‚æœä¸æ˜¯æ¨¡å¼0ï¼Œè®¾ç½®ä¸ºæ¨¡å¼0ï¼šAT+CMODE&#x3D;0 [æŸ¥è¯¢æŒ‡ä»¤ï¼š<code>AT+CMODEï¼Ÿ</code>]ï¼‰</p>
<blockquote>
<p>å¦‚æœè¿æ¥å¤±è´¥ï¼Œé‡æ–°é…ç½®ä¸€æ¬¡ã€‚è¿æ¥æˆåŠŸæ˜¯æ¯ç§’é—ªä¸€æ¬¡ï¼Œä¸€æ¬¡é—ªä¸¤ä¸‹</p>
</blockquote>
<p>æ³¨æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä¸¤ä¸ªæ¨¡å—æ³¢ç‰¹ç‡åŠæ ¼å¼ç›¸åŒ</span><br><span class="line">å¯†ç ç›¸åŒ</span><br><span class="line">ä¸€ä¸ªä¸ºä¸»æœºæ¨¡å¼ï¼Œä¸€ä¸ªä¸ºä»æœºæ¨¡å¼</span><br><span class="line">è¿æ¥æ–¹å¼éƒ½è®¾ç½®ä¸ºåœ°å€è¿æ¥</span><br><span class="line">ç»‘å®šå¯¹æ–¹åœ°å€</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯ç¬”è€…ç”¨ç¬”è®°æœ¬ç”¨ä¸¤ä¸ªä¸²å£ç›´æ¥æµ‹è¯•çš„å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/664347ce0ea9cb1403ca6fdc.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ï¼ˆå·¦è¾¹æ˜¯Aï¼Œå³è¾¹æ˜¯Bï¼Œå³è¾¹å‘é€å‘½ä»¤æ¡†æ‰€å‘é€çš„å†…å®¹æ˜¾ç¤ºåœ¨å·¦è¾¹æ¡†ä¸­ï¼‰</p>
<p>æ­¤æ–‡å¤šå¤„å‚è€ƒ<a href="https://wenku.baidu.com/view/97d363d2b04e852458fb770bf78a6529647d3556.html">è¿™ç¯‡æ–‡ç« </a>ï¼Œè‹¥æœ‰ä¸å¦¥ï¼Œè¿˜è¯·æŒ‡å‡ºã€‚</p>
]]></content>
      <categories>
        <category>åµŒå…¥å¼å¼€å‘</category>
        <category>è“ç‰™æ¨¡å—</category>
      </categories>
  </entry>
  <entry>
    <title>æ‘¸é±¼ç¥å™¨ä¹‹ä¸‹ç­å€’è®¡æ—¶è®¡æ—¶å™¨</title>
    <url>/8861.html</url>
    <content><![CDATA[<p>ä¸Šç­æ‘¸é±¼æ˜¯ä¸€ä¸ªæ‰“å·¥äººçš„å¸¸æ€ï¼Œä¸å…¶ä¸æ–­åœ°ç›¯ç€æ—¶é—´çœ‹è¿˜æœ‰å¤šä¹…ä¸‹ç­ï¼Œè¿˜ä¸å¦‚ç”¨ä¸€ä¸ªå€’è®¡æ—¶å™¨å¸®ä½ è®¡æ—¶ï¼Œè®©ä½ çŸ¥é“è¿˜æœ‰å¤šä¹…ä¸‹ç­ï¼Œå¥½å‡†æ—¶è·‘è·¯ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å…·ä½“å®ç°ä»£ç ï¼ˆpythonï¼‰ä¸‹é¢å·²ç»ç»™å‡º,è¿™é‡Œåšä¸»ä¹Ÿç”Ÿæˆäº†.exeå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥ç›´æ¥ç§èŠåšä¸»ã€‚å¦‚ä¸‹å›¾<br><img data-src="https://pic.imgdb.cn/item/66433c1f0ea9cb1403b4ae2a.png" alt="æ•ˆæœå›¾"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">refresh_current_time</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;åˆ·æ–°å½“å‰æ—¶é—´&quot;&quot;&quot;</span></span><br><span class="line">    clock_time = time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line">    curr_time.config(text=clock_time)</span><br><span class="line">    curr_time.after(<span class="number">1000</span>, refresh_current_time)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">refresh_down_time</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;åˆ·æ–°å€’è®¡æ—¶æ—¶é—´&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line">    now_time = <span class="built_in">int</span>(time.time())</span><br><span class="line">    <span class="comment"># ä¸‹ç­æ—¶é—´æ—¶åˆ†ç§’æ•°æ®è¿‡æ»¤</span></span><br><span class="line">    work_hour_val = <span class="built_in">int</span>(work_hour.get())</span><br><span class="line">    <span class="keyword">if</span> work_hour_val &gt; <span class="number">23</span>:</span><br><span class="line">        down_label.config(text=<span class="string">&#x27;å°æ—¶çš„åŒºé—´ä¸ºï¼ˆ00-23ï¼‰&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    work_minute_val = <span class="built_in">int</span>(work_minute.get())</span><br><span class="line">    <span class="keyword">if</span> work_minute_val &gt; <span class="number">59</span>:</span><br><span class="line">        down_label.config(text=<span class="string">&#x27;åˆ†é’Ÿçš„åŒºé—´ä¸ºï¼ˆ00-59ï¼‰&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    work_second_val = <span class="built_in">int</span>(work_second.get())</span><br><span class="line">    <span class="keyword">if</span> work_second_val &gt; <span class="number">59</span>:</span><br><span class="line">        down_label.config(text=<span class="string">&#x27;ç§’æ•°çš„åŒºé—´ä¸ºï¼ˆ00-59ï¼‰&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="comment"># ä¸‹ç­æ—¶é—´è½¬ä¸ºæ—¶é—´æˆ³</span></span><br><span class="line">    work_date = <span class="built_in">str</span>(work_hour_val) + <span class="string">&#x27;:&#x27;</span> + <span class="built_in">str</span>(work_minute_val) + <span class="string">&#x27;:&#x27;</span> + <span class="built_in">str</span>(work_second_val)</span><br><span class="line">    work_str_time = time.strftime(<span class="string">&#x27;%Y-%m-%d &#x27;</span>) + work_date</span><br><span class="line">    time_array = time.strptime(work_str_time, <span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line">    work_time = time.mktime(time_array)</span><br><span class="line">    <span class="keyword">if</span> now_time &gt; work_time:</span><br><span class="line">        down_label.config(text=<span class="string">&#x27;å·²è¿‡ä¸‹ç­æ—¶é—´&#x27;</span>)</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">        down_label.config(text=<span class="string">&#x27;ååˆ†é’Ÿåå°†è‡ªåŠ¨å…³æœº&#x27;</span>)</span><br><span class="line">        os.system(<span class="string">&#x27;shutdown -s -t 600&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="comment"># è·ç¦»ä¸‹ç­æ—¶é—´å‰©ä½™ç§’æ•°</span></span><br><span class="line">    diff_time = <span class="built_in">int</span>(work_time - now_time)</span><br><span class="line">    <span class="keyword">while</span> diff_time &gt; -<span class="number">1</span>:</span><br><span class="line">        <span class="comment"># è·å–å€’è®¡æ—¶-æ—¶åˆ†ç§’</span></span><br><span class="line">        down_minute = diff_time // <span class="number">60</span></span><br><span class="line">        down_second = diff_time % <span class="number">60</span></span><br><span class="line">        down_hour = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> down_minute &gt; <span class="number">60</span>:</span><br><span class="line">            down_hour = down_minute // <span class="number">60</span></span><br><span class="line">            down_minute = down_minute % <span class="number">60</span></span><br><span class="line">        <span class="comment"># åˆ·æ–°å€’è®¡æ—¶æ—¶é—´</span></span><br><span class="line">        down_time = <span class="built_in">str</span>(down_hour).zfill(<span class="number">2</span>) + <span class="string">&#x27;æ—¶&#x27;</span> + <span class="built_in">str</span>(down_minute).zfill(<span class="number">2</span>) + <span class="string">&#x27;åˆ†&#x27;</span> + <span class="built_in">str</span>(down_second).zfill(<span class="number">2</span>) + <span class="string">&#x27;ç§’&#x27;</span></span><br><span class="line">        down_label.config(text=down_time)</span><br><span class="line">        tk_obj.update()</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> diff_time == <span class="number">0</span>:</span><br><span class="line">            <span class="comment"># å€’è®¡æ—¶ç»“æŸ</span></span><br><span class="line">            down_label.config(text=<span class="string">&#x27;å·²åˆ°ä¸‹ç­æ—¶é—´&#x27;</span>)</span><br><span class="line">            time.sleep(<span class="number">2</span>)</span><br><span class="line">            down_label.config(text=<span class="string">&#x27;ååˆ†é’Ÿåå°†è‡ªåŠ¨å…³æœº&#x27;</span>)</span><br><span class="line">            os.system(<span class="string">&#x27;shutdown -s -t 600&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        diff_time -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¨‹åºä¸»å…¥å£</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># è®¾ç½®é¡µé¢æ•°æ®</span></span><br><span class="line">    tk_obj = Tk()</span><br><span class="line">    tk_obj.geometry(<span class="string">&#x27;400x280&#x27;</span>)</span><br><span class="line">    tk_obj.resizable(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    tk_obj.config(bg=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    tk_obj.title(<span class="string">&#x27;ä¸Šç­æ‘¸é±¼ä¸“ç”¨å€’è®¡æ—¶&#x27;</span>)</span><br><span class="line">    Label(tk_obj, text=<span class="string">&#x27;ä¸‹ç­å€’è®¡æ—¶&#x27;</span>, font=<span class="string">&#x27;å®‹ä½“ 20 bold&#x27;</span>, bg=<span class="string">&#x27;white&#x27;</span>).pack()</span><br><span class="line">    <span class="comment"># è®¾ç½®å½“å‰æ—¶é—´</span></span><br><span class="line">    Label(tk_obj, font=<span class="string">&#x27;å®‹ä½“ 15 bold&#x27;</span>, text=<span class="string">&#x27;å½“å‰æ—¶é—´ï¼š&#x27;</span>, bg=<span class="string">&#x27;white&#x27;</span>).place(x=<span class="number">50</span>, y=<span class="number">60</span>)</span><br><span class="line">    curr_time = Label(tk_obj, font=<span class="string">&#x27;å®‹ä½“ 15&#x27;</span>, text=<span class="string">&#x27;&#x27;</span>, fg=<span class="string">&#x27;gray25&#x27;</span>, bg=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    curr_time.place(x=<span class="number">160</span>, y=<span class="number">60</span>)</span><br><span class="line">    refresh_current_time()</span><br><span class="line">    <span class="comment"># è®¾ç½®ä¸‹ç­æ—¶é—´</span></span><br><span class="line">    Label(tk_obj, font=<span class="string">&#x27;å®‹ä½“ 15 bold&#x27;</span>, text=<span class="string">&#x27;ä¸‹ç­æ—¶é—´ï¼š&#x27;</span>, bg=<span class="string">&#x27;white&#x27;</span>).place(x=<span class="number">50</span>, y=<span class="number">110</span>)</span><br><span class="line">    <span class="comment"># ä¸‹ç­æ—¶é—´-å°æ—¶</span></span><br><span class="line">    work_hour = StringVar()</span><br><span class="line">    Entry(tk_obj, textvariable=work_hour, width=<span class="number">2</span>, font=<span class="string">&#x27;å®‹ä½“ 12&#x27;</span>).place(x=<span class="number">160</span>, y=<span class="number">115</span>)</span><br><span class="line">    work_hour.<span class="built_in">set</span>(<span class="string">&#x27;18&#x27;</span>)</span><br><span class="line">    <span class="comment"># ä¸‹ç­æ—¶é—´-åˆ†é’Ÿ</span></span><br><span class="line">    work_minute = StringVar()</span><br><span class="line">    Entry(tk_obj, textvariable=work_minute, width=<span class="number">2</span>, font=<span class="string">&#x27;å®‹ä½“ 12&#x27;</span>).place(x=<span class="number">185</span>, y=<span class="number">115</span>)</span><br><span class="line">    work_minute.<span class="built_in">set</span>(<span class="string">&#x27;00&#x27;</span>)</span><br><span class="line">    <span class="comment"># ä¸‹ç­æ—¶é—´-ç§’æ•°</span></span><br><span class="line">    work_second = StringVar()</span><br><span class="line">    Entry(tk_obj, textvariable=work_second, width=<span class="number">2</span>, font=<span class="string">&#x27;å®‹ä½“ 12&#x27;</span>).place(x=<span class="number">210</span>, y=<span class="number">115</span>)</span><br><span class="line">    work_second.<span class="built_in">set</span>(<span class="string">&#x27;00&#x27;</span>)</span><br><span class="line">    <span class="comment"># è®¾ç½®å‰©ä½™æ—¶é—´</span></span><br><span class="line">    Label(tk_obj, font=<span class="string">&#x27;å®‹ä½“ 15 bold&#x27;</span>, text=<span class="string">&#x27;å‰©ä½™æ—¶é—´ï¼š&#x27;</span>, bg=<span class="string">&#x27;white&#x27;</span>).place(x=<span class="number">50</span>, y=<span class="number">160</span>)</span><br><span class="line">    down_label = Label(tk_obj, font=<span class="string">&#x27;å®‹ä½“ 23&#x27;</span>, text=<span class="string">&#x27;&#x27;</span>, fg=<span class="string">&#x27;gray25&#x27;</span>, bg=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    down_label.place(x=<span class="number">160</span>, y=<span class="number">155</span>)</span><br><span class="line">    down_label.config(text=<span class="string">&#x27;00æ—¶00åˆ†00ç§’&#x27;</span>)</span><br><span class="line">    <span class="comment"># å¼€å§‹è®¡æ—¶æŒ‰é’®</span></span><br><span class="line">    Button(tk_obj, text=<span class="string">&#x27;START&#x27;</span>, bd=<span class="string">&#x27;5&#x27;</span>, command=refresh_down_time, bg=<span class="string">&#x27;green&#x27;</span>, font=<span class="string">&#x27;å®‹ä½“ 10 bold&#x27;</span>).place(x=<span class="number">150</span>, y=<span class="number">220</span>)</span><br><span class="line">    tk_obj.mainloop()</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
        <category>å·¥ä½œç”Ÿæ´»</category>
        <category>Pythonåº”ç”¨</category>
        <category>å®ç”¨å·¥å…·</category>
      </categories>
  </entry>
  <entry>
    <title>timeRecords is at its maximum size[64]. Ignore this when unittesting.</title>
    <url>/a463e3d8.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»Šå¤©æŠŠé¡¹ç›®æ‰“å®‰å“åŒ…ï¼Œè¿è¡Œçš„æ—¶å€™çœ‹æ—¥å¿—ï¼Œå‘ç°æŠ¥äº†ä¸€ä¸ªé”™ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<img data-src="https://pic.imgdb.cn/item/664328220ea9cb140391bed7.png" alt="" />

<p><code>timeRecords is at its maximum size[64]. Ignore this when unittesting.</code>æ„æ€å°±æ˜¯time Records å·²è¾¾åˆ°æœ€å¤§å¤§å°[64]ã€‚ å•å…ƒæµ‹è¯•æ—¶å¿½ç•¥è¿™ä¸€ç‚¹ã€‚</p>
<p>å› ä¸ºæˆ‘æ˜¯åœ¨æœ¬åœ°æµ‹è¯•ï¼Œæ‰€ä»¥è¿™ä¸ªé”™ä¹Ÿæ²¡æœ‰å¯¹é¡¹ç›®äº§ç”Ÿä»€ä¹ˆå½±å“ï¼Œé¡¹ç›®è¿˜æ˜¯èƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚è™½ç„¶æŠ¥é”™è¯´æµ‹è¯•çš„æ—¶å€™å¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ç‚¹æ‹…å¿ƒä¸Šçº¿åä¼šä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚</p>
<p>å¦‚æœå“ªä½å¤§ä½¬é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œè¿˜è¯·å¤šå¤šè¯·æ•™ã€‚</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>TypeScript</tag>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>å…ƒå®µèŠ‚ç¥ç¦ä»£ç </title>
    <url>/f07ee6a1.html</url>
    <content><![CDATA[<p>æ˜å¤©å°±æ˜¯å…ƒå®µèŠ‚äº†ï¼Œç®€å•å¼„ä¸€ä¸ªç¥ç¦ä»£ç ï¼Œç¥å¤§å®¶å…ƒå®µèŠ‚å¿«ä¹~</p>
<p>ä»£ç :</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>å…ƒå®µèŠ‚å¿«ä¹<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-tag">body</span> &#123; <span class="attribute">padding</span>: <span class="number">0</span>; <span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">overflow</span>: hidden; <span class="attribute">background-color</span>: <span class="number">#000</span>;</span></span><br><span class="line"><span class="language-css">            &#125; </span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">canvas</span> &#123; <span class="attribute">padding</span>: <span class="number">0</span>; <span class="attribute">margin</span>: <span class="number">0</span>; &#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">footer</span>&#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>:center;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">footer</span> <span class="selector-tag">h2</span>&#123;</span></span><br><span class="line"><span class="language-css">			<span class="attribute">color</span>:<span class="number">#FFFF00</span>;</span></span><br><span class="line"><span class="language-css">			<span class="attribute">font-size</span>:<span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> <span class="variable constant_">PI</span> = <span class="title class_">Math</span>.<span class="property">PI</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> <span class="variable constant_">PI_2</span> = <span class="variable constant_">PI</span> * <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> defaultConfig = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">duration</span>: <span class="number">2000</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// ms</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">delay</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// ms</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">radius</span>: <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// px</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">amount</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// particle number</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">speed</span>: <span class="number">12</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">gravity</span>: <span class="number">0.05</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">friction</span>: <span class="number">0.96</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">reduction</span>: <span class="number">0.98</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">left</span>: <span class="number">0.5</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">top</span>: <span class="number">0.3</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">color</span>: <span class="string">&quot;#ff0000&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">try</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                	<span class="title class_">Canvas</span>.<span class="property">canvas</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">               	 	<span class="title class_">Canvas</span>.<span class="property">canvas</span>.<span class="property">width</span> = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span>;</span></span><br><span class="line"><span class="language-javascript">                	<span class="title class_">Canvas</span>.<span class="property">canvas</span>.<span class="property">height</span> = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span> - <span class="number">40</span>;</span></span><br><span class="line"><span class="language-javascript">               	 	<span class="title class_">Canvas</span>.<span class="property">context</span> = <span class="title class_">Canvas</span>.<span class="property">canvas</span>.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                	<span class="title class_">Canvas</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(0, 0, 0, 0.05)&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">				&#125;<span class="keyword">catch</span>(e)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;h2&quot;</span>).<span class="property">text</span> = <span class="string">&quot;æ‚¨çš„æµè§ˆå™¨æš‚ä¸æ”¯æŒï¼Œè¯·å‡çº§åè§‚çœ‹ï¼&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">//setInterval(exupdate, 1000 / 60);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> num = <span class="number">20</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title class_">Canvas</span>.<span class="title function_">add</span>(<span class="keyword">new</span> <span class="title class_">Firework</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">duration</span>: <span class="number">800</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">delay</span>: <span class="number">50</span> * i,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">amount</span>: <span class="number">20</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">left</span>: <span class="number">1</span> / num * i,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">top</span>: <span class="number">0.3</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">gravity</span>: <span class="number">0.5</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">reduction</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">radius</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">friction</span>: <span class="number">0.9</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">speed</span>: <span class="number">15</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">color</span>: <span class="string">&quot;#ff6&quot;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;));</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="title class_">Canvas</span>.<span class="title function_">start</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">Firework</span>(<span class="params">config</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">setConfig</span>(config || &#123;&#125;);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">particleImage</span> = <span class="title function_">createParticleImage</span>(<span class="variable language_">this</span>.<span class="property">radius</span>, <span class="variable language_">this</span>.<span class="property">color</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">diameter</span> = <span class="variable language_">this</span>.<span class="property">radius</span> * <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">isActive</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">fadeoutOpacity</span> = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">Firework</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">setConfig</span>: <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> defaultConfig) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (config[key] === <span class="literal">undefined</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>[key] = defaultConfig[key];</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>[key] = config[key];</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">initParticles</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">particles</span> = [];</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> x = <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">width</span> * <span class="variable language_">this</span>.<span class="property">left</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> y = <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">height</span> * <span class="variable language_">this</span>.<span class="property">top</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> maxSpeed = (<span class="variable language_">this</span>.<span class="property">speed</span> / <span class="number">2</span>) * (<span class="variable language_">this</span>.<span class="property">speed</span> / <span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">while</span> (<span class="variable language_">this</span>.<span class="property">particles</span>.<span class="property">length</span> &lt; <span class="variable language_">this</span>.<span class="property">amount</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> vx = (<span class="title class_">Math</span>.<span class="title function_">random</span>() - <span class="number">0.5</span>) * <span class="variable language_">this</span>.<span class="property">speed</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> vy = (<span class="title class_">Math</span>.<span class="title function_">random</span>() - <span class="number">0.5</span>) * <span class="variable language_">this</span>.<span class="property">speed</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (vx * vx + vy * vy &lt;= maxSpeed) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">particles</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">Particle</span>(x, y, vx, vy));</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">update</span>: <span class="keyword">function</span>(<span class="params">passed</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isActive</span> === <span class="literal">false</span> || <span class="variable language_">this</span>.<span class="title function_">started</span>(passed) === <span class="literal">false</span>) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">ended</span>(passed)) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">fadeout</span>();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">move</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">render</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">move</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> particles = <span class="variable language_">this</span>.<span class="property">particles</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> particle;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">                    len = particles.<span class="property">length</span>; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                        particle = particles[i];</span></span><br><span class="line"><span class="language-javascript">                        particle.<span class="property">vx</span> *= <span class="variable language_">this</span>.<span class="property">friction</span>;</span></span><br><span class="line"><span class="language-javascript">                        particle.<span class="property">vy</span> = particle.<span class="property">vy</span> * <span class="variable language_">this</span>.<span class="property">friction</span> + <span class="variable language_">this</span>.<span class="property">gravity</span>;</span></span><br><span class="line"><span class="language-javascript">                        particle.<span class="property">x</span> += particle.<span class="property">vx</span>;</span></span><br><span class="line"><span class="language-javascript">                        particle.<span class="property">y</span> += particle.<span class="property">vy</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">render</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalAlpha</span> = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">renderParticles</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">renderParticles</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> diameter = <span class="variable language_">this</span>.<span class="property">diameter</span> *= <span class="variable language_">this</span>.<span class="property">reduction</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> context = <span class="variable language_">this</span>.<span class="property">context</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> particles = <span class="variable language_">this</span>.<span class="property">particles</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> particleImage = <span class="variable language_">this</span>.<span class="property">particleImage</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> p;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">                    len = particles.<span class="property">length</span>; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                        p = particles[i];</span></span><br><span class="line"><span class="language-javascript">                        context.<span class="title function_">drawImage</span>(particleImage, p.<span class="property">x</span>, p.<span class="property">y</span>, diameter, diameter);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">started</span>: <span class="keyword">function</span>(<span class="params">passed</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">delay</span> &lt; passed;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">ended</span>: <span class="keyword">function</span>(<span class="params">passed</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">duration</span> + <span class="variable language_">this</span>.<span class="property">delay</span> &lt; passed;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fadeout</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">fadeoutOpacity</span> -= <span class="number">0.1</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">fadeoutOpacity</span> &lt;= <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">isActive</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">move</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalAlpha</span> = <span class="variable language_">this</span>.<span class="property">fadeoutOpacity</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">renderParticles</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">Particle</span>(<span class="params">x, y, vx, vy</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">x</span> = x;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">y</span> = y;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">vx</span> = vx;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">vy</span> = vy;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> <span class="title class_">Canvas</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fireworks</span>: [],</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">add</span>: <span class="keyword">function</span>(<span class="params">firework</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    firework.<span class="property">canvas</span> = <span class="variable language_">this</span>.<span class="property">canvas</span>;</span></span><br><span class="line"><span class="language-javascript">                    firework.<span class="property">context</span> = <span class="variable language_">this</span>.<span class="property">context</span>;</span></span><br><span class="line"><span class="language-javascript">                    firework.<span class="title function_">initParticles</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">fireworks</span>.<span class="title function_">push</span>(firework);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">start</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">startTime</span> = <span class="title class_">Number</span>(<span class="keyword">new</span> <span class="title class_">Date</span>());</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">update</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fill</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalAlpha</span> = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">width</span>, <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">height</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// main loop</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">update</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> passed = <span class="keyword">new</span> <span class="title class_">Date</span>() - <span class="variable language_">this</span>.<span class="property">startTime</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> activeFireworkCount = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">fireworks</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">firework</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (firework.<span class="property">isActive</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            firework.<span class="title function_">update</span>(passed);</span></span><br><span class="line"><span class="language-javascript">                            activeFireworkCount++;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;.<span class="title function_">bind</span>(<span class="variable language_">this</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (<span class="number">0</span> &lt; activeFireworkCount) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">requestAnimationFrame</span>(<span class="variable language_">this</span>.<span class="property">update</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>));</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">requestAnimationFrame</span>(<span class="variable language_">this</span>.<span class="property">fadeout</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>, <span class="number">20</span>));</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fadeout</span>: <span class="keyword">function</span>(<span class="params">count</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (count &lt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;black&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">width</span>, <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">height</span>);</span></span><br><span class="line"><span class="language-javascript">						<span class="title function_">drawText</span>();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span>; <span class="comment">// animation end</span></span></span><br><span class="line"><span class="language-javascript">						</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalAlpha</span> = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(0, 0, 0, 0.15)&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">requestAnimationFrame</span>(<span class="variable language_">this</span>.<span class="property">fadeout</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>, count - <span class="number">1</span>));</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">function</span> <span class="title function_">drawText</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="built_in">setInterval</span>(exupdate, <span class="number">1000</span> / <span class="number">60</span>);</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bind</span> === <span class="literal">undefined</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bind</span> = <span class="keyword">function</span>(<span class="params">obj</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> slice = [].<span class="property">slice</span>,</span></span><br><span class="line"><span class="language-javascript">                    args = slice.<span class="title function_">call</span>(<span class="variable language_">arguments</span>, <span class="number">1</span>),</span></span><br><span class="line"><span class="language-javascript">                    self = <span class="variable language_">this</span>,</span></span><br><span class="line"><span class="language-javascript">                    bound = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> self.<span class="title function_">apply</span>(obj || <span class="variable language_">window</span>, args.<span class="title function_">concat</span>(slice.<span class="title function_">call</span>(<span class="variable language_">arguments</span>)));</span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript">                    bound.<span class="property"><span class="keyword">prototype</span></span> = <span class="variable language_">this</span>.<span class="property"><span class="keyword">prototype</span></span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> bound;</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">createParticleImage</span>(<span class="params">radius, color</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> size = radius * <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                canvas.<span class="property">width</span> = canvas.<span class="property">height</span> = size;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> gradient = context.<span class="title function_">createRadialGradient</span>(radius, radius, <span class="number">0</span>, radius, radius, size);</span></span><br><span class="line"><span class="language-javascript">                gradient.<span class="title function_">addColorStop</span>(<span class="number">0</span>, <span class="string">&quot;white&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                gradient.<span class="title function_">addColorStop</span>(<span class="number">0.1</span>, <span class="string">&quot;white&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                gradient.<span class="title function_">addColorStop</span>(<span class="number">0.3</span>, color);</span></span><br><span class="line"><span class="language-javascript">                gradient.<span class="title function_">addColorStop</span>(<span class="number">1</span>, <span class="string">&quot;rgba(0, 0, 0, 0)&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                context.<span class="property">fillStyle</span> = gradient;</span></span><br><span class="line"><span class="language-javascript">                context.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">                context.<span class="title function_">arc</span>(radius, radius, radius, <span class="number">0</span>, <span class="variable constant_">PI_2</span>, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                context.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> particle = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">                particle.<span class="property">src</span> = canvas.<span class="title function_">toDataURL</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> particle;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            (<span class="keyword">function</span>(<span class="params">w, r</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                w[<span class="string">&#x27;r&#x27;</span> + r] = w[<span class="string">&#x27;r&#x27;</span> + r] || w[<span class="string">&#x27;webkitR&#x27;</span> + r] || w[<span class="string">&#x27;mozR&#x27;</span> + r] || w[<span class="string">&#x27;msR&#x27;</span> + r] || w[<span class="string">&#x27;oR&#x27;</span> + r] ||</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">function</span>(<span class="params">c</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    w.<span class="built_in">setTimeout</span>(c, <span class="number">1000</span> / <span class="number">60</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">            &#125;)(<span class="variable language_">window</span>, <span class="string">&#x27;equestAnimationFrame&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			 <span class="keyword">function</span> <span class="title function_">exupdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">			 	<span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;firework&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">			 	<span class="keyword">var</span> width = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span>;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> height = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">random</span>() &lt; <span class="number">0.1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">explode</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * width, <span class="title class_">Math</span>.<span class="title function_">random</span>() * height, <span class="title function_">randomColor</span>());</span></span><br><span class="line"><span class="language-javascript">               &#125;</span></span><br><span class="line"><span class="language-javascript">			   </span></span><br><span class="line"><span class="language-javascript">                cxt.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> i = particles.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> p = particles[i];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">vx</span> *= p.<span class="property">deceleration</span>;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">vy</span> *= p.<span class="property">deceleration</span>;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">vy</span> += p.<span class="property">gravity</span>;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">x</span> += p.<span class="property">vx</span>;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">y</span> += p.<span class="property">vy</span>;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">energy</span> *= p.<span class="property">deceleration</span>;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">a</span> = <span class="title class_">Math</span>.<span class="title function_">atan2</span>(p.<span class="property">vy</span>, p.<span class="property">vx</span>);</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">tx</span> = p.<span class="property">x</span> + p.<span class="property">length</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(p.<span class="property">a</span>);</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">ty</span> = p.<span class="property">y</span> + p.<span class="property">length</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>(p.<span class="property">a</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (p.<span class="property">energy</span> &lt; <span class="number">0.05</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        particles.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        cxt.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">                        cxt.<span class="property">fillStyle</span> = p.<span class="property">color</span>;</span></span><br><span class="line"><span class="language-javascript">						cxt.<span class="title function_">fillRect</span>(p.<span class="property">x</span>, p.<span class="property">y</span>, p.<span class="property">tx</span> - p.<span class="property">x</span>, p.<span class="property">ty</span> - p.<span class="property">y</span>);</span></span><br><span class="line"><span class="language-javascript">						cxt.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript">                        cxt.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript">                        cxt.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> x = <span class="built_in">parseInt</span>(width)/<span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> y = <span class="built_in">parseInt</span>(height)/<span class="number">2</span></span></span><br><span class="line"><span class="language-javascript">				cxt.<span class="property">font</span> = <span class="string">&quot;60px å®‹ä½“ bold&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">           		cxt.<span class="property">textAlign</span> = <span class="string">&#x27;center&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">           	 	cxt.<span class="property">fillStyle</span> = colors[<span class="built_in">parseInt</span>(cIndex)%<span class="number">25</span>];</span></span><br><span class="line"><span class="language-javascript">            	cxt.<span class="title function_">fillText</span>(<span class="string">&#x27;å…ƒå®µèŠ‚å¿«ä¹ï¼&#x27;</span>, x, y, <span class="number">400</span>);</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span>(timeTick &gt;<span class="number">10</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					cIndex = <span class="built_in">parseInt</span>(cIndex) + <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">					timeTick = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				timeTick = <span class="built_in">parseInt</span>(timeTick) + <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> colors = [<span class="string">&quot;#fff&quot;</span>,<span class="string">&quot;#ccc&quot;</span>,<span class="string">&quot;#ff0000&quot;</span>,<span class="string">&quot;#00ff00&quot;</span>,<span class="string">&quot;#0000ff&quot;</span>,<span class="string">&quot;#00ffff&quot;</span>,<span class="string">&quot;#ffff00&quot;</span>,<span class="string">&quot;#FF7F00&quot;</span>,<span class="string">&quot;#FF1493&quot;</span>,<span class="string">&quot;#9B30FF&quot;</span>,<span class="string">&quot;#9AFF9A&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">						  <span class="string">&quot;#FFC1C1&quot;</span>,<span class="string">&quot;#FFE1FF&quot;</span>,<span class="string">&quot;#8B7B8B&quot;</span>,<span class="string">&quot;#8B6969&quot;</span>,<span class="string">&quot;#548B54&quot;</span>,<span class="string">&quot;#551A8B&quot;</span>,<span class="string">&quot;#8B0A50&quot;</span>,<span class="string">&quot;#8B4500&quot;</span>,<span class="string">&quot;#8b8b00&quot;</span>,<span class="string">&quot;#008b8b&quot;</span>,<span class="string">&quot;#00008b&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">						  <span class="string">&quot;#008b00&quot;</span>,<span class="string">&quot;#8b0000&quot;</span>,<span class="string">&quot;#666&quot;</span>,<span class="string">&quot;#000&quot;</span>];</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> cIndex = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> timeTick = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> particles = [];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">explode</span>(<span class="params">x, y, color</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">//document.getElementById(&quot;showInfo&quot;).innerHTML = color;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> c = <span class="number">400</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">while</span> (c-- &gt;<span class="number">0</span> ) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> p = &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">energy</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> angle = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> v = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">vx</span> = <span class="title class_">Math</span>.<span class="title function_">cos</span>(angle) * v;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">vy</span> = <span class="title class_">Math</span>.<span class="title function_">sin</span>(angle) * v;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">x</span> = x;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">y</span> = y;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">color</span> = color;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">deceleration</span> = <span class="number">0.95</span>;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">gravity</span> = <span class="number">0.05</span>;</span></span><br><span class="line"><span class="language-javascript">                    p.<span class="property">length</span> = <span class="number">4</span>;</span></span><br><span class="line"><span class="language-javascript">                    particles.<span class="title function_">push</span>(p);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">randomColor</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="string">&quot;#&quot;</span> + <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">9</span>) + <span class="string">&quot;&quot;</span> + <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">9</span>) + <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="language-javascript">				            + <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">9</span>) + <span class="string">&quot;&quot;</span> + <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">9</span>) + <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="language-javascript">							+ <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">9</span>) + <span class="string">&quot;&quot;</span> + <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">9</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;firework&quot;</span>&gt;</span></span><br><span class="line">        	</span><br><span class="line">        <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>èŠ‚æ—¥ç¥ç¦</category>
      </categories>
  </entry>
  <entry>
    <title>Arduino Mega 2560 Reference DesignåŸç†å›¾è§£è¯»</title>
    <url>/40929.html</url>
    <content><![CDATA[<p>Arduinoæ˜¯ä¸€æ¬¾ä¾¿æ·çµæ´»ã€æ–¹ä¾¿ä¸Šæ‰‹çš„å¼€æºç”µå­åŸå‹å¹³å°ã€‚åŒ…å«ç¡¬ä»¶ï¼ˆå„ç§å‹å·çš„Arduinoæ¿ï¼‰å’Œè½¯ä»¶ï¼ˆArduinoIDEï¼‰</p>
<span id="more"></span>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<ul>
<li>ç”µæºæ¨¡å—<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTA2MjMxMTA4NTU3?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>â€˜IC1â€™å’Œâ€™IC2â€™æ˜¯ä¸¤ä¸ªä½å‹å·®ä¸‰è·¯ç¨³å‹å™¨ï¼Œèµ·ç€é™å‹ä»¥åŠç¨³å‹çš„ä½œç”¨ã€‚å›¾ä¸­çš„è¾“å‡ºæ˜¯+5Vï¼Œä½†æˆ‘ä»¬å®æµ‹è¾“å…¥ç”µå‹ä¸º9Vå·¦å³ï¼Œè¾“å‡ºç”µå‹ä¸º4.7Vã€‚<br>&emsp;&emsp;è¿™é‡Œä¸ºä»€ä¹ˆè¦è¿›è¡Œé™å‹å¤„ç†äº†ï¼ŸåŸå› å¾ˆç®€å•ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“åŠŸè€—å’Œç”µå‹æˆæ­£æ¯”ï¼Œå³ç”µå‹è¶Šå¤§ï¼Œç”µå­äº§å“çš„åŠŸè€—è¶Šå¤§ï¼ˆP&#x3D;UIï¼‰ã€‚ä½†æ˜¯é‡‡ç”¨ä½ç”µå‹ä¾›ç”µåœ¨æŠ€æœ¯å’Œç¡¬ä»¶æ–¹é¢çš„è¦æ±‚æ›´é«˜ã€‚<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTA2MjMyMjM2NTc2?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œç”µå‹åº”è¯¥æ˜¯ä¸éšæ—¶é—´çš„æ”¹å˜è€Œæ”¹å˜ï¼Œä½†åœ¨æŸäº›æ—¶åˆ»ï¼Œå› ä¸ºå¤–ç•Œçš„å¹²æ‰°æˆ–è€…ç”µè·¯æœ¬èº«è®¾è®¡çš„é—®é¢˜ä¼šé€ æˆç”µå‹çš„è¡°å‡ã€‚ç”µå‹è¡°å‡é€ æˆä¿¡å·åœ¨ä¼ è¾“è¿‡ç¨‹çš„è¡°å‡ï¼Œå°±å¯èƒ½å½±å“åˆ°ç”µè·¯ä¹‹é—´çš„é€šä¿¡ã€‚<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTA2MjMzMDAwMDk4?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œç”µè·¯ç”µå‹çš„è¾“å…¥ä¸º9Vï¼Œä¸”ä¸ä¸ºæ—¶é—´çš„æ”¹å˜è€Œæ”¹å˜ï¼Œå¦‚ä¸Šå›¾çš„è™šçº¿æ‰€ç¤ºã€‚ä½†å®é™…é¡¹ç›®ä¸­ï¼Œç”µå‹å¾€å¾€æ˜¯ä¸ç¨³å®šçš„ï¼Œå¦‚ä¸Šå›¾æ³¢æµªçº¿æ‰€ç¤ºã€‚æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸€ä¸ªé™å‹ç¨³å‹ç”µè·¯æ¥ç¨³å®šå…¶ç”µå‹ï¼Œå¦‚ä¸Šå›¾ç›´çº¿æ‰€ç¤ºã€‚<br><strong>é™å‹ç”µè·¯ï¼š</strong>ç¨³å®šç”µå‹ï¼Œæ¶ˆè€—å¤šä½™åŠŸç‡ã€‚ï¼ˆæ ¹æ®å…¬å¼P&#x3D;UIï¼Œç”µå‹é™ä½äº†ï¼Œå…¶åŠŸç‡ä¹Ÿä¼šé™ä½ã€‚è€Œé™ä½çš„åŠŸç‡ä¸»è¦ç”±é™å‹ç”µè·¯æ‰€æ¶ˆè€—ï¼Œä¸»è¦æ–¹å¼ä¸ºæ•£çƒ­ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸€èˆ¬ç”µè·¯çš„ç”µæºæ¨¡å—æ¸©åº¦æ¯”å…¶ä»–æ¨¡å—é«˜çš„åŸå› ï¼‰ã€‚<br><strong>æœŸæœ›</strong> å› ä¸ºå¤šä½™çš„åŠŸç‡é€šè¿‡æ•£çƒ­çš„å½¢å¼æ¶ˆè€—éš¾å…è®©äººè§‰å¾—å¯æƒœï¼Œæ‰€ä»¥å°±<a href="http://baike.baidu.com/link?url=93ZMHJTSc1RxI2RNYP67bV3MIh9wbncsAmpkr9HBIRmJjsfkoWBBmNaRClCC5KrAwx-iwVOhTECsbdYBEdCh4oOAu--9jK7OM0zkW2o2k5EHFc5ewUPZQlikY_Kjrcf0">å¼€å…³ç”µæº</a>å°±è¯ç”Ÿäº†ã€‚</li>
</ul>
<p>åŒæ—¶æˆ‘ä»¬ä¹Ÿçœ‹åˆ°ç”µæºæ¨¡å—æœ‰å‡ ä¸ªç”µå®¹ï¼Œç”µå®¹çš„ä¸»è¦ä½œç”¨æ˜¯æ»¤æ³¢å’Œå‚¨èƒ½ã€‚ä¸€èˆ¬ç”µå®¹ä¸º47uFæˆ–è€…470uFã€‚é€šå¸¸ä½¿ç”¨å°ç”µå®¹æ»¤é™¤é«˜é¢‘å¹²æ‰°ï¼Œå¤§ç”µå®¹æ¶ˆé™¤ä½é¢‘å¹²æ‰°ã€‚</p>
<p><img data-src="https://pic.imgdb.cn/item/6643490e0ea9cb1403cc1be4.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>å› ä¸ºç”µå®¹çš„å­˜åœ¨ï¼Œæ‰€ä»¥é«˜ä½ç”µå¹³çš„è½¬æ¢ä¹Ÿç”±å·¦å›¾å˜æˆäº†å³å›¾ã€‚</p>
<ul>
<li>å¤ä½</li>
</ul>
<p><img data-src="https://pic.imgdb.cn/item/6643490d0ea9cb1403cc1b99.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p><img data-src="https://pic.imgdb.cn/item/6643490d0ea9cb1403cc1b76.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>å½“æŒ‰ä¸‹å¤ä½é”®åï¼ŒGNDå’ŒRESETçŸ­æ¥ï¼Œæ‹‰ä½äº†ç”µå¹³ï¼ˆæ³¨æ„ï¼ŒèŠ¯ç‰‡ä¸Šçš„RESETè„šå’ŒæœåŠ¡æ¨¡å—çš„RESERTè„šæ˜¯è¿åœ¨ä¸€èµ·çš„ï¼Œåªè¦ä¸­é—´æ²¡æœ‰å…¶å®ƒç”µå®¹ç”µé˜»è¿™äº›å™¨ä»¶ï¼Œç”µå‹æ˜¯ç›¸ç­‰çš„ï¼‰ã€‚ç”¨ç¤ºæ³¢å™¨è§‚å¯Ÿï¼ŒæŒ‰ä¸‹å¤ä½é”®æ—¶ï¼Œç”µå¹³ä¼šæ‹‰ä½ï¼Œå½“æ¾å¼€æ—¶ï¼Œç”µå¹³åˆå‡é«˜ã€‚<br>å¤§å®¶å¯èƒ½æ³¨æ„åˆ°30å·ç®¡è„šå’Œå…¶ä»–ç®¡è„šä¸ä¸€æ ·ï¼Œåœ¨æœ€å³è¾¹æœ‰ä¸€ä¸ªåœ†åœˆã€‚è¿™ä¸ªè¡¨ç¤ºè¯¥ç®¡è„šåªå¯¹ä½ç”µå¹³æœ‰æ•ˆã€‚</p>
<ul>
<li>æ™¶æŒ¯<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTA3MDAxMjM0MDAx?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></li>
</ul>
<p>ç”¨éƒ‘BOSSçš„è¯è®²ï¼Œä½œä¸ºä¸“ä¸šäººå£«ï¼Œçœ‹åˆ°XTALå°±è¦æœ¬èƒ½çš„ååº”æ˜¯â€œæ™¶æŒ¯â€ï¼Œè¿™é‡Œæ˜¯ä½¿ç”¨çš„ä¸€ä¸ª16MHzçš„æ™¶æŒ¯ï¼Œæ™¶æŒ¯åœ¨ç”µè·¯ä¸­èµ·ç€éå¸¸é‡è¦çš„ä½œç”¨ï¼ˆå…·ä½“ä½œç”¨è¿˜è¯·è¯»è€…è‡ªè¡Œç™¾åº¦ï¼‰ï¼Œç›¸å½“äºäººçš„å¿ƒè„ã€‚<br>å¦‚æœç”¨ç¤ºæ³¢å™¨çœ‹æ™¶æŒ¯çš„æ³¢å½¢ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¾ˆæ¼‚äº®çš„æ­£å¼¦æ³¢ï¼ˆè¿™é‡Œçœç•¥ç…§ç‰‡ï¼Œå› ä¸ºåœ¨ç¬”è€…å‡†å¤‡æ‹ç…§çš„æ—¶å€™ç”µè·¯æ¿è¢«å°ä¼™ä¼´ç»™å¼„å†’çƒŸäº†ï¼‰ï¼Œæ„Ÿå…´è¶£çš„åŒå¿—å¯ä»¥è‡ªå·±è¯•ä¸€ä¸‹ã€‚</p>
<ul>
<li><p>è¿ç®—ç”µè·¯<br><img data-src="https://pic.imgdb.cn/item/6643497b0ea9cb1403ccbd6d.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>è¿™ä¸ªç”µè·¯å®ç°åé¦ˆã€‚å¦‚æœ5è„šç”µå‹å¤§äº+3V3ï¼Œå³7è„šç¿»è½¬ä¸ºé«˜å¹³ã€‚</p>
</li>
<li><p>PWM(Pulse-Width Modulation è„‰å†²å®½åº¦è°ƒåˆ¶)<br><img data-src="https://pic.imgdb.cn/item/6643497b0ea9cb1403ccbd1f.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
</li>
</ul>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTA3MDAyMzU0MzEy?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>é€šè¿‡æ”¹å˜è„‰å†²åˆ—çš„å‘¨æœŸå¯ä»¥è°ƒé¢‘ï¼Œæ”¹å˜è„‰å†²çš„å®½åº¦æˆ–å ç©ºæ¯”å¯ä»¥è°ƒå‹ï¼Œé‡‡ç”¨é€‚å½“æ§åˆ¶æ–¹æ³•å³å¯ä½¿ç”µå‹ä¸é¢‘ç‡åè°ƒå˜åŒ–ã€‚å¯ä»¥é€šè¿‡è°ƒæ•´PWMçš„å‘¨æœŸã€PWMçš„å ç©ºæ¯”è€Œè¾¾åˆ°æ§åˆ¶å……ç”µç”µæµçš„ç›®çš„ã€‚è¿›è€Œæ¥æ§åˆ¶æ­¥è¿›ç”µæœºï¼Œæ¥ä¸€ä¸ªè„‰å†²æ­¥è¿›ç”µæœºåŠ¨ä¸€ä¸‹ã€‚</p>
<p>æœ€åè¿˜æœ‰ä¸€äº›å…³äºä¸‡ç”¨è¡¨ã€ç¤ºæ³¢å™¨ã€å­¦ç”Ÿç”µæºç­‰ä»ªå™¨çš„ä½¿ç”¨ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦è‡ªè¡Œç™¾åº¦ã€‚</p>
<blockquote>
<p>æœ¬ç¯‡æ–‡ç« å¯¹å¤§å®¶çœ‹ç”µè·¯åŸç†å›¾æœ‰æ‰€å¸®åŠ©ï¼Œå¦‚æœ‰ä¸å¦¥çš„åœ°æ–¹ä¹Ÿè¯·å„ä½è€å¸æœºå¤šå¤šæŒ‡å‡ºã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>åµŒå…¥å¼å¼€å‘</category>
      </categories>
      <tags>
        <tag>ç¡¬ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>å›½å¤–AppleIDæ³¨å†Œ</title>
    <url>/6f89e884.html</url>
    <content><![CDATA[<p>ä»Šå¤©æ— æ„è§å‘ç°ç½‘ä¸Šæœ‰äººå‡ºå”®å›½å¤–çš„Apple IDï¼Œè€Œä¸”è¿˜ä¸ä¾¿å®œï¼Œåå‡ å—ä¸€ä¸ªã€‚äºæ˜¯å°±æƒ³ç€è‡ªå·±æ³¨å†Œä¸€ä¸ªã€‚<br>ç›´æ¥æ­¥å…¥æ­£é¢˜ï¼ŒæŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤å»æ“ä½œï¼ŒåŸºæœ¬éƒ½èƒ½æˆåŠŸï¼Œè¶…çº§ç®€å•ã€‚</p>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol>
<li>ä¸€éƒ¨iphoneæˆ–è€…ipad</li>
<li>ä¸€ä¸ªèƒ½æ¥å—éªŒè¯ç çš„æ‰‹æœºå·ï¼ˆæ³¨å†Œè¿‡å›½å†…IDçš„ä¹Ÿå¯ï¼‰</li>
</ol>
<h2 id="æ³¨å†Œæ•™ç¨‹"><a href="#æ³¨å†Œæ•™ç¨‹" class="headerlink" title="æ³¨å†Œæ•™ç¨‹"></a>æ³¨å†Œæ•™ç¨‹</h2><ol>
<li><p>iPhoneæˆ–è€…ipadçš„<strong>è®¾ç½®</strong>é€€å‡ºåŸæ¥çš„AppleIDï¼Œç‚¹å‡»<strong>ç™»å½•</strong> -&gt; <strong>æ²¡æœ‰æˆ–å¿˜è®°Apple ID</strong>ã€‚æ³¨æ„ï¼Œé€€å‡ºIDæ˜¯åœ¨<code>è®¾ç½®</code> é‡Œé¢ï¼Œä¸æ˜¯åœ¨<code>APP Store</code></p>
</li>
<li><p>é€‰æ‹© <strong>åˆ›å»ºApple ID</strong> è¾“å…¥å§“åã€å‡ºç”Ÿæ—¥æœŸç­‰å¸¸è§„ä¿¡æ¯ï¼Œç„¶å<strong>ä¸‹ä¸€æ­¥</strong>ï¼ˆå¹´é¾„è¦å¤§äº18å²ï¼‰</p>
</li>
<li><p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©<code>ä½¿ç”¨ç”µå­é‚®ç®±åœ°å€</code>ï¼Œå†é€‰æ‹©<strong>æ²¡æœ‰ç”µå­é‚®ä»¶åœ°å€</strong>ã€‚è¿™æ ·å°±å¯ä»¥å…è´¹åˆ›å»ºä¸€ä¸ªè‹¹æœiCloudç”µå­é‚®ä»¶åœ°å€äº†ï¼Œæ–¹ä¾¿å¿«æ·ã€‚</p>
</li>
<li><p>é€‰æ‹©<strong>è·å–iCloudç”µå­é‚®ä»¶åœ°å€</strong>ï¼Œæ¥ç€åœ¨â€œç”µå­é‚®ä»¶â€æ¡†æ¡†é‡Œè¾“å…¥æ–¹ä¾¿è®°å¿†çš„è´¦å·åã€‚ç„¶åç‚¹å‡»<strong>ä¸‹ä¸€æ­¥</strong>ï¼ˆAppleæ–°é—»å’Œå…¬å‘Šå¯ä»¥å…³æ‰ï¼‰</p>
</li>
<li><p>æ¥ç€æ˜¯è®¾ç½®å¯†ç ï¼Œè¿™æ­¥å¾ˆå…³é”®ã€‚å¯†ç å¿…é¡»è¦è®¾ç½®8ä½æ•°ä»¥ä¸Šï¼Œä¸”è¦åŒæ—¶åŒ…æ‹¬æ•°å­—ã€å¤§å°å†™å­—æ¯ã€‚æ¯”å¦‚<code>123abcABC</code>è¿™æ ·å°±æ˜¯å¯ä»¥çš„ã€‚è®¾ç½®å¥½åç„¶å <strong>ä¸‹ä¸€æ­¥</strong> ã€‚</p>
</li>
</ol>
<p>** é‡è¦æé†’ï¼š** å¯†ç é‡Œä¸è¦åŒ…æ‹¬æœ‰åˆšè®¾ç½®çš„å§“åã€ç”µè¯å·ç æˆ–ç”µå­é‚®ä»¶åœ°å€ä¸­çš„æŸä¸ªéƒ¨åˆ†ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ— æ³•åˆ›å»ºè´¦æˆ·ã€‚ </p>
<ol start="6">
<li>æ¥ç€éªŒè¯ç”µè¯å·ç ã€‚è¾“å…¥è‡ªå·±å¸¸ç”¨çš„å·ç ã€æ¥æ”¶çŸ­ä¿¡éªŒè¯ç å¡«å…¥åä¼šè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€æ­¥ã€‚</li>
</ol>
<blockquote>
<p>è¯´ä¸ªæƒ…å†µï¼Œå¦‚æœæ˜¯æ²¡æœ‰æ’å¡çš„æ‰‹æœºï¼Œå¡«å…¥ç”µè¯å·ç ä¸‹ä¸€æ­¥åå®ƒä¼šæç¤ºâ€œæ— æ³•åˆ›å»ºè´¦æˆ·â€</p>
</blockquote>
<ol start="7">
<li>ç»§ç»­ï¼Œå¹¶åŒæ„ä½¿ç”¨æ¡æ¬¾ã€‚</li>
<li>ç»è¿‡å‡ åç§’çš„ç­‰å¾…ï¼Œä½ çš„Apple IDå°±åˆæ­¥åˆ›å»ºå®Œæˆäº†ã€‚è¾“å…¥æ‰‹æœºå¯†ç è¿›å…¥ä¸‹ä¸€æ­¥ï¼ˆå¦‚è·³å‡ºæç¤ºæ˜¯å¦åˆå¹¶ï¼Œé€‰æ‹©â€œä¸åˆå¹¶â€ï¼‰</li>
<li>å¦‚æœä¸éœ€è¦è¿™ä¸ªå¸å·åŒæ­¥ä½ çš„å¸å·ä¿¡æ¯ï¼Œå»ºè®®æŠŠåŒæ­¥åŠŸèƒ½ç»™å…³æ‰ã€‚</li>
<li>æ¥ç€æ‰“å¼€APP Storeï¼Œä¼šè®©ä½ å®Œå–„Apple IDçš„ç›¸å…³ä¿¡æ¯ã€‚<br>Psï¼šå¦‚æ²¡è·³å‡ºâ€œæ£€æŸ¥â€æç¤ºæ¡†ä¹Ÿæ²¡å…³ç³»ï¼Œç‚¹å‡»å¸å·â€“è¾“å…¥å¯†ç å¹¶ç™»å½•ï¼Œä¹Ÿä¼šè·³å‡ºâ€œæ£€æŸ¥â€æç¤ºæ¡†ã€‚</li>
<li>åœ°åŒºæ›´æ”¹ä¸ºâ€œç¾å›½â€æˆ–è€…ä½ æƒ³è®¾ç½®çš„å…¶ä»–åœ°åŒºã€‚è¿™é‡Œä»¥æ³¨å†Œç¾åŒºä¸ºä¾‹ï¼Œæ‰€ä»¥é€‰æ‹©ç¾å›½ã€‚æ›´æ”¹å¥½ååŒæ„ä½¿ç”¨æ¡æ¬¾ï¼Œç„¶åâ€œä¸‹ä¸€æ­¥â€</li>
<li>è¿™æ­¥å¾ˆå…³é”® ï¼Œé¦–å…ˆä»˜æ¬¾æ–¹å¼ä¸éœ€è¦å¡«å†™ã€‚ç„¶åå› ä¸ºæˆ‘ä»¬è¦æ³¨å†Œçš„æ˜¯ç¾åŒºIDï¼Œæ‰€ä»¥è´¦å•å¯„é€åœ°å€å¿…é¡»å¡«ç¾å›½çš„åœ°å€ï¼Œè¿™éœ€è¦å€ŸåŠ©ç¾å›½åœ°å€ç”Ÿæˆå™¨æ¥å®Œæˆï¼ˆä¹Ÿå¯ä»¥è‡ªå·±åœ¨ç½‘ä¸Šç™¾åº¦ä¸€ä¸ªç¾å›½åœ°å€å¡«ä¸Šå»ï¼‰ã€‚</li>
<li>okï¼Œå®Œæˆåœ°å€çš„éªŒè¯ï¼Œä½ çš„ç¾åŒºIDå°±ç®—æˆåŠŸæ³¨å†Œå¹¶å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚APP Storeçš„ç•Œé¢ä¹Ÿè‡ªåŠ¨åˆ‡æ¢åˆ°äº†ç¾åŒºçš„ï¼Œæœä¸ªå›½åŒºæ²¡æœ‰çš„æ¸¸æˆè¯•è¯•â€¦å®Œå…¨æ²¡é—®é¢˜~<br>æ­¤åˆ»æˆ‘å·²ç»åœ¨å¼€å¿ƒçš„åˆ·ç€TikTokäº†</li>
</ol>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol>
<li><p>å¡«å†™åœ°å€æ—¶æç¤ºæ—¶ï¼ŒåŒºå·è®°å¾—ä¸è¦å¡«â€œ1â€å¼€å¤´çš„ï¼›</p>
</li>
<li><p>åç»­ä½¿ç”¨å¸å·ï¼Œæœ€å¥½å°±ä¸è¦é€šè¿‡è®¾ç½®é‡Œå»ç™»å½•ï¼Œç›´æ¥åœ¨APP Storeç™»å½•å³å¯ï¼›</p>
</li>
<li><p>ç™»å½•åå¦‚è¿˜æ˜¯å›½åŒºç•Œé¢ï¼Œåå°é€€å‡ºAPP Storeåå†æ‰“å¼€å³å¯</p>
</li>
</ol>
<a href="https://it.sohu.com/a/611118869_120387930" title="" target="">åŸæ–‡é“¾æ¥,</a>
]]></content>
      <categories>
        <category>å›½å¤–AppleIDæ³¨å†Œ</category>
      </categories>
  </entry>
  <entry>
    <title>åœ¨htmlæ–‡ä»¶çš„æŒ‡å®šä½ç½®åŠ å…¥æŒ‡å®šæ–‡æœ¬</title>
    <url>/8c2ab891.html</url>
    <content><![CDATA[<p>è®°å½•è‡ªå·±å·¥ä½œä¸­ç”¨åˆ°çš„è„šæœ¬ï¼Œå› ä¸ºæˆ‘ä»¬çš„Cocos Creatoré¡¹ç›®å¯¼å‡º<code>web</code>é¡¹ç›®åï¼Œéœ€è¦ä¿®æ”¹<code>index.html</code>æ–‡ä»¶ï¼Œæ¯æ¬¡æ‰‹åŠ¨ä¿®æ”¹éƒ½å¾ˆéº»çƒ¦ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ï¼Œäºæ˜¯å†³å®šç”¨è„šæœ¬æ¥æå®šã€‚<br>æˆ‘è¿™é‡Œæ˜¯ç”¨pythonå†™çš„ï¼Œpythonç‰ˆæœ¬ä¸º3.8</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>è¦åœ¨ HTML æ–‡ä»¶çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„æ–‡æœ¬ï¼Œå¯ä»¥ä½¿ç”¨ <code>Python</code> çš„ <code>BeautifulSoup</code> åº“ã€‚</p>
<h3 id="å®‰è£…åº“"><a href="#å®‰è£…åº“" class="headerlink" title="å®‰è£…åº“"></a>å®‰è£…åº“</h3><p>é¦–å…ˆï¼Œå®‰è£… <code>BeautifulSoup</code> å’Œ <code>lxml</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip3 install BeautifulSoup</span><br></pre></td></tr></table></figure>

<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>æˆ‘è¿™é‡Œæ˜¯åœ¨<code>index.html</code>ä¸­çš„<code>&lt;head&gt;</code>å’Œ<code>&lt;body&gt;</code>ä¸­æ·»åŠ äº†ä¸€äº›ä»£ç ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">insert_code_in_html</span>(<span class="params">file_path</span>):</span><br><span class="line">    head_code = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    &lt;script src=&quot;https://telegram.org/js/telegram-web-app.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">    &lt;style&gt;</span></span><br><span class="line"><span class="string">        body, html &#123;</span></span><br><span class="line"><span class="string">            height: 100%;</span></span><br><span class="line"><span class="string">            margin: 0;</span></span><br><span class="line"><span class="string">            display: flex;</span></span><br><span class="line"><span class="string">            justify-content: center;</span></span><br><span class="line"><span class="string">            align-items: center;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        #GameDiv &#123;</span></span><br><span class="line"><span class="string">            display: flex;</span></span><br><span class="line"><span class="string">            justify-content: center;</span></span><br><span class="line"><span class="string">            align-items: center;</span></span><br><span class="line"><span class="string">            width: 100%;</span></span><br><span class="line"><span class="string">            height: 100%;</span></span><br><span class="line"><span class="string">            position: absolute;</span></span><br><span class="line"><span class="string">            top: 0;</span></span><br><span class="line"><span class="string">            left: 0;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        #Cocos3dGameContainer &#123;</span></span><br><span class="line"><span class="string">            width: 100%;</span></span><br><span class="line"><span class="string">            height: 100%;</span></span><br><span class="line"><span class="string">            display: flex;</span></span><br><span class="line"><span class="string">            justify-content: center;</span></span><br><span class="line"><span class="string">            align-items: center;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        #GameCanvas &#123;</span></span><br><span class="line"><span class="string">            width: 100%;</span></span><br><span class="line"><span class="string">            height: 100%;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        #loading-animation &#123;</span></span><br><span class="line"><span class="string">            display: flex;</span></span><br><span class="line"><span class="string">            justify-content: center;</span></span><br><span class="line"><span class="string">            align-items: center;</span></span><br><span class="line"><span class="string">            position: absolute;</span></span><br><span class="line"><span class="string">            top: calc(50% - 200px);</span></span><br><span class="line"><span class="string">            left: 50%;</span></span><br><span class="line"><span class="string">            transform: translate(-50%, -50%);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        #loading-text &#123;</span></span><br><span class="line"><span class="string">            display: flex;</span></span><br><span class="line"><span class="string">            justify-content: center;</span></span><br><span class="line"><span class="string">            align-items: center;</span></span><br><span class="line"><span class="string">            color: white;</span></span><br><span class="line"><span class="string">            font-size: 20px;</span></span><br><span class="line"><span class="string">            position: absolute;</span></span><br><span class="line"><span class="string">            top: calc(50% - 80px);</span></span><br><span class="line"><span class="string">            left: 50%;</span></span><br><span class="line"><span class="string">            transform: translate(-50%, -50%);</span></span><br><span class="line"><span class="string">            width: 80%;</span></span><br><span class="line"><span class="string">            text-align: center;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &lt;/style&gt;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    body_code = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    &lt;div id=&quot;loading-animation&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;img src=&quot;web.png&quot; alt=&quot;Loading...&quot; style=&quot;width: 100%; height: 100%;&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div id=&quot;loading-text&quot;&gt;Loading may take a few seconds for the first time. Please be patient.&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;script&gt;</span></span><br><span class="line"><span class="string">        const tg = window.Telegram.WebApp;</span></span><br><span class="line"><span class="string">        tg.isClosingConfirmationEnabled = true;</span></span><br><span class="line"><span class="string">    &lt;/script&gt;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯»å– HTML æ–‡ä»¶å†…å®¹</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        soup = BeautifulSoup(file, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åœ¨ &lt;head&gt; ä¸­æ’å…¥ä»£ç </span></span><br><span class="line">    <span class="keyword">if</span> soup.head:</span><br><span class="line">        soup.head.append(BeautifulSoup(head_code, <span class="string">&#x27;html.parser&#x27;</span>))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&lt;head&gt; æ ‡ç­¾æœªæ‰¾åˆ°ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åœ¨ &lt;body&gt; ä¸­æ’å…¥ä»£ç </span></span><br><span class="line">    <span class="keyword">if</span> soup.body:</span><br><span class="line">        soup.body.append(BeautifulSoup(body_code, <span class="string">&#x27;html.parser&#x27;</span>))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&lt;body&gt; æ ‡ç­¾æœªæ‰¾åˆ°ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†ä¿®æ”¹åçš„ HTML å†™å›æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        file.write(<span class="built_in">str</span>(soup))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ç”¨æ³•</span></span><br><span class="line">file_path = <span class="string">&#x27;web-mobile/index.html&#x27;</span></span><br><span class="line">insert_code_in_html(file_path)</span><br></pre></td></tr></table></figure>
<p>ç”±äºè‡ªå·±å¤ªæ‡’ï¼Œè¿ä»£ç éƒ½ä¸æƒ³è¿è¡Œï¼Œäºæ˜¯ä¹ï¼Œç›´æ¥å°†ä¸Šé¢pythonè„šæœ¬å¯¼å‡ºäº†ä¸€ä¸ª<code>.exe</code>å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ¯æ¬¡åªè¦åŒå‡»æ”¹æ‰§è¡Œæ–‡ä»¶å°±è¡Œäº†ã€‚</p>
<h3 id="è¸©å‘"><a href="#è¸©å‘" class="headerlink" title="è¸©å‘"></a>è¸©å‘</h3><p>è¿è¡Œçš„æ—¶å€™æŠ¥ä¸‹é¢é”™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;.\html.py&quot;, line 1, in &lt;module&gt;</span><br><span class="line">    from bs4 import BeautifulSoup</span><br><span class="line">  File &quot;C:\Users\84267\AppData\Roaming\Python\Python38\site-packages\bs4\__init__.py&quot;, line 37, in &lt;module&gt;</span><br><span class="line">    from .builder import (</span><br><span class="line">  File &quot;C:\Users\84267\AppData\Roaming\Python\Python38\site-packages\bs4\builder\__init__.py&quot;, line 9, in &lt;module&gt;</span><br><span class="line">    from bs4.element import (</span><br><span class="line">  File &quot;C:\Users\84267\AppData\Roaming\Python\Python38\site-packages\bs4\element.py&quot;, line 13, in &lt;module&gt;</span><br><span class="line">    from bs4.formatter import (</span><br><span class="line">  File &quot;C:\Users\84267\AppData\Roaming\Python\Python38\site-packages\bs4\formatter.py&quot;, line 1, in &lt;module&gt;</span><br><span class="line">    from bs4.dammit import EntitySubstitution</span><br><span class="line">  File &quot;C:\Users\84267\AppData\Roaming\Python\Python38\site-packages\bs4\dammit.py&quot;, line 12, in &lt;module&gt;</span><br><span class="line">    from html.entities import codepoint2name</span><br><span class="line">  File &quot;E:\Project_D_tg\build\html.py&quot;, line 1, in &lt;module&gt;</span><br><span class="line">    from bs4 import BeautifulSoup</span><br><span class="line">ImportError: cannot import name &#x27;BeautifulSoup&#x27; from partially initialized module &#x27;bs4&#x27; (most likely due to a circular import) (C:\Users\84267\AppData\Roaming\Python\Python38\site-packages\bs4\__init__.py)</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/66966a97d9c307b7e91d1f74.png"></p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> pythonæ–‡ä»¶åçš„é—®é¢˜ï¼Œå› ä¸ºæˆ‘çš„pythonè„šæœ¬å‘½åä¸º<code>html.py</code>ï¼Œè¿™é‡Œçš„<code>html</code>å’Œä»£ç é‡Œé¢çš„<code>html</code>å†²çªï¼Œæ‰€ä»¥å¯¼è‡´æŠ¥é”™ï¼Œè¿™é‡Œåªéœ€è¦ä¿®æ”¹pythonçš„æ–‡ä»¶åå³å¯ã€‚</p>
<blockquote>
<p>å¥½å§ï¼Œè¡¨ç¤ºè‡ªå·±ç¬¬ä¸€æ¬¡é‡åˆ°è¿™ç§å› ä¸ºæ–‡ä»¶åæŠ¥é”™çš„æƒ…å†µã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
        <category>Pythonåº”ç”¨</category>
      </categories>
  </entry>
  <entry>
    <title>åœ¨Luaä¸­è°ƒç”¨Cè¯­è¨€</title>
    <url>/18339.html</url>
    <content><![CDATA[<p>æˆ‘ä»¬è¯´ç”¨Luaå¯ä»¥è°ƒç”¨Cè¯­è¨€å‡½æ•°ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€Luaå¯ä»¥è°ƒç”¨æ‰€æœ‰çš„Cå‡½æ•°ã€‚å½“Cè¯­è¨€è°ƒç”¨Luaå‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°å¿…é¡»éµå¾ªä¸€ä¸ªç®€å•çš„è§„åˆ™æ¥ä¼ é€’å‚æ•°å’Œè·å–ç»“æœã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åŒæ ·ï¼Œå½“Luaè°ƒç”¨Cå‡½æ•°æ—¶ï¼Œè¿™ä¸ªCå‡½æ•°ä¹Ÿå¿…é¡»éµå¾ªæŸç§è§„åˆ™æ¥è·å–å‚æ•°å’Œè¿”å›ç»“æœã€‚æ­¤å¤–ï¼Œå½“Luaè°ƒç”¨Cå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æ³¨å†Œè¯¥å‡½æ•°ï¼Œå³å¿…é¡»ä»¥ä¸€ç§æ°å½“çš„æ–¹å¼ä¸ºLuaæä¾›è¯¥Cå‡½æ•°çš„åœ°å€ã€‚<br>Luaè°ƒç”¨Cå‡½æ•°æ—¶ï¼Œä¹Ÿä½¿ç”¨ä¸€ä¸ªä¸Cè¯­è¨€è°ƒç”¨Luaå‡½æ•°æ—¶ç›¸åŒç±»å‹çš„æ ˆï¼ŒCå‡½æ•°ä»æ ˆä¸­è·å–å‚æ•°ï¼Œå¹¶å°†ç»“æœå‹å…¥æ ˆä¸­ã€‚<br>æ­¤å¤„çš„é‡ç‚¹åœ¨äºï¼Œè¿™ä¸ªæ ˆä¸æ˜¯ä¸€ä¸ªå…¨å±€ç»“æ„ï¼›æ¯ä¸ªå‡½æ•°éƒ½æœ‰å…¶ç§æœ‰çš„å±€éƒ¨æ ˆã€‚å½“Luaè°ƒç”¨ä¸€ä¸ªCå‡½æ•°æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯ä½äºè¿™ä¸ªå±€éƒ¨æ ˆä¸­ç´¢å¼•ä¸º1çš„ä½ç½®ã€‚å³ä½¿ä¸€ä¸ªCå‡½æ•°è°ƒç”¨äº†Luaä»£ç ï¼Œè€Œä¸”Luaä»£ç åˆå†æ¬¡è°ƒç”¨äº†åŒä¸€ä¸ªCå‡½æ•°ï¼Œè¿™äº›è°ƒç”¨æ¯ä¸€æ¬¡éƒ½åªä¼šçœ‹åˆ°æœ¬æ¬¡è°ƒç”¨è‡ªå·±çš„ç§æœ‰æ ˆï¼Œå…¶ä¸­ç´¢å¼•ä¸º1çš„ä½ç½®ä¸Šå°±æ˜¯ä¸€ä¸ªå‚æ•°ã€‚</p>
<h2 id="Cå‡½æ•°"><a href="#Cå‡½æ•°" class="headerlink" title="Cå‡½æ•°"></a>Cå‡½æ•°</h2><p>å…ˆä¸¾ä¸€ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬çš„æ­£å¼¦å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›æŸä¸ªç»™å®šæ•°çš„æ­£å¼¦å€¼ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">l_sin</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">double</span> d = lua_tonumber(L,<span class="number">1</span>);</span><br><span class="line">	lua_pushnumber(L,<span class="built_in">sin</span>(d));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€æœ‰åœ¨Luaä¸­æ³¨å†Œçš„å‡½æ•°éƒ½å¿…é¡»ä½¿ç”¨ä¸€ä¸ªç›¸åŒçš„åŸå‹ï¼Œè¯¥åŸå‹å°±æ˜¯å®šä¹‰åœ¨lua.hä¸­çš„lua_CFunction:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="title function_">int</span> <span class="params">(*lua_CFunction)</span><span class="params">(lua_State *L)</span>;</span><br></pre></td></tr></table></figure>
<p>ä»Cè¯­è¨€çš„è§’åº¦çœ‹ï¼Œè¿™ä¸ªå‡½æ•°åªæœ‰ä¸€ä¸ªæŒ‡å‘LuaçŠ¶æ€ç±»å‹çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ï¼Œè¿”å›å€¼ä¸ºä¸€ä¸ªæ•´å‹æ•°ï¼Œä»£è¡¨å‹å…¥æ ˆä¸­çš„è¿”å›å€¼çš„ä¸ªæ•°ã€‚å› æ­¤ï¼Œè¯¥å‡½æ•°åœ¨å‹å…¥ç»“æœå‰æ— é¡»æ¸…ç©ºæ ˆã€‚åœ¨è¯¥å‡½æ•°è¿”å›åï¼ŒLuaä¼šè‡ªåŠ¨ä¿å­˜è¿”å›å€¼å¹¶æ¸…ç©ºæ•´ä¸ªæ ˆã€‚<br>åœ¨Luaä¸­ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°å‰ï¼Œè¿˜å¿…é¡»é€šè¿‡lua_pushcfunctionæ³¨å†Œè¯¥å‡½æ•°ã€‚å‡½æ•°lua_pushcfunctionä¼šè·å–ä¸€ä¸ªæŒ‡å‘Cå‡½æ•°çš„æŒ‡é’ˆï¼Œç„¶ååœ¨Luaä¸­åˆ›å»ºä¸€ä¸ªâ€functionâ€ç±»å‹ï¼Œä»£è¡¨å¾…æ³¨å†Œçš„å‡½æ•°ã€‚ä¸€æ—¦å®Œæˆæ³¨å†Œï¼ŒCå‡½æ•°å°±å¯ä»¥åƒå…¶ä»–Luaå‡½æ•°ä¸€æ ·è¡Œäº‹äº†ã€‚<br>ä¸€ç§å¿«é€Ÿæµ‹è¯•å‡½æ•°l_sinçš„æ–¹æ³•æ˜¯ï¼Œå°†å…¶ä»£ç æ”¾åˆ°ç®€å•è§£é‡Šå™¨ä¸­ï¼Œå¹¶å°†ä¸‹åˆ—ä»£ç æ·»åŠ åˆ°luaL_openlibsè°ƒç”¨çš„åé¢ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_pushcfunction(L,l_sin);</span><br><span class="line">lua_setglobal(L,<span class="string">&quot;mysin&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç çš„ç¬¬ä¸€è¡Œå‹å…¥ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å€¼ï¼Œç¬¬äºŒè¡Œå°†è¿™ä¸ªå€¼èµ‹ç»™å…¨å±€å˜é‡mysinã€‚å®Œæˆè¿™äº›ä¿®æ”¹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Luaè„šæœ¬ä¸­ä½¿ç”¨æ–°å‡½æ•°mysinäº†ã€‚<br>è¦ç¼–å†™ä¸€ä¸ªæ›´ä¸“ä¸šçš„æ­£å¼¦å‡½æ•°ï¼Œå¿…é¡»æ£€æŸ¥å…¶å‚æ•°çš„ç±»å‹ï¼Œè€Œè¾…åŠ©åº“å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚å‡½æ•°luaL_checknumberå¯ä»¥æ£€æŸ¥æŒ‡å®šçš„å‚æ•°æ˜¯å¦ä¸ºä¸€ä¸ªæ•°å­—ï¼šå¦‚æœå‡ºç°é”™è¯¯ï¼Œè¯¥å‡½æ•°ä¼šæŠ›å‡ºä¸€ä¸ªå‘ŠçŸ¥æ€§çš„é”™è¯¯ä¿¡æ¯ï¼›å¦åˆ™ï¼Œè¿”å›è¿™ä¸ªæ•°å­—ã€‚åªéœ€å¯¹ä¸Šé¢è¿™ä¸ªæ­£å¼¦å‡½æ•°ç¨ä½œä¿®æ”¹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">l_sin</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">double</span> d = luaL_checknumber(L,<span class="number">1</span>);</span><br><span class="line">	lua_pushnumber(L,<span class="built_in">sin</span>(d));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åšäº†ä¸Šè¿°ä¿®æ”¹åï¼Œå¦‚æœè°ƒç”¨mysin(â€˜aâ€™)å°±ä¼šå‡ºç°å¦‚ä¸‹çš„é”™è¯¯ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">bad argument #<span class="number">1</span> to <span class="string">&#x27;mysin&#x27;</span> (number expected, got <span class="built_in">string</span>)</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°luaL_checknumberä¼šè‡ªåŠ¨ç”¨å‚æ•°çš„ç¼–å·(#1)ã€å‡½æ•°å(â€œmysinâ€)ã€æœŸæœ›çš„å‚æ•°ç±»å‹åŠå®é™…çš„å‚æ•°ç±»å‹æ¥å¡«å†™é”™è¯¯ä¿¡æ¯ã€‚<br>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ç¤ºä¾‹ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„å†…å®¹ã€‚ç”±äºISO Cä¸­æ²¡æœ‰å…·å¤‡è¿™ç§åŠŸèƒ½çš„å‡½æ•°ï¼Œå› æ­¤Luaæ²¡æœ‰åœ¨æ ‡å‡†åº“ä¸­æä¾›è¿™æ ·çš„å‡½æ•°ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾ä½¿ç”¨ä¸€ä¸ªPOSIXå…¼å®¹çš„æ“ä½œç³»ç»Ÿã€‚è¿™ä¸ªå‡½æ•°ä»¥ä¸€ä¸ªç›®å½•è·¯å¾„å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—å‡ºè¯¥ç›®å½•ä¸‹çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨dir(â€œ&#x2F;home&#x2F;luaâ€)ä¼šå¾—åˆ°å½¢å¦‚{â€œ.â€,â€..â€,â€srcâ€,â€binâ€,â€libâ€}çš„è¡¨ã€‚è¯¥å‡½æ•°çš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ä¸€ä¸ªè¯»å–ç›®å½•çš„å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;dirent.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;lua.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;luaxlib.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">l_dir</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	DIR *dir;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">dirent</span> *<span class="title">entry</span>;</span></span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *path = lual_checkstring(L,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	dir = opendir(path);</span><br><span class="line">	<span class="keyword">if</span> (dir == <span class="literal">NULL</span>)&#123;</span><br><span class="line">		lua_pushnil(L);</span><br><span class="line">		lua_pushstring(L,strerror(error));</span><br><span class="line">		<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		lua_newtable(L);</span><br><span class="line">		i = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span> ((entry = readdir(dir)) != <span class="literal">NULL</span>)&#123;</span><br><span class="line">			lua_pushinteger(L,i++);</span><br><span class="line">			lua_pushstring(L,entry -&gt; d_name);</span><br><span class="line">			lua_settable(L,<span class="number">3</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			closedir(dir);</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°å…ˆä½¿ç”¨ä¸luaL_checknumberç±»ä¼¼çš„å‡½æ•°luaL_checkstringæ£€æŸ¥ç›®å½•è·¯å¾„æ˜¯å¦ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åä½¿ç”¨å‡½æ•°opendiræ‰“å¼€ç›®å½•ã€‚å¦‚æœæ— æ³•æ‰“å¼€ç›®å½•ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›nilä»¥åŠä¸€æ¡ç”¨å‡½æ•°strerrorè·å–çš„é”™è¯¯ä¿¡æ¯ã€‚åœ¨æ‰“å¼€ç›®å½•åï¼Œè¯¥å‡½æ•°ä¼šåˆ›å»ºä¸€å¼ æ–°è¡¨ï¼Œç„¶åç”¨ç›®å½•ä¸­çš„å…ƒç´ å¡«å……è¿™å¼ æ–°è¡¨ã€‚æœ€åï¼Œè¯¥å‡½æ•°å…³é—­ç›®å½•å¹¶è¿”å›1ï¼Œåœ¨Cè¯­è¨€ä¸­å³è¡¨ç¤ºè¯¥å‡½æ•°å°†å…¶æ ˆé¡¶çš„å€¼è¿”å›ç»™äº†Luaã€‚<br>åœ¨æŸäº›æƒ…å†µä¸­ï¼Œl_dirçš„è¿™ç§å®ç°å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„éœ²ã€‚è¯¥å‡½æ•°è°ƒç”¨çš„ä¸‰ä¸ªLuaå‡½æ•°å‡å¯èƒ½ç”±äºå†…å­˜ä¸è¶³è€Œå¤±è´¥ã€‚è¿™ä¸‰ä¸ªå‡½æ•°ä¸­çš„ä»»æ„ä¸€ä¸ªæ‰§è¡Œå¤±è´¥éƒ½ä¼šå¼•å‘é”™è¯¯ï¼Œå¹¶ä¸­æ–­å‡½æ•°l_dirçš„æ‰§è¡Œï¼Œè¿›è€Œä¹Ÿå°±æ— æ³•è°ƒç”¨closediräº†ã€‚</p>
<h2 id="å»¶ç»­"><a href="#å»¶ç»­" class="headerlink" title="å»¶ç»­"></a>å»¶ç»­</h2><p>é€šè¿‡lua_pcallå’Œlua_callï¼Œä¸€ä¸ªè¢«Luaè°ƒç”¨çš„Cå‡½æ•°ä¹Ÿå¯ä»¥å›è°ƒLuaå‡½æ•°ã€‚æ ‡å‡†åº“ä¸­æœ‰ä¸€äº›å‡½æ•°å°±æ˜¯è¿™ä¹ˆåšçš„ï¼štable.sortè°ƒç”¨äº†æ’åºå‡½æ•°ï¼Œstring.gsubè°ƒç”¨äº†æ›¿æ¢å‡½æ•°ï¼Œpcallå’Œxpcallä»¥ä¿æŠ¤æ¨¡å¼æ¥è°ƒç”¨å‡½æ•°ã€‚å¦‚æœä½ è¿˜è®°å¾—Luaä»£ç æœ¬èº«å°±æ˜¯è¢«Cä»£ç è°ƒç”¨çš„ï¼Œé‚£ä¹ˆä½ åº”è¯¥çŸ¥é“è°ƒç”¨é¡ºåºç±»ä¼¼äºï¼šCè°ƒç”¨Luaï¼ŒLuaåˆè°ƒç”¨äº†Cï¼ŒCåˆè°ƒç”¨äº†Luaã€‚<br>é€šå¸¸ï¼ŒLuaè¯­è¨€å¯ä»¥å¤„ç†è¿™ç§è°ƒç”¨é¡ºåºï¼›æ¯•ç«Ÿï¼Œä¸Cè¯­è¨€çš„é›†æˆæ˜¯Luaçš„ä¸€å¤§ç‰¹ç‚¹ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç§æƒ…å†µä¸‹ï¼Œè¿™ç§ç›¸äº’è°ƒç”¨ä¼šæœ‰é—®é¢˜ï¼Œé‚£å°±æ˜¯åç¨‹ã€‚<br>Luaè¯­è¨€ä¸­çš„æ¯ä¸ªåç¨‹éƒ½æœ‰è‡ªå·±çš„æ ˆï¼Œå…¶ä¸­ä¿å­˜äº†è¯¥åç¨‹æ‰€æŒ‚èµ·è°ƒç”¨çš„ä¿¡æ¯ã€‚å…·ä½“åœ°è¯´ï¼Œå°±æ˜¯è¯¥æ ˆä¸­å­˜å‚¨äº†æ¯ä¸€ä¸ªè°ƒç”¨çš„è¿”å›åœ°å€ã€å‚æ•°åŠå±€éƒ¨å˜é‡ã€‚å¯¹äºLuaå‡½æ•°çš„è°ƒç”¨ï¼Œè§£é‡Šå™¨åªéœ€è¦è¿™ä¸ªæ ˆå³å¯ï¼Œæˆ‘ä»¬å°†å…¶æˆä¸ºè½¯æ ˆã€‚ç„¶è€Œï¼Œå¯¹äºCå‡½æ•°çš„è°ƒç”¨ï¼Œè§£é‡Šå™¨å¿…é¡»ä½¿ç”¨Cè¯­è¨€æ ˆã€‚æ¯•ç«Ÿï¼ŒCå‡½æ•°çš„è¿”å›åœ°å€æ˜¯å±€éƒ¨å˜é‡éƒ½ä½äºCè¯­è¨€æ ˆä¸­ã€‚<br>å¯¹äºè§£é‡Šå™¨æ¥è¯´ï¼Œæ‹¥æœ‰å¤šä¸ªè½¯æ ˆå¹¶ä¸éš¾ï¼›ç„¶è€Œï¼ŒISO Cçš„è¿è¡Œæ—¶ç¯å¢ƒå´åªèƒ½æ‹¥æœ‰ä¸€ä¸ªå†…éƒ¨æ ˆã€‚å› æ­¤ï¼ŒLuaä¸­çš„åç¨‹ä¸èƒ½æŒ‚èµ·Cå‡½æ•°çš„æ‰§è¡Œï¼šå¦‚æœä¸€ä¸ªCå‡½æ•°ä½äºä»resumeåˆ°å¯¹åº”yieldçš„è°ƒç”¨è·¯å¾„ä¸­ï¼Œé‚£ä¹ˆLuaæ— æ³•ä¿å­˜Cå‡½æ•°çš„çŠ¶æ€ä»¥ä¾¿åœ¨ä¸‹æ¬¡resumeæ—¶æ¢å¤çŠ¶æ€ã€‚è¯·è€ƒè™‘å¦‚ä¸‹çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">co = coroutine.wrap(function()</span><br><span class="line">	<span class="built_in">print</span>(pcall(coroutine.<span class="keyword">yield</span>))</span><br><span class="line">end)</span><br><span class="line">co()</span><br><span class="line"></span><br><span class="line">-- false attempt to <span class="keyword">yield</span> across metamethod/C-call boundary</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°pcallæ˜¯ä¸€ä¸ªCè¯­è¨€å‡½æ•°ï¼›å› æ­¤ï¼ŒLua5.1ä¸èƒ½å°†å…¶æŒ‚èµ·ï¼Œå› ä¸ºISO Cæ— æ³•æŒ‚èµ·ä¸€ä¸ªCå‡½æ•°å¹¶åœ¨ä¹‹åæ¢å¤å…¶è¿è¡Œã€‚<br>åœ¨Lua5.2åŠåç»­ç‰ˆæœ¬ä¸­ï¼Œç”¨å»¶ç»­æ”¹å–„äº†å¯¹è¿™ä¸ªé—®é¢˜çš„å¤„ç†ã€‚Lua5.2ä½¿ç”¨é•¿è·³è½¬å®ç°äº†yieldï¼Œå¹¶ä½¿ç”¨ç›¸åŒçš„æ–¹å¼å®ç°äº†é”™è¯¯ä¿¡æ¯å¤„ç†ã€‚é•¿è·³è½¬ç®€å•åœ°ä¸¢å¼ƒäº†Cè¯­è¨€æ ˆä¸­å…³äºCå‡½æ•°çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå› è€Œæ— æ³•resumeè¿™äº›å‡½æ•°ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªCå‡½æ•°fooå¯ä»¥æŒ‡å®šä¸€ä¸ªå»¶ç»­å‡½æ•°foo_kï¼Œè¯¥å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªCå‡½æ•°ï¼Œåœ¨è¦æ¢å¤fooçš„æ‰§è¡Œæ—¶å®ƒå°±ä¼šè¢«è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è§£é‡Šå™¨å‘ç°å®ƒåº”è¯¥æ¢å¤å‡½æ•°fooçš„æ‰§è¡Œæ—¶ï¼Œå¦‚æœé•¿è°ƒè½¬å·²ç»ä¸¢å¼ƒäº†Cè¯­è¨€æ ˆä¸­æœ‰å…³fooçš„ä¿¡æ¯ï¼Œåˆ™è°ƒç”¨foo_kæ¥æ›¿ä»£ã€‚<br>ä¸ºäº†è¯´å¾—æ›´å…·ä½“äº›ï¼Œæˆ‘ä»¬å°†pcallçš„å®ç°ä½œä¸ºç¤ºä¾‹ã€‚åœ¨Lua5.1ä¸­ï¼Œè¯¥å‡½æ•°çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">luaB_pcall</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">int</span> status;</span><br><span class="line">	luaL_checkany(L,<span class="number">1</span>);</span><br><span class="line">	status = lua_pcall(L,lua_gettop(L) - <span class="number">1</span>, LUA_MULTRET,<span class="number">0</span>);</span><br><span class="line">	lua_pushboolean(L,(status == LUA_OK));</span><br><span class="line">	lua_insert(L,<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> lua_gettop(L);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç¨‹åºæ­£åœ¨é€šè¿‡lua_pcallè¢«è°ƒç”¨çš„å‡½æ•°yieldï¼Œé‚£ä¹ˆåé¢å°±ä¸èƒ½æ¢å¤luaB_pcallçš„æ‰§è¡Œã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ä¿æŠ¤æ¨¡å¼çš„è°ƒç”¨ä¸‹è¯•å›¾yieldæ—¶ï¼Œè§£é‡Šå™¨å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚Lua5.3ä½¿ç”¨åŸºæœ¬ç±»ä¼¼äºä¸‹é¢ç¤ºä¾‹ä¸­çš„æ–¹å¼å®ç°äº†pcallã€‚</p>
<blockquote>
<p>ä½¿ç”¨å»¶ç»­å®ç°pcall</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">finishpcall</span> <span class="params">(lua_State *L, <span class="type">int</span> status, <span class="type">intptr_t</span> ctx)</span>&#123;</span><br><span class="line">	(<span class="type">void</span>)ctx;</span><br><span class="line">	status = (status != LUA_OK &amp;&amp; status != LUA_YIELD);</span><br><span class="line">	lua_pushboolean (L,(status == <span class="number">0</span> ));</span><br><span class="line">	lua_insert(L,<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> lua_gettop(L);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">luaB_pcall</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">int</span> status;</span><br><span class="line">	luaL_checkany(L,<span class="number">1</span>);</span><br><span class="line">	status = lua_pcall(L,lua_gettop(L) - <span class="number">1</span>, LUA_MULTERT,<span class="number">0</span>,<span class="number">0</span>,finishpcall);</span><br><span class="line">	<span class="keyword">return</span> finsihpcall(L,status,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Lua5.1ä¸­çš„ç‰ˆæœ¬ç›¸æ¯”ï¼Œä¸Šè¿°å®ç°æœ‰ä¸‰ä¸ªé‡è¦çš„ä¸åŒç‚¹ï¼šé¦–å…ˆï¼Œæ–°ç‰ˆæœ¬ç”¨lua_pcallkæ›¿æ¢äº†lua_pcallï¼›å…¶æ¬¡ï¼Œæ–°ç‰ˆæœ¬åœ¨è°ƒç”¨å®Œlua_pcallkåæŠŠå®Œæˆçš„çŠ¶æ€ä¼ ç»™äº†æ–°çš„è¾…åŠ©å‡½æ•°finishpcallï¼›ç¬¬ä¸‰ï¼Œlua_pcallkè¿”å›çš„çŠ¶æ€é™¤äº†LUA_OKæˆ–è€…ä¸€ä¸ªé”™è¯¯å¤–ï¼Œè¿˜å¯ä»¥æ˜¯LUA_YIELDã€‚<br>å¦‚æœæ²¡æœ‰å‘ç”Ÿyieldï¼Œé‚£ä¹ˆlua_pcallkçš„è¡Œä¸ºä¸lua_pcallçš„è¡Œä¸ºå®Œå…¨ä¸€æ ·ã€‚ä½†æ˜¯ï¼Œå¦‚æœå‘ç”Ÿyieldï¼Œæƒ…å†µåˆ™å¤§ä¸ç›¸åŒã€‚å¦‚æœä¸€ä¸ªè¢«åŸæ¥lua_pcallè°ƒç”¨çš„å‡½æ•°æƒ³è¦yieldï¼Œé‚£ä¹ˆLua5.3ä¼šåƒLua5.1ç‰ˆæœ¬ä¸€æ ·å¼•å‘é”™è¯¯ã€‚ä½†å½“è¢«æ–°çš„lua_pcallkè°ƒç”¨çš„å‡½æ•°yieldæ—¶ï¼Œåˆ™ä¸ä¼šå‡ºç°å‘ç”Ÿé”™è¯¯ï¼šLuaä¼šåšä¸€ä¸ªé•¿è·³è½¬å¹¶ä¸”ä¸¢å¼ƒCè¯­è¨€æ ˆä¸­æœ‰å…³luaB_pcallçš„å…ƒç´ ï¼Œä½†æ˜¯ä¼šåœ¨åç¨‹è½¯æ ˆä¸­ä¿å­˜ä¼ é€’ç»™å‡½æ•°lua_pcallkçš„å»¶ç»­å‡½æ•°çš„å¼•ç”¨ã€‚åæ¥ï¼Œå½“è§£é‡Šå™¨å‘ç°åº”è¯¥è¿”å›åˆ°luaB_pcallæ—¶ï¼Œå®ƒå°±ä¼šè°ƒç”¨å»¶ç»­å‡½æ•°ã€‚<br>å½“å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå»¶ç»­å‡½æ•°finishpcallä¹Ÿå¯èƒ½ä¼šè¢«è°ƒç”¨ã€‚ä¸åŸæ¥çš„luaB_pcallä¸åŒï¼Œfinishpcallä¸èƒ½è·å–lua_pcallkæ‰€è¿”å›çš„å€¼ã€‚å› æ­¤ï¼Œfinishpcallé€šè¿‡é¢å¤–çš„å‚æ•°statusè·å–è¿™ä¸ªç»“æœã€‚å½“æ²¡æœ‰é”™è¯¯æ—¶ï¼Œstatusæ˜¯LUA_YIELDè€Œä¸æ˜¯LUA_OKï¼Œå› æ­¤å»¶ç»­å‡½æ•°å¯ä»¥æ£€æŸ¥å®ƒæ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„ã€‚å½“å‘ç”Ÿé”™è¯¯æ—¶ï¼Œstatusè¿˜æ˜¯åŸæ¥çš„é”™è¯¯ç ã€‚<br>é™¤äº†è°ƒç”¨çš„çŠ¶æ€ï¼Œå»¶ç»­å‡½æ•°è¿˜æ¥æ”¶ä¸€ä¸ªä¸Šä¸‹æ–‡ã€‚lua_pcallkçš„ç¬¬5ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªä»»æ„çš„æ•´å‹æ•°ï¼Œè¿™ä¸ªå‚æ•°è¢«å½“åšå»¶ç»­å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ¥ä¼ é€’ã€‚è¿™ä¸ªå€¼å…è®¸åŸæ¥çš„å‡½æ•°ç›´æ¥å‘å»¶ç»­å‡½æ•°ä¼ é€’æŸäº›ä»»æ„çš„ä¿¡æ¯ã€‚<br>Lua5.3çš„å»¶ç»­ä½“ç³»æ˜¯ä¸€ç§ä¸ºäº†æ”¯æŒyieldè€Œè®¾è®¡çš„ç²¾å·§æœºåˆ¶ï¼Œä½†å®ƒä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ã€‚æŸäº›Cå‡½æ•°å¯èƒ½ä¼šéœ€è¦å®ƒä»¬çš„å»¶ç»­ä¼ é€’ç›¸å½“å¤šçš„ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼Œtable.sortå°†Cè¯­è¨€æ ˆç”¨äºé€’å½’ï¼Œè€Œstring.gsubåˆ™å¿…é¡»è·Ÿè¸ªæ•è·ï¼Œè¿˜è¦è·Ÿè¸ªå’Œä¸€ä¸ªç”¨äºå­˜æ”¾éƒ¨åˆ†ç»“æœçš„ç¼“å†²åŒºã€‚è™½ç„¶è¿™äº›å‡½æ•°èƒ½ä»¥â€yieldbaleâ€çš„æ–¹å¼é‡å†™ï¼Œä½†ä¸å¢åŠ çš„å¤æ‚æ€§å’Œæ€§èƒ½æŸå¤±ç›¸æ¯”ï¼Œè¿™æ ·åšä¼¼ä¹å¹¶ä¸å€¼å¾—ã€‚</p>
<h2 id="Cæ¨¡å—"><a href="#Cæ¨¡å—" class="headerlink" title="Cæ¨¡å—"></a>Cæ¨¡å—</h2><p>Luaæ¨¡å—å°±æ˜¯ä¸€ä¸ªä»£ç æ®µï¼Œå…¶ä¸­å®šä¹‰äº†ä¸€äº›Luaå‡½æ•°å¹¶å°†å…¶å­˜å‚¨åœ¨æ°å½“çš„åœ°æ–¹ã€‚ä¸ºLuaç¼–å†™çš„Cè¯­è¨€æ¨¡å—å¯ä»¥æ¨¡ä»¿è¿™ç§è¡Œä¸ºã€‚é™¤äº†Cå‡½æ•°çš„å®šä¹‰å¤–ï¼ŒCæ¨¡å—è¿˜å¿…é¡»å®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œè¿™ä¸ªç‰¹æ®Šçš„å‡½æ•°ç›¸å½“äºLuaåº“ä¸­çš„ä¸»ä»£ç æ®µï¼Œç”¨äºæ³¨å†Œæ¨¡å—ä¸­æ‰€æœ‰çš„Cå‡½æ•°ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨æ°å½“çš„åœ°æ–¹ã€‚ä¸Luaçš„ä¸»ä»£ç æ®µä¸€æ ·ï¼Œè¿™ä¸ªå‡½æ•°è¿˜åº”è¯¥åˆå§‹åŒ–æ¨¡å—ä¸­æ‰€æœ‰éœ€è¦åˆå§‹åŒ–çš„å…¶ä»–ä¸œè¥¿ã€‚<br>Luaé€šè¿‡æ³¨å†Œè¿‡ç¨‹æ„ŸçŸ¥åˆ°Cå‡½æ•°ã€‚ä¸€æ—¦ä¸€ä¸ªCå‡½æ•°ç”¨Luaè¡¨ç¤ºå’Œå­˜å‚¨ï¼ŒLuaå°±ä¼šé€šè¿‡å¯¹å…¶åœ°å€çš„ç›´æ¥å¼•ç”¨æ¥è°ƒç”¨å®ƒã€‚æ¢å¥è¯è¯´ï¼Œä¸€æ—¦ä¸€ä¸ªCå‡½æ•°å®Œæˆæ³¨å†Œï¼ŒLuaè°ƒç”¨å®ƒæ—¶å°±ä¸å†ä¾èµ–äºå…¶å‡½æ•°åã€åŒ…çš„ä½ç½®ä»¥åŠå¯è§æ€§è§„åˆ™ã€‚é€šå¸¸ï¼Œä¸€ä¸ªCæ¨¡å—ä¸­åªæœ‰ä¸€ä¸ªç”¨äºæ‰“å¼€åº“çš„å…¬å…±å‡½æ•°ï¼›å…¶ä»–æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯ç§æœ‰çš„ï¼Œåœ¨Cè¯­è¨€ä¸­è¢«å£°æ˜ä¸ºstaticã€‚<br>å½“æˆ‘ä»¬ä½¿ç”¨Cå‡½æ•°æ¥æ‰©å±•Luaç¨‹åºæ—¶ï¼Œå°†ä»£ç è®¾è®¡ä¸ºä¸€ä¸ªCæ¨¡å—æ˜¯ä¸ªä¸é”™çš„æƒ³æ³•ã€‚å› ä¸ºå³ä½¿æˆ‘ä»¬ç°åœ¨åªæƒ³æ³¨å†Œä¸€ä¸ªå‡½æ•°ï¼Œä½†è¿Ÿæ—©æ€»ä¼šéœ€è¦å…¶ä»–çš„å‡½æ•°ã€‚é€šå¸¸ï¼Œè¾…åŠ©åº“ä¸ºè¿™é¡¹å·¥ä½œæä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚å®luaL_newlibæ¥æ”¶ä¸€ä¸ªç”±Cå‡½æ•°åŠå…¶å¯¹åº”å‡½æ•°åç»„æˆçš„æ•°ç»„ï¼Œå¹¶å°†è¿™äº›å‡½æ•°æ³¨å†Œåˆ°ä¸€ä¸ªæ–°è¡¨ä¸­ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬è¦ç”¨ä¹‹å‰å®šä¹‰çš„å‡½æ•°l_diråˆ›å»ºä¸€ä¸ªåº“ã€‚é¦–å…ˆï¼Œå¿…é¡»å®šä¹‰è¿™åº“å‡½æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">l_dir</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	åŒå‰</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œå£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„åŒ…å«äº†æ¨¡å—ä¸­æ‰€æœ‰çš„å‡½æ•°åŠå…¶åç§°ã€‚æ•°ç»„å…ƒç´ çš„ç±»å‹ä¸ºluaL_Regï¼Œè¯¥ç±»å‹æ˜¯ç”±ä¸¤ä¸ªå­—æ®µç»„æˆçš„ç»“æ„ä½“ï¼Œè¿™ä¸¤ä¸ªå­—æ®µåˆ†åˆ«æ˜¯å‡½æ•°åå’Œå‡½æ•°æŒ‡é’ˆã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">mylib</span>[] =</span> &#123;</span><br><span class="line">	&#123;<span class="string">&quot;dir&quot;</span>,l_dir&#125;,</span><br><span class="line">	&#123;<span class="literal">NULL</span>,<span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œåªå£°æ˜äº†ä¸€ä¸ªå‡½æ•°ã€‚æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ æ°¸è¿œæ˜¯æ˜¯{NULL,NILL}ï¼Œå¹¶ä»¥æ­¤æ ‡è¯†æ•°ç»„çš„ç»“å°¾ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨å‡½æ•°luaL_newlibå£°æ˜ä¸€ä¸ªä¸»å‡½æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">luaopen_mylib</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	luaL_newlib(L,mylib);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹å‡½æ•°luaL_newlibçš„è°ƒç”¨ä¼šæ–°åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œå¹¶ä½¿ç”¨ç”±æ•°ç»„mylibæŒ‡å®šçš„â€å‡½æ•°å-å‡½æ•°æŒ‡é’ˆâ€å¡«å……è¿™ä¸ªæ–°åˆ›å»ºçš„è¡¨ã€‚å½“luaL_newlibè¿”å›æ—¶ï¼Œå®ƒæŠŠè¿™ä¸ªæ–°åˆ›å»ºçš„è¡¨ç•™åœ¨æ ˆä¸­ï¼Œåœ¨è¡¨ä¸­å®ƒæ‰“å¼€äº†è¿™ä¸ªåº“ã€‚ç„¶åï¼Œå‡½æ•°luaopen_mylibè¿”å›1ï¼Œè¡¨ç¤ºå°†è¿™ä¸ªè¡¨è¿”å›ç»™Luaã€‚<br>ç¼–å†™å®Œè¿™ä¸ªåº“ä»¥åï¼Œæˆ‘ä»¬è¿˜å¿…é¡»å°†å…¶é“¾æ¥åˆ°è§£é‡Šå™¨ã€‚å¦‚æœLuaè§£é‡Šå™¨æ”¯æŒåŠ¨æ€é“¾æ¥çš„è¯ï¼Œé‚£ä¹ˆæœ€ç®€ä¾¿çš„æ–¹æ³•æ˜¯ä½¿ç”¨åŠ¨æ€é“¾æ¥æœºåˆ¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»å°†è¿™ä¸ªåº“æ”¾åˆ°Cè¯­è¨€è·¯å¾„ä¸­çš„æŸä¸ªåœ°æ–¹ã€‚åœ¨å®Œæˆäº†è¿™äº›æ­¥éª¤åï¼Œå°±å¯ä»¥ä½¿ç”¨requireåœ¨Luaä¸­ç›´æ¥åŠ è½½è¿™ä¸ªæ¨¡å—äº†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">local mylib = requrire <span class="string">&quot;mylib&quot;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°çš„è¯­å¥ä¼šå°†åŠ¨æ€åº“mylibé“¾æ¥åˆ°Luaï¼ŒæŸ¥æ‰¾å‡½æ•°luaopen_mylibï¼Œå°†å…¶æ³¨å†Œä¸ºä¸€ä¸ªCè¯­è¨€å‡½æ•°ï¼Œç„¶åè°ƒç”¨å®ƒä»¥æ‰“å¼€æ¨¡å—ã€‚<br>åŠ¨æ€é“¾æ¥å™¨å¿…é¡»çŸ¥é“å‡½æ•°luaopen_mylibçš„åå­—æ‰èƒ½æ‰¾åˆ°å®ƒã€‚å®ƒæ€»æ˜¯å¯»æ‰¾åä¸ºâ€luaopen + æ¨¡å—åâ€è¿™æ ·çš„å‡½æ•°ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬çš„æ¨¡å—åä¸ºmylibï¼Œé‚£ä¹ˆè¯¥å‡½æ•°åº”è¯¥å‘½åä¸ºluaopen_mylibã€‚<br>å¦‚æœè§£é‡Šå™¨ä¸æ”¯æŒåŠ¨æ€é“¾æ¥ï¼Œå°±å¿…é¡»è¿åŒæ–°åº“ä¸€èµ·é‡æ–°ç¼–è¯‘Luaè¯­è¨€ã€‚é™¤äº†é‡æ–°ç¼–è¯‘ï¼Œè¿˜éœ€è¦ä»¥æŸç§æ–¹å¼å‘Šè¯‰ç‹¬ç«‹è§£é‡Šå™¨ï¼Œå®ƒåº”è¯¥åœ¨æ‰“å¼€ä¸€ä¸ªæ–°çŠ¶æ€æ—¶æ‰“å¼€è¿™ä¸ªåº“ã€‚ä¸€ä¸ªç®€ç­”çš„åšæ³•æ˜¯æŠŠluaopen_mylibæ·»åŠ åˆ°ç”±lua_openlibsæ‰“å¼€çš„æ ‡ä½åº“åˆ—è¡¨ä¸­ï¼Œè¿™ä¸ªåˆ—è¡¨ä½äºæ–‡ä»¶linit.cä¸­ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>C</tag>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>å¥½ç”¨çš„ç½‘ç«™åˆ†äº«</title>
    <url>/7a62141a.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<table>
<thead>
<tr>
<th>ç½‘ç«™1</th>
<th>ç½‘ç«™2</th>
<th>ç½‘ç«™3</th>
<th>ç½‘ç«™4</th>
<th>ç½‘ç«™5</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://pagespeed.web.dev/">ç½‘ç«™æ€§èƒ½æµ‹è¯•</a></td>
<td><a href="https://apkcombo.com/zh/">è·å–çº¿ä¸ŠAPK</a></td>
<td><a href="https://zfccd.55cha.com/">å­—ç¬¦ä¸²é•¿åº¦è®¡ç®—</a></td>
<td><a href="http://www.jsons.cn/urlencode">Urlåœ¨çº¿è§£ç </a></td>
<td><a href="https://adsense.google.com/start/">è°·æ­Œå¹¿å‘Š</a></td>
</tr>
<tr>
<td><a href="https://www.logosc.cn/logo">å­—æ¯å›¾æ ‡ç”Ÿæˆ</a></td>
<td><a href="https://www.iconfont.cn/">é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡</a></td>
<td><a href="https://girlgenerator.online/">å…è´¹çš„AIç»˜ç”»</a></td>
<td><a href="https://mac-os.leiyihan.com/">macosç½‘é¡µç‰ˆ</a></td>
<td><a href="https://audiotrimmer.com/cn/">å…³äºéŸ³é¢‘çš„6ä¸ªå°å·¥å…·  </a></td>
</tr>
</tbody></table>
]]></content>
  </entry>
  <entry>
    <title>åŸºäºMATLABçš„AMè°ƒåˆ¶è§£è°ƒ</title>
    <url>/30360.html</url>
    <content><![CDATA[<p>ç°åœ¨çš„ç¤¾ä¼šè¶Šæ¥è¶Šå‘è¾¾ï¼Œç§‘å­¦æŠ€æœ¯ä¸æ–­çš„åœ¨æ›´æ–°ï¼Œåœ¨ä¿¡å·å’Œæ¨¡æ‹Ÿç”µè·¯é‡Œé¢ç»å¸¸è¦ç”¨åˆ°è°ƒåˆ¶ä¸è§£è°ƒï¼Œè€ŒAMçš„è°ƒåˆ¶ä¸è§£è°ƒæ˜¯æœ€åŸºæœ¬çš„ï¼Œä¹Ÿæ˜¯ç»å¸¸ç”¨åˆ°çš„ã€‚ç”¨AMè°ƒåˆ¶ä¸è§£è°ƒå¯ä»¥åœ¨ç”µè·¯é‡Œé¢å®ç°å¾ˆå¤šåŠŸèƒ½ï¼Œåˆ¶é€ å‡ºå¾ˆå¤šæœ‰ç”¨åˆå®æƒ çš„ç”µå­äº§å“ï¼Œä¸ºæˆ‘ä»¬çš„ç”Ÿæ´»å¸¦æ¥ä¾¿åˆ©ã€‚åœ¨æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­ç”¨çš„æ”¶éŸ³æœºå°±æ˜¯é‡‡ç”¨äº†AMè°ƒåˆ¶çš„æ–¹å¼ï¼Œè€Œä¸”åœ¨å†›äº‹å’Œæ°‘ç”¨é¢†åŸŸéƒ½æœ‰ååˆ†é‡è¦çš„ç ”ç©¶è¯¾é¢˜ã€‚ç°ç”¨MATLABä¸­Mæ–‡ä»¶å®ç°æœ¬è¯¾ç¨‹è®¾è®¡å†…å®¹â€œåŸºäºMATLABçš„AMè°ƒåˆ¶è§£è°ƒå®ç°â€ã€‚åœ¨è¯¾ç¨‹è®¾è®¡ä¸­ï¼Œç³»ç»Ÿå¼€å‘å¹³å°ä¸ºWindows XPï¼ŒMTALAB 2007ï¼Œç¨‹åºè®¾è®¡è¯­è¨€é‡‡ç”¨MATLAB 2007ï¼Œç¨‹åºè¿è¡Œå¹³å°ä¸ºMATLAB 2007ã€‚é€šè¿‡MATLABç¼–å†™ç¨‹åºå¹¶åŠ ä»¥è°ƒè¯•èƒ½å¤Ÿå®ç°AMçš„è°ƒåˆ¶ä¸è°ƒè§£ï¼Œå®Œæˆäº†è¯¾ç¨‹è®¾è®¡çš„ç›®æ ‡ï¼Œå¹¶ç»è¿‡é€‚å½“å®Œå–„åï¼Œå°†å¯ä»¥åœ¨å®é™…ä¸­åº”ç”¨ã€‚</p>
<p><strong>å…³é”®è¯</strong> MATLABï¼›AMï¼›è°ƒåˆ¶è§£è°ƒ</p>
<h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p> æ¨¡æ‹Ÿè°ƒåˆ¶æŠ€æœ¯åœ¨20ä¸–çºªä¸­æ›¾æœ‰è¾ƒå¤§çš„åº”ç”¨ï¼Œå¦‚å†›äº‹é€šä¿¡ã€çŸ­æ³¢é€šä¿¡ã€æ¨¡æ‹Ÿç§»åŠ¨é€šä¿¡ã€æ¨¡æ‹Ÿè°ƒé¢‘å¹¿æ’­å’Œæ¨¡æ‹Ÿè°ƒå¹…å¹¿æ’­ç­‰ã€‚è™½ç„¶ç°åœ¨é€šä¿¡çš„å‘å±•è¶‹åŠ¿ä¸ºæ•°å­—åŒ–ï¼Œä½†æ•°å­—æŠ€æœ¯å¹¶ä¸èƒ½å®Œå…¨æ›¿ä»£æ¨¡æ‹ŸæŠ€æœ¯ï¼Œè€Œä¸”æ¨¡æ‹Ÿè°ƒåˆ¶æŠ€æœ¯æ˜¯é€šä¿¡ç†è®ºçš„åŸºæœ¬çŸ¥è¯†ã€‚æ¨¡æ‹Ÿä¿¡å·çš„è½½æ³¢è°ƒåˆ¶ç”µè·¯é‡Œé¢ç»å¸¸è¦ç”¨åˆ°è°ƒåˆ¶ä¸è§£è°ƒï¼Œè€ŒAMçš„è°ƒåˆ¶ä¸è§£è°ƒæ˜¯æœ€åŸºæœ¬çš„ï¼Œä¹Ÿæ˜¯ç»å¸¸ç”¨åˆ°çš„ï¼Œä¸ºäº†è¿›ä¸€æ­¥äº†è§£æ¨¡æ‹Ÿè°ƒå¹…ï¼Œå±•ç°MATLABä¸­Mæ–‡ä»¶ç¨‹åºè®¾è®¡ä¼˜åŠ¿ï¼Œæœ¬è¯¾ç¨‹è®¾è®¡å°†åœ¨MATLABä¸­ç”¨Mæ–‡ä»¶å®ç°AMè°ƒåˆ¶è§£è°ƒçš„ç¨‹åºè®¾è®¡ã€‚</p>
<h3 id="è¯¾ç¨‹è®¾è®¡ç›®çš„"><a href="#è¯¾ç¨‹è®¾è®¡ç›®çš„" class="headerlink" title="è¯¾ç¨‹è®¾è®¡ç›®çš„"></a>è¯¾ç¨‹è®¾è®¡ç›®çš„</h3><p>æœ¬è¯¾ç¨‹è®¾è®¡è¯¾é¢˜ä¸»è¦ç ”ç©¶åŸºäºMATLABçš„AMè°ƒåˆ¶è§£è°ƒå®ç°çš„ç†è®ºè®¾è®¡å’Œè½¯ä»¶ä»¿çœŸæ–¹æ³•ã€‚æŒæ¡æ¨¡æ‹Ÿç³»ç»ŸAMè°ƒåˆ¶è§£è°ƒçš„åŸç†ï¼›æŒæ¡AMè°ƒåˆ¶è§£è°ƒæ¨¡æ‹Ÿç³»ç»Ÿçš„ç†è®ºè®¾è®¡æ–¹æ³•ï¼›æŒæ¡åº”ç”¨MATLABåˆ†æç³»ç»Ÿæ—¶åŸŸã€é¢‘åŸŸç‰¹æ€§çš„æ–¹æ³•ï¼Œè¿›ä¸€æ­¥é”»ç‚¼åº”ç”¨MATLABè¿›è¡Œç¼–ç¨‹ä»¿çœŸçš„èƒ½åŠ›ã€‚</p>
<h3 id="è¯¾ç¨‹è®¾è®¡è¦æ±‚"><a href="#è¯¾ç¨‹è®¾è®¡è¦æ±‚" class="headerlink" title="è¯¾ç¨‹è®¾è®¡è¦æ±‚"></a>è¯¾ç¨‹è®¾è®¡è¦æ±‚</h3><p>ç†Ÿæ‚‰MATLABä¸­Mæ–‡ä»¶çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¹¶åœ¨æŒæ¡AMè°ƒåˆ¶è§£è°ƒåŸç†çš„åŸºç¡€ä¸Šï¼Œç¼–å†™AM<br>è°ƒåˆ¶è§£è°ƒç¨‹åºã€‚ç»˜åˆ¶å‡ºAMä¿¡å·è§£è°ƒå‰ååœ¨æ—¶åŸŸå’Œé¢‘åŸŸä¸­çš„æ³¢å½¢ï¼Œå¹¶è§‚å¯Ÿè§£è°ƒå‰åé¢‘è°±æœ‰ä½•å˜åŒ–ä»¥åŠ æ·±å¯¹AMä¿¡å·è§£è°ƒåŸç†çš„ç†è§£ã€‚å¯¹ä¿¡å·å åŠ å™ªå£°ï¼Œå¹¶è¿›è¡Œè§£è°ƒï¼Œç»˜åˆ¶å‡ºè§£è°ƒå‰åä¿¡å·çš„æ—¶é¢‘æ³¢å½¢ï¼Œæ”¹å˜å™ªå£°åŠŸç‡è¿›è¡Œè§£è°ƒï¼Œåˆ†æå™ªå£°å¯¹ä¿¡å·ä¼ è¾“é€ æˆçš„å½±å“ã€‚</p>
<h3 id="è¯¾ç¨‹è®¾è®¡æ­¥éª¤"><a href="#è¯¾ç¨‹è®¾è®¡æ­¥éª¤" class="headerlink" title="è¯¾ç¨‹è®¾è®¡æ­¥éª¤"></a>è¯¾ç¨‹è®¾è®¡æ­¥éª¤</h3><p>(1)ç»™å®šä¸€ä¸ªè°ƒåˆ¶ä¿¡å·mesï¼Œè½½æ³¢ä¿¡å·Ucï¼Œå¹¶è®¾è®¡AMè°ƒåˆ¶è§£è°ƒç›¸å…³å‚æ•°ã€‚<br>(2)åˆ†åˆ«ç»˜åˆ¶å‡ºè°ƒåˆ¶ä¿¡å·å’Œè½½æ³¢ä¿¡å·çš„æ³¢å½¢å›¾å’Œé¢‘è°±å›¾ã€‚<br>(3)ä½¿ç”¨modulate()å‡½æ•°å¯¹mesä¿¡å·è¿›è¡Œè°ƒåˆ¶ã€‚<br>(4)ä½¿ç”¨demod()å‡½æ•°è§£è°ƒå·²è°ƒä¿¡å·Uamã€‚<br>(5)ä½¿ç”¨awgn()å‡½æ•°å¯¹å·²è°ƒä¿¡å·UamåŠ å…¥å™ªå£°ï¼Œè§‚å¯ŸåŠ å…¥å™ªå£°åå¯¹ä¿¡å·çš„å½±å“ã€‚</p>
<h2 id="AMè°ƒåˆ¶è§£è°ƒåŸç†"><a href="#AMè°ƒåˆ¶è§£è°ƒåŸç†" class="headerlink" title="AMè°ƒåˆ¶è§£è°ƒåŸç†"></a>AMè°ƒåˆ¶è§£è°ƒåŸç†</h2><h3 id="AMè°ƒåˆ¶åŸç†"><a href="#AMè°ƒåˆ¶åŸç†" class="headerlink" title="AMè°ƒåˆ¶åŸç†"></a>AMè°ƒåˆ¶åŸç†</h3><p>AMæ˜¯è°ƒå¹…ï¼Œç”¨AMè°ƒåˆ¶ä¸è§£è°ƒå¯ä»¥åœ¨ç”µè·¯é‡Œé¢å®ç°å¾ˆå¤šåŠŸèƒ½ï¼Œåˆ¶é€ å‡ºå¾ˆå¤šæœ‰ç”¨åˆå®æƒ çš„ç”µå­äº§å“ï¼Œä¸ºæˆ‘ä»¬çš„ç”Ÿæ´»å¸¦æ¥ä¾¿åˆ©ã€‚åœ¨æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­ç”¨çš„æ”¶éŸ³æœºå°±æ˜¯é‡‡ç”¨äº†AMè°ƒåˆ¶æ–¹å¼ï¼Œè€Œä¸”åœ¨å†›äº‹å’Œæ°‘ç”¨é¢†åŸŸéƒ½æœ‰ååˆ†é‡è¦çš„ç ”ç©¶è¯¾é¢˜ã€‚<br>AMæ˜¯æŒ‡å¯¹ä¿¡å·è¿›è¡Œå¹…åº¦è°ƒåˆ¶ã€‚åœ¨ä¼ é€ä¿¡å·çš„ä¸€æ–¹å°†æ‰€è¦ä¼ é€çš„ä¿¡å·é™„åŠ åœ¨é«˜é¢‘ä¸Šï¼Œå†ç”±å¤©çº¿å‘å°„å‡ºå»ã€‚é«˜é¢‘éœ‡è¡æ³¢å°±æ˜¯æºå¸¦ä¿¡å·çš„è¿è½½å·¥å…·ï¼Œä¹Ÿå«è½½æ³¢ã€‚æŒ¯å¹…è°ƒåˆ¶ï¼Œå°±æ˜¯ç”±è°ƒåˆ¶ä¿¡å·å»æ§åˆ¶é«˜é¢‘è½½æ³¢çš„æŒ¯å¹…ï¼Œç›´è‡³éšè°ƒåˆ¶ä¿¡å·åšçº¿æ€§å˜åŒ–ã€‚ä»¿çœŸå›¾å¦‚ä¸‹ï¼š<br><img data-src="https://s11.ax1x.com/2024/02/26/pFd9wJs.png" alt="ä»¿çœŸåŸç†å›¾"></p>
<h3 id="AMè§£è°ƒåŸç†"><a href="#AMè§£è°ƒåŸç†" class="headerlink" title="AMè§£è°ƒåŸç†"></a>AMè§£è°ƒåŸç†</h3><p>è°ƒåˆ¶çš„é€†è¿‡ç¨‹å«è§£è°ƒï¼Œè°ƒåˆ¶æ˜¯ä¸€ä¸ªé¢‘è°±æ¬ç§»è¿‡ç¨‹ï¼Œå®ƒæ˜¯å°†ä½é¢‘ä¿¡å·çš„é¢‘è°±æ¬åˆ°è½½é¢‘ä½ç½®ã€‚ä»å·²è°ƒä¿¡å·çš„é¢‘è°±ä¸­ï¼Œå°†ä½äºè½½é¢‘çš„ä¿¡å·é¢‘è°±æ¬ç§»å›æ¥ã€‚è°ƒåˆ¶å’Œè§£è°ƒéƒ½å®Œæˆé¢‘è°±æ¬ç§»ï¼Œå„ç§è°ƒå¹…éƒ½æ˜¯åˆ©ç”¨ä¹˜æ³•å™¨å®ç°çš„ã€‚</p>
<h2 id="ä»¿çœŸè¿‡ç¨‹å®ç°"><a href="#ä»¿çœŸè¿‡ç¨‹å®ç°" class="headerlink" title="ä»¿çœŸè¿‡ç¨‹å®ç°"></a>ä»¿çœŸè¿‡ç¨‹å®ç°</h2><h3 id="AM-ä¿¡å·çš„äº§ç”Ÿ"><a href="#AM-ä¿¡å·çš„äº§ç”Ÿ" class="headerlink" title="AM ä¿¡å·çš„äº§ç”Ÿ"></a>AM ä¿¡å·çš„äº§ç”Ÿ</h3><p>ä¸ºäº†äº§ç”ŸAMä¿¡å·ï¼Œæˆ‘å†™äº†ä¸‹é¢éƒ¨åˆ†çš„ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">fc=<span class="number">120</span>;            %è½½æ³¢ä¿¡å·é¢‘ç‡</span><br><span class="line">fm=<span class="number">30</span>;             %è°ƒåˆ¶ä¿¡å·é¢‘ç‡</span><br><span class="line">Fs=<span class="number">960</span>;             %é‡‡æ ·é¢‘ç‡</span><br><span class="line">w0=<span class="number">2</span>*fc*pi;</span><br><span class="line">w1=<span class="number">2</span>*fm*pi;</span><br><span class="line">Uc=A0*<span class="built_in">cos</span>(w0*t);            %è½½æ³¢ä¿¡å·  </span><br><span class="line">mes=<span class="number">1</span>+A1*<span class="built_in">cos</span>(w1*t);          %è°ƒåˆ¶ä¿¡å·</span><br><span class="line">Uam=modulate(mes,fc,Fs,<span class="string">&#x27;am&#x27;</span>); 			 %AMå·²è°ƒä¿¡å·</span><br><span class="line">C3=fft(Uam);			 %å¯¹å·²è°ƒä¿¡å·è¿›è¡Œå‚…é‡Œå¶å˜æ¢</span><br><span class="line">asd=<span class="built_in">abs</span>(C3);			 % æ±‚æ¨¡</span><br></pre></td></tr></table></figure>
<blockquote>
<p>fmä¸ºè°ƒåˆ¶ä¿¡å·é¢‘ç‡ã€A0ä¸ºè½½æ³¢ä¿¡å·æŒ¯å¹…ã€A1ä¸ºè°ƒåˆ¶ä¿¡å·æŒ¯å¹…ã€mesæ˜¯è°ƒåˆ¶ä¿¡å·ã€fcä¸ºè½½æ³¢ä¿¡å·é¢‘ç‡ã€‚Uamä¸ºå·²è°ƒä¿¡å·ã€‚</p>
</blockquote>
<p>è°ƒåˆ¶ä¿¡å·æ˜¯æ¥è‡ªä¿¡æºçš„è°ƒåˆ¶ä¿¡å·ï¼Œè¿™äº›ä¿¡å·æ˜¯æ¨¡æ‹Ÿçš„ã€‚é«˜é¢‘æŒ¯è¡ä¿¡å·åˆç§°è½½æ³¢ï¼Œæ˜¯æ­£å¼¦ä¿¡å·ã€‚è½½æ³¢ç”±é«˜é¢‘ä¿¡å·æºç›´æ¥äº§ç”Ÿï¼Œç„¶åç»è¿‡é«˜é¢‘åŠŸç‡æ”¾å¤§å™¨è¿›è¡Œæ”¾å¤§ï¼Œä½œä¸ºè°ƒå¹…æ³¢çš„è½½æ³¢ï¼Œè°ƒåˆ¶ä¿¡å·æœ‰ä½é¢‘ä¿¡å·æºç›´æ¥äº§ç”Ÿï¼Œç»™å‡ºä»¥ä¸Šå‚æ•°åï¼Œåœ¨MATLABä¸­é€šè¿‡modulate()å‡½æ•°å¾—åˆ°AMä¿¡å·Uamã€‚å†é€šè¿‡fft()å‡½æ•°å’Œabs()å‡½æ•°å¯¹AMä¿¡å·è¿›è¡Œå‚…é‡Œå¶å˜æ¢åŠæ±‚æ¨¡ï¼Œå¾—åˆ°AMä¿¡å·çš„é¢‘è°±ã€‚<br><em>è½½æ³¢ä¿¡å·çš„æ³¢å½¢ä¸é¢‘è°±å›¾ï¼Œè°ƒåˆ¶ä¿¡å·çš„æ³¢å½¢ä¸é¢‘è°±å›¾ï¼Œå·²è°ƒä¿¡å·çš„æ³¢å½¢ä¸é¢‘è°±å›¾å¦‚ä¸‹ã€‚</em><br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMTEzMjMxMDU3OTY3?x-oss-process=image/format,png" alt="è½½æ³¢ä¿¡å·çš„æ³¢å½¢ä¸é¢‘è°±å›¾"><br>ä¸Šå›¾æ˜¾ç¤ºäº†è½½æ³¢ä¿¡å·çš„æ—¶åŸŸæ³¢å½¢å›¾å’Œé¢‘è°±å›¾ã€‚å›¾ä¸­æ¨ªåæ ‡è¡¨ç¤ºè½½æ³¢æŒç»­æ—¶é—´ï¼Œçºµåæ ‡è¡¨ç¤ºè½½æ³¢å¹…å€¼ã€‚ä»å›¾ä¸­å¯çŸ¥æœ¬æ¬¡è°ƒåˆ¶ä½¿ç”¨çš„è½½æ³¢å¹…åº¦ä¸º1ã€‚<br>ä¸Šå›¾è¿˜æ˜¾ç¤ºäº†è½½æ³¢ä¿¡å·çš„é¢‘è°±å›¾ã€‚å›¾ä¸­æ¨ªåæ ‡è¡¨ç¤ºé¢‘ç‡ï¼Œçºµåæ ‡è¡¨ç¤ºä¿¡å·é¢‘è°±å¹…å€¼ã€‚ä»å›¾ä¸­å¯ä»¥æ˜æ˜¾çœ‹å‡ºè½½æ³¢é¢‘è°±çš„é¢‘ç‡ä¸º120Hzã€‚</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMTEzMjMxMjU2Mzk5?x-oss-process=image/format,png" alt="è°ƒåˆ¶ä¿¡å·çš„æ³¢å½¢ä¸é¢‘è°±å›¾"><br>ä¸Šå›¾æ˜¾ç¤ºäº†è°ƒåˆ¶ä¿¡å·çš„æ—¶åŸŸæ³¢å½¢å›¾å’Œé¢‘è°±å›¾ã€‚å›¾ä¸­çš„æ¨ªåæ ‡å’Œçºµåæ ‡åˆ†åˆ«å¯¹åº”è¡¨ç¤ºæ—¶é—´å’Œä¿¡å·å¹…åº¦å€¼ã€‚ä»å›¾ä¸­å¯ä»¥æ˜æ˜¾çœ‹å‡ºè°ƒåˆ¶ä¿¡å·ä¸ºä½™å¼¦ä¿¡å·ã€‚<br>ä¸Šå›¾è¿˜æ˜¾ç¤ºäº†è°ƒåˆ¶ä¿¡å·çš„é¢‘è°±å›¾ã€‚å›¾ä¸­çš„æ¨ªåæ ‡å’Œçºµåæ ‡åˆ†åˆ«å¯¹åº”è¡¨ç¤ºé¢‘ç‡å’Œé¢‘è°±å¹…å€¼ã€‚ä»å›¾ä¸­å¯ä»¥æ˜æ˜¾çœ‹å‡ºè°ƒåˆ¶ä¿¡å·çš„é¢‘è°±ä¸º30Hzã€‚</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMTEzMjMxNDE3MTEz?x-oss-process=image/format,png" alt="å·²è°ƒä¿¡å·çš„æ³¢å½¢ä¸é¢‘è°±å›¾"><br>ä¸Šå›¾æ˜¾ç¤ºäº†ç³»ç»Ÿä¸­ç»è¿‡AMè°ƒåˆ¶åä¿¡å·çš„æ—¶åŸŸæ³¢å½¢å›¾å’Œé¢‘è°±å›¾ã€‚å›¾ä¸­æ¨ªåæ ‡å’Œçºµåæ ‡åˆ†åˆ«å¯¹åº”è¡¨ç¤ºæ—¶é—´å’Œä¿¡å·å¹…å€¼ã€‚<br>ä¸Šå›¾è¿˜æ˜¾ç¤ºäº†ç»å†è°ƒåˆ¶åä¿¡å·æ‰€å¯¹åº”çš„é¢‘è°±ã€‚é¢‘è°±å›¾ä¸­æ¨ªåæ ‡ä»£è¡¨é¢‘ç‡ï¼Œçºµåæ ‡ä»£è¡¨é¢‘è°±å¹…å€¼ã€‚ä»å›¾ä¸­å¯çŸ¥åŸå‘é€ä¿¡å·ç»è¿‡è°ƒåˆ¶åï¼Œé¢‘è°±æ˜æ˜¾ä»åŸæ¥çš„ä½é¢‘éƒ¨åˆ†æ¬ç§»åˆ°è½½æ³¢éƒ¨åˆ†ã€‚</p>
<h3 id="AMè§£è°ƒå®ç°"><a href="#AMè§£è°ƒå®ç°" class="headerlink" title="AMè§£è°ƒå®ç°"></a>AMè§£è°ƒå®ç°</h3><p>ç»™ä¸ºå¯¹ä¿¡å·è¿›è¡Œè§£è°ƒï¼Œæˆ‘å†™äº†ä¸‹é¢éƒ¨åˆ†çš„ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Dam=demod(Uam,fc,Fs,<span class="string">&#x27;am&#x27;</span>);  % å¯¹ä¿¡å·è¿›è¡Œè§£è°ƒ</span><br><span class="line">C4=fft(Dam);              %  å¯¹è§£è°ƒä¿¡å·è¿›è¡Œå‚…é‡Œå¶å˜æ¢</span><br><span class="line">wqe=<span class="built_in">abs</span>(C4);           % æ±‚æ¨¡</span><br></pre></td></tr></table></figure>
<p>fcä¸ºè½½æ³¢ä¿¡å·é¢‘ç‡ï¼ŒFsä¸ºé‡‡æ ·é¢‘ç‡ï¼ŒUamä¸ºå·²è°ƒä¿¡å·ï¼Œåœ¨MATLABä¸­é€šè¿‡demod()å‡½æ•°å¯¹å·²è°ƒä¿¡å·è¿›è¡Œè§£è°ƒï¼Œå¾—åˆ°Damã€‚å¹¶å¯¹Damè§£è°ƒä¿¡å·è¿›è¡Œå‚…é‡Œå¶å˜æ¢å’Œæ±‚æ¨¡ï¼Œå†ç»˜åˆ¶å‡ºç›¸åº”çš„æ³¢å½¢å›¾ã€‚è§£è°ƒä¿¡å·çš„æ³¢å½¢ä¸é¢‘è°±å›¾å¦‚ä¸‹ï¼š<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMTEzMjMxNzEyNjAx?x-oss-process=image/format,png" alt="è§£è°ƒä¿¡å·çš„æ³¢å½¢ä¸é¢‘è°±å›¾"><br>ä¸Šå›¾æ˜¾ç¤ºäº†ç³»ç»Ÿä¸­ç»è¿‡AMè§£è°ƒä¿¡å·çš„æ—¶åŸŸæ³¢å½¢å›¾å’Œé¢‘è°±å›¾ã€‚å›¾ä¸­æ¨ªåæ ‡å’Œçºµåæ ‡åˆ†åˆ«å¯¹åº”è¡¨ç¤ºæ—¶é—´å’Œä¿¡å·å¹…å€¼ã€‚è§£è°ƒå°†å·²è°ƒä¿¡å·å¤åŸäº†ï¼Œä¿¡å·æ³¢å½¢ä¸è°ƒåˆ¶ä¿¡å·æ³¢å½¢å®Œå…¨å»åˆï¼Œæ²¡æœ‰å‡ºç°å¤±çœŸã€‚<br>ä¸Šå›¾è¿˜æ˜¾ç¤ºäº†è§£è°ƒåä¿¡å·æ‰€å¯¹åº”çš„é¢‘è°±ã€‚é¢‘è°±å›¾ä¸­æ¨ªåæ ‡ä»£è¡¨é¢‘ç‡ï¼Œçºµåæ ‡ä»£è¡¨é¢‘è°±å¹…å€¼ã€‚å¯ä»¥çœ‹å‡ºè§£è°ƒåä¿¡å·é¢‘è°±å›åˆ°äº†åŸå§‹é¢‘ç‡ï¼Œæ²¡æœ‰å¤±çœŸã€‚</p>
<h3 id="å åŠ å™ªå£°çš„AMè§£è°ƒ"><a href="#å åŠ å™ªå£°çš„AMè§£è°ƒ" class="headerlink" title="å åŠ å™ªå£°çš„AMè§£è°ƒ"></a>å åŠ å™ªå£°çš„AMè§£è°ƒ</h3><p>åœ¨å®é™…ä¿¡å·ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œé€šä¿¡ç³»ç»Ÿä¸å¯èƒ½é¿å…çš„ä¼šé‡åˆ°å™ªå£°ã€‚è¿™æ¬¡è®¾è®¡ä½¿ç”¨çš„åŠ æ€§é«˜æ–¯ç™½å™ªå£°ã€‚åŠ æ€§é«˜æ–¯ç™½å™ªå£°æ˜¯æœ€åŸºæœ¬çš„å™ªå£°å’Œå¹²æ‰°æ¨¡å‹ã€‚åŠ æ€§å™ªå£°æ˜¯å åŠ åœ¨ä¿¡å·ä¸Šçš„ä¸€ç§å™ªå£°ï¼Œè€Œä¸”æ— è®ºæœ‰æ— ä¿¡å·ï¼Œå™ªå£°éƒ½å§‹ç»ˆå­˜åœ¨ï¼Œå› æ­¤é€šå¸¸ç§°å®ƒä¸ºåŠ æ€§å™ªå£°æˆ–è€…åŠ æ€§å¹²æ‰°ã€‚ç™½å™ªå£°çš„å™ªå£°åŠŸç‡è°±å¯†åº¦åœ¨æ‰€æœ‰çš„é¢‘ç‡ä¸Šå‡ä¸ºä¸€å¸¸æ•°ã€‚å¦‚æœç™½å™ªå£°å–å€¼çš„æ¦‚å¿µæœä»é«˜æ–¯åˆ†å¸ƒï¼Œåˆ™ç§°è¿™æ ·çš„å™ªå£°ä¸ºé«˜æ–¯ç™½å™ªå£°ã€‚é€šè¿‡åœ¨ä¿¡é“ä¸­å åŠ å™ªå£°ï¼Œå¹¶ç»˜åˆ¶å‡ºç›¸åº”çš„æ³¢å½¢ä¸é¢‘è°±å›¾ï¼Œå¹¶ä¸åŸå§‹ä¿¡å·è¿›è¡Œæ¯”è¾ƒï¼Œåˆ†æå™ªå£°å¯¹ä¿¡å·çš„å½±å“ã€‚<br>ä¸‹é¢ç¨‹åºæ˜¯åœ¨AMä¿¡å·å åŠ å™ªå£°ï¼Œå¹¶å¯¹å åŠ åçš„ä¿¡å·è¿›è¡Œè§£è°ƒï¼š<br><strong>åŠ å¤§å™ªå£°ï¼Œä¿¡å™ªæ¯”ä¸º1ï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">k=awgn(Uam,<span class="number">1</span>);    %åŠ å¤§å™ªå£°ï¼Œä¿¡å™ªæ¯”ä¸º<span class="number">1</span></span><br><span class="line">pp=fft(k,<span class="number">300</span>);     %è¿›è¡Œå‚…é‡Œå¶å˜æ¢</span><br><span class="line">zs=<span class="built_in">abs</span>(pp);       %æ±‚æ¨¡</span><br><span class="line">qaz=demod(k,fc,Fs,<span class="string">&#x27;am&#x27;</span>); %åŠ å¤§å™ªå£°åè§£è°ƒ</span><br><span class="line">wsx=fft(qaz,<span class="number">300</span>);    %è¿›è¡Œå‚…é‡Œå¶å˜æ¢</span><br><span class="line">edc=<span class="built_in">abs</span>(wsx);         %æ±‚æ¨¡</span><br></pre></td></tr></table></figure>
<p><strong>åŠ å°å™ªå£°ï¼Œä¿¡å™ªæ¯”ä¸º20ï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">d=awgn(Uam,<span class="number">20</span>);  %åŠ å°å™ªå£°ï¼Œä¿¡å™ªæ¯”ä¸º<span class="number">20</span></span><br><span class="line">op=fft(d,<span class="number">300</span>);       %è¿›è¡Œå‚…é‡Œå¶å˜æ¢</span><br><span class="line">mm=<span class="built_in">abs</span>(op);           %æ±‚æ¨¡</span><br><span class="line">vb=demod(d,fc,Fs,<span class="string">&#x27;am&#x27;</span>); %åŠ å°å™ªå£°åè§£è°ƒ</span><br><span class="line">fg=fft(vb,<span class="number">300</span>);         %è¿›è¡Œå‚…é‡Œå¶å˜æ¢</span><br><span class="line">ty=<span class="built_in">abs</span>(fg);            %æ±‚æ¨¡</span><br></pre></td></tr></table></figure>
<p><img data-src="https://pic.imgdb.cn/item/66434b600ea9cb1403cfffce.png" alt="åŠ å¤§å™ªå£°åAMä¿¡å·æ³¢å½¢ä¸é¢‘è°±å›¾"><br>ä¸Šå›¾æ˜¯åŠ å¤§å™ªå£°åAMä¿¡å·æ³¢å½¢å›¾ä¸é¢‘è°±å›¾ï¼Œå›¾ä¸­æ¨ªåæ ‡å’Œçºµåæ ‡åˆ†åˆ«å¯¹åº”è¡¨ç¤ºæ—¶é—´å’Œä¿¡å·å¹…å€¼ã€‚å¯ä»¥çœ‹å‡ºåŠ å™ªå£°åå¯¹ä¿¡å·æœ‰å¾ˆå¤§çš„å½±å“ï¼Œæœ€åŸå§‹çš„æ³¢å½¢è¡¨ç°çš„ä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚<br>ä¸Šå›¾è¿˜æ˜¾ç¤ºäº†è§£è°ƒåä¿¡å·æ‰€å¯¹åº”çš„é¢‘è°±ã€‚é¢‘è°±å›¾ä¸­æ¨ªåæ ‡ä»£è¡¨é¢‘ç‡ï¼Œçºµåæ ‡ä»£è¡¨é¢‘è°±å¹…å€¼ã€‚è™½ç„¶å™ªå£°å¯¹é¢‘ç‡æœ‰æ˜æ˜¾çš„å½±å“ï¼Œä½†æ˜¯ä¸­å¿ƒé¢‘ç‡è¿˜æ˜¯æ²¡æœ‰å˜ï¼Œå‡ºç°äº†å¤±çœŸã€‚</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMTEzMjMyNDAxNzQ4?x-oss-process=image/format,png" alt="åŠ å¤§å™ªå£°è§£è°ƒåçš„ä¿¡å·æ³¢å½¢åŠé¢‘è°±å›¾"><br>ä¸Šå›¾æ˜¯åŠ å¤§å™ªå£°åè§£è°ƒä¿¡å·æ³¢å½¢å›¾ä¸é¢‘è°±å›¾ï¼Œå›¾ä¸­æ¨ªåæ ‡å’Œçºµåæ ‡åˆ†åˆ«å¯¹åº”è¡¨ç¤ºæ—¶é—´å’Œä¿¡å·å¹…å€¼ã€‚å¯ä»¥çœ‹å‡ºè§£è°ƒåå™ªå£°ä¾ç„¶å¯¹ä¿¡å·æœ‰å½±å“ï¼Œä¹Ÿå‡ºç°äº†å¤±çœŸã€‚<br>ä¸Šå›¾è¿˜æ˜¾ç¤ºäº†è§£è°ƒåä¿¡å·æ‰€å¯¹åº”çš„é¢‘è°±ã€‚é¢‘è°±å›¾ä¸­æ¨ªåæ ‡ä»£è¡¨é¢‘ç‡ï¼Œçºµåæ ‡ä»£è¡¨é¢‘è°±å¹…å€¼ã€‚å™ªå£°å¯¹é¢‘ç‡çš„å½±å“å¾ˆå¤§ï¼Œå‡ºç°äº†å¤±çœŸï¼Œä½†æ˜¯ä¸­å¿ƒé¢‘ç‡è¿˜æ˜¯æ²¡æœ‰å˜ã€‚</p>
<p><img data-src="https://pic.imgdb.cn/item/66434b9b0ea9cb1403d041db.png" alt="åŠ å°å™ªå£°åAMä¿¡å·æ³¢å½¢ä¸é¢‘è°±å›¾"><br>ä¸Šå›¾æ˜¯åŠ å°å™ªå£°åAMä¿¡å·æ³¢å½¢å›¾ä¸é¢‘è°±å›¾ï¼Œå›¾ä¸­æ¨ªåæ ‡å’Œçºµåæ ‡åˆ†åˆ«å¯¹åº”è¡¨ç¤ºæ—¶é—´å’Œä¿¡å·å¹…å€¼ã€‚å¯ä»¥çœ‹å‡ºåŠ å™ªå£°åå¯¹ä¿¡å·æœ‰ä¸€å®šçš„å½±å“ï¼Œä½†å½±å“ä¸å¤§ï¼ŒåŸºæœ¬å¯ä»¥çœ‹å‡ºåŸå§‹æ³¢å½¢ã€‚<br>ä¸Šå›¾è¿˜æ˜¾ç¤ºäº†è§£è°ƒåä¿¡å·æ‰€å¯¹åº”çš„é¢‘è°±ã€‚é¢‘è°±å›¾ä¸­æ¨ªåæ ‡ä»£è¡¨é¢‘ç‡ï¼Œçºµåæ ‡ä»£è¡¨é¢‘è°±å¹…å€¼ã€‚å™ªå£°å¯¹é¢‘ç‡çš„å½±å“å¾ˆå°ï¼Œè€Œä¸”ä¸­å¿ƒé¢‘ç‡ä¹Ÿæ²¡æœ‰å˜ï¼Œå¤±çœŸå¾ˆå°ã€‚</p>
<p><img data-src="https://pic.imgdb.cn/item/66434c030ea9cb1403d14669.png" alt="åŠ å°å™ªå£°è§£è°ƒåçš„ä¿¡å·æ³¢å½¢åŠé¢‘è°±å›¾"><br>ä¸Šå›¾æ˜¯åŠ å°å™ªå£°åè§£è°ƒä¿¡å·æ³¢å½¢å›¾ä¸é¢‘è°±å›¾ï¼Œå›¾ä¸­æ¨ªåæ ‡å’Œçºµåæ ‡åˆ†åˆ«å¯¹åº”è¡¨ç¤ºæ—¶é—´å’Œä¿¡å·å¹…å€¼ã€‚å¯ä»¥çœ‹å‡ºè§£è°ƒåå™ªå£°ä¾ç„¶å¯¹ä¿¡å·æœ‰å½±å“ï¼Œä¹Ÿå‡ºç°äº†ä¸€äº›å¤±çœŸï¼Œä½†åŸºæœ¬å¯ä»¥çœ‹å‡ºåŸæ³¢å½¢ã€‚<br>ä¸Šå›¾è¿˜æ˜¾ç¤ºäº†è§£è°ƒåä¿¡å·æ‰€å¯¹åº”çš„é¢‘è°±ã€‚é¢‘è°±å›¾ä¸­æ¨ªåæ ‡ä»£è¡¨é¢‘ç‡ï¼Œçºµåæ ‡ä»£è¡¨é¢‘è°±å¹…å€¼ã€‚è§£è°ƒå°†é¢‘ç‡æ¬å›åˆ°åŸé¢‘ç‡ï¼Œå™ªå£°å¯¹é¢‘ç‡çš„å½±å“å¾ˆå°ï¼Œå‡ºç°äº†ä¸€äº›å¤±çœŸï¼Œä½†æ˜¯ä¸­å¿ƒé¢‘ç‡è¿˜æ˜¯æ²¡æœ‰å˜ã€‚<br>ä»åŠ å…¥å™ªå£°çš„å‡ å¹…å›¾å¯ä»¥çœ‹å‡ºä¸åŒåŠŸç‡çš„å™ªå£°å¯¹ä¿¡å·çš„å½±å“ä¸åŒï¼Œå™ªå£°åŠŸç‡è¶Šå¤§ï¼Œå¯¹ä¿¡å·çš„å½±å“ä¹Ÿè¶Šå¤§ã€‚</p>
<h2 id="é‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•"><a href="#é‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•" class="headerlink" title="é‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•"></a>é‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•</h2><p>å¼€å§‹å¯¹MATLABè¿™æ¬¾è½¯ä»¶çš„ä½¿ç”¨ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œè¿.mæ–‡ä»¶ä¸ä¼šå»ºï¼Œå¼„ä¸æ¸…æ¥šfft(),abs()å‡½æ•°æ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼Œä¸çŸ¥é“figure(),subplot()æ˜¯æ€ä¹ˆå®ç°å›¾å½¢è¾“å‡ºï¼Œè‡ªå·±ä¾¿æŠŠä»¥å‰MATLABçš„æ•™ææ‹¿å‡ºæ¥çœ‹ï¼Œä»¥åŠä¸Šç½‘æŸ¥å’Œé—®è€å¸ˆå’ŒåŒå­¦æ‰å¼„æ˜ç™½ã€‚è‡ªå·±åœ¨è¿›è¡ŒAMè°ƒåˆ¶ä¸è§£è°ƒæ—¶æ˜¯ç”¨çš„ä¹˜æ³•ï¼Œè¿™æ ·åšå®¹æ˜“å‡ºé”™ï¼Œè€Œä¸”å¯¼è‡´ç¨‹åºç‰¹åˆ«é•¿ï¼Œå°†ç®€å•é—®é¢˜å¤æ‚åŒ–äº†ã€‚è€å¸ˆæç¤ºå¯ä»¥ç”¨modulate()å‡½æ•°è¿›è¡Œè°ƒåˆ¶ï¼Œäºæ˜¯è‡ªå·±å»çœ‹è€å¸ˆå‘åœ¨ç½‘ç»œæ•™å­¦å¹³å°çš„èµ„æ–™ä»¥åŠåœ¨MATLABä¸­è¾“å…¥help modulate()æ‰è§£å†³ï¼Œå¹¶é€šè¿‡è°ƒç”¨å‡½æ•°demod()å‡½æ•°å®ç°äº†ä¿¡å·çš„è§£è°ƒã€‚è°ƒåˆ¶ä¿¡å·å¼€å§‹æ²¡æœ‰åŠ ç›´æµåˆ†é‡ï¼Œå¯¼è‡´è°ƒåˆ¶æ—¶é¢‘è°±ä¸å¯¹ï¼Œç¼ºå°‘åŸä¿¡å·çš„é¢‘ç‡ã€‚åé¢ç»™è°ƒåˆ¶ä¿¡å·åŠ ä¸Šä¸€ä¸ªç›´æµåˆ†é‡ï¼Œå¾—åˆ°æ­£ç¡®ç»“æœã€‚åœ¨è¿›è¡Œè°ƒåˆ¶æ—¶æ˜¯ç”¨çš„Uam&#x3D;modulate(mes,fc,Fs,â€™amâ€™)ï¼Œè§£è°ƒæ—¶ç”¨çš„Dam&#x3D;demod(Uam,fc,Fs,â€™amssbâ€™); è¿™è¡Œè¯­å¥ï¼Œè¿™æ ·è§£è°ƒæ³¢å½¢å¯ä»¥å‡ºæ¥ï¼Œä½†æ˜¯æœ‰é”™è¯¯ï¼Œå‘ç°æ˜¯è°ƒåˆ¶ä¸è§£è°ƒè®¾ç½®çš„å‚æ•°ä¸å¯¹ï¼ŒæŠŠè§£è°ƒæ—¶çš„è¯­å¥æ”¹ä¸ºDam&#x3D;demod(Uam,fc,Fs,â€™amâ€™);åèƒ½å‡ºç°æ­£å¸¸æ³¢å½¢ã€‚åœ¨åŠ å™ªå£°æ˜¯d&#x3D;Uam+awgn(Uam,20);æ²¡æœ‰æ­£ç¡®çš„ä½¿ç”¨awgn()å‡½æ•°ï¼Œå°†è¡¨è¾¾å¼æ”¹ä¸ºd&#x3D;awgn(Uam,20);ï¼Œè¿™æ ·å¾—åˆ°çš„æ³¢å½¢å›¾æ‰æ˜¯æ­£ç¡®çš„ã€‚</p>
<h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>æœ¬è®¾è®¡çš„ä¸»é¢˜æ˜¯åŸºäºMATLABçš„AMè°ƒåˆ¶è§£è°ƒå®ç°ï¼Œç¬¬äºŒç« ä¸­é˜ŸAMè°ƒåˆ¶è§£è°ƒåŸç†è¿›è¡Œäº†ç†è®ºåˆ†æã€‚ç¬¬ä¸‰ç« ä¸­æ ¹æ®ç¬¬äºŒç« çš„ç†è®ºä»¥åŠMATLABçš„ç‰¹ç‚¹ï¼Œå¯¹è°ƒåˆ¶ä¿¡å·è¿›è¡Œäº†è°ƒåˆ¶ä¸è§£è°ƒï¼Œæœ€åé€šè¿‡ç¨‹åºå¾—å‡ºçš„ä»¿çœŸç»“æœå’Œç†è®ºç»“æœè¿›è¡Œæ¯”è¾ƒä¸åˆ†æã€‚<br>æœ¬è®¾è®¡å¼€å§‹ç»™å®š30Hzçš„è°ƒåˆ¶ä¿¡å·å’Œ120Hzçš„è½½æ³¢ï¼Œå¯¹AMæ³¢è¿›è¡Œè°ƒåˆ¶ä¸è§£è°ƒã€‚å¹¶åœ¨å·²è°ƒAMä¿¡å·ä¸Šå åŠ å™ªå£°ï¼Œå¯¹ä¿¡å·è¿›è¡Œè§£è°ƒã€‚å†å°†ä¹‹ä¸åŸå§‹ä¿¡å·è¿›è¡Œæ¯”è¾ƒï¼Œäº†è§£AMä¿¡å·çš„æŠ—å™ªå£°æ€§èƒ½ã€‚<br>åœ¨å¼€å§‹çš„æ—¶å€™ï¼Œè‡ªå·±æ¯«æ— å¤´ç»ªï¼Œä¸çŸ¥é“è¯¥æ€ä¹ˆåšï¼Œåœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šèµ„æ–™ï¼Œæ‰¾ä¸€ä»½ç›¸ä¼¼çš„ä»£ç å°±è¯•ä¸€ä¸‹ï¼Œä¸€å¿ƒåªæƒ³ç€æ—©ç‚¹åšå‡ºæ¥äº¤å·®ï¼Œä½†æ˜¯è¶Šæƒ³æ—©ç‚¹åšå‡ºæ¥ï¼Œè¶Šæ˜¯åšä¸å¥½ï¼Œåœ¨ç½‘ä¸Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„ä»£ç ã€‚è€å¸ˆè¦æ£€æŸ¥æˆ‘ä»¬çš„ä»»åŠ¡è¿›åº¦çš„æ—¶å€™å°±æ‰¾äº†ä¸€ä»½æœ€ç›¸ä¼¼çš„ä»£ç ç»™è€å¸ˆçœ‹ï¼Œè‡ªå·±ä¹Ÿæ²¡æœ‰è®¤çœŸçš„å»ç†è§£ï¼Œç»“æœçŠ¯äº†ä¸€äº›å¾ˆä½çº§çš„é”™è¯¯ï¼Œåœ¨ä¸€ä¸ªæ¨¡æ‹Ÿä¿¡å·çš„ä»¿çœŸä¸­å±…ç„¶è¿˜å‡ºç°äº†æ•°å­—ä¿¡å·ã€‚è€å¸ˆç»™æˆ‘è®²è§£äº†ä¸€ä¸‹æˆ‘è¿™ä¸ªè¯¾é¢˜è¯¥æ€ä¹ˆå»åšï¼Œäºæ˜¯è‡ªå·±é¡ºç€è€å¸ˆè®²è§£çš„æ€è·¯å»åšã€‚è‡ªå·±å…ˆè¿è¡Œç½‘ä¸Šæ‰¾çš„å‡ ä¸ªç›¸ä¼¼çš„ä»£ç ï¼Œå¯¹ç€ä»£ç ã€ä»¿çœŸå›¾å»ç†è§£ä»£ç ï¼Œæœ‰ä¸æ‡‚çš„åœ°æ–¹å°±çœ‹ä»¥å‰MATLABçš„ä¹¦ä»¥åŠä¸Šç½‘æŸ¥å’Œå‘å·²ç»å®Œæˆçš„åŒå­¦å¯»æ±‚å¸®åŠ©ã€‚å‘ç°è‡ªå·±çš„è¯¾é¢˜æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆéš¾ï¼Œåªæ˜¯è‡ªå·±æ²¡æœ‰ç”¨å¿ƒå»åšã€‚è‡ªå·±å¼€å§‹å°è¯•å†™ä»£ç ï¼Œå…¶å®ä¹Ÿå°±æ˜¯MATLABä¸­å‡ ä¸ªå‡½æ•°å°±èƒ½è§£å†³é—®é¢˜ã€‚æ²‰ä¸‹å¿ƒæ¥è‡ªå·±åšï¼Œæœ€åå°†è¯¾ç¨‹è®¾è®¡åšäº†å‡ºæ¥ã€‚è™½ç„¶æ•ˆæœä¸æ˜¯å¾ˆå¥½ï¼Œä½†ä¹Ÿæ˜¯è‡ªå·±ç”¨åšçš„ã€‚æœ¬æ¬¡è¯¾ç¨‹è®¾è®¡ï¼Œè‡ªå·±å¯¹AMä¿¡å·è°ƒåˆ¶è§£è°ƒæœ‰å¾ˆæ›´æ·±åˆ»çš„ç†è§£ï¼Œèƒ½æ›´ç†Ÿç»ƒçš„ä½¿ç”¨MATLABè¿™æ¬¾è½¯ä»¶ã€‚ä¹Ÿè®¤è¯†åˆ°å­¦ä¹ è¦è„šè¸å®åœ°ï¼Œè‡ªå·±è®¤çœŸå»å¯¹å¾…ï¼Œæ²‰ä¸‹å¿ƒæ¥åšï¼Œæœ‰äº›å›°éš¾å¹¶ä¸æ²¡æœ‰é‚£ä¹ˆéš¾ã€‚ä¹Ÿæ„Ÿè°¢è€å¸ˆå’ŒåŒå­¦çš„å¸®åŠ©ã€‚</p>
<h2 id="AMè§£è°ƒç¨‹åºæ¸…å•"><a href="#AMè§£è°ƒç¨‹åºæ¸…å•" class="headerlink" title="AMè§£è°ƒç¨‹åºæ¸…å•"></a>AMè§£è°ƒç¨‹åºæ¸…å•</h2><p><a href="https://download.csdn.net/download/Silent_F/85041123">å®Œæ•´ä»£ç ä¸‹è½½é“¾æ¥</a></p>
]]></content>
      <categories>
        <category>è¯¾ç¨‹è®¾è®¡</category>
      </categories>
  </entry>
  <entry>
    <title>å°†hexoéƒ¨ç½²åˆ°å¾®ä¿¡å°ç¨‹åº</title>
    <url>/40128d6b.html</url>
    <content><![CDATA[<h3 id="å·²ç»ä¸Šçº¿çš„å°ç¨‹åº"><a href="#å·²ç»ä¸Šçº¿çš„å°ç¨‹åº" class="headerlink" title="å·²ç»ä¸Šçº¿çš„å°ç¨‹åº"></a>å·²ç»ä¸Šçº¿çš„å°ç¨‹åº</h3><p>1ã€å°ç¨‹åºæœç´¢ï¼š<strong>itå‰ç«¯å†œæ°‘å·¥</strong><br>2ã€æ‰«æä¸‹æ–¹äºŒç»´ç <br><img data-src="https://s1.ax1x.com/2023/07/20/pC7sQz9.png"  alt="" ></p>
<h3 id="hexoéƒ¨ç½²æ–¹æ³•"><a href="#hexoéƒ¨ç½²æ–¹æ³•" class="headerlink" title="hexoéƒ¨ç½²æ–¹æ³•"></a>hexoéƒ¨ç½²æ–¹æ³•</h3><p>å®‰è£…<code>hexo-generator-wxapi</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-wxapi --save</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ–¹æ³•çœ‹<a href="https://github.com/rr210/hexo-generator-wxapi" class="æ¼”ç¤ºåœ°å€">è¿™é‡Œ</a></p>
<h4 id="æ¥å£é…ç½®"><a href="#æ¥å£é…ç½®" class="headerlink" title="æ¥å£é…ç½®"></a>æ¥å£é…ç½®</h4><p>1ã€ åœ¨hexoæ ¹ç›®å½•çš„<code>_config.yml</code>æ–‡ä»¶ä¸­åŠ å…¥ä¸€ä¸‹é…ç½®ï¼Œå¿…é¡»é…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">restful_api:</span><br><span class="line">  # site å¯é…ç½®ä¸ºæ•°ç»„é€‰æ‹©æ€§ç”ŸæˆæŸäº›å±æ€§</span><br><span class="line">  # site: [&#x27;title&#x27;, &#x27;subtitle&#x27;, &#x27;description&#x27;, &#x27;author&#x27;, &#x27;since&#x27;, email&#x27;, &#x27;favicon&#x27;, &#x27;avatar&#x27;]</span><br><span class="line">  site: true        # hexo.config mix theme.config</span><br><span class="line">  posts_size: 8    # æ–‡ç« åˆ—è¡¨åˆ†é¡µï¼Œ0 è¡¨ç¤ºä¸åˆ†é¡µ</span><br><span class="line">  posts_props:      # æ–‡ç« åˆ—è¡¨é¡¹çš„éœ€è¦ç”Ÿæˆçš„å±æ€§</span><br><span class="line">    title: true</span><br><span class="line">    slug: true</span><br><span class="line">    date: true</span><br><span class="line">    updated: true</span><br><span class="line">    comments: true</span><br><span class="line">    path: true</span><br><span class="line">    excerpt: false</span><br><span class="line">    cover: true      # å°é¢å›¾ï¼Œå–æ–‡ç« ç¬¬ä¸€å¼ å›¾ç‰‡</span><br><span class="line">    content: false</span><br><span class="line">    keywords:</span><br><span class="line">    categories: true</span><br><span class="line">    tags: true</span><br><span class="line">  categories: true         # åˆ†ç±»æ•°æ®</span><br><span class="line">  use_category_slug: false # Use slug for filename of category data</span><br><span class="line">  tags: true               # æ ‡ç­¾æ•°æ®</span><br><span class="line">  use_tag_slug: false      # Use slug for filename of tag data</span><br><span class="line">  post: true               # æ–‡ç« æ•°æ®</span><br><span class="line">  pages: false            # é¢å¤–çš„ Hexo é¡µé¢æ•°æ®, å¦‚ About</span><br><span class="line">  swipers_list: []          # ç”ŸæˆæŒ‡å®šçš„é¡µé¢ä¿¡æ¯,åšæŒ‡å®šçš„è½®æ’­æ–‡ç« å±•ç¤º</span><br><span class="line">  search_all:                  #  é…ç½®å…¨å±€æœç´¢</span><br><span class="line">    enable: true</span><br><span class="line">    path: api/search.json  </span><br><span class="line">    field: post</span><br><span class="line">    content: true</span><br></pre></td></tr></table></figure>

<h3 id="å°ç¨‹åºé…ç½®"><a href="#å°ç¨‹åºé…ç½®" class="headerlink" title="å°ç¨‹åºé…ç½®"></a>å°ç¨‹åºé…ç½®</h3><ul>
<li>æ‹‰å–ä»£ç ï¼Œå°†æ–‡ä»¶å¯¼å…¥åˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/Rr210/hexo-wx-api</span><br></pre></td></tr></table></figure></li>
<li>æ‰¾åˆ°configæ–‡ä»¶ä¸‹çš„config.jsè¿›è¡Œé…ç½®, å¦‚ä¸‹<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é…ç½®åŸŸå,åŸŸååªä¿®æ”¹æ­¤å¤„ã€‚å¯ä»¥é…ç½®ä¸ºæ ¹åŸŸå u.mr90.top/blog</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">DOMAIN</span> = <span class="string">&quot;lengmo714.top&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">WEBSITENAME</span> = <span class="string">&quot;å—é”‹&quot;</span>; <span class="comment">//ç½‘ç«™åç§°</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">ZANIMAGEURL</span> = <span class="string">&#x27;../../static/images/wechat.png&#x27;</span>; <span class="comment">//å¾®ä¿¡é¼“åŠ±çš„å›¾ç‰‡é“¾æ¥ï¼Œç”¨äºä¸ªäººå°ç¨‹åºçš„èµèµ</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">LOGO</span> = <span class="string">&quot;../../static/images/logo-icon.png&quot;</span>; <span class="comment">// ç½‘ç«™çš„logoå›¾ç‰‡</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">ARTICLE_AUTHOR_NAME</span> = <span class="string">&quot;å—é”‹&quot;</span> <span class="comment">// æ–‡ç« ä½œè€…çš„åç§°</span></span><br><span class="line"><span class="keyword">const</span> ARTICLE_AUTHOR_img = <span class="string">&quot;../../static/images/author.png&quot;</span> <span class="comment">// æ–‡ç« ä½œè€…çš„å¤´åƒ,è¿™é‡Œæ˜¯ç›¸å¯¹äºæ–‡ç« é¡µçš„åœ°å€</span></span><br><span class="line"><span class="comment">//é¦–é¡µå›¾æ ‡å¯¼èˆª</span></span><br><span class="line"><span class="comment">//å‚æ•°è¯´æ˜ï¼š&#x27;name&#x27;ä¸ºåç§°ï¼Œ&#x27;image&#x27;ä¸ºå›¾æ ‡è·¯å¾„ï¼Œ&#x27;url&#x27;ä¸ºè·³è½¬çš„é¡µé¢ï¼Œ&#x27;redirecttype&#x27;ä¸ºè·³è½¬çš„ç±»å‹ï¼Œapppageä¸ºæœ¬å°ç¨‹åºçš„é¡µé¢ï¼Œminiappä¸ºå…¶ä»–å¾®ä¿¡å°ç¨‹åº,webpageä¸ºweb-viewçš„é¡µé¢</span></span><br><span class="line"><span class="comment">//redirecttype æ˜¯ miniapp å°±æ˜¯è·³è½¬å…¶ä»–å°ç¨‹åº  url ä¸ºå…¶ä»–å°ç¨‹åºçš„é¡µé¢</span></span><br><span class="line"><span class="comment">//redirecttype ä¸º apppage å°±æ˜¯è·³è½¬æœ¬å°ç¨‹åºçš„é¡µé¢ï¼Œurlä¸ºæœ¬å°ç¨‹åºçš„é¡µé¢è·¯å¾„</span></span><br><span class="line"><span class="comment">//&#x27;appid&#x27; å½“redirecttypeä¸ºminiappæ—¶ï¼Œè¿™ä¸ªå€¼ä¸ºå…¶ä»–å¾®ä¿¡å°ç¨‹åºçš„appidï¼Œå¦‚æœredirecttypeä¸ºapppageï¼Œwebpageæ—¶ï¼Œè¿™ä¸ªå€¼è®¾ç½®ä¸ºç©ºã€‚</span></span><br><span class="line"><span class="comment">//&#x27;extraData&#x27;å½“redirecttypeä¸ºminiappæ—¶ï¼Œè¿™ä¸ªå€¼ä¸ºæäº¤åˆ°å…¶ä»–å¾®ä¿¡å°ç¨‹åºçš„å‚æ•°ï¼Œå¦‚æœredirecttypeä¸ºapppageï¼Œwebpageæ—¶ï¼Œè¿™ä¸ªå€¼è®¾ç½®ä¸ºç©ºã€‚</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">ISAD</span> = &#123;</span><br><span class="line">  <span class="string">&quot;enable&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="string">&quot;bannerId&quot;</span>:<span class="string">&#x27;adunit-c9dae21126085de9&#x27;</span></span><br><span class="line">&#125;;  <span class="comment">// æ˜¯å¦å¼€å¯å¹¿å‘Š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">INDEXNAV</span> = [&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;çƒ­é—¨æ’è¡Œ&#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: <span class="string">&#x27;../../static/icon/index/1.png&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;../hot/hot&#x27;</span>,</span><br><span class="line">    <span class="attr">redirecttype</span>: <span class="string">&#x27;apppage&#x27;</span>,</span><br><span class="line">    <span class="attr">appid</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">extraData</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;5&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;æœç´¢æ–‡ç« &#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: <span class="string">&#x27;../../static/icon/index/2.png&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;../search/search&#x27;</span>,</span><br><span class="line">    <span class="attr">redirecttype</span>: <span class="string">&#x27;apppage&#x27;</span>,</span><br><span class="line">    <span class="attr">appid</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">extraData</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;7&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;é—®ç­”è®¨è®º&#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: <span class="string">&#x27;../../static/icon/index/3.png&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;../feng/feng&#x27;</span>,</span><br><span class="line">    <span class="attr">redirecttype</span>: <span class="string">&#x27;apppage&#x27;</span>,</span><br><span class="line">    <span class="attr">appid</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">extraData</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;10&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å…³äºæˆ‘ä»¬&#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: <span class="string">&#x27;../../static/icon/index/4.png&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;../about/about&#x27;</span>,</span><br><span class="line">    <span class="attr">redirecttype</span>: <span class="string">&#x27;apppage&#x27;</span>,</span><br><span class="line">    <span class="attr">appid</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">extraData</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">getDomain</span>: <span class="variable constant_">DOMAIN</span>,</span><br><span class="line">  <span class="attr">getWebsiteName</span>: <span class="variable constant_">WEBSITENAME</span>,</span><br><span class="line">  <span class="attr">getIndexNav</span>: <span class="variable constant_">INDEXNAV</span>,</span><br><span class="line">  <span class="attr">getZanImageUrl</span>: <span class="variable constant_">ZANIMAGEURL</span>,</span><br><span class="line">  <span class="attr">getLogo</span>: <span class="variable constant_">LOGO</span>,</span><br><span class="line">  <span class="attr">getAuthorname</span>: <span class="variable constant_">ARTICLE_AUTHOR_NAME</span>,</span><br><span class="line">  <span class="attr">getAuthorImg</span>: ARTICLE_AUTHOR_img,</span><br><span class="line">  <span class="attr">getAd</span>: <span class="variable constant_">ISAD</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æ ·å¼çš„é…ç½®åœ¨å…¨å±€æ–‡ä»¶<code>app.wxss</code>æ–‡ä»¶ä¸­</li>
</ul>
<h3 id="å°ç¨‹åºä¸Šä¼ "><a href="#å°ç¨‹åºä¸Šä¼ " class="headerlink" title="å°ç¨‹åºä¸Šä¼ "></a>å°ç¨‹åºä¸Šä¼ </h3><p>è¿™é‡Œå°±æ¯”è¾ƒç®€å•äº†ï¼Œæ“ä½œå¾ˆç®€å•ï¼Œç¨å¾®ç™¾åº¦ä¸‹éƒ½ä¼šã€‚<br>å®¡æ ¸ä¹Ÿä¸éš¾ï¼Œæ¯”è¾ƒå®¹æ˜“è¿‡ï¼Œå°±æ˜¯ç°åœ¨è¿™ä¸ªæ ·å­ç›´æ¥æäº¤å°±èƒ½é€šè¿‡å®¡æ ¸äº†~<br><img data-src="https://s1.ax1x.com/2023/07/20/pC7sQz9.png"  alt="" ></p>
<p>å¸Œæœ›å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼</p>
]]></content>
      <categories>
        <category>hexo</category>
        <category>å°ç¨‹åºå¼€å‘</category>
      </categories>
  </entry>
  <entry>
    <title>Facebookåº”ç”¨æœªå¯ç”¨ï¼Œè¿™æ¬¾åº”ç”¨ç›®å‰æ— æ³•ä½¿ç”¨ï¼Œåº”ç”¨å¼€å‘è€…å·²å¾—çŸ¥è¿™ä¸ªé—®é¢˜ï¼Œåº”ç”¨é‡æ–°å¯ç”¨åï¼Œä½ ä¾¿èƒ½ç™»å½•</title>
    <url>/9375648f.html</url>
    <content><![CDATA[<p>facebookæ¥å…¥è§£å†³æ‰€æœ‰æŠ¥é”™é—®é¢˜åï¼Œåˆæ¥äº†ä¸€ä¸ªæ–°é—®é¢˜<code>åº”ç”¨æœªå¯ç”¨ï¼Œè¿™æ¬¾åº”ç”¨ç›®å‰æ— æ³•ä½¿ç”¨ï¼Œåº”ç”¨å¼€å‘è€…å·²å¾—çŸ¥è¿™ä¸ªé—®é¢˜ï¼Œåº”ç”¨é‡æ–°å¯ç”¨åï¼Œä½ ä¾¿èƒ½ç™»å½•</code></p>
<span id="more"></span>
<p>å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/6646e99fd9c307b7e9d5208b.png" alt="" /></p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><p>æˆ‘è¿™é‡Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„åº”ç”¨è¿˜æ²¡æœ‰ç»è¿‡Facebookçš„å®¡æ ¸ï¼Œç„¶è€Œè‡ªå·±ç™»å½•çš„facebookè´¦å·ä¸æ˜¯æµ‹è¯•è´¦å·ï¼Œæ‰€ä»¥å‡ºç°äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><p>åœ¨facebookåå°æ·»åŠ æµ‹è¯•è´¦å·ï¼Œæˆ–è€…æ˜¯ç”¨è‡ªå·±çš„å¼€å‘è€…è´¦å·ç™»å½•å°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜äº†ã€‚</p>
]]></content>
      <categories>
        <category>android studio</category>
        <category>facebook</category>
      </categories>
      <tags>
        <tag>facebook</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®ä¿¡å¯¹è¯ç”Ÿæˆå™¨ï¼ŒæŠŠ&quot;é€ å‡&quot;ç©å¾—å¤ª6äº†</title>
    <url>/f8d1933c.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p><a href="https://lengmo714.top/libs/wechat/index.html">ä½“éªŒåœ°å€</a></p>
<p>ä¸€æ¬¾æ•´è›Šå¥½ç©çš„å°å·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿ç”Ÿæˆå¾®ä¿¡èŠå¤©çš„æˆªå›¾ã€‚<br><strong>å¤–è§‚è®¾ç½®ï¼š</strong>æœ‰è®¸å¤šç»†èŠ‚è®¾ç½®ï¼ŒåŒ…æ‹¬æ‰‹æœºä¿¡å·ã€ç½‘ç»œçŠ¶æ€ã€æ‰‹æœºæ—¶é—´ã€å……ç”µçŠ¶æ€ã€ç”µé‡ã€æ¶ˆæ¯æ•°ç­‰ï¼Œè¿˜å¯ä»¥è®¾ç½®èŠå¤©èƒŒæ™¯ã€‚</p>
<p>**å¯¹è¯è®¾ç½®:**å¯ä»¥é€‰æ‹©èŠå¤©ç”¨æˆ·ï¼Œè®¾ç½®å¤´åƒï¼Œæ·»åŠ çº¢åŒ…ï¼Œæ·»åŠ è¯­éŸ³æ—¶é—´ï¼Œç»†èŠ‚ç»å¯¹æ˜¯æ‹‰æ»¡ï¼Œè¿çº¢åŒ…å¤‡æ³¨ã€è½¬è´¦å¤‡æ³¨ç­‰éƒ½å¯ä»¥æ·»åŠ ã€‚å¦å¤–ï¼Œå¯¹è¯çš„ä¿®æ”¹ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œé¼ æ ‡æ”¾åœ¨å¯¹è¯ä¸Šï¼Œä¼šå‡ºç°ä¸€ä¸ªçº¢Ã—ï¼Œç›´æ¥å¯ä»¥åˆ é™¤ï¼Œä¹Ÿå¯ä»¥æ¸…ç©ºèŠå¤©å†…å®¹ã€‚</p>
<p>è¿™ä¸ªå°å·¥å…·ï¼Œå¯ä»¥è¯´ç»†èŠ‚å®Œå…¨æ˜¯æ‹‰æ»¡äº†ï¼Œç»å¯¹å¯ä»¥ä»¥å‡ä¹±çœŸï¼Œæ‰€ä»¥ç½‘ä¸Šçš„å„ç±»èŠå¤©æˆªå›¾ï¼Œè¿˜æ˜¯ä¸èƒ½è½»æ˜“ç›¸ä¿¡çš„ã€‚</p>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>æƒ…äººèŠ‚è¡¨ç™½ä»£ç </title>
    <url>/b8f8cdc8.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>é©¬ä¸Šå°±æƒ…äººèŠ‚äº†ï¼Œè¿™é‡Œå†™ä¸€ä¸ªæƒ…äººèŠ‚è¡¨ç™½ä»£ç ï¼Œå¿«ç»™ä½ çš„å¥³ç¥å‡†å¤‡æˆ‘ä»¬ç¨‹åºå‘˜çš„æµªæ¼«å§ã€‚</p>
<h4 id="jsä»£ç "><a href="#jsä»£ç " class="headerlink" title="jsä»£ç "></a>jsä»£ç </h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> charIndex = -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> stringLength = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> inputText;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">writeContent</span>(<span class="params">init</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (init) &#123;</span><br><span class="line">        inputText = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;contentToWrite&#x27;</span>).<span class="property">innerHTML</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (charIndex == -<span class="number">1</span>) &#123;</span><br><span class="line">        charIndex = <span class="number">0</span>;</span><br><span class="line">        stringLength = inputText.<span class="property">length</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> initString = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myContent&#x27;</span>).<span class="property">innerHTML</span>;</span><br><span class="line">    initString = initString.<span class="title function_">replace</span>(<span class="regexp">/&lt;SPAN.*$/gi</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> theChar = inputText.<span class="title function_">charAt</span>(charIndex);</span><br><span class="line">    <span class="keyword">var</span> nextFourChars = inputText.<span class="title function_">substr</span>(charIndex, <span class="number">4</span>);</span><br><span class="line">    <span class="keyword">if</span> (nextFourChars == <span class="string">&#x27;&lt;BR&gt;&#x27;</span> || nextFourChars == <span class="string">&#x27;&lt;br&gt;&#x27;</span>) &#123;</span><br><span class="line">        theChar = <span class="string">&#x27;&lt;BR&gt;&#x27;</span>;</span><br><span class="line">        charIndex += <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    initString = initString + theChar + <span class="string">&quot;&lt;SPAN id=&#x27;blink&#x27;&gt;_&lt;/SPAN&gt;&quot;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myContent&#x27;</span>).<span class="property">innerHTML</span> = initString;</span><br><span class="line">    charIndex = charIndex / <span class="number">1</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (charIndex % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;blink&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;blink&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;inline&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (charIndex &lt;= stringLength) &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="string">&#x27;writeContent(false)&#x27;</span>, <span class="number">300</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">blinkSpan</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> currentStyle = <span class="string">&#x27;inline&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">blinkSpan</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (currentStyle == <span class="string">&#x27;inline&#x27;</span>) &#123;</span><br><span class="line">        currentStyle = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        currentStyle = <span class="string">&#x27;inline&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;blink&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = currentStyle;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="string">&#x27;blinkSpan()&#x27;</span>, <span class="number">300</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="html"><a href="#html" class="headerlink" title="html"></a>html</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;æƒ…äººèŠ‚å¿«ä¹&lt;/title&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        html, body &#123;</span><br><span class="line"> </span><br><span class="line">            width: 500px;</span><br><span class="line">            height:300px;</span><br><span class="line">            left:50px;</span><br><span class="line">            top:30px;</span><br><span class="line">            margin: 100px 289px;</span><br><span class="line"> </span><br><span class="line">            background: #f6d8e2;</span><br><span class="line">        &#125;</span><br><span class="line">        pp1&#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            top: 20px;</span><br><span class="line">            left: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        canvas &#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            width: 1000px;</span><br><span class="line">            height: 500px;</span><br><span class="line">            left:135px;</span><br><span class="line">            top:50px;</span><br><span class="line">        &#125;&lt;/style&gt;</span><br><span class="line">    &lt;link href=&quot;css/default.css&quot; type=&quot;text/css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;d.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot;&gt;</span><br><span class="line"> </span><br><span class="line">        // 18ç§’ä»¥åå†è·³è½¬</span><br><span class="line">        setTimeout(&quot;javascript:location.href=&#x27;./index.html&#x27;&quot;, 15000);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/head&gt;</span><br><span class="line"> </span><br><span class="line">&lt;div id=&quot;myContent&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;contentToWrite&quot; class=&quot;comments&quot; style=&quot;display:none;&quot;&gt;ç‡•å­ï¼Œæ²¡æœ‰ä½ æˆ‘æ€ä¹ˆæ´»&lt;/div&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt; writeContent(true); &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"> </span><br><span class="line">&lt;canvas id=&quot;pinkboard&quot;&gt;&lt;/canvas&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script&gt;</span><br><span class="line">    /*</span><br><span class="line">     * Settings</span><br><span class="line">     */</span><br><span class="line">    var settings = &#123;</span><br><span class="line">        particles: &#123;</span><br><span class="line">            length:   500, // maximum amount of particles</span><br><span class="line">            duration:   2, // particle duration in sec</span><br><span class="line">            velocity: 100, // particle velocity in pixels/sec</span><br><span class="line">            effect: -0.75, // play with this for a nice effect</span><br><span class="line">            size:      30, // particle size in pixels</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line"> </span><br><span class="line">    /*</span><br><span class="line">     * RequestAnimationFrame polyfill by Erik M?ller</span><br><span class="line">     */</span><br><span class="line">    (function()&#123;var b=0;var c=[&quot;ms&quot;,&quot;moz&quot;,&quot;webkit&quot;,&quot;o&quot;];for(var a=0;a&lt;c.length&amp;&amp;!window.requestAnimationFrame;++a)&#123;window.requestAnimationFrame=window[c[a]+&quot;RequestAnimationFrame&quot;];window.cancelAnimationFrame=window[c[a]+&quot;CancelAnimationFrame&quot;]||window[c[a]+&quot;CancelRequestAnimationFrame&quot;]&#125;if(!window.requestAnimationFrame)&#123;window.requestAnimationFrame=function(h,e)&#123;var d=new Date().getTime();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function()&#123;h(d+f)&#125;,f);b=d+f;return g&#125;&#125;if(!window.cancelAnimationFrame)&#123;window.cancelAnimationFrame=function(d)&#123;clearTimeout(d)&#125;&#125;&#125;());</span><br><span class="line"> </span><br><span class="line">    /*</span><br><span class="line">     * Point class</span><br><span class="line">     */</span><br><span class="line">    var Point = (function() &#123;</span><br><span class="line">        function Point(x, y) &#123;</span><br><span class="line">            this.x = (typeof x !== &#x27;undefined&#x27;) ? x : 0;</span><br><span class="line">            this.y = (typeof y !== &#x27;undefined&#x27;) ? y : 0;</span><br><span class="line">        &#125;</span><br><span class="line">        Point.prototype.clone = function() &#123;</span><br><span class="line">            return new Point(this.x, this.y);</span><br><span class="line">        &#125;;</span><br><span class="line">        Point.prototype.length = function(length) &#123;</span><br><span class="line">            if (typeof length == &#x27;undefined&#x27;)</span><br><span class="line">                return Math.sqrt(this.x * this.x + this.y * this.y);</span><br><span class="line">            this.normalize();</span><br><span class="line">            this.x *= length;</span><br><span class="line">            this.y *= length;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;;</span><br><span class="line">        Point.prototype.normalize = function() &#123;</span><br><span class="line">            var length = this.length();</span><br><span class="line">            this.x /= length;</span><br><span class="line">            this.y /= length;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;;</span><br><span class="line">        return Point;</span><br><span class="line">    &#125;)();</span><br><span class="line"> </span><br><span class="line">    /*</span><br><span class="line">     * Particle class</span><br><span class="line">     */</span><br><span class="line">    var Particle = (function() &#123;</span><br><span class="line">        function Particle() &#123;</span><br><span class="line">            this.position = new Point();</span><br><span class="line">            this.velocity = new Point();</span><br><span class="line">            this.acceleration = new Point();</span><br><span class="line">            this.age = 0;</span><br><span class="line">        &#125;</span><br><span class="line">        Particle.prototype.initialize = function(x, y, dx, dy) &#123;</span><br><span class="line">            this.position.x = x;</span><br><span class="line">            this.position.y = y;</span><br><span class="line">            this.velocity.x = dx;</span><br><span class="line">            this.velocity.y = dy;</span><br><span class="line">            this.acceleration.x = dx * settings.particles.effect;</span><br><span class="line">            this.acceleration.y = dy * settings.particles.effect;</span><br><span class="line">            this.age = 0;</span><br><span class="line">        &#125;;</span><br><span class="line">        Particle.prototype.update = function(deltaTime) &#123;</span><br><span class="line">            this.position.x += this.velocity.x * deltaTime;</span><br><span class="line">            this.position.y += this.velocity.y * deltaTime;</span><br><span class="line">            this.velocity.x += this.acceleration.x * deltaTime;</span><br><span class="line">            this.velocity.y += this.acceleration.y * deltaTime;</span><br><span class="line">            this.age += deltaTime;</span><br><span class="line">        &#125;;</span><br><span class="line">        Particle.prototype.draw = function(context, image) &#123;</span><br><span class="line">            function ease(t) &#123;</span><br><span class="line">                return (--t) * t * t + 1;</span><br><span class="line">            &#125;</span><br><span class="line">            var size = image.width * ease(this.age / settings.particles.duration);</span><br><span class="line">            context.globalAlpha = 1 - this.age / settings.particles.duration;</span><br><span class="line">            context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);</span><br><span class="line">        &#125;;</span><br><span class="line">        return Particle;</span><br><span class="line">    &#125;)();</span><br><span class="line"> </span><br><span class="line">    /*</span><br><span class="line">     * ParticlePool class</span><br><span class="line">     */</span><br><span class="line">    var ParticlePool = (function() &#123;</span><br><span class="line">        var particles,</span><br><span class="line">            firstActive = 0,</span><br><span class="line">            firstFree   = 0,</span><br><span class="line">            duration    = settings.particles.duration;</span><br><span class="line"> </span><br><span class="line">        function ParticlePool(length) &#123;</span><br><span class="line">            // create and populate particle pool</span><br><span class="line">            particles = new Array(length);</span><br><span class="line">            for (var i = 0; i &lt; particles.length; i++)</span><br><span class="line">                particles[i] = new Particle();</span><br><span class="line">        &#125;</span><br><span class="line">        ParticlePool.prototype.add = function(x, y, dx, dy) &#123;</span><br><span class="line">            particles[firstFree].initialize(x, y, dx, dy);</span><br><span class="line"> </span><br><span class="line">            // handle circular queue</span><br><span class="line">            firstFree++;</span><br><span class="line">            if (firstFree   == particles.length) firstFree   = 0;</span><br><span class="line">            if (firstActive == firstFree       ) firstActive++;</span><br><span class="line">            if (firstActive == particles.length) firstActive = 0;</span><br><span class="line">        &#125;;</span><br><span class="line">        ParticlePool.prototype.update = function(deltaTime) &#123;</span><br><span class="line">            var i;</span><br><span class="line"> </span><br><span class="line">            // update active particles</span><br><span class="line">            if (firstActive &lt; firstFree) &#123;</span><br><span class="line">                for (i = firstActive; i &lt; firstFree; i++)</span><br><span class="line">                    particles[i].update(deltaTime);</span><br><span class="line">            &#125;</span><br><span class="line">            if (firstFree &lt; firstActive) &#123;</span><br><span class="line">                for (i = firstActive; i &lt; particles.length; i++)</span><br><span class="line">                    particles[i].update(deltaTime);</span><br><span class="line">                for (i = 0; i &lt; firstFree; i++)</span><br><span class="line">                    particles[i].update(deltaTime);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            // remove inactive particles</span><br><span class="line">            while (particles[firstActive].age &gt;= duration &amp;&amp; firstActive != firstFree) &#123;</span><br><span class="line">                firstActive++;</span><br><span class="line">                if (firstActive == particles.length) firstActive = 0;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">        &#125;;</span><br><span class="line">        ParticlePool.prototype.draw = function(context, image) &#123;</span><br><span class="line">            // draw active particles</span><br><span class="line">            if (firstActive &lt; firstFree) &#123;</span><br><span class="line">                for (i = firstActive; i &lt; firstFree; i++)</span><br><span class="line">                    particles[i].draw(context, image);</span><br><span class="line">            &#125;</span><br><span class="line">            if (firstFree &lt; firstActive) &#123;</span><br><span class="line">                for (i = firstActive; i &lt; particles.length; i++)</span><br><span class="line">                    particles[i].draw(context, image);</span><br><span class="line">                for (i = 0; i &lt; firstFree; i++)</span><br><span class="line">                    particles[i].draw(context, image);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        return ParticlePool;</span><br><span class="line">    &#125;)();</span><br><span class="line"> </span><br><span class="line">    /*</span><br><span class="line">     * Putting it all together</span><br><span class="line">     */</span><br><span class="line">    (function(canvas) &#123;</span><br><span class="line">        var context = canvas.getContext(&#x27;2d&#x27;),</span><br><span class="line">            particles = new ParticlePool(settings.particles.length),</span><br><span class="line">            particleRate = settings.particles.length / settings.particles.duration, // particles/sec</span><br><span class="line">            time;</span><br><span class="line"> </span><br><span class="line">        // get point on heart with -PI &lt;= t &lt;= PI</span><br><span class="line">        function pointOnHeart(t) &#123;</span><br><span class="line">            return new Point(</span><br><span class="line">                180 * Math.pow(Math.sin(t), 3),</span><br><span class="line">                160 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        // creating the particle image using a dummy canvas</span><br><span class="line">        var image = (function() &#123;</span><br><span class="line">            var canvas  = document.createElement(&#x27;canvas&#x27;),</span><br><span class="line">                context = canvas.getContext(&#x27;2d&#x27;);</span><br><span class="line">            canvas.width  = settings.particles.size;</span><br><span class="line">            canvas.height = settings.particles.size;</span><br><span class="line">            // helper function to create the path</span><br><span class="line">            function to(t) &#123;</span><br><span class="line">                var point = pointOnHeart(t);</span><br><span class="line">                point.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;</span><br><span class="line">                point.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;</span><br><span class="line">                return point;</span><br><span class="line">            &#125;</span><br><span class="line">            // create the path</span><br><span class="line">            context.beginPath();</span><br><span class="line">            var t = -Math.PI;</span><br><span class="line">            var point = to(t);</span><br><span class="line">            context.moveTo(point.x, point.y);</span><br><span class="line">            while (t &lt; Math.PI) &#123;</span><br><span class="line">                t += 0.01; // baby steps!</span><br><span class="line">                point = to(t);</span><br><span class="line">                context.lineTo(point.x, point.y);</span><br><span class="line">            &#125;</span><br><span class="line">            context.closePath();</span><br><span class="line">            // create the fill</span><br><span class="line">            context.fillStyle = &#x27;#fa759f&#x27;;</span><br><span class="line">            context.fill();</span><br><span class="line">            // create the image</span><br><span class="line">            var image = new Image();</span><br><span class="line">            image.src = canvas.toDataURL();</span><br><span class="line">            return image;</span><br><span class="line">        &#125;)();</span><br><span class="line"> </span><br><span class="line">        // render that thing!</span><br><span class="line">        function render() &#123;</span><br><span class="line">            // next animation frame</span><br><span class="line">            requestAnimationFrame(render);</span><br><span class="line"> </span><br><span class="line">            // update time</span><br><span class="line">            var newTime   = new Date().getTime() / 1000,</span><br><span class="line">                deltaTime = newTime - (time || newTime);</span><br><span class="line">            time = newTime;</span><br><span class="line"> </span><br><span class="line">            // clear canvas</span><br><span class="line">            context.clearRect(0, 0, canvas.width, canvas.height);</span><br><span class="line"> </span><br><span class="line">            // create new particles</span><br><span class="line">            var amount = particleRate * deltaTime;</span><br><span class="line">            for (var i = 0; i &lt; amount; i++) &#123;</span><br><span class="line">                var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());</span><br><span class="line">                var dir = pos.clone().length(settings.particles.velocity);</span><br><span class="line">                particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            // update and draw particles</span><br><span class="line">            particles.update(deltaTime);</span><br><span class="line">            particles.draw(context, image);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        // handle (re-)sizing of the canvas</span><br><span class="line">        function onResize() &#123;</span><br><span class="line">            canvas.width  = canvas.clientWidth;</span><br><span class="line">            canvas.height = canvas.clientHeight;</span><br><span class="line">        &#125;</span><br><span class="line">        window.onresize = onResize;</span><br><span class="line"> </span><br><span class="line">        // delay rendering bootstrap</span><br><span class="line">        setTimeout(function() &#123;</span><br><span class="line">            onResize();</span><br><span class="line">            render();</span><br><span class="line">        &#125;, 50);</span><br><span class="line">    &#125;)(document.getElementById(&#x27;pinkboard&#x27;));&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/body&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/html&gt;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
      </categories>
  </entry>
  <entry>
    <title>æˆ‘ä»¬æœªèƒ½éªŒè¯æ‚¨çš„æ”¯ä»˜æ–¹å¼ï¼Œè¯·é€‰æ‹©å¦ä¸€æ”¯ä»˜æ–¹å¼å¹¶é‡è¯•ã€‚We are unable to authenticate your payment menthod.please choose a different method and try again.</title>
    <url>/386fc021.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä»Šå¤©åœ¨å‡†å¤‡ç”¨ä¸‡äº‹è¾¾çš„ä¿¡ç”¨å¡å¼€é€š<code>ChatGPT-4</code>ï¼Œåœ¨æœ€åçš„å…³å¤´ï¼Œæç¤ºè¿™æ¡ä¿¡æ¯<code>We are unable to authenticate your payment menthod.please choose a different method and try again.</code>ã€‚ä¸­æ–‡æ„æ€æ˜¯<code>æˆ‘ä»¬æ— æ³•éªŒè¯æ‚¨çš„ä»˜æ¬¾æ–¹å¼ã€‚è¯·é€‰æ‹©å…¶ä»–æ–¹æ³•ï¼Œç„¶åé‡è¯•</code>ã€‚</p>
<p>åœ¨ç½‘ä¸ŠæŸ¥èµ„æ–™ï¼Œå¾ˆå¤šäººè¯´æ˜¯å½“å‰ä½¿ç”¨çš„ç½‘ç»œç¯å¢ƒé—®é¢˜ï¼Œè€Œå¹¶éä¿¡ç”¨å¡æˆ–è€…ä»˜æ¬¾æ–¹å¼çš„é—®é¢˜ã€‚æˆ‘å´ä¸æ­»å¿ƒï¼Œæ¥è¿è¯•äº†å¥½å‡ å¼ ä¿¡ç”¨å¡ï¼Œå‘ç°éƒ½ä¸€æ ·ï¼Œæ— å¥ˆï¼Œåªèƒ½æ”¾å¼ƒè‡ªå·±ç”¨ä¿¡ç”¨å¡å……å€¼äº†~</p>
]]></content>
  </entry>
  <entry>
    <title>æ‰¹é‡ä¿®æ”¹å›¾ç‰‡å</title>
    <url>/a80afa50.html</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€:æœ€è¿‘åœ¨å·¥ä½œä¸­ï¼Œä½¿ç”¨åˆ°äº†ä¸€äº›å›¾ç‰‡ï¼Œå› ä¸ºå›¾ç‰‡æ¯”è¾ƒå¤šï¼Œä¸€ä¸ªä¸€ä¸ªä¿®æ”¹å›¾ç‰‡åæ¯”è¾ƒéº»çƒ¦ï¼Œä¾¿æƒ³ç€å¼„ä¸ªå°å·¥å…·æ‰¹é‡ä¿®æ”¹å›¾ç‰‡åï¼ˆç½‘ä¸Šå¯èƒ½ä¹Ÿæœ‰è¿™æ ·çš„å·¥å…·ï¼Œä¸€æ—¶æ²¡æœ‰æ‰¾åˆ°ï¼‰</p>
</blockquote>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="è„šæœ¬åŠŸèƒ½"><a href="#è„šæœ¬åŠŸèƒ½" class="headerlink" title="è„šæœ¬åŠŸèƒ½"></a>è„šæœ¬åŠŸèƒ½</h3><p>æ­¤è„šæœ¬ç”¨æ¥æ‰¹é‡ä¿®æ”¹å›¾ç‰‡åï¼Œåœ¨åŸæœ¬å›¾ç‰‡åå‰åŠ å…¥æŒ‡å®šå‰ç¼€</p>
<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><p>python 3.x ä»¥ä¸Šç‰ˆæœ¬</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ç”¨æˆ·è¾“å…¥çš„åŸå§‹æ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line">src_folder = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å›¾ç‰‡æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹è·¯å¾„: &quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ç”¨æˆ·è¾“å…¥çš„ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line">dest_folder = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥è¦ä¿å­˜é‡å‘½åå›¾ç‰‡çš„ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„: &quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ç”¨æˆ·è¾“å…¥çš„å‰ç¼€</span></span><br><span class="line">prefix = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥è¦æ·»åŠ çš„å‰ç¼€: &quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®ä¿åŸå§‹æ–‡ä»¶å¤¹è·¯å¾„å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(src_folder):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æŒ‡å®šçš„åŸå§‹æ–‡ä»¶å¤¹è·¯å¾„ä¸å­˜åœ¨&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># ç¡®ä¿ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(dest_folder):</span><br><span class="line">        os.makedirs(dest_folder)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–åŸå§‹æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">    files = os.listdir(src_folder)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¾ªç¯å¤„ç†æ¯ä¸ªæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">        <span class="keyword">if</span> file.endswith(<span class="string">&#x27;.jpg&#x27;</span>) <span class="keyword">or</span> file.endswith(<span class="string">&#x27;.png&#x27;</span>):</span><br><span class="line">            <span class="comment"># æ„å»ºæ–°çš„æ–‡ä»¶åï¼Œæ·»åŠ å‰ç¼€</span></span><br><span class="line">            new_name = prefix + file</span><br><span class="line">            <span class="comment"># æ—§æ–‡ä»¶çš„å®Œæ•´è·¯å¾„</span></span><br><span class="line">            old_path = os.path.join(src_folder, file)</span><br><span class="line">            <span class="comment"># æ–°æ–‡ä»¶çš„å®Œæ•´è·¯å¾„</span></span><br><span class="line">            new_path = os.path.join(dest_folder, new_name)</span><br><span class="line">            <span class="comment"># æ‹·è´æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹å¹¶é‡å‘½å</span></span><br><span class="line">            shutil.copy2(old_path, new_path)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;Copied and Renamed: <span class="subst">&#123;file&#125;</span> to <span class="subst">&#123;new_name&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>å·¥å…·è„šæœ¬</category>
      </categories>
  </entry>
  <entry>
    <title>æ­¤åº”ç”¨ä¸“ä¸ºæ—§ç‰ˆæœ¬Androidæ‰“é€ ï¼Œå› æ­¤å¯èƒ½æ— æ³•æ­£å¸¸è¿è¡Œã€‚è¯·å°è¯•æ£€æŸ¥æ›´æ–°æˆ–ä¸å¼€å‘è€…è”ç³»</title>
    <url>/dc26bed4.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>æœ€è¿‘åœ¨æ‰“å®‰å“åŒ…çš„æ—¶å€™ï¼Œæ‰“å¼€åº”ç”¨åæ€»æ˜¯å¼¹å‡ºä¸‹é¢å¼¹çª—ï¼š<br><img data-src="https://pic.imgdb.cn/item/664328cb0ea9cb140393500c.png" alt="" /></p>
<p>åˆšå¼€å§‹è¿˜ä»¥ä¸ºæ˜¯<code>android studio</code>çš„ç‰ˆæœ¬æ›´æ–°äº†ï¼Œè‡ªå·±çš„ç‰ˆæœ¬æ²¡æœ‰æ›´æ–°ï¼Œäºæ˜¯æ›´æ–°äº†<code>android studio</code>çš„ç‰ˆæœ¬ï¼Œæ›´æ–°ç‰ˆæœ¬åå‘ç°è¿˜æ˜¯æœ‰è¿™ä¸ªé—®é¢˜ã€‚åœ¨ç½‘ä¸ŠæŸ¥äº†ä¸‹ï¼Œå‘ç°æ˜¯<code>targetSdkVersion</code>çš„ç‰ˆæœ¬å¤ªä½äº†ã€‚äºæ˜¯ä¹ä¿®æ”¹ä¸‹<code>targetSdkVersion</code>çš„ç‰ˆæœ¬å°±å¥½äº†ã€‚<br>åœ¨ä¿®æ”¹çš„æ—¶å€™å‘ç°æœ‰å‡ ä¸ªæ–‡ä»¶ä¸­éƒ½æœ‰<code>targetSdkVersion</code>ç‰ˆæœ¬çš„è®¾ç½®ï¼Œå¦‚ä¸‹ï¼š<br>targetSdkVersion PROP_TARGET_SDK_VERSION<br>å¦‚æœæ¯ä¸ªåœ°æ–¹éƒ½æ‰‹åŠ¨æ”¹çš„è¯æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬ç›´æ¥ä¿®æ”¹<code>PROP_TARGET_SDK_VERSION</code>çš„å€¼ã€‚<br>æ‰“å¼€<code>gradle.properties</code>è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°<code>PROP_TARGET_SDK_VERSION</code>ï¼Œå°†å®ƒçš„å€¼æ”¹ä¸º31å³å¯ã€‚å¦‚ä¸‹å›¾</p>
<img data-src="https://pic.imgdb.cn/item/664329fb0ea9cb1403957107.png" alt="" />]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>TypeScript</tag>
        <tag>Android</tag>
        <tag>shader</tag>
      </tags>
  </entry>
  <entry>
    <title>openssl:æ— æ³•å°†&quot;openssl&quot;é¡¹è¯†åˆ«ä¸ºcmdletã€å‡½æ•°ã€è„šæœ¬æ–‡ä»¶æˆ–å¯è¿è¡Œç¨‹åºçš„åç§°</title>
    <url>/7da3d242.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>é¡¹ç›®éœ€è¦é›†æˆ<code>Facebookç¬¬ä¸‰æ–¹ç™»å½•</code>ï¼Œåœ¨<code>ç”Ÿæˆç§˜é’¥æ•£åˆ—</code>çš„æ—¶å€™å‡ºç°äº†ä¸‹é¢é—®é¢˜ï¼š<br><img data-src="https://pic.imgdb.cn/item/6643241b0ea9cb140389b7e7.png"  alt="" /></p>
<h3 id="åŸå› ï¼š"><a href="#åŸå› ï¼š" class="headerlink" title="åŸå› ï¼š"></a>åŸå› ï¼š</h3><p>æœ¬åœ°ç¯å¢ƒæ²¡æœ‰å®‰è£…opensslåº“</p>
<h3 id="è§£å†³æ–¹æ³•ï¼š"><a href="#è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h3><p>å®‰è£…openssl-for-windowsåº“å³å¯</p>
<h4 id="ä¸‹è½½é“¾æ¥ï¼š"><a href="#ä¸‹è½½é“¾æ¥ï¼š" class="headerlink" title="ä¸‹è½½é“¾æ¥ï¼š"></a>ä¸‹è½½é“¾æ¥ï¼š</h4><p><img data-src="https://code.google.com/archive/p/openssl-for-windows/downloads" alt="openssl-for-windows"></p>
<p>ä¸‹è½½å¥½åï¼Œæ·»åŠ åˆ°æœ¬åœ°ç¯å¢ƒç³»ç»Ÿå˜é‡<br><img data-src="https://pic.imgdb.cn/item/664324200ea9cb140389bd42.png"  alt="" /></p>
<p>åŒå‡»Pathé¡¹ï¼Œæ·»åŠ <code>D:\android\openssl-0.9.8e_X64\bin</code>å°†è¿™ä¸ªè·¯å¾„æ”¹æˆè‡ªå·±çš„æ–‡ä»¶è·¯å¾„ã€‚<br>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥<code>openssl version</code>ï¼Œå¦‚æœå‡ºç°ä¸‹å›¾æ‰€ç¤ºçš„å†…å®¹å³ä»£è¡¨å®‰è£…æˆåŠŸ<br><img data-src="https://pic.imgdb.cn/item/664324230ea9cb140389bff7.png"  alt="" /><br>å›åˆ°<code>Android studio</code>é‡æ–°ç”Ÿæˆæ•£åˆ—å¯†é’¥å³å¯ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>æ•°æ®æ‰‹å¥—çš„è®¾è®¡ä¸å®ç°</title>
    <url>/33907.html</url>
    <content><![CDATA[<p><strong>æ‘˜è¦ :</strong> æ•°æ®æ‰‹å¥—åœ¨äººæœºäº¤äº’ä¸­æä¾›äº†ä¸€ç§æœ‰æ•ˆçš„äººæœºäº¤äº’æ‰‹æ®µï¼Œä»æ•°æ®æ‰‹å¥—çš„ç†è®ºå‡ºå‘ï¼Œæœ¬è®ºæ–‡åˆ©ç”¨ä¸€äº›ç¡¬ä»¶è®¾å¤‡ä»¥åŠè½¯ä»¶å¼€å‘ç¯å¢ƒï¼Œè®¾è®¡äº†ä¸€æ¬¾å¯ä»¥ä¸æœºæ¢°è‡‚ã€è™šæ‹Ÿæ‰‹ç­‰ç»ˆç«¯äº¤äº’çš„æ•°æ®æ‰‹å¥—ã€‚ç¡¬ä»¶è®¾å¤‡åŒ…æ‹¬å¼¯æ›²åº¦ä¼ æ„Ÿå™¨ã€MPU6050å…­è½´ä¼ æ„Ÿå™¨ã€HC-05è“ç‰™ä¸²å£é€šä¿¡æ¨¡å—ã€TFTæ˜¾ç¤ºå±ã€STM32F103æœ€å°ç³»ç»Ÿå¼€å‘æ¿ï¼Œæ•°æ®æ‰‹å¥—è½¯ä»¶å¼€å‘å¹³å°ä¸ºKeil uVision5ï¼Œæ‰€ç”¨çš„å¼€å‘è¯­è¨€ä¸ºCè¯­è¨€ï¼Œåœ¨ç³»ç»Ÿè°ƒè¯•çš„æ—¶å€™ç”¨åˆ°äº†åŒ¿åå››è½´ä¸Šä½æœºå’Œä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼Œç”¨æ¥å¯¹MPU6050å…­è½´ä¼ æ„Ÿå™¨å’Œå¼¯æ›²åº¦ä¼ æ„Ÿå™¨è¿›è¡Œè°ƒè¯•ï¼Œæ­¤å¤–åœ¨æ•´ä¸ªç³»ç»Ÿä¸­ç§»æ¤äº†UCOS-IIåµŒå…¥å¼å®æ—¶æ“ä½œç³»ç»Ÿï¼Œä¿è¯äº†æ•°æ®åœ¨ä¼ è¾“æ—¶çš„å®æ—¶æ€§å’Œé«˜æ•ˆæ€§ã€‚å®ç°äº†æ•°æ®æ‰‹å¥—å¯¹äº”è½´æœºæ¢°è‡‚çš„æ§åˆ¶ä»¥åŠäººæ‰‹åˆ°è™šæ‹Ÿæ‰‹çš„åŠ¨ä½œæ˜ å°„ã€‚</p>
<h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>äººæœºäº¤äº’æ˜¯ç ”ç©¶ç³»ç»Ÿä¸ç”¨æˆ·ä¹‹é—´çš„äº¤äº’å…³ç³»[1]ã€‚éšç€ç¤¾ä¼šçš„ä¸æ–­å‘å±•å’Œç§‘å­¦æŠ€æœ¯æ°´å¹³çš„æé«˜ï¼Œä¼ ç»Ÿçš„è®¡ç®—æœºè¾“å…¥è®¾å¤‡ï¼ˆé¼ æ ‡ã€é”®ç›˜ï¼‰å·²ä¸å†å”¯ä¸€ã€‚è¶Šæ¥è¶Šå¤šçš„åœºåˆå‡ºç°äº†å„ç§ä¸åŒçš„äººæœºäº¤äº’çš„åº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚äººè„¸è¯†åˆ«ã€äººä½“æ„Ÿåº”æ¸¸æˆã€VRï¼ˆè™šæ‹Ÿç°å®ï¼‰[2]ã€‚æ•°æ®æ‰‹å¥—ä½œä¸ºä¸€ç§æ–°å‹çš„äººæœºäº¤äº’å·¥å…·ï¼Œç›®å‰åœ¨è¶Šæ¥è¶Šå¤šçš„é¢†åŸŸå¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚å…¶ç›®çš„åœ¨äºèƒ½å¤Ÿé€šè¿‡å†…ç½®çš„ä¼ æ„Ÿå™¨ï¼Œå®æ—¶è·å–æ‰‹éƒ¨åŒ…æ‹¬æ‰‹æŒã€æ‰‹æŒ‡ç­‰æœ‰æ•ˆéƒ¨ä½çš„å¼¯æ›²ç­‰è§’åº¦çš„æ•°æ®[3]ã€‚è€Œä¸”æ‰‹éƒ¨æŸä¸€ä¸ªå…³èŠ‚çš„è¿åŠ¨ï¼Œä¸ä»…ä¼šä½œç”¨äºå¯¹åº”çš„ä¼ æ„Ÿå™¨çš„æ•°æ®å˜åŒ–ï¼Œè€Œä¸”é€šè¿‡è½¯ç»„ç»‡çš„ç›¸äº’ä½œç”¨ï¼Œä½¿å¾—å…¶ä»–çš„ä¼ æ„Ÿå™¨æ•°æ®ä¹Ÿå‘ç”Ÿå˜åŒ–ï¼Œè¿™å°±è¦æ±‚ä¸ºä¿è¯ä¸€å®šçš„æ•°æ®ç²¾åº¦ï¼Œå¿…é¡»å¯¹æ±‚å¾—çš„æ•°æ®è¿›è¡Œä¸€å®šçš„å¤„ç†[4]ã€‚æœ¬è¯¾é¢˜æ‰€ç ”ç©¶çš„æ•°æ®æ‰‹å¥—ç¡¬ä»¶éƒ¨åˆ†ä¸»è¦åŒ…æ‹¬åµŒå…¥å¼æ§åˆ¶å™¨ã€TFTæ˜¾ç¤ºå±ã€å¼¯æ›²åº¦ä¼ æ„Ÿå™¨ã€è“ç‰™ä¸²å£é€šä¿¡æ¨¡å—ã€MPU6050å…­è½´ä¼ æ„Ÿå™¨ç­‰ï¼Œå…·æœ‰å¯ç©¿æˆ´ï¼Œæ— çº¿è¿æ¥ï¼Œä½¿ç”¨çµæ´»ç­‰ç‰¹ç‚¹ã€‚ç›®çš„åœ¨äºåšå‡ºä¸€æ¬¾å¯ç”¨äºæ§åˆ¶æœºæ¢°è‡‚ã€ä¸è™šæ‹Ÿæ‰‹äº¤äº’æ˜ å°„ç­‰å¨±ä¹äº¤äº’çš„æ•°æ®æ‰‹å¥—ã€‚</p>
<h2 id="ç³»ç»Ÿç¡¬ä»¶è®¾è®¡"><a href="#ç³»ç»Ÿç¡¬ä»¶è®¾è®¡" class="headerlink" title="ç³»ç»Ÿç¡¬ä»¶è®¾è®¡"></a>ç³»ç»Ÿç¡¬ä»¶è®¾è®¡</h2><p>æœ¬è®ºæ–‡æ‰€ç ”ç©¶çš„æ•°æ®æ‰‹å¥—åœ¨åŠŸèƒ½ä¸Šè¦æ±‚èƒ½å¤Ÿå®æ—¶çš„æ£€æµ‹åˆ°ä½¿ç”¨è€…æ‰‹æŒ‡çš„å¼¯æ›²ä»¥åŠæ•´ä¸ªæ‰‹å§¿æ€å˜åŒ–çš„æ•°æ®ä¿¡æ¯[5]ï¼Œå¹¶å¯¹æ£€æµ‹åˆ°çš„æ•°æ®ä¿¡æ¯åšå‡ºåˆ¤æ–­åå‘é€ç›¸åº”çš„æŒ‡ä»¤ç»™ä¸ä¹‹äº¤äº’çš„ç»ˆç«¯ã€‚æ ¹æ®æ•°æ®æ‰‹å¥—åœ¨åŠŸèƒ½ä¸Šçš„è¦æ±‚ï¼Œæœ¬è¯¾é¢˜è®¾è®¡å‡ºäº†ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š<br>ï¼ˆ1ï¼‰é‡‡ç”¨å¼¯æ›²åº¦ä¼ æ„Ÿå™¨é‡‡é›†æ‰‹æŒ‡å¼¯æ›²çš„æ•°æ®ä¿¡æ¯ï¼Œå¼¯æ›²åº¦ä¼ æ„Ÿå™¨å…·æœ‰æŸ”éŸ§æ€§å¥½ï¼Œå¯æŠ˜å ï¼Œæµ‹é‡èŒƒå›´å¹¿ç­‰ç‰¹ç‚¹ï¼Œæ¯”è¾ƒé€‚åˆç”¨æ¥æ”¶é›†å¼¯æ›²å³æ‰‹æŒ‡çš„æ•°æ®ä¿¡æ¯ã€‚<br>ï¼ˆ2ï¼‰MPU6050ä¼ æ„Ÿå™¨æ˜¯å…¨çƒé¦–ä¾‹9è½´è¿åŠ¨å¤„ç†ä¼ æ„Ÿå™¨ã€‚å®ƒé›†æˆäº†3MEMSé™€èºä»ªï¼Œ3è½´MEMSåŠ é€Ÿåº¦è®¡ï¼Œä»¥åŠä¸€ä¸ªå¯æ‰©å±•çš„æ•°å­—è¿åŠ¨å¤„ç†å™¨DMPï¼ˆDigital  Motion Processorï¼‰ï¼Œå¯ä»¥ä½¿ç”¨I2Cæ¥å£è¿æ¥ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„æ•°å­—ä¼ æ„Ÿå™¨ã€‚MPU6050ä¼ æ„Ÿå™¨è¿˜å…é™¤äº†ç»„åˆé™€èºä»ªä¸åŠ é€Ÿåº¦å™¨æ—¶ä¹‹è½´é—´å·®çš„é—®é¢˜ï¼Œå‡å°‘äº†å¤§é‡çš„å°è£…ç©ºé—´ï¼Œè€Œä¸”MPU6050æ”¯æŒmpuçš„dmpå®˜æ–¹è§£ç®—åº“ï¼Œå¯ä»¥ç›´æ¥è¾“å‡ºå››å…ƒæ•°ï¼Œæ¬§æ‹‰è§’æ ¼å¼çš„æ•°æ®ã€‚<br>ï¼ˆ3ï¼‰åœ¨é€šä¿¡æ–¹å¼çš„é€‰æ‹©ä¸Šï¼Œè€ƒè™‘åˆ°æœ¬è¯¾é¢˜éœ€è¦æ— çº¿é€šä¿¡ã€åŠŸè€—ä½ï¼Œèƒ½å¿«é€Ÿè¿æ¥ä¸”ç»„ç½‘ç®€å•çš„é€šä¿¡ç‰¹ç‚¹ï¼Œæœ€ç»ˆé€‰æ‹©äº†è“ç‰™æ— çº¿é€šä¿¡æ–¹å¼ï¼Œä½¿ç”¨çš„æ˜¯HC-05è“ç‰™é€šä¿¡æ¨¡å—ï¼ŒHC-05è“ç‰™é€šä¿¡æ¨¡å—æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ä¸»ä»ä¸€ä½“è“ç‰™ä¸²å£æ¨¡å—ï¼Œå¯ä»¥ä¸ç”¨çŸ¥é“å¤ªå¤šè“ç‰™ç›¸å…³çŸ¥è¯†å°±å¯ä»¥å¾ˆå¥½çš„ä¸Šæ‰‹ã€‚<br>ï¼ˆ4ï¼‰ç”µæºå¯ä»¥ä½¿ç”¨USBæ•°æ®çº¿æ¥PCæœºä¾›ç”µï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤§å®¹é‡é”‚ç”µæ± ä¾›ç”µã€‚é”‚ç”µæ± å…·æœ‰ç»­èˆªæ—¶é—´é•¿ã€å¯å¾ªç¯å……ç”µã€ç»¿è‰²ç¯ä¿ä¸”é‡é‡è½»ç­‰ç‰¹ç‚¹ã€‚<br>æ•°æ®æ‰‹å¥—ç¡¬ä»¶ç³»ç»Ÿä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½æ¨¡å—ï¼šä¸»æ§èŠ¯ç‰‡æ¨¡å—ã€å¼¯æ›²åº¦ä¼ æ„Ÿå™¨æ¨¡å—ã€MPU6050ä¼ æ„Ÿå™¨æ¨¡å—ã€ç”µæºæ¨¡å—ã€è“ç‰™é€šä¿¡æ¨¡å—ã€æ•°æ®æ˜¾ç¤ºæ¨¡å—ï¼Œç¡¬ä»¶ç³»ç»Ÿå›¾ã€ç¡¬ä»¶å®ç‰©å›¾åˆ†åˆ«å¦‚å›¾2.1ã€å›¾2.2æ‰€ç¤º</p>
<!-- [![å›¾2.1æ•°æ®æ‰‹å¥—ç¡¬ä»¶ç³»ç»Ÿå›¾](https://s1.ax1x.com/2022/11/03/xqy9DP.png)](https://imgse.com/i/xqy9DP) -->
<img data-src="https://s1.ax1x.com/2022/11/03/xqy9DP.png" alt="å›¾2.1æ•°æ®æ‰‹å¥—ç¡¬ä»¶ç³»ç»Ÿå›¾" />
<!-- [![å›¾2.2ç¡¬ä»¶å®ç‰©å›¾](https://s1.ax1x.com/2022/11/03/xqyuD0.png)](https://imgse.com/i/xqyuD0) -->
<img data-src="https://s1.ax1x.com/2022/11/03/xqyuD0.png" alt="å›¾2.2ç¡¬ä»¶å®ç‰©å›¾" />
## ç³»ç»Ÿè½¯ä»¶è®¾è®¡åŠè°ƒè¯•
æ•°æ®æ‰‹å¥—è½¯ä»¶å¼€å‘å¹³å°ä¸ºKeil uVision5ï¼Œæ‰€ç”¨çš„å¼€å‘è¯­è¨€ä¸ºCè¯­è¨€ï¼Œåœ¨ç³»ç»Ÿè°ƒè¯•çš„æ—¶å€™ç”¨åˆ°äº†åŒ¿åå››è½´ä¸Šä½æœºå’Œä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼Œç”¨æ¥å¯¹MPU6050å…­è½´ä¼ æ„Ÿå™¨å’Œå¼¯æ›²åº¦ä¼ æ„Ÿå™¨è¿›è¡Œè°ƒè¯•ï¼Œæ­¤å¤–åœ¨æ•´ä¸ªç³»ç»Ÿä¸­ç§»æ¤äº†UCOS-IIåµŒå…¥å¼å®æ—¶æ“ä½œç³»ç»Ÿï¼Œä¿è¯äº†æ•°æ®åœ¨ä¼ è¾“æ—¶çš„å®æ—¶æ€§å’Œé«˜æ•ˆæ€§ã€‚
UCOS-IIåµŒå…¥å¼å®æ—¶æ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªå¯ç§»æ¤ã€å¯å›ºåŒ–çš„ã€å¯è£å‰ªçš„ã€å å…ˆå¼å¤šä»»åŠ¡å®æ—¶å†…æ ¸ï¼Œå®ƒé€‚ç”¨äºå¤šç§å¾®å¤„ç†å™¨ï¼Œå¾®æ§åˆ¶å™¨å’Œæ•°å­—å¤„ç†èŠ¯ç‰‡[6]ã€‚æœ¬ç³»ç»Ÿè½¯ä»¶ä¸»æµç¨‹å›¾å¦‚å›¾3.1æ‰€ç¤ºï¼š
<!-- [![xqyk4g.png](https://s1.ax1x.com/2022/11/03/xqyk4g.png)](https://imgse.com/i/xqyk4g) -->
<img data-src="https://s1.ax1x.com/2022/11/03/xqyk4g.png" alt="" />

<p>UCOSçš„åŸç†å°±æ˜¯å½“ä¸€ä¸ªä»»åŠ¡Aæ­£åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå¦‚æœå®ƒé‡Šæ”¾äº†CPUçš„æ§åˆ¶æƒï¼Œå…ˆå¯¹ä»»åŠ¡Aè¿›è¡Œç°åœºä¿æŠ¤ï¼Œç„¶åä»ä»»åŠ¡å°±ç»ªè¡¨ä¸­æŸ¥æ‰¾å…¶ä»–å°±ç»ªä»»åŠ¡å»æ‰§è¡Œï¼Œç­‰åˆ°ä»»åŠ¡Açš„ç­‰å¾…æ—¶é—´åˆ°äº†ï¼Œå®ƒå¯èƒ½é‡æ–°è·å¾—CPUæ§åˆ¶æƒï¼Œè¿™ä¸ªæ—¶å€™æ¢å¤ä»»åŠ¡Açš„ç°åœºï¼Œä»è€Œç»§ç»­æ‰§è¡Œä»»åŠ¡Aï¼Œè¿™æ ·çœ‹èµ·æ¥å°±å¥½åƒæ˜¯ä¸¤ä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œäº†ã€‚å®é™…ä¸Šï¼Œä»»ä½•æ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªä»»åŠ¡å¯ä»¥è·å¾—CPUæ§åˆ¶æƒã€‚æ‰€è°“çš„ä»»åŠ¡ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ­»å¾ªç¯å‡½æ•°ï¼Œè¯¥å‡½æ•°å®ç°ä¸€å®šçš„å·¥ç¨‹ï¼Œä¸€ä¸ªå·¥ç¨‹å¯ä»¥æœ‰å¾ˆå¤šè¿™æ ·çš„ä»»åŠ¡ï¼ŒUCOS-IIå¯¹è¿™äº›ä»»åŠ¡è¿›è¡Œè°ƒåº¦ç®¡ç†ï¼Œè®©è¿™äº›ä»»åŠ¡å¯ä»¥å¹¶å‘å·¥ä½œã€‚æœ¬è¯¾é¢˜ä¸­åˆ›å»ºäº†äº”ä¸ªç”¨æˆ·ä»»åŠ¡ï¼Œåˆ†åˆ«æ˜¯led_taskï¼Œledé—ªçƒæç¤ºç³»ç»Ÿå·¥ä½œçŠ¶æ€ï¼›gui_taskï¼Œæ˜¾ç¤ºå±å®æ—¶æ˜¾ç¤ºå§¿æ€æ•°æ®ï¼›adc_taskå¼¯æ›²åº¦ä¼ æ„Ÿå™¨é‡‡é›†æ‰‹æŒ‡å¼¯æ›²ä¿¡æ¯ï¼›mpu6050_taskï¼Œmpu6050ä¼ æ„Ÿå™¨é‡‡é›†å§¿æ€ä¿¡æ¯ï¼›hc05_taskè“ç‰™å‘é€æ•°æ®ã€‚<br>å¼¯æ›²åº¦ä¼ æ„Ÿå™¨æ•°æ®æ˜¯åˆ©ç”¨STM32F103å•ç‰‡æœºæ¥æ”¶ç»è¿‡ç”µé˜»â€”â€”ç”µå‹è½¬æ¢ç”µè·¯è½¬æ¢è¿‡çš„å¼¯æ›²åº¦ä¼ æ„Ÿå™¨çš„ç”µå‹ä¿¡å·ï¼Œæ¯åªæ‰‹æœ‰äº”æ ¹æ‰‹æŒ‡ï¼Œåœ¨å•ç‰‡æœºä¸Šè®¾ç½®äº”ä¸ªADCè§„åˆ™é€šé“ï¼Œç”¨è‡ªå¸¦çš„ADè½¬æ¢ç”µè·¯è¿›è¡ŒADè½¬æ¢å¾—åˆ°æ‰‹æŒ‡çš„å¼¯æ›²ç¨‹åº¦ï¼ŒADCé€šé“0~4åˆ†åˆ«ä»£è¡¨å¤§æ‹‡æŒ‡ã€é£ŸæŒ‡ã€ä¸­æŒ‡ã€æ— åæŒ‡ã€å°æŒ‡å¼¯æ›²åº¦çš„å€¼ã€‚é€šè¿‡PCä¸Šä¸²å£è°ƒè¯•åŠ©æ‰‹è¯»å‡ºå…¶ç»è¿‡ADè½¬æ¢è¿‡åä¸åŒå¼¯æ›²ç¨‹åº¦æ—¶çš„æ•°å€¼[7]ï¼Œå¹¶å¯¹å…¶è¿›è¡Œåˆ†åˆ«é‡åŒ–å’Œåˆ¤æ–­å¤„ç†ï¼Œçš„åˆ°æœ€åçš„æ‰‹æŒ‡å¼¯æ›²æ•°æ®ã€‚<br>MPU6050ä¼ æ„Ÿå™¨çš„æ•°æ®å¯ä»¥é€šè¿‡å¯¹MPU6050ä¼ æ„Ÿå™¨çš„è½¯ä»¶è®¾ç½®å¯ä»¥ç›´æ¥è¯»å‡ºä¼ æ„Ÿå™¨é‡‡é›†åˆ°çš„åŠ é€Ÿåº¦å’Œè§’é€Ÿåº¦åŸå§‹æ•°æ®ï¼Œä¸è¿‡è¿™äº›åŸå§‹æ•°æ®ï¼Œåœ¨æœ¬è¯¾é¢˜ç ”ç©¶ä¸­ç”¨å¤„ä¸å¤§ï¼Œæˆ‘ä»¬æœŸæœ›å¾—åˆ°çš„æ˜¯å§¿æ€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ¬§æ‹‰è§’ã€‚é¦–å…ˆæˆ‘ä»¬åœ¨PCç«¯ä¸Šé€šè¿‡åŒ¿åå››è½´ä¸Šä½æœºå¯¹MPU6050ä¼ æ„Ÿå™¨çš„åŸå§‹æ•°æ®è¾“å‡ºæ³¢å½¢è¿›è¡Œåˆ†æå¹¶å¯¹å…¶è¿›è¡Œæ»¤æ³¢å¤„ç†ï¼Œåœ¨æ­¤åŸå§‹æ•°æ®çš„åŸºç¡€ä¸Šè¿˜éœ€è¦é€šè¿‡å¯¹åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªè¿›è¡Œèåˆè®¡ç®—å¾—å‡ºçš„æ¬§æ‹‰è§’ï¼Œå¾—åˆ°ä¸‰ä¸ªè½´ä¸Šçš„æ¬§æ‹‰è§’ï¼Œä»¥åº¦ä¸ºå•ä½ã€‚MPU6050æ­è½½æœ‰ä¸€ä¸ªè¿åŠ¨å¤„ç†å™¨ï¼ˆDMPï¼‰ï¼Œå¯ä»¥å°†é‡‡é›†åˆ°çš„åŸå§‹æ•°æ®ç›´æ¥è½¬æ¢è¾“å‡ºå››å…ƒæ•°ï¼Œå†æ ¹æ®è¾“å‡ºçš„å››å…ƒæ•°è®¡ç®—å‡ºå¯¹åº”çš„æ¬§æ‹‰è§’ã€‚<br>æ¬§æ‹‰è§’åˆ°å§¿æ€çŸ©é˜µçš„è½¬æ¢å…³ç³»ä¸ºï¼š</p>
<!-- [![xqyput.png](https://s1.ax1x.com/2022/11/03/xqyput.png)](https://imgse.com/i/xqyput) -->
<img data-src="https://s1.ax1x.com/2022/11/03/xqyput.png" alt=""/>
<!-- [![xqyiE8.png](https://s1.ax1x.com/2022/11/03/xqyiE8.png)](https://imgse.com/i/xqyiE8) -->
<img data-src="https://s1.ax1x.com/2022/11/03/xqyiE8.png" alt=""/>

<!-- [![å§¿æ€çŸ©é˜µTè§£ç®—å¾—åˆ°æ¬§æ‹‰è§’ï¼š](https://s1.ax1x.com/2022/11/03/xqyECQ.png)](https://imgse.com/i/xqyECQ) -->
<img data-src="https://s1.ax1x.com/2022/11/03/xqyECQ.png" alt="å§¿æ€çŸ©é˜µTè§£ç®—å¾—åˆ°æ¬§æ‹‰è§’" />
å¯ä»¥ç›´æ¥ä½¿ç”¨æ¬§æ‹‰è§’å¾®åˆ†æ–¹ç¨‹è¿›è¡Œå§¿æ€è§£ç®—ï¼š
<!-- [![æ¬§æ‹‰è§’å¾®åˆ†æ–¹ç¨‹](https://s1.ax1x.com/2022/11/03/xqyV3j.png)](https://imgse.com/i/xqyV3j) -->
<img data-src="https://s1.ax1x.com/2022/11/03/xqyV3j.png" alt="æ¬§æ‹‰è§’å¾®åˆ†æ–¹ç¨‹" />
ä¸Šå¼ä¸­ï¼Œç­‰å¼å·¦è¾¹æ˜¯è¾“å‡ºçš„æ¬§æ‹‰è§’ï¼Œåˆ†åˆ«å¯¹åº”ä¸‰ä¸ªæ—‹è½¬è½´ï¼Œç­‰å¼å³è¾¹æ˜¯æ ¹æ®ä¸Šä¸€ä¸ªå‘¨æœŸæµ‹ç®—å‡ºæ¥çš„è§’åº¦ï¼Œæ¯ä¸ªæ—‹è½¬è½´ä¸Šçš„è§’åº¦éƒ½æ˜¯æ ¹æ®é™€èºä»ªä¼ æ„Ÿå™¨å®é™…æµ‹é‡çš„è§’é€Ÿåº¦å’Œæ—¶é—´é—´éš”å‘¨æœŸè®¡ç®—å‡ºæ¥çš„ï¼Œå•ä½ä¸ºå¼§åº¦ã€‚æ‰€ä»¥ï¼Œæ ¹æ®ä»¥ä¸Šå¾®åˆ†æ–¹ç¨‹å³å¯è§£ç®—å‡ºå½“å‰ä¼ æ„Ÿå™¨åœ¨æ¯ä¸ªæ—‹è½¬è½´ä¸Šçš„æ¬§æ‹‰è§’ã€‚
HC-05è“ç‰™æ¨¡å—å¼ä¸€æ¬¾é«˜æ€§èƒ½çš„ä¸»ä»ä¸€ä½“è“ç‰™ä¸²å£æ¨¡å—ï¼Œå¯ä»¥åŒå„ç§å¸¦è“ç‰™åŠŸèƒ½çš„ç”µè„‘ã€è“ç‰™ä¸»æœºã€æ‰‹æœºç­‰èŒèƒ½ç»ˆç«¯é…å¯¹ï¼Œè¯¥æ¨¡å—æ”¯æŒéå¸¸å®½çš„æ³¢ç‰¹ç‡èŒƒå›´ï¼š4800~1382400ï¼Œå¹¶ä¸”æ¨¡å—å…¼å®¹5Væˆ–3.3Vå•ç‰‡æœºç³»ç»Ÿï¼Œä½¿ç”¨éå¸¸çµæ´»ã€æ–¹ä¾¿ã€‚åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œé¦–å…ˆå°†è“ç‰™æ¨¡å—å¤„äºATæŒ‡ä»¤æ¨¡å¼ï¼Œåœ¨PCä¸Šé€šè¿‡ä¸²å£è°ƒè¯•åŠ©æ‰‹è¿›è¡ŒATæŒ‡ä»¤é…ç½®ã€‚è“ç‰™é…ç½®å¥½åï¼Œ ä¸»æ§èŠ¯ç‰‡å°†è·å–åˆ°çš„å¼¯æ›²åº¦ä¼ æ„Ÿå™¨çš„æ•°æ®å’ŒMPU6050çš„æ•°æ®ä¿¡æ¯ç”¨ç‰¹å®šçš„æ•°æ®åŒ…æ ¼å¼é€šè¿‡è“ç‰™å‘é€ã€‚
æ˜¾ç¤ºæ¨¡å—çš„ä¸»è¦åŠŸèƒ½æ˜¯åœ¨ä¸€å—TFTæ˜¾ç¤ºå±ä¸Šæ˜¾ç¤ºå½“å‰æ‰‹éƒ¨åœ¨ç©ºé—´ä¸­x,y,zè½´çš„ä¸€ä¸ªå§¿æ€,åˆ†åˆ«ç”¨æ¬§æ‹‰è§’pitchï¼ˆä¿¯ä»°è§’ï¼‰ã€yawï¼ˆåèˆªè§’ï¼‰ã€rollï¼ˆç¿»æ»šè§’ï¼‰è¡¨ç¤ºã€‚
## åº”ç”¨åœºæ™¯å±•ç¤º
æ•°æ®æ‰‹å¥—ä½œä¸ºä¸€ç§äººæœºäº¤äº’è®¾å¤‡ï¼Œå¯åº”ç”¨ä¸å¤šä¸ªé¢†åŸŸå¤šä¸ªè¡Œä¸šï¼Œç†è®ºä¸Šä¸æœ¬è®¾å¤‡äº¤äº’è®¾å¤‡èƒ½å…·å¤‡è“ç‰™é€šä¿¡åŠŸèƒ½ï¼Œåœ¨é€šä¿¡åè®®ä¸€è‡´çš„æƒ…å†µä¸‹ä¾¿éƒ½èƒ½ä¸æœ¬è®¾å¤‡è¿›è¡Œäº¤äº’ã€‚åœ¨æœ¬è¯¾é¢˜ä¸­åªè¦åº”ç”¨äºä¸äº”è½´æœºæ¢°è‡‚äº¤äº’å’Œä¸è™šæ‹Ÿæ‰‹çš„äº¤äº’æ˜ å°„ã€‚
###4.1 ä¸äº”è½´æœºæ¢°è‡‚äº¤äº’
æ•°æ®æ‰‹å¥—ä¸ä¹‹äº¤äº’çš„äº”è½´æœºæ¢°è‡‚ä¸ºå®‰è¯ºäº”è½´æœºæ¢°è‡‚ï¼Œè¿™æ¬¾æœºæ¢°è‡‚çš„ä¸»æ§èŠ¯ç‰‡ä¸ºarduinoï¼Œæ§åˆ¶æ–¹å¼æ˜¯ä½¿ç”¨ç°åœ¨æ•°å­—ç¨‹åºä¸­å¸¸ä½¿ç”¨çš„æŒ‡ä»¤â€”â€”Gä»£ç ï¼Œæœºæ¢°è‡‚çš„äº”ä¸ªè½´ä»ä¸‹åˆ°ä¸Šåˆ†åˆ«æ˜¯Aè½´ã€Bè½´ã€Cè½´ã€Dè½´å’ŒXè½´ï¼Œæ¯ä¸ªè½´åˆ†ä¸ºæ­£å‘è½¬åŠ¨å’Œåå‘è½¬åŠ¨ï¼Œæ‰€ä»¥æ§åˆ¶æœºæ¢°è‡‚åªéœ€è¦åä¸ªæ§åˆ¶æŒ‡ä»¤å³å¯ã€‚æœ¬è¯¾é¢˜åœ¨æ§åˆ¶çš„æ—¶ï¼Œäº”æ ¹æ‰‹æŒ‡åˆ†åˆ«æ§åˆ¶äº”ä¸ªè½´ï¼Œå½“pitchçš„å€¼å°äº20æ—¶æ‰‹æŒ‡æ§åˆ¶æœºæ¢°è‡‚çš„äº”ä¸ªè½´æ­£å‘è½¬åŠ¨ï¼Œå½“pitchçš„å€¼å¤§äº20æ—¶ï¼Œæ‰‹æŒ‡æ§åˆ¶æœºæ¢°è‡‚çš„äº”ä¸ªè½´åå‘è½¬åŠ¨ã€‚æ‰‹éƒ¨é¦–å…ˆåˆ†åˆ«è¯»å–äº”ä¸ªå¼¯æ›²ä¼ æ„Ÿå™¨çš„åˆå§‹å€¼ï¼ˆå³äº”ä¸ªæ‰‹æŒ‡æ²¡æœ‰å¼¯æ›²æ—¶çš„å€¼ï¼‰ï¼Œå†ç»™å®šä¸€ä¸ªè§¦å‘æ¡ä»¶ï¼Œå½“è¾¾åˆ°è¿™ä¸ªè§¦å‘æ¡ä»¶æ—¶ï¼Œæ•°æ®æ‰‹å¥—å‘é€æ§åˆ¶æŒ‡ä»¤ã€‚å¦‚ï¼špitchçš„å€¼ä¸º15ï¼ŒADCé€šé“0çš„åˆå§‹å€¼ä¸º200ï¼Œè§¦å‘æ¡ä»¶ä¸ºADCé€šé“0çš„å€¼å¤§äº300ï¼Œå½“ADCé€šé“0çš„å€¼å¤§äº300æ—¶ï¼Œæ•°æ®æ‰‹å¥—æ§åˆ¶äº”è½´æœºæ¢°è‡‚Aè½´çš„æ­£å‘è½¬åŠ¨ã€‚äº¤äº’å›¾å¦‚å›¾4.1æ‰€ç¤ºã€‚

<!-- [![xqynuq.png](https://s1.ax1x.com/2022/11/03/xqynuq.png)](https://imgse.com/i/xqynuq) -->
<img data-src="https://s1.ax1x.com/2022/11/03/xqynuq.png" alt=""/>
###4.2 ä¸è™šæ‹Ÿæ‰‹çš„äº¤äº’æ˜ å°„
è™šæ‹Ÿæ‰‹çš„å¼€å‘å¹³å°ä¸ºUnity3Dï¼Œæ‰€ç”¨çš„å¼€å‘è¯­è¨€ä¸ºC#ã€‚æ•°æ®æ‰‹å¥—ä¸ä¹‹äº¤äº’æ—¶æ‰€ç”¨åˆ°çš„é€šä¿¡åè®®ä¸ºï¼š
0x55+0x53+aacx_t+pitch_s+aacy_t+roll_s+aacz_t+yaw_s+0xaa+finger0+finger1+finger2 +finger3 +finger4 +0xbbå…±15ï¼ˆbyteï¼‰,è™šæ‹Ÿæ‰‹æ¥æ”¶åˆ°æ•°æ®åŒ…åå¯¹æ•°æ®åŒ…è¿›è¡Œè§£æï¼Œé¦–å…ˆæ˜¯å¯¹MPU6050çš„æ•°æ®è¿›è¡Œè§£æã€‚MPU6050çš„æ•°æ®æœ‰16ä½ï¼Œå…¶ä¸­aacxã€aacyã€aaczä»£è¡¨é«˜å…«ä½ï¼Œpitch_sã€roll_sã€yaw_sä»£è¡¨ä½å…«ä½ï¼Œè¦å¾—åˆ°ä¸€ä¸ªMPU6050çš„æ•°æ®ï¼Œéœ€è¦å°†é«˜å…«ä½å·¦ç§»å…«ä½ï¼Œç„¶åä¸ç¬¬å…«ä½è¿›è¡Œæˆ–è¿ç®—ï¼Œå…·ä½“çš„è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š

<!-- [![xqyZgs.png](https://s1.ax1x.com/2022/11/03/xqyZgs.png)](https://imgse.com/i/xqyZgs) -->
<img data-src="https://s1.ax1x.com/2022/11/03/xqyZgs.png"  alt=""/>
ç„¶åå¯¹äº”è·Ÿæ‰‹æŒ‡å³äº”ä¸ªå¼¯æ›²åº¦ä¼ æ„Ÿå™¨çš„å€¼è¿›è¡Œè§£æã€‚å‡è®¾æ¥å£ä¸Šæ‰€è¯»å–åˆ°çš„Xï¼Œç”¨Xæ¥é™¤ä»¥0.06ï¼Œå³X/0.06å³(a1~a5)ä¸ºå¼¯æ›²ä¼ æ„Ÿå™¨ä¸Šçš„ç”µå‹å€¼çš„é‡åŒ–`Vx*3.3/4096ï¼ˆVxä¸ºä¼ æ„Ÿå™¨ä¸Šçš„ç”µå‹ï¼‰`

<!-- [![xqyevn.png](https://s1.ax1x.com/2022/11/03/xqyevn.png)](https://imgse.com/i/xqyevn) -->
<img data-src="https://s1.ax1x.com/2022/11/03/xqyevn.png" alt="" />
æ ¹æ®ä»¥ä¸Šæ–¹ç¨‹ä¾¿å¯æ±‚å‡ºRçš„é˜»å€¼ã€‚
Rçš„é˜»å€¼ä¸å¼¯æ›²ä¼ æ„Ÿå™¨çš„å¼¯æ›²ç¨‹åº¦æˆç›¸å…³æ¯”ä¾‹ï¼ŒXçš„å€¼å’Œå¼¯æ›²åº¦æˆæ­£ç›¸å…³ã€‚å½“æ‰‹åšå‡ºæŸä¸ªæ‰‹åŠ¿æ—¶ï¼Œä¸»æ§èŠ¯ç‰‡è·å–å½“å‰äº”æ ¹æ‰‹æŒ‡çš„å¼¯æ›²æ•°æ®åŠæ‰‹éƒ¨åœ¨ç©ºé—´ä¸­çš„å§¿æ€æ•°æ®ï¼Œé€šè¿‡è“ç‰™å‘é€ç»™è™šæ‹Ÿæ‰‹ï¼Œè™šæ‹Ÿæ‰‹æ¥æ”¶åˆ°æ•°æ®åè¿›è¡Œè§£æï¼Œç„¶ååšå‡ºç›¸åº”çš„æ‰‹åŠ¿ã€‚äº¤äº’å›¾å¦‚å›¾4.2ã€å›¾4.3ã€å›¾4.4ã€å›¾4.5ã€å›¾4.6æ‰€ç¤ºã€‚

<!-- [![xqyQET.png](https://s1.ax1x.com/2022/11/03/xqyQET.png)](https://imgse.com/i/xqyQET) -->
<!-- [![xqyKbV.png](https://s1.ax1x.com/2022/11/03/xqyKbV.png)](https://imgse.com/i/xqyKbV) -->
<!-- [![xqylUU.png](https://s1.ax1x.com/2022/11/03/xqylUU.png)](https://imgse.com/i/xqylUU) -->
<!-- [![xqy15F.png](https://s1.ax1x.com/2022/11/03/xqy15F.png)](https://imgse.com/i/xqy15F) -->
<!-- [![xqy8C4.png](https://s1.ax1x.com/2022/11/03/xqy8C4.png)](https://imgse.com/i/xqy8C4) -->
<table>
<thead>
<tr>
<th><img data-src="https://s1.ax1x.com/2022/11/03/xqyQET.png" style="width:300px;height:200px" alt=""/></th>
<th><img data-src="https://s1.ax1x.com/2022/11/03/xqyKbV.png" style="width:300px;height:200px" alt=""/></th>
<th><img data-src="https://s1.ax1x.com/2022/11/03/xqylUU.png" style="width:300px;height:200px" alt=""/></th>
</tr>
</thead>
<tbody><tr>
<td><img data-src="https://s1.ax1x.com/2022/11/03/xqy15F.png" style="width:300px;height:200px" alt=""/></td>
<td><img data-src="https://s1.ax1x.com/2022/11/03/xqy8C4.png" style="width:300px;height:200px" alt=""/></td>
<td></td>
</tr>
</tbody></table>
<h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>æœ¬è¯¾é¢˜ä»ç†è®ºå‡ºå‘ï¼Œå®Œæˆäº†UCOSåµŒå…¥å¼æ“ä½œç³»ç»Ÿåœ¨ARMå¹³å°ä¸Šçš„ç§»æ¤ï¼Œæé«˜äº†ç³»ç»Ÿç¨³å®šæ€§ï¼Œä¸€æ­¥æ­¥çš„è®¾è®¡åˆ°å®ç°ï¼Œé€šè¿‡è·å–æ‰‹æŒ‡çš„å¼¯æ›²åº¦æ•°æ®ã€æ‰‹éƒ¨åœ¨ç©ºé—´ä¸­å§¿æ€æ•°æ®ï¼Œè¿›è¡Œäº†æ•°æ®çš„åˆ†æåŠå¤„ç†ï¼Œç»™å‡ºäº†ä¸äº”è½´æœºæ¢°è‡‚çš„äº¤äº’åŠä¸è™šæ‹Ÿæ‰‹äº¤äº’æ˜ å°„çš„æ–¹æ³•ï¼Œä»¥å®é™…çš„åº”ç”¨æµ‹è¯•äº†æ•°æ®é‡‡é›†å’Œæ‰‹åŠ¿è¯†åˆ«çš„å‡†ç¡®æ€§å’Œå®æ—¶æ€§ï¼ŒåŸºæœ¬è¾¾åˆ°äº†æœ¬è¯¾é¢˜çš„ç›®çš„ã€‚</p>
<blockquote>
<p>æ‰‹å¥—ä»£ç å»æˆ‘çš„ä¸‹è½½æŸ¥çœ‹<br><a href="https://download.csdn.net/download/silent_f/10612775">æ•°æ®æ‰‹å¥—ä¸Šä½æœºä»£ç </a><br><a href="https://download.csdn.net/download/silent_f/10612768">æ•°æ®æ‰‹å¥—æ§åˆ¶è™šæ‹Ÿæ‰‹ä»£ç </a><br><a href="https://download.csdn.net/download/silent_f/10612762">æ•°æ®æ‰‹å¥—æ§åˆ¶æœºæ¢°è‡‚ä»£ç </a></p>
</blockquote>
]]></content>
      <categories>
        <category>åµŒå…¥å¼å¼€å‘</category>
      </categories>
  </entry>
  <entry>
    <title>æ·±åœ³ä¸­è®¤ä¼ä¸šå’¨è¯¢ç®¡ç†æœ‰é™å…¬å¸</title>
    <url>/zhongren.html</url>
    <content><![CDATA[<img data-src="https://s1.ax1x.com/2023/09/04/pPrNOld.jpg" style="width:100px;height:100px" alt="" />
 
<h1 id="æ·±åœ³ä¸­è®¤ä¼ä¸šå’¨è¯¢ç®¡ç†æœ‰é™å…¬å¸"><a href="#æ·±åœ³ä¸­è®¤ä¼ä¸šå’¨è¯¢ç®¡ç†æœ‰é™å…¬å¸" class="headerlink" title="æ·±åœ³ä¸­è®¤ä¼ä¸šå’¨è¯¢ç®¡ç†æœ‰é™å…¬å¸"></a>æ·±åœ³ä¸­è®¤ä¼ä¸šå’¨è¯¢ç®¡ç†æœ‰é™å…¬å¸</h1><p>æ·±åœ³ä¸­è®¤ä¼ä¸šå’¨è¯¢ç®¡ç†æœ‰é™å…¬å¸æ˜¯ä¸€å®¶æä¾›ä¼ä¸šè®¤è¯ç›¸å…³æœåŠ¡çš„å…¬å¸ï¼Œå¸®åŠ©ä¼ä¸šå®Œæˆå„ç§ç±»å‹çš„è®¤è¯ç¨‹åºï¼Œç¡®ä¿ä¼ä¸šç¬¦åˆç›¸å…³æ ‡å‡†å’Œæ³•è§„ï¼Œå¹¶è·å¾—ç›¸åº”çš„è®¤è¯è¯ä¹¦ã€‚è¿™äº›æœåŠ¡åŒ…æ‹¬ä½†ä¸é™äºISOè®¤è¯ã€è´¨é‡ç®¡ç†ä½“ç³»è®¤è¯ã€ç¯å¢ƒç®¡ç†ä½“ç³»è®¤è¯ã€èŒä¸šå¥åº·å®‰å…¨ç®¡ç†ä½“ç³»è®¤è¯ç­‰ã€‚<br>å¸®åŠ©åˆ†æä¼ä¸šéœ€æ±‚ï¼Œå¸®åŠ©åˆ¶å®šè®¤è¯è®¡åˆ’ï¼Œæä¾›å¿…è¦çš„åŸ¹è®­å’ŒæŒ‡å¯¼ï¼Œè¯„ä¼°ä¼ä¸šç°æœ‰çš„æµç¨‹å’Œä½“ç³»ï¼Œå¹¶æå‡ºæ”¹è¿›å»ºè®®ã€‚<br>å¸®åŠ©ä¼ä¸šæé«˜ç®¡ç†æ°´å¹³ï¼Œæå‡ç«äº‰åŠ›ï¼Œæ ‘ç«‹è‰¯å¥½çš„ä¼ä¸šå½¢è±¡ï¼Œå¹¶ä¸ºä¼ä¸šåœ¨å›½å†…å¤–å¸‚åœºä¸Šè·å–ä¿¡ä»»å’Œè®¤å¯æä¾›æ”¯æŒã€‚</p>
<h2 id="è”ç³»æ–¹å¼"><a href="#è”ç³»æ–¹å¼" class="headerlink" title="è”ç³»æ–¹å¼"></a>è”ç³»æ–¹å¼</h2><p>å¾®ä¿¡ï¼š<br><img data-src="/images/caiyun.JPG" style="width:100px;height:100px" alt="" /><br>ç”µè¯ï¼š<br>15816884862 (å¼ å¥³å£«)</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>]]></content>
      <categories>
        <category>å¹¿å‘Š</category>
      </categories>
  </entry>
  <entry>
    <title>åˆ›æ„ä¹‹çˆ± - ç”¨ HTML å®ç°çš„çˆ±å¿ƒæ•ˆæœ</title>
    <url>/4ef715.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><img data-src="https://pic.imgdb.cn/item/664338930ea9cb1403af800e.png" alt="æ•ˆæœå›¾" />

<h3 id="æ¼”ç¤ºé“¾æ¥"><a href="#æ¼”ç¤ºé“¾æ¥" class="headerlink" title="æ¼”ç¤ºé“¾æ¥"></a>æ¼”ç¤ºé“¾æ¥</h3><a href="https://lengmo714.top/libs/love.html" title="" target="">çˆ±å¿ƒä»£ç æ¼”ç¤º,</a>

<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>love<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: black;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loveMargin</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">148deg</span>, <span class="number">#f00</span>, transparent <span class="number">2px</span>), <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, pink <span class="number">0px</span>, transparent <span class="number">3px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: <span class="number">10px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* backdrop-filter: saturate(75%) blur(0px); */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation</span>: scaleDraw <span class="number">3s</span> infinite;</span></span><br><span class="line"><span class="language-css">            -webkit-<span class="attribute">animation</span>: scaleDraw <span class="number">3s</span> infinite;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loveMargin</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">142px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">148deg</span>, <span class="number">#f00</span>, transparent <span class="number">2px</span>), <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, pink <span class="number">0px</span>, transparent <span class="number">3px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: <span class="number">10px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* backdrop-filter: saturate(75%) blur(0px); */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loveMargin</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: -<span class="number">137px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">148deg</span>, <span class="number">#f00</span>, transparent <span class="number">2px</span>), <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, pink <span class="number">0px</span>, transparent <span class="number">3px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: <span class="number">10px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* backdrop-filter: saturate(75%) blur(0px); */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.a1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.a2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.a2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: -<span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.a4</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: -<span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.a5</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: -<span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.a6</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: -<span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loveContent</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">148deg</span>, <span class="number">#fff</span>, transparent <span class="number">2px</span>), <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#c55473</span> <span class="number">0px</span>, transparent <span class="number">3px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: <span class="number">10px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">200</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* animation: scaleDraw 2s infinite;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">            -webkit-animation: scaleDraw 2s infinite; */</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loveContent</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">142px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">148deg</span>, <span class="number">#fff</span>, transparent <span class="number">2px</span>), <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#c55473</span> <span class="number">0px</span>, transparent <span class="number">3px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: <span class="number">10px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* backdrop-filter: saturate(75%) blur(0px); */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">200</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loveContent</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: -<span class="number">137px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">148deg</span>, <span class="number">#fff</span>, transparent <span class="number">2px</span>), <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#c55473</span> <span class="number">0px</span>, transparent <span class="number">3px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: <span class="number">10px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* backdrop-filter: saturate(75%) blur(0px); */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">200</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.c1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">200</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.c2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">210</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">23px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">23px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.c3</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">205</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.c4</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">280</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">21px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.c5</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">206</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.c6</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">220</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.c7</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">211</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">19px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">19px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.c8</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">221</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">23px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loveItem</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">148deg</span>, <span class="number">#000</span>, transparent <span class="number">2px</span>), <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#c55473</span> <span class="number">0px</span>, transparent <span class="number">3px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">300</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">57px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">51px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* #c55473 */</span></span></span><br><span class="line"><span class="language-css">            <span class="comment">/* background: #983647; */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: <span class="number">10px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation</span>: scaleDraw <span class="number">2s</span> infinite;</span></span><br><span class="line"><span class="language-css">            -webkit-<span class="attribute">animation</span>: scaleDraw <span class="number">2s</span> infinite;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loveItem</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">300</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">142px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">148deg</span>, <span class="number">#000</span>, transparent <span class="number">2px</span>), <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#c55473</span> <span class="number">0px</span>, transparent <span class="number">3px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: <span class="number">10px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* backdrop-filter: saturate(75%) blur(0px); */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loveItem</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">300</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: -<span class="number">137px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">148deg</span>, <span class="number">#000</span>, transparent <span class="number">2px</span>), <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#c55473</span> <span class="number">0px</span>, transparent <span class="number">3px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: <span class="number">10px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* backdrop-filter: saturate(75%) blur(0px); */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="keyword">@keyframes</span> scaleDraw &#123;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*å®šä¹‰å…³é”®å¸§ã€scaleDrewæ˜¯éœ€è¦ç»‘å®šåˆ°é€‰æ‹©å™¨çš„å…³é”®å¸§åç§°*/</span></span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">            <span class="number">0%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-css">                <span class="comment">/*å¼€å§‹ä¸ºåŸå§‹å¤§å°*/</span></span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">            <span class="number">50%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span></span><br><span class="line"><span class="language-css">                <span class="comment">/*æ”¾å¤§1.1å€*/</span></span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">            <span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-css">                <span class="comment">/*å¼€å§‹ä¸ºåŸå§‹å¤§å°*/</span></span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.i1</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">57px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">51px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.i2</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">51px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">57px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.i3</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">52px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.i4</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.i5</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">58px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">51px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.i6</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">58px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">52px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.i7</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">62px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.i8</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">68px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">61px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;transform: rotate(45deg);&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveMargin a1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveMargin  a2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveMargin  a3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveMargin  a4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveMargin  a5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveMargin  a6&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveContent c1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveContent c2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveContent c3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveContent c4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveContent c5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveContent c6&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveContent c7&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveContent c8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveContent c9&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveItem i1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveItem i2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveItem i3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveItem i4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveItem i5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveItem i6&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveItem i7&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loveItem i8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="å°ç™½ä½¿ç”¨æ•™ç¨‹"><a href="#å°ç™½ä½¿ç”¨æ•™ç¨‹" class="headerlink" title="å°ç™½ä½¿ç”¨æ•™ç¨‹"></a>å°ç™½ä½¿ç”¨æ•™ç¨‹</h3><p>å…ˆåœ¨ç”µè„‘æ¡Œé¢æ–°å»ºä¸€ä¸ª<code>è®°äº‹æœ¬</code>,ç„¶åæ‰“å¼€è®°äº‹æœ¬ï¼Œå°†ä¸Šé¢ä»£ç å¤åˆ¶ç²˜è´´è®°äº‹æœ¬ï¼Œä¿®æ”¹æ–‡ä»¶åç¼€ä¸º<code>.html</code>ï¼Œç„¶åç”¨æµè§ˆå™¨æ‰“å¼€è¯¥æ–‡ä»¶å³å¯</p>
]]></content>
      <categories>
        <category>åˆ›æ„ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title>ç”¨pythonå†™ä¸€ä¸ªä¿„ç½—æ–¯æ–¹å—</title>
    <url>/12496.html</url>
    <content><![CDATA[<p>è‡ªå·±æ¯”è¾ƒè´ªç©ï¼Œä»Šå¤©ç”¨ä¸Šç­æ‘¸é±¼çš„æ—¶é—´ï¼Œç”¨pythonå†™äº†ä¸€ä¸ªä¿„ç½—æ–¯æ–¹å—çš„æ¸¸æˆã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">pygame.init()</span><br><span class="line"></span><br><span class="line">GRID_WIDTH = <span class="number">20</span></span><br><span class="line">GRID_NUM_WIDTH = <span class="number">15</span></span><br><span class="line">GRID_NUM_HEIGHT = <span class="number">25</span></span><br><span class="line">WIDTH, HEIGHT = GRID_WIDTH * GRID_NUM_WIDTH, GRID_WIDTH * GRID_NUM_HEIGHT</span><br><span class="line">SIDE_WIDTH = <span class="number">200</span></span><br><span class="line">SCREEN_WIDTH = WIDTH + SIDE_WIDTH</span><br><span class="line">WHITE = (<span class="number">0xff</span>, <span class="number">0xff</span>, <span class="number">0xff</span>)</span><br><span class="line">BLACK = (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">LINE_COLOR = (<span class="number">0x33</span>, <span class="number">0x33</span>, <span class="number">0x33</span>)</span><br><span class="line"></span><br><span class="line">CUBE_COLORS = [</span><br><span class="line">    (<span class="number">0xcc</span>, <span class="number">0x99</span>, <span class="number">0x99</span>), (<span class="number">0xff</span>, <span class="number">0xff</span>, <span class="number">0x99</span>), (<span class="number">0x66</span>, <span class="number">0x66</span>, <span class="number">0x99</span>),</span><br><span class="line">    (<span class="number">0x99</span>, <span class="number">0x00</span>, <span class="number">0x66</span>), (<span class="number">0xff</span>, <span class="number">0xcc</span>, <span class="number">0x00</span>), (<span class="number">0xcc</span>, <span class="number">0x00</span>, <span class="number">0x33</span>),</span><br><span class="line">    (<span class="number">0xff</span>, <span class="number">0x00</span>, <span class="number">0x33</span>), (<span class="number">0x00</span>, <span class="number">0x66</span>, <span class="number">0x99</span>), (<span class="number">0xff</span>, <span class="number">0xff</span>, <span class="number">0x33</span>),</span><br><span class="line">    (<span class="number">0x99</span>, <span class="number">0x00</span>, <span class="number">0x33</span>), (<span class="number">0xcc</span>, <span class="number">0xff</span>, <span class="number">0x66</span>), (<span class="number">0xff</span>, <span class="number">0x99</span>, <span class="number">0x00</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">screen = pygame.display.set_mode((SCREEN_WIDTH, HEIGHT))</span><br><span class="line">pygame.display.set_caption(<span class="string">&quot;ä¿„ç½—æ–¯æ–¹å—&quot;</span>)</span><br><span class="line">clock = pygame.time.Clock()</span><br><span class="line">FPS = <span class="number">30</span></span><br><span class="line"></span><br><span class="line">score = <span class="number">0</span></span><br><span class="line">level = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">screen_color_matrix = [[<span class="literal">None</span>] * GRID_NUM_WIDTH <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(GRID_NUM_HEIGHT)]</span><br><span class="line"></span><br><span class="line">base_folder = os.path.dirname(__file__)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_text</span>(<span class="params">surf, text, size, x, y, color=WHITE</span>):</span><br><span class="line">    font_name = os.path.join(base_folder, <span class="string">&#x27;font.ttf&#x27;</span>)</span><br><span class="line">    font = pygame.font.Font(font_name, size)</span><br><span class="line">    text_surface = font.render(text, <span class="literal">True</span>, color)</span><br><span class="line">    text_rect = text_surface.get_rect()</span><br><span class="line">    text_rect.midtop = (x, y)</span><br><span class="line">    surf.blit(text_surface, text_rect)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CubeShape</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    SHAPES = [<span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;J&#x27;</span>, <span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;O&#x27;</span>, <span class="string">&#x27;S&#x27;</span>, <span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27;Z&#x27;</span>]</span><br><span class="line">    I = [[(<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">2</span>)],</span><br><span class="line">         [(-<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">2</span>, <span class="number">0</span>)]]</span><br><span class="line">    J = [[(-<span class="number">2</span>, <span class="number">0</span>), (-<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, -<span class="number">1</span>)],</span><br><span class="line">         [(-<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">2</span>)],</span><br><span class="line">         [(<span class="number">0</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">2</span>, <span class="number">0</span>)],</span><br><span class="line">         [(<span class="number">0</span>, -<span class="number">2</span>), (<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">0</span>)]]</span><br><span class="line">    L = [[(-<span class="number">2</span>, <span class="number">0</span>), (-<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>)],</span><br><span class="line">         [(<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">2</span>)],</span><br><span class="line">         [(<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">2</span>, <span class="number">0</span>)],</span><br><span class="line">         [(<span class="number">0</span>, -<span class="number">2</span>), (<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">0</span>, <span class="number">0</span>), (-<span class="number">1</span>, <span class="number">0</span>)]]</span><br><span class="line">    O = [[(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>)]]</span><br><span class="line">    S = [[(-<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>)],</span><br><span class="line">         [(<span class="number">1</span>, -<span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>)]]</span><br><span class="line">    T = [[(<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (-<span class="number">1</span>, <span class="number">0</span>)],</span><br><span class="line">         [(-<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>)],</span><br><span class="line">         [(<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>)],</span><br><span class="line">         [(-<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, -<span class="number">1</span>)]]</span><br><span class="line">    Z = [[(<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>)],</span><br><span class="line">         [(-<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, -<span class="number">1</span>), (<span class="number">1</span>, -<span class="number">1</span>)]]</span><br><span class="line">    SHAPES_WITH_DIR = &#123;</span><br><span class="line">        <span class="string">&#x27;I&#x27;</span>: I, <span class="string">&#x27;J&#x27;</span>: J, <span class="string">&#x27;L&#x27;</span>: L, <span class="string">&#x27;O&#x27;</span>: O, <span class="string">&#x27;S&#x27;</span>: S, <span class="string">&#x27;T&#x27;</span>: T, <span class="string">&#x27;Z&#x27;</span>: Z</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.shape = self.SHAPES[random.randint(<span class="number">0</span>, <span class="built_in">len</span>(self.SHAPES) - <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">        self.center = (<span class="number">2</span>, GRID_NUM_WIDTH // <span class="number">2</span>)</span><br><span class="line">        self.<span class="built_in">dir</span> = random.randint(<span class="number">0</span>, <span class="built_in">len</span>(self.SHAPES_WITH_DIR[self.shape]) - <span class="number">1</span>)</span><br><span class="line">        self.color = CUBE_COLORS[random.randint(<span class="number">0</span>, <span class="built_in">len</span>(CUBE_COLORS) - <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_all_gridpos</span>(<span class="params">self, center=<span class="literal">None</span></span>):</span><br><span class="line">        curr_shape = self.SHAPES_WITH_DIR[self.shape][self.<span class="built_in">dir</span>]</span><br><span class="line">        <span class="keyword">if</span> center <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            center = [self.center[<span class="number">0</span>], self.center[<span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> [(cube[<span class="number">0</span>] + center[<span class="number">0</span>], cube[<span class="number">1</span>] + center[<span class="number">1</span>])</span><br><span class="line">                <span class="keyword">for</span> cube <span class="keyword">in</span> curr_shape]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">conflict</span>(<span class="params">self, center</span>):</span><br><span class="line">        <span class="keyword">for</span> cube <span class="keyword">in</span> self.get_all_gridpos(center):</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> cube[<span class="number">0</span>] &lt; <span class="number">0</span> <span class="keyword">or</span> cube[<span class="number">1</span>] &lt; <span class="number">0</span> <span class="keyword">or</span> cube[<span class="number">0</span>] &gt;= GRID_NUM_HEIGHT <span class="keyword">or</span> \</span><br><span class="line">                    cube[<span class="number">1</span>] &gt;= GRID_NUM_WIDTH:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> screen_color_matrix[cube[<span class="number">0</span>]][cube[<span class="number">1</span>]] <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rotate</span>(<span class="params">self</span>):</span><br><span class="line">        new_dir = self.<span class="built_in">dir</span> + <span class="number">1</span></span><br><span class="line">        new_dir %= <span class="built_in">len</span>(self.SHAPES_WITH_DIR[self.shape])</span><br><span class="line">        old_dir = self.<span class="built_in">dir</span></span><br><span class="line">        self.<span class="built_in">dir</span> = new_dir</span><br><span class="line">        <span class="keyword">if</span> self.conflict(self.center):</span><br><span class="line">            self.<span class="built_in">dir</span> = old_dir</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">down</span>(<span class="params">self</span>):</span><br><span class="line"></span><br><span class="line">        center = (self.center[<span class="number">0</span>] + <span class="number">1</span>, self.center[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">if</span> self.conflict(center):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        self.center = center</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">left</span>(<span class="params">self</span>):</span><br><span class="line">        center = (self.center[<span class="number">0</span>], self.center[<span class="number">1</span>] - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> self.conflict(center):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        self.center = center</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">right</span>(<span class="params">self</span>):</span><br><span class="line">        center = (self.center[<span class="number">0</span>], self.center[<span class="number">1</span>] + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> self.conflict(center):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        self.center = center</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">draw</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> cube <span class="keyword">in</span> self.get_all_gridpos():</span><br><span class="line">            pygame.draw.rect(screen, self.color,</span><br><span class="line">                             (cube[<span class="number">1</span>] * GRID_WIDTH, cube[<span class="number">0</span>] * GRID_WIDTH,</span><br><span class="line">                              GRID_WIDTH, GRID_WIDTH))</span><br><span class="line">            pygame.draw.rect(screen, WHITE,</span><br><span class="line">                             (cube[<span class="number">1</span>] * GRID_WIDTH, cube[<span class="number">0</span>] * GRID_WIDTH,</span><br><span class="line">                              GRID_WIDTH, GRID_WIDTH),</span><br><span class="line">                             <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_grids</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(GRID_NUM_WIDTH):</span><br><span class="line">        pygame.draw.line(screen, LINE_COLOR,</span><br><span class="line">                         (i * GRID_WIDTH, <span class="number">0</span>), (i * GRID_WIDTH, HEIGHT))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(GRID_NUM_HEIGHT):</span><br><span class="line">        pygame.draw.line(screen, LINE_COLOR,</span><br><span class="line">                         (<span class="number">0</span>, i * GRID_WIDTH), (WIDTH, i * GRID_WIDTH))</span><br><span class="line"></span><br><span class="line">    pygame.draw.line(screen, WHITE,</span><br><span class="line">                     (GRID_WIDTH * GRID_NUM_WIDTH, <span class="number">0</span>),</span><br><span class="line">                     (GRID_WIDTH * GRID_NUM_WIDTH, GRID_WIDTH * GRID_NUM_HEIGHT))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_matrix</span>():</span><br><span class="line">    <span class="keyword">for</span> i, row <span class="keyword">in</span> <span class="built_in">zip</span>(<span class="built_in">range</span>(GRID_NUM_HEIGHT), screen_color_matrix):</span><br><span class="line">        <span class="keyword">for</span> j, color <span class="keyword">in</span> <span class="built_in">zip</span>(<span class="built_in">range</span>(GRID_NUM_WIDTH), row):</span><br><span class="line">            <span class="keyword">if</span> color <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                pygame.draw.rect(screen, color,</span><br><span class="line">                                 (j * GRID_WIDTH, i * GRID_WIDTH,</span><br><span class="line">                                  GRID_WIDTH, GRID_WIDTH))</span><br><span class="line">                pygame.draw.rect(screen, WHITE,</span><br><span class="line">                                 (j * GRID_WIDTH, i * GRID_WIDTH,</span><br><span class="line">                                  GRID_WIDTH, GRID_WIDTH), <span class="number">2</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_score</span>():</span><br><span class="line">    show_text(screen, <span class="string">u&#x27;å¾—åˆ†ï¼š&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(score), <span class="number">20</span>, WIDTH + SIDE_WIDTH // <span class="number">2</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">remove_full_line</span>():</span><br><span class="line">    <span class="keyword">global</span> screen_color_matrix</span><br><span class="line">    <span class="keyword">global</span> score</span><br><span class="line">    <span class="keyword">global</span> level</span><br><span class="line">    new_matrix = [[<span class="literal">None</span>] * GRID_NUM_WIDTH <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(GRID_NUM_HEIGHT)]</span><br><span class="line">    index = GRID_NUM_HEIGHT - <span class="number">1</span></span><br><span class="line">    n_full_line = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(GRID_NUM_HEIGHT - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        is_full = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(GRID_NUM_WIDTH):</span><br><span class="line">            <span class="keyword">if</span> screen_color_matrix[i][j] <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                is_full = <span class="literal">False</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> is_full:</span><br><span class="line">            new_matrix[index] = screen_color_matrix[i]</span><br><span class="line">            index -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            n_full_line += <span class="number">1</span></span><br><span class="line">    score += n_full_line</span><br><span class="line">    level = score // <span class="number">20</span> + <span class="number">1</span></span><br><span class="line">    screen_color_matrix = new_matrix</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_welcome</span>(<span class="params">screen</span>):</span><br><span class="line">    show_text(screen, <span class="string">u&#x27;ä¿„ç½—æ–¯æ–¹å—&#x27;</span>, <span class="number">30</span>, WIDTH / <span class="number">2</span>, HEIGHT / <span class="number">2</span>)</span><br><span class="line">    show_text(screen, <span class="string">u&#x27;æŒ‰ä»»æ„é”®å¼€å§‹æ¸¸æˆ&#x27;</span>, <span class="number">20</span>, WIDTH / <span class="number">2</span>, HEIGHT / <span class="number">2</span> + <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">running = <span class="literal">True</span></span><br><span class="line">gameover = <span class="literal">True</span></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line">live_cube = <span class="literal">None</span></span><br><span class="line"><span class="keyword">while</span> running:</span><br><span class="line">    clock.tick(FPS)</span><br><span class="line">    <span class="keyword">for</span> event <span class="keyword">in</span> pygame.event.get():</span><br><span class="line">        <span class="keyword">if</span> event.<span class="built_in">type</span> == pygame.QUIT:</span><br><span class="line">            running = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">elif</span> event.<span class="built_in">type</span> == pygame.KEYDOWN:</span><br><span class="line">            <span class="keyword">if</span> gameover:</span><br><span class="line">                gameover = <span class="literal">False</span></span><br><span class="line">                live_cube = CubeShape()</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">if</span> event.key == pygame.K_LEFT:</span><br><span class="line">                live_cube.left()</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_RIGHT:</span><br><span class="line">                live_cube.right()</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_DOWN:</span><br><span class="line">                live_cube.down()</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_UP:</span><br><span class="line">                live_cube.rotate()</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_SPACE:</span><br><span class="line">                <span class="keyword">while</span> live_cube.down() == <span class="literal">True</span>:</span><br><span class="line">                    <span class="keyword">pass</span></span><br><span class="line">            remove_full_line()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> gameover <span class="keyword">is</span> <span class="literal">False</span> <span class="keyword">and</span> counter % (FPS // level) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">if</span> live_cube.down() == <span class="literal">False</span>:</span><br><span class="line">            <span class="keyword">for</span> cube <span class="keyword">in</span> live_cube.get_all_gridpos():</span><br><span class="line">                screen_color_matrix[cube[<span class="number">0</span>]][cube[<span class="number">1</span>]] = live_cube.color</span><br><span class="line">            live_cube = CubeShape()</span><br><span class="line">            <span class="keyword">if</span> live_cube.conflict(live_cube.center):</span><br><span class="line">                gameover = <span class="literal">True</span></span><br><span class="line">                score = <span class="number">0</span></span><br><span class="line">                live_cube = <span class="literal">None</span></span><br><span class="line">                screen_color_matrix = [[<span class="literal">None</span>] * GRID_NUM_WIDTH <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(GRID_NUM_HEIGHT)]</span><br><span class="line"></span><br><span class="line">        remove_full_line()</span><br><span class="line">    counter += <span class="number">1</span></span><br><span class="line">    screen.fill(BLACK)</span><br><span class="line">    draw_grids()</span><br><span class="line">    draw_matrix()</span><br><span class="line">    draw_score()</span><br><span class="line">    <span class="keyword">if</span> live_cube <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        live_cube.draw()</span><br><span class="line">    <span class="keyword">if</span> gameover:</span><br><span class="line">        show_welcome(screen)</span><br><span class="line">    pygame.display.update()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
        <category>Pythonåº”ç”¨</category>
        <category>æ¸¸æˆå¼€å‘</category>
        <category>ä¿„ç½—æ–¯æ–¹å—</category>
      </categories>
  </entry>
  <entry>
    <title>ç”¨pythonå†™ä¸€ä¸ªæ¼‚äº®çš„çƒŸèŠ±</title>
    <url>/cca71b02.html</url>
    <content><![CDATA[<p>è¿˜æœ‰å‡ ä¸ªå°æ—¶å°±2023å¹´äº†ï¼Œç”¨pythonå†™ä¸€ä¸ªçƒŸèŠ±ä»£ç ï¼Œåº†ç¥ä¸‹~</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>æ³¨æ„:ä»£ç ä¸­éœ€è¦ç”¨åˆ°å­—ä½“æ–‡ä»¶ï¼Œéœ€è¦è‡ªå·±ä¿®æ”¹å­—ä½“æ–‡ä»¶è·¯å¾„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint, uniform, choice</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line">  </span><br><span class="line">vector = pygame.math.Vector2</span><br><span class="line">gravity = vector(<span class="number">0</span>, <span class="number">0.3</span>)</span><br><span class="line">DISPLAY_WIDTH = <span class="number">800</span></span><br><span class="line">DISPLAY_HEIGHT = <span class="number">700</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">trail_colours = [(<span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>), (<span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>), (<span class="number">75</span>, <span class="number">75</span>, <span class="number">75</span>), (<span class="number">125</span>, <span class="number">125</span>, <span class="number">125</span>), (<span class="number">150</span>, <span class="number">150</span>, <span class="number">150</span>)]</span><br><span class="line">dynamic_offset = <span class="number">1</span></span><br><span class="line">static_offset = <span class="number">3</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Firework</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.colour = (randint(<span class="number">0</span>, <span class="number">255</span>), randint(<span class="number">0</span>, <span class="number">255</span>), randint(<span class="number">0</span>, <span class="number">255</span>))</span><br><span class="line">        self.colours = (</span><br><span class="line">            (randint(<span class="number">0</span>, <span class="number">255</span>), randint(<span class="number">0</span>, <span class="number">255</span>), randint(<span class="number">0</span>, <span class="number">255</span>)),</span><br><span class="line">            (randint(<span class="number">0</span>, <span class="number">255</span>), randint(<span class="number">0</span>, <span class="number">255</span>), randint(<span class="number">0</span>, <span class="number">255</span>)),</span><br><span class="line">            (randint(<span class="number">0</span>, <span class="number">255</span>), randint(<span class="number">0</span>, <span class="number">255</span>), randint(<span class="number">0</span>, <span class="number">255</span>)))</span><br><span class="line">        self.firework = Particle(randint(<span class="number">0</span>, DISPLAY_WIDTH), DISPLAY_HEIGHT, <span class="literal">True</span>,</span><br><span class="line">                                 self.colour)  <span class="comment"># Creates the firework particle</span></span><br><span class="line">        self.exploded = <span class="literal">False</span></span><br><span class="line">        self.particles = []</span><br><span class="line">        self.min_max_particles = vector(<span class="number">100</span>, <span class="number">225</span>)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update</span>(<span class="params">self, win</span>):  <span class="comment"># called every frame</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.exploded:</span><br><span class="line">            self.firework.apply_force(gravity)</span><br><span class="line">            self.firework.move()</span><br><span class="line">            <span class="keyword">for</span> tf <span class="keyword">in</span> self.firework.trails:</span><br><span class="line">                tf.show(win)</span><br><span class="line">  </span><br><span class="line">            self.show(win)</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">if</span> self.firework.vel.y &gt;= <span class="number">0</span>:</span><br><span class="line">                self.exploded = <span class="literal">True</span></span><br><span class="line">                self.explode()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">for</span> particle <span class="keyword">in</span> self.particles:</span><br><span class="line">                particle.apply_force(vector(gravity.x + uniform(-<span class="number">1</span>, <span class="number">1</span>) / <span class="number">20</span>, gravity.y / <span class="number">2</span> + (randint(<span class="number">1</span>, <span class="number">8</span>) / <span class="number">100</span>)))</span><br><span class="line">                particle.move()</span><br><span class="line">                <span class="keyword">for</span> t <span class="keyword">in</span> particle.trails:</span><br><span class="line">                    t.show(win)</span><br><span class="line">                particle.show(win)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">explode</span>(<span class="params">self</span>):</span><br><span class="line"></span><br><span class="line">        amount = randint(self.min_max_particles.x, self.min_max_particles.y)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(amount):</span><br><span class="line">            self.particles.append(Particle(self.firework.pos.x, self.firework.pos.y, <span class="literal">False</span>, self.colours))</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self, win</span>):</span><br><span class="line">        pygame.draw.circle(win, self.colour, (<span class="built_in">int</span>(self.firework.pos.x), <span class="built_in">int</span>(self.firework.pos.y)), self.firework.size)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">remove</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> self.exploded:</span><br><span class="line">            <span class="keyword">for</span> p <span class="keyword">in</span> self.particles:</span><br><span class="line">                <span class="keyword">if</span> p.remove <span class="keyword">is</span> <span class="literal">True</span>:</span><br><span class="line">                    self.particles.remove(p)</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(self.particles) == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Particle</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x, y, firework, colour</span>):</span><br><span class="line">        self.firework = firework</span><br><span class="line">        self.pos = vector(x, y)</span><br><span class="line">        self.origin = vector(x, y)</span><br><span class="line">        self.radius = <span class="number">20</span></span><br><span class="line">        self.remove = <span class="literal">False</span></span><br><span class="line">        self.explosion_radius = randint(<span class="number">5</span>, <span class="number">18</span>)</span><br><span class="line">        self.life = <span class="number">0</span></span><br><span class="line">        self.acc = vector(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="comment"># trail variables</span></span><br><span class="line">        self.trails = []  <span class="comment"># stores the particles trail objects</span></span><br><span class="line">        self.prev_posx = [-<span class="number">10</span>] * <span class="number">10</span>  <span class="comment"># stores the 10 last positions</span></span><br><span class="line">        self.prev_posy = [-<span class="number">10</span>] * <span class="number">10</span>  <span class="comment"># stores the 10 last positions</span></span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> self.firework:</span><br><span class="line">            self.vel = vector(<span class="number">0</span>, -randint(<span class="number">17</span>, <span class="number">20</span>))</span><br><span class="line">            self.size = <span class="number">5</span></span><br><span class="line">            self.colour = colour</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">                self.trails.append(Trail(i, self.size, <span class="literal">True</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.vel = vector(uniform(-<span class="number">1</span>, <span class="number">1</span>), uniform(-<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">            self.vel.x *= randint(<span class="number">7</span>, self.explosion_radius + <span class="number">2</span>)</span><br><span class="line">            self.vel.y *= randint(<span class="number">7</span>, self.explosion_radius + <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">            self.size = randint(<span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line">            self.colour = choice(colour)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">                self.trails.append(Trail(i, self.size, <span class="literal">False</span>))</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">apply_force</span>(<span class="params">self, force</span>):</span><br><span class="line">        self.acc += force</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">move</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.firework:</span><br><span class="line">            self.vel.x *= <span class="number">0.8</span></span><br><span class="line">            self.vel.y *= <span class="number">0.8</span></span><br><span class="line">        self.vel += self.acc</span><br><span class="line">        self.pos += self.vel</span><br><span class="line">        self.acc *= <span class="number">0</span></span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> self.life == <span class="number">0</span> <span class="keyword">and</span> <span class="keyword">not</span> self.firework:  <span class="comment"># check if particle is outside explosion radius</span></span><br><span class="line">            distance = math.sqrt((self.pos.x - self.origin.x) ** <span class="number">2</span> + (self.pos.y - self.origin.y) ** <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">if</span> distance &gt; self.explosion_radius:</span><br><span class="line">                self.remove = <span class="literal">True</span></span><br><span class="line">  </span><br><span class="line">        self.decay()</span><br><span class="line">  </span><br><span class="line">        self.trail_update()</span><br><span class="line">  </span><br><span class="line">        self.life += <span class="number">1</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self, win</span>):</span><br><span class="line">        pygame.draw.circle(win, (self.colour[<span class="number">0</span>], self.colour[<span class="number">1</span>], self.colour[<span class="number">2</span>], <span class="number">0</span>), (<span class="built_in">int</span>(self.pos.x), <span class="built_in">int</span>(self.pos.y)),</span><br><span class="line">                           self.size)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decay</span>(<span class="params">self</span>):  <span class="comment"># random decay of the particles</span></span><br><span class="line">        <span class="keyword">if</span> <span class="number">50</span> &gt; self.life &gt; <span class="number">10</span>:  <span class="comment"># early stage their is a small chance of decay</span></span><br><span class="line">            ran = randint(<span class="number">0</span>, <span class="number">30</span>)</span><br><span class="line">            <span class="keyword">if</span> ran == <span class="number">0</span>:</span><br><span class="line">                self.remove = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">elif</span> self.life &gt; <span class="number">50</span>:</span><br><span class="line">            ran = randint(<span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line">            <span class="keyword">if</span> ran == <span class="number">0</span>:</span><br><span class="line">                self.remove = <span class="literal">True</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">trail_update</span>(<span class="params">self</span>):</span><br><span class="line">        self.prev_posx.pop()</span><br><span class="line">        self.prev_posx.insert(<span class="number">0</span>, <span class="built_in">int</span>(self.pos.x))</span><br><span class="line">        self.prev_posy.pop()</span><br><span class="line">        self.prev_posy.insert(<span class="number">0</span>, <span class="built_in">int</span>(self.pos.y))</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">for</span> n, t <span class="keyword">in</span> <span class="built_in">enumerate</span>(self.trails):</span><br><span class="line">            <span class="keyword">if</span> t.dynamic:</span><br><span class="line">                t.get_pos(self.prev_posx[n + dynamic_offset], self.prev_posy[n + dynamic_offset])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                t.get_pos(self.prev_posx[n + static_offset], self.prev_posy[n + static_offset])</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Trail</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n, size, dynamic</span>):</span><br><span class="line">        self.pos_in_line = n</span><br><span class="line">        self.pos = vector(-<span class="number">10</span>, -<span class="number">10</span>)</span><br><span class="line">        self.dynamic = dynamic</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> self.dynamic:</span><br><span class="line">            self.colour = trail_colours[n]</span><br><span class="line">            self.size = <span class="built_in">int</span>(size - n / <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.colour = (<span class="number">255</span>, <span class="number">255</span>, <span class="number">200</span>)</span><br><span class="line">            self.size = size - <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> self.size &lt; <span class="number">0</span>:</span><br><span class="line">                self.size = <span class="number">0</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_pos</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        self.pos = vector(x, y)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self, win</span>):</span><br><span class="line">        pygame.draw.circle(win, self.colour, (<span class="built_in">int</span>(self.pos.x), <span class="built_in">int</span>(self.pos.y)), self.size)</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update</span>(<span class="params">win, fireworks</span>):</span><br><span class="line">    <span class="keyword">for</span> fw <span class="keyword">in</span> fireworks:</span><br><span class="line">        fw.update(win)</span><br><span class="line">        <span class="keyword">if</span> fw.remove():</span><br><span class="line">            fireworks.remove(fw)</span><br><span class="line">  </span><br><span class="line">    pygame.display.update()</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    pygame.init()</span><br><span class="line">    pygame.font.init()</span><br><span class="line">    pygame.display.set_caption(<span class="string">&quot;å…ƒæ—¦çƒŸèŠ±&quot;</span>) </span><br><span class="line">    background = pygame.image.load(<span class="string">&quot;img/1.png&quot;</span>)  </span><br><span class="line">    myfont = pygame.font.Font(<span class="string">&quot;img/font.ttf&quot;</span>,<span class="number">80</span>)</span><br><span class="line">    myfont1 = pygame.font.Font(<span class="string">&quot;img/font.ttf&quot;</span>, <span class="number">30</span>)</span><br><span class="line">  </span><br><span class="line">    testsurface = myfont.render(<span class="string">&quot;å…ƒæ—¦èŠ‚å¿«ä¹&quot;</span>,<span class="literal">False</span>,(<span class="number">251</span>, <span class="number">59</span>, <span class="number">85</span>))</span><br><span class="line">    <span class="comment"># pygame.image.load(&quot;&quot;)</span></span><br><span class="line">    win = pygame.display.set_mode((DISPLAY_WIDTH, DISPLAY_HEIGHT))</span><br><span class="line">    <span class="comment"># win.blit(background)</span></span><br><span class="line">    clock = pygame.time.Clock()</span><br><span class="line">  </span><br><span class="line">    fireworks = [Firework() <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)]  <span class="comment"># create the first fireworks</span></span><br><span class="line">    running = <span class="literal">True</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">while</span> running:</span><br><span class="line">        clock.tick(<span class="number">60</span>)</span><br><span class="line">        <span class="keyword">for</span> event <span class="keyword">in</span> pygame.event.get():</span><br><span class="line">            <span class="keyword">if</span> event.<span class="built_in">type</span> == pygame.QUIT:</span><br><span class="line">                running = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> event.<span class="built_in">type</span> == pygame.KEYDOWN:  <span class="comment"># Change game speed with number keys</span></span><br><span class="line">                <span class="keyword">if</span> event.key == pygame.K_1: <span class="comment"># æŒ‰ä¸‹ 1</span></span><br><span class="line">                    fireworks.append(Firework())</span><br><span class="line">                <span class="keyword">if</span> event.key == pygame.K_2: <span class="comment"># æŒ‰ä¸‹ 2 åŠ å…¥10ä¸ªçƒŸèŠ±</span></span><br><span class="line">                    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">                        fireworks.append(Firework())</span><br><span class="line">        win.fill((<span class="number">20</span>, <span class="number">20</span>, <span class="number">30</span>))  <span class="comment"># draw background</span></span><br><span class="line">        win.blit(background,(<span class="number">800</span>,<span class="number">800</span>))</span><br><span class="line">        win.blit(testsurface,(<span class="number">200</span>,<span class="number">30</span>))</span><br><span class="line">        <span class="keyword">if</span> randint(<span class="number">0</span>, <span class="number">20</span>) == <span class="number">1</span>:  <span class="comment"># create new firework</span></span><br><span class="line">            fireworks.append(Firework())</span><br><span class="line">        update(win, fireworks)</span><br><span class="line">    pygame.quit()</span><br><span class="line">    quit()</span><br><span class="line">main()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
        <category>Pythonåº”ç”¨</category>
        <category>å›¾å½¢è®¾è®¡</category>
        <category>çƒŸèŠ±æ•ˆæœ</category>
      </categories>
  </entry>
  <entry>
    <title>ç”¨pythonæ£€æµ‹å¾®ä¿¡å¥½å‹æ˜¯å¦åˆ é™¤è‡ªå·±</title>
    <url>/40902.html</url>
    <content><![CDATA[<p>æˆ‘ä»¬åœ¨å¹³æ—¶ç”Ÿæ´»ä¸­ä½¿ç”¨å¾®ä¿¡å‘ç°å¾®ä¿¡ä¸­æœ‰å¾ˆå¤šå·²ç»å°†è‡ªå·±åˆ é™¤äº†çš„å¥½å‹ï¼Œå¦‚ä½•åœ¨ä¸æ‰“æ‰°åˆ«äººçš„æƒ…å†µä¸‹çŸ¥é“å“ªäº›å¥½å‹åˆ é™¤äº†è‡ªå·±äº†ï¼Ÿä¸‹é¢æˆ‘ä»¬å°±ç”¨pythonç¨‹åºæ¥å®ç°ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<blockquote>
<p>ä½¿ç”¨è¯¥ç¨‹åºæœ‰ä¸ªå‰ææ¡ä»¶ï¼šé‚£å°±æ˜¯è‡ªå·±çš„å¾®ä¿¡èƒ½å¤Ÿç™»å½•ç½‘é¡µç‰ˆå¾®ä¿¡ï¼Œä¸ç„¶æ— æ³•ä½¿ç”¨å“¦~<br>å¼€å‘ç¯å¢ƒï¼špython2</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> urllib, urllib2</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> cookielib</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> xml.dom.minidom</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="comment"># from gevent import monkey</span></span><br><span class="line"></span><br><span class="line">DEBUG = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">MAX_GROUP_NUM = <span class="number">35</span> <span class="comment"># æ¯ç»„äººæ•°</span></span><br><span class="line"></span><br><span class="line">QRImagePath = os.getcwd() + <span class="string">&#x27;/qrcode.jpg&#x27;</span></span><br><span class="line"></span><br><span class="line">tip = <span class="number">0</span></span><br><span class="line">uuid = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">base_uri = <span class="string">&#x27;&#x27;</span></span><br><span class="line">redirect_uri = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">skey = <span class="string">&#x27;&#x27;</span></span><br><span class="line">wxsid = <span class="string">&#x27;&#x27;</span></span><br><span class="line">wxuin = <span class="string">&#x27;&#x27;</span></span><br><span class="line">pass_ticket = <span class="string">&#x27;&#x27;</span></span><br><span class="line">deviceId = <span class="string">&#x27;e000000000000000&#x27;</span></span><br><span class="line"></span><br><span class="line">BaseRequest = &#123;&#125;</span><br><span class="line"></span><br><span class="line">ContactList = []</span><br><span class="line">My = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getUUID</span>():</span><br><span class="line">  <span class="keyword">global</span> uuid</span><br><span class="line"></span><br><span class="line">  url = <span class="string">&#x27;https://login.weixin.qq.com/jslogin&#x27;</span></span><br><span class="line">  params = &#123;</span><br><span class="line">    <span class="string">&#x27;appid&#x27;</span>: <span class="string">&#x27;wx782c26e4c19acffb&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;fun&#x27;</span>: <span class="string">&#x27;new&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;lang&#x27;</span>: <span class="string">&#x27;zh_CN&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_&#x27;</span>: <span class="built_in">int</span>(time.time()),</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  request = urllib2.Request(url = url, data = urllib.urlencode(params))</span><br><span class="line">  response = urllib2.urlopen(request)</span><br><span class="line">  data = response.read()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># print data</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># window.QRLogin.code = 200; window.QRLogin.uuid = &quot;oZwt_bFfRg==&quot;;</span></span><br><span class="line">  regx = <span class="string">r&#x27;window.QRLogin.code = (\d+); window.QRLogin.uuid = &quot;(\S+?)&quot;&#x27;</span></span><br><span class="line">  pm = re.search(regx, data)</span><br><span class="line"></span><br><span class="line">  code = pm.group(<span class="number">1</span>)</span><br><span class="line">  uuid = pm.group(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> code == <span class="string">&#x27;200&#x27;</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">showQRImage</span>():</span><br><span class="line">  <span class="keyword">global</span> tip</span><br><span class="line"></span><br><span class="line">  url = <span class="string">&#x27;https://login.weixin.qq.com/qrcode/&#x27;</span> + uuid</span><br><span class="line">  params = &#123;</span><br><span class="line">    <span class="string">&#x27;t&#x27;</span>: <span class="string">&#x27;webwx&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_&#x27;</span>: <span class="built_in">int</span>(time.time()),</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  request = urllib2.Request(url = url, data = urllib.urlencode(params))</span><br><span class="line">  response = urllib2.urlopen(request)</span><br><span class="line"></span><br><span class="line">  tip = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  f = <span class="built_in">open</span>(QRImagePath, <span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">  f.write(response.read())</span><br><span class="line">  f.close()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> sys.platform.find(<span class="string">&#x27;darwin&#x27;</span>) &gt;= <span class="number">0</span>:</span><br><span class="line">    os.system(<span class="string">&#x27;open %s&#x27;</span> % QRImagePath)</span><br><span class="line">  <span class="keyword">elif</span> sys.platform.find(<span class="string">&#x27;linux&#x27;</span>) &gt;= <span class="number">0</span>:</span><br><span class="line">    os.system(<span class="string">&#x27;xdg-open %s&#x27;</span> % QRImagePath)</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    os.system(<span class="string">&#x27;call %s&#x27;</span> % QRImagePath)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span> <span class="string">&#x27;è¯·ä½¿ç”¨å¾®ä¿¡æ‰«æäºŒç»´ç ä»¥ç™»å½•&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">waitForLogin</span>():</span><br><span class="line">  <span class="keyword">global</span> tip, base_uri, redirect_uri</span><br><span class="line"></span><br><span class="line">  url = <span class="string">&#x27;https://login.weixin.qq.com/cgi-bin/mmwebwx-bin/login?tip=%s&amp;uuid=%s&amp;_=%s&#x27;</span> % (tip, uuid, <span class="built_in">int</span>(time.time()))</span><br><span class="line"></span><br><span class="line">  request = urllib2.Request(url = url)</span><br><span class="line">  response = urllib2.urlopen(request)</span><br><span class="line">  data = response.read()</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># print data</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># window.code=500;</span></span><br><span class="line">  regx = <span class="string">r&#x27;window.code=(\d+);&#x27;</span></span><br><span class="line">  pm = re.search(regx, data)</span><br><span class="line"></span><br><span class="line">  code = pm.group(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> code == <span class="string">&#x27;201&#x27;</span>: <span class="comment">#å·²æ‰«æ</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;æˆåŠŸæ‰«æ,è¯·åœ¨æ‰‹æœºä¸Šç‚¹å‡»ç¡®è®¤ä»¥ç™»å½•&#x27;</span></span><br><span class="line">    tip = <span class="number">0</span></span><br><span class="line">  <span class="keyword">elif</span> code == <span class="string">&#x27;200&#x27;</span>: <span class="comment">#å·²ç™»å½•</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;æ­£åœ¨ç™»å½•...&#x27;</span></span><br><span class="line">    regx = <span class="string">r&#x27;window.redirect_uri=&quot;(\S+?)&quot;;&#x27;</span></span><br><span class="line">    pm = re.search(regx, data)</span><br><span class="line">    redirect_uri = pm.group(<span class="number">1</span>) + <span class="string">&#x27;&amp;fun=new&#x27;</span></span><br><span class="line">    base_uri = redirect_uri[:redirect_uri.rfind(<span class="string">&#x27;/&#x27;</span>)]</span><br><span class="line">  <span class="keyword">elif</span> code == <span class="string">&#x27;408&#x27;</span>: <span class="comment">#è¶…æ—¶</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">  <span class="comment"># elif code == &#x27;400&#x27; or code == &#x27;500&#x27;:</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> code</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">  <span class="keyword">global</span> skey, wxsid, wxuin, pass_ticket, BaseRequest</span><br><span class="line"></span><br><span class="line">  request = urllib2.Request(url = redirect_uri)</span><br><span class="line">  response = urllib2.urlopen(request)</span><br><span class="line">  data = response.read()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># print data</span></span><br><span class="line"></span><br><span class="line">  <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    &lt;error&gt;</span></span><br><span class="line"><span class="string">      &lt;ret&gt;0&lt;/ret&gt;</span></span><br><span class="line"><span class="string">      &lt;message&gt;OK&lt;/message&gt;</span></span><br><span class="line"><span class="string">      &lt;skey&gt;xxx&lt;/skey&gt;</span></span><br><span class="line"><span class="string">      &lt;wxsid&gt;xxx&lt;/wxsid&gt;</span></span><br><span class="line"><span class="string">      &lt;wxuin&gt;xxx&lt;/wxuin&gt;</span></span><br><span class="line"><span class="string">      &lt;pass_ticket&gt;xxx&lt;/pass_ticket&gt;</span></span><br><span class="line"><span class="string">      &lt;isgrayscale&gt;1&lt;/isgrayscale&gt;</span></span><br><span class="line"><span class="string">    &lt;/error&gt;</span></span><br><span class="line"><span class="string">  &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">  doc = xml.dom.minidom.parseString(data)</span><br><span class="line">  root = doc.documentElement</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> node <span class="keyword">in</span> root.childNodes:</span><br><span class="line">    <span class="keyword">if</span> node.nodeName == <span class="string">&#x27;skey&#x27;</span>:</span><br><span class="line">      skey = node.childNodes[<span class="number">0</span>].data</span><br><span class="line">    <span class="keyword">elif</span> node.nodeName == <span class="string">&#x27;wxsid&#x27;</span>:</span><br><span class="line">      wxsid = node.childNodes[<span class="number">0</span>].data</span><br><span class="line">    <span class="keyword">elif</span> node.nodeName == <span class="string">&#x27;wxuin&#x27;</span>:</span><br><span class="line">      wxuin = node.childNodes[<span class="number">0</span>].data</span><br><span class="line">    <span class="keyword">elif</span> node.nodeName == <span class="string">&#x27;pass_ticket&#x27;</span>:</span><br><span class="line">      pass_ticket = node.childNodes[<span class="number">0</span>].data</span><br><span class="line"></span><br><span class="line">  <span class="comment"># print &#x27;skey: %s, wxsid: %s, wxuin: %s, pass_ticket: %s&#x27; % (skey, wxsid, wxuin, pass_ticket)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> skey == <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> wxsid == <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> wxuin == <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> pass_ticket == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">  BaseRequest = &#123;</span><br><span class="line">    <span class="string">&#x27;Uin&#x27;</span>: <span class="built_in">int</span>(wxuin),</span><br><span class="line">    <span class="string">&#x27;Sid&#x27;</span>: wxsid,</span><br><span class="line">    <span class="string">&#x27;Skey&#x27;</span>: skey,</span><br><span class="line">    <span class="string">&#x27;DeviceID&#x27;</span>: deviceId,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">webwxinit</span>():</span><br><span class="line"></span><br><span class="line">  url = base_uri + <span class="string">&#x27;/webwxinit?pass_ticket=%s&amp;skey=%s&amp;r=%s&#x27;</span> % (pass_ticket, skey, <span class="built_in">int</span>(time.time()))</span><br><span class="line">  params = &#123;</span><br><span class="line">    <span class="string">&#x27;BaseRequest&#x27;</span>: BaseRequest</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  request = urllib2.Request(url = url, data = json.dumps(params))</span><br><span class="line">  request.add_header(<span class="string">&#x27;ContentType&#x27;</span>, <span class="string">&#x27;application/json; charset=UTF-8&#x27;</span>)</span><br><span class="line">  response = urllib2.urlopen(request)</span><br><span class="line">  data = response.read()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> DEBUG == <span class="literal">True</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(os.getcwd() + <span class="string">&#x27;/webwxinit.json&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">    f.write(data)</span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># print data</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">global</span> ContactList, My</span><br><span class="line">  dic = json.loads(data)</span><br><span class="line">  ContactList = dic[<span class="string">&#x27;ContactList&#x27;</span>]</span><br><span class="line">  My = dic[<span class="string">&#x27;User&#x27;</span>]</span><br><span class="line"></span><br><span class="line">  ErrMsg = dic[<span class="string">&#x27;BaseResponse&#x27;</span>][<span class="string">&#x27;ErrMsg&#x27;</span>]</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(ErrMsg) &gt; <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span> ErrMsg</span><br><span class="line"></span><br><span class="line">  Ret = dic[<span class="string">&#x27;BaseResponse&#x27;</span>][<span class="string">&#x27;Ret&#x27;</span>]</span><br><span class="line">  <span class="keyword">if</span> Ret != <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">webwxgetcontact</span>():</span><br><span class="line">  </span><br><span class="line">  url = base_uri + <span class="string">&#x27;/webwxgetcontact?pass_ticket=%s&amp;skey=%s&amp;r=%s&#x27;</span> % (pass_ticket, skey, <span class="built_in">int</span>(time.time()))</span><br><span class="line"></span><br><span class="line">  request = urllib2.Request(url = url)</span><br><span class="line">  request.add_header(<span class="string">&#x27;ContentType&#x27;</span>, <span class="string">&#x27;application/json; charset=UTF-8&#x27;</span>)</span><br><span class="line">  response = urllib2.urlopen(request)</span><br><span class="line">  data = response.read()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> DEBUG == <span class="literal">True</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(os.getcwd() + <span class="string">&#x27;/webwxgetcontact.json&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">    f.write(data)</span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># print data</span></span><br><span class="line"></span><br><span class="line">  dic = json.loads(data)</span><br><span class="line">  MemberList = dic[<span class="string">&#x27;MemberList&#x27;</span>]</span><br><span class="line"></span><br><span class="line">  <span class="comment"># å€’åºéå†,ä¸ç„¶åˆ é™¤çš„æ—¶å€™å‡ºé—®é¢˜..</span></span><br><span class="line">  SpecialUsers = [<span class="string">&#x27;newsapp&#x27;</span>, <span class="string">&#x27;fmessage&#x27;</span>, <span class="string">&#x27;filehelper&#x27;</span>, <span class="string">&#x27;weibo&#x27;</span>, <span class="string">&#x27;qqmail&#x27;</span>, <span class="string">&#x27;fmessage&#x27;</span>, <span class="string">&#x27;tmessage&#x27;</span>, <span class="string">&#x27;qmessage&#x27;</span>, <span class="string">&#x27;qqsync&#x27;</span>, <span class="string">&#x27;floatbottle&#x27;</span>, <span class="string">&#x27;lbsapp&#x27;</span>, <span class="string">&#x27;shakeapp&#x27;</span>, <span class="string">&#x27;medianote&#x27;</span>, <span class="string">&#x27;qqfriend&#x27;</span>, <span class="string">&#x27;readerapp&#x27;</span>, <span class="string">&#x27;blogapp&#x27;</span>, <span class="string">&#x27;facebookapp&#x27;</span>, <span class="string">&#x27;masssendapp&#x27;</span>, <span class="string">&#x27;meishiapp&#x27;</span>, <span class="string">&#x27;feedsapp&#x27;</span>, <span class="string">&#x27;voip&#x27;</span>, <span class="string">&#x27;blogappweixin&#x27;</span>, <span class="string">&#x27;weixin&#x27;</span>, <span class="string">&#x27;brandsessionholder&#x27;</span>, <span class="string">&#x27;weixinreminder&#x27;</span>, <span class="string">&#x27;wxid_novlwrv3lqwv11&#x27;</span>, <span class="string">&#x27;gh_22b87fa7cb3c&#x27;</span>, <span class="string">&#x27;officialaccounts&#x27;</span>, <span class="string">&#x27;notification_messages&#x27;</span>, <span class="string">&#x27;wxid_novlwrv3lqwv11&#x27;</span>, <span class="string">&#x27;gh_22b87fa7cb3c&#x27;</span>, <span class="string">&#x27;wxitil&#x27;</span>, <span class="string">&#x27;userexperience_alarm&#x27;</span>, <span class="string">&#x27;notification_messages&#x27;</span>]</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="built_in">len</span>(MemberList) - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">    Member = MemberList[i]</span><br><span class="line">    <span class="keyword">if</span> Member[<span class="string">&#x27;VerifyFlag&#x27;</span>] &amp; <span class="number">8</span> != <span class="number">0</span>: <span class="comment"># å…¬ä¼—å·/æœåŠ¡å·</span></span><br><span class="line">      MemberList.remove(Member)</span><br><span class="line">    <span class="keyword">elif</span> Member[<span class="string">&#x27;UserName&#x27;</span>] <span class="keyword">in</span> SpecialUsers: <span class="comment"># ç‰¹æ®Šè´¦å·</span></span><br><span class="line">      MemberList.remove(Member)</span><br><span class="line">    <span class="keyword">elif</span> Member[<span class="string">&#x27;UserName&#x27;</span>].find(<span class="string">&#x27;@@&#x27;</span>) != -<span class="number">1</span>: <span class="comment"># ç¾¤èŠ</span></span><br><span class="line">      MemberList.remove(Member)</span><br><span class="line">    <span class="keyword">elif</span> Member[<span class="string">&#x27;UserName&#x27;</span>] == My[<span class="string">&#x27;UserName&#x27;</span>]: <span class="comment"># è‡ªå·±</span></span><br><span class="line">      MemberList.remove(Member)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> MemberList</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">createChatroom</span>(<span class="params">UserNames</span>):</span><br><span class="line">  MemberList = []</span><br><span class="line">  <span class="keyword">for</span> UserName <span class="keyword">in</span> UserNames:</span><br><span class="line">    MemberList.append(&#123;<span class="string">&#x27;UserName&#x27;</span>: UserName&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  url = base_uri + <span class="string">&#x27;/webwxcreatechatroom?pass_ticket=%s&amp;r=%s&#x27;</span> % (pass_ticket, <span class="built_in">int</span>(time.time()))</span><br><span class="line">  params = &#123;</span><br><span class="line">    <span class="string">&#x27;BaseRequest&#x27;</span>: BaseRequest,</span><br><span class="line">    <span class="string">&#x27;MemberCount&#x27;</span>: <span class="built_in">len</span>(MemberList),</span><br><span class="line">    <span class="string">&#x27;MemberList&#x27;</span>: MemberList,</span><br><span class="line">    <span class="string">&#x27;Topic&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  request = urllib2.Request(url = url, data = json.dumps(params))</span><br><span class="line">  request.add_header(<span class="string">&#x27;ContentType&#x27;</span>, <span class="string">&#x27;application/json; charset=UTF-8&#x27;</span>)</span><br><span class="line">  response = urllib2.urlopen(request)</span><br><span class="line">  data = response.read()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># print data</span></span><br><span class="line"></span><br><span class="line">  dic = json.loads(data)</span><br><span class="line">  ChatRoomName = dic[<span class="string">&#x27;ChatRoomName&#x27;</span>]</span><br><span class="line">  MemberList = dic[<span class="string">&#x27;MemberList&#x27;</span>]</span><br><span class="line">  DeletedList = []</span><br><span class="line">  <span class="keyword">for</span> Member <span class="keyword">in</span> MemberList:</span><br><span class="line">    <span class="keyword">if</span> Member[<span class="string">&#x27;MemberStatus&#x27;</span>] == <span class="number">4</span>: <span class="comment">#è¢«å¯¹æ–¹åˆ é™¤äº†</span></span><br><span class="line">      DeletedList.append(Member[<span class="string">&#x27;UserName&#x27;</span>])</span><br><span class="line"></span><br><span class="line">  ErrMsg = dic[<span class="string">&#x27;BaseResponse&#x27;</span>][<span class="string">&#x27;ErrMsg&#x27;</span>]</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(ErrMsg) &gt; <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span> ErrMsg</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (ChatRoomName, DeletedList)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">deleteMember</span>(<span class="params">ChatRoomName, UserNames</span>):</span><br><span class="line">  url = base_uri + <span class="string">&#x27;/webwxupdatechatroom?fun=delmember&amp;pass_ticket=%s&#x27;</span> % (pass_ticket)</span><br><span class="line">  params = &#123;</span><br><span class="line">    <span class="string">&#x27;BaseRequest&#x27;</span>: BaseRequest,</span><br><span class="line">    <span class="string">&#x27;ChatRoomName&#x27;</span>: ChatRoomName,</span><br><span class="line">    <span class="string">&#x27;DelMemberList&#x27;</span>: <span class="string">&#x27;,&#x27;</span>.join(UserNames),</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  request = urllib2.Request(url = url, data = json.dumps(params))</span><br><span class="line">  request.add_header(<span class="string">&#x27;ContentType&#x27;</span>, <span class="string">&#x27;application/json; charset=UTF-8&#x27;</span>)</span><br><span class="line">  response = urllib2.urlopen(request)</span><br><span class="line">  data = response.read()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># print data</span></span><br><span class="line"></span><br><span class="line">  dic = json.loads(data)</span><br><span class="line">  ErrMsg = dic[<span class="string">&#x27;BaseResponse&#x27;</span>][<span class="string">&#x27;ErrMsg&#x27;</span>]</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(ErrMsg) &gt; <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span> ErrMsg</span><br><span class="line"></span><br><span class="line">  Ret = dic[<span class="string">&#x27;BaseResponse&#x27;</span>][<span class="string">&#x27;Ret&#x27;</span>]</span><br><span class="line">  <span class="keyword">if</span> Ret != <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addMember</span>(<span class="params">ChatRoomName, UserNames</span>):</span><br><span class="line">  url = base_uri + <span class="string">&#x27;/webwxupdatechatroom?fun=addmember&amp;pass_ticket=%s&#x27;</span> % (pass_ticket)</span><br><span class="line">  params = &#123;</span><br><span class="line">    <span class="string">&#x27;BaseRequest&#x27;</span>: BaseRequest,</span><br><span class="line">    <span class="string">&#x27;ChatRoomName&#x27;</span>: ChatRoomName,</span><br><span class="line">    <span class="string">&#x27;AddMemberList&#x27;</span>: <span class="string">&#x27;,&#x27;</span>.join(UserNames),</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  request = urllib2.Request(url = url, data = json.dumps(params))</span><br><span class="line">  request.add_header(<span class="string">&#x27;ContentType&#x27;</span>, <span class="string">&#x27;application/json; charset=UTF-8&#x27;</span>)</span><br><span class="line">  response = urllib2.urlopen(request)</span><br><span class="line">  data = response.read()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># print data</span></span><br><span class="line"></span><br><span class="line">  dic = json.loads(data)</span><br><span class="line">  MemberList = dic[<span class="string">&#x27;MemberList&#x27;</span>]</span><br><span class="line">  DeletedList = []</span><br><span class="line">  <span class="keyword">for</span> Member <span class="keyword">in</span> MemberList:</span><br><span class="line">    <span class="keyword">if</span> Member[<span class="string">&#x27;MemberStatus&#x27;</span>] == <span class="number">4</span>: <span class="comment">#è¢«å¯¹æ–¹åˆ é™¤äº†</span></span><br><span class="line">      DeletedList.append(Member[<span class="string">&#x27;UserName&#x27;</span>])</span><br><span class="line"></span><br><span class="line">  ErrMsg = dic[<span class="string">&#x27;BaseResponse&#x27;</span>][<span class="string">&#x27;ErrMsg&#x27;</span>]</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(ErrMsg) &gt; <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span> ErrMsg</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> DeletedList</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"></span><br><span class="line">  opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookielib.CookieJar()))</span><br><span class="line">  urllib2.install_opener(opener)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> getUUID() == <span class="literal">False</span>:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;è·å–uuidå¤±è´¥&#x27;</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  showQRImage()</span><br><span class="line">  time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> waitForLogin() != <span class="string">&#x27;200&#x27;</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">  os.remove(QRImagePath)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> login() == <span class="literal">False</span>:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;ç™»å½•å¤±è´¥&#x27;</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> webwxinit() == <span class="literal">False</span>:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;åˆå§‹åŒ–å¤±è´¥&#x27;</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  MemberList = webwxgetcontact()</span><br><span class="line"></span><br><span class="line">  MemberCount = <span class="built_in">len</span>(MemberList)</span><br><span class="line">  <span class="built_in">print</span> <span class="string">&#x27;é€šè®¯å½•å…±%sä½å¥½å‹&#x27;</span> % MemberCount</span><br><span class="line"></span><br><span class="line">  ChatRoomName = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  result = []</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">0</span>, <span class="built_in">int</span>(math.ceil(MemberCount / <span class="built_in">float</span>(MAX_GROUP_NUM)))):</span><br><span class="line">    UserNames = []</span><br><span class="line">    NickNames = []</span><br><span class="line">    DeletedList = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> xrange(<span class="number">0</span>, MAX_GROUP_NUM):</span><br><span class="line">      <span class="keyword">if</span> i * MAX_GROUP_NUM + j &gt;= MemberCount:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">      Member = MemberList[i * MAX_GROUP_NUM + j]</span><br><span class="line">      UserNames.append(Member[<span class="string">&#x27;UserName&#x27;</span>])</span><br><span class="line">      NickNames.append(Member[<span class="string">&#x27;NickName&#x27;</span>].encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">            </span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;ç¬¬%sç»„...&#x27;</span> % (i + <span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;, &#x27;</span>.join(NickNames)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;å›è½¦é”®ç»§ç»­...&#x27;</span></span><br><span class="line">    raw_input()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ–°å»ºç¾¤ç»„/æ·»åŠ æˆå‘˜</span></span><br><span class="line">    <span class="keyword">if</span> ChatRoomName == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">      (ChatRoomName, DeletedList) = createChatroom(UserNames)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      DeletedList = addMember(ChatRoomName, UserNames)</span><br><span class="line"></span><br><span class="line">    DeletedCount = <span class="built_in">len</span>(DeletedList)</span><br><span class="line">    <span class="keyword">if</span> DeletedCount &gt; <span class="number">0</span>:</span><br><span class="line">      result += DeletedList</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;æ‰¾åˆ°%sä¸ªè¢«åˆ å¥½å‹&#x27;</span> % DeletedCount</span><br><span class="line">    <span class="comment"># raw_input()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ é™¤æˆå‘˜</span></span><br><span class="line">    deleteMember(ChatRoomName, UserNames)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># todo åˆ é™¤ç¾¤ç»„</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  resultNames = []</span><br><span class="line">  <span class="keyword">for</span> Member <span class="keyword">in</span> MemberList:</span><br><span class="line">    <span class="keyword">if</span> Member[<span class="string">&#x27;UserName&#x27;</span>] <span class="keyword">in</span> result:</span><br><span class="line">      NickName = Member[<span class="string">&#x27;NickName&#x27;</span>]</span><br><span class="line">      <span class="keyword">if</span> Member[<span class="string">&#x27;RemarkName&#x27;</span>] != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        NickName += <span class="string">&#x27;(%s)&#x27;</span> % Member[<span class="string">&#x27;RemarkName&#x27;</span>]</span><br><span class="line">      resultNames.append(NickName.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span> <span class="string">&#x27;---------- è¢«åˆ é™¤çš„å¥½å‹åˆ—è¡¨ ----------&#x27;</span></span><br><span class="line">  <span class="built_in">print</span> <span class="string">&#x27;\n&#x27;</span>.join(resultNames)</span><br><span class="line">  <span class="built_in">print</span> <span class="string">&#x27;-----------------------------------&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># windowsä¸‹ç¼–ç é—®é¢˜ä¿®å¤</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UnicodeStreamFilter</span>: </span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, target</span>): </span><br><span class="line">    self.target = target </span><br><span class="line">    self.encoding = <span class="string">&#x27;utf-8&#x27;</span> </span><br><span class="line">    self.errors = <span class="string">&#x27;replace&#x27;</span> </span><br><span class="line">    self.encode_to = self.target.encoding </span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">write</span>(<span class="params">self, s</span>): </span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>(s) == <span class="built_in">str</span>: </span><br><span class="line">      s = s.decode(<span class="string">&#x27;utf-8&#x27;</span>) </span><br><span class="line">    s = s.encode(self.encode_to, self.errors).decode(self.encode_to) </span><br><span class="line">    self.target.write(s) </span><br><span class="line">     </span><br><span class="line"><span class="keyword">if</span> sys.stdout.encoding == <span class="string">&#x27;cp936&#x27;</span>: </span><br><span class="line">  sys.stdout = UnicodeStreamFilter(sys.stdout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span> :</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span> <span class="string">&#x27;æœ¬ç¨‹åºçš„æŸ¥è¯¢ç»“æœå¯èƒ½ä¼šå¼•èµ·ä¸€äº›å¿ƒç†ä¸Šçš„ä¸é€‚,è¯·å°å¿ƒä½¿ç”¨...&#x27;</span></span><br><span class="line">  <span class="built_in">print</span> <span class="string">&#x27;å›è½¦é”®ç»§ç»­...&#x27;</span></span><br><span class="line">  raw_input()</span><br><span class="line">  <span class="comment"># monkey.patch_all()</span></span><br><span class="line">  main()</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span> <span class="string">&#x27;å›è½¦é”®ç»“æŸ&#x27;</span></span><br><span class="line">  raw_input()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
        <category>Pythonåº”ç”¨</category>
        <category>å¾®ä¿¡</category>
        <category>æ•°æ®æŠ“å–</category>
      </categories>
  </entry>
  <entry>
    <title>ç”¨pythonç”»ä¸€åªå¸ƒæœ—ç†Š</title>
    <url>/37340.html</url>
    <content><![CDATA[<p>æ— æ„é—´åœ¨æŠ–éŸ³å‘äº†ä¸€ä¸ªç”¨pythonç”»å¸ƒæœ—ç†Šçš„è§†é¢‘ï¼Œæ²¡æƒ³åˆ°æƒ³è¦ä»£ç çš„äººè¿˜æŒºå¤šï¼Œç°åœ¨å°±æŠŠä»£ç å‘å¸ƒåœ¨è¿™é‡Œï¼Œéœ€è¦çš„æœ‹å‹è‡ªå–ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<blockquote>
<p>ç‰¹åˆ«æ³¨æ„ï¼špythonç‰ˆæœ¬è¿‡é«˜å¯èƒ½æŠ¥turtleç‰ˆæœ¬ä½çš„é”™è¯¯ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> turtle <span class="keyword">import</span> *</span><br><span class="line">ht()</span><br><span class="line">setup(<span class="number">400</span>,<span class="number">800</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">seth(<span class="number">0</span>)</span><br><span class="line">pensize(<span class="number">3</span>)</span><br><span class="line">pencolor(<span class="string">&quot;black&quot;</span>)</span><br><span class="line">pu()  <span class="comment">#penup()</span></span><br><span class="line">goto(<span class="number">0</span>,<span class="number">100</span>)</span><br><span class="line">pd()  <span class="comment">#pendown()</span></span><br><span class="line">fillcolor(<span class="string">&quot;brown&quot;</span>)</span><br><span class="line">begin_fill()</span><br><span class="line">circle(<span class="number">100</span>)</span><br><span class="line">end_fill()</span><br><span class="line">pu()</span><br><span class="line">goto(<span class="number">0</span>,<span class="number">150</span>)</span><br><span class="line">pd()</span><br><span class="line">fillcolor(<span class="string">&quot;white&quot;</span>)</span><br><span class="line">begin_fill()</span><br><span class="line">pencolor(<span class="string">&quot;white&quot;</span>)</span><br><span class="line">circle(<span class="number">30</span>)</span><br><span class="line">end_fill()</span><br><span class="line">pencolor(<span class="string">&quot;black&quot;</span>)</span><br><span class="line">pu()</span><br><span class="line">goto(<span class="number">0</span>,<span class="number">179</span>)</span><br><span class="line">lt(<span class="number">45</span>)</span><br><span class="line">fd(<span class="number">35</span>)</span><br><span class="line">rt(<span class="number">45</span>)</span><br><span class="line">pd()</span><br><span class="line">fillcolor(<span class="string">&quot;black&quot;</span>)</span><br><span class="line">begin_fill()</span><br><span class="line">circle(<span class="number">10</span>)</span><br><span class="line">end_fill()</span><br><span class="line">pu()</span><br><span class="line">goto(<span class="number">0</span>,<span class="number">179</span>)</span><br><span class="line">lt(<span class="number">135</span>)</span><br><span class="line">fd(<span class="number">35</span>)</span><br><span class="line">rt(<span class="number">135</span>)</span><br><span class="line">pd()</span><br><span class="line">fillcolor(<span class="string">&quot;black&quot;</span>)</span><br><span class="line">begin_fill()</span><br><span class="line">circle(<span class="number">10</span>)</span><br><span class="line">end_fill()</span><br><span class="line">pu()</span><br><span class="line">goto(<span class="number">0</span>,<span class="number">180</span>)</span><br><span class="line">pd()</span><br><span class="line">fillcolor(<span class="string">&quot;black&quot;</span>)</span><br><span class="line">begin_fill()</span><br><span class="line">circle(<span class="number">6</span>)</span><br><span class="line">end_fill()</span><br><span class="line">goto(-<span class="number">3</span>,<span class="number">180</span>)</span><br><span class="line">seth(-<span class="number">135</span>)</span><br><span class="line">pensize(<span class="number">5</span>)</span><br><span class="line">fd(<span class="number">12</span>)</span><br><span class="line">pu()</span><br><span class="line">goto(<span class="number">3</span>,<span class="number">180</span>)</span><br><span class="line">pd()</span><br><span class="line">seth(-<span class="number">45</span>)</span><br><span class="line">pensize(<span class="number">5</span>)</span><br><span class="line">fd(<span class="number">12</span>)</span><br><span class="line">pensize(<span class="number">3</span>)</span><br><span class="line">pu()</span><br><span class="line">goto(<span class="number">0</span>,<span class="number">200</span>)</span><br><span class="line">seth(<span class="number">30</span>)</span><br><span class="line">fd(<span class="number">100</span>)</span><br><span class="line">pd()</span><br><span class="line">fillcolor(<span class="string">&quot;brown&quot;</span>)</span><br><span class="line">begin_fill()</span><br><span class="line">circle(<span class="number">30</span>,<span class="number">215</span>)</span><br><span class="line">end_fill()</span><br><span class="line">pu()</span><br><span class="line">goto(<span class="number">0</span>,<span class="number">200</span>)</span><br><span class="line">seth(<span class="number">150</span>)</span><br><span class="line">fd(<span class="number">100</span>)</span><br><span class="line">pd()</span><br><span class="line">fillcolor(<span class="string">&quot;brown&quot;</span>)</span><br><span class="line">begin_fill()</span><br><span class="line">circle(-<span class="number">30</span>,<span class="number">215</span>)</span><br><span class="line">end_fill()</span><br><span class="line">pu()</span><br><span class="line">goto(<span class="number">50</span>*<span class="built_in">pow</span>(<span class="number">3</span>,<span class="number">0.5</span>),<span class="number">152</span>) <span class="comment">#pow(x,y)=x**y</span></span><br><span class="line">seth(<span class="number">60</span>)</span><br><span class="line">pd()</span><br><span class="line">fillcolor(<span class="string">&quot;brown&quot;</span>)</span><br><span class="line">begin_fill()</span><br><span class="line">circle(-<span class="number">15</span>,<span class="number">180</span>)</span><br><span class="line">circle(-<span class="number">130</span>,<span class="number">30</span>)</span><br><span class="line">seth(-<span class="number">90</span>)</span><br><span class="line">circle(-<span class="number">1000</span>,<span class="number">8</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">         seth(-<span class="number">90</span>)</span><br><span class="line">         circle(-<span class="number">27</span>,<span class="number">180</span>)</span><br><span class="line">lt(<span class="number">10</span>)</span><br><span class="line">circle(-<span class="number">1000</span>,<span class="number">8</span>)</span><br><span class="line">seth(<span class="number">150</span>)</span><br><span class="line">circle(-<span class="number">130</span>,<span class="number">30</span>)</span><br><span class="line">circle(-<span class="number">16</span>,<span class="number">180</span>)</span><br><span class="line">circle(<span class="number">100</span>,<span class="number">120</span>)</span><br><span class="line">end_fill()</span><br><span class="line">pu()</span><br><span class="line">goto(<span class="number">0</span>,<span class="number">80</span>)</span><br><span class="line">seth(<span class="number">0</span>)</span><br><span class="line">pd()</span><br><span class="line">pencolor(<span class="string">&quot;black&quot;</span>)</span><br><span class="line">fillcolor(<span class="string">&quot;black&quot;</span>)</span><br><span class="line">begin_fill()</span><br><span class="line">circle(-<span class="number">40</span>)</span><br><span class="line">end_fill()</span><br><span class="line">done()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
        <category>Pythonç»˜å›¾</category>
        <category>åˆ›æ„ç¼–ç¨‹</category>
        <category>æŠ–éŸ³çƒ­é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>ç”¨æ ‘è“æ´¾æ­å»ºè™šæ‹Ÿä¸“ç”¨ç½‘ç»œæœåŠ¡å™¨</title>
    <url>/43611.html</url>
    <content><![CDATA[<p>ç¬”è€…è¿™é‡Œæ˜¯ä½¿ç”¨æ ‘è“æ´¾æ­å»ºè™šæ‹Ÿä¸“ç”¨ç½‘ç»œæœåŠ¡å™¨,æ ‘è“æ´¾æ˜¯ç”¨çš„ubuntuç³»ç»Ÿ,æ‰€ä»¥è¯¥æ–¹æ³•ä½¿ç”¨äºæ‰€æœ‰çš„ubuntuç³»ç»Ÿçš„æœåŠ¡å™¨.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>æƒ³è¦ç”¨æœåŠ¡å™¨æ­å»ºè™šæ‹Ÿä¸“ç”¨ç½‘ç»œæœåŠ¡å™¨,ä½ é¦–å…ˆå¾—ä¸Šæ‰‹ä¸€ä¸ªæ ‘è“æ´¾,å¯ä»¥å‚è€ƒ<a href="http://www.fengpla.cn/2017/03/15/RaspberryPi/">è¿™é‡Œ</a>.æˆ–è€…ä½ å¯¹è™šæ‹Ÿä¸“ç”¨ç½‘ç»œä¸å¤Ÿäº†è§£,å¯ä»¥å‚è€ƒ<a href="http://baike.baidu.com/link?url=7C5A528WHc_Gn3TdgwgnkopwGa2wtHcKkV-n1bu2SX95OWgtCWvGd9JfU4duT1M4S9TiTN4VYICrMl_kTWH2CSqSH8zb7CpCWnVQgfwmL35yKjEsn-W5OnXrtsjz00CKRQncleqMuhQdX1csUP-0y7JNmlktQJP2OKTM6E4J2nuyW6GGrz8zN-hepNE8m65y">è¿™é‡Œ</a>.</p>
<h3 id="å®‰è£…pptp"><a href="#å®‰è£…pptp" class="headerlink" title="å®‰è£…pptp"></a>å®‰è£…pptp</h3><p>åœ¨ç»ˆç«¯è¾“å…¥ä¸‹é¢å‘½ä»¤å¹¶å›è½¦.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sudo apt-get install pptpd</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®å†…ç½‘ipç­–ç•¥"><a href="#é…ç½®å†…ç½‘ipç­–ç•¥" class="headerlink" title="é…ç½®å†…ç½‘ipç­–ç•¥"></a>é…ç½®å†…ç½‘ipç­–ç•¥</h3><p>åœ¨ç»ˆç«¯è¾“å…¥ä¸‹é¢å‘½ä»¤å¹¶å›è½¦,è¿›å…¥vimç¼–è¾‘å™¨.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/pptpd.<span class="property">conf</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨é‡Š<code>logwtmp</code>,å³åœ¨å‰é¢åŠ ä¸€ä¸ª<code>#</code>.</li>
<li>åœ¨<code># TAG:localip</code>åé¢å¢åŠ 2è¡Œ<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">localip <span class="number">192.168</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">remoteip <span class="number">192.168</span><span class="number">.0</span><span class="number">.234</span>-<span class="number">238</span>,<span class="number">192.168</span><span class="number">.0</span><span class="number">.245</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸Šé¢é…ç½®çš„localipä¸ºæœåŠ¡å™¨çš„ipåœ°å€,åœ¨æ­å»ºè™šæ‹Ÿä¸“ç”¨ç½‘ç»œçš„æ—¶å€™è¦æ ¹æ®è‡ªå·±æœåŠ¡å™¨çš„åœ°å€æ¥è®¾ç½®.<br>remoteipä¸ºè¿æ¥è™šæ‹Ÿä¸“ç”¨ç½‘ç»œçš„å®¢æˆ·ç«¯ipåœ°å€,ä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦æ›´æ”¹.</p>
</blockquote>
</li>
</ul>
<h3 id="é…ç½®dns"><a href="#é…ç½®dns" class="headerlink" title="é…ç½®dns"></a>é…ç½®dns</h3><p>åœ¨ç»ˆç«¯è¾“å…¥ä¸‹é¢å‘½ä»¤å¹¶å›è½¦,è¿›å…¥vimç¼–è¾‘å™¨.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/ppp/pptpd-options</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>#ms-dns</code>åé¢å¢åŠ 2è¡Œ,ä¹Ÿå¯ä»¥é…ç½®å…¶ä»–dns</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ms-dns <span class="number">121.42</span><span class="number">.42</span><span class="number">.51</span></span><br><span class="line">ms-dns <span class="number">114.114</span><span class="number">.114</span><span class="number">.114</span></span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®è™šæ‹Ÿä¸“ç”¨ç½‘ç»œå¸å·"><a href="#é…ç½®è™šæ‹Ÿä¸“ç”¨ç½‘ç»œå¸å·" class="headerlink" title="é…ç½®è™šæ‹Ÿä¸“ç”¨ç½‘ç»œå¸å·"></a>é…ç½®è™šæ‹Ÿä¸“ç”¨ç½‘ç»œå¸å·</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/ppp/chap-secrets</span><br></pre></td></tr></table></figure>
<p>åœ¨å…¶ä¸­ä¾æ¬¡æ·»åŠ å¸å·,æœåŠ¡å™¨å,å¯†ç å’ŒIPé™åˆ¶,ä¸€ä¸ªå¸å·ä¸€è¡Œ,æ¯ä¸ªå‚æ•°ä¸­é—´ç”¨<code>tab</code>æˆ–è€…ç©ºæ ¼é—´éš”.å¦‚:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">zhangsan pptpd <span class="number">123456</span> *</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å…¶ä¸­user,passwdä¸ºè‡ªå·±è®¾ç½®çš„è´¦æˆ·åå’Œå¯†ç .<br>**æ³¨æ„:**è¿™é‡Œçš„<code>IP addresses</code> ä¸æ˜¯è®¾ç½®ä¸ºè‡ªå·±æœåŠ¡å™¨çš„IP,è€Œæ˜¯è®¾ç½®ä¸º<code>*</code>,ç¬”è€…ä¹‹å‰åœ¨è¿™é‡Œè€½è¯¯äº†ä¸€ç‚¹æ—¶é—´.</p>
</blockquote>
<h3 id="è®¾ç½®TCP-IPæ•°æ®è½¬å‘"><a href="#è®¾ç½®TCP-IPæ•°æ®è½¬å‘" class="headerlink" title="è®¾ç½®TCP&#x2F;IPæ•°æ®è½¬å‘"></a>è®¾ç½®TCP&#x2F;IPæ•°æ®è½¬å‘</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/sysctl.<span class="property">conf</span></span><br></pre></td></tr></table></figure>
<p>æ’å…¥ä¸€è¡Œ,æˆ–è€…æ‰¾åˆ°è¿™è¡Œæ³¨é‡Šæ‰</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">net.<span class="property">ipv4</span>.<span class="property">ip_forward</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>ä¿å­˜å¹¶é€€å‡ºvim<br>æ‰§è¡Œ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sudo sysctl -p</span><br></pre></td></tr></table></figure>
<p>æç¤º<code>net.ipv4.ip_forward=1</code>è¯´æ˜é…ç½®ç”Ÿæ•ˆ<br><img data-src="https://pic.imgdb.cn/item/66433ef60ea9cb1403b8aa32.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h3 id="å¼€æ”¾ç½‘ç»œç«¯å£"><a href="#å¼€æ”¾ç½‘ç»œç«¯å£" class="headerlink" title="å¼€æ”¾ç½‘ç»œç«¯å£"></a>å¼€æ”¾ç½‘ç»œç«¯å£</h3><p>å®‰è£…<code>iptables</code>(å·²ç»å®‰è£…è¯·å¿½ç•¥)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sudo apt-get install iptables</span><br></pre></td></tr></table></figure>
<p>å¼€æ”¾1723ç«¯å£</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sudo iptables -l <span class="variable constant_">INPUT</span> -p tcp -dport <span class="number">1723</span> -j <span class="variable constant_">ACCEPT</span>  </span><br><span class="line">æˆ–è€…: sudo iptables -l <span class="variable constant_">INPUT</span> -p tcp -dport <span class="number">1723</span> -j <span class="variable constant_">ACCEPT</span></span><br></pre></td></tr></table></figure>

<h3 id="é‡å¯pptpd"><a href="#é‡å¯pptpd" class="headerlink" title="é‡å¯pptpd"></a>é‡å¯pptpd</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sudo /etc/init.<span class="property">d</span>/procps restart</span><br></pre></td></tr></table></figure>
<p><img data-src="https://pic.imgdb.cn/item/66433ef60ea9cb1403b8aa21.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>åˆ°è¿™é‡Œå°±æ­å»ºå®Œæ¯•äº†.</p>
<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p><strong>1</strong> å¦‚æœè™šæ‹Ÿä¸“ç”¨ç½‘ç»œ æ‰“ä¸å¼€æµè§ˆå™¨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sudo iptables -A <span class="variable constant_">FORWARD</span> -s <span class="number">192.168</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">24</span> -p tcp -m tcp --tcp-flags <span class="variable constant_">SYN</span>,<span class="variable constant_">RST</span> <span class="variable constant_">SYN</span> -j <span class="variable constant_">TCPMSS</span> --set-mss <span class="number">1200</span></span><br></pre></td></tr></table></figure>
<p><strong>2</strong> å¦‚æœä¸Šä¸å»ç½‘</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sudo iptables -t nat -A <span class="variable constant_">POSTROUTING</span> -s <span class="number">192.168</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">24</span> -o eth0 -jMASQUERADE</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœ‰ä¸å¦¥è¿˜è¯·å„ä½è¯»è€…å¤šå¤šæŒ‡å‡º,è¿™é‡Œå¤šå¤„å‚è€ƒç½‘ä¸Šèµ„æº</p>
</blockquote>
]]></content>
      <categories>
        <category>æ ‘è“æ´¾</category>
        <category>æœåŠ¡å™¨æ­å»º</category>
        <category>è™šæ‹Ÿä¸“ç”¨ç½‘ç»œ</category>
      </categories>
  </entry>
  <entry>
    <title>ç”¨pythonç”»ä¸€åªè‰è“ç†Š</title>
    <url>/390fff19.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><img data-src="https://pic.imgdb.cn/item/6643385f0ea9cb1403af5129.png" alt="æ•ˆæœå›¾" />

<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><blockquote>
<p> æ³¨æ„ï¼Œpythonç‰ˆæœ¬å¤ªé«˜å¯èƒ½æ²¡æœ‰è¯¥æ•ˆæœ</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#-*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> turtle <span class="keyword">as</span> t</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®èƒŒæ™¯é¢œè‰²ï¼Œçª—å£ä½ç½®ä»¥åŠå¤§å°</span></span><br><span class="line"> </span><br><span class="line">t.colormode(<span class="number">255</span>)<span class="comment"># é¢œè‰²æ¨¡å¼</span></span><br><span class="line">t.speed(<span class="number">0</span>)</span><br><span class="line">t.screensize(<span class="number">850</span>,<span class="number">760</span>,<span class="string">&quot;white&quot;</span>)<span class="comment">#ç”»å¸ƒå¤§å°èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">t.setup(width=<span class="number">850</span>, height=<span class="number">760</span>,startx=<span class="number">260</span>, starty=<span class="number">0</span>) <span class="comment">#ç»˜å›¾çª—å£çš„å¤§å°å’Œèµ·å§‹åæ ‡</span></span><br><span class="line"><span class="comment"># t.bgpic(&quot;C:/Users/Angle/Desktop/1.gif&quot;)</span></span><br><span class="line">t.title(<span class="string">&quot;ä¸“å±å®è´çš„è‰è“ç†Šï¼&quot;</span>)<span class="comment">#è®¾ç½®ç»˜å›¾çª—å£çš„æ ‡é¢˜</span></span><br><span class="line">t.resizemode(<span class="string">&#x27;noresize&#x27;</span>)  <span class="comment">#å¤§å°è°ƒæ•´æ¨¡å¼:auto,user,noresize</span></span><br><span class="line">t.tracer(<span class="number">1</span>)   </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">scolor=[<span class="string">&quot;#E6005C&quot;</span>,<span class="string">&quot;#00BFFF&quot;</span>,<span class="string">&quot;#538a30&quot;</span>,<span class="string">&quot;#F28500&quot;</span>]   <span class="comment"># æ·±è‰²åˆ—è¡¨</span></span><br><span class="line">qcolor=[<span class="string">&quot;#FF007F&quot;</span>,<span class="string">&quot;#87CEFA&quot;</span>,<span class="string">&quot;#7fbc2b&quot;</span>,<span class="string">&quot;#FFA500&quot;</span>]  <span class="comment"># æµ…è‰²åˆ—è¡¨</span></span><br><span class="line">blsize=<span class="number">80</span>                     <span class="comment"># blsizeå€¼ï¼Œblsizeï¼Œæ˜¯å¤§ç­‰è…°ç›´è§’ä¸‰è§’å½¢çš„æ–œè¾¹é£è½¦ç­‰æ¯”ä¾‹ç¼©æ”¾</span></span><br><span class="line">bs=<span class="number">2</span>**<span class="number">0.5</span>/<span class="number">2</span>*blsize             <span class="comment"># bsæ˜¯ç›´è§’è¾¹ï¼Œ2**0.5 è¡¨ç¤ºæ•°å­¦ä¸­çš„â€œæ ¹å·2â€</span></span><br><span class="line"><span class="comment"># zjsjxxbæ˜¯å°ç­‰è…°ç›´è§’ä¸‰è§’å½¢çš„æ–œè¾¹ï¼Œzjbæ˜¯ç›´è§’è¾¹</span></span><br><span class="line">zjb=blsize/<span class="number">2</span> <span class="comment"># zjbæ˜¯å°ç­‰è…°ç›´è§’ä¸‰è§’å½¢çš„ç›´è§’è¾¹</span></span><br><span class="line">zjsjxxb=<span class="number">2</span>**<span class="number">0.5</span> *zjb  <span class="comment"># zjsjxxbæ˜¯å°ç­‰è…°ç›´è§’ä¸‰è§’å½¢çš„æ–œè¾¹</span></span><br><span class="line">length=<span class="number">1.7</span>*blsize <span class="comment"># é£è½¦æ†é•¿</span></span><br><span class="line">width=<span class="number">2</span>/<span class="number">15</span>*blsize <span class="comment"># é£è½¦æ†å®½</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fongche</span>():<span class="comment">#é£è½¦ </span></span><br><span class="line">    t.penup()</span><br><span class="line">    t.goto(-<span class="number">205</span>,-<span class="number">42</span>)</span><br><span class="line">    t.begin_fill()</span><br><span class="line">    t.pensize(<span class="number">4</span>)</span><br><span class="line">    t.pencolor(<span class="string">&quot;#321320&quot;</span>)</span><br><span class="line">    t.fillcolor(<span class="string">&quot;#D2B48C&quot;</span>)</span><br><span class="line">    t.circle(<span class="number">15</span>)</span><br><span class="line">    t.end_fill()</span><br><span class="line">    t.penup()</span><br><span class="line">    t.goto(-<span class="number">220</span>,<span class="number">80</span>)</span><br><span class="line">    t.pendown()</span><br><span class="line">    t.setheading(-<span class="number">90</span>)</span><br><span class="line">    t.pensize(width)</span><br><span class="line">    t.pencolor(<span class="string">&quot;#5f4a1d&quot;</span>)</span><br><span class="line">    t.forward(length)</span><br><span class="line">    t.pensize(<span class="number">2</span>)</span><br><span class="line">    t.backward(length)</span><br><span class="line">    t.setheading(<span class="number">90</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">        <span class="comment"># å°ç­‰è…°ç›´è§’ä¸‰è§’å½¢</span></span><br><span class="line">        t.color(scolor[i])  <span class="comment"># éå†æ·±è‰²åˆ—è¡¨scolor</span></span><br><span class="line">        t.begin_fill()</span><br><span class="line">        t.forward(zjb)</span><br><span class="line">        t.left(<span class="number">90</span>)</span><br><span class="line">        t.forward(zjb)</span><br><span class="line">        t.left(<span class="number">135</span>)</span><br><span class="line">        t.forward(zjsjxxb)</span><br><span class="line">        t.end_fill()</span><br><span class="line">        <span class="comment">#t.pencolor(scolor[i])</span></span><br><span class="line">        <span class="comment">#t.pensize(4)</span></span><br><span class="line"> </span><br><span class="line">        <span class="comment"># å¤§ç­‰è…°ç›´è§’ä¸‰è§’å½¢</span></span><br><span class="line">        t.color(qcolor[i])  <span class="comment"># éå†æµ…è‰²åˆ—è¡¨qcolor</span></span><br><span class="line">        t.begin_fill()</span><br><span class="line">        t.backward(zjsjxxb)</span><br><span class="line">        t.right(<span class="number">90</span>)</span><br><span class="line">        t.forward(bs)</span><br><span class="line">        t.left(<span class="number">135</span>)</span><br><span class="line">        t.forward(blsize)</span><br><span class="line">        t.end_fill()</span><br><span class="line">        <span class="comment">#t.pencolor(scolor[i])</span></span><br><span class="line">        <span class="comment">#t.pensize(4)</span></span><br><span class="line"> </span><br><span class="line">        <span class="comment"># æ—‹è½¬180åº¦åï¼Œç”»ä¸‹ä¸€ç‰‡é£è½¦å¶ç‰‡</span></span><br><span class="line">        t.right(<span class="number">180</span>)</span><br><span class="line">        t.penup()</span><br><span class="line"> </span><br><span class="line">mling_circle_list = <span class="built_in">iter</span>([  <span class="comment"># æ¯æ®µå¼§çº¿ï¼ˆåŠå¾„ï¼Œå¼§è§’åº¦æ•°ï¼‰</span></span><br><span class="line">    (<span class="number">18</span>, <span class="number">360</span>), (<span class="number">14</span>, <span class="number">360</span>), (<span class="number">10</span>, <span class="number">360</span>), (<span class="number">6</span>, <span class="number">360</span>),</span><br><span class="line">    (<span class="number">18</span>, <span class="number">360</span>), (<span class="number">14</span>, <span class="number">360</span>), (<span class="number">10</span>, <span class="number">360</span>), (<span class="number">6</span>, <span class="number">360</span>),</span><br><span class="line">])</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mling_draw_eyeball</span>(<span class="params">zb1,zb2,zb3,zb4</span>):  </span><br><span class="line">    <span class="keyword">for</span> zb, color_ <span class="keyword">in</span> <span class="built_in">zip</span>([zb1,zb2,zb3,zb4], [<span class="string">&#x27;#ffffff&#x27;</span>, <span class="string">&#x27;#482d08&#x27;</span>, <span class="string">&#x27;#000000&#x27;</span>, <span class="string">&#x27;#ffffff&#x27;</span>]):</span><br><span class="line">        t.penup()</span><br><span class="line">        t.goto(*zb)</span><br><span class="line">        t.pendown()</span><br><span class="line">        t.begin_fill()</span><br><span class="line">        t.setheading(<span class="number">0</span>)</span><br><span class="line">        t.color(color_)</span><br><span class="line">        t.pencolor(<span class="string">&#x27;#000000&#x27;</span>)</span><br><span class="line">        t.pensize(<span class="number">2</span>)</span><br><span class="line">        t.circle(*<span class="built_in">next</span>(mling_circle_list))</span><br><span class="line">        t.end_fill()</span><br><span class="line"> </span><br><span class="line">t.penup()</span><br><span class="line">p = t.home()</span><br><span class="line">t.pencolor(<span class="string">&quot;#321320&quot;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&quot;#cb3263&quot;</span>)</span><br><span class="line">t.pensize(<span class="number">4</span>)</span><br><span class="line">t.goto(<span class="number">120</span>,<span class="number">110</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.goto(<span class="number">200</span>,<span class="number">0</span>)</span><br><span class="line">t.left(-<span class="number">40</span>)</span><br><span class="line">t.circle(-<span class="number">110</span>,<span class="number">105</span>)</span><br><span class="line">t.left(<span class="number">75</span>)</span><br><span class="line">t.goto(<span class="number">170</span>,-<span class="number">110</span>)</span><br><span class="line">t.left(-<span class="number">80</span>)</span><br><span class="line">t.circle(<span class="number">30</span>,<span class="number">40</span>)</span><br><span class="line">t.left(<span class="number">60</span>)</span><br><span class="line">t.circle(-<span class="number">80</span>,<span class="number">70</span>)</span><br><span class="line">t.left(<span class="number">83</span>)</span><br><span class="line">t.circle(-<span class="number">35</span>,<span class="number">95</span>)</span><br><span class="line">t.goto(<span class="number">60</span>,-<span class="number">270</span>)</span><br><span class="line">t.left(-<span class="number">80</span>)</span><br><span class="line">t.circle(-<span class="number">65</span>,<span class="number">70</span>)</span><br><span class="line">t.left(<span class="number">63</span>)</span><br><span class="line">t.circle(<span class="number">35</span>,<span class="number">30</span>)</span><br><span class="line">t.left(<span class="number">130</span>)</span><br><span class="line">t.circle(-<span class="number">65</span>,<span class="number">70</span>)</span><br><span class="line">t.goto(-<span class="number">120</span>,-<span class="number">270</span>)</span><br><span class="line">t.left(-<span class="number">110</span>)</span><br><span class="line">t.circle(-<span class="number">35</span>,<span class="number">80</span>)</span><br><span class="line">t.left(<span class="number">83</span>)</span><br><span class="line">t.circle(-<span class="number">80</span>,<span class="number">50</span>)</span><br><span class="line">t.left(<span class="number">60</span>)</span><br><span class="line">t.circle(-<span class="number">80</span>,<span class="number">60</span>)</span><br><span class="line">t.left(<span class="number">60</span>)</span><br><span class="line">t.circle(<span class="number">30</span>,<span class="number">30</span>)</span><br><span class="line">t.left(<span class="number">20</span>)</span><br><span class="line">t.circle(<span class="number">80</span>,<span class="number">80</span>)</span><br><span class="line">t.left(-<span class="number">105</span>)</span><br><span class="line">t.circle(-<span class="number">70</span>,<span class="number">150</span>)</span><br><span class="line">t.left(<span class="number">50</span>)</span><br><span class="line">t.circle(-<span class="number">170</span>,<span class="number">50</span>)</span><br><span class="line">t.goto(<span class="number">120</span>,<span class="number">110</span>)</span><br><span class="line"><span class="comment">#Author:Adversity Awake</span></span><br><span class="line">t.end_fill()</span><br><span class="line">t.penup()</span><br><span class="line">p = t.home()</span><br><span class="line">t.pencolor(<span class="string">&quot;#321320&quot;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&quot;#ffffff&quot;</span>)</span><br><span class="line">t.pensize(<span class="number">4</span>)</span><br><span class="line">t.goto(<span class="number">90</span>,<span class="number">60</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.right(<span class="number">30</span>)</span><br><span class="line">t.circle(-<span class="number">130</span>,<span class="number">360</span>)</span><br><span class="line">t.end_fill()</span><br><span class="line">t.penup()</span><br><span class="line">p = t.home()</span><br><span class="line">t.pencolor(<span class="string">&quot;#321320&quot;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&quot;#f3d2ad&quot;</span>)</span><br><span class="line">t.pensize(<span class="number">4</span>)</span><br><span class="line">t.goto(-<span class="number">250</span>,-<span class="number">55</span>)</span><br><span class="line">t.seth(<span class="number">0</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.right(-<span class="number">55</span>)</span><br><span class="line">t.circle(-<span class="number">45</span>,<span class="number">270</span>)</span><br><span class="line">t.goto(-<span class="number">220</span>,-<span class="number">75</span>)</span><br><span class="line">t.goto(-<span class="number">250</span>,-<span class="number">55</span>)</span><br><span class="line">t.end_fill()</span><br><span class="line"> </span><br><span class="line">fongche()</span><br><span class="line"> </span><br><span class="line">t.penup()</span><br><span class="line">p = t.home()</span><br><span class="line">t.pencolor(<span class="string">&quot;#321320&quot;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&quot;#f3d2ad&quot;</span>)</span><br><span class="line">t.pensize(<span class="number">4</span>)</span><br><span class="line">t.goto(<span class="number">185</span>,-<span class="number">90</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.right(<span class="number">140</span>)</span><br><span class="line">t.circle(<span class="number">43</span>,<span class="number">95</span>)</span><br><span class="line">t.goto(<span class="number">185</span>,-<span class="number">90</span>)</span><br><span class="line">t.end_fill()</span><br><span class="line">t.penup()</span><br><span class="line">t.seth(<span class="number">0</span>)</span><br><span class="line">t.pencolor(<span class="string">&#x27;#321320&#x27;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&#x27;#cb3263&#x27;</span>)</span><br><span class="line">t.pensize(<span class="number">4</span>)</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.goto(<span class="number">21</span>,<span class="number">0</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.circle(<span class="number">123</span>,<span class="number">134</span>)</span><br><span class="line">t.left(-<span class="number">90</span>)</span><br><span class="line">t.circle(<span class="number">40</span>,<span class="number">185</span>)</span><br><span class="line">t.left(-<span class="number">60</span>)</span><br><span class="line">t.circle(<span class="number">120</span>,<span class="number">60</span>)</span><br><span class="line">t.left(-<span class="number">90</span>)</span><br><span class="line">t.circle(<span class="number">50</span>,<span class="number">200</span>)</span><br><span class="line">t.left(-<span class="number">90</span>)</span><br><span class="line">t.circle(<span class="number">100</span>,<span class="number">100</span>)</span><br><span class="line">t.left(-<span class="number">12</span>)</span><br><span class="line">t.circle(<span class="number">100</span>,<span class="number">40</span>)</span><br><span class="line">t.goto(<span class="number">21</span>,<span class="number">0</span>)</span><br><span class="line">t.penup()</span><br><span class="line"><span class="comment">#Author:Adversity Awake</span></span><br><span class="line">t.end_fill()</span><br><span class="line">t.penup()</span><br><span class="line">t.goto(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">t.seth(<span class="number">0</span>)</span><br><span class="line">t.pencolor(<span class="string">&#x27;#321320&#x27;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&#x27;#ffffff&#x27;</span>)</span><br><span class="line">t.pensize(<span class="number">4</span>)</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.goto(-<span class="number">70</span>,<span class="number">210</span>)</span><br><span class="line">t.left(<span class="number">140</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.circle(<span class="number">30</span>,<span class="number">200</span>)</span><br><span class="line">t.goto(-<span class="number">70</span>,<span class="number">210</span>)</span><br><span class="line">t.penup()</span><br><span class="line">t.end_fill()</span><br><span class="line">t.penup()</span><br><span class="line">t.goto(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">t.seth(<span class="number">0</span>)</span><br><span class="line">t.pencolor(<span class="string">&#x27;#321320&#x27;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&#x27;#ffffff&#x27;</span>)</span><br><span class="line">t.pensize(<span class="number">4</span>)</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.goto(<span class="number">90</span>,<span class="number">220</span>)</span><br><span class="line">t.left(<span class="number">45</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.circle(<span class="number">22</span>,<span class="number">200</span>)</span><br><span class="line">t.goto(<span class="number">90</span>,<span class="number">220</span>)</span><br><span class="line">t.penup()</span><br><span class="line">t.end_fill()</span><br><span class="line">t.penup()</span><br><span class="line">t.goto(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">t.seth(<span class="number">0</span>)</span><br><span class="line">t.pencolor(<span class="string">&#x27;#321320&#x27;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&#x27;#ffffff&#x27;</span>)</span><br><span class="line">t.pensize(<span class="number">4</span>)</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.left(-<span class="number">98</span>)</span><br><span class="line">t.left(<span class="number">90</span>)</span><br><span class="line">t.goto(<span class="number">18</span>,<span class="number">10</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.circle(<span class="number">100</span>,<span class="number">134</span>)</span><br><span class="line">t.left(<span class="number">10</span>)</span><br><span class="line">t.circle(<span class="number">110</span>,<span class="number">30</span>)</span><br><span class="line">t.left(<span class="number">10</span>)</span><br><span class="line">t.circle(<span class="number">160</span>,<span class="number">40</span>)</span><br><span class="line">t.circle(<span class="number">85</span>,<span class="number">40</span>)</span><br><span class="line">t.left(<span class="number">2</span>)</span><br><span class="line">t.circle(<span class="number">95</span>,<span class="number">40</span>)</span><br><span class="line">t.left(<span class="number">5</span>)</span><br><span class="line">t.circle(<span class="number">95</span>,<span class="number">60</span>)</span><br><span class="line">t.goto(<span class="number">18</span>,<span class="number">10</span>)</span><br><span class="line">t.penup()</span><br><span class="line">t.end_fill()</span><br><span class="line">t.penup()</span><br><span class="line">p = t.home()</span><br><span class="line">t.pencolor(<span class="string">&quot;#321320&quot;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&quot;#8f3a52&quot;</span>)</span><br><span class="line">t.pensize(<span class="number">2</span>)</span><br><span class="line">t.goto(<span class="number">25</span>,<span class="number">240</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.goto(<span class="number">60</span>,<span class="number">235</span>)</span><br><span class="line">t.left(<span class="number">30</span>)</span><br><span class="line">t.fd(<span class="number">8</span>)</span><br><span class="line">t.left(<span class="number">90</span>)</span><br><span class="line">t.fd(<span class="number">22</span>)</span><br><span class="line">t.circle(<span class="number">90</span>, <span class="number">8</span>)</span><br><span class="line">t.left(<span class="number">20</span>)</span><br><span class="line">t.circle(<span class="number">90</span>, <span class="number">8</span>)</span><br><span class="line">t.left(<span class="number">20</span>)</span><br><span class="line">t.circle(<span class="number">90</span>, <span class="number">20</span>)</span><br><span class="line">t.left(<span class="number">40</span>)</span><br><span class="line">t.circle(<span class="number">50</span>, <span class="number">20</span>)</span><br><span class="line">t.end_fill()</span><br><span class="line">t.penup()</span><br><span class="line">t.pensize(<span class="number">12</span>)</span><br><span class="line">t.goto(-<span class="number">2</span>,<span class="number">250</span>)</span><br><span class="line">t.pencolor(<span class="string">&quot;#4D1F00&quot;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&quot;#4D1F00&quot;</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.goto(<span class="number">60</span>,<span class="number">240</span>)</span><br><span class="line">t.end_fill()</span><br><span class="line">t.penup()</span><br><span class="line">p = t.home()</span><br><span class="line">t.pencolor(<span class="string">&quot;#321320&quot;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&quot;#8f3a52&quot;</span>)</span><br><span class="line">t.pensize(<span class="number">2</span>)</span><br><span class="line">t.goto(-<span class="number">55</span>,<span class="number">193</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.left(<span class="number">65</span>)</span><br><span class="line">t.circle(-<span class="number">90</span>, <span class="number">25</span>)</span><br><span class="line">t.goto(-<span class="number">10</span>,<span class="number">230</span>)</span><br><span class="line">t.left(<span class="number">30</span>)</span><br><span class="line">t.fd(<span class="number">8</span>)</span><br><span class="line">t.left(<span class="number">90</span>)</span><br><span class="line">t.fd(<span class="number">18</span>)</span><br><span class="line">t.circle(<span class="number">90</span>, <span class="number">8</span>)</span><br><span class="line">t.left(<span class="number">20</span>)</span><br><span class="line">t.circle(<span class="number">90</span>, <span class="number">10</span>)</span><br><span class="line">t.left(<span class="number">40</span>)</span><br><span class="line">t.circle(<span class="number">90</span>, <span class="number">30</span>)</span><br><span class="line">t.left(<span class="number">30</span>)</span><br><span class="line">t.circle(<span class="number">40</span>, <span class="number">20</span>)</span><br><span class="line">t.penup()</span><br><span class="line">t.end_fill()</span><br><span class="line">t.pensize(<span class="number">12</span>)</span><br><span class="line">t.goto(-<span class="number">63</span>,<span class="number">195</span>)</span><br><span class="line">t.pencolor(<span class="string">&quot;#4D1F00&quot;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&quot;#4D1F00&quot;</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.left(<span class="number">100</span>)</span><br><span class="line">t.circle(-<span class="number">85</span>,<span class="number">45</span>)</span><br><span class="line">t.end_fill()</span><br><span class="line"> </span><br><span class="line">mling_draw_eyeball((-<span class="number">20</span>,<span class="number">180</span>), (-<span class="number">23</span>,<span class="number">185</span>), (-<span class="number">25</span>,<span class="number">188</span>), (-<span class="number">30</span>,<span class="number">200</span>)) </span><br><span class="line">mling_draw_eyeball((<span class="number">30</span>, <span class="number">193</span>), (<span class="number">27</span>, <span class="number">200</span>), (<span class="number">25</span>,<span class="number">203</span>), (<span class="number">20</span>,<span class="number">213</span>)) </span><br><span class="line"> </span><br><span class="line">t.penup()</span><br><span class="line">p = t.home()</span><br><span class="line">t.pencolor(<span class="string">&quot;#321320&quot;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&quot;#8f3a52&quot;</span>)</span><br><span class="line">t.pensize(<span class="number">3</span>)</span><br><span class="line">t.goto(<span class="number">25</span>,<span class="number">105</span>)</span><br><span class="line">p = t.pos()</span><br><span class="line">t.pendown()</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.circle(<span class="number">85</span>, <span class="number">65</span>)</span><br><span class="line">t.left(<span class="number">16</span>)</span><br><span class="line">t.circle(<span class="number">30</span>, <span class="number">55</span>)</span><br><span class="line">t.left(<span class="number">20</span>)</span><br><span class="line">t.circle(<span class="number">145</span>, <span class="number">58</span>)</span><br><span class="line">t.left(<span class="number">8</span>)</span><br><span class="line">t.circle(<span class="number">20</span>, <span class="number">55</span>)</span><br><span class="line">t.left(<span class="number">8</span>)</span><br><span class="line">t.circle(<span class="number">50</span>, <span class="number">65</span>)</span><br><span class="line">t.left(-<span class="number">5</span>)</span><br><span class="line">t.circle(<span class="number">310</span>, <span class="number">8</span>)</span><br><span class="line">t.end_fill()</span><br><span class="line">t.penup()</span><br><span class="line">t.goto(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">t.seth(<span class="number">0</span>)</span><br><span class="line">t.pencolor(<span class="string">&#x27;#321320&#x27;</span>)</span><br><span class="line">t.fillcolor(<span class="string">&#x27;#a93e54&#x27;</span>)</span><br><span class="line">t.pensize(<span class="number">3</span>)</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.left(-<span class="number">20</span>)</span><br><span class="line">t.goto(<span class="number">9</span>,<span class="number">66</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.circle(<span class="number">68</span>,<span class="number">40</span>)</span><br><span class="line">t.left(<span class="number">10</span>)</span><br><span class="line">t.circle(<span class="number">65</span>,<span class="number">40</span>)</span><br><span class="line">t.left(<span class="number">160</span>)</span><br><span class="line">t.circle(-<span class="number">75</span>,<span class="number">85</span>)</span><br><span class="line">t.left(<span class="number">158</span>)</span><br><span class="line">t.circle(<span class="number">48</span>,<span class="number">37</span>)</span><br><span class="line">t.goto(<span class="number">9</span>,<span class="number">66</span>)</span><br><span class="line">t.penup()</span><br><span class="line">t.end_fill()</span><br><span class="line">t.color(<span class="string">&#x27;#321320&#x27;</span>)</span><br><span class="line">t.penup()</span><br><span class="line">t.goto(<span class="number">380</span>,<span class="number">60</span>)</span><br><span class="line">t.pendown()</span><br><span class="line">t.write(<span class="string">&quot;æˆ‘\nä»¬\nè¦\nå¹¸\nç¦\nå“¦\n&quot;</span>,align=<span class="string">&quot;center&quot;</span>,font=(<span class="string">&quot;é»‘ä½“&quot;</span>,<span class="number">20</span>,<span class="string">&quot;normal&quot;</span>))</span><br><span class="line">t.penup()</span><br><span class="line">t.goto(<span class="number">290</span>,<span class="number">183</span>)</span><br><span class="line">t.pendown()</span><br><span class="line"><span class="comment"># t.write(&quot;æˆ\nåŠŸ\nä¸Š\nå²¸\n&quot;,align=&quot;center&quot;,font=(&quot;é»‘ä½“&quot;,10,&quot;normal&quot;))</span></span><br><span class="line">t.hideturtle()</span><br><span class="line"><span class="comment"># t.done()</span></span><br><span class="line">t.fillcolor(<span class="string">&quot;red&quot;</span>)</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.circle(<span class="number">10</span>, <span class="number">180</span>)</span><br><span class="line">t.circle(<span class="number">25</span>, <span class="number">110</span>)</span><br><span class="line">t.left(<span class="number">50</span>)</span><br><span class="line">t.circle(<span class="number">60</span>, <span class="number">45</span>)</span><br><span class="line">t.circle(<span class="number">20</span>, <span class="number">170</span>)</span><br><span class="line">t.right(<span class="number">24</span>)</span><br><span class="line">t.fd(<span class="number">30</span>)</span><br><span class="line">t.left(-<span class="number">8</span>)<span class="comment">#åŸæœ¬æ˜¯10</span></span><br><span class="line">t.circle(<span class="number">30</span>, <span class="number">110</span>)</span><br><span class="line">t.fd(<span class="number">20</span>)</span><br><span class="line">t.left(<span class="number">40</span>)</span><br><span class="line">t.circle(<span class="number">90</span>, <span class="number">70</span>)</span><br><span class="line">t.circle(<span class="number">30</span>, <span class="number">150</span>)</span><br><span class="line">t.right(<span class="number">30</span>)</span><br><span class="line">t.fd(<span class="number">15</span>)</span><br><span class="line">t.circle(<span class="number">80</span>, <span class="number">90</span>)</span><br><span class="line">t.left(<span class="number">15</span>)</span><br><span class="line">t.fd(<span class="number">45</span>)</span><br><span class="line">t.right(<span class="number">165</span>)</span><br><span class="line">t.fd(<span class="number">20</span>)</span><br><span class="line">t.left(<span class="number">155</span>)</span><br><span class="line">t.circle(<span class="number">150</span>, <span class="number">80</span>)</span><br><span class="line">t.left(<span class="number">50</span>)</span><br><span class="line">t.circle(<span class="number">150</span>, <span class="number">90</span>)</span><br><span class="line">t.end_fill()</span><br><span class="line"></span><br><span class="line"><span class="comment"># èŠ±ç“£1</span></span><br><span class="line">t.left(<span class="number">150</span>)</span><br><span class="line">t.circle(-<span class="number">90</span>, <span class="number">70</span>)</span><br><span class="line">t.left(<span class="number">20</span>)</span><br><span class="line">t.circle(<span class="number">75</span>, <span class="number">105</span>)</span><br><span class="line">t.setheading(<span class="number">60</span>)</span><br><span class="line">t.circle(<span class="number">80</span>, <span class="number">98</span>)</span><br><span class="line">t.circle(-<span class="number">90</span>, <span class="number">40</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># èŠ±ç“£2</span></span><br><span class="line">t.left(<span class="number">180</span>)</span><br><span class="line">t.circle(<span class="number">90</span>, <span class="number">40</span>)</span><br><span class="line">t.circle(-<span class="number">80</span>, <span class="number">98</span>)</span><br><span class="line">t.setheading(-<span class="number">83</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¶å­1</span></span><br><span class="line">t.fd(<span class="number">30</span>)</span><br><span class="line">t.left(<span class="number">90</span>)</span><br><span class="line">t.fd(<span class="number">25</span>)</span><br><span class="line">t.left(<span class="number">45</span>)</span><br><span class="line">t.fillcolor(<span class="string">&quot;green&quot;</span>)</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.circle(-<span class="number">80</span>, <span class="number">90</span>)</span><br><span class="line">t.right(<span class="number">90</span>)</span><br><span class="line">t.circle(-<span class="number">80</span>, <span class="number">90</span>)</span><br><span class="line">t.end_fill()</span><br><span class="line">t.right(<span class="number">135</span>)</span><br><span class="line">t.fd(<span class="number">60</span>)</span><br><span class="line">t.left(<span class="number">180</span>)</span><br><span class="line">t.fd(<span class="number">85</span>)</span><br><span class="line">t.left(<span class="number">90</span>)</span><br><span class="line">t.fd(<span class="number">80</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¶å­2</span></span><br><span class="line">t.right(<span class="number">90</span>)</span><br><span class="line">t.right(<span class="number">45</span>)</span><br><span class="line">t.fillcolor(<span class="string">&quot;green&quot;</span>)</span><br><span class="line">t.begin_fill()</span><br><span class="line">t.circle(<span class="number">80</span>, <span class="number">90</span>)</span><br><span class="line">t.left(<span class="number">90</span>)</span><br><span class="line">t.circle(<span class="number">80</span>, <span class="number">90</span>)</span><br><span class="line">t.end_fill()</span><br><span class="line">t.left(<span class="number">135</span>)</span><br><span class="line">t.fd(<span class="number">60</span>)</span><br><span class="line">t.left(<span class="number">180</span>)</span><br><span class="line">t.fd(<span class="number">60</span>)</span><br><span class="line">t.right(<span class="number">90</span>)</span><br><span class="line">t.circle(<span class="number">200</span>, <span class="number">60</span>)</span><br><span class="line"></span><br><span class="line">t.done()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
        <category>Pythonç»˜å›¾</category>
        <category>åˆ›æ„ç¼–ç¨‹</category>
        <category>æŠ–éŸ³çƒ­é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>ç”¨pythonç”»ä¸€åªå…”å­</title>
    <url>/92589552.html</url>
    <content><![CDATA[<p>å…ˆçœ‹ä¸‹æ•ˆæœå›¾<br><img data-src="https://s1.ax1x.com/2023/01/21/pSGUd9x.jpg" alt="æ•ˆæœå›¾" /></p>
<blockquote>
<p> æ³¨æ„ï¼Œpythonç‰ˆæœ¬å¤ªé«˜å¯èƒ½æ²¡æœ‰è¯¥æ•ˆæœ</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">from</span> turtle <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">set_start</span>(<span class="params">x, y, w=<span class="number">0.5</span>, c=<span class="string">&#x27;black&#x27;</span></span>):</span><br><span class="line">    penup()</span><br><span class="line">    setx(x)</span><br><span class="line">    sety(y)</span><br><span class="line">    setheading(towards(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    width(w)</span><br><span class="line">    pencolor(c)</span><br><span class="line">    pendown()</span><br><span class="line">    speed(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">left_rotate</span>(<span class="params">time, angle, length</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(time):</span><br><span class="line">        left(angle)</span><br><span class="line">        forward(length)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">right_rotate</span>(<span class="params">time, angle, length</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(time):</span><br><span class="line">        right(angle)</span><br><span class="line">        forward(length)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fill_color</span>(<span class="params">color</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator_all</span>(<span class="params">func</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            begin_fill()</span><br><span class="line">            func(*args, **kwargs)</span><br><span class="line">            fillcolor(color)</span><br><span class="line">            end_fill()</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator_all</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fill_color_patch</span>(<span class="params">x, y, c=<span class="string">&#x27;white&#x27;</span></span>):</span><br><span class="line">    set_start(x, y, <span class="number">1</span>, c=c)</span><br><span class="line">    forward(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_circle</span>(<span class="params">radius, color, color2=<span class="string">&#x27;&#x27;</span></span>):</span><br><span class="line">    <span class="keyword">if</span> color2 == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        color2 = color</span><br><span class="line">    penup()</span><br><span class="line">    setheading(towards(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    right(<span class="number">90</span>)</span><br><span class="line">    pencolor(color)</span><br><span class="line">    pendown()</span><br><span class="line">    begin_fill()</span><br><span class="line">    circle(radius)</span><br><span class="line">    fillcolor(color2)</span><br><span class="line">    end_fill()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_ear</span>():</span><br><span class="line">    <span class="comment"># å·¦ä¾§è€³æœµ</span></span><br><span class="line">    fill_color_patch(-<span class="number">50</span>, <span class="number">86</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">50</span>, <span class="number">86</span>, w=<span class="number">4</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">174</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">5</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">6</span>, <span class="number">15</span>)</span><br><span class="line">    width(<span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">4</span>, <span class="number">13</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">9</span>, <span class="number">12</span>)</span><br><span class="line">    width(<span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">128</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">9.5</span>, <span class="number">31</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">7</span>, <span class="number">25</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">12</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    width(<span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">160</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">20</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">20</span>)</span><br><span class="line">    width(<span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">2</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">5</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">3</span>, <span class="number">15</span>)</span><br><span class="line">    fill_color_patch(-<span class="number">35</span>, <span class="number">105</span>, c=<span class="string">&#x27;#E6E6FA&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">35</span>, <span class="number">105</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#E6E6FA&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">170</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">25</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">11</span>, <span class="number">23</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">130</span>, <span class="number">20</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">8</span>, <span class="number">25</span>)</span><br><span class="line">    goto(-<span class="number">35</span>, <span class="number">105</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E6E6FA&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">32</span>, <span class="number">110</span>, c=<span class="string">&#x27;#D6D2F6&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">32</span>, <span class="number">110</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#D6D2F6&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">170</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">23</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">11</span>, <span class="number">20</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">131</span>, <span class="number">20</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">8</span>, <span class="number">23</span>)</span><br><span class="line">    goto(-<span class="number">32</span>, <span class="number">110</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#D6D2F6&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(-<span class="number">48.87</span>, <span class="number">85.22</span>, w=<span class="number">3</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    setheading(<span class="number">195.67</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">160</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">20</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">20</span>)</span><br><span class="line">    width(<span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">2</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">5</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">3</span>, <span class="number">15</span>)</span><br><span class="line">    <span class="comment"># å³ä¾§è€³æœµ</span></span><br><span class="line">    fill_color_patch(<span class="number">90</span>, <span class="number">67</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">90</span>, <span class="number">67</span>, w=<span class="number">4</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">180</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">13</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">5</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">5.5</span>, <span class="number">8</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">132</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">18</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">5</span>, <span class="number">18</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">4</span>, <span class="number">17</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">70</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>)</span><br><span class="line">    goto(<span class="number">90</span>, <span class="number">67</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">180</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">63</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">2</span>, <span class="number">12</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">3</span>, <span class="number">16</span>)</span><br><span class="line">    width(<span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">5</span>, <span class="number">13.5</span>)</span><br><span class="line">    fill_color_patch(<span class="number">90</span>, <span class="number">80</span>, c=<span class="string">&#x27;#E6E6FA&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">90</span>, <span class="number">80</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#E6E6FA&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">175</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">10</span>, <span class="number">12</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">7</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">5</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">7.5</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">3</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">2</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">7</span>, <span class="number">12</span>)</span><br><span class="line">    goto(<span class="number">90</span>, <span class="number">80</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E6E6FA&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">90</span>, <span class="number">85</span>, c=<span class="string">&#x27;#D6D2F6&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">90</span>, <span class="number">85</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#D6D2F6&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">175</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">6</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">153</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">9.5</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">2</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">    goto(<span class="number">90</span>, <span class="number">85</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#D6D2F6&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(<span class="number">90.00</span>, <span class="number">67.00</span>, w=<span class="number">4</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    setheading(<span class="number">327.67</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">180</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">63</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">2</span>, <span class="number">12</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">3</span>, <span class="number">16</span>)</span><br><span class="line">    width(<span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">5</span>, <span class="number">13.5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_cat</span>():</span><br><span class="line">    set_start(<span class="number">34</span>, <span class="number">141</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#C65B03&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">5</span>, <span class="string">&#x27;#C65B03&#x27;</span>, color2=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    set_start(<span class="number">33.5</span>, <span class="number">139</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#ED9C22&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">3</span>, <span class="string">&#x27;#ED9C22&#x27;</span>, color2=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    fill_color_patch(-<span class="number">23</span>, <span class="number">90</span>, c=<span class="string">&#x27;#850009&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">23</span>, <span class="number">90</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#850009&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">4</span>, <span class="number">14.2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">105</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">8</span>)</span><br><span class="line">    width(<span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">11</span>, <span class="number">12</span>, <span class="number">10</span>)</span><br><span class="line">    width(<span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">12</span>)</span><br><span class="line">    goto(-<span class="number">23</span>, <span class="number">90</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#B80705&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">46</span>, <span class="number">110</span>, c=<span class="string">&#x27;#850009&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">46</span>, <span class="number">110</span>, w=<span class="number">3</span>, c=<span class="string">&#x27;#850009&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">145</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">16</span>, <span class="number">8</span>)</span><br><span class="line">    width(<span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">22</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">9</span>)</span><br><span class="line">    goto(<span class="number">46</span>, <span class="number">110</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E50703&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">23</span>, <span class="number">90</span>, c=<span class="string">&#x27;#BE7728&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">23</span>, <span class="number">90</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#BE7728&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">4</span>, <span class="number">14.2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">105</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">8</span>)</span><br><span class="line">    width(<span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">55</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">5</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">6.5</span>, <span class="number">16</span>)</span><br><span class="line">    width(<span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">55</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">10</span>, <span class="number">8</span>)</span><br><span class="line">    goto(-<span class="number">23</span>, <span class="number">90</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E4C127&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">20</span>, <span class="number">98</span>, c=<span class="string">&#x27;#DC960D&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">20</span>, <span class="number">98</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#DC960D&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">75</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">33</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">28</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">45</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">25</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">45</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    goto(<span class="number">20</span>, <span class="number">98</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#DC960D&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">22</span>, <span class="number">99</span>, c=<span class="string">&#x27;#839D76&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">22</span>, <span class="number">99</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#839D76&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">25</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#839D76&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">24</span>, <span class="number">99</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#398640&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">25</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">2.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">2.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#398640&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">25.5</span>, <span class="number">101</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#0ADBC9&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">25</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1.8</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1.8</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#0ADBC9&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_head</span>():</span><br><span class="line">    fill_color_patch(<span class="number">46</span>, <span class="number">83</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">46</span>, <span class="number">83</span>, w=<span class="number">4</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">105</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">20</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">22</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">13</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">3</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">15</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">135</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">8</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">8</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">10</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">130</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">7.5</span>, <span class="number">7.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">125</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">8</span>, <span class="number">6</span>)</span><br><span class="line">    goto(<span class="number">125</span>, -<span class="number">130</span>)</span><br><span class="line">    set_start(<span class="number">125</span>, -<span class="number">130</span>, w=<span class="number">4</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">78</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">18</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">6</span>, <span class="number">21</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">5</span>, <span class="number">18</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">20</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">15</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">7</span>, <span class="number">6.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">130</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">11</span>, <span class="number">4.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">130</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">120</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">10</span>, <span class="number">6.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">95</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">12</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">12</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">5</span>, <span class="number">13</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">13.5</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">158</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">15</span>, <span class="number">5</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_face</span>():</span><br><span class="line">    fill_color_patch(<span class="number">46</span>, <span class="number">80</span>, c=<span class="string">&#x27;#E6E6F0&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">46</span>, <span class="number">80</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#E6E6F0&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">105</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">9</span>, <span class="number">20</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">22</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">10</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">45</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">42</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">7</span>, <span class="number">5.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">45</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">15</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">130</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">8</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">18</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">6</span>, <span class="number">21</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">5</span>, <span class="number">18</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">17</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">15</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">4</span>, <span class="number">5.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">125</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">11</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">40</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">8</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">33</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">8</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">4</span>, <span class="number">12</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">5.5</span>, <span class="number">13</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">8</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">11</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">12</span>, <span class="number">7</span>)</span><br><span class="line">    goto(<span class="number">46</span>, <span class="number">80</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E6E6F0&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">46</span>, <span class="number">75</span>, c=<span class="string">&#x27;#F0F0FA&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">46</span>, <span class="number">75</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#F0F0FA&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">105</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">20</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">20</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">17</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">18</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">8</span>, <span class="number">10</span>, <span class="number">21</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">20</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">15</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">18</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">20</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">9</span>, <span class="number">20</span>)</span><br><span class="line">    goto(<span class="number">46</span>, <span class="number">75</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#F0F0FA&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">90</span>, <span class="number">30</span>, c=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">90</span>, <span class="number">30</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">120</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">20</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">6</span>, <span class="number">18</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">20</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">7</span>, <span class="number">7.5</span>, <span class="number">21</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">20</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">18</span>, <span class="number">14</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">18</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">20</span>, <span class="number">9</span>)</span><br><span class="line">    right_rotate(<span class="number">7</span>, <span class="number">20</span>, <span class="number">5.5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">15</span>, <span class="number">4.5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">13</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">2</span>, <span class="number">12</span>)</span><br><span class="line">    left_rotate(<span class="number">6</span>, <span class="number">28</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">    goto(<span class="number">90</span>, <span class="number">30</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(<span class="number">10.94</span>, <span class="number">89.73</span>, w=<span class="number">4</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    setheading(<span class="number">354.88</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">13.5</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">158</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">15</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_mouth</span>():</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">22</span>, -<span class="number">115</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#C8C3E2&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">110</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    width(<span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">16</span>, <span class="number">5</span>)</span><br><span class="line">    width(<span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">12</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">12</span>, <span class="number">4</span>)</span><br><span class="line">    set_start(-<span class="number">20</span>, -<span class="number">112</span>, w=<span class="number">4</span>, c=<span class="string">&#x27;#9790B5&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">106</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">15</span>, <span class="number">4</span>)</span><br><span class="line">    width(<span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">18</span>, <span class="number">4</span>)</span><br><span class="line">    width(<span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    fill_color_patch(-<span class="number">20</span>, -<span class="number">68</span>, c=<span class="string">&#x27;#ABA9B4&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">20</span>, -<span class="number">68</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#ABA9B4&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">170</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">20</span>, <span class="number">7.2</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">15</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">6</span>, <span class="number">5</span>)</span><br><span class="line">    goto(-<span class="number">20</span>, -<span class="number">68</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#ABA9B4&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">18</span>, -<span class="number">70</span>, c=<span class="string">&#x27;#BC958C&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">18</span>, -<span class="number">70</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#BC958C&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">170</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">20</span>, <span class="number">6.2</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">18.5</span>, <span class="number">6.2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    goto(-<span class="number">18</span>, -<span class="number">70</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#550900&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">22</span>, -<span class="number">90</span>, c=<span class="string">&#x27;#D04C36&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">22</span>, -<span class="number">90</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#D04C36&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">152</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">17</span>, <span class="number">4.8</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">14.5</span>, <span class="number">4.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">85</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">14</span>, <span class="number">5.8</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#D04C36&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">15</span>, -<span class="number">65</span>, c=<span class="string">&#x27;#DAB4C5&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">15</span>, -<span class="number">65</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#DAB4C5&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">170</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">7</span>, <span class="number">4.5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">5.5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">32</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>)</span><br><span class="line">    goto(-<span class="number">15</span>, -<span class="number">65</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#DAB4C5&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">14</span>, -<span class="number">6</span>, c=<span class="string">&#x27;#AAA6AA&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">14</span>, -<span class="number">65</span>, w=<span class="number">1.5</span>, c=<span class="string">&#x27;#AAA6AA&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">155</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">18</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">5</span>)</span><br><span class="line">    goto(-<span class="number">14</span>, -<span class="number">65</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(-<span class="number">3</span>, -<span class="number">78</span>, w=<span class="number">1.5</span>, c=<span class="string">&#x27;#AAA6AA&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">    fill_color_patch(-<span class="number">2</span>, -<span class="number">62</span>, c=<span class="string">&#x27;#ADA5BC&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">2</span>, -<span class="number">62</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#ADA5BC&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">4</span>)</span><br><span class="line">    width(<span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">18</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">16</span>, <span class="number">5.5</span>)</span><br><span class="line">    width(<span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">16</span>, <span class="number">5.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">23</span>, <span class="number">5</span>)</span><br><span class="line">    set_start(-<span class="number">2</span>, -<span class="number">62</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#ADA5BC&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">135</span>, <span class="number">4</span>)</span><br><span class="line">    width(<span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">13</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">18</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">22</span>, <span class="number">5</span>)</span><br><span class="line">    width(<span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">22</span>, <span class="number">5</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">0</span>, -<span class="number">60</span>, c=<span class="string">&#x27;#F0F0FA&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">0</span>, -<span class="number">60</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#F0F0FA&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">16</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">28</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">11</span>, <span class="number">9.8</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">95</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">4.5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">18</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">17</span>, <span class="number">4.5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">0</span>, -<span class="number">60</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#F0F0FA&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">0</span>, -<span class="number">60</span>, c=<span class="string">&#x27;#F0F0FA&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">0</span>, -<span class="number">60</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#F0F0FA&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">16</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">28</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">110</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">10</span>, <span class="number">4</span>)</span><br><span class="line">    goto(<span class="number">0</span>, -<span class="number">60</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">20</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">8</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">130</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">22</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">18</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">16</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">4</span>)</span><br><span class="line">    goto(<span class="number">0</span>, -<span class="number">60</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E6E6F0&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_eye</span>():</span><br><span class="line">    <span class="comment"># å·¦çœ¼</span></span><br><span class="line">    fill_color_patch(-<span class="number">40</span>, -<span class="number">30</span>, c=<span class="string">&#x27;#6A654C&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">40</span>, -<span class="number">30</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#6A654C&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">175</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">9</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">12</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">15.5</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">8.8</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">35</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">145</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">14</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">17</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">9</span>)</span><br><span class="line">    goto(-<span class="number">40</span>, -<span class="number">30</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#6A654C&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">42</span>, -<span class="number">30</span>, c=<span class="string">&#x27;#6A654C&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">42</span>, -<span class="number">30</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#6A654C&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">180</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">9</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">13</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">17</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">40</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">18</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">11</span>, <span class="number">10</span>)</span><br><span class="line">    goto(-<span class="number">42</span>, -<span class="number">30</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">56</span>, -<span class="number">25</span>, c=<span class="string">&#x27;#2E0601&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">56</span>, -<span class="number">25</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#2E0601&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">145</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">16</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">14</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">17</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">11</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">5</span>)</span><br><span class="line">    goto(-<span class="number">56</span>, -<span class="number">25</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#2E0601&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">59</span>, -<span class="number">25</span>, c=<span class="string">&#x27;#B80C01&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">59</span>, -<span class="number">25</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#B80C01&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">18</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">14</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">14</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">17.5</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">14</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">5</span>)</span><br><span class="line">    goto(-<span class="number">59</span>, -<span class="number">25</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#B80C01&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(-<span class="number">87</span>, -<span class="number">15</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">12</span>, <span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">    set_start(-<span class="number">90.3</span>, -<span class="number">4.5</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">6.5</span>, <span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    set_start(-<span class="number">81</span>, -<span class="number">26</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">3</span>, <span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    <span class="comment"># å³çœ¼</span></span><br><span class="line">    fill_color_patch(<span class="number">53</span>, -<span class="number">51</span>, c=<span class="string">&#x27;#6A654C&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">53</span>, -<span class="number">51</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#6A654C&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">13.5</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">7</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10.5</span>, <span class="number">9.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">145</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">17</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">9</span>)</span><br><span class="line">    goto(<span class="number">53</span>, -<span class="number">51</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#6A654C&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">56</span>, -<span class="number">50</span>, c=<span class="string">&#x27;#6A654C&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">56</span>, -<span class="number">50</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#6A654C&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">160</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">15</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">7</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">41</span>, <span class="number">4.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">11</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">18</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">14.5</span>, <span class="number">9</span>)</span><br><span class="line">    goto(<span class="number">56</span>, -<span class="number">50</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">67</span>, -<span class="number">50</span>, c=<span class="string">&#x27;#2E0601&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">67</span>, -<span class="number">50</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#2E0601&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">148</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">13</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">14</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">17</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">12.5</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">4</span>)</span><br><span class="line">    goto(<span class="number">67</span>, -<span class="number">50</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#2E0601&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">70</span>, -<span class="number">50</span>, c=<span class="string">&#x27;#2E0601&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">70</span>, -<span class="number">50</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#2E0601&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">16</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">12</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">18</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">14</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">70</span>, -<span class="number">50</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#B80C01&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(<span class="number">101</span>, -<span class="number">49</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">12</span>, <span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">    set_start(<span class="number">88.8</span>, -<span class="number">37</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">6.5</span>, <span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    set_start(<span class="number">91</span>, -<span class="number">57</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">3</span>, <span class="string">&#x27;white&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_eyebrow</span>():</span><br><span class="line">    set_start(-<span class="number">114.42</span>, <span class="number">43.96</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    setheading(<span class="number">50.88</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">9</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">13</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">2</span>, <span class="number">12</span>)</span><br><span class="line">    left_rotate(<span class="number">6</span>, <span class="number">28</span>, <span class="number">3.5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">10</span>, <span class="number">12</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">11</span>, <span class="number">11</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_nose</span>():</span><br><span class="line">    fill_color_patch(<span class="number">0</span>, -<span class="number">28</span>, c=<span class="string">&#x27;#361C12&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">0</span>, -<span class="number">28</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#361C12&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">105</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">7</span>, <span class="number">15</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">21</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">3.5</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#361C12&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">0</span>, -<span class="number">32</span>, c=<span class="string">&#x27;#6A2807&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">0</span>, -<span class="number">32</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#6C3D25&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">105</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">14</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">6</span>, <span class="number">17</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">14</span>, <span class="number">3.2</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">21</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">2.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">2.5</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#6A2807&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">10</span>, -<span class="number">39</span>, c=<span class="string">&#x27;#B14D14&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">9</span>, -<span class="number">39</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#B14D14&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#B14D14&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_cheek</span>():</span><br><span class="line">    <span class="comment"># è„¸è›‹</span></span><br><span class="line">    fill_color_patch(-<span class="number">77</span>, -<span class="number">57</span>, c=<span class="string">&#x27;#FCE5E7&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">77</span>, -<span class="number">57</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#FCE5E7&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">70</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">6</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#FCE5E7&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">80</span>, -<span class="number">59</span>, c=<span class="string">&#x27;#FDBFC8&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">80</span>, -<span class="number">59</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#FDBFC8&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">70</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">7</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">7</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">4</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#FDBFC8&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">94</span>, -<span class="number">87</span>, c=<span class="string">&#x27;#FCE5E7&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">94</span>, -<span class="number">87</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#FCE5E7&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">25</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">7</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">7</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#FCE5E7&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">90</span>, -<span class="number">89</span>, c=<span class="string">&#x27;#FDBFC8&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">90</span>, -<span class="number">89</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#FDBFC8&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">25</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">7</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">7</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">5</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#FDBFC8&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_forehead</span>():</span><br><span class="line">    <span class="comment"># é¢å¤´</span></span><br><span class="line">    set_start(<span class="number">22</span>, <span class="number">39</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">4</span>, <span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    fill_color_patch(<span class="number">27</span>, <span class="number">36.5</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">27</span>, <span class="number">36.5</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">4.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">18</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">27</span>, <span class="number">36.5</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#EF0F0C&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">21</span>, <span class="number">42.5</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">21</span>, <span class="number">42.5</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">145</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">32</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">23</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">130</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">18</span>, <span class="number">4.5</span>)</span><br><span class="line">    goto(<span class="number">21</span>, <span class="number">42.5</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#EF0F0C&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">13</span>, <span class="number">39</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">13</span>, <span class="number">39</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">170</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">32</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">23</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">130</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">18</span>, <span class="number">4.5</span>)</span><br><span class="line">    goto(<span class="number">13</span>, <span class="number">39</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#EF0F0C&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">12</span>, <span class="number">32.5</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">12</span>, <span class="number">32.5</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">132</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">32</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">23</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">130</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">20</span>, <span class="number">4.5</span>)</span><br><span class="line">    goto(<span class="number">12</span>, <span class="number">32.5</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#EF0F0C&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">18</span>, <span class="number">28</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">18</span>, <span class="number">28</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">32</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">32</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">23</span>, <span class="number">2.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">130</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    goto(<span class="number">18</span>, <span class="number">28</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#EF0F0C&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">26</span>, <span class="number">32</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">26</span>, <span class="number">32</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#C81C0F&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">18</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">20</span>, <span class="number">2.8</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    goto(<span class="number">26</span>, <span class="number">32</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#EF0F0C&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_foot</span>():</span><br><span class="line">    <span class="comment"># å³è„š</span></span><br><span class="line">    fill_color_patch(<span class="number">72</span>, -<span class="number">253</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">72</span>, -<span class="number">253</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">9</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">12</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">11</span>, <span class="number">6</span>)</span><br><span class="line">    goto(<span class="number">72</span>, -<span class="number">253</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#C782B0&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">70</span>, -<span class="number">253</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">70</span>, -<span class="number">253</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">14</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">11</span>, <span class="number">6</span>)</span><br><span class="line">    goto(<span class="number">70</span>, -<span class="number">253</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E6D1E6&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">72</span>, -<span class="number">253</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">72</span>, -<span class="number">253</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">9</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">12</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">11</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">95</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>)</span><br><span class="line">    goto(<span class="number">72</span>, -<span class="number">253</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#552603&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">70</span>, -<span class="number">253</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">70</span>, -<span class="number">253</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">18</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">12</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">14</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">95</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">5.8</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">70</span>, -<span class="number">253</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#8E4B05&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">33</span>, -<span class="number">270</span>, c=<span class="string">&#x27;#561B03&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">33</span>, -<span class="number">270</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#561B03&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">64</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">7</span>, <span class="number">4.8</span>)</span><br><span class="line">    width(<span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">7</span>, <span class="number">4.8</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">8</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">40</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">50</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">50</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">33</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">33</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">7</span>, <span class="number">4</span>)</span><br><span class="line">    goto(<span class="number">33</span>, -<span class="number">270</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E3A830&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">68</span>, -<span class="number">263</span>, c=<span class="string">&#x27;#561B03&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">68</span>, -<span class="number">263</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#561B03&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">50</span>, <span class="number">0</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">40</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">1.5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">10</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">110</span>, <span class="number">1.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">40</span>, <span class="number">1.7</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E3A830&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    <span class="comment"># å·¦è„š</span></span><br><span class="line">    fill_color_patch(-<span class="number">26</span>, -<span class="number">257</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">26</span>, -<span class="number">257</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">5.5</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">12.5</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">10</span>, <span class="number">6</span>)</span><br><span class="line">    goto(-<span class="number">26</span>, -<span class="number">257</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#C782B0&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">27</span>, -<span class="number">257</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">27</span>, -<span class="number">257</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">152</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">24</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">11</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">20</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">10</span>, <span class="number">8</span>)</span><br><span class="line">    goto(-<span class="number">27</span>, -<span class="number">257</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E6D1E6&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">26</span>, -<span class="number">257</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">26</span>, -<span class="number">257</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#452100&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">5.5</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">12.5</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">7</span>, <span class="number">5</span>)</span><br><span class="line">    goto(-<span class="number">26</span>, -<span class="number">257</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#703507&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">27</span>, -<span class="number">257</span>, c=<span class="string">&#x27;#753507&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">27</span>, -<span class="number">257</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#753507&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">152</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">24</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">11</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">20</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">5</span>, <span class="number">4.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">7</span>, <span class="number">5</span>)</span><br><span class="line">    goto(-<span class="number">27</span>, -<span class="number">257</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#BC6A19&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">71</span>, -<span class="number">263</span>, c=<span class="string">&#x27;#753507&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">71</span>, -<span class="number">263</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#753507&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">68</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">10</span>, <span class="number">4.3</span>)</span><br><span class="line">    pencolor(<span class="string">&#x27;#753507&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">93</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">45</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">18</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">18</span>, <span class="number">5</span>)</span><br><span class="line">    pencolor(<span class="string">&#x27;#561B03&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">9</span>, <span class="number">4.8</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">92</span>, <span class="number">4</span>)</span><br><span class="line">    goto(-<span class="number">71</span>, -<span class="number">263</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E3A830&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">39</span>, -<span class="number">272</span>, c=<span class="string">&#x27;#561B03&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">39</span>, -<span class="number">272</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#561B03&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">0</span>)</span><br><span class="line">    right_rotate(<span class="number">7</span>, <span class="number">35</span>, <span class="number">1.7</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">25</span>, <span class="number">2.3</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">15</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">1.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">1.7</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">1.7</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">40</span>, <span class="number">1.8</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E3A830&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_body</span>():</span><br><span class="line">    <span class="comment"># èº«ä½“è½®å»“</span></span><br><span class="line">    fill_color_patch(<span class="number">28</span>, -<span class="number">162</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">28</span>, -<span class="number">162</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">145</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">9</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">11.5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">50</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">6.3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">3</span>, <span class="number">12</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">3</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">2</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">18</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">20</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">28</span>, -<span class="number">162</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    <span class="comment"># è„–å­</span></span><br><span class="line">    fill_color_patch(<span class="number">10</span>, -<span class="number">160</span>, c=<span class="string">&#x27;#FFB58A&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">9</span>, -<span class="number">160</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#FFB58A&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">142</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">4.8</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">4</span>)</span><br><span class="line">    goto(<span class="number">10</span>, -<span class="number">160</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#FFB58A&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    <span class="comment"># å³è¡£é¢†</span></span><br><span class="line">    fill_color_patch(<span class="number">20</span>, -<span class="number">162</span>, c=<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">20</span>, -<span class="number">162</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">3.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">32</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">142</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">11</span>, <span class="number">4</span>)</span><br><span class="line">    goto(<span class="number">20</span>, -<span class="number">162</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    <span class="comment"># ä¸­é—´æœ€å¤§çš„è¡£é¢†</span></span><br><span class="line">    fill_color_patch(-<span class="number">29</span>, -<span class="number">155</span>, c=<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">29</span>, -<span class="number">155</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">135</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">7</span>, <span class="number">8</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">17</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">1</span>, <span class="number">9</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">19</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">17.5</span>, <span class="number">1.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">4</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">2</span>, <span class="number">12.5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">19</span>, <span class="number">1.8</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">23</span>, <span class="number">1.8</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">6</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">132</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">59</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">62</span>, <span class="number">2.5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">17</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">3</span>, <span class="number">2.5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">26</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">2.5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">20</span>, <span class="number">1.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">82</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">1</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">2.8</span>, <span class="number">4.7</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">34</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">1</span>, <span class="number">4.8</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">20.8</span>, <span class="number">2.5</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">8</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">6.8</span>, <span class="number">5</span>)</span><br><span class="line">    goto(-<span class="number">29</span>, -<span class="number">155</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(-<span class="number">70</span>, -<span class="number">214</span>, w=<span class="number">1.5</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">175</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">7</span>, <span class="number">35</span>, <span class="number">1.8</span>)</span><br><span class="line">    set_start(-<span class="number">50</span>, -<span class="number">211</span>, w=<span class="number">1.5</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">170</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">36</span>, <span class="number">1.7</span>)</span><br><span class="line">    <span class="comment"># å·¦ä¾§æ‰‹è‡‚é»„è¾¹</span></span><br><span class="line">    fill_color_patch(-<span class="number">41.5</span>, -<span class="number">153</span>, c=<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">41.5</span>, -<span class="number">153</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">154</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10.2</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10.5</span>, <span class="number">4.5</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">5.5</span>, <span class="number">4.7</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">115</span>, <span class="number">5.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">65</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">11.5</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    goto(-<span class="number">41.5</span>, -<span class="number">153</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    <span class="comment"># å³ä¸‹è¡£è§’</span></span><br><span class="line">    fill_color_patch(<span class="number">57</span>, -<span class="number">218</span>, c=<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">57</span>, -<span class="number">218</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">175</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">6</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">31</span>, <span class="number">0.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">11</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">35</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">76</span>, <span class="number">11</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">20</span>, <span class="number">2</span>)</span><br><span class="line">    goto(<span class="number">57</span>, -<span class="number">218</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(<span class="number">53</span>, -<span class="number">219</span>, w=<span class="number">1.5</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">170</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">6</span>, <span class="number">40</span>, <span class="number">1.4</span>)</span><br><span class="line">    <span class="comment"># ä¿®å¤å¤´çš„è¾¹æ¡†</span></span><br><span class="line">    set_start(<span class="number">125</span>, -<span class="number">130</span>, w=<span class="number">4</span>, c=<span class="string">&#x27;#9392B3&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">78</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">18</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">6</span>, <span class="number">21</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">5</span>, <span class="number">18</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_hand</span>():</span><br><span class="line">    <span class="comment"># å³æ‰‹</span></span><br><span class="line">    fill_color_patch(<span class="number">81</span>, -<span class="number">179</span>, c=<span class="string">&#x27;#877E96&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">81</span>, -<span class="number">179</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#877E96&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">125</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">15</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">148</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">50</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">20</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">155</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">50</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">3.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">155</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">55</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">81</span>, -<span class="number">179</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#DFDBF1&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">51.68</span>, -<span class="number">193.93</span>, c=<span class="string">&#x27;#A0A6A1&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">51.68</span>, -<span class="number">193.93</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#A0A6A1&#x27;</span>)</span><br><span class="line">    setheading(<span class="number">295</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">94</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">4.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">110</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">4.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">12</span>, <span class="number">4.5</span>)</span><br><span class="line">    width(<span class="number">1</span>)</span><br><span class="line">    pencolor(<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    goto(<span class="number">51.68</span>, -<span class="number">193.93</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#DFE9E1&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">28</span>, -<span class="number">162</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">28</span>, -<span class="number">162</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">145</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">9</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line">    pencolor(<span class="string">&#x27;#A0A6A1&#x27;</span>)</span><br><span class="line">    width(<span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">94</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">4</span>)</span><br><span class="line">    pencolor(<span class="string">&#x27;#824A0C&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">55</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">4</span>, <span class="number">6.2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">    width(<span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">18</span>, <span class="number">3</span>)</span><br><span class="line">    pencolor(<span class="string">&#x27;#F2D95D&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">0</span>, <span class="number">4</span>)</span><br><span class="line">    goto(<span class="number">28</span>, -<span class="number">163</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#F2D918&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    <span class="comment"># å·¦æ‰‹</span></span><br><span class="line">    fill_color_patch(-<span class="number">71.76</span>, -<span class="number">185.88</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">71.76</span>, -<span class="number">185.88</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    setheading(<span class="number">44.8</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">5</span>)</span><br><span class="line">    pencolor(<span class="string">&#x27;#996B09&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">50</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">75</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">2</span>, <span class="number">7.5</span>)</span><br><span class="line">    width(<span class="number">2</span>)</span><br><span class="line">    pencolor(<span class="string">&#x27;#B4660D&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">75</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">4</span>, <span class="number">8</span>, <span class="number">4</span>)</span><br><span class="line">    goto(-<span class="number">71.76</span>, -<span class="number">185.88</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#F2D918&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">88</span>, -<span class="number">134</span>, c=<span class="string">&#x27;#877E96&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">88</span>, -<span class="number">134</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#877E96&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">95</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">48</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">29</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">45</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">24</span>, <span class="number">3.5</span>)</span><br><span class="line">    set_start(-<span class="number">106.5</span>, -<span class="number">129</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#877E96&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">2.5</span>)</span><br><span class="line">    set_start(-<span class="number">119</span>, -<span class="number">141</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#877E96&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">15</span>, <span class="number">3.7</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">40</span>, <span class="number">2.5</span>)</span><br><span class="line">    set_start(-<span class="number">118</span>, -<span class="number">149</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#877E96&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">15</span>, <span class="number">4.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">40</span>, <span class="number">2.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">15</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">5</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">55</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">70</span>, <span class="number">10</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">16</span>, <span class="number">6.5</span>)</span><br><span class="line">    goto(-<span class="number">88</span>, -<span class="number">134</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#DFDBF1&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">112</span>, -<span class="number">164</span>, c=<span class="string">&#x27;#A0A6A1&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">112</span>, -<span class="number">164</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#A0A6A1&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">130</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">16</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">13</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">7</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">15</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">45</span>, <span class="number">22</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">160</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">17</span>, <span class="number">5</span>)</span><br><span class="line">    width(<span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">17</span>, <span class="number">4</span>)</span><br><span class="line">    goto(-<span class="number">112</span>, -<span class="number">164</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#DFE9E1&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_clothes</span>():</span><br><span class="line">    <span class="comment"># å³ä¾§è¡£æœé¢œè‰²</span></span><br><span class="line">    fill_color_patch(<span class="number">32</span>, -<span class="number">170</span>, c=<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">32</span>, -<span class="number">170</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">13</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">28</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">40</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>)</span><br><span class="line">    goto(<span class="number">25.18</span>, -<span class="number">208.63</span>)</span><br><span class="line">    setheading(<span class="number">85.632</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">9</span>, <span class="number">12</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">25</span>, <span class="number">2</span>)</span><br><span class="line">    goto(<span class="number">32</span>, -<span class="number">170</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">32</span>, -<span class="number">170</span>, c=<span class="string">&#x27;#D5464D&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">32</span>, -<span class="number">170</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#D5464D&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">150</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">13</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">28</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">9</span>, <span class="number">14</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">    goto(<span class="number">32</span>, -<span class="number">170</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#D5464D&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">20</span>, -<span class="number">175</span>, c=<span class="string">&#x27;#E61110&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">20</span>, -<span class="number">175</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#E61110&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">152</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">34</span>, <span class="number">1.5</span>)</span><br><span class="line">    goto(<span class="number">20</span>, -<span class="number">175</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E61110&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    <span class="comment"># å·¦ä¾§è¡£æœé¢œè‰²</span></span><br><span class="line">    fill_color_patch(-<span class="number">36</span>, -<span class="number">159</span>, c=<span class="string">&#x27;#E80604&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">36</span>, -<span class="number">159</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#E80604&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">8</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">9</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">11</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">19</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">15.5</span>, <span class="number">1.2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">4</span>, <span class="number">9</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">28</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">12</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>)</span><br><span class="line">    goto(-<span class="number">37</span>, -<span class="number">159</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E80604&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    <span class="comment"># è£™å­é»„è¾¹</span></span><br><span class="line">    fill_color_patch(<span class="number">68</span>, -<span class="number">244</span>, c=<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">68</span>, -<span class="number">244</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">175</span>, <span class="number">6.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">92</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">4</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">3.2</span>, <span class="number">17</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">103</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">4.8</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">3.6</span>, <span class="number">15</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">3.6</span>, <span class="number">10</span>)</span><br><span class="line">    goto(<span class="number">68</span>, -<span class="number">244</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    <span class="comment"># è£™å­é¢œè‰²</span></span><br><span class="line">    fill_color_patch(<span class="number">66</span>, -<span class="number">243</span>, c=<span class="string">&#x27;#E80604&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">66</span>, -<span class="number">243</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#E80604&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">92</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">4</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">3</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">32</span>, <span class="number">1.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">8</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">3</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">6</span>, <span class="number">15</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">4.5</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">66</span>, -<span class="number">243</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E80604&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">66</span>, -<span class="number">243</span>, c=<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">66</span>, -<span class="number">243</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">92</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">32</span>, <span class="number">1.5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">8</span>, <span class="number">9</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">122</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">66</span>, -<span class="number">243</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(<span class="number">67</span>, -<span class="number">243</span>, c=<span class="string">&#x27;#D5464D&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">67</span>, -<span class="number">243</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#D5464D&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">91</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">5</span>, <span class="number">4.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">145</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">67</span>, -<span class="number">243</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#D5464D&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    <span class="comment"># çº½æ‰£</span></span><br><span class="line">    fill_color_patch(<span class="number">9</span>, -<span class="number">179</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">9</span>, -<span class="number">179</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">105</span>, <span class="number">9</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">32</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">35</span>, <span class="number">1.7</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">1.2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">32</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">110</span>, <span class="number">9</span>)</span><br><span class="line">    goto(<span class="number">9</span>, -<span class="number">179</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(-<span class="number">5</span>, -<span class="number">183</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">160</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">38</span>, <span class="number">1.2</span>)</span><br><span class="line">    set_start(-<span class="number">5</span>, -<span class="number">188</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">0</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">38</span>, <span class="number">1.2</span>)</span><br><span class="line">    fill_color_patch(<span class="number">13</span>, -<span class="number">196</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">13</span>, -<span class="number">196</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">85</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">35</span>, <span class="number">1.9</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">1.3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">1.8</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">33</span>, <span class="number">1.3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">95</span>, <span class="number">10</span>)</span><br><span class="line">    goto(<span class="number">13</span>, -<span class="number">196</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(-<span class="number">2</span>, -<span class="number">198</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">160</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">36</span>, <span class="number">1.2</span>)</span><br><span class="line">    set_start(-<span class="number">1</span>, -<span class="number">202</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">0</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">36</span>, <span class="number">1</span>)</span><br><span class="line">    fill_color_patch(<span class="number">15</span>, -<span class="number">176</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">15</span>, -<span class="number">176</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">9</span>, <span class="number">30</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">70</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">32</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">35</span>, <span class="number">1.7</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">32</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">110</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">15</span>, -<span class="number">176</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(<span class="number">22</span>, -<span class="number">172</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">160</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">35</span>, <span class="number">1.2</span>)</span><br><span class="line">    set_start(<span class="number">25</span>, -<span class="number">176</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">0</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">35</span>, <span class="number">1</span>)</span><br><span class="line">    fill_color_patch(<span class="number">20</span>, -<span class="number">194</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">20</span>, -<span class="number">194</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">9</span>, <span class="number">29</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">70</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">32</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">1.7</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">35</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">32</span>, <span class="number">1.5</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">35</span>, <span class="number">1.7</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">20</span>, -<span class="number">194</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E5B712&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(<span class="number">28</span>, -<span class="number">193</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">160</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">35</span>, <span class="number">1</span>)</span><br><span class="line">    set_start(<span class="number">30</span>, -<span class="number">197</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#865908&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">0</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">35</span>, <span class="number">1</span>)</span><br><span class="line">    fill_color_patch(<span class="number">13.2</span>, -<span class="number">184</span>, c=<span class="string">&#x27;#801C00&#x27;</span>)</span><br><span class="line">    set_start(<span class="number">13.2</span>, -<span class="number">184</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#801C00&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">3.5</span>, <span class="string">&#x27;#801C00&#x27;</span>)</span><br><span class="line">    fill_color_patch(<span class="number">12.8</span>, -<span class="number">183</span>, c=<span class="string">&#x27;#DB2E32&#x27;</span>)</span><br><span class="line">    set_start(<span class="number">12.8</span>, -<span class="number">183</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#DB2E32&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">2.3</span>, <span class="string">&#x27;#DB2E32&#x27;</span>)</span><br><span class="line">    fill_color_patch(<span class="number">13</span>, -<span class="number">181</span>, c=<span class="string">&#x27;#F06243&#x27;</span>)</span><br><span class="line">    set_start(<span class="number">13</span>, -<span class="number">181</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#F06243&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">1</span>, <span class="string">&#x27;#F06243&#x27;</span>)</span><br><span class="line">    fill_color_patch(<span class="number">17</span>, -<span class="number">202</span>, c=<span class="string">&#x27;#801C00&#x27;</span>)</span><br><span class="line">    set_start(<span class="number">17</span>, -<span class="number">202</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#801C00&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">3.5</span>, <span class="string">&#x27;#801C00&#x27;</span>)</span><br><span class="line">    fill_color_patch(<span class="number">16.8</span>, -<span class="number">201</span>, c=<span class="string">&#x27;#DB2E32&#x27;</span>)</span><br><span class="line">    set_start(<span class="number">16.8</span>, -<span class="number">201</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#DB2E32&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">2.3</span>, <span class="string">&#x27;#DB2E32&#x27;</span>)</span><br><span class="line">    fill_color_patch(<span class="number">16.8</span>, -<span class="number">199</span>, c=<span class="string">&#x27;#F06243&#x27;</span>)</span><br><span class="line">    set_start(<span class="number">16.8</span>, -<span class="number">199</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#F06243&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">1</span>, <span class="string">&#x27;#F06243&#x27;</span>)</span><br><span class="line">    <span class="comment"># ç”»è¡£æœä¸Šçš„åœ†å½¢å›¾æ¡ˆ</span></span><br><span class="line">    fill_color_patch(<span class="number">55</span>, -<span class="number">212</span>, c=<span class="string">&#x27;#DF3370&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">55</span>, -<span class="number">212</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    setheading(<span class="number">287</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">28</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">40</span>, <span class="number">5</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">70</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">18</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">25</span>, <span class="number">2.5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">2.5</span>)</span><br><span class="line">    goto(<span class="number">55</span>, -<span class="number">212</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#DF3370&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(<span class="number">52</span>, -<span class="number">213</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">4.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">4.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">15</span>, <span class="number">1.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">3.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">1</span>)</span><br><span class="line">    left_rotate(<span class="number">5</span>, <span class="number">20</span>, <span class="number">1.2</span>)</span><br><span class="line">    set_start(<span class="number">39</span>, -<span class="number">212</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">105</span>, <span class="number">5.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">95</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">15</span>, <span class="number">1.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">60</span>, <span class="number">3.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">95</span>, <span class="number">3</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">20</span>, <span class="number">1.2</span>)</span><br><span class="line">    fill_color_patch(<span class="number">55</span>, -<span class="number">233</span>, c=<span class="string">&#x27;#DF3370&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(<span class="number">55</span>, -<span class="number">233</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#DF3370&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">155</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">30</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">18</span>, <span class="number">3.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">78</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    goto(<span class="number">55</span>, -<span class="number">233</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#DF3370&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(<span class="number">50</span>, -<span class="number">242</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">0</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">1.5</span>)</span><br><span class="line">    set_start(<span class="number">53</span>, -<span class="number">233</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">3</span>)</span><br><span class="line">    set_start(<span class="number">46</span>, -<span class="number">243</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">6</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">18</span>, <span class="number">1.8</span>)</span><br><span class="line">    set_start(<span class="number">36</span>, -<span class="number">235</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#AB1A21&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">95</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">95</span>, <span class="number">3.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">1.2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">50</span>, <span class="number">5</span>)</span><br><span class="line">    fill_color_patch(-<span class="number">32</span>, -<span class="number">220</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">32</span>, -<span class="number">220</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">24</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">15</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">55</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">50</span>, <span class="number">4</span>)</span><br><span class="line">    goto(-<span class="number">32</span>, -<span class="number">220</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#B23253&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(-<span class="number">42</span>, -<span class="number">240</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">10</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">95</span>, <span class="number">8</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">0</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">22</span>, <span class="number">2.5</span>)</span><br><span class="line">    set_start(-<span class="number">30</span>, -<span class="number">230</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">98</span>, <span class="number">11</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">9</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">0</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">20</span>, <span class="number">1.8</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">35</span>, <span class="number">7</span>)</span><br><span class="line">    fill_color_patch(-<span class="number">75</span>, -<span class="number">199</span>, c=<span class="string">&#x27;#B23253&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">75</span>, -<span class="number">199</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#B23253&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">20</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">17</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">40</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">113</span>, <span class="number">5</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line">    goto(-<span class="number">75</span>, -<span class="number">199</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#B23253&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(-<span class="number">77</span>, -<span class="number">203</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">3</span>)</span><br><span class="line">    set_start(-<span class="number">73</span>, -<span class="number">208</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">3</span>)</span><br><span class="line">    set_start(-<span class="number">77</span>, -<span class="number">212</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#94020C&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_jade</span>():</span><br><span class="line">    <span class="comment"># ç‰ä½©</span></span><br><span class="line">    fill_color_patch(-<span class="number">60</span>, -<span class="number">225</span>, c=<span class="string">&#x27;#964B14&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">60</span>, -<span class="number">225</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#964B14&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">100</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">18</span>, <span class="number">2.5</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">50</span>, <span class="number">0</span>)</span><br><span class="line">    right_rotate(<span class="number">6</span>, <span class="number">30</span>, <span class="number">7</span>)</span><br><span class="line">    right_rotate(<span class="number">4</span>, <span class="number">18</span>, <span class="number">3.2</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">0</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">28</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">20</span>, <span class="number">4</span>)</span><br><span class="line">    left_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">2</span>, <span class="number">30</span>, <span class="number">1.5</span>)</span><br><span class="line">    goto(-<span class="number">60</span>, -<span class="number">225</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#D99024&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">69.8</span>, -<span class="number">252.5</span>, c=<span class="string">&#x27;#2D5835&#x27;</span>)</span><br><span class="line">    set_start(-<span class="number">69.8</span>, -<span class="number">252.5</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#2D5835&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">9.5</span>, <span class="string">&#x27;#2D5835&#x27;</span>)</span><br><span class="line">    fill_color_patch(-<span class="number">69</span>, -<span class="number">251</span>, c=<span class="string">&#x27;#289884&#x27;</span>)</span><br><span class="line">    set_start(-<span class="number">69</span>, -<span class="number">251</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#289884&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">8</span>, <span class="string">&#x27;#289884&#x27;</span>)</span><br><span class="line">    fill_color_patch(-<span class="number">67</span>, -<span class="number">248.5</span>, c=<span class="string">&#x27;#36D0C4&#x27;</span>)</span><br><span class="line">    set_start(-<span class="number">67</span>, -<span class="number">248.5</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#36D0C4&#x27;</span>)</span><br><span class="line">    draw_circle(<span class="number">6</span>, <span class="string">&#x27;#36D0C4&#x27;</span>)</span><br><span class="line">    set_start(-<span class="number">58</span>, -<span class="number">223</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#791500&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">185</span>, <span class="number">10</span>)</span><br><span class="line">    set_start(-<span class="number">60.8</span>, -<span class="number">222</span>, w=<span class="number">2</span>, c=<span class="string">&#x27;#791500&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">175</span>, <span class="number">10</span>)</span><br><span class="line">    fill_color_patch(-<span class="number">73</span>, -<span class="number">255</span>, c=<span class="string">&#x27;#964B14&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">73</span>, -<span class="number">255</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#964B14&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">145</span>, <span class="number">6</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">2.5</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">80</span>, <span class="number">5.5</span>)</span><br><span class="line">    goto(-<span class="number">73</span>, -<span class="number">255</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#D99024&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    fill_color_patch(-<span class="number">84</span>, -<span class="number">257</span>, c=<span class="string">&#x27;#791500&#x27;</span>)</span><br><span class="line">    begin_fill()</span><br><span class="line">    set_start(-<span class="number">84</span>, -<span class="number">257</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#791500&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">40</span>, <span class="number">4</span>)</span><br><span class="line">    right_rotate(<span class="number">5</span>, <span class="number">30</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">4</span>)</span><br><span class="line">    set_start(-<span class="number">84</span>, -<span class="number">257</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#791500&#x27;</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">90</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">15</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">1</span>, <span class="number">30</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">20</span>, <span class="number">3</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">42</span>, <span class="number">2</span>)</span><br><span class="line">    left_rotate(<span class="number">3</span>, <span class="number">33</span>, <span class="number">2</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">47</span>, <span class="number">1</span>)</span><br><span class="line">    right_rotate(<span class="number">3</span>, <span class="number">7</span>, <span class="number">2.5</span>)</span><br><span class="line">    goto(-<span class="number">84</span>, -<span class="number">257</span>)</span><br><span class="line">    fillcolor(<span class="string">&#x27;#E43628&#x27;</span>)</span><br><span class="line">    end_fill()</span><br><span class="line">    set_start(-<span class="number">87</span>, -<span class="number">261</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#791500&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">4</span>)</span><br><span class="line">    set_start(-<span class="number">86</span>, -<span class="number">263</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#791500&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">3</span>)</span><br><span class="line">    set_start(-<span class="number">85</span>, -<span class="number">264</span>, w=<span class="number">1</span>, c=<span class="string">&#x27;#791500&#x27;</span>)</span><br><span class="line">    left_rotate(<span class="number">1</span>, <span class="number">140</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    title(<span class="string">&#x27;å‰é€”ä¼¼é”¦&#x27;</span>)</span><br><span class="line">    wide = <span class="number">800</span></span><br><span class="line">    height = <span class="number">600</span></span><br><span class="line">    screensize(wide, height, <span class="string">&#x27;#DC0058&#x27;</span>)</span><br><span class="line">    setup(wide+<span class="number">30</span>, height+<span class="number">30</span>, <span class="number">50</span>, <span class="number">10</span>)</span><br><span class="line">    shape(name=<span class="string">&#x27;turtle&#x27;</span>)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    draw_ear()</span><br><span class="line">    draw_cat()</span><br><span class="line">    draw_head()</span><br><span class="line">    draw_face()</span><br><span class="line">    draw_mouth()</span><br><span class="line">    draw_eye()</span><br><span class="line">    draw_eyebrow()</span><br><span class="line">    draw_nose()</span><br><span class="line">    draw_cheek()</span><br><span class="line">    draw_forehead()</span><br><span class="line">    draw_foot()</span><br><span class="line">    draw_body()</span><br><span class="line">    draw_hand()</span><br><span class="line">    draw_clothes()</span><br><span class="line">    draw_jade()</span><br><span class="line"></span><br><span class="line">    set_start(<span class="number">1000</span>, <span class="number">1000</span>, <span class="number">2.5</span>)</span><br><span class="line">    done()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æœ¬æ–‡å‚è€ƒé“¾æ¥</p>
<a href="https://blog.csdn.net/weixin_43790276/article/details/128650616" title="" target="">ç”¨Pythonç”»ä¸€åªå°å…”å­ï¼Œç¥æ‚¨æ–°å¹´å‰é€”ä¼¼é”¦ï¼Œå¤§å±•å®å›¾,</a>]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
        <category>Pythonç»˜å›¾</category>
        <category>åˆ›æ„ç¼–ç¨‹</category>
        <category>æŠ–éŸ³çƒ­é—¨</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>ç»˜å›¾</tag>
        <tag>åˆ›æ„ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ›å»ºWiFiçƒ­ç‚¹æ–¹æ³•åˆ†äº«</title>
    <url>/1879.html</url>
    <content><![CDATA[<p>æ­¤æ–¹æ³•åˆ›å»ºwifiçƒ­ç‚¹ï¼Œç¬”è®°æœ¬å’Œå°å¼ç”µè„‘éƒ½é€‚ç”¨ï¼Œä½†æœ‰ä¸¤ä¸ªåŸºæœ¬è¦æ±‚<br>1ã€ç”µè„‘æœ‰æ— çº¿ç½‘å¡<br>2ã€ç”µè„‘æ¥å…¥æœ‰çº¿ç½‘</p>
<p>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š<br><strong>1ã€</strong>æ‰“å¼€ç”µè„‘<code>è¿è¡Œ</code>ï¼Œè¾“å…¥<code>cmd</code>å›è½¦ï¼Œæ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼›</p>
<p><strong>2ã€</strong>åœ¨å‘½ä»¤è¡Œçª—å£ä¸­è¾“å…¥å‘½ä»¤</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">netsh wlan set hostednetwork mode=allow ssid=fengge key=fengge520</span><br></pre></td></tr></table></figure>

<p>ssid&#x3D;fengge æ­¤å¤„è®¾ç½®wifiå¸å·ï¼Œfenggeä¸ºwifi çƒ­ç‚¹è´¦å·<br>key&#x3D;fengge520 æ­¤å¤„è®¾ç½®wifiå¯†ç ï¼Œfengge520ä¸ºwifiçƒ­ç‚¹å¯†ç </p>
<p><strong>3ã€</strong> ç‚¹å‡»å³ä¸‹è§’ç½‘ç»œå›¾æ ‡,æ‰“å¼€ç½‘ç»œå…±äº«ä¸­å¿ƒ.</p>
<p><strong>4ã€</strong> æ›´æ”¹é€‚é…å™¨è®¾ç½®<br><strong>5ã€</strong>æˆ‘ä»¬ä¼šå‘ç°é»˜è®¤çš„æ— çº¿ç½‘ç»œè¿æ¥ä¹‹å¤–å¤šäº†ä¸€ä¸ª<code>æ— çº¿ç½‘ç»œè¿æ¥2</code>.è¿™ä¸ªå°±æ˜¯ç”¨æ¥æ‰¿è½½wifiçš„æ— çº¿è¿æ¥<br><strong>6ã€</strong>å³å‡»<code>æœ¬åœ°è¿æ¥</code>,é€‰æ‹©<code>å±æ€§</code>,å†é€‰æ‹©<code>å…±äº«</code>,å¹¶æŠŠè¿æ¥å…±äº«ä¸‹é¢çš„ä¸¤ä¸ªå‹¾ä¸Š</p>
<p>æ³¨æ„:å®¶åº­ç½‘ç»œè¿æ¥é€‰æ‹©åˆšåˆšæ–°å¢çš„æ— çº¿ç½‘ç»œè¿æ¥,ç¬”è€…è¿™é‡Œæ˜¯æ— çº¿ç½‘ç»œè¿æ¥2</p>
<p><strong>7ã€</strong>å†å›åˆ°å‘½ä»¤è¡Œçª—å£,è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼Œå¯åŠ¨wifiçƒ­ç‚¹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">netsh wlan start hostednetwork</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¾ç¤º<code>å·²æ‰¿è½½ç½‘ç»œ</code>,è¯´æ˜wifiå·²ç»æˆåŠŸå¯åŠ¨.</p>
<p>è¿™é‡Œ,æ‚¨åœ¨å…¶ä»–çš„ç”µè„‘æˆ–è€…æ‰‹æœºä¸Šå°±èƒ½æœç´¢åˆ°æ‚¨è‡ªå·±è®¾ç½®çš„wifiçƒ­ç‚¹äº†<br><strong>8ã€</strong>å¦‚æœè¦å…³é—­wifiçƒ­ç‚¹,è¾“å…¥å‘½ä»¤</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">netsh wlan stop hostednetwork</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¾ç¤º<code>åœæ­¢æ‰¿è½½ç½‘ç»œ</code>,è¯´æ˜wifiå…³é—­æˆåŠŸ</p>
<p><strong>è¯¥æ–¹æ³•åœ¨æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™éƒ½éœ€è¦è¿›è¡Œç¬¬7æ­¥ï¼Œå¦‚æœæ‚¨è§‰å¾—éº»çƒ¦ï¼Œå¯ä»¥åœ¨ç”µè„‘æ¡Œé¢æ–°å»ºä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œæ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™åªéœ€è¦è¿è¡Œè„šæœ¬å³å¯ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</strong><br>é¦–å…ˆåœ¨æ¡Œé¢æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼Œåœ¨æ–‡æœ¬æ–‡æ¡£ä¸­è¾“å…¥<code>netsh wlan start hostednetwork</code>è¿™æ¡å¯åŠ¨wifiçƒ­ç‚¹çš„å‘½ä»¤</p>
<p>ç„¶åå†ä¿å­˜é€€å‡ºï¼Œå°†æ–‡ä»¶åæ”¹ä¸ºè‹±æ–‡ï¼Œæ–‡ä»¶åç¼€æ”¹ä¸º<code>.bat</code>,å†ç”¨é¼ æ ‡åŒå‡»è¿è¡Œè¯¥è„šæœ¬å³å¯ã€‚<br>æ³¨æ„ï¼Œæ”¹å®Œåæ–‡ä»¶ä¼šå˜æˆä¸‹é¢è¿™ä¸ªæ ·å­</p>
<p>æœ¬åšå®¢ä»…ä¾›å‚è€ƒï¼Œå¸Œæœ›å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©</p>
]]></content>
      <categories>
        <category>æ•™ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title>ç»™hexoåšå®¢æ·»åŠ å†å²ä¸Šçš„ä»Šå¤©ä¾§è¾¹æ </title>
    <url>/bfdsa78.html</url>
    <content><![CDATA[<h3 id="æ•…äº‹èƒŒæ™¯"><a href="#æ•…äº‹èƒŒæ™¯" class="headerlink" title="æ•…äº‹èƒŒæ™¯"></a>æ•…äº‹èƒŒæ™¯</h3><p>è¶ç€å‘¨æœ«ï¼Œå°†æ–‡ç« çš„ä¸»é¢˜å‡çº§äº†ä¸€éï¼Œä¸å°å¿ƒæŠŠ<code>å†å²ä¸Šçš„ä»Šå¤©</code>ä¾§è¾¹æ ç»™å¼„ä¸¢äº†ï¼Œä»Šå¤©æ˜¯èŠ±äº†ä¸€ç‚¹æ—¶é—´æ‰¾äº†å›æ¥ï¼Œå¹¶è®°å½•ä¸€ä¸‹ï¼Œä¸‡ä¸€ä¸‹æ¬¡ä¸è§äº†ï¼Œå°±ä¸ç”¨åˆ°å¤„æ‰¾äº†~</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="åšçš„åŸå› "><a href="#åšçš„åŸå› " class="headerlink" title="åšçš„åŸå› "></a>åšçš„åŸå› </h3><p>æˆ–è®¸å¾ˆå¤šäººä¼šå¾ˆå¥‡æ€ªï¼Œåšå®¢ä¸ºä»€ä¹ˆä¸€å®šè¦æœ‰<code>å†å²ä¸Šçš„ä»Šå¤©</code>ã€‚åŸå› å¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘å¼„äº†ä¸ªæŠ–éŸ³ï¼Œå°±æ˜¯å‘è¿™ä¸ªå†å²ä¸Šçš„ä»Šå¤©ï¼Œè§†é¢‘ç›´æ¥å°±æ˜¯ç½‘ç«™å½•å±ï¼Œå¦‚æœåšå®¢æ²¡æœ‰è¿™ä¸ªä¸œè¥¿ï¼Œæˆ‘å°±è¦æ–­æ›´äº†(å…¶å®å·²ç»æ–­æ›´ä¸€å¤©äº†)ï¼Œé¡ºå¸¦è´´ä¸‹è‡ªå·±çš„æŠ–éŸ³ï¼Œå„ä½å°ä¼™ä¼´æœ‰å¯ä»¥å…³æ³¨ä¸‹å•¦~</p>
<p><a href="https://www.douyin.com/user/MS4wLjABAAAAGVvxXoafRJrfCUH8PiT5yO--ToMDJnA_7UpHsFucUuQDDEF4aHy6XOAIedS4rD7W">æŠ–éŸ³é“¾æ¥</a></p>
<h3 id="å®ç°æ–¹æ³•"><a href="#å®ç°æ–¹æ³•" class="headerlink" title="å®ç°æ–¹æ³•"></a>å®ç°æ–¹æ³•</h3><p>ç½‘ä¸Šæœ‰å¾ˆå¤šå®ç°æ–¹æ³•ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†éƒ½æ¯”è¾ƒç¹çï¼Œæˆ‘è¿™é‡Œå°±ç®€å•ä»‹ç»ä¸‹æˆ‘çš„åšæ³•å§ã€‚</p>
<ol>
<li>å®‰è£…æ’ä»¶ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤<br><code>npm i hexo-history-calendar --save</code></li>
<li>å®‰è£…å¥½æ’ä»¶åï¼Œåœ¨ç«™ç‚¹çš„<code>_config.yml</code>æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä¸‹é¢è¯­å¥ï¼š<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é‚£å¹´ä»Šæ—¥</span></span><br><span class="line"><span class="attr">history_calendar:</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">4</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">layout:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">class</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">sticky_layout</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">temple_html:</span> <span class="string">&#x27;&lt;div class=&quot;card-widget card-history&quot;&gt;&lt;div class=&quot;card-content&quot;&gt;&lt;div class=&quot;item-headline&quot;&gt;&lt;i class=&quot;fas fa-clock fa-spin&quot;&gt;&lt;/i&gt;&lt;span&gt;é‚£å¹´ä»Šæ—¥&lt;/span&gt;&lt;/div&gt;&lt;div id=&quot;history-baidu&quot; style=&quot;height: 100px;overflow: hidden&quot;&gt;&lt;div class=&quot;history_swiper-container&quot; id=&quot;history-container&quot; style=&quot;width: 100%;height: 100%&quot;&gt;&lt;div class=&quot;swiper-wrapper&quot; id=&quot;history_container_wrapper&quot; style=&quot;height:20px&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span></span><br></pre></td></tr></table></figure>
ä¸Šé¢éƒ½åšå¥½åï¼Œä¸€é”®ä¸‰è¿å°±å¯ä»¥çœ‹åˆ°æ•ˆæœå•¦~</li>
</ol>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
  </entry>
  <entry>
    <title>Luaè¿ç»­æ•™ç¨‹ä¹‹Luaçº¿ç¨‹å’ŒçŠ¶æ€</title>
    <url>/43588.html</url>
    <content><![CDATA[<p>Luaè¯­è¨€ä¸æ”¯æŒçœŸæ­£çš„å¤šçº¿ç¨‹ï¼Œå³ä¸æ”¯æŒå…±äº«å†…å­˜çš„æŠ¢å å¼çº¿ç¨‹ã€‚åŸå› æœ‰ä¸¤ä¸ªï¼Œå…¶ä¸€æ˜¯IOS Cæ²¡æœ‰æä¾›è¿™æ ·çš„åŠŸèƒ½ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰å¯ç§»æ¤çš„æ–¹æ³•èƒ½åœ¨Luaä¸­å®ç°è¿™ç§æœºåˆ¶ï¼š</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å…¶äºŒï¼Œä¹Ÿæ˜¯æ›´é‡è¦çš„åŸå› ï¼Œåœ¨äºæˆ‘ä»¬è®¤ä¸ºåœ¨Luaä¸­å¼•å…¥å¤šçº¿ç¨‹ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚<br>å¤šçº¿ç¨‹ä¸€èˆ¬ç”¨äºåº•å±‚ç¼–ç¨‹ã€‚åƒä¿¡å·é‡å’Œç›‘è§†å™¨è¿™æ ·çš„åŒæ­¥æœºåˆ¶ä¸€èˆ¬éƒ½æ˜¯æ“ä½œç³»ç»Ÿä¸Šä¸‹æ–‡æä¾›çš„ï¼Œè€Œéåº”ç”¨ç¨‹åºæä¾›ã€‚è¦æŸ¥æ‰¾å’Œçº æ­£å¤šçº¿ç¨‹ç›¸å…³çš„bugæ˜¯å¾ˆå›°éš¾çš„ï¼Œå…¶ä¸­æœ‰äº›Bugè¿˜ä¼šå¯¼è‡´å®‰å…¨éšæ‚£ã€‚æ­¤å¤–ï¼Œç¨‹åºä¸­çš„ä¸€äº›éœ€è¦åŒæ­¥çš„ä¸´ç•ŒåŒºè¿˜å¯èƒ½ç”±äºåŒæ­¥è€Œå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚<br>å¤šçº¿ç¨‹çš„è¿™äº›é—®é¢˜æºäºçº¿ç¨‹æŠ¢å å’Œå…±äº«å†…å­˜ï¼Œå› æ­¤å¦‚æœä½¿ç”¨éæŠ¢å…ˆå¼çš„çº¿ç¨‹åè€…ä¸ä½¿ç”¨å…±äº«å†…å­˜å°±å¯ä»¥é¿å…è¿™äº›é—®é¢˜ã€‚Luaè¯­è¨€åŒæ—¶æ”¯æŒè¿™ä¸¤ç§æ–¹æ¡ˆã€‚Luaè¯­è¨€çš„çº¿ç¨‹æ˜¯åä½œå¼çš„ï¼Œå› æ­¤å¯ä»¥é¿å…å› ä¸å¯é¢„çŸ¥çš„çº¿ç¨‹åˆ‡æ¢è€Œå¸¦æ¥çš„é—®é¢˜ã€‚å¦ä¸€æ–¹é¢ï¼ŒLuaçŠ¶æ€ä¹‹é—´ä¸å…±äº«å†…å­˜ï¼Œå› æ­¤ä¹Ÿä¸ºLuaè¯­è¨€ä¸­å®ç°å¹¶è¡ŒåŒ–æä¾›äº†è‰¯å¥½åŸºç¡€ã€‚</p>
<h2 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h2><p>åœ¨Luaè¯­è¨€ä¸­ï¼Œåç¨‹çš„æœ¬è´¨å°±æ˜¯çº¿ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸ºåç¨‹æ˜¯å¸¦æœ‰è‰¯å¥½ç¼–ç¨‹æ¥å£çš„çº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºçº¿ç¨‹æ˜¯å¸¦æœ‰åº•å±‚APIçš„åç¨‹ã€‚<br>ä»C APIçš„è§’åº¦æ¥çœ‹ï¼ŒæŠŠçº¿ç¨‹å½“ä½œä¸€ä¸ªæ ˆä¼šæ¯”è¾ƒæœ‰ç”¨ï¼›è€Œä»å®ç°çš„è§’åº¦æ¥çœ‹ï¼Œæ ˆå®é™…ä¸Šå°±æ˜¯çº¿ç¨‹ã€‚æ¯ä¸ªç«™éƒ½ä¿å­˜ç€ä¸€ä¸ªçº¿ç¨‹ä¸­æŒ‚èµ·çš„å‡½æ•°è°ƒç”¨ä¿¡æ¯ï¼Œå¤–åŠ æ¯ä¸ªå‡½æ•°è°ƒç”¨çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªæ ˆåŒ…æ‹¬äº†ä¸€ä¸ªçº¿ç¨‹å¾—ä»¥ç»§ç»­è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚å› æ­¤ï¼Œå¤šä¸ªçº¿ç¨‹å°±æ„å‘³ç€å¤šä¸ªç‹¬ç«‹çš„æ ˆã€‚<br>Luaè¯­è¨€ä¸­ CAPIçš„å¤§å¤šæ•°å‡½æ•°æ“ä½œçš„ç‰¹å®šçš„æ ˆï¼ŒLuaæ˜¯å¦‚ä½•çŸ¥é“åº”è¯¥ä½¿ç”¨å“ªä¸ªæ ˆçš„å‘¢ï¼Ÿå½“è°ƒç”¨lua_pushnumberæ—¶ï¼Œæ˜¯æ€ä¹ˆåˆ¶å®šå°†æ•°å­—å‹å…¥ä½•å¤„çš„å‘¢ï¼Ÿç§˜å¯†åœ¨äºlua_Stateç±»å‹ï¼Œå³è¿™äº›å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå®ƒä¸ä»…è¡¨ç¤ºä¸€ä¸ªLuaçŠ¶æ€ï¼Œè¿˜è¡¨ç¤ºå¸¦æœ‰è¯¥çŠ¶æ€çš„ä¸€ä¸ªçº¿ç¨‹ã€‚<br>å½“åˆ›å»ºä¸€ä¸ªLuaçŠ¶æ€æ—¶ï¼ŒLuaå°±ä¼šè‡ªåŠ¨ç”¨è¿™ä¸ªçŠ¶æ€åˆ›å»ºä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œå¹¶è¿”å›ä»£è¡¨è¯¥çº¿ç¨‹çš„lua_Stateã€‚è¿™ä¸ªä¸»çº¿ç¨‹æ°¸è¿œä¸ä¼šè¢«åƒåœ¾å›æ”¶ï¼Œå®ƒåªä¼šè°ƒç”¨lua_closeå…³é—­çŠ¶æ€æ—¶éšç€çŠ¶æ€ä¸€èµ·é‡Šæ”¾ã€‚ä¸çº¿ç¨‹æ— å…³çš„ç¨‹åºä¼šåœ¨è¿™ä¸ªä¸»çº¿ç¨‹ä¸­è¿è¡Œæ‰€æœ‰çš„ä»£ç ã€‚<br>è°ƒç”¨lua_newthreadå¯ä»¥åœ¨ä¸€ä¸ªçŠ¶æ€ä¸­åˆ›å»ºå…¶ä»–çš„çº¿ç¨‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_State *<span class="title function_">lua_newthread</span> <span class="params">(lua_State *L)</span>;</span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°ä¼šå°†æ–°çº¿ç¨‹ä½œä¸ºä¸€ä¸ªâ€threadâ€ç±»å‹çš„å€¼å‹å…¥æ ˆä¸­ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¡¨ç¤ºæ–°çº¿ç¨‹çš„lua_Stateç±»å‹çš„æŒ‡é’ˆã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„è¯­å¥ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">L1 = lua_newthread(L);</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä¸Šè¿°ä»£ç åï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸¤ä¸ªçº¿ç¨‹L1å’ŒLï¼Œå®ƒä»¬éƒ½åœ¨å†…éƒ¨å¼•ç”¨äº†ç›¸åŒçš„LuaçŠ¶æ€ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å…¶è‡ªå·±çš„æ ˆã€‚æ–°çº¿ç¨‹L1ä»ç©ºæ ˆå¼€å§‹è¿è¡Œï¼Œè€Œè€çº¿ç¨‹Låœ¨å…¶æ ˆé¡¶ä¼šå¼•ç”¨è¿™ä¸ªæ–°çº¿ç¨‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,lua_gettop(L1));  -- <span class="number">0</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,luaL_typename(L,<span class="number">-1</span>));   -- thread</span><br></pre></td></tr></table></figure>
<p>é™¤ä¸»çº¿ç¨‹ä»¥å¤–ï¼Œçº¿ç¨‹å’Œå…¶ä»–çš„Luaå¯¹è±¡ä¸€æ ·éƒ½æ˜¯åƒåœ¾å›æ”¶çš„å¯¹è±¡ã€‚å½“æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œæ–°åˆ›å»ºçš„çº¿ç¨‹ä¼šè¢«å‹å…¥æ ˆä¸­ï¼Œè¿™æ ·å°±ä¿è¯äº†æ–°çº¿ç¨‹ä¸ä¼šè¢«åƒåœ¾æ”¶é›†ã€‚æ°¸è¿œä¸è¦ä½¿ç”¨æœªè¢«æ­£ç¡®é”šå®šåœ¨LuaçŠ¶æ€ä¸­çš„çº¿ç¨‹ã€‚æ‰€æœ‰å¯¹LuaAPIçš„è°ƒç”¨éƒ½æœ‰å¯èƒ½å›æ”¶æœªé”šå®šçš„çº¿ç¨‹ï¼Œå³ä½¿æ˜¯åœ¨æ­£åœ¨ä½¿ç”¨è¿™ä¸ªçº¿ç¨‹çš„å‡½æ•°è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_State *L1 = lua_newthread(L);</span><br><span class="line">lua_pop(L,<span class="number">1</span>);</span><br><span class="line">lua_pushstring(L1,<span class="string">&quot;hello&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨lua_pushstringå¯èƒ½ä¼šè§¦å‘åƒåœ¾æ”¶é›†å™¨å¹¶å›æ”¶L1ï¼Œä»è€Œå¯¼è‡´åº”ç”¨å´©æºƒï¼Œå°½ç®¡L1æ­£åœ¨è¢«ä½¿ç”¨ã€‚è¦é¿å…è¿™ç§æƒ…å†µï¼Œåº”è¯¥åœ¨è¯¸å¦‚ä¸€ä¸ªå·²é”šå®šçº¿ç¨‹çš„æ ˆã€æ³¨å†Œè¡¨æˆ–Luaå˜é‡ä¸­ä¿ç•™ä¸€ä¸ªå¯¹ä½¿ç”¨ä¸­çº¿ç¨‹çš„å¼•ç”¨ã€‚<br>ä¸€æ—¦æ‹¥æœ‰ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒä½¿ç”¨ä¸»çº¿ç¨‹ä¸€æ ·æ¥ä½¿ç”¨å®ƒäº†ã€‚æˆ‘ä»¬å¯ä»¥å°†å…ƒç´ å‹å…¥æ ˆä¸­ï¼Œæˆ–è€…ä»æ ˆä¸­å¼¹å‡ºå…ƒç´ ï¼Œè¿˜å¯ä»¥ç”¨å®ƒæ¥è°ƒç”¨å‡½æ•°ç­‰ç­‰ã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹ä»£ç åœ¨æ–°çº¿ç¨‹ä¸­è°ƒç”¨äº†f(5)ï¼Œç„¶åå°†ç»“æœä¼ é€’åˆ°è€çº¿ç¨‹ä¸­ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_getglobal(L1,<span class="string">&quot;f&quot;</span>);  <span class="comment">/* å‡è®¾&#x27;f&#x27;æ˜¯ä¸€ä¸ªå…¨å±€å‡½æ•° */</span></span><br><span class="line">lua_pushinteger(L1,<span class="number">5</span>);</span><br><span class="line">lua_call(L1,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">lua_xmove(L1,L,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°lua_xmoveå¯ä»¥åœ¨åŒä¸€ä¸ªLuaçŠ¶æ€çš„ä¸¤ä¸ªæ ˆä¹‹é—´ç§»åŠ¨Luaå€¼ã€‚ä¸€ä¸ªå½¢å¦‚lua_xmove(F,T,n)çš„è°ƒç”¨ä¼šä»æ ˆFä¸­å¼¹å‡ºnä¸ªå…ƒç´ ï¼Œå¹¶å°†å®ƒä»¬å‹å…¥æ ˆTä¸­ã€‚<br>ä¸è¿‡ï¼Œå¯¹äºè¿™ç±»ç”¨æ³•ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç”¨æ–°çº¿ç¨‹ï¼Œç”¨ä¸»çº¿ç¨‹å°±è¶³å¤Ÿäº†ã€‚ä½¿ç”¨å¤šçº¿ç¨‹çš„ä¸»è¦ç›®çš„æ˜¯å®ç°åç¨‹ï¼Œä»è€Œå¯ä»¥æŒ‚èµ·æŸäº›åç¨‹çš„æ‰§è¡Œï¼Œå¹¶åœ¨ä¹‹åæ¢å¤æ‰§è¡Œã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å‡½æ•°lua_resumeï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">lua_resume</span> <span class="params">(lua_State *L,lua_State *from, <span class="type">int</span> narg)</span>;</span><br></pre></td></tr></table></figure>
<p>è¦å¯åŠ¨ä¸€ä¸ªåç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨lua_pcallä¸€æ ·ä½¿ç”¨lua_resumeï¼šå°†å¾…è°ƒç”¨å‡½æ•°å‹å…¥æ ˆï¼Œç„¶åå‹å…¥åç¨‹çš„å‚æ•°ï¼Œå¹¶ä»¥å‚æ•°çš„æ•°é‡ä½œä¸ºå‚æ•°nargè°ƒç”¨lua_resumeï¼ˆå‚æ•°fromæ˜¯æ­£åœ¨æ‰§è¡Œè°ƒç”¨çš„çº¿ç¨‹ï¼Œæˆ–ä¸ºNULLï¼‰ã€‚è¿™ä¸ªè¡Œä¸ºä¸lua_pcallç±»ä¼¼ï¼Œä½†æœ‰ä¸‰ä¸ªä¸åŒç‚¹ã€‚é¦–å…ˆï¼Œlua_resumeä¸­æ²¡æœ‰è¡¨ç¤ºæœŸæœ›ç»“æœæ•°é‡çš„å‚æ•°ï¼Œå®ƒæ€»æ˜¯è¿”å›è¢«è°ƒç”¨å‡½æ•°çš„é¢æ‰€æœ‰ç»“æœã€‚å…¶æ¬¡ï¼Œå®ƒæ²¡æœ‰è¡¨ç¤ºé”™è¯¯å¤„ç†å‡½æ•°çš„å‚æ•°ï¼Œå‘ç”Ÿé”™è¯¯æ—¶ä¸ä¼šè¿›è¡Œæ ˆå±•å¼€ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨é”™è¯¯å‘ç”Ÿåæ£€æŸ¥æ ˆçš„æƒ…å†µã€‚æœ€åï¼Œå¦‚æœæ­£åœ¨è¿è¡Œçš„å“ˆæ•°è¢«æŒ‚èµ·ï¼Œlua_resumeå°±ä¼šè¿”å›ä»£ç LUA_YIELD,å¹¶å°†çº¿ç¨‹ç½®äºä¸€ä¸ªå¯ä»¥åç»­å†æ¢å¤æ‰§è¡Œçš„çŠ¶æ€ä¸­ã€‚<br>å½“lua_resumeè¿”å›LUA_YIELDæ—¶ï¼Œçº¿ç¨‹æ ˆä¸­çš„å¯è§éƒ¨åˆ†åªåŒ…å«ä¼ é€’ç»™yieldçš„å€¼ã€‚è°ƒç”¨lua_gettopä¼šè¿”å›è¿™äº›å€¼çš„ä¸ªæ•°ã€‚å¦‚æœè¦å°†è¿™äº›å€¼è½¬ç§»åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨lua_xmoveã€‚<br>è¦æ¢å¤ä¸€ä¸ªæŒ‚èµ·çš„çº¿ç¨‹ï¼Œå¯ä»¥å†æ¬¡è°ƒç”¨lua_resumeã€‚åœ¨è¿™ç§è°ƒç”¨ä¸­ï¼ŒLuaå‡è®¾æ ˆä¸­æ‰€æœ‰çš„å€¼éƒ½ä¼šè¢«è°ƒç”¨çš„yieldè¿”å›ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨ä¸€ä¸ªlua_resumeè¿”å›ååˆ°å†æ¬¡è°ƒç”¨lua_resumeæ—¶ä¸æ”¹å˜çº¿ç¨‹çš„æ ˆï¼Œé‚£ä¹ˆyieldä¼šåŸæ ·è¿”å›å®ƒäº§ç”Ÿçš„å€¼ã€‚<br>é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šæŠŠä¸€ä¸ªLuaå‡½æ•°ä½œä¸ºåç¨‹å¯åŠ¨åç¨‹ã€‚è¿™ä¸ªLuaå‡½æ•°å¯ä»¥è°ƒç”¨å…¶ä»–Luaå‡½æ•°ï¼Œå¹¶ä¸”å…¶ä¸­ä»»æ„ä¸€ä¸ªå‡½æ•°éƒ½å¯ä»¥æŒ‚èµ·ï¼Œä»è€Œç»“æŸå¯¹lua_resumeçš„è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æœ‰å¦‚ä¸‹å®šä¹‰ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">function <span class="title function_">foo</span><span class="params">(x)</span> coroutine.<span class="title function_">yield</span><span class="params">(<span class="number">10</span>,x)</span> end</span><br><span class="line">function <span class="title function_">foo1</span><span class="params">(x)</span> <span class="title function_">foo</span><span class="params">(x + <span class="number">1</span>)</span>; <span class="keyword">return</span> <span class="number">3</span> end</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨è¿è¡Œä¸€ä¸‹Cè¯­è¨€ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_State *L1 = lua_newthread(L);</span><br><span class="line">lua_getglobal(L1,<span class="string">&quot;foo1&quot;</span>);</span><br><span class="line">lua_pushinteger(L1,<span class="number">20</span>);</span><br><span class="line">lua_Resume(L1,L,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨lua_resumeä¼šè¿”å›LUA_YIELDï¼Œè¡¨ç¤ºçº¿ç¨‹å·²äº¤å‡ºäº†æ§åˆ¶æƒã€‚æ­¤æ—¶ï¼ŒL1çš„æ ˆä¾¿æœ‰äº†ä½yieldæŒ‡å®šçš„å€¼ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,lua_gettpo(L1));			--&gt; <span class="number">2</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,lua_tointeger(L1,<span class="number">1</span>));   --&gt; <span class="number">10</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,lua_tointeger(L1,<span class="number">2</span>));   --&gt; <span class="number">21</span></span><br></pre></td></tr></table></figure>
<p>å½“æ¢å¤æ­¤çº¿ç¨‹æ—¶ï¼Œå®ƒä¼šä»æŒ‚èµ·çš„åœ°æ–¹ï¼ˆå³è°ƒç”¨yieldçš„åœ°æ–¹ï¼‰ç»§ç»­æ‰§è¡Œã€‚æ­¤æ—¶ï¼Œfooä¼šè¿”å›åˆ°foo1ï¼Œfoo1ç»§è€Œåˆè¿”å›åˆ°lua_resume:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_resume(L1,L,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,lua_gettpo(L1));   --&gt; <span class="number">1</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,lua_tointeger(L1,<span class="number">1</span>));  --&gt;<span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ¬¡è°ƒç”¨lua_resumeæ˜¯ä¼šè¿”å›NULL_OKï¼Œè¡¨ç¤ºä¸€ä¸ªæ­£å¸¸çš„è¿”å›ã€‚<br>ä¸€ä¸ªåç¨‹ä¹Ÿå¯ä»¥è°ƒç”¨Cè¯­è¨€å‡½æ•°ï¼Œè€ŒCè¯­è¨€å‡½æ•°åˆå¯ä»¥åè¿‡æ¥è°ƒç”¨å…¶ä»–Luaå‡½æ•°ã€‚æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡å¦‚ä½•ä½¿ç”¨å»¶ç»­æ¥è®©è¿™äº›Luaå‡½æ•°äº¤å‡ºæ§åˆ¶æƒã€‚Cè¯­è¨€å‡½æ•°ä¹Ÿå¯ä»¥äº¤å‡ºæ§åˆ¶æƒã€‚åœ¨è¿™è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå¿…é¡»æä¾›ä¸€ä¸ªåœ¨çº¿æ¢å¤æ—¶è¢«è°ƒç”¨çš„å»¶ç»­å‡½æ•°ã€‚è¦äº¤å‡ºæ§åˆ¶æƒï¼ŒCè¯­è¨€å‡½æ•°å¿…é¡»è°ƒç”¨å¦‚ä¸‹çš„å‡½æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">lua_yield</span> <span class="params">(lua_State *L, <span class="type">int</span> nresults, <span class="type">int</span> ctx, lua_CFunction k)</span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿”å›è¯­å¥ä¸­æˆ‘ä»¬åº”è¯¥å§‹ç»ˆä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> inf <span class="title function_">myCfunction</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">return</span> lua_yieldk(L,nreseults,ctx, k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªè°ƒç”¨ä¼šç«‹å³æŒ‚èµ·æ­£åœ¨è¿è¡Œçš„åç¨‹ã€‚å‚æ•°nresultsæ˜¯å°†è¦è¿”å›ç»™å¯¹åº”çš„lua_resumeçš„æ ˆä¸­çš„å€¼çš„ä¸ªæ•°ï¼›å‚æ•°ctxæ˜¯ä¼ é€’ç»™å»¶ç»­çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼›å‚æ•°kæ˜¯å»¶ç»­å‡½æ•°ã€‚å½“åç¨‹æ¢å¤è¿è¡Œæ—¶ï¼Œæ§åˆ¶æƒä¼šç›´æ¥äº¤ç»™å»¶ç»­å‡½æ•°kï¼›å½“åç¨‹äº¤å‡ºæ§åˆ¶æƒåï¼ŒmyCfunctionå°±ä¸ä¼šå†æœ‰å…¶ä»–ä»»ä½•åŠ¨ä½œï¼Œå®ƒå¿…é¡»å°†æ‰€æœ‰åç»­çš„å·¥ä½œå§”æ‰˜ç»™å»¶ç»­å‡½æ•°å¤„ç†ã€‚<br>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ã€‚å‡è®¾è¦ç¼–å†™ä¸€ä¸ªè¯»å–æ•°æ®çš„å‡½æ•°ï¼Œå¦‚æœæ— æ•°æ®å¯è¯»åˆ™äº¤å‡ºæ§åˆ¶æƒã€‚æˆ‘ä»¬å¯èƒ½ä¼šç”¨Cè¯­è¨€å†™å‡ºä¸€ä¸ªè¿™æ ·çš„å‡½æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">readK</span> <span class="params">(lua_State *L,<span class="type">int</span> status, lua_KContext ctx)</span>&#123;</span><br><span class="line">	(<span class="type">void</span>)status;(<span class="type">void</span>)ctx; <span class="comment">/* æœªä½¿ç”¨çš„å‚æ•° */</span></span><br><span class="line">	<span class="keyword">if</span> (something_to_read())&#123;</span><br><span class="line">		lua_pushstring(L,read_some_data());</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> lua_yieldk(L,<span class="number">0</span>,<span class="number">0</span>,&amp;readK);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">prim_read</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> readK(L,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œprim_readæ— é¡»åšä»»ä½•åˆå§‹åŒ–ï¼Œå› æ­¤å®ƒå¯ä»¥ç›´æ¥è°ƒç”¨å»¶ç»­å‡½æ•°ã€‚å¦‚æœæœ‰æ•°æ®å¯è¯»ã€‚readKä¼šè¯»å–å¹¶è¿”å›æ•°æ®ï¼›å¦åˆ™ï¼Œå®ƒä¼šäº¤å‡ºæ§åˆ¶æƒã€‚å½“çº¿ç¨‹æ¢å¤æ—¶ï¼Œprim_readä¼šå†æ¬¡è°ƒç”¨å»¶ç»­å‡½æ•°ï¼Œè¯¥å»¶ç»­å‡½æ•°ä¼šå†æ¬¡å°è¯•è¯»å–æ•°æ®ã€‚<br>å¦‚æœCè¯­è¨€å‡½æ•°åœ¨äº¤å‡ºæ§åˆ¶æƒä¹‹åä»€ä¹ˆéƒ½ä¸åšï¼Œé‚£ä¹ˆå®ƒå¯ä»¥ä¸å¸¦å»¶ç»­å‡½æ•°è°ƒç”¨lua_yieldkæˆ–è€…ä½¿ç”¨å®lua_yield:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> lua_yield(L,nres);</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸€å¥è°ƒç”¨ä¹‹åï¼Œå½“çº¿ç¨‹æ¢å¤æ—¶ï¼Œæ§åˆ¶æƒä¼šè¿”å›åˆ°åä¸ºmyCfunctionçš„å‡½æ•°ä¸­ã€‚</p>
<h2 id="LuaçŠ¶æ€"><a href="#LuaçŠ¶æ€" class="headerlink" title="LuaçŠ¶æ€"></a>LuaçŠ¶æ€</h2><p>æ¯æ¬¡è°ƒç”¨luaL_newstate(æˆ–lua_newstate)éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„LuaçŠ¶æ€ã€‚ä¸åŒçš„LuaçŠ¶æ€ä¹‹é—´æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œå®ƒä»¬æ ¹æœ¬ä¸å…±äº«æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºåœ¨ä¸€ä¸ªLuaçŠ¶æ€ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Œéƒ½ä¸ä¼šå½±å“å…¶ä»–LuaçŠ¶æ€ã€‚è¿™ä¹Ÿæ„å‘³ç€LuaçŠ¶æ€ä¹‹é—´ä¸èƒ½ç›´æ¥é€šä¿¡ï¼Œå› è€Œå¿…é¡»å€ŸåŠ©ä¸€äº›Cè¯­è¨€ä»£ç çš„å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œç»™å®šä¸¤ä¸ªçŠ¶æ€L1å’ŒL2ï¼Œå¦‚ä¸‹å‘½ä»¤ä¼šå°†L1æ ˆé¡¶çš„å­—ç¬¦ä¸²å‹å…¥L2çš„æ ˆä¸­ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_pushstring(L2,lua_tostring(L1,<span class="number">-1</span>));</span><br></pre></td></tr></table></figure>
<p>ç”±äºæ‰€æœ‰æ•°æ®å¿…é¡»ç”±Cè¯­è¨€è¿›è¡Œä¼ é€’ï¼Œå› æ­¤LuaçŠ¶æ€ä¹‹é—´åªèƒ½äº¤æ¢èƒ½å¤Ÿä½¿ç”¨Cè¯­è¨€è¡¨ç¤ºçš„ç±»å‹ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²å’Œæ•°å€¼ã€‚å…¶ä»–è¯¸å¦‚è¡¨ä¹‹ç±»çš„ç±»å‹å¿…é¡»åºåˆ—åŒ–åæ‰èƒ½ä¼ é€’ã€‚<br>åœ¨æ”¯æŒå¤šçº¿ç¨‹çš„ç³»ç»Ÿä¸­ï¼Œä¸€ç§æœ‰è¶£çš„è®¾è®¡æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„LuaçŠ¶æ€ã€‚è¿™ç§è®¾è®¡ä½¿å¾—çº¿ç¨‹ç±»ä¼¼äºPOSIXè¿›ç¨‹ï¼Œå®ƒå®ç°äº†éå…±äº«å†…å­˜çš„å¹¶å‘ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®è¿™ç§æ–¹æ³•å¼€å‘ä¸€ä¸ªå¤šçº¿ç¨‹çš„åŸå‹å®ç°ã€‚åœ¨è¿™ä¸ªå®ç°ä¸­ï¼Œå°†ä¼šä½¿ç”¨POSIXçº¿ç¨‹ã€‚å› ä¸ºè¿™äº›ä»£ç åªä½¿ç”¨äº†ä¸€äº›åŸºç¡€åŠŸèƒ½ï¼Œæ‰€ä»¥å°†å®ƒä»¬ç§»æ¤åˆ°å…¶ä»–çº¿ç¨‹ç³»ç»Ÿä¸­å¹¶ä¸éš¾ã€‚<br>æˆ‘ä»¬è¦å¼€å‘çš„ç³»ç»Ÿå¾ˆç®€å•ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯æ¼”ç¤ºä¸€ä¸ªå¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨å¤šä¸ªLuaçŠ¶æ€ã€‚åœ¨è¿™ä¸ªç³»ç»Ÿå¼€å§‹è¿è¡Œä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå®ƒæ·»åŠ å‡ ä¸ªé«˜çº§åŠŸèƒ½ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªåº“ç§°ä¸ºlprocï¼Œå®ƒåªæä¾›4ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lproc.start(chunk)</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨ä¸€ä¸ªæ–°è¿›ç¨‹æ¥è¿è¡ŒæŒ‡å®šçš„ä»£ç æ®µï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ã€‚è¿™ä¸ªåº“å°†Luaè¿›ç¨‹å®ç°ä¸ºä¸€ä¸ªCè¯­è¨€è¿›ç¨‹å¤–åŠ ä¸å…¶ç›¸å…³è”çš„LuaçŠ¶æ€ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lproc.send(channel,val1,val2,...)</span><br></pre></td></tr></table></figure>
<p>å°†æ‰€æœ‰æŒ‡å®šå€¼ï¼ˆåº”ä¸ºå­—ç¬¦ä¸²ï¼‰å‘é€ç»™æŒ‡å®šçš„ã€ç”±åç§°ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰æ ‡è¯†çš„é€šé“ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lproc.receive(channel)</span><br></pre></td></tr></table></figure>
<p>æ¥æ”¶å‘é€ç»™æŒ‡å®šé€šé“çš„å€¼ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lproc.<span class="built_in">exit</span>()</span><br></pre></td></tr></table></figure>
<p>ç»“æŸä¸€ä¸ªè¿›ç¨‹ã€‚åªæœ‰ä¸»è¿›ç¨‹éœ€è¦è¿™ä¸ªå‡½æ•°ã€‚å¦‚æœä¸»ç¨‹åºä¸è°ƒç”¨lproc.exitå°±ç›´æ¥ç»“æŸï¼Œé‚£ä¹ˆæ•´ä¸ªç¨‹åºä¼šç»ˆæ­¢ï¼Œè€Œä¸ä¼šç­‰å¾…å…¶ä»–è¿›ç¨‹ç»“æŸã€‚<br>è¿™ä¸ªåº“é€šè¿‡å­—ç¬¦ä¸²æ ‡è¯†ä¸åŒçš„é€šé“ï¼Œå¹¶é€šè¿‡å­—ç¬¦ä¸²æ¥åŒ¹é…å‘é€è€…å’Œæ¥æ”¶è¿™ã€‚ä¸€ä¸ªå‘é€æ“ä½œå¯ä»¥å‘é€ä»»æ„æ•°é‡çš„å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²ç”±å¯¹åº”çš„æ¥æ”¶æ“ä½œè¿”å›ã€‚æ‰€æœ‰çš„é€šä¿¡éƒ½æ˜¯åŒæ­¥çš„ï¼Œå‘é€šé“å‘é€æ¶ˆæ¯çš„è¿›ç¨‹ä¼šä¸€ç›´é˜»å¡ï¼ŒçŸ¥é“æœ‰è¿›ç¨‹ä»è¯¥é€šé“æ¥æ”¶ä¿¡æ¯ï¼Œä»è€Œé€šé“æ¥æ”¶ä¿¡æ¯çš„è¿›ç¨‹ä¼šä¸€ç›´é˜»å¡ï¼Œç›´è‡³æœ‰è¿›ç¨‹å‘å…¶å‘é€æ¶ˆæ¯ã€‚<br>lprocçš„å®ç°åƒå…¶æ¥å£ä¸€æ ·ç®€å•ï¼Œå®ƒä½¿ç”¨äº†ä¸¤ä¸ªå¾ªç¯åŒå‘é“¾è¡¨ï¼Œä¸€ä¸ªç”¨äºç­‰å¾…å‘é€æ¶ˆæ¯çš„è¿›ç¨‹ï¼Œå¦ä¸€ä¸ªç”¨äºç­‰å¾…æ¥æ”¶æ¶ˆæ¯çš„è¿›ç¨‹ã€‚lprocä½¿ç”¨ä¸€ä¸ªäº’æ–¥é‡æ¥æ§åˆ¶å¯¹ç€ä¸¤ä¸ªé“¾è¡¨çš„è®¿é—®ã€‚æ¯ä¸ªè¿›ç¨‹æœ‰ä¸€ä¸ªå…³è”çš„æ¡ä»¶å˜é‡ã€‚å½“è¿›ç¨‹è¦å‘é€šé“å‘é€ä¸€æ¡æ¶ˆæ¯æ—¶ï¼Œå®ƒä¼šéå†æ¥æ”¶é“¾è¡¨ä»¥æŸ¥æ‰¾ä¸€ä¸ªåœ¨è¯¥é€šé“ä¸Šç­‰åˆ°çš„è¿›ç¨‹ã€‚å¦‚æœæ‰¾åˆ°äº†è¿™æ ·çš„è¿›ç¨‹ï¼Œå®ƒä¼šå°†è¯¥è¿›ç¨‹ä»ç­‰å¾…é“¾è¡¨ä¸­åˆ é™¤ï¼Œå¹¶å°†æ¶ˆæ¯çš„å€¼ä»è‡ªèº«è½¬ç§»åˆ°æ‰¾åˆ°çš„è¿›ç¨‹ä¸­ï¼Œç„¶åé€šçŸ¥å…¶ä»–è¿›ç¨‹ï¼›å¦åˆ™ï¼Œå®ƒå°±å°†è‡ªå·±æ’å…¥å‘é€é“¾è¡¨ï¼Œç„¶åç­‰å¾…å…¶æ¡ä»¶å˜é‡å‘ç”Ÿå˜åŒ–ã€‚æ¥æ”¶æ¶ˆæ¯çš„æ“ä½œä¹Ÿä¸æ­¤åŸºæœ¬ç±»ä¼¼ã€‚<br>åœ¨è¿™ç§å®ç°ä¸­ï¼Œä¸»è¦çš„å…ƒç´ ä¹‹ä¸€å°±æ˜¯è¡¨ç¤ºè¿›ç¨‹çš„ç»“æ„ä½“ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;lua.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;luaxlib.h&quot;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Proc</span>&#123;</span></span><br><span class="line">	lua_State *L;</span><br><span class="line">	<span class="type">pthread_t</span> thread;</span><br><span class="line">	<span class="type">pthread_cond_t</span> cond;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *channel;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Proc</span> *<span class="title">previous</span>, *<span class="title">next</span>;</span></span><br><span class="line">&#125;Proc;</span><br></pre></td></tr></table></figure>
<p>å‰ä¸¤ä¸ªå­—æ®µè¡¨ç¤ºè¿›ç¨‹ä½¿ç”¨çš„LuaçŠ¶æ€å’Œè¿è¡Œè¯¥è¿›ç¨‹çš„Cçº¿ç¨‹ã€‚ç¬¬ä¸‰ä¸ªå­—æ®µcondæ˜¯æ¡ä»¶å˜é‡ï¼Œçº¿ç¨‹ä¼šåœ¨ç­‰å¾…åŒ¹é…çš„å‘é€&#x2F;æ¥æ”¶æ—¶ç”¨å®ƒæ¥ä½¿è‡ªå·±è¿›å…¥åˆ™å¡çŠ¶æ€ã€‚ç¬¬å››ä¸ªå­—æ®µä¿å­˜äº†è¿›ç¨‹æ­£åœ¨ç­‰å¾…çš„é€šè¿‡ã€‚æœ€åä¸¤ä¸ªå­—æ®µpreviouså’Œnextå°†è¿›ç¨‹çš„ç»“æ„ä½“ç»„æˆç­‰å¾…é“¾è¡¨ã€‚<br>ä¸‹é¢çš„ä»£ç å£°æ˜äº†ä¸¤ä¸ªç­‰å¾…é“¾è¡¨åŠå…³è”çš„äº’æ–¥é‡ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> Proc *waitsend = <span class="literal">NULL</span>;</span><br><span class="line"><span class="type">static</span> Proc *waitreceive = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">pthread_mutex_t</span> kernel_access = PTHERAD_MUTEX_INITIALIZER;</span><br></pre></td></tr></table></figure>
<p>æ¯ä¸ªè¿›ç¨‹éƒ½éœ€è¦ä¸€ä¸ªProcç»“æ„ä½“ï¼Œå¹¶ä¸”è¿›ç¨‹è„šæœ¬è°ƒç”¨sendæˆ–receiveæ—¶å°±éœ€è¦è®¿é—®è¿™ä¸ªç»“æ„ä½“ã€‚è¿™äº›å‡½æ•°æ¥æ”¶çš„å”¯ä¸€å‚æ•°å°±æ˜¯è¿›ç¨‹çš„LuaçŠ¶æ€ï¼›å› æ­¤ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½åº”è¯¥å°†å…¶Procç»“æ„ä½“ä¿å­˜åœ¨å…¶LuaçŠ¶æ€ä¸­ã€‚åœ¨æˆ‘ä»¬çš„å®ç°ä¸­ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½å°†å…¶å¯¹åº”çš„Procç»“æ„ä½“ä½œä¸ºå®Œæ•´çš„ç”¨æˆ·æ•°æ®å­˜å‚¨åœ¨æ³¨å†Œè¡¨ä¸­ï¼Œå…³è”çš„é”®ä¸ºâ€_SELFâ€ã€‚è¾…åŠ©å‡½æ•°getselfå¯ä»¥ä»æŒ‡å®šçš„çŠ¶æ€ä¸­è·å–ç›¸å…³è”çš„Prcoç»“æ„ä½“ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> Proc *<span class="title function_">getself</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	Proc *p;</span><br><span class="line">	lua_getfield(L&lt;LUA_REGISTRYINDEX,<span class="string">&quot;_SELF&quot;</span>);</span><br><span class="line">	p = (Proc *)lua_touserdata(L,<span class="number">-1</span>);</span><br><span class="line">	lua_pop(L,<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œmovevaluesï¼Œå°†å€¼ä»å‘é€è¿›ç¨‹ç§»åŠ¨åˆ°æ¥æ”¶è¿›ç¨‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">movevalues</span><span class="params">(lua_State *send, lua_State *rec)</span>&#123;</span><br><span class="line">	<span class="type">int</span> n = lua_gettop(send);</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	lua_checkstack(rec,n,<span class="string">&quot;too many results&quot;</span>);</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">		lua_pushstring(rec,lua_tostring(send,i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‡½æ•°å°†å‘é€è¿›ç¨‹çš„æ ˆä¸­æ‰€æœ‰çš„å€¼ç§»åŠ¨åˆ°æ¥æ”¶è¿›ç¨‹çš„æ ˆä¸­ã€‚è¯·æ³¨æ„ï¼Œåœ¨å‹å…¥ä»»æ„æ•°é‡çš„å…ƒç´ æ—¶ï¼Œéœ€è¦æ£€æŸ¥æ ˆç©ºé—´ã€‚<br>ç¤ºä¾‹å®šä¹‰äº†å‡½æ•°searchhmatch,è¯¥å‡½æ•°ä¼šéå†åˆ—è¡¨ä»¥å¯»æ‰¾ç­‰å¾…æŒ‡å®šé€šé“çš„è¿›ç¨‹ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ ç”¨äºå¯»æ‰¾ç­‰å¾…é€šé“çš„è¿›ç¨‹çš„å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> Proc *<span class="title function_">serachmatch</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *channel, Proc **<span class="built_in">list</span>)</span>&#123;</span><br><span class="line">	Proc *node;</span><br><span class="line">	<span class="keyword">for</span> (node = *<span class="built_in">list</span>; node != <span class="literal">NULL</span>; node = node -&gt;next)&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">strcmp</span>(channel, node -&gt;channel) == <span class="number">0</span>)&#123;</span><br><span class="line">			<span class="keyword">if</span> (*<span class="built_in">list</span> == node)</span><br><span class="line">				*<span class="built_in">list</span> = (node-&gt;next == node)?<span class="literal">NULL</span>:node-&gt;next;</span><br><span class="line">			node-&gt;provious-&gt;next = node -&gt;next;</span><br><span class="line">			node-&gt;next-&gt;previous = node -&gt;previous;</span><br><span class="line">			<span class="keyword">return</span> node;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‰¾åˆ°ä¸€ä¸ªè¿›ç¨‹ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¼šå°†è¿™ä¸ªè¿›ç¨‹ä»åˆ—è¡¨ä¸­ç§»é™¤å¹¶è¿”å›è¯¥è¿›ç¨‹ï¼›å¦åˆ™ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›NULLã€‚<br>å½“æ‰¾ä¸åˆ°åŒ¹é…çš„è¿›ç¨‹æ—¶ï¼Œä¼šè°ƒç”¨æœ€åçš„è¾…åŠ©å‡½æ•°ï¼Œå‚è§ä¸‹ä¾‹</p>
<blockquote>
<p>ç¤ºä¾‹ ç”¨äºåœ¨ç­‰å¾…åˆ—è¡¨ä¸­æ–°å¢ä¸€ä¸ªè¿›ç¨‹çš„å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">waitonlist</span> <span class="params">(lua_State *L, <span class="type">const</span> <span class="type">char</span> *channel, Proc **<span class="built_in">list</span>)</span>&#123;</span><br><span class="line">	Proc *p = getself(L);</span><br><span class="line">	<span class="keyword">if</span> (*<span class="built_in">list</span> == <span class="literal">NULL</span>)&#123;</span><br><span class="line">		*<span class="built_in">list</span> = p;</span><br><span class="line">		p-&gt;previous = p-&gt;next = p;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		p-&gt;previous = (*<span class="built_in">list</span>)-&gt; previous;</span><br><span class="line">		p-&gt;next = *<span class="built_in">list</span>;</span><br><span class="line">		p-&gt;previous-&gt;next = p-&gt;next-&gt;previous = p;</span><br><span class="line">	&#125;</span><br><span class="line">	p-&gt;channel = channel;</span><br><span class="line">	<span class="keyword">do</span>&#123;</span><br><span class="line">		pthread_cond_wait(&amp;p-&gt;cond,&amp;kernel_access);</span><br><span class="line">	&#125;<span class="keyword">while</span>(p-&gt;channel);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿›ç¨‹ä¼šå°†è‡ªå·±é“¾æ¥åˆ°ç›¸åº”ç­‰å¾…é“¾è¡¨çš„æœ«å°¾ï¼Œç„¶åè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒçŸ¥é“å¦ä¸€ä¸ªè¿›ç¨‹ä¸ä¹‹åŒ¹é…å¹¶å°†å…¶å”¤é†’ã€‚å½“ä¸€ä¸ªè¿›ç¨‹å”¤é†’å¦ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œå®ƒä¼šå°†å¦ä¸€ä¸ªè¿›ç¨‹çš„channelå­—æ®µè®¾ç½®ä¸ºNULLã€‚å› æ­¤ï¼Œå¦‚æœp-&gt;channelä¸æ˜¯NULLï¼Œé‚£å°±è¡¨ç¤ºå°šæœªå‡ºç°ä¸è¿›ç¨‹påŒ¹é…çš„è¿›ç¨‹ï¼Œæ‰€ä»¥éœ€è¦ç»§ç»­ç­‰å¾…ã€‚<br>æœ‰äº†è¿™äº›è¾…åŠ©å‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™sendå’Œreceiveäº†</p>
<blockquote>
<p>ç¤ºä¾‹ ç”¨äºå‘é€å’Œæ¥æ”¶æ¶ˆæ¯çš„å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">ll_send</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	Proc *p;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *channel = luaL_checkstring(L,<span class="number">1</span>);</span><br><span class="line">	pthread_mutex_lock(&amp;kernel_access);</span><br><span class="line">	p = searchmatch(channel,&amp;waitreceive);</span><br><span class="line">	<span class="keyword">if</span>(p)&#123;</span><br><span class="line">		movevalues(L,p-&gt;L);</span><br><span class="line">		p-&gt;channel = <span class="literal">NULL</span>;</span><br><span class="line">		pthread_cond_signal(&amp;p-&gt;cond);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		waitonlist(L,channel,&amp;waitsend);</span><br><span class="line"></span><br><span class="line">	pthread_mutex_unlock(&amp;kernel_access);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">ll_receive</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	Proc *p;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *channel = luaL_checkstring(L,<span class="number">1</span>);</span><br><span class="line">	lua_settop(L,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	pthread_mutex_lock(&amp;kernel_access);</span><br><span class="line">	p = searchmatch(channel,&amp;waitsend);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(p)&#123;</span><br><span class="line">		movevalues(p-&gt;L,L);</span><br><span class="line">		p-&gt;channel = <span class="literal">NULL</span>;</span><br><span class="line">		pthread_cond_signal(&amp;p-&gt;cond);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		waitonlist(L,channel,&amp;waitreceive);</span><br><span class="line"></span><br><span class="line">	pthread_mutex_unlock(&amp;kernel_access);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> lua_gettop(L) <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°ll_sendå…ˆè·å–é€šé“ï¼Œç„¶åé”ä½äº’æ–¥é‡å¹¶æœç´¢åŒ¹é…çš„æ¥æ”¶è¿›ç¨‹ã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œå°±æŠŠå¾…å‘é€çš„å€¼ä¼ é€’ç»™è¿™ä¸ªæ¥æ”¶è¿›ç¨‹ï¼Œç„¶åå°†æ¥æ”¶è¿›ç¨‹æ ‡è®°ä¸ºå°±ç»ªçŠ¶æ€å¹¶å”¤é†’æ¥æ”¶è¿›ç¨‹ã€‚å¦åˆ™ï¼Œå‘é€è¿›ç¨‹å°±å°†è‡ªå·±æ”¾å…¥ç­‰å¾…é“¾è¡¨ã€‚å½“æ“ä½œå®Œæˆåï¼Œll_sendè§£é”äº’æ–¥é‡ä¸”ä¸å‘Luaè¿”å›ä»»ä½•å€¼ã€‚å‡½æ•°ll_receiveä¸ä¹‹ç±»ä¼¼ï¼Œä½†å®ƒä¼šè¿”å›æ‰€æœ‰æ¥æ”¶åˆ°çš„å€¼ã€‚<br>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•åˆ›å»ºæ–°è¿›ç¨‹ã€‚æ–°è¿›ç¨‹éœ€è¦ä¸€ä¸ªæ–°çš„POSIXçº¿ç¨‹ï¼Œè€ŒPOSIXçº¿ç¨‹çš„è¿è¡Œéœ€è¦ä¸€ä¸ªçº¿ç¨‹ä½“ã€‚æˆ‘ä»¬ä¼šåœ¨åé¢çš„å†…å®¹ä¸­å®šä¹‰è¿™ä¸ªçº¿ç¨‹ä½“ã€‚åœ¨æ­¤ï¼Œå…ˆçœ‹ä¸€ä¸‹å®ƒçš„åŸå‹ï¼Œè¿™æ˜¯pthreadsæ‰€éœ€æ±‚çš„ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> *<span class="title function_">ll_thread</span><span class="params">(<span class="type">void</span> *arg)</span>;</span><br></pre></td></tr></table></figure>
<p>è¦åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªæ–°è¿›ç¨‹ï¼Œæˆ‘ä»¬å¼€å‘çš„ç³»ç»Ÿå¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„LuaçŠ¶æ€ï¼Œå¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œç¼–è¯‘æŒ‡å®šçš„ä»£ç æ®µï¼Œè°ƒç”¨è¯¥ä»£ç æ®µï¼Œæœ€åé‡Šæ”¾å…¶èµ„æºã€‚åŸçº¿ç¨‹ä¼šå®Œæˆå‰é¢ä¸‰ä¸ªä»»åŠ¡ï¼Œè€Œæ–°çº¿ç¨‹åˆ™è´Ÿè´£å…¶ä½™ä»»åŠ¡ã€‚<br>å‡½æ•°ll_startå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ ç”¨äºåˆ›å»ºè¿›ç¨‹çš„å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">ll_start</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">pthread_t</span> thread;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *chunk = luaL_checkstring(L,<span class="number">1</span>);</span><br><span class="line">	lua_State *L1 = luaL_newstate();</span><br><span class="line">	<span class="keyword">if</span>(L1 == <span class="literal">NULL</span>)</span><br><span class="line">		lua_error(L,<span class="string">&quot;unable to create new state&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (luaL_loadstring(L1,chunk) ï¼= <span class="number">0</span>)</span><br><span class="line">		luaL_error(L,<span class="string">&quot;error in thread body:%s&quot;</span>,lua_tostring(L1,<span class="number">-1</span>));</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(pthread_create(&amp;thread,<span class="literal">NULL</span>,ll_thread,L1)!=<span class="number">0</span>)</span><br><span class="line">		luaL_error(L,<span class="string">&quot;unable to create new thread&quot;</span>);</span><br><span class="line"></span><br><span class="line">	pthread_detach(thread);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„LuaçŠ¶æ€L1ï¼Œå¹¶åœ¨å…¶ä¸­ç¼–è¯‘äº†æŒ‡å®šçš„ä»£ç æ®µã€‚å¦‚æœæœ‰é”™è¯¯å‘ç”Ÿï¼Œè¯¥å‡½æ•°ä¼šæŠŠé”™è¯¯ä¼ é€’ç»™åŸæ¥çš„çŠ¶æ€Lã€‚ç„¶åï¼Œè¯¥å‡½æ•°ä½¿ç”¨ll_threadä½œä¸ºçº¿ç¨‹ä½“åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼ŒåŒæ—¶å°†æ–°çŠ¶æ€L1ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™ä¸ªçº¿ç¨‹ä½“ã€‚æœ€åï¼Œè¯¥å‡½æ•°è°ƒç”¨pthread_detaché€šçŸ¥ç³»ç»Ÿæˆ‘ä»¬ä¸éœ€è¦è¯¥çº¿ç¨‹çš„ä»»ä½•è¿è¡Œç»“æœã€‚<br>æ¯ä¸ªæ–°çº¿ç¨‹çš„çº¿ç¨‹ä½“éƒ½æ˜¯å‡½æ•°ll_threadï¼Œå®ƒæ¥æ‰‹ç›¸åº”çš„LuaçŠ¶æ€ï¼Œè¿™ä¸ªLuaçŠ¶æ€çš„æ ˆä¸­åªå«æœ‰é¢„ç¼–è¯‘çš„ä¸»ä»£ç æ®µã€‚</p>
<blockquote>
<p>ç¤ºä¾‹  æ–°çº¿ç¨‹çš„çº¿ç¨‹ä½“</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">luaopen_lproc</span><span class="params">(lua_State *L)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> *<span class="title function_">ll_thread</span><span class="params">(<span class="type">void</span> *arg)</span>&#123;</span><br><span class="line">	lua_State *L = (lua_State *) arg;</span><br><span class="line">	Proc *self;</span><br><span class="line"></span><br><span class="line">	openlibs(L);</span><br><span class="line">	luaL_requiref(L,<span class="string">&quot;lproc&quot;</span>,luaopen_lproc,<span class="number">1</span>);</span><br><span class="line">	lua_pop(L,<span class="number">1</span>);</span><br><span class="line">	self = (Proc *)lua_newuserdata(L,<span class="keyword">sizeof</span>(Proc));</span><br><span class="line">	lua_setfield(L,LUA_REGISTRYINDEX, <span class="string">&quot;_SELF&quot;</span>);</span><br><span class="line">	self-&gt;L = L;</span><br><span class="line">	self-&gt;thread = pthread_self();</span><br><span class="line">	self-&gt;channel = <span class="literal">NULL</span>;</span><br><span class="line">	pthread_cond_init(&amp;self-&gt;cond,<span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(lua_pcall(L,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,)!=<span class="number">0</span>)</span><br><span class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">&quot;thread error: %s&quot;</span>,lua_tostring(L,<span class="number">-1</span>));</span><br><span class="line"></span><br><span class="line">	pthread_cond_destroy(&amp;getself(L)-&gt;cond);</span><br><span class="line">	lua_close(L);</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œè¯¥å‡½æ•°æ‰“å¼€Luaæ ‡å‡†åº“å’Œåº“lprocï¼›ä¹‹åï¼Œå®ƒåˆ›å»ºå¹¶åˆå§‹åŒ–å…¶è‡ªèº«çš„æ§åˆ¶å—ï¼›ç„¶åï¼Œè°ƒç”¨ä¸»ä»£ç æ®µï¼›æœ€åï¼Œé”€æ¯å…¶æ¡ä»¶å˜é‡å¹¶å…³é—­LuaçŠ¶æ€ã€‚<br>è¯·æ³¨æ„ä½¿ç”¨luaL_requirefæ‰“å¼€åº“lprocçš„ç”¨æ³•ã€‚è¿™ä¸ªå‡½æ•°åœ¨æŸç§æ„ä¹‰ä¸Šç­‰ä»·äºrequireï¼Œä½†å®ƒç”¨æŒ‡å®šå‡½æ•°æ¥æ‰“å¼€åº“è€Œæ²¡æœ‰æœç´¢æ‰“å¼€å‡½æ•°ã€‚åœ¨è°ƒç”¨è¿™ä¸ªæ‰“å¼€å‡½æ•°åï¼ŒluaL_requirefä¼šåœ¨è¡¨package.loadedä¸­æ³¨å†Œç»“æœï¼Œè¿™æ ·ä»¥åå†è°ƒç”¨requireåŠ è½½è¿™ä¸ªåº“æ—¶å°±æ— é¡»å†æ¬¡æ‰“å¼€åº“äº†ã€‚å½“luaL_requirefçš„æœ€åä¸€ä¸ªå‚æ•°ä¸ºçœŸæ—¶ï¼Œè¯¥å‡½æ•°è¿˜ä¼šåœ¨ç›¸åº”çš„å…¨å±€å˜é‡ä¸­æ³¨å†Œè¿™ä¸ªåº“ã€‚<br>ç¤ºä¾‹æ¼”ç¤ºäº†è¿™ä¸ªæ¨¡å—ä¸­çš„æœ€åä¸€ä¸ªå‡½æ•°</p>
<blockquote>
<p>ç¤ºä¾‹ æ¨¡å—lprocçš„å…¶ä»–å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> inti <span class="title function_">ll_exit</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	pthread_exit(<span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">l_funcs</span>[] =</span>&#123;</span><br><span class="line">	&#123;<span class="string">&quot;start&quot;</span>,ll_start&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;send&quot;</span>,ll_send&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;receive&quot;</span>,ll_receive&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;exit&quot;</span>,ll_exit&#125;,</span><br><span class="line">	&#123;<span class="literal">NULL</span>,<span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">luaopen_lproc</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	luaL_newlib(L,ll_funcs);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸¤ä¸ªå‡½æ•°éƒ½å¾ˆç®€å•ã€‚å‡½æ•°ll_exitåº”è¯¥åªèƒ½åœ¨ä¸»è¿›ç¨‹ç»“æŸæ—¶ç”±ä¸»è¿›ç¨‹è°ƒç”¨ï¼Œä»¥é¿å…æ•´ä¸ªç¨‹åºç«‹å³ç»“æŸã€‚å‡½æ•°luaopen_lprocæ˜¯ç”¨äºæ‰“å¼€è¿™ä¸ªæ¨¡å—çš„æ ‡å‡†å‡½æ•°ã€‚<br>æ­£å¦‚ç¬”è€…ä¹‹å‰è¯´è¿‡çš„ï¼Œåœ¨Luaè¯­è¨€ä¸­è¿™ç§è¿›ç¨‹çš„å®ç°æ–¹å¼éå¸¸ç®€å•ã€‚æˆ‘ä»¬å¯ä»¥å¯¹å®ƒè¿›è¡Œå„ç§æ”¹è¿›ï¼Œè¿™é‡Œç®€å•ä»‹ç»å‡ ç§ã€‚<br>ç¬¬ä¸€ç§æ˜¾è€Œæ˜“è§çš„æ”¹è¿›æ˜¯æ”¹å˜å¯¹åŒ¹é…é€šé“çš„çº¿æ€§æŸ¥æ‰¾ï¼Œæ›´å¥½çš„é€‰æ‹©æ˜¯ç”¨å“ˆå¸Œè¡¨æ¥å¯»æ‰¾é€šé“ï¼Œå¹¶ä¸ºæ¯ä¸ªé€šé“è®¾ç½®ä¸€ä¸ªç‹¬ç«‹çš„ç­‰å¾…åˆ—è¡¨ã€‚<br>å¦ä¸€ç§æ”¹è¿›æ¶‰åŠåˆ›å»ºè¿›ç¨‹çš„æ•ˆç‡ã€‚åˆ›å»ºä¸€ä¸ªæ–°çš„LuaçŠ¶æ€æ—¶ä¸€ä¸ªè½»é‡çº§æ“ä½œï¼Œä½†æ‰“å¼€æ‰€æœ‰çš„æ ‡å‡†åº“å¯ä¸æ˜¯è½»é‡çº§çš„ï¼Œå¹¶ä¸”å¤§éƒ¨åˆ†è¿›ç¨‹å¯èƒ½å¹¶ä¸éœ€è¦ç”¨åˆ°æ‰€æœ‰çš„æ ‡å‡†åº“ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹åº“è¿›è¡Œé¢„æ³¨å†Œæ¥é¿å…æ‰“å¼€æ— ç”¨çš„åº“ã€‚ç›¸å¯¹äºä¸ºæ¯ä¸ªæ ‡å‡†åº“è°ƒç”¨luaL_requirefï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶æˆ‘ä»¬åªéœ€è¦å°†åº“çš„æ‰“å¼€å‡½æ•°æ”¾å…¥è¡¨package.preloadä¸­å³å¯ã€‚å½“ä¸”ä»…å½“è¿›ç¨‹è°ƒç”¨requireâ€libâ€æ—¶ï¼Œrequireæ‰ä¼šè°ƒç”¨è¿™ä¸ªä¸åº“ç›¸å…³çš„å‡½æ•°æ¥æ‰“å¼€åº“ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ æ³¨å†ŒæŒ‰éœ€æ‰“å¼€çš„åº“</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">registerlib</span> <span class="params">(lua_State *L, <span class="type">const</span> <span class="type">char</span> *name,lua_CFunction f)</span>&#123;</span><br><span class="line">	lua_getglobal(L,<span class="string">&quot;package&quot;</span>);</span><br><span class="line">	lua_getfield(L,<span class="number">-1</span>,<span class="string">&quot;preload&quot;</span>);</span><br><span class="line">	lua_pushcfunction(L,f);</span><br><span class="line">	lua_setfield(L,<span class="number">-2</span>,name);</span><br><span class="line">	lua_pop(L,<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">openlibs</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	luaL_requiref(L,<span class="string">&quot;_G&quot;</span>,luaopen_base,<span class="number">1</span>);</span><br><span class="line">	lua_requiref(L,<span class="string">&quot;package&quot;</span>,luaopen_package,<span class="number">1</span>);</span><br><span class="line">	lua_pop(L,<span class="number">2</span>);</span><br><span class="line">	registerlib(L,<span class="string">&quot;coroutine&quot;</span>,luaopen_coroutine);</span><br><span class="line">	registerlib(L,<span class="string">&quot;table&quot;</span>,luaopen_table);</span><br><span class="line">	registerlib(L,<span class="string">&quot;io&quot;</span>,luaopen_io);</span><br><span class="line">	registerlib(L,<span class="string">&quot;os&quot;</span>,luaopen_os);</span><br><span class="line">	registerlib(L,<span class="string">&quot;string&quot;</span>,luaopen_string);</span><br><span class="line">	registerlib(L,<span class="string">&quot;math&quot;</span>,luaopen_math);</span><br><span class="line">	registerlib(L,<span class="string">&quot;utf8&quot;</span>,luaopen_utf8);</span><br><span class="line">	registerlib(L,<span class="string">&quot;debug&quot;</span>,luaopen_debug);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æƒ…å†µéƒ½éœ€è¦æ‰“å¼€åŸºç¡€åº“ã€‚å¦å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦packageåº“ï¼›å¦‚æœæ²¡æœ‰packageåº“ï¼Œå°±æ— æ³•é€šè¿‡requireæ¥æ‰“å¼€å…¶ä»–åº“ã€‚æ‰€æœ‰å…¶ä»–çš„åº“éƒ½æ˜¯å¯é€‰çš„ã€‚å› æ­¤ï¼Œé™¤äº†è°ƒç”¨luaL_openlibsä¹‹å¤–ï¼Œå¯ä»¥åœ¨æ‰“å¼€æ–°çŠ¶æ€æ—¶è°ƒç”¨æˆ‘ä»¬è‡ªå·±çš„å‡½æ•°openlibsã€‚å½“è¿›ç¨‹éœ€è¦ç”¨åˆ°å…¶ä¸­ä»»æ„ä¸€ä¸ªåº“æ—¶ï¼Œåªéœ€æ˜¾å¼åœ°è°ƒç”¨requireï¼Œrequireå°±ä¼šè°ƒç”¨ç›¸åº”çš„luaopen_*å‡½æ•°ll_startå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ã€‚<br>å¦ä¸€ä¸ªæ”¹è¿›æ¶‰åŠé€šä¿¡åŸè¯­ã€‚ä¾‹å¦‚ï¼Œä¸ºlproc.sendå’Œlproc.receiveè®¾ç½®ä¸€ä¸ªç­‰å¾…åŒ¹é…çš„æ—¶é—´é˜€å€¼ä¼šéå¸¸æœ‰ç”¨ã€‚ç‰¹åˆ«çš„ï¼Œå½“ç­‰å¾…æ—¶é—´é˜ˆå€¼ä¸ºé›¶æ—¶ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ä¼šæˆä¸ºéé˜»å¡çš„ã€‚åœ¨POSIXçº¿ç¨‹ä¸­ï¼Œå¯ä»¥ç”¨pthread_cond_timedwaitå®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>Luaç¼–ç¨‹</category>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title>windowsç”µè„‘æç¤ºç¼ºå°‘ä¸¢å¤±dllæ–‡ä»¶</title>
    <url>/62d7ce39.html</url>
    <content><![CDATA[<p>æˆ‘ä»¬åœ¨ä½¿ç”¨windowsç”µè„‘è¿›è¡Œå¼€å‘çš„è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°ç¼ºå°‘æˆ–ä¸¢å¤±<code>.dll</code>æ–‡ä»¶çš„é”™è¯¯ã€‚åšä¸»ä»Šå¤©åœ¨å®‰è£…<code>Visual Studio 2022</code>çš„æ—¶å€™å°±é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>å¦‚å›¾ï¼š</p>
<!-- [![æŠ¥é”™å›¾](https://s1.ax1x.com/2022/11/01/x7qaee.jpg)](https://imgse.com/i/x7qaee) -->
<img data-src="https://s1.ax1x.com/2022/11/01/x7qaee.jpg" alt="æŠ¥é”™å›¾" />
åœ¨ç½‘ä¸ŠæŸ¥æ‰¾èµ„æ–™ï¼Œå‘ç°ç½‘ä¸Šç»™å‡ºçš„å»ºè®®å¤§è‡´åˆ†ä¸ºä»¥ä¸‹3ç‚¹

<h3 id="é‡è£…è½¯ä»¶"><a href="#é‡è£…è½¯ä»¶" class="headerlink" title="é‡è£…è½¯ä»¶"></a>é‡è£…è½¯ä»¶</h3><p>å¤§å®¶ä¹Ÿéƒ½çŸ¥é“<code>Visual Studio</code>è¿™ä¸ªè½¯ä»¶æœ‰å¤šå¤§ï¼Œæ‰€ä»¥ä¸åˆ°ä¸‡ä¸å¾—å·²ï¼Œä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p>
<h3 id="ä½¿ç”¨å„ç§ä¿®å¤å·¥å…·"><a href="#ä½¿ç”¨å„ç§ä¿®å¤å·¥å…·" class="headerlink" title="ä½¿ç”¨å„ç§ä¿®å¤å·¥å…·"></a>ä½¿ç”¨å„ç§ä¿®å¤å·¥å…·</h3><p>åšä¸»ä¹Ÿä¸å¤ªå–œæ¬¢è¿™ç§æ–¹æ³•ï¼Œä¸»è¦æ˜¯è¿˜è¦ä¸‹è½½å¦å¤–çš„è½¯ä»¶ã€‚è€Œä¸”å¾ˆå¤šè½¯ä»¶éƒ½æ²¡æœ‰å®é™…ä½œç”¨ï¼Œæˆ–è€…æ˜¯éœ€è¦æ”¶è´¹ã€‚</p>
<h3 id="ç›´æ¥ä¸‹è½½ç¼ºå°‘çš„dllæ–‡ä»¶"><a href="#ç›´æ¥ä¸‹è½½ç¼ºå°‘çš„dllæ–‡ä»¶" class="headerlink" title="ç›´æ¥ä¸‹è½½ç¼ºå°‘çš„dllæ–‡ä»¶"></a>ç›´æ¥ä¸‹è½½ç¼ºå°‘çš„dllæ–‡ä»¶</h3><p>è¿™é‡Œç»™å¤§å®¶æ¨èä¸€ä¸ªç½‘ç«™ï¼Œéå¸¸å¥½ç”¨ã€‚<a href="https://cn.dll-files.com/">DLLâ€‘FILES.COM</a><br>åœ¨è¿™ä¸ªç½‘ç«™ä¸Šæœç´¢è‡ªå·±éœ€è¦çš„dllæ–‡ä»¶ï¼Œç„¶åæ”¾åˆ°ç›¸åº”çš„ç›®å½•ä¸‹å³å¯ã€‚<br>è¿™ä¸ªç½‘ç«™éå¸¸å¥½ç”¨ï¼Œåšä¸»é¦–æ¨ï¼ï¼ï¼</p>
]]></content>
      <categories>
        <category>Windows</category>
        <category>Visual Studio</category>
      </categories>
  </entry>
  <entry>
    <title>Luaè¿ç»­æ•™ç¨‹ä¹‹ç¼–å†™Cå‡½æ•°çš„æŠ€å·§</title>
    <url>/44511.html</url>
    <content><![CDATA[<p>Luaä¸­çš„â€œæ•°ç»„â€å°±æ˜¯ç‰¹æ®Šæ–¹å¼ä½¿ç”¨çš„è¡¨ã€‚åƒlua-settableå’Œlua-gettableè¿™ç§ç”¨æ¥æ“ä½œè¡¨çš„é€šç”¨å‡½æ•°ï¼Œä¹Ÿå¯ç”¨äºæ“ä½œæ•°ç»„ã€‚ä¸è¿‡ï¼ŒCAPIä¸ºä½¿ç”¨æ•´æ•°ç´¢å¼•çš„è¡¨çš„è®¿é—®å’Œå°ä¿¡æä¾›äº†ä¸“é—¨çš„å‡½æ•°ã€‚</p>
<span id="more"></span>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">lua_geti</span> <span class="params">(lua_State *L, <span class="type">int</span> index, <span class="type">int</span> key)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">lua_seti</span> <span class="params">(lua_State *L, <span class="type">int</span> index, <span class="type">int</span> key)</span>;</span><br></pre></td></tr></table></figure>
<p>Lua5.3ä¹‹å‰çš„ç‰ˆæœ¬åªæä¾›äº†è¿™äº›å‡½æ•°çš„åŸå§‹ç‰ˆæœ¬ï¼Œå³lua_rawgetiå’Œlua_rawsetiã€‚è¿™ä¸¤ä¸ªå‡½æ•°ç±»ä¼¼äºlua_getiå’Œlua_setiï¼Œä½†è¿›è¡Œçš„æ˜¯åŸå§‹è®¿é—®ã€‚å½“åŒºåˆ«å¹¶ä¸æ˜æ˜¾æ—¶ï¼Œé‚£ä¹ˆåŸå§‹ç‰ˆæœ¬å¯èƒ½ä¼šç¨å¾®å¿«ä¸€ç‚¹ã€‚<br>lua_getiå’Œlua_setiçš„æè¿°æœ‰ä¸€ç‚¹ä»¤äººå›°æƒ‘ï¼Œå› ä¸ºå…¶ç”¨äº†ä¸¤ä¸ªç´¢å¼•ï¼šindexè¡¨ç¤ºåœ¨æ ˆä¸­çš„ä½ç½®ï¼Œkeyè¡¨ç¤ºå…ƒç´ åœ¨è¡¨ä¸­çš„ä½ç½®ã€‚å½“tä¸ºæ­£æ•°æ—¶ï¼Œé‚£ä¹ˆè°ƒç”¨lua_geti(L,t,key)ç­‰ä»·äºå¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_pushnumber(L,key);</span><br><span class="line">lua_gettable(L,t);</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨lua_seti(L,t,key)ç­‰ä»·äºå¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">lua_pushnumber(L,key);</span><br><span class="line">lua_insert(L,<span class="number">-2</span>);</span><br><span class="line">lua_settable(L,t);</span><br></pre></td></tr></table></figure>
<p>ä½œä¸ºä½¿ç”¨è¿™äº›å‡½æ•°çš„å…·ä½“ç¤ºä¾‹ï¼Œä¸‹é¢å®ç°äº†å‡½æ•°mapï¼Œè¯¥å‡½æ•°å¯¹æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ è°ƒç”¨ä¸€ä¸ªæŒ‡å®šçš„å‡½æ•°ï¼Œç„¶åç”¨è¯å‡½æ•°è¿”å›çš„ç»“æœæ›¿æ¢æ‰å¯¹åº”çš„æ•°ç»„å…ƒç´ ã€‚</p>
<blockquote>
<p>Cè¯­è¨€ä¸­çš„å‡½æ•°map</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">l_map</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">int</span> i , n;</span><br><span class="line">	<span class="comment">/*ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸€å¼ è¡¨(t) */</span></span><br><span class="line">	luaL_checktype(L,<span class="number">1</span>,LUA_TTABLE);</span><br><span class="line">	<span class="comment">/*ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°(f) */</span></span><br><span class="line">	luaL_checktype(L,<span class="number">2</span>,LUA_TFUNCTION);</span><br><span class="line">	n = luaL_len(L,<span class="number">1</span>);<span class="comment">/*è·å–è¡¨çš„å¤§å°*/</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>;i &lt;=n; i++)&#123;</span><br><span class="line">		lua_pushvalue(L,<span class="number">2</span>); <span class="comment">/*å‹å…¥f*/</span></span><br><span class="line">		lua_geti(L,<span class="number">1</span>,i); <span class="comment">/*å‹å…¥t[i]*/</span></span><br><span class="line">		lua_call(L,<span class="number">1</span>,<span class="number">1</span>); <span class="comment">/*è°ƒç”¨f(t[i])*/</span></span><br><span class="line">		lua_seti(L,<span class="number">1</span>,i); <span class="comment">/*t[i] = result */</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>; <span class="comment">/* æ²¡æœ‰è¿”å›å€¼*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç¤ºä¾‹è¿˜å¼•å…¥äº†ä¸‰ä¸ªæ–°å‡½æ•°ï¼šluaL_checktypeã€luaL_lenå’Œlua_callã€‚<br>å‡½æ•°luaL_checktypeç¡®ä¿æŒ‡å®šçš„å‚æ•°å…·æœ‰æŒ‡å®šçš„ç±»å‹ï¼Œå¦åˆ™å®ƒä¼šå¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚<br>åŸå§‹çš„lua_lenç±»ä¼¼äºé•¿åº¦è¿ç®—ç¬¦ã€‚ç”±äºå…ƒæ–¹æ³•çš„å­˜åœ¨ï¼Œè¯¥è¿ç®—ç¬¦èƒ½å¤Ÿè¿”å›ä»»æ„ç±»å‹çš„å¯¹è±¡ï¼Œè€Œä¸ä»…ä»…æ˜¯æ•°å­—ï¼›å› æ­¤ï¼Œlua_lenä¼šåœ¨æ ˆä¸­è¿”å›å…¶ç»“æœã€‚å‡½æ•°luaL_lenä¼šå°†é•¿åº¦ä½œä¸ºæ•´å‹æ•°è¿”å›ï¼Œå¦‚æœæ— æ³•è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢åˆ™ä¼šå¼•å‘é”™è¯¯ã€‚<br>å‡½æ•°lua_callåšçš„æ˜¯ä¸å—ä¿æŠ¤çš„è°ƒç”¨ï¼Œè¯¥å‡½æ•°ç±»ä¼¼äºlua_pcallï¼Œä½†åœ¨å‘ç”Ÿé”™è¯¯æ—¶lua_callä¼šä¼ æ’­é”™è¯¯è€Œä¸æ˜¯è¿”å›é”™è¯¯ç ã€‚åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ç¼–å†™ä¸»å‡½æ•°æ—¶ï¼Œä¸åº”ä½¿ç”¨lua_callï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦æ•è·æ‰€æœ‰çš„é”™è¯¯ã€‚ä¸è¿‡ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨lua_callæ˜¯ä¸ªä¸é”™çš„æ³¨æ„ï¼›å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œå°±ç•™ç»™å…³å¿ƒé”™è¯¯çš„äººå»å¤„ç†å§ã€‚</p>
<h2 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a>å­—ç¬¦ä¸²æ“ä½œ</h2><p>å½“Cå‡½æ•°æ¥æ”¶åˆ°ä¸€ä¸ªLuaå­—ç¬¦ä¸²ä¸ºå‚æ•°æ—¶ï¼Œå¿…é¡»éµå®ˆä¸¤æ¡è§„åˆ™ï¼šåœ¨ä½¿ç”¨å­—ç¬¦ä¸²æœŸé—´ä¸èƒ½ä»æ ˆä¸­å°†å…¶å¼¹å‡ºï¼Œè€Œä¸”ä¸åº”è¯¥ä¿®æ”¹å­—ç¬¦ä¸²ã€‚<br>å½“Cå‡½æ•°éœ€è¦åˆ›å»ºä¸€ä¸ªè¿”å›ç»™Luaçš„å­—ç¬¦ä¸²æ—¶ï¼Œè¦æ±‚åˆ™æ›´é«˜ã€‚æ­¤æ—¶ï¼Œæ˜¯Cè¯­è¨€ä»£ç è´Ÿè´£ç¼“å†²åŒºçš„åˆ†é…&#x2F;é‡Šæ”¾ã€ç¼“å†²åŒºæº¢å‡ºï¼Œä»¥åŠå…¶ä»–å¯¹Cè¯­è¨€æ¥è¯´æ¯”è¾ƒå›°éš¾çš„ä»»åŠ¡ã€‚å› æ­¤ï¼ŒLuaAPIæä¾›äº†ä¸€äº›å‡½æ•°æ¥å¸®åŠ©å®Œæˆè¿™äº›ä»»åŠ¡ã€‚<br>æ ‡å‡†APIä¸ºä¸¤ç§å¸¸ç”¨çš„å­—ç¬¦ä¸²æ“ä½œæä¾›äº†æ”¯æŒï¼Œå³å­ä¸²æå–å’Œå­—ç¬¦ä¸²è¿æ¥ã€‚è¦æå–å­ä¸²ï¼Œé‚£ä¹ˆåŸºæœ¬çš„æ“ä½œlua_pushlstringå¯ä»¥è·å–å­—ç¬¦ä¸²é•¿åº¦ä½œä¸ºé¢å¤–çš„å‚æ•°ã€‚å› æ­¤ï¼Œå¦‚æœè¦æŠŠå­—ç¬¦ä¸²sä»iåˆ°jï¼ˆåŒ…å«ï¼‰çš„å­ä¸²ä¼ é€’ç»™Luaï¼Œå°±å¿…é¡»ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lua_pushlstring(L,s+i,j-i+1);</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾éœ€è¦ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ ¹æ®æŒ‡å®šçš„åˆ†éš”ç¬¦æ¥åˆ†éš”å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€å¼ åŒ…å«å­ä¸²çš„è¡¨ã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨split(â€œhi:ho:thereâ€,â€:â€)åº”è¯¥è¿”å›è¡¨{â€œhiâ€,â€hoâ€,â€thereâ€}ã€‚ä¸‹é¢ç¤ºä¾‹æ¼”ç¤ºäº†è¯¥å‡½æ•°çš„ä¸€ç§ç®€å•å®ç°ï¼š</p>
<blockquote>
<p>åˆ†éš”å­—ç¬¦ä¸²</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">l_split</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *s = luaL_checkstring(L,<span class="number">1</span>);</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *sep = luaL_checkstring(L,<span class="number">2</span>);</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *e;</span><br><span class="line">	<span class="type">int</span> i = <span class="number">1</span>;</span><br><span class="line">	lua_newtable(L); <span class="comment">/*ç»“æœè¡¨*/</span></span><br><span class="line">	<span class="comment">/* ä¾æ¬¡å¤„ç†æ¯ä¸ªåˆ†éš”ç¬¦*/</span></span><br><span class="line">	<span class="keyword">while</span> ((e = <span class="built_in">strchr</span>(s,*sep)) != <span class="literal">NULL</span>) &#123;</span><br><span class="line">		lua_pushlstring(L,s,e - s); <span class="comment">/*å‹å…¥å­ä¸²*/</span></span><br><span class="line">		lua_rawseti(L,<span class="number">-2</span>,i++); <span class="comment">/* å‘è¡¨ä¸­æ’å…¥*/</span></span><br><span class="line">		s = e + <span class="number">1</span>; <span class="comment">/*è·³è¿‡åˆ†éš”ç¬¦*/</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/* æ’å…¥æœ€åä¸€ä¸ªå­ä¸²*/</span></span><br><span class="line">	lua_pushstring(L,s);</span><br><span class="line">	lua_rawseti(L,<span class="number">-2</span>,i);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;<span class="comment">/*å°†ç»“æœè¡¨è¿”å›*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°æ— é¡»ç¼“å†²åŒºï¼Œå¹¶èƒ½å¤„ç†ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ï¼ŒLuaè¯­è¨€ä¼šè´Ÿè´£å¤„ç†æ‰€æœ‰çš„å†…å­˜åˆ†é…ã€‚<br>è¦è¿æ¥å­—ç¬¦ä¸²ï¼ŒLuaæä¾›äº†ä¸€ä¸ªåä¸ºlua_concatçš„ç‰¹æ®Šå‡½æ•°ï¼Œè¯¥å‡½æ•°ç±»ä¼¼äºLuaä¸­çš„è¿æ¥æ“ä½œç¬¦(..)ï¼Œå®ƒä¼šå°†æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶åœ¨å¿…è¦æ—¶è°ƒç”¨å…ƒæ–¹æ³•ã€‚æ­¤å¤–ï¼Œè¯¥å‡½æ•°è¿˜èƒ½ä¸€æ¬¡è¿æ¥ä¸¤ä¸ªä»¥ä¸Šçš„å­—ç¬¦ä¸²ã€‚è°ƒç”¨lua_concat(L,n)ä¼šè¿æ¥æ ˆæœ€é¡¶ç«¯çš„nä¸ªå€¼ï¼Œå¹¶å°†ç»“æœå‹å…¥æ ˆã€‚<br>å¦ä¸€ä¸ªæœ‰å¸®åŠ©çš„å‡½æ•°æ˜¯lua_pushfstring:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">char</span> *<span class="title function_">lua_pushfstring</span><span class="params">(lua_State *L, <span class="type">const</span> <span class="type">char</span> *fmt, ...)</span>;</span><br></pre></td></tr></table></figure>

<p>è¯¥å‡½æ•°åœ¨æŸç§ç¨‹åº¦ä¸Šç±»ä¼¼äºCå‡½æ•°sprintfï¼Œå®ƒä»¬éƒ½ä¼šæ ¹æ®æ ¼å¼å­—ç¬¦ä¸²å’Œé¢å¤–çš„å‚æ•°æ¥åˆ›å»ºå­—ç¬¦ä¸²ã€‚ç„¶è€Œï¼Œä¸sprintfä¸åŒï¼Œä½¿ç”¨lua_pushfstringæ—¶ä¸éœ€è¦æä¾›ç¼“å†²åŒºã€‚ä¸ç®¡å­—ç¬¦ä¸²æœ‰å¤šå¤§ï¼ŒLuaéƒ½ä¼šåŠ¨æ€åœ°ä¸ºæˆ‘ä»¬åˆ›å»ºã€‚lua_pushfstringä¼šå°†ç»“æœå­—ç¬¦ä¸²å‹å…¥æ ˆä¸­å¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘å®ƒçš„æŒ‡é’ˆï¼Œè¯¥å‡½æ•°èƒ½å¤Ÿæ¥å—å¦‚ä¸‹æ‰€ç¤ºå­—ç¬¦ã€‚</p>
<hr>
<p>%s 						æ’å…¥ä¸€ä¸ªä»¥\0ç»“å°¾çš„å­—ç¬¦ä¸²<br>%d						æ’å…¥ä¸€ä¸ªint<br>%f 						æ’å…¥ä¸€ä¸ªLuaè¯­è¨€çš„æµ®ç‚¹æ•°<br>%p 						æ’å…¥ä¸€ä¸ªæµ®ç‚¹æ•°<br>%I 						æ’å…¥ä¸€ä¸ªLuaè¯­è¨€çš„æ•´å‹æ•°<br>%c 						æ’å…¥ä¸€ä¸ªä»¥intè¡¨ç¤ºçš„å•å­—èŠ‚å­—ç¬¦<br>%U						æ’å…¥ä¸€ä¸ªä»¥intè¡¨ç¤ºçš„UTF-8å­—èŠ‚åºåˆ—<br>%%						æ’å…¥ä¸€ä¸ªç™¾åˆ†å·</p>
<hr>
<p>è¯¥å‡½æ•°ä¸èƒ½ä½¿ç”¨è¯¸å¦‚å®½åº¦æˆ–è€…ç²¾åº¦ä¹‹ç±»çš„ä¿®é¥°ç¬¦ã€‚<br>å½“åªéœ€è¦è¿æ¥å‡ ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œlua_concatå’Œlua_pushfstringéƒ½å¾ˆæœ‰ç”¨ã€‚ä¸è¿‡ï¼Œå¦‚æœéœ€è¦è¿æ¥å¾ˆå¤šå­—ç¬¦ä¸²ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ç”±è¾…åŠ©åº“æä¾›çš„ç¼“å†²æœºåˆ¶ã€‚<br>ç¼“å†²æœºåˆ¶çš„ç®€å•ç”¨æ³•åªåŒ…å«ä¸¤ä¸ªå‡½æ•°ï¼šä¸€ä¸ªç”¨äºåœ¨ç»„è£…å­—ç¬¦ä¸²æ—¶æä¾›ä»»æ„å¤§å°çš„ç¼“å†²åŒºï¼›å¦ä¸€ä¸ªç”¨äºå°†ç¼“å†²åŒºä¸­çš„å†…å®¹è½¬æ¢ä¸ºä¸€ä¸ªLuaå­—ç¬¦ä¸²ã€‚ä¸‹é¢ç¤ºä¾‹ç”¨æºæ–‡ä»¶lstrlib.cä¸­string.upperçš„å®ç°æ¼”ç¤ºäº†è¿™äº›å‡½æ•°ã€‚</p>
<blockquote>
<p>å‡½æ•°string.upper</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">str_upper</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">size_t</span> l;</span><br><span class="line">	<span class="type">size_t</span> i;</span><br><span class="line">	luaL_Buffer b;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *s = luaL_checklstring(L,<span class="number">1</span>,&amp;<span class="number">1</span>);</span><br><span class="line">	<span class="type">char</span> *p = luaL_buffinitsize(L,&amp;b,l);</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i&lt; l; i++)</span><br><span class="line">		p[i] = <span class="built_in">toupper</span>(uchar(s[i]));</span><br><span class="line">	luaL_pushresultsize(&amp;b,l);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¾…åŠ©åº“ä¸­ç¼“å†²åŒºçš„ç¬¬ä¸€æ­¥æ˜¯å£°æ˜ä¸€ä¸ªluaL_Bufferç±»å‹çš„å˜é‡ã€‚ç¬¬äºŒæ­¥æ˜¯è°ƒç”¨luaL_buffinitsizeè·å–ä¸€ä¸ªæŒ‡å‘æŒ‡å®šå¤§å°ç¼“å†²åŒºçš„æŒ‡é’ˆï¼Œä¹‹åå°±å¯ä»¥è‡ªç”±åœ°ä½¿ç”¨è¯¥ç¼“å†²åŒºæ¥åˆ›å»ºå­—ç¬¦ä¸²äº†ã€‚æœ€åéœ€è¦è°ƒç”¨luaL_pushresultsizeå°†ç¼“å†²åŒºä¸­çš„å†…å®¹è½¬æ¢ä¸ºä¸€ä¸ªæ–°çš„Luaå­—ç¬¦ä¸²ï¼Œå¹¶å°†è¯¥å­—ç¬¦ä¸²å‹æ ˆã€‚å…¶ä¸­ï¼Œç¬¬äºŒæ­¥è°ƒç”¨æ—¶å°±ç¡®å®šäº†å­—ç¬¦ä¸²çš„æœ€ç»ˆé•¿åº¦ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåƒæˆ‘ä»¬çš„ç¤ºä¾‹ä¸€æ ·ï¼Œå­—ç¬¦ä¸²çš„æœ€ç»ˆå¤§å°ä¸ç¼“å†²åŒºå¤§å°ç›¸ç­‰ï¼Œä½†ä¹Ÿå¯èƒ½æ›´å°ã€‚åŠ å…¥æˆ‘ä»¬å¹¶ä¸çŸ¥é“è¿”å›å­—ç¬¦ä¸²çš„å‡†ç¡®é•¿åº¦ï¼Œä½†çŸ¥é“å…¶æœ€å¤§ä¸è¶…è¿‡å¤šå°‘ï¼Œé‚£ä¹ˆå¯ä»¥æ“å®ˆåœ°ä¸ºå…¶åˆ†é…ä¸€ä¸ªè¾ƒå¤§çš„ç©ºé—´ã€‚<br>è¯·æ³¨æ„ï¼ŒluaL_pushresultsizeå¹¶æœªè·å–LuaçŠ¶æ€ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ã€‚åœ¨åˆå§‹åŒ–ä¹‹åï¼Œç¼“å†²åŒºä¿å­˜äº†å¯¹LuaçŠ¶æ€çš„å¼•ç”¨ï¼Œå› æ­¤åœ¨è°ƒç”¨å…¶ä»–æ“ä½œç¼“å†²åŒºçš„å‡½æ•°æ—¶æ— éœ€å†ä¼ é€’è¯¥çŠ¶æ€ã€‚<br>åŠ å…¥ä¸çŸ¥é“è¿”å›ç»“æœå¤§å°çš„ä¸Šé™å€¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡é€æ­¥å¢åŠ å†…å®¹çš„æ–¹å¼æ¥ä½¿ç”¨è¾…åŠ©åº“çš„ç¼“å†²åŒºã€‚è¾…åŠ©åº“æä¾›äº†ä¸€ä¸ªç”¨äºç¼“å†²åŒºä¸­å¢åŠ å†…å®¹çš„å‡½æ•°ï¼šluaL_addvalueç”¨äºåœ¨æ ˆé¡¶å¢åŠ ä¸€ä¸ªLuaå­—ç¬¦ä¸²ï¼ŒluaL_addlstringç”¨äºå¢åŠ ä¸€ä¸ªé•¿åº¦æ˜ç¡®çš„å­—ç¬¦ä¸²ï¼ŒluaL_addstringç”¨äºå¢åŠ ä¸€ä¸ªä»¥\0ç»“å°¾çš„å­—ç¬¦ä¸²ï¼ŒluaL_addcharç”¨äºå¢åŠ ä¸€å•ä¸ªå­—ç¬¦ã€‚è¿™äº›å‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">void luaL_buffinit   (lua_State *L, luaL_Buffer *B);</span><br><span class="line">void luaL_addvalue   (luaL_Buffer *B);</span><br><span class="line">void lua_addlstring  (luaL_Buffer *B, const <span class="built_in">char</span> *s, size_t l);</span><br><span class="line">void lua_addstring   (luaL_Buffer *B, const <span class="built_in">char</span> *s);</span><br><span class="line">void luaL_addchar	(luaL_Buffer *B, <span class="built_in">char</span> c);</span><br><span class="line">void luaL_pushresult (luaL_Buffer *B);</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢ç¤ºä¾‹é€šè¿‡å‡½æ•°table.concatçš„ä¸€ä¸ªç®€åŒ–çš„å®ç°æ¼”ç¤ºäº†è¿™äº›å‡½æ•°çš„ä½¿ç”¨ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ å‡½æ•°table.concatçš„ä¸€ä¸ªç®€åŒ–çš„å®ç°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">tconcat</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	luaL_Buffer b;</span><br><span class="line">	<span class="type">int</span> i , n;</span><br><span class="line">	luaL_checktype(L,<span class="number">1</span>,LUA_TTABLE);</span><br><span class="line">	n = luaL_len(L,<span class="number">1</span>);</span><br><span class="line">	luaL_buffinit(L,&amp;b);</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		lua_geti(L,<span class="number">1</span>,i);</span><br><span class="line">		luaL_addvalue(b);</span><br><span class="line">	&#125;</span><br><span class="line">	luaL_pushresult(&amp;b);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¯¥å‡½æ•°ä¸­ï¼Œé¦–å…ˆè°ƒç”¨luaL_buffintiæ¥åˆå§‹åŒ–ç¼“å†²åŒºã€‚ç„¶åï¼Œå‘ç¼“å†²åŒºä¸­é€ä¸ªå¢åŠ å…ƒç´ ï¼Œæœ¬ä¾‹ä¸­ç”¨çš„æ˜¯luaL_addvalueã€‚æœ€åï¼ŒluaL_pushresultåˆ·æ–°ç¼“å†²åŒºå¹¶åœ¨æ ˆé¡¶ç•™ä¸‹æœ€ç»ˆçš„ç»“æœå­—ç¬¦ä¸²ã€‚<br>åœ¨ä½¿ç”¨è¾…åŠ©åº“çš„ç¼“å†²åŒºæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æ³¨æ„ä¸€ä¸ªç»†èŠ‚ã€‚åˆå§‹åŒ–ä¸€ä¸ªç¼“å†²åŒºåï¼ŒLuaæ ˆå¯èƒ½è¿˜ä¼šä¿ç•™æŸäº›å†…éƒ¨æ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸èƒ½å‡è®¾åœ¨ä½¿ç”¨ç¼“å†²åŒºä¹‹å‰æ ˆé¡¶ä»ç„¶åœç•™åœ¨æœ€åˆçš„ä½ç½®ã€‚æ­¤å¤–ï¼Œå°½ç®¡ä½¿ç”¨ç¼“å†²åŒºæ—¶æˆ‘ä»¬å¯ä»¥å°†è¯¥æ ˆç”¨äºå…¶ä»–ç”¨é€”ï¼Œä½†åœ¨è®¿é—®æ ˆä¹‹å‰ï¼Œå¯¹æ ˆçš„å‹å…¥å’Œå¼¹å‡ºæ¬¡æ•°å¿…é¡»å¹³è¡¡ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯luaL_addvalueï¼Œè¯¥å‡½æ•°ä¼šå‡è®¾è¦æ·»åŠ åˆ°ç¼“å†²åŒºçš„å­—ç¬¦ä¸²æ˜¯ä½äºæ ˆé¡¶çš„ã€‚</p>
<h2 id="åœ¨Cå‡½æ•°ä¸­ä¿å­˜çŠ¶æ€"><a href="#åœ¨Cå‡½æ•°ä¸­ä¿å­˜çŠ¶æ€" class="headerlink" title="åœ¨Cå‡½æ•°ä¸­ä¿å­˜çŠ¶æ€"></a>åœ¨Cå‡½æ•°ä¸­ä¿å­˜çŠ¶æ€</h2><p>é€šå¸¸æƒ…å†µä¸‹ï¼ŒCå‡½æ•°éœ€è¦ä¿å­˜ä¸€äº›éå±€éƒ¨æ•°æ®ï¼Œå³ç”Ÿå­˜æ—¶é—´è¶…å‡ºCå‡½æ•°æ‰§è¡Œæ—¶é—´çš„æ•°æ®ã€‚åœ¨Cè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨å…¨å±€å˜é‡æˆ–é™æ€å˜é‡æ¥æ»¡è¶³è¿™ç§éœ€æ±‚ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬ä¸ºLuaç¼–å†™åº“å‡½æ•°æ—¶ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½åŠæ³•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ— æ³•åœ¨ä¸€ä¸ªCè¯­è¨€å˜é‡ä¸­ä¿å­˜æ™®é€šçš„Luaå€¼ã€‚å…¶æ¬¡ï¼Œä½¿ç”¨è¿™ç±»å˜é‡çš„åº“æ— æ³•ç”¨äºå¤šä¸ªLuaçŠ¶æ€ã€‚<br>æ›´å¥½çš„åŠæ³•æ˜¯ä»Luaè¯­è¨€ä¸­å¯»æ±‚å¸®åŠ©ã€‚Luaå‡½æ•°æœ‰ä¸¤ä¸ªåœ°æ–¹å¯ç”¨äºå­˜å‚¨éå±€éƒ¨æ•°æ®ï¼Œå³å…¨å±€å˜é‡å’Œéå±€éƒ¨å˜é‡ï¼Œè€ŒCAPIä¹Ÿæä¾›äº†ä¸¤ä¸ªç±»ä¼¼çš„åœ°æ–¹æ¥å­˜å‚¨éå±€éƒ¨æ•°æ®ï¼Œå³æ³¨å†Œè¡¨å’Œä¸Šå€¼ã€‚</p>
<h3 id="æ³¨å†Œè¡¨"><a href="#æ³¨å†Œè¡¨" class="headerlink" title="æ³¨å†Œè¡¨"></a>æ³¨å†Œè¡¨</h3><p>æ³¨å†Œè¡¨æ˜¯ä¸€å¼ åªèƒ½è¢«Cä»£ç è®¿é—®çš„å…¨å±€è¡¨ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨æ³¨å†Œè¡¨æ¥å­˜å‚¨å¤šä¸ªæ¨¡å—é—´å…±äº«çš„æ•°æ®ã€‚<br>æ³¨å†Œè¡¨æ€»æ˜¯ä½äºä¼ªç´¢å¼•LUA_REGISTRYINDEXä¸­ã€‚ä¼ªç´¢å¼•å°±åƒæ˜¯ä¸€ä¸ªæ ˆä¸­çš„ç´¢å¼•ï¼Œä½†å®ƒæ‰€å…³è”çš„å€¼ä¸åœ¨æ ˆä¸­ã€‚LuaAPIä¸­å¤§å¤šæ•°æ¥å—ç´¢å¼•ä½œä¸ºå‚æ•°çš„å‡½æ•°ä¹Ÿèƒ½å°†ä¼ªç´¢å¼•ä½œä¸ºå‚æ•°ï¼Œåƒlua_removeå’Œlua_insertè¿™ç§æ“ä½œæ ˆæœ¬èº«çš„å‡½æ•°é™¤å¤–ã€‚ä¾‹å¦‚ï¼Œè¦è·å–æ³¨å†Œè¡¨ä¸­é”®ä¸ºâ€keyâ€çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„è°ƒç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">lua_getfield(L,LUA_REGISTRYINDEX,<span class="string">&quot;Key&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æ³¨å†Œè¡¨æ˜¯ä¸€ä¸ªæ™®é€šçš„Luaè¡¨ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨é™¤nilå¤–çš„ä»»æ„Luaå€¼æ¥æ£€ç´¢å®ƒã€‚ä¸è¿‡ï¼Œç”±äºæ‰€æœ‰çš„Cè¯­è¨€æ¨¡å—å…±äº«çš„æ˜¯åŒä¸€ä¸ªæ³¨å†Œè¡¨ï¼Œä¸ºäº†é¿å…å†²çªï¼Œæˆ‘ä»¬å¿…é¡»è°¨æ…åœ°é€‰æ‹©ä½œä¸ºé”®çš„å€¼ã€‚å½“å…è®¸å…¶ä»–ç‹¬ç«‹çš„åº“è®¿é—®æˆ‘ä»¬çš„æ•°æ®æ—¶ï¼Œå­—ç¬¦ä¸²ç±»å‹çš„é”®å°¤ä¸ºæœ‰ç”¨ï¼Œå› ä¸ºè¿™äº›åº“åªéœ€çŸ¥é“é”®çš„åå­—å°±å¯ä»¥äº†ã€‚å¯¹äºæµ™è¥¿é”®ï¼Œé€‰æ‹©åå­—æ—¶æ²¡æœ‰ä¸€ç§å¯ä»¥ç»å¯¹é¿å…å†²çªçš„æ–¹æ³•ï¼›ä¸è¿‡ï¼Œè¯¸å¦‚é¿å…ä½¿ç”¨å¸¸è§çš„åå­—ï¼Œä»¥åŠç”¨åº“åæˆ–ç±»ä¼¼çš„ä¸œè¥¿ä½œä¸ºé”®åçš„å‰ç¼€ï¼Œä»ç„¶æ˜¯å¥½çš„åšæ³•ã€‚<br>åœ¨æ³¨å†Œè¡¨ä¸­ä¸èƒ½ä½¿ç”¨æ•°å€¼ç±»å‹çš„é”®ï¼Œå› ä¸ºLuaè¯­è¨€å°†å…¶ç”¨ä½œå¼•ç”¨ç³»ç»Ÿçš„ä¿ç•™å­—ã€‚å¼•ç”¨ç³»ç»Ÿç”±è¾…åŠ©åº“ä¸­çš„ä¸€å¯¹å‡½æ•°ç»„æˆï¼Œæœ‰äº†è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬åœ¨è¡¨ä¸­å­˜å‚¨å€¼æ—¶ä¸å¿…æ‹…å¿ƒå¦‚ä½•åˆ›å»ºå”¯ä¸€çš„é”®ã€‚å‡½æ•°luaL_refç”¨äºåˆ›å»ºæ–°çš„å¼•ç”¨ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> ref = luaL_ref(L,LUA_REGISTRYINDEX);</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°è°ƒç”¨ä¼šä»æ ˆä¸­å¼¹å‡ºä¸€ä¸ªå€¼ï¼Œç„¶ååˆ†é…ä¸€ä¸ªæ–°çš„æ•´å‹çš„é”®ï¼Œä½¿ç”¨è¿™ä¸ªé”®å°†ä»æ ˆä¸­å¼¹å‡ºçš„å€¼ä¿å­˜åˆ°æ³¨å†Œè¡¨ä¸­ï¼Œæœ€åè¿”å›è¯¥æ•´å‹é”®ï¼Œè€Œè¿™ä¸ªé”®å°±è¢«ç§°ä¸ºå¼•ç”¨ã€‚<br>é¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬ä¸»è¦æ˜¯åœ¨éœ€è¦ä¸€ä¸ªCè¯­è¨€ç»“æ„ä½“ä¸­ä¿å­˜ä¸€ä¸ªæŒ‡å‘Luaå€¼çš„å¼•ç”¨æ—¶ä½¿ç”¨å¼•ç”¨ã€‚æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€çœ‹åˆ°çš„ï¼Œä¸åº”è¯¥å°†æŒ‡å‘Luaå­—ç¬¦ä¸²çš„æŒ‡é’ˆä¿å­˜åœ¨è·å–è¯¥æŒ‡é’ˆçš„å‡½æ•°ä¹‹å¤–ã€‚æ­¤å¤–ï¼ŒLuaè¯­è¨€ç”šè‡³æ²¡æœ‰æä¾›æŒ‡å‘å…¶ä»–å¯¹è±¡çš„æŒ‡é’ˆã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡æŒ‡é’ˆæ¥å¼•ç”¨Luaå¯¹è±¡ã€‚å½“éœ€è¦è¿™ç§æŒ‡é’ˆæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå¼•ç”¨å¹¶å°†å…¶ä¿å­˜åœ¨Cè¯­è¨€ä¸­ã€‚<br>è¦å°†äºå¼•ç”¨refå…³è”çš„å€¼å‹å…¥æ ˆä¸­ï¼Œåªè¦è¿™æ ·å†™å°±è¡Œï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">lua_rawgeti(L,LUA_REGISTRYINDEX,ref);</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œè¦é‡Šæ”¾å€¼å’Œå¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨luaL_unref:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">luaL_unref(L,LUA_REGISTRYINDEX,ref);</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™å¥è°ƒç”¨åï¼Œå†æ¬¡è°ƒç”¨luaL_refä¼šå†æ¬¡è¿”å›ç›¸åŒçš„å¼•ç”¨ã€‚<br>å¼•ç”¨ç³»ç»Ÿå°†nilè§†ä¸ºä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚æ— è®ºä½•æ—¶ä¸ºä¸€ä¸ªnilå€¼è°ƒç”¨luaL_reféƒ½ä¸ä¼šåˆ›å»ºæ–°çš„å¼•ç”¨ï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ªå¸¸é‡å¼•ç”¨LUA_REFNILã€‚å¦‚ä¸‹çš„è°ƒç”¨æ²¡ä»€ä¹ˆå¥½å¤„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">luaL_unref(L,LUA_REGISTRYINDEX,LUA_REFNIL);</span><br></pre></td></tr></table></figure>
<p>è€Œå¦‚ä¸‹çš„ä»£ç åˆ™ä¼šåƒæˆ‘ä»¬æœŸæœ›åœ°ä¸€æ ·åƒæ ˆä¸­å‹å…¥ä¸€ä¸ªnilï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">lua_rawgeti(L,LUA_REGISTRYINDEX,LUA_REFNIL);</span><br></pre></td></tr></table></figure>
<p>å¼•ç”¨ç³»ç»Ÿè¿˜å®šä¹‰äº†ä¸€ä¸ªå¸¸é‡LUA_NOREFï¼Œè¿™æ˜¯ä¸€ä¸ªä¸åŒäºå…¶ä»–åˆæ³•å¼•ç”¨çš„æ•´æ•°ï¼Œå®ƒå¯ä»¥ç”¨äºè¡¨ç¤ºæ— æ•ˆçš„å¼•ç”¨ã€‚<br>å½“åˆ›å»ºLuaçŠ¶æ€æ—¶ï¼Œæ³¨å†Œè¡¨ä¸­æœ‰ä¸¤ä¸ªé¢„å®šä¹‰çš„å¼•ç”¨ï¼š<br>LUA_RIDX_MAINTHREAD<br>æŒ‡å‘LuaçŠ¶æ€æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯å…¶ä¸»çº¿ç¨‹ã€‚<br>LUA_RIDX_GLOBALS<br>æŒ‡å‘å…¨å±€å˜é‡ã€‚<br>å¦ä¸€ç§åœ¨æ³¨å†Œè¡¨ä¸­åˆ›å»ºå”¯ä¸€é”®çš„æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨ä»£ç ä¸­é™æ€å˜é‡çš„åœ°å€ï¼ŒCè¯­è¨€çš„é“¾æ¥ç¼–è¾‘å™¨ä¼šç¡®ä¿é”®åœ¨æ‰€æœ‰å·²åŠ è½½çš„åº“ä¸­çš„å”¯ä¸€æ€§ã€‚è¦ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œéœ€è¦ç”¨åˆ°å‡½æ•°lua_pushlightuserdataï¼Œè¯¥å‡½æ•°ä¼šåœ¨æ ˆä¸­å‹å…¥ä¸€ä¸ªè¡¨ç¤ºCè¯­è¨€æŒ‡é’ˆçš„å€¼ã€‚ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨è¿™ç§æ–¹æ³•åœ¨æ³¨å†Œè¡¨ä¸­ä¿å­˜å’Œè·å–å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*å…·æœ‰å”¯ä¸€åœ°å€çš„å˜é‡*/</span></span><br><span class="line"><span class="type">static</span> <span class="type">char</span> Key = <span class="string">&#x27;k&#x27;</span>;</span><br><span class="line"><span class="comment">/* ä¿å­˜å­—ç¬¦ä¸²*/</span></span><br><span class="line">lua_pushlightuserdata(L,(<span class="type">void</span> *)&amp;Key); <span class="comment">/* å‹å…¥åœ°å€*/</span></span><br><span class="line">lua_pushstring(L,myStr); <span class="comment">/*å‹å…¥å€¼*/</span></span><br><span class="line">lua_settable(L,LUA_REGISTRYINDEX); <span class="comment">/* registry[&amp;Key] = myStr */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* è·å–å­—ç¬¦ä¸²*/</span></span><br><span class="line">lua_pushlightuserdata(L,(<span class="type">void</span> *)&amp;Key); <span class="comment">/* å‹å…¥åœ°å€*/</span></span><br><span class="line">lua_gettbale(L,LUA_REGISTRYINDEX); <span class="comment">/* è·å–å€¼ */</span></span><br><span class="line">myStr = lua_tostring(L,<span class="number">-1</span>); <span class="comment">/*è½¬æ¢ä¸ºå­—ç¬¦ä¸²*/</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†ç®€åŒ–å°†å˜é‡åœ°å€ç”¨ä½œå”¯ä¸€é”®çš„æ–¹æ³•ï¼ŒLua5.2ä¸­å¼•å…¥äº†ä¸¤ä¸ªæ–°å‡½æ•°ï¼šlua_rawgetpå’Œlua_rawsetpã€‚è¿™ä¸¤ä¸ªå‡½æ•°ç±»ä¼¼äºlua_rawgetiå’Œlua_rawsetiï¼Œä½†å®ƒä»¬ä½¿ç”¨Cè¯­è¨€æŒ‡é’ˆä½œä¸ºé”®ã€‚ä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå¯ä»¥å°†ä¸Šé¢çš„ä»£ç é‡å†™ä¸ºï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">char</span> Key = <span class="string">&#x27;k&#x27;</span>;</span><br><span class="line"><span class="comment">/* ä¿å­˜å­—ç¬¦ä¸² */</span></span><br><span class="line">lua_pushstring(L,myStr);</span><br><span class="line">lua_rawsetp(L,LUA_REGISTRYINDEX,(<span class="type">void</span> *)&amp;Key);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*è·å–å­—ç¬¦ä¸²*/</span></span><br><span class="line">lua_rawgetp(L,LUA_REGISTRYINDEX,(<span class="type">void</span> *)&amp;Key);</span><br><span class="line">myStr = lua_toshtring(L,<span class="number">-1</span>);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä½¿ç”¨äº†åŸå§‹è®¿é—®ã€‚ç”±äºæ³¨å†Œè¡¨æ²¡æœ‰å…ƒç´ ï¼Œå› æ­¤åŸå§‹è®¿é—®å’Œæ™®é€šè®¿é—®ç›¸åŒï¼Œè€Œä¸”æ•ˆç‡è¿˜ä¼šç¨å¾®é«˜ä¸€äº›ã€‚</p>
<h3 id="ä¸Šå€¼"><a href="#ä¸Šå€¼" class="headerlink" title="ä¸Šå€¼"></a>ä¸Šå€¼</h3><p>æ³¨å†Œè¡¨æä¾›äº†å…¨å±€å˜é‡ï¼Œè€Œä¸Šå€¼åˆ™å®ç°äº†ä¸€ç§ç±»ä¼¼äºCè¯­è¨€é™æ€å˜é‡çš„æœºåˆ¶ã€‚æ¯ä¸€æ¬¡åœ¨Luaä¸­åˆ›å»ºæ–°çš„Cå‡½æ•°æ—¶ï¼Œéƒ½å¯ä»¥å°†ä»»æ„æ•°é‡çš„ä¸Šå€¼ä¸è¿™ä¸ªå‡½æ•°ç›¸å…³è”ï¼Œè€Œæ¯ä¸ªä¸Šå€¼éƒ½å¯ä»¥ä¿å­˜ä¸€ä¸ªLuaå€¼ã€‚åé¢åœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¼ªç´¢å¼•æ¥è‡ªç”±åœ°è®¿é—®è¿™äº›ä¸Šå€¼ã€‚<br>æˆ‘ä»¬å°†è¿™ç§Cå‡½æ•°ä¸å…¶ä¸Šå€¼çš„å…³è”ç§°ä¸ºé—­åŒ…ã€‚Cè¯­è¨€é—­åŒ…ç±»ä¼¼äºLuaè¯­è¨€é—­åŒ…ã€‚ ç‰¹åˆ«çš„ï¼Œå¯ä»¥ç”¨ç›¸åŒçš„å‡½æ•°ä»£ç æ¥åˆ›å»ºä¸åŒçš„é—­åŒ…ï¼Œæ¯ä¸ªé—­åŒ…å¯ä»¥æ‹¥æœ‰ä¸åŒçš„ä¸Šå€¼ã€‚<br>æ¥ä¸‹æ¥çœ‹ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬ç”¨Cè¯­è¨€åˆ›å»ºä¸€ä¸ªå‡½æ•°newCounterã€‚è¯¥å‡½æ•°æ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„è®¡æ•°å‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">c1 = newCounter()</span><br><span class="line">print(c1(),c1(),c1())			-- <span class="number">1</span>	<span class="number">2</span>	<span class="number">3</span></span><br><span class="line">c2 = newCounter()</span><br><span class="line">print(c2(),c2(),c2())			-- <span class="number">1</span>	<span class="number">2</span>	<span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>å°½ç®¡æ‰€æœ‰çš„è®¡æ•°å™¨éƒ½é€‚ç”¨ç›¸åŒçš„Cè¯­è¨€ä»£ç ï¼Œä½†å®ƒä»¬å„è‡ªéƒ½ä¿ç•™äº†ç‹¬ç«‹çš„è®¡æ•°å™¨ã€‚å·¥å‚å‡½æ•°çš„ä»£ç å½¢å¦‚ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">counter</span> <span class="params">(lua_State *L)</span>;  <span class="comment">/*å‰å‘å£°æ˜*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">newCounter</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	lua_pushinteger(L,<span class="number">0</span>);</span><br><span class="line">	lua_pushcclosure(L,&amp;counter,<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„å…³é”®å‡½æ•°æ˜¯lua_pushcclosureï¼Œè¯¥å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é—­åŒ…ã€‚lua_pushcclosureçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªåŸºç¡€å‡½æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸Šå€¼çš„æ•°é‡ã€‚åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„é—­åŒ…å‰ï¼Œæˆ‘ä»¬å¿…é¡»å°†ä¸Šå€¼çš„åˆå§‹å€¼å‹æ ˆã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å‹å…¥äº†é›¶ä½œä¸ºå”¯ä¸€ä¸€ä¸ªä¸Šå€¼çš„åˆå§‹å€¼ã€‚æ­£å¦‚æˆ‘ä»¬é¢„æƒ³çš„é‚£æ ·ï¼Œlua_pushcclosureä¼šå°†ä¸€ä¸ªæ–°çš„é—­åŒ…ç•™åœ¨æ ˆä¸­ï¼Œå¹¶å°†å…¶ä½œä¸ºnewCounterçš„è¿”å›å€¼ã€‚<br>ç°åœ¨ï¼Œæ¥çœ‹ä¸€ä¸‹counterçš„å®šä¹‰ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">counter</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">int</span> val = lua_tointeger(L, lua_upvalueindex(<span class="number">1</span>));</span><br><span class="line">	lua_pushinteger(L,++val);<span class="comment">/*æ–°å€¼*/</span></span><br><span class="line">	lua_copy(L,<span class="number">-1</span>,lua_upvalueindex(<span class="number">1</span>)); <span class="comment">/*æ›´æ–°ä¸Šå€¼*/</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>; <span class="comment">/*è¿”å›æ–°å€¼*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„å…³é”®æ˜¯å®lua_upvalueindex,å®ƒå¯ä»¥ç”Ÿæˆä¸Šå€¼çš„ä¼ªç´¢å¼•ã€‚ç‰¹åˆ«çš„ï¼Œè¡¨è¾¾å¼lua_upvalueindex(1)ç»™å‡ºäº†æ­£åœ¨è¿è¡Œçš„å‡½æ•°çš„ç¬¬ä¸€ä¸ªä¸Šå€¼çš„ä¼ªç´¢å¼•ï¼Œè¯¥ä¸ºç´¢å¼•åŒå…¶ä»–çš„æ ˆç´¢å¼•ä¸€æ ·ï¼Œå”¯ä¸€åŒºåˆ«çš„æ˜¯å®ƒä¸å­˜åœ¨ä¸æ ˆä¸­ã€‚å› æ­¤ï¼Œè°ƒç”¨lua_tointegerä¼šä»¥æ•´å‹è¿”å›ä¸€ä¸ªä¸Šå€¼çš„å½“å‰å€¼ã€‚ç„¶åï¼Œå‡½æ•°counterå°†æ–°å€¼++valå‹æ ˆï¼Œå¹¶å°†å…¶å¤åˆ¶ä¸€ä»½ä½œä¸ºæ–°ä¸Šå€¼çš„å€¼ï¼Œå†å°†å…¶è¿”å›ã€‚<br>æ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸Šå€¼æ¥å®ç°å…ƒç»„ã€‚å…ƒç»„æ˜¯ä¸€ç§å…·æœ‰åŒ¿åå­—æ®µçš„å¸¸é‡ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ•°å€¼ç´¢å¼•æ¥è·å–æŸä¸ªç‰¹å®šçš„å­—æ®µï¼Œæˆ–è€…ä¸€æ¬¡æ€§åœ°è·å–æ‰€æœ‰å­—æ®µã€‚åœ¨æˆ‘ä»¬çš„å®ç°ä¸­ï¼Œå°†å…ƒç»„è¡¨ç¤ºä¸ºå‡½æ•°ï¼Œå…ƒç»„çš„å€¼å­˜å‚¨åœ¨å‡½æ•°çš„ä¸Šå€¼ä¸­ã€‚å½“ä½¿ç”¨æ•°å€¼å‚æ•°æ¥è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå‡½æ•°ä¼šè¿”å›ç‰¹å®šçš„å­—æ®µã€‚å½“ä¸ä½¿ç”¨å‚æ•°æ¥è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œåˆ™è¿”å›æ‰€æœ‰å­—æ®µã€‚ä¸€ä¸‹ä»£ç æ¼”ç¤ºäº†å…ƒç»„çš„ä½¿ç”¨ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x = tuple.new(<span class="number">10</span>,<span class="string">&quot;hi&quot;</span>,&#123;&#125;,<span class="number">3</span>)</span><br><span class="line">print(x(<span class="number">1</span>))			-- <span class="number">10</span></span><br><span class="line">print(x(<span class="number">2</span>))			-- hi</span><br><span class="line">print(x(<span class="number">3</span>))			-- <span class="number">10</span> hi table:ox8087878 <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>åœ¨Cè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨åŒä¸€ä¸ªå‡½æ•°t_tupleæ¥è¡¨ç¤ºæ‰€æœ‰çš„å…ƒç»„ï¼Œä»£ç å‚è€ƒä¸‹ç¤ºä¾‹ã€‚</p>
<blockquote>
<p>å…ƒç»„çš„å®ç°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;luaxlib.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">t_tuple</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	lua_Integer op = luaL_optinteger(L,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">if</span> (op == <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="type">int</span> i;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; !lua_isnone(L,lua_upvalueindex(i)); i++)</span><br><span class="line">			lua_pushvalue(L,lua_upvalueindex(i));</span><br><span class="line">		<span class="keyword">return</span> i - <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		luaL_argcheck(L,<span class="number">0</span>&lt;op &amp;&amp; op &lt;= <span class="number">256</span>,<span class="number">1</span>,<span class="string">&quot;index out of range&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (lua_isnone(L,lua_upvalueindex(op)))</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		lua_pushvalue(L,lua_upvalueindex(op));</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">t_new</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">int</span> top = lua_gettop(L);</span><br><span class="line">	luaL_argcheck(L, top&lt; <span class="number">256</span>, top ,<span class="string">&quot;too many fields&quot;</span>);</span><br><span class="line">	lua_pushcclosure(L,t_tuple,top);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">tuplelib</span>[] =</span> &#123;</span><br><span class="line">	&#123;<span class="string">&quot;new&quot;</span>,t_new&#125;,</span><br><span class="line">	&#123;<span class="literal">NULL</span>,<span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">luaopen_tuple</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	luaL_newlib(L,tuplelib);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±äºè°ƒç”¨å…ƒç»„æ—¶æ—¢å¯ä»¥ä½¿ç”¨æ•°å­—ä½œä¸ºå‚æ•°ä¹Ÿå¯ä»¥ä¸ç”¨æ•°å­—ä½œä¸ºå‚æ•°ï¼Œå› æ­¤t_tupleä½¿ç”¨luaL_optintegeræ¥è·å–å¯é€‰å‚æ•°ã€‚è¯¥å‡½æ•°ç±»ä¼¼äºluaL_checkinteger,ä½†å½“å‚æ•°ä¸å­˜åœ¨æ—¶ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯è¿”å›æŒ‡å®šçš„é»˜è®¤å€¼ã€‚<br>Cè¯­è¨€å‡½æ•°ä¸­æœ€å¤šå¯ä»¥æœ‰255ä¸ªä¸Šå€¼ï¼Œè€Œlua_upvaluindexçš„æœ€å¤§ç´¢å¼•å€¼æ˜¯256ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨luaL_argcheckæ¥ç¡®ä¿è¿™äº›èŒƒå›´çš„æœ‰æ•ˆæ€§ã€‚<br>å½“è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„ä¸Šå€¼æ—¶ï¼Œç»“æœæ˜¯ä¸€ä¸ªç±»å‹ä¸ºLUA_TNONEçš„ä¼ªå€¼ã€‚å‡½æ•°t_tupleä½¿ç”¨lua_isnoneæµ‹è¯•æŒ‡å®šçš„ä¸Šå€¼æ˜¯å¦å­˜åœ¨ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬æ°¸è¿œä¸åº”è¯¥ä½¿ç”¨è´Ÿæ•°æˆ–è€…è¶…è¿‡256çš„ç´¢å¼•å€¼æ¥è°ƒç”¨lua_upvalueindexï¼Œå› æ­¤å¿…é¡»å¯¹ç”¨æˆ·æä¾›ç´¢å¼•è¿›è¡Œæ£€æŸ¥ã€‚å‡½æ•°luaL_argcheckå¯ç”¨äºæ£€æŸ¥ç»™å®šçš„æ¡ä»¶ï¼Œå¦‚æœæ¡ä»¶ä¸ç¬¦åˆï¼Œåˆ™ä¼šå¼•å‘é”™è¯¯å¹¶è¿”å›ä¸€æ¡å‹å¥½çš„é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">&gt; t = tuple.new(<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">&gt; t(<span class="number">300</span>)</span><br><span class="line">--&gt; <span class="built_in">stdin</span>:<span class="number">1</span>:bad argument #<span class="number">1</span> to <span class="string">&#x27;t&#x27;</span> (index out of range)</span><br></pre></td></tr></table></figure>
<p>luaL_argcheckçš„ç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºé”™è¯¯ä¿¡æ¯çš„å‚æ•°ç¼–å·ï¼Œç¬¬å››ä¸ªå‚æ•°è¡¨ç¤ºå¯¹ä¿¡æ¯çš„ä¸å‡ºã€‚<br>åˆ›å»ºå…ƒç»„çš„å‡½æ•°t_newå¾ˆç®€å•ï¼Œç”±äºå…¶å‚æ•°å·²ç»åœ¨æ ˆä¸­ï¼Œå› æ­¤è¯¥å‡½æ•°å…ˆæ£€æŸ¥å­—æ®µçš„æ•°é‡æ˜¯å¦ç¬¦åˆé—­åŒ…ä¸­ä¸Šå€¼ä¸ªæ•°çš„é™åˆ¶ï¼Œç„¶åå°†æ‰€æœ‰ä¸Šå€¼ä½œä¸ºå‚æ•°è°ƒç”¨lua_pushcclosureæ¥åˆ›å»ºä¸€ä¸ªt_tupleçš„é—­åŒ…ã€‚æœ€åï¼Œæ•°ç»„tuplelibå’Œå‡½æ•°luaopen_tupleæ˜¯åˆ›å»ºtupleåº“çš„æ ‡å‡†ä»£ç ï¼Œè¯¥åº“åªæœ‰ä¸€ä¸ªå‡½æ•°newã€‚</p>
<h3 id="å…±äº«çš„ä¸Šå€¼"><a href="#å…±äº«çš„ä¸Šå€¼" class="headerlink" title="å…±äº«çš„ä¸Šå€¼"></a>å…±äº«çš„ä¸Šå€¼</h3><p>æˆ‘ä»¬ç»å¸¸éœ€è¦åŒä¸€ä¸ªåº“çš„æ‰€æœ‰å‡½æ•°ä¹‹é—´å…±äº«æŸäº›å€¼æˆ–å˜é‡ï¼Œè™½ç„¶å¯ä»¥ç”¨æ³¨å†Œè¡¨æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šå€¼ã€‚<br>ä¸Luaè¯­è¨€çš„é—­åŒ…ä¸åŒï¼ŒCè¯­è¨€çš„é—­åŒ…ä¸èƒ½å…±äº«ä¸Šå€¼ï¼Œæ¯ä¸ªé—­åŒ…éƒ½æœ‰å…¶ç‹¬ç«‹çš„ä¸Šå€¼ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸åŒå‡½æ•°çš„ä¸Šå€¼æŒ‡å‘ä¸€å¼ å…±åŒçš„è¡¨ï¼Œè¿™å¼ è¡¨å°±æˆä¸ºäº†ä¸€ä¸ªå…±åŒçš„ç¯å¢ƒï¼Œå‡½æ•°åœ¨å…¶ä¸­èƒ½å¤Ÿå…±äº«æ•°æ®ã€‚<br>Luaè¯­è¨€æä¾›äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥ç®€åŒ–åŒä¸€ä¸ªåº“ä¸­æ‰€æœ‰å‡½æ•°é—´å…±äº«ä¸Šå€¼çš„ä»»åŠ¡ã€‚æˆ‘ä»¬å·²ç»ä½¿ç”¨luaL_newlibæ‰“å¼€äº†Cè¯­è¨€åº“ã€‚Luaå°†è¿™ä¸ªå‡½æ•°å®ç°ä¸ºå¦‚ä¸‹çš„å®ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> luaL_newlib(L,lib) \ (luaL_newlibtable(L,lib),(luaL_setfuncs(L,lib,0))</span></span><br></pre></td></tr></table></figure>
<p>å®luaL_newlibtableåªæ˜¯ä¸ºåº“åˆ›å»ºäº†ä¸€å¼ æ–°è¡¨ã€‚ç„¶åï¼Œå‡½æ•°luaL_setfuncså°†åˆ—è¡¨libä¸­çš„å‡½æ•°æ·»åŠ åˆ°ä½äºæ ˆé¡¶çš„æ–°è¡¨ä¸­ã€‚<br>æˆ‘ä»¬è¿™é‡Œæ„Ÿå…´è¶£çš„æ˜¯luaL_setfuncsçš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ç»™å‡ºäº†åº“ä¸­çš„æ–°å‡½æ•°å…±äº«çš„ä¸Šå€¼ä¸ªæ•°ã€‚å½“è°ƒç”¨lua_pushcclosureæ—¶ï¼Œè¿™äº›ä¸Šå€¼çš„åˆå§‹å€¼åº”è¯¥ä½äºæ ˆé¡¶ã€‚å› æ­¤ï¼Œå¦‚æœè¦åˆ›å»ºä¸€ä¸ªåº“ï¼Œè¿™ä¸ªåº“ä¸­çš„æ‰€æœ‰å‡½æ•°å…±äº«ä¸€å¼ è¡¨ä½œä¸ºå®ƒä»¬å”¯ä¸€çš„ä¸Šå€¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/* åˆ›å»ºåº“çš„è¡¨*/</span><br><span class="line">luaL_newlibtable(L,lib);</span><br><span class="line">/* åˆ›å»ºå…±äº«ä¸Šå€¼ */</span><br><span class="line">lua_newtable(L);</span><br><span class="line">/*å°†è¡¨&#x27;lib&#x27;ä¸­çš„å‡½æ•°åŠ å…¥åˆ°æ–°åº“ä¸­ï¼Œå°†ä¹‹å‰çš„è¡¨å…±äº«ä¸ºä¸Šå€¼*/</span><br><span class="line">luaL_setfuncs(L,lib,1);</span><br></pre></td></tr></table></figure>
<p>æœ€åä¸€ä¸ªå‡½æ•°è°ƒç”¨ä»æ ˆä¸­åˆ é™¤äº†è¿™å¼ å…±äº«è¡¨ï¼Œåªç•™ä¸‹äº†æ–°åº“ã€‚</p>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>C</tag>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>è‡ªåŠ¨å”®è´§æœºæ§åˆ¶ç³»ç»Ÿ(VHDLå¼€å‘)</title>
    <url>/16522.html</url>
    <content><![CDATA[<blockquote>
<p>è¿™å‘¨å®Œæˆä¸€ä¸ªè¯¾ç¨‹ä»»åŠ¡ï¼Œç”¨VHDLè¯­è¨€å†™ä¸€ä¸ªè‡ªåŠ¨å”®è´§æœºçš„æ§åˆ¶ç³»ç»Ÿã€‚ä½¿ç”¨çš„ä»¿çœŸå™¨æ˜¯MAX+plusã€‚</p>
</blockquote>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="è®¾è®¡è¯´æ˜"><a href="#è®¾è®¡è¯´æ˜" class="headerlink" title="è®¾è®¡è¯´æ˜"></a>è®¾è®¡è¯´æ˜</h2><p>æ ¹æ®è¦æ±‚å¯è‡ªåŠ¨å‡ºå”®ä¸¤ç§è´§ç‰©ï¼Œè¿™é‡Œçš„è‡ªåŠ¨å”®è´§æœºå¯é”€å”®colaå’Œpepsiä¸¤ç§é¥®æ–™ï¼šå”®è´§æœºå¯è¯†åˆ«1å…ƒå’Œ0.5å…ƒä¸¤ç§è´§å¸ï¼Œåœ¨ä¸€æ¬¡è´­ä¹°è¿‡ç¨‹ä¸­ï¼Œå¯è´­ä¹°ä¸€ä¸ªæˆ–è€…å¤šä¸ªå•†å“ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—æ‰€éœ€é’±æ•°å’Œæ‰¾é›¶çš„é’±æ•°å¹¶è‡ªåŠ¨æ‰¾é›¶ã€‚å¦å¤–æœ‰3ä¸ªå‘å…‰äºŒæç®¡ã€6ä¸ªLCDæ•°ç ç®¡ï¼šä¸¤ä¸ªç”¨æ¥æ˜¾ç¤ºæ‰€éœ€é‡‘é¢ï¼Œä¸¤ä¸ªç”¨æ¥æ˜¾ç¤ºå·²ä»˜é‡‘é¢ï¼Œä¸¤ä¸ªç”¨æ¥æ˜¾ç¤ºæ‰¾é›¶æ•°ã€‚</p>
<hr>
<h3 id="æµç¨‹è¯´æ˜"><a href="#æµç¨‹è¯´æ˜" class="headerlink" title="æµç¨‹è¯´æ˜"></a>æµç¨‹è¯´æ˜</h3><p>è¿™é‡Œè®¾è®¡çš„è‡ªåŠ¨å”®è´§æœºå½“é€šç”µæ—¶ï¼Œè¡¨ç¤ºä¸€æ¬¡é”€å”®çš„å¼€å§‹ã€‚é¡¾å®¢é€‰æ‹©ä¸€ç§å•†å“æˆ–å¤šç§å•†å“åå°±è¿›å…¥æŠ•å¸çŠ¶æ€ã€‚è‹¥ä¸æŠ•å¸ï¼Œåˆ™è‡ªåŠ¨è¿”å›åˆå§‹çŠ¶æ€ã€‚æŠ•å¸åï¼Œç³»ç»Ÿè‡ªåŠ¨è®¡ç®—æ‰€æŠ•é’±æ•°ã€‚è‹¥æŠ•å¸å¤Ÿï¼Œåˆ™å‡ºè´§å¹¶æ‰¾é›¶ã€‚è‹¥æŠ•å¸ä¸å¤Ÿï¼Œå¦‚æœé¡¾å®¢æ²¡æœ‰ç»§ç»­æŠ•å¸ï¼Œåˆ™é€€å¸å¹¶å›åˆ°åˆå§‹çŠ¶æ€ã€‚æœ¬ç³»ç»Ÿçš„æŠ•å¸é”€å”®æµç¨‹å›¾å¦‚å›¾æ‰€ç¤ºï¼š<br><img data-src="https://pic.imgdb.cn/item/66434c8d0ea9cb1403d24021.png" alt="æµç¨‹å›¾"></p>
<hr>
<h3 id="å„æ¨¡å—è¯´æ˜"><a href="#å„æ¨¡å—è¯´æ˜" class="headerlink" title="å„æ¨¡å—è¯´æ˜"></a>å„æ¨¡å—è¯´æ˜</h3><p>æœ¬æ–‡è®¾è®¡çš„è‡ªåŠ¨å”®è´§æœºæ€»ä½“åˆ†å››ä¸ªæ¨¡å—ï¼šæ€»æ§æ¨¡å—ã€äºŒè¿›åˆ¶è¯‘ç æ¨¡å—ã€BCDç è¯‘ç æ¨¡å—å’Œé¡¶å±‚æ¨¡å—ã€‚</p>
<p><strong>æ€»æ§æ¨¡å—ï¼š</strong>æ€»æ§æ¨¡å—æ˜¯æœ¬ç³»ç»Ÿæœ€é‡è¦çš„æ¨¡å—ï¼Œè¯¥æ¨¡å—å¤§ä½“æœ‰5ä¸ªè¾“å…¥ç«¯å£å’Œ6ä¸ªè¾“å‡ºç«¯å£ã€‚å…¶è¾“å…¥ç«¯å£åŒ…æ‹¬clkã€coin1ï¼ˆæŠ•å…¥ä¸€å…ƒè´§å¸ï¼‰ã€coin5ï¼ˆæŠ•å…¥0.5å…ƒè´§å¸ï¼‰ã€colaï¼ˆé€‰æ‹©colaï¼‰ã€pepsi(é€‰æ‹©pepsi)ï¼Œè¾“å‡ºç«¯å£æœ‰paidï¼ˆå·²æŠ•å…¥å¤šå°‘é’±ï¼‰ã€neededï¼ˆè¿˜éœ€å¤šå°‘é’±ï¼‰moneyoutï¼ˆæ‰¾é›¶ï¼‰ã€successï¼ˆç¯äº®è¡¨ç¤ºäº¤æ˜“æˆåŠŸï¼‰ã€failureï¼ˆç¯äº®è¡¨ç¤ºäº¤æ˜“å¤±è´¥ï¼‰ã€showmoneyoutï¼ˆç¯äº®è¡¨ç¤ºæ­£åœ¨æ‰¾é›¶ï¼‰ã€‚è¯¥æ¨¡å—å®ç°äº†æœ¬ç³»ç»Ÿæœ€é‡è¦çš„äº¤æ˜“è¿‡ç¨‹ï¼ŒåŒ…æ‹¬é€‰æ‹©å•†å“ã€æŠ•å…¥è´§å¸ï¼Œè®¡ç®—å‰©ä½™é‡‘é¢ï¼Œæ‰¾é›¶å‡ºè´§ç­‰ã€‚</p>
<p><strong>äºŒè¿›åˆ¶è¯‘ç æ¨¡å—ï¼š</strong>è¯¥æ¨¡å—æœ‰ä¸€ä¸ªè¾“å…¥ç«¯å£å’Œä¸¤ä¸ªè¾“å‡ºç«¯å£ã€‚è¾“å…¥ç«¯å£æ˜¯ä¸€ä¸ª8ä½çš„äºŒè¿›åˆ¶æ•°è¾“å‡ºç«¯å£bcd0ã€bcd1æ˜¯ä¸¤ä¸ª4ä½çš„BCDç ã€‚è¯¥æ¨¡å—çš„ä¸»è¦çš„åŠŸèƒ½æ˜¯å®ç°å°†ä¸»æ§æ¨¡å—è¾“å‡ºçš„äºŒè¿›åˆ¶æ•°ï¼ˆpaidã€neededã€moneyoutï¼‰è½¬æ¢æˆBCDç ï¼Œä»¥ä¾¿è¾“å‡ºåˆ°ä¸ƒæ®µæ•°ç ç®¡ä¸Šæ˜¾ç¤ºå‡ºæ¥ã€‚è¯¥æ¨¡å—çš„åŸç†æ˜¯å°†ä¸€ä¸ª8ä½çš„äºŒè¿›åˆ¶è½¬æ¢æˆ2ä¸ª4ä½çš„BCDç ï¼Œåˆ†ä¸ºé«˜å››ä½å’Œä½å››ä½ã€‚</p>
<p><strong>BCDç è¯‘ç æ¨¡å—ï¼š</strong>è¯¥æ¨¡å—æœ‰ä¸€ä¸ªè¾“å…¥ç«¯å£å’Œä¸€ä¸ªè¾“å‡ºç«¯å£</p>
<p><strong>é¡¶å±‚æ¨¡å—ï¼š</strong>è¯¥æ¨¡å—æœ‰äº”ä¸ªè¾“å…¥å’Œä¹ä¸ªè¾“å‡ºç«¯å£ã€‚å…¶è¾“å…¥å£åŒ…æ‹¬clk1ã€P2ï¼ˆé€‰æ‹©pepsiï¼‰ã€P1_5ï¼ˆé€‰æ‹©colaï¼‰ã€C5ï¼ˆæŠ•å…¥5æ¯›ï¼‰ã€C1ï¼ˆæŠ•å…¥1å—ï¼‰ï¼Œè¾“å‡ºç«¯å£æœ‰shuwout(é€€å¸æŒ‡ç¤ºç¯)ã€sï¼ˆäº¤æ˜“æˆåŠŸæŒ‡ç¤ºç¯ï¼‰ã€fï¼ˆäº¤æ˜“å¤±è´¥æŒ‡ç¤ºç¯ï¼‰ã€paid_lcd0ã€paid_lcd1ï¼ˆå·²ä»˜é‡‘é¢ï¼‰ã€needed_lcd0ã€needed_lcd1ï¼ˆéœ€ä»˜é‡‘é¢ï¼‰ã€mout__lcd0ã€mout_lcd1ï¼ˆé€€å¸é‡‘é¢ï¼‰ã€‚</p>
<hr>
<h3 id="ç¨‹åºè®¾è®¡"><a href="#ç¨‹åºè®¾è®¡" class="headerlink" title="ç¨‹åºè®¾è®¡"></a>ç¨‹åºè®¾è®¡</h3><p><strong>ä¸»æ§æ¨¡å—å®Œæ•´ç¨‹åº</strong><br><strong>BCDè¯‘ç æ¨¡å—å®Œæ•´ç¨‹åº</strong><br><strong>é¡¶å±‚æ¨¡å—å®Œæ•´ç¨‹åº</strong><br>å…·ä½“çš„ä»£ç è§æˆ‘çš„<a href="https://github.com/lengmo714/Vending-machine-system">githubç½‘ç«™</a>ï¼ˆ1è‡ªåŠ¨å”®è´§æœºæ–‡æ¡£ï¼‰.</p>
<h3 id="å„æ¨¡å—è¿æ¥"><a href="#å„æ¨¡å—è¿æ¥" class="headerlink" title="å„æ¨¡å—è¿æ¥"></a>å„æ¨¡å—è¿æ¥</h3><blockquote>
<p>å”®è´§æœºä¸»æ§ç³»ç»Ÿå’Œè¯‘ç å™¨æ¨¡å—å›¾ï¼š<br><img data-src="https://pic.imgdb.cn/item/66434c8d0ea9cb1403d24035.png" alt="å”®è´§æœºä¸»æ§ç³»ç»Ÿå’Œè¯‘ç å™¨æ¨¡å—å›¾"></p>
</blockquote>
<blockquote>
<p>å”®è´§æœºé¡¶å±‚æ¨¡å—ï¼š<br><img data-src="https://pic.imgdb.cn/item/66434c8d0ea9cb1403d24042.png" alt="é¡¶å±‚æ¨¡å—"></p>
</blockquote>
<h2 id="æ³¢å½¢ä»¿çœŸ"><a href="#æ³¢å½¢ä»¿çœŸ" class="headerlink" title="æ³¢å½¢ä»¿çœŸ"></a>æ³¢å½¢ä»¿çœŸ</h2><h3 id="ä¸»æ§æ¨¡å—çš„æ³¢å½¢æ–¹çœŸ"><a href="#ä¸»æ§æ¨¡å—çš„æ³¢å½¢æ–¹çœŸ" class="headerlink" title="ä¸»æ§æ¨¡å—çš„æ³¢å½¢æ–¹çœŸ"></a>ä¸»æ§æ¨¡å—çš„æ³¢å½¢æ–¹çœŸ</h3><blockquote>
<p><img data-src="https://pic.imgdb.cn/item/66434c8d0ea9cb1403d24069.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ä¸Šå›¾è¡¨ç¤ºé¡¾å®¢é€‰æ‹©äº†pepsié¥®æ–™åï¼Œä¸”æŠ•äº†2ä¸ªä¸€å…ƒçš„ç¡¬å¸ã€‚Successä¸ºé«˜ç”µå¹³ï¼Œä»£è¡¨å”®è´§æœºæœ‰é¥®æ–™å”®å‡ºã€‚ä¸”ä½™é¢ä¸º0.</p>
<p><img data-src="https://pic.imgdb.cn/item/66434c8d0ea9cb1403d24081.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ä¸Šå›¾è¡¨ç¤ºé¡¾å®¢é€‰æ‹©äº†colaé¥®æ–™åï¼Œä¸”æŠ•2ä¸ªä¸€å…ƒçš„ç¡¬å¸ã€‚Successä¸ºé«˜ç”µå¹³ï¼Œä»£è¡¨æœ‰é¥®æ–™å”®å‡ºï¼Œä¸”æ‰¾å›é¡¾å®¢0.5å…ƒã€‚</p>
</blockquote>
<h3 id="BCDè¯‘ç ä»¿çœŸ"><a href="#BCDè¯‘ç ä»¿çœŸ" class="headerlink" title="BCDè¯‘ç ä»¿çœŸ"></a>BCDè¯‘ç ä»¿çœŸ</h3><blockquote>
<p><img data-src="https://pic.imgdb.cn/item/66434cbe0ea9cb1403d284c4.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ä¸Šå›¾è¡¨ç¤ºè‡ªåŠ¨å”®è´§æœºçš„è¯‘ç ç³»ç»Ÿï¼Œä¸Šå›¾è¡¨ç¤ºå°†8ä½æ•°å­—è½¬æ¢æˆï¼”ä½BCDç ã€‚</p>
</blockquote>
<h3 id="TOPæ–‡ä»¶çš„ä»¿çœŸ"><a href="#TOPæ–‡ä»¶çš„ä»¿çœŸ" class="headerlink" title="TOPæ–‡ä»¶çš„ä»¿çœŸ"></a>TOPæ–‡ä»¶çš„ä»¿çœŸ</h3><blockquote>
<p><img data-src="https://pic.imgdb.cn/item/66434cbe0ea9cb1403d284da.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ä¸Šå›¾è¡¨ç¤ºé¡¾å®¢é€‰æ‹©äº†pepsié¥®æ–™åï¼Œä¸”æŠ•äº†2ä¸ªä¸€å…ƒçš„ç¡¬å¸ã€‚Successä¸ºé«˜ç”µå¹³ï¼Œä»£è¡¨å”®è´§æœºæœ‰é¥®æ–™å”®å‡ºã€‚ä¸”ä½™é¢ä¸º0ã€‚</p>
</blockquote>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å…¶å®è¿™ä¸ªè‡ªåŠ¨å”®è´§æœºæ§åˆ¶ç³»ç»Ÿè€å¸ˆå¾ˆæ—©ä¹‹å‰å°±è¦æˆ‘å¼„äº†ï¼Œæˆ‘è‡ªå·±ä¸€ç›´æ‹–ï¼Œç›´åˆ°è€å¸ˆè¦è€ƒæ ¸æ‰é‡è§†èµ·æ¥ã€‚<br>è¿™ä¸ªé¡¹ç›®å¾ˆå¤šéƒ½æ˜¯åœ¨ç½‘ä¸Šæ‰¾èµ„æ–™å€Ÿé‰´çš„åˆ«äººçš„ä¸œè¥¿ï¼Œè‡ªå·±å°±æ˜¯æŠŠåˆ«äººçš„ä»£ç è¯»æ‡‚äº†ï¼Œå†å°†æ•´ä¸ªçš„æµç¨‹èµ°äº†ä¸€éã€‚æ”¶è´§è¿˜æ˜¯å¾ˆå¤šçš„ã€‚è‡ªå·±ä¸ºäº†ç¬¬äºŒå¤©è€å¸ˆè€ƒæ ¸ï¼ˆç­”è¾©ï¼‰çš„æ—¶å€™èƒ½å¤Ÿé¡ºåˆ©é€šè¿‡ï¼Œå‰ä¸€å¤©æ™šä¸Šç†¬å¤œåˆ°ä¸‰ç‚¹ã€‚ä¹Ÿç®—æ˜¯ä½“ä¼šåˆ°äº†åšé¡¹ç›®çš„è‰°è¾›ã€‚<br>åœ¨ç­”è¾©çš„è¿‡ç¨‹ä¸­ï¼Œè€å¸ˆçš„ä¸€äº›é—®é¢˜ï¼Œä¸€äº›è¯è¯­ä¹Ÿæ˜¯è®©æˆ‘å—ç›ŠåŒªæµ…ã€‚åšé¡¹ç›®çœŸçš„æ˜¯è®©æˆ‘æ”¶ç›Šå¾ˆå¤šã€‚è¿™é‡Œä¹Ÿå¸Œæœ›è¿™ç¯‡åšå®¢èƒ½ç»™å¤§å®¶å¸¦æ¥å¸®åŠ©ï¼Œä½†æ˜¯å¸Œæœ›åªæ˜¯ä½œä¸ºä¸€ä¸ªå‚è€ƒï¼Œæ›´å¤šçš„éƒ¨åˆ†è¿˜æ˜¯è¦è‡ªå·±å»åšï¼Œè¿™æ‰æ‚¨æ‰èƒ½çœŸæ­£å­¦ä¹ åˆ°çŸ¥è¯†ã€‚</p>
]]></content>
      <categories>
        <category>åµŒå…¥å¼å¼€å‘</category>
      </categories>
      <tags>
        <tag>ç¡¬ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‹çˆ±è®¡æ—¶è¡¨ç™½é¡µé¢</title>
    <url>/bd03ee4c.html</url>
    <content><![CDATA[<h3 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><img data-src="https://pic.imgdb.cn/item/664338e90ea9cb1403afddb6.png" alt="æ•ˆæœå›¾" />

<h3 id="æ¼”ç¤ºé“¾æ¥"><a href="#æ¼”ç¤ºé“¾æ¥" class="headerlink" title="æ¼”ç¤ºé“¾æ¥"></a>æ¼”ç¤ºé“¾æ¥</h3><a href="https://lengmo714.top/libs/Love/baby.html" title="" target="">æƒ…äººèŠ‚è¡¨ç™½ä»£ç æ¼”ç¤º,</a>

<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ‹çˆ±è®¡æ—¶<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">			 <span class="attribute">background-color</span>: <span class="number">#FCE8F8</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#snow-container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">pointer-events</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: -<span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.snowflake</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">pointer-events</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation</span>: snowfall linear infinite;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="keyword">@keyframes</span> snowfall &#123;</span></span><br><span class="line"><span class="language-css">            <span class="number">0%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">100vh</span>);</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.heart</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation</span>: heartbeat <span class="number">1s</span> infinite;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform-origin</span>: center center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.heart</span><span class="selector-pseudo">:before</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.heart</span><span class="selector-pseudo">:after</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50px</span> <span class="number">50px</span> <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.heart</span><span class="selector-pseudo">:before</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">160px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.heart</span><span class="selector-pseudo">:after</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">160px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform-origin</span>: <span class="number">100%</span> <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#timeElapsed</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="keyword">@keyframes</span> heartbeat &#123;</span></span><br><span class="line"><span class="language-css">            <span class="number">0%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="number">50%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="keyword">@keyframes</span> falling &#123;</span></span><br><span class="line"><span class="language-css">            <span class="number">0%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">100vh</span>);</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">100vh</span>);</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.sakura</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: -<span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;https://www.unicode.org/emoji/charts/full-emoji-list.html#1f338&#x27;</span>); <span class="comment">/* ğŸŒ¸çš„Unicodeè½¬ä¹‰åºåˆ— */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: cover;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation</span>: falling linear infinite;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation-duration</span>: <span class="number">10s</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;snow-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;heart&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;timeElapsed&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;wanfeng.mp3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;dd&quot;</span> <span class="attr">autoplay</span>=<span class="string">&quot;autoplay&quot;</span> <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span> <span class="attr">preload</span>=<span class="string">&quot;auto&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">getTimeElapsed</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> startDate = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;2022-03-26 21:03:00&quot;</span>); <span class="comment">// è®¾ç½®å¼€å§‹æ—¥æœŸï¼Œæ›¿æ¢ä¸ºå®é™…çš„èµ·å§‹æ—¥æœŸ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> currentDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> timeDiff = currentDate - startDate;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> milliseconds = timeDiff % <span class="number">1000</span>;</span></span><br><span class="line"><span class="language-javascript">            timeDiff = <span class="title class_">Math</span>.<span class="title function_">floor</span>(timeDiff / <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> seconds = timeDiff % <span class="number">60</span>;</span></span><br><span class="line"><span class="language-javascript">            timeDiff = <span class="title class_">Math</span>.<span class="title function_">floor</span>(timeDiff / <span class="number">60</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> minutes = timeDiff % <span class="number">60</span>;</span></span><br><span class="line"><span class="language-javascript">            timeDiff = <span class="title class_">Math</span>.<span class="title function_">floor</span>(timeDiff / <span class="number">60</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> hours = timeDiff % <span class="number">24</span>;</span></span><br><span class="line"><span class="language-javascript">            timeDiff = <span class="title class_">Math</span>.<span class="title function_">floor</span>(timeDiff / <span class="number">24</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> days = timeDiff;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> timeString = <span class="string">&quot;å®è´æˆ‘ä»¬å·²ç»åœ¨ä¸€èµ· &quot;</span> + days + <span class="string">&quot; å¤© &quot;</span> + hours + <span class="string">&quot; å°æ—¶ &quot;</span> + minutes + <span class="string">&quot; åˆ†é’Ÿ &quot;</span> + seconds + <span class="string">&quot; ç§’äº†&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;timeElapsed&quot;</span>).<span class="property">textContent</span> = timeString;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setInterval</span>(getTimeElapsed, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">createSnowflake</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> snowflake = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            snowflake.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;snowflake&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            snowflake.<span class="property">style</span>.<span class="property">left</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="variable language_">window</span>.<span class="property">innerWidth</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            snowflake.<span class="property">style</span>.<span class="property">animationDuration</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">3</span> + <span class="number">2</span> + <span class="string">&#x27;s&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            snowflake.<span class="property">style</span>.<span class="property">opacity</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>();</span></span><br><span class="line"><span class="language-javascript">            snowflake.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span> + <span class="number">10</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> randomColor = <span class="title function_">getRandomColor</span>();</span></span><br><span class="line"><span class="language-javascript">            snowflake.<span class="property">style</span>.<span class="property">backgroundColor</span> = randomColor;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> num = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">8</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> name = [<span class="string">&#x27;å¤šå¹¸è¿é‡è§ä½ &#x27;</span>,<span class="string">&#x27;æˆ‘çˆ±ä½ &#x27;</span>,<span class="string">&#x27;å®è´&#x27;</span>,<span class="string">&#x27;æ¸©æŸ”&#x27;</span>,<span class="string">&#x27;å–„è‰¯&#x27;</span>,<span class="string">&#x27;æ¼‚äº®&#x27;</span>,<span class="string">&#x27;ä¼˜é›…&#x27;</span>,<span class="string">&#x27;ç”Ÿå‘½ä¹‹å…‰&#x27;</span>,<span class="string">&#x27;æœ‰ä½ çœŸå¥½&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">            snowflake.<span class="property">innerHTML</span> = name[num]; <span class="comment">// You can customize the snowflake symbol here</span></span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> snowflake;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">getRandomColor</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> letters = <span class="string">&#x27;0123456789ABCDEF&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> color = <span class="string">&#x27;#&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                color += letters[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">16</span>)];</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> color;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">snowfall</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> snowContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;snow-container&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> numSnowflakes = <span class="number">50</span>; <span class="comment">// Adjust the number of snowflakes here</span></span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numSnowflakes; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> snowflake = <span class="title function_">createSnowflake</span>();</span></span><br><span class="line"><span class="language-javascript">                snowContainer.<span class="title function_">appendChild</span>(snowflake);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">snowfall</span>();</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">createSakura</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> sakura = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            sakura.<span class="property">className</span> = <span class="string">&quot;sakura&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            sakura.<span class="property">style</span>.<span class="property">left</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">100</span> + <span class="string">&quot;vw&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            sakura.<span class="property">style</span>.<span class="property">animationDelay</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">5</span> + <span class="string">&quot;s&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(sakura);</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                sakura.<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">20000</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setInterval</span>(createSakura, <span class="number">200</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="å°ç™½ä½¿ç”¨æ•™ç¨‹"><a href="#å°ç™½ä½¿ç”¨æ•™ç¨‹" class="headerlink" title="å°ç™½ä½¿ç”¨æ•™ç¨‹"></a>å°ç™½ä½¿ç”¨æ•™ç¨‹</h3><p>å…ˆåœ¨ç”µè„‘æ¡Œé¢æ–°å»ºä¸€ä¸ª<code>è®°äº‹æœ¬</code>,ç„¶åæ‰“å¼€è®°äº‹æœ¬ï¼Œå°†ä¸Šé¢ä»£ç å¤åˆ¶ç²˜è´´è®°äº‹æœ¬ï¼Œä¿®æ”¹æ–‡ä»¶åç¼€ä¸º<code>.html</code>ï¼Œç„¶åç”¨æµè§ˆå™¨æ‰“å¼€è¯¥æ–‡ä»¶å³å¯</p>
]]></content>
      <categories>
        <category>ç½‘é¡µè®¾è®¡</category>
      </categories>
  </entry>
  <entry>
    <title>è¦åœ¨Microsoft Storeä¸­æœç´¢åº”ç”¨å—ï¼Ÿ</title>
    <url>/3f5b9a1.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>åœ¨windows11ç³»ç»Ÿä¸Šç‚¹å‡»<code>.exe</code>å®‰è£…åŒ…æ–‡ä»¶å®‰è£…è½¯ä»¶æ—¶ï¼Œæœ‰æ—¶ä¼šå¼¹å‡º<code>è¦åœ¨Microsoft Storeä¸­æœç´¢åº”ç”¨å—ï¼Ÿ</code>çš„å¼¹çª—ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img data-src="https://s1.ax1x.com/2023/04/10/ppqO1ln.png" style="width:600px;height:200px" alt="" /></p>
<h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>å³é”®è¯¥<code>.exe</code>æ–‡ä»¶ï¼Œé€‰æ‹©<code>å±æ€§</code>-&gt;<code>å¸¸è§„</code>ï¼Œåœ¨å®‰å…¨é€‰é¡¹ä¸­å°†<code>è§£é™¤é”å®š</code>å‰é¢å‹¾ä¸Šã€‚é»˜è®¤æ˜¯æ²¡æœ‰å‹¾ä¸Šçš„ï¼Œç‚¹ä¸‹æ¡†æ¡†ï¼Œå°†é€‰é¡¹å‹¾ä¸Š ï¼Œæœ€åç‚¹å‡»åº”ç”¨å³å¯ã€‚å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://s1.ax1x.com/2023/04/10/ppqOlSs.png" style="width:484px;height:658px" alt="" /></p>
]]></content>
      <categories>
        <category>ç”µè„‘ä½¿ç”¨æŠ€å·§</category>
      </categories>
  </entry>
  <entry>
    <title>ç ´è§£è½¯ä»¶ä¸‹è½½é“¾æ¥åˆé›†</title>
    <url>/c8f6e556.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>é¦–å…ˆå…³æ³¨ä¸‹æ–¹å…¬ä¼—å·<br><img data-src="https://s1.ax1x.com/2023/05/08/p9wEfHJ.jpg" style="width:200px;height:250px" alt="" /></p>
<h2 id="ä¸‹è½½å…³é”®è¯"><a href="#ä¸‹è½½å…³é”®è¯" class="headerlink" title="ä¸‹è½½å…³é”®è¯"></a>ä¸‹è½½å…³é”®è¯</h2><h3 id="è…¾è®¯è§†é¢‘"><a href="#è…¾è®¯è§†é¢‘" class="headerlink" title="è…¾è®¯è§†é¢‘"></a>è…¾è®¯è§†é¢‘</h3><p>å…¬ä¼—å·åå°å›å¤<code>è…¾è®¯è§†é¢‘</code>è·å–ä¸‹è½½é“¾æ¥</p>
<h3 id="ç½‘æ˜“äº‘"><a href="#ç½‘æ˜“äº‘" class="headerlink" title="ç½‘æ˜“äº‘"></a>ç½‘æ˜“äº‘</h3><p>å…¬ä¼—å·åå°å›å¤<code>ç½‘æ˜“äº‘</code>è·å–ä¸‹è½½é“¾æ¥</p>
<h3 id="Autodesk-Inventor"><a href="#Autodesk-Inventor" class="headerlink" title="Autodesk Inventor"></a>Autodesk Inventor</h3><p>å…¬ä¼—å·åå°å›å¤<code>Autodesk Inventor</code>è·å–ä¸‹è½½é“¾æ¥</p>
<h3 id="GstarCAD"><a href="#GstarCAD" class="headerlink" title="GstarCAD"></a>GstarCAD</h3><p>å…¬ä¼—å·åå°å›å¤<code>GstarCAD</code>è·å–ä¸‹è½½é“¾æ¥</p>
<h3 id="MATLAB"><a href="#MATLAB" class="headerlink" title="MATLAB"></a>MATLAB</h3><p>å…¬ä¼—å·åå°å›å¤<code>MATLAB</code>è·å–ä¸‹è½½é“¾æ¥</p>
<h3 id="ArcGIS"><a href="#ArcGIS" class="headerlink" title="ArcGIS"></a>ArcGIS</h3><p>å…¬ä¼—å·åå°å›å¤<code>ArcGIS</code>è·å–ä¸‹è½½é“¾æ¥</p>
<h3 id="SketchUp"><a href="#SketchUp" class="headerlink" title="SketchUp"></a>SketchUp</h3><p>å…¬ä¼—å·åå°å›å¤<code>SketchUp</code>è·å–ä¸‹è½½é“¾æ¥</p>
<h3 id="Autodesk-Revit"><a href="#Autodesk-Revit" class="headerlink" title="Autodesk Revit"></a>Autodesk Revit</h3><p>å…¬ä¼—å·åå°å›å¤<code>Autodesk Revit</code>è·å–ä¸‹è½½é“¾æ¥</p>
<h3 id="vpnå…è´¹ç‰ˆ"><a href="#vpnå…è´¹ç‰ˆ" class="headerlink" title="vpnå…è´¹ç‰ˆ"></a>vpnå…è´¹ç‰ˆ</h3><p>å…¬ä¼—å·åå°å›å¤<code>å…è´¹vpn</code>è·å–ä¸‹è½½é“¾æ¥</p>
<h3 id="ä¸ƒçŒ«å…è´¹çœ‹å°è¯´"><a href="#ä¸ƒçŒ«å…è´¹çœ‹å°è¯´" class="headerlink" title="ä¸ƒçŒ«å…è´¹çœ‹å°è¯´"></a>ä¸ƒçŒ«å…è´¹çœ‹å°è¯´</h3><p>å…¬ä¼—å·åå°å›å¤<code>å…è´¹çœ‹å°è¯´</code>è·å–ä¸‹è½½é“¾æ¥</p>
<h3 id="è‡ªåŠ¨æŠ¢çº¢åŒ…æ’ä»¶"><a href="#è‡ªåŠ¨æŠ¢çº¢åŒ…æ’ä»¶" class="headerlink" title="è‡ªåŠ¨æŠ¢çº¢åŒ…æ’ä»¶"></a>è‡ªåŠ¨æŠ¢çº¢åŒ…æ’ä»¶</h3><p>å…¬ä¼—å·åå°å›å¤<code>çº¢åŒ…</code>è·å–ä¸‹è½½é“¾æ¥</p>
<h3 id="å“”ç«™çœ‹ç›´æ’­è‡ªåŠ¨æŠ¢çº¢åŒ…"><a href="#å“”ç«™çœ‹ç›´æ’­è‡ªåŠ¨æŠ¢çº¢åŒ…" class="headerlink" title="å“”ç«™çœ‹ç›´æ’­è‡ªåŠ¨æŠ¢çº¢åŒ…"></a>å“”ç«™çœ‹ç›´æ’­è‡ªåŠ¨æŠ¢çº¢åŒ…</h3><p>å…¬ä¼—å·åå°å›å¤<code>å“”ç«™</code>è·å–ä¸‹è½½é“¾æ¥</p>
]]></content>
      <categories>
        <category>ç ´è§£è½¯ä»¶</category>
      </categories>
  </entry>
  <entry>
    <title>è¯­éŸ³ä¿¡å·æ»¤æ³¢å»å™ªâ€”â€”ä½¿ç”¨FLATTOPWINè®¾è®¡çš„FIRæ»¤æ³¢å™¨</title>
    <url>/8eb5184f.html</url>
    <content><![CDATA[<p><strong>æ‘˜  è¦</strong>  æœ¬è¯¾ç¨‹è®¾è®¡ä¸»è¦å†…å®¹æ˜¯è®¾è®¡åˆ©ç”¨çª—å£è®¾è®¡æ³•é€‰æ‹©FLATTOPWINçª—è®¾è®¡ä¸€ä¸ªFIRæ»¤æ³¢å™¨ï¼Œå¯¹ä¸€æ®µå«å™ªè¯­éŸ³ä¿¡å·è¿›è¡Œæ»¤æ³¢å»å™ªå¤„ç†å¹¶æ ¹æ®æ»¤æ³¢å‰åçš„æ³¢å½¢å’Œé¢‘è°±åˆ†ææ»¤æ³¢æ€§èƒ½ã€‚æœ¬è¯¾ç¨‹è®¾è®¡ä»¿çœŸå¹³å°ä¸ºMATLAB7.0ï¼Œå¼€å‘å·¥å…·æ˜¯Mè¯­è¨€ç¼–ç¨‹ï¼Œé€šè¿‡è¯¾ç¨‹è®¾è®¡äº†è§£FIRæ»¤æ³¢å™¨è®¾è®¡çš„åŸç†å’Œæ­¥éª¤ï¼ŒæŒæ¡ç”¨MATLABè¯­è¨€è®¾è®¡æ»¤æ³¢å™¨çš„æ–¹æ³•ï¼Œäº†è§£FLATTOPWINå¯¹FIRæ»¤æ³¢å™¨çš„è®¾è®¡åŠç¼–ç¨‹æ–¹æ³•ã€‚é¦–å…ˆåˆ©ç”¨windowsè‡ªå¸¦çš„å½•éŸ³æœºå½•åˆ¶ä¸€æ®µè¯­éŸ³ä¿¡å·ï¼ŒåŠ å…¥ä¸€å•é¢‘å™ªå£°ï¼Œå¯¹ä¿¡å·è¿›è¡Œé¢‘è°±åˆ†æä»¥ç¡®å®šæ‰€åŠ å™ªå£°é¢‘ç‡ï¼Œè®¾è®¡æ»¤æ³¢å™¨è¿›è¡Œæ»¤æ³¢å»å™ªå¤„ç†ï¼Œæ¯”è¾ƒæ»¤æ³¢å‰åçš„æ³¢å½¢å’Œé¢‘è°±å¹¶è¿›è¡Œåˆ†æã€‚ç”±åˆ†æç»“æœå¯çŸ¥ï¼Œæ»¤æ³¢<br>åçš„è¯­éŸ³ä¿¡å·ä¸åŸå§‹ä¿¡å·åŸºæœ¬ä¸€è‡´ï¼Œå³è®¾è®¡çš„FIRæ»¤æ³¢å™¨èƒ½å¤Ÿå»é™¤ä¿¡å·ä¸­æ‰€åŠ å•é¢‘å™ªå£°ï¼Œè¾¾åˆ°äº†è®¾è®¡ç›®çš„ã€‚<br><strong>å…³é”®è¯</strong>  æ»¤æ³¢å»å™ªï¼›FIRæ»¤æ³¢å™¨ï¼›FLATTOPWINçª—ï¼›MATLAB</p>
<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>æœ¬è¯¾ç¨‹è®¾è®¡ä¸»è¦è§£å†³åœ¨å«å™ªæƒ…å†µä¸‹å¯¹è¯­éŸ³ä¿¡å·çš„æ»¤æ³¢å»å™ªå¤„ç†ï¼Œå¤„ç†æ—¶é‡‡ç”¨çš„æ˜¯åˆ©ç”¨çª—å£è®¾è®¡æ³•é€‰æ‹©FLATTOPWINçª—è®¾è®¡çš„FIRæ»¤æ³¢å™¨[1]ã€‚é€šè¿‡å¯¹æ¯”æ»¤æ³¢å‰åæ³¢å½¢å›¾å’Œæ»¤æ³¢å‰åè¯­éŸ³ä¿¡å·çš„å¯¹æ¯” ï¼Œå¯ä»¥çœ‹å‡ºæ»¤æ³¢å™¨å¯¹æœ‰ç”¨ä¿¡å·æ— å¤±çœŸæ”¾å¤§å…·æœ‰é‡å¤§æ„ä¹‰ã€‚</p>
<h2 id="è¯¾ç¨‹è®¾è®¡ç›®çš„"><a href="#è¯¾ç¨‹è®¾è®¡ç›®çš„" class="headerlink" title="è¯¾ç¨‹è®¾è®¡ç›®çš„"></a>è¯¾ç¨‹è®¾è®¡ç›®çš„</h2><p>ç†Ÿæ‚‰Matlabè¯­è¨€ç¯å¢ƒï¼ŒæŒæ¡Matlabè¯­è¨€çš„ç¼–ç¨‹è§„åˆ™ï¼Œåˆ©ç”¨Flattopwinçª—å‡½æ•°è®¾è®¡æ³•æ¥è®¾è®¡ç¬¦åˆè¦æ±‚çš„FIRæ»¤æ³¢å™¨æ¥å®ç°è¯­éŸ³ä¿¡å·çš„æ»¤æ³¢å»å™ªã€‚å¹¶ç»˜åˆ¶æ»¤æ³¢å‰åçš„æ—¶åŸŸæ³¢å½¢å’Œé¢‘è°±å›¾ã€‚æ ¹æ®å›¾å½¢åˆ†æåˆ¤æ–­æ»¤æ³¢å™¨è®¾è®¡çš„æ­£ç¡®æ€§ã€‚é€šè¿‡æœ¬æ¬¡è¯¾ç¨‹è®¾è®¡ç†Ÿæ‚‰åˆ©ç”¨<br>flattopwinçª—å‡½æ•°æ³•è®¾è®¡FIRæ»¤æ³¢å™¨çš„è¿‡ç¨‹[2]ã€‚å¢å¼ºè‡ªå·±ç‹¬ç«‹è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œæé«˜è‡ªå·±çš„åŠ¨æ‰‹èƒ½åŠ›ã€‚åŠ æ·±å¯¹ç†è®ºçŸ¥è¯†è”ç³»å®é™…é—®é¢˜çš„ç†è§£ã€‚ä¸ºä»¥åçš„å·¥ä½œå¥ å®šåšå®çš„åŸºç¡€ã€‚</p>
<h2 id="è¯¾ç¨‹è®¾è®¡è¦æ±‚"><a href="#è¯¾ç¨‹è®¾è®¡è¦æ±‚" class="headerlink" title="è¯¾ç¨‹è®¾è®¡è¦æ±‚"></a>è¯¾ç¨‹è®¾è®¡è¦æ±‚</h2><p>å½•åˆ¶ä¸€æ®µè¯­éŸ³ï¼Œç»˜åˆ¶æ³¢å½¢å¹¶è§‚å¯Ÿå…¶é¢‘è°±ç‰¹ç‚¹ï¼ŒåŠ å…¥ä¸€ä¸ªå¸¦å¤–å•é¢‘å™ªå£°ï¼Œè®¾è®¡ä¸€ä¸ªæ»¡è¶³æŒ‡æ ‡çš„æ»¤æ³¢å™¨ï¼Œå¯¹è¯¥å«å™ªè¯­éŸ³ä¿¡å·è¿›è¡Œæ»¤æ³¢å»å™ªå¤„ç†ï¼Œæ¯”è¾ƒæ»¤æ³¢å‰åçš„æ³¢å½¢å’Œé¢‘è°±å¹¶è¿›è¡Œåˆ†æï¼Œæ ¹æ®ç»“æœå’Œå­¦è¿‡çš„ç†è®ºå¾—å‡ºåˆç†çš„ç»“è®º[3]ã€‚</p>
<h2 id="è¯¾ç¨‹è®¾è®¡å¹³å°"><a href="#è¯¾ç¨‹è®¾è®¡å¹³å°" class="headerlink" title="è¯¾ç¨‹è®¾è®¡å¹³å°"></a>è¯¾ç¨‹è®¾è®¡å¹³å°</h2><p>MATLBæ˜¯ç¾å›½MathWorkså…¬å¸å‡ºå“çš„å•†ä¸šæ•™å­¦è½¯ä»¶ï¼Œç”¨äºç®—æ³•å¼€å‘ã€‚æ•°æ®å¯è§†åŒ–ã€æ•°æ®åˆ†æä»¥åŠæ•°å€¼è®¡ç®—çš„é«˜çº§æŠ€æœ¯è®¡ç®—è¯­è¨€å’Œäº¤äº’å¼ç¯å¢ƒï¼Œä¸»è¦åŒ…æ‹¬MATLABå’ŒSimulinkä¸¤å¤§éƒ¨åˆ†ã€‚<br>MATLABç”±ä¸€ç³»åˆ—å·¥å…·ç»„æˆã€‚è¿™äº›å·¥å…·æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨MATLABçš„å‡½æ•°å’Œæ–‡ä»¶ï¼Œå…¶ä¸­è®¸å¤šå·¥å…·é‡‡ç”¨çš„æ˜¯å›¾å½¢ç”¨æˆ·ç•Œé¢ã€‚åŒ…æ‹¬MATLABæ¡Œé¢å’Œå‘½ä»¤çª—å£ã€å†å²å‘½ä»¤çª—å£ã€ç¼–è¾‘å™¨å’Œè°ƒè¯•å™¨ã€è·¯å¾„æœç´¢å’Œç”¨äºç”¨æˆ·æµè§ˆå¸®åŠ©ã€å·¥ä½œç©ºé—´ã€æ–‡ä»¶çš„æµè§ˆå™¨ã€‚éšç€MATLABçš„å•†ä¸šåŒ–ä»¥åŠè½¯ä»¶æœ¬èº«çš„ä¸æ–­å‡çº§ï¼ŒMATLABçš„ç”¨æˆ·ç•Œé¢ä¹Ÿè¶Šæ¥è¶Šç²¾è‡´ï¼Œæ›´åŠ æ¥è¿‘Windowsçš„æ ‡å‡†ç•Œé¢ï¼Œäººæœºäº¤äº’æ€§æ›´å¼ºï¼Œæ“ä½œæ›´ç®€å•ã€‚è€Œä¸”æ–°ç‰ˆæœ¬çš„MATLABæä¾›äº†å®Œæ•´çš„è”æœºæŸ¥è¯¢ã€å¸®åŠ©ç³»ç»Ÿï¼Œæå¤§çš„æ–¹ä¾¿äº†ç”¨æˆ·çš„ä½¿ç”¨ã€‚ç®€å•çš„ç¼–ç¨‹ç¯å¢ƒæä¾›äº†æ¯”è¾ƒå®Œå¤‡çš„è°ƒè¯•ç³»ç»Ÿï¼Œç¨‹åºä¸å¿…ç»è¿‡ç¼–è¯‘å°±å¯ä»¥ç›´æ¥è¿è¡Œï¼Œè€Œä¸”èƒ½å¤ŸåŠæ—¶åœ°æŠ¥å‘Šå‡ºç°çš„é”™è¯¯åŠè¿›è¡Œå‡ºé”™åŸå› åˆ†æã€‚<br>MATLABæ˜¯ä¸€ä¸ªé«˜çº§çš„çŸ©é˜µ&#x2F;é˜µåˆ—è¯­è¨€ï¼Œå®ƒåŒ…å«æ§åˆ¶è¯­å¥ã€å‡½æ•°ã€æ•°æ®ç»“æ„ã€è¾“å…¥å’Œè¾“å‡ºå’Œé¢å‘å¯¹è±¡ç¼–ç¨‹ç‰¹ç‚¹ã€‚ç”¨æˆ·å¯ä»¥åœ¨å‘½ä»¤çª—å£ä¸­å°†è¾“å…¥è¯­å¥ä¸æ‰§è¡Œå‘½ä»¤åŒæ­¥ï¼Œä¹Ÿå¯ä»¥å…ˆç¼–å†™å¥½ä¸€ä¸ªè¾ƒå¤§çš„å¤æ‚çš„åº”ç”¨ç¨‹åºï¼ˆMæ–‡ä»¶ï¼‰åå†ä¸€èµ·è¿è¡Œã€‚æ–°ç‰ˆæœ¬çš„MATLABè¯­è¨€æ˜¯åŸºäºæœ€ä¸ºæµè¡Œçš„C++è¯­è¨€åŸºç¡€ä¸Šçš„ï¼Œå› æ­¤è¯­æ³•ç‰¹å¾ä¸C++è¯­è¨€æä¸ºç›¸ä¼¼ï¼Œè€Œä¸”æ›´åŠ ç®€å•ï¼Œæ›´åŠ ç¬¦åˆç§‘æŠ€äººå‘˜å¯¹æ•°å­¦è¡¨è¾¾å¼çš„ä¹¦å†™æ ¼å¼ã€‚ä½¿ä¹‹æ›´åˆ©äºéè®¡ç®—æœºä¸“ä¸šçš„ç§‘æŠ€äººå‘˜ä½¿ç”¨ã€‚è€Œä¸”è¿™ç§è¯­è¨€å¯ç§»æ¤æ€§å¥½ã€å¯æ‹“å±•æ€§æå¼ºï¼Œè¿™ä¹Ÿæ˜¯MATLABèƒ½å¤Ÿæ·±å…¥åˆ°ç§‘å­¦ç ”ç©¶åŠå·¥ç¨‹è®¡ç®—å„ä¸ªé¢†åŸŸçš„é‡è¦åŸå› [4]ã€‚<br>MATLABæ˜¯ä¸€ä¸ªåŒ…å«å¤§é‡è®¡ç®—ç®—æ³•çš„é›†åˆã€‚å…¶æ‹¥æœ‰600å¤šä¸ªå·¥ç¨‹ä¸­è¦ç”¨åˆ°çš„æ•°å­¦è¿ç®—å‡½æ•°ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°ç”¨æˆ·æ‰€éœ€çš„å„ç§è®¡ç®—åŠŸèƒ½ã€‚å‡½æ•°ä¸­æ‰€ä½¿ç”¨çš„ç®—æ³•éƒ½æ˜¯ç§‘ç ”å’Œå·¥ç¨‹<br>è®¡ç®—ä¸­çš„æœ€æ–°ç ”ç©¶æˆæœï¼Œè€Œä¸”ç»è¿‡äº†å„ç§ä¼˜åŒ–å’Œå®¹é”™å¤„ç†ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨å®ƒæ¥ä»£æ›¿åº•å±‚ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚Cå’ŒC++ ã€‚åœ¨è®¡ç®—è¦æ±‚ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨MATLABçš„ç¼–ç¨‹å·¥ä½œé‡ä¼šå¤§å¤§å‡å°‘ã€‚MATLABçš„è¿™äº›å‡½æ•°é›†åŒ…æ‹¬ä»æœ€ç®€å•æœ€åŸºæœ¬çš„å‡½æ•°åˆ°è¯¸å¦‚çŸ©é˜µï¼Œç‰¹å¾å‘é‡ã€å¿«é€Ÿå‚…ç«‹å¶å˜æ¢çš„å¤æ‚å‡½æ•°ã€‚å‡½æ•°æ‰€èƒ½è§£å†³çš„é—®é¢˜å…¶å¤§è‡´åŒ…æ‹¬çŸ©é˜µè¿ç®—å’Œçº¿æ€§æ–¹ç¨‹ç»„çš„æ±‚è§£ã€å¾®åˆ†æ–¹ç¨‹åŠåå¾®åˆ†æ–¹ç¨‹çš„ç»„çš„æ±‚è§£ã€ç¬¦å·è¿ç®—ã€å‚…ç«‹å¶å˜æ¢å’Œæ•°æ®çš„ç»Ÿè®¡åˆ†æã€å·¥ç¨‹ä¸­çš„ä¼˜åŒ–é—®é¢˜ã€ç¨€ç–çŸ©é˜µè¿ç®—ã€å¤æ•°çš„å„ç§è¿ç®—ã€ä¸‰è§’å‡½æ•°å’Œå…¶ä»–åˆç­‰æ•°å­¦è¿ç®—ã€å¤šç»´æ•°ç»„æ“ä½œä»¥åŠå»ºæ¨¡åŠ¨æ€ä»¿çœŸç­‰ã€‚</p>
<h1 id="åŸºæœ¬ç†è®º"><a href="#åŸºæœ¬ç†è®º" class="headerlink" title="åŸºæœ¬ç†è®º"></a>åŸºæœ¬ç†è®º</h1><h2 id="FIRæ»¤æ³¢å™¨"><a href="#FIRæ»¤æ³¢å™¨" class="headerlink" title="FIRæ»¤æ³¢å™¨"></a>FIRæ»¤æ³¢å™¨</h2><p>FIR(Finite Impulse Response)æ»¤æ³¢å™¨ï¼šæœ‰é™é•¿å•ä½å†²æ¿€å“åº”æ»¤æ³¢å™¨ï¼Œåˆç§°ä¸ºéé€’å½’å‹æ»¤æ³¢å™¨ï¼Œæ˜¯æ•°å­—ä¿¡å·å¤„ç†ç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„å…ƒä»¶ï¼Œå®ƒå¯ä»¥åœ¨ä¿è¯ä»»æ„å¹…é¢‘ç‰¹æ€§çš„åŒæ—¶å…·æœ‰ä¸¥æ ¼çš„çº¿æ€§ç›¸é¢‘ç‰¹æ€§ï¼ŒåŒæ—¶å…¶å•ä½æŠ½æ ·å“åº”æ˜¯æœ‰é™é•¿çš„ï¼Œå› è€Œæ»¤æ³¢å™¨æ˜¯ç¨³å®šçš„ç³»ç»Ÿã€‚å› æ­¤ï¼ŒFIRæ»¤æ³¢å™¨åœ¨é€šä¿¡ã€å›¾åƒå¤„ç†ã€æ¨¡å¼è¯†åˆ«ç­‰é¢†åŸŸéƒ½æœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚<br>å·¥ä½œåŸç†ï¼šåœ¨è¿›å…¥FIRæ»¤æ³¢å™¨å‰ï¼Œé¦–å…ˆè¦å°†ä¿¡å·é€šè¿‡A&#x2F;Då™¨ä»¶è¿›è¡Œæ¨¡æ•°è½¬æ¢ï¼ŒæŠŠæ¨¡æ‹Ÿä¿¡å·è½¬åŒ–ä¸ºæ•°å­—ä¿¡å·ï¼›ä¸ºäº†ä½¿ä¿¡å·å¤„ç†èƒ½å¤Ÿä¸å‘ç”Ÿå¤±çœŸï¼Œä¿¡å·çš„é‡‡æ ·é€Ÿåº¦å¿…é¡»æ»¡è¶³å¥ˆå¥æ–¯ç‰¹å®šç†ï¼Œä¸€èˆ¬å–ä¿¡å·é¢‘ç‡ä¸Šé™çš„4-5å€åšä¸ºé‡‡æ ·é¢‘ç‡ï¼›ä¸€èˆ¬å¯ç”¨é€Ÿåº¦è¾ƒé«˜çš„é€æ¬¡é€¼è¿›å¼A&#x2F;Dè½¬æ¢å™¨ï¼Œä¸è®ºé‡‡ç”¨ä¹˜ç´¯åŠ æ–¹æ³•è¿˜æ˜¯åˆ†å¸ƒå¼ç®—æ³•è®¾è®¡FIRæ»¤æ³¢å™¨ï¼Œæ»¤æ³¢å™¨è¾“å‡ºçš„æ•°æ®éƒ½æ˜¯ä¸€ä¸²åºåˆ—ï¼Œè¦ä½¿å®ƒèƒ½ç›´è§‚åœ°ååº”å‡ºæ¥ï¼Œè¿˜éœ€ç»è¿‡æ•°æ¨¡è½¬æ¢ï¼Œå› æ­¤ç”±FPGAæ„æˆçš„FIRæ»¤æ³¢å™¨çš„è¾“å‡ºé¡»å¤–æ¥D&#x2F;Aæ¨¡å—ã€‚FPGAæœ‰ç€è§„æ•´çš„å†…éƒ¨é€»è¾‘é˜µåˆ—å’Œä¸°å¯Œçš„è¿çº¿èµ„æºï¼Œç‰¹åˆ«é€‚åˆäºæ•°å­—ä¿¡å·å¤„ç†ä»»åŠ¡ï¼Œç›¸å¯¹äºä¸²è¡Œè¿ç®—ä¸ºä¸»å¯¼çš„é€šç”¨DSPèŠ¯ç‰‡æ¥è¯´ï¼Œå…¶å¹¶è¡Œæ€§å’Œå¯æ‰©å±•æ€§æ›´å¥½ï¼Œåˆ©ç”¨FPGAä¹˜ç´¯åŠ çš„å¿«é€Ÿç®—æ³•ï¼Œå¯ä»¥è®¾è®¡å‡ºé«˜é€Ÿçš„FIRæ•°å­—æ»¤æ³¢å™¨[5]ã€‚</p>
<img data-src="https://pic.imgdb.cn/item/664348550ea9cb1403cb2ed2.png"/>
    
<h2 id="çª—å£è®¾è®¡æ³•"><a href="#çª—å£è®¾è®¡æ³•" class="headerlink" title="çª—å£è®¾è®¡æ³•"></a>çª—å£è®¾è®¡æ³•</h2><p>çª—å£è®¾è®¡æ³•æ˜¯ä¸€ç§é€šè¿‡æˆªæ–­å’Œè®¡æƒçš„æ–¹æ³•ä½¿æ— é™é•¿éå› æœåºåˆ—æˆä¸ºæœ‰é™é•¿è„‰å†²å“åº”åºåˆ—çš„è®¾è®¡æ–¹æ³•ã€‚é€šå¸¸åœ¨è®¾è®¡æ»¤æ³¢å™¨ä¹‹å‰ï¼Œåº”è¯¥å…ˆæ ¹æ®å…·ä½“çš„å·¥ç¨‹åº”ç”¨ç¡®å®šæ»¤æ³¢å™¨çš„æŠ€æœ¯æŒ‡æ ‡ã€‚åœ¨å¤§å¤šæ•°å®é™…åº”ç”¨ä¸­ï¼Œæ•°å­—æ»¤æ³¢å™¨å¸¸å¸¸è¢«ç”¨æ¥å®ç°é€‰é¢‘æ“ä½œï¼Œæ‰€ä»¥æŒ‡æ ‡çš„å½¢å¼ä¸€èˆ¬ä¸ºåœ¨é¢‘åŸŸä¸­ä»¥åˆ†è´å€¼ç»™å‡ºçš„ç›¸å¯¹å¹…åº¦å“åº”å’Œç›¸ä½å“åº”ã€‚<br>çª—å£è®¾è®¡æ³•æ­¥éª¤å¦‚ä¸‹ï¼š<br><strong>ï¼ˆ1ï¼‰</strong>æ ¹æ®è¿‡æ¸¡å¸¦å®½åŠé˜»å¸¦è¡°å‡è¦æ±‚ï¼Œé€‰æ‹©çª—å‡½æ•°çš„ç±»å‹å¹¶ä¼°è®¡çª—å£é•¿åº¦Nã€‚çª—å‡½æ•°çš„ç±»å‹å¯æ ¹æ®æœ€å°é˜»å¸¦è¡°å‡ASç‹¬ç«‹é€‰æ‹©[6]ã€‚<br><strong>ï¼ˆ2ï¼‰</strong>æ ¹æ®å¾…æ±‚æ»¤æ³¢å™¨çš„ç†æƒ³é¢‘ç‡å“åº”æ±‚å‡ºç†æƒ³å•ä½è„‰å†²å“åº”hd(n)ã€‚<br><strong>ï¼ˆ3ï¼‰</strong>ç”±æ€§èƒ½æŒ‡æ ‡ç¡®å®šçª—å‡½æ•°W(n)å’Œé•¿åº¦Nã€‚<br><strong>ï¼ˆ4ï¼‰</strong>æ±‚å¾—å®é™…æ»¤æ³¢å™¨çš„å•ä½è„‰å†²å“åº”h(n)ï¼Œ h(n)å³ä¸ºæ‰€è®¾è®¡FIRæ»¤æ³¢å™¨ç³»æ•°å‘é‡b(n)ã€‚	<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTE1MTU1NjQ4NzIy?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°">ï¼ˆ2.1ï¼‰</p>
<p>å¸¸è§çš„çª—å‡½æ•°æ€§èƒ½è¡¨å¦‚ä¸‹è¡¨2.1æ‰€ç¤ºï¼š<br>è¡¨2.1 å¸¸è§çª—å‡½æ•°æ€§èƒ½è¡¨<br><img data-src="https://s21.ax1x.com/2024/03/16/pF20N6A.png"/></p>
<h2 id="FLATTOPWINçª—"><a href="#FLATTOPWINçª—" class="headerlink" title="FLATTOPWINçª—"></a>FLATTOPWINçª—</h2><p>w&#x3D;Flattopwin (L) è¿”å›L-ç‚¹Flattopwinçª—å£ä¸­åˆ—å‘é‡ã€‚Flattopwinçª—çš„æ»¤æ³¢å™¨çš„è¿‡æ¸¡å¸¦å®½ä¸º19.6Ï€&#x2F;Mï¼Œæœ€å°é˜»å¸¦è¡°å‡108dbã€‚<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTE1MTYwMDUxNzM1?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>æ—¶é—´æ³¢å½¢å’Œå¹…åº¦è°±å¦‚ä¸‹å›¾2.2ã€å›¾2.3ï¼š<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTE1MTYwMTQ0NDM5?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°">å›¾2.2 æ—¶é—´æ³¢å½¢<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTE1MTYwMjQxODUw?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°">å›¾2.3 å¹…åº¦è°±</p>
<h1 id="è®¾è®¡æ­¥éª¤"><a href="#è®¾è®¡æ­¥éª¤" class="headerlink" title="è®¾è®¡æ­¥éª¤"></a>è®¾è®¡æ­¥éª¤</h1><h2 id="è®¾è®¡æµç¨‹å›¾"><a href="#è®¾è®¡æµç¨‹å›¾" class="headerlink" title="è®¾è®¡æµç¨‹å›¾"></a>è®¾è®¡æµç¨‹å›¾</h2><p>æ ¹æ®è®¾è®¡çš„è¦æ±‚ï¼Œé¦–å…ˆè‡ªå·±å½•åˆ¶ä¸€æ®µè¯­éŸ³ä¿¡å·ï¼Œä¿®æ”¹è¯­éŸ³æ–‡ä»¶æ ¼å¼ï¼Œå¯¹è¯­éŸ³ä¿¡å·åŠ å…¥å™ªå£°å¹²æ‰°ï¼Œå†åˆ©ç”¨Flattopwinçª—è®¾è®¡åˆç†çš„FIRæ»¤æ³¢å™¨ã€‚æœ€åç”¨æ»¤æ³¢å™¨å¯¹å¹²æ‰°åçš„è¯­éŸ³ä¿¡å·è¿›è¡Œæ»¤æ³¢å»å™ªã€‚å…·ä½“è®¾è®¡æµç¨‹å›¾å¦‚ä¸‹å›¾3.1æ‰€ç¤ºï¼š<br><img data-src="https://pic.imgdb.cn/item/664348a10ea9cb1403cb8fdf.png" width="60%" alt="å›¾3.1è®¾è®¡æµç¨‹å›¾"/></p>
<h2 id="å½•åˆ¶è¯­éŸ³ä¿¡å·"><a href="#å½•åˆ¶è¯­éŸ³ä¿¡å·" class="headerlink" title="å½•åˆ¶è¯­éŸ³ä¿¡å·"></a>å½•åˆ¶è¯­éŸ³ä¿¡å·</h2><p>ä»ç”µè„‘ä¸Šå½•åˆ¶ä¸€æ®µè¯­éŸ³ä¿¡å·ï¼Œå¹¶å‘½åä¸ºâ€œcf.wavâ€ï¼Œä¿®æ”¹è¯­éŸ³æ–‡ä»¶çš„æ ¼å¼ï¼Œå¹¶æ”¾åœ¨Eç›˜ç›®å½•ä¸‹ã€‚åœ¨MATLABè½¯ä»¶ä¸­è°ƒç”¨wavreadå‡½æ•°å¯é‡‡é›†åˆ°è¯­éŸ³ä¿¡å·ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[x,fs,bits]=wavread(&#x27;e:\cf.wav&#x27;); </span><br></pre></td></tr></table></figure>
<blockquote>
<p>%fsæ˜¯ç”Ÿæˆè¯¥æ³¢å½¢æ–‡ä»¶çš„é‡‡æ ·é¢‘ç‡ï¼Œbitsæ˜¯æ³¢å½¢æ–‡ä»¶æ²¡æ ·æœ¬çš„ç¼–ç ä½æ•°</p>
</blockquote>
<p>å¾—åˆ°åŸå§‹è¯­éŸ³ä¿¡å·æ—¶åŸŸæ³¢å½¢å›¾å¦‚å›¾3.2<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTE1MTYwOTA2MzU1?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°">å›¾3.2 åŸå§‹è¯­éŸ³ä¿¡å·æ—¶åŸŸæ³¢å½¢å›¾</p>
<p>ç„¶åå¯¹è¯­éŸ³å·è¿›è¡Œå¿«é€Ÿå‚…é‡Œå¶å˜æ¢ï¼Œå¾—åˆ°ä¿¡å·çš„é¢‘è°±ç‰¹æ€§ï¼Œå¹¶å°†åŸå§‹éŸ³ä¹ä¿¡å·çš„æ³¢å½¢å›¾ä¸åŠ å¹²æ‰°åçš„æ³¢å½¢å›¾è¿›è¡Œæ¯”è¾ƒã€‚éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">y=x+0.1*sin(fn*2*pi*t);    %ç»™åŸå§‹ä¿¡å·åŠ å™ªå£°</span><br><span class="line">X=abs(fft(x));             %å¯¹åŸå§‹ä¿¡å·è¿›è¡Œå‚…é‡Œå¶å˜æ¢</span><br><span class="line">Y=abs(fft(y));             %å¯¹åŠ å™ªå£°åä¿¡å·è¿›è¡Œå‚…é‡Œå¶å˜æ¢</span><br></pre></td></tr></table></figure>
<p>åŠ å™ªå£°å‰åçš„æ—¶åŸŸä¸é¢‘è°±å›¾å¦‚å›¾3.3<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTE1MTYxMDU3OTUx?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>å›¾3.3 åŠ å™ªå£°å‰åçš„æ—¶åŸŸå›¾ä¸é¢‘è°±å›¾æ¯”è¾ƒ</p>
<h2 id="æ»¤æ³¢å™¨è®¾è®¡"><a href="#æ»¤æ³¢å™¨è®¾è®¡" class="headerlink" title="æ»¤æ³¢å™¨è®¾è®¡"></a>æ»¤æ³¢å™¨è®¾è®¡</h2><p>åœ¨æœ¬æ¬¡çš„è¯¾ç¨‹è®¾è®¡ä¸­æˆ‘æ‰€é‡‡ç”¨çš„æ˜¯åˆ©ç”¨Flattopwinçª—å‡½æ•°æ¥è®¾è®¡FIRæ»¤æ³¢å™¨ã€‚å…¶ä¸­ä¸»è¦ç”¨äº†freqz_m.må’Œideal_lp.mä¸¤ä¸ªè‡ªç¼–å‡½æ•°ã€‚<br>è®¾è®¡çš„æ»¤æ³¢å™¨å›¾å¦‚å›¾3.4<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTE1MTYxMjExNzYx?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>å›¾3.4 æ»¤æ³¢å™¨å›¾å½¢</p>
<h2 id="ä¿¡å·æ»¤æ³¢å¤„ç†"><a href="#ä¿¡å·æ»¤æ³¢å¤„ç†" class="headerlink" title="ä¿¡å·æ»¤æ³¢å¤„ç†"></a>ä¿¡å·æ»¤æ³¢å¤„ç†</h2><p>æ»¤æ³¢å™¨è®¾è®¡å®Œæˆåï¼Œåœ¨MATLABå¹³å°ä¸Šç”¨å‡½æ•°fftfiltå®ç°æ»¤æ³¢ã€‚<br>å¾—åˆ°çš„æ»¤æ³¢å‰åè¯­éŸ³ä¿¡å·çš„æ—¶åŸŸæ³¢å½¢å›¾å’Œé¢‘è°±å›¾å¯¹æ¯”å›¾å¦‚å›¾3.5ã€3.6<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTE1MTYxMzM4NzQ3?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>å›¾3.5 æ»¤æ³¢å‰åè¯­éŸ³ä¿¡å·çš„æ—¶åŸŸæ³¢å½¢å›¾å’Œé¢‘è°±å›¾<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNTE1MTYxNDA3NzM3?x-oss-process=image/format,png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>å›¾3.6 æ»¤æ³¢å‰åè¯­éŸ³ä¿¡å·çš„æ¯”è¾ƒ</p>
<h2 id="ç»“æœåˆ†æ"><a href="#ç»“æœåˆ†æ" class="headerlink" title="ç»“æœåˆ†æ"></a>ç»“æœåˆ†æ</h2><p>åœ¨MATLABä¸­ï¼Œå¯¹åŸå§‹çš„è¯­éŸ³ä¿¡å·åŠ å™ªéŸ³ï¼Œåˆ©ç”¨FLATTOPWINçª—å£è®¾è®¡FIRæ»¤æ³¢å™¨ï¼Œé€šè¿‡æ‰€è®¾è®¡çš„æ»¤æ³¢å™¨å¯¹åŠ å™ªå£°åçš„ä¿¡å·è¿›è¡Œå¤„ç†ã€‚å†é€šè¿‡sound(x,fs,bits)å‡½æ•°å¯¹æ»¤æ³¢åçš„è¯­éŸ³ä¿¡å·è¿›è¡Œå›æ”¾ï¼Œå¯ä»¥å¬åˆ°æ»¤æ³¢ä¹‹åçš„ä¿¡å·å’ŒåŸå§‹ä¿¡å·ä¸€æ ·æ¸…æ™°ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sound(x,fs,bits);        %æ’­æ”¾åŸå§‹è¯­éŸ³ä¿¡å·</span><br><span class="line">sound (y_fil,fs,bits);   % æ’­æ”¾æ»¤æ³¢åçš„éŸ³ä¹ä¿¡å·</span><br></pre></td></tr></table></figure>
<p>æ‰€å¾—ç»“æœè¯æ˜äº†ç”¨Flattopwinçª—è®¾è®¡çš„FIRæ»¤æ³¢å™¨å’ŒéŸ³ä¹ä¿¡å·å»å™ªè®¾è®¡æ˜¯æˆåŠŸçš„ã€‚</p>
<h1 id="å‡ºç°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•"><a href="#å‡ºç°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•" class="headerlink" title="å‡ºç°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•"></a>å‡ºç°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•</h1><p>åœ¨æœ¬æ¬¡è¯¾ç¨‹è®¾è®¡ä¸­æˆ‘é‡åˆ°çš„é—®é¢˜å¦‚ä¸‹ï¼š<br>1ã€å¯¹Flattopwinçª—ä¸æ˜¯å¾ˆäº†è§£ï¼Œå¯¹ç”¨Flattopwinçª—å‡½æ•°è®¾è®¡FIRæ»¤æ³¢å™¨çš„è®¾è®¡æ­¥éª¤å¾ˆç”Ÿç–ã€‚<br>2ã€ è¯­éŸ³æ–‡ä»¶çš„æ ¼å¼æœ‰é—®é¢˜ï¼Œä¸çŸ¥é“å¦‚ä½•ä¿®æ”¹ã€‚<br>3ã€ä¸çŸ¥é“å¦‚ä½•è°ƒç”¨å‡½æ•°ï¼Œå¯¹MATLABçš„ä½¿ç”¨ä¸ç†Ÿæ‚‰ã€‚<br>4ã€å¯¹æ»¤æ³¢å™¨ä¸€äº›å‚æ•°ä»¥åŠé€šå¸¦é˜»å¸¦ç­‰æ¦‚å¿µä¸æ˜¯å¾ˆæ¸…æ¥šã€‚<br>5ã€åœ¨é‡‡ç”¨Flattopwinçª—å‡½æ•°è®¾è®¡çš„FIRæ»¤æ³¢å™¨æ—¶å¾—ä¸åˆ°ç†æƒ³çš„æ»¤æ³¢å™¨ï¼Œå› è€Œä¿¡å·çš„æ¢<br>å¤ä¸æ˜¯ç‰¹åˆ«ç†æƒ³ã€‚</p>
<pre><code>é’ˆå¯¹ä»¥ä¸Šé—®é¢˜ï¼Œç›¸åº”çš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š
</code></pre>
<p>1ã€è‡ªå·±ä¸Šç½‘æŸ¥é˜…èµ„æ–™ï¼Œä»¥åŠæŸ¥çœ‹ä¹‹å‰ã€Šæ•°å­—ä¿¡å·å¤„ç†ã€‹æ•™æå’Œå‘å›¾ä¹¦é¦†å€Ÿé˜…èµ„æ–™ï¼ŒæŒ<br>æ¡åˆ©ç”¨Flattopwinçª—å‡½æ•°è®¾è®¡FIRæ»¤æ³¢å™¨çš„æ–¹æ³•å’Œæ­¥éª¤ã€‚<br>2ã€è¯¢é—®åŒå­¦ï¼Œæ‰¾åŒå­¦å¸®å¿™ã€‚<br>3ã€åˆ©ç”¨MATLABè¿™æ¬¾è½¯ä»¶è‡ªå¸¦çš„helpåŠŸèƒ½ï¼Œä»¥åŠæŸ¥çœ‹è€å¸ˆæ‰€ç»™æä¾›çš„è¯¾è®¾èµ„æ–™å’Œä¸Š<br>ç½‘çœ‹é˜…èµ„æ–™ã€‚<br>4ã€è¯·æ•™å€¼ç­è€å¸ˆä»¥åŠåœ¨ç½‘ä¸ŠæŸ¥é˜…èµ„æ–™ã€‚<br>5ã€é€šè¿‡ä¸æ–­è®¾ç½®å‚æ•°çš„å€¼ï¼Œæœ€ç»ˆè¾¾åˆ°æœ€ç†æƒ³çš„å€¼ï¼Œè®¾è®¡å‡ºç†æƒ³çš„æ»¤æ³¢å™¨ï¼Œä½¿ä¿¡å·å¾—åˆ°ç†æƒ³æ¢å¤ã€‚</p>
<h1 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h1><p>æœ¬æ¬¡çš„è¯¾ç¨‹è®¾è®¡ï¼Œæˆ‘çš„é¢˜ç›®æ˜¯ã€Šè¯­éŸ³ä¿¡å·æ»¤æ³¢å»å™ªâ€”â€”ä½¿ç”¨Flattopwinè®¾è®¡çš„FIRæ»¤æ³¢ã€‹ã€‚åœ¨æœ¬æ¬¡è¯¾ç¨‹è®¾è®¡ä¹‹å‰ï¼Œæˆ‘å¯¹Flattopwinçª—å‡½æ•°å®Œå…¨æ²¡æœ‰äº†è§£ï¼Œå› æ­¤åœ¨çœ‹åˆ°è¿™ä¸ªé¢˜ç›®æ—¶ï¼Œæˆ‘æ˜¯ä¸€å¤´é›¾æ°´ã€‚ä½†æ˜¯é€šè¿‡è‡ªå·±ç¿»é˜…èµ„æ–™å’Œè¯¢é—®åŒå­¦ï¼Œæˆ‘æŒæ¡äº†ç”¨Flattopwinçª—å‡½æ•°è®¾è®¡FIRæ»¤æ³¢å™¨çš„æ–¹æ³•æ­¥éª¤ï¼Œäº†è§£äº†çª—å‡½æ•°çš„åŸºæœ¬è®¾è®¡æµç¨‹ã€‚ç»è¿‡è¿™ä¸‰å‘¨çš„è¯¾ç¨‹è®¾è®¡ï¼Œæˆ‘å­¦ä¼šäº†å¾ˆå¤šä¸œè¥¿ï¼Œä¸ä»…ä»…æ˜¯æŠ€æœ¯ï¼Œæ›´å¤šçš„æ˜¯è‡ªå­¦èƒ½åŠ›çš„æé«˜ä»¥åŠå¤„ç†é—®é¢˜çš„æ–¹æ³•ã€‚<br>æˆ‘ä»¬é€šä¿¡å·¥ç¨‹ä¸“ä¸šæ˜¯ä¸ªå®è·µæ€§å¾ˆå¼ºçš„ä¸“ä¸šï¼Œè€Œæˆ‘ä»¬åœ¨æ ¡å¤§éƒ¨åˆ†çš„å­¦ä¹ æ—¶é—´éƒ½æ˜¯èŠ±åœ¨ç†è®ºå­¦ä¹ ä¸Šé¢ï¼Œå®è·µçš„æœºä¼šå¾ˆå°‘ã€‚å› è€Œæˆ‘å¯¹å¾ˆå¤šæ‰€å­¦çš„ç†è®ºçŸ¥è¯†å¦‚ä½•è·Ÿå®è·µè”ç³»çš„æ¦‚å¿µå¾ˆæ¨¡ç³Šï¼Œè¿™æ¬¡çš„è¯¾ç¨‹è®¾è®¡ç»™äº†æˆ‘è¿™ä¸ªæœºä¼šï¼ŒåŠ æ·±äº†æˆ‘å¯¹ç†è®ºè”ç³»å®é™…çš„ç†è§£ï¼Œå¢å¼ºäº†è‡ªå·±ç‹¬ç«‹åˆ†æé—®é¢˜å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œå¼€é˜”äº†è‡ªå·±çš„æ€ç»´ã€‚<br>è¿˜æœ‰è®©æˆ‘çœ‹åˆ°äº†è‡ªå·±çš„ä¸è¶³ï¼Œè‡ªå·±å¯¹æœ¬ä¸“ä¸šçš„ç›¸å…³çŸ¥è¯†æŒæ¡çš„è¿˜å¾ˆå°‘ï¼Œè¿˜æœ‰å¾ˆå¤šçŸ¥è¯†éƒ½æ²¡æŒæ¡ï¼Œè¿˜è®©æˆ‘è®¤è¯†åˆ°è§£å†³é—®é¢˜çš„æ–¹æ³•ã€é€”å¾„å¾ˆå¤šï¼Œåšäº‹è¦å¼€é˜”è‡ªå·±çš„æ€ç»´ï¼Œçœ‹å¾…é—®é¢˜è¦ä»å¤šä¸ªè§’åº¦çœ‹ã€‚<br>åœ¨æ­¤æˆ‘è¦æ„Ÿè°¢å­¦æ ¡ä¸ºæˆ‘ä»¬æä¾›è¿™æ¬¡è¯¾ç¨‹è®¾è®¡çš„æœºä¼šï¼Œæ„Ÿè°¢è€å¸ˆå¯¹æˆ‘çš„æ‚‰å¿ƒæŒ‡å¯¼ï¼Œä¹Ÿæ„Ÿè°¢åŒå­¦å¯¹æˆ‘çš„å¸®åŠ©ã€‚è¿™æ¬¡çš„è¯¾ç¨‹è®¾è®¡è®©æˆ‘ç†è®ºè”ç³»å®é™…ï¼Œä¸ä»…å·©å›ºäº†æˆ‘ä»¬çš„ç†è®ºçŸ¥è¯†ï¼Œè¿˜æé«˜äº†æˆ‘çš„åŠ¨æ‰‹èƒ½åŠ›ï¼Œåœ¨è¿™æ¬¡è¯¾ç¨‹è®¾è®¡ä¸­æˆ‘æ‰€å­¦åˆ°çš„çŸ¥è¯†æ˜¯æˆ‘çš„è´¢å¯Œï¼Œè®©æˆ‘ç»ˆèº«å—ç›Šã€‚</p>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><h2 id="è¯­éŸ³ä¿¡å·æ»¤æ³¢å»å™ªè®¾è®¡æºç¨‹åºæ¸…å•"><a href="#è¯­éŸ³ä¿¡å·æ»¤æ³¢å»å™ªè®¾è®¡æºç¨‹åºæ¸…å•" class="headerlink" title="è¯­éŸ³ä¿¡å·æ»¤æ³¢å»å™ªè®¾è®¡æºç¨‹åºæ¸…å•"></a>è¯­éŸ³ä¿¡å·æ»¤æ³¢å»å™ªè®¾è®¡æºç¨‹åºæ¸…å•</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">% ç¨‹åºåç§°ï¼šc.m</span><br><span class="line">% ç¨‹åºåŠŸèƒ½ï¼šåˆ©ç”¨FLATTOPWINè®¾è®¡çš„FIRæ»¤æ³¢å¯¹è¯­éŸ³ä¿¡å·è¿›è¡Œæ»¤æ³¢å»å™ª</span><br><span class="line">% ç¨‹åºä½œè€…ï¼š </span><br><span class="line">% æœ€åä¿®æ”¹æ—¥æœŸï¼š2017å¹´3æœˆ8æ—¥</span><br><span class="line">[x,fs,bits]=wavread(&#x27;e:\cf.wav&#x27;);  % è¾“äº†å‚æ•°ä¸ºæ–‡ä»¶çš„å…¨è·¯å¾„å’Œæ–‡ä»¶åï¼Œè¾“å‡ºçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¯ä¸ªæ ·æœ¬çš„å€¼ï¼Œfsæ˜¯ç”Ÿæˆè¯¥æ³¢å½¢æ–‡ä»¶æ—¶çš„é‡‡æ ·ç‡ï¼Œbitsæ˜¯æ³¢å½¢æ–‡ä»¶æ¯æ ·æœ¬çš„ç¼–ç ä½æ•°ã€‚</span><br><span class="line">sound(x,fs,bits);      % æŒ‰æŒ‡å®šçš„é‡‡æ ·ç‡å’Œæ¯æ ·æœ¬ç¼–ç ä½æ•°å›æ”¾</span><br><span class="line">N=length(x);       % è®¡ç®—ä¿¡å·Xçš„é•¿åº¦</span><br><span class="line">fn=2200;            % å•é¢‘å™ªå£°é¢‘ç‡</span><br><span class="line">t=0:1/fs:(N-1)/fs;         % è®¡ç®—æ—¶é—´èŒƒå›´ï¼Œæ ·æœ¬æ•°é™¤ä»¥é‡‡æ ·é¢‘ç‡</span><br><span class="line">x=x(:,1)&#x27;;               % å°†åŒå£°é“è½¬ä¸ºå•å£°é“</span><br><span class="line">y=x+0.1*sin(fn*2*pi*t);     % åŠ å™ªå£°</span><br><span class="line">sound(y,fs,bits);         % åº”è¯¥å¯ä»¥æ˜æ˜¾å¬å‡ºæœ‰å°–é”çš„å•å“å•¸å«å£°</span><br><span class="line">X=abs(fft(x));  Y=abs(fft(y));    % å¯¹åŸå§‹ä¿¡å·å’ŒåŠ å™ªå£°ä¿¡å·è¿›è¡Œfftå˜æ¢ï¼Œå–å¹…åº¦å€¼</span><br><span class="line">X=X(1:N/2); Y=Y(1:N/2);       % æˆªå–å‰åŠéƒ¨åˆ†</span><br><span class="line">deltaf=fs/N;            % è®¡ç®—é¢‘è°±çš„è°±çº¿é—´éš”</span><br><span class="line">f=0:deltaf:fs/2-deltaf;     % è®¡ç®—é¢‘è°±é¢‘ç‡èŒƒå›´</span><br><span class="line">figure(1)</span><br><span class="line">subplot(2,2,1);plot(t,x);xlabel(&#x27;æ—¶é—´t&#x27;);</span><br><span class="line">ylabel(&#x27;å¹…åº¦&#x27;);title(&#x27;åŸå§‹è¯­éŸ³ä¿¡å·&#x27;);</span><br><span class="line">axis([0,4,-1.5,1.5]);</span><br><span class="line"></span><br><span class="line">subplot(2,2,2);plot(f,X);xlabel(&#x27;é¢‘ç‡f&#x27;);ylabel(&#x27;å¹…åº¦è°±&#x27;);</span><br><span class="line">title(&#x27;åŸå§‹è¯­éŸ³ä¿¡å·å¹…åº¦è°±&#x27;);</span><br><span class="line">axis([-10,6000,0,700]);</span><br><span class="line">subplot(2,2,3);plot(t,y);xlabel(&#x27;æ—¶é—´&#x27;);ylabel(&#x27;å¹…åº¦&#x27;);</span><br><span class="line">title(&#x27;åŠ å¹²æ‰°åçš„è¯­éŸ³ä¿¡å·&#x27;);</span><br><span class="line">axis([0,4,-1.5,1.5]);</span><br><span class="line">subplot(2,2,4);plot(f,Y);xlabel(&#x27;é¢‘ç‡ f&#x27;);ylabel(&#x27;å¹…åº¦è°±&#x27;);</span><br><span class="line">title(&#x27;åŠ å¹²æ‰°åçš„è¯­éŸ³ä¿¡å·å¹…åº¦è°±&#x27;);</span><br><span class="line">axis([-10,6000,0,700]);</span><br><span class="line"> </span><br><span class="line">fpd=2100;fsd=2150;fsu=2250;fpu=2300;Rp=1;As=30;      % é˜»å¸¦æ»¤æ³¢å™¨è®¾è®¡æŒ‡æ ‡</span><br><span class="line">fcd=(fpd+fsd)/2;fcu=(fpu+fsu)/2;df=min((fsd-fpd),(fpu-fsu));  % è®¡ç®—ä¸Šä¸‹è¾¹å¸¦ä¸­å¿ƒé¢‘ç‡å’Œé¢‘ç‡é—´éš”</span><br><span class="line">wcd=fcd/fs*2*pi;wcu=fcu/fs*2*pi;dw=df/fs*2*pi;    %å°†Hzä¸ºå•ä½çš„æ¨¡æ‹Ÿé¢‘ç‡æ¢ç®—ä¸ºradä¸ºå•ä½çš„æ•°å­—é¢‘ç‡ </span><br><span class="line">wsd=fsd/fs*2*pi;wsu=fsu/fs*2*pi;</span><br><span class="line">M=ceil(6.2*pi/dw)+1;      %è®¡ç®—flattopwinçª—è®¾è®¡æ»¤æ³¢å™¨æ—¶éœ€è¦çš„é˜¶æ•°</span><br><span class="line">n=0:M-1;         % å®šä¹‰æ—¶é—´èŒƒå›´</span><br><span class="line">w_fla=(Flattopwin(M));    % äº§ç”ŸMé˜¶çš„flattopwinçª—</span><br><span class="line">hd_bs=ideal_lp(wcd,M)+ideal_lp(pi,M)-ideal_lp(wcu,M); </span><br><span class="line">% è°ƒç”¨è‡ªç¼–å‡½æ•°è®¡ç®—ç†æƒ³é˜»å¸¦æ»¤æ³¢å™¨çš„è„‰å†²å“åº”</span><br><span class="line">h_bs=w_fla&#x27;.*hd_bs;       % ç”¨çª—å£æ³•è®¡ç®—å®é™…æ»¤æ³¢å™¨è„‰å†²å“åº”</span><br><span class="line">[db,mag,pha,grd,w]=freqz_m(h_bs,1);  % è°ƒç”¨è‡ªç¼–å‡½æ•°è®¡ç®—æ»¤æ³¢å™¨çš„é¢‘ç‡ç‰¹å¾</span><br><span class="line"> </span><br><span class="line">figure(2)</span><br><span class="line">subplot(2,2,1);plot(w,db);title(&#x27;æ»¤æ³¢å™¨å¹…åº¦å“åº”å›¾&#x27;);</span><br><span class="line">xlabel(&#x27;w/pi&#x27;);ylabel(&#x27;db&#x27;);</span><br><span class="line">axis([0,0.8,-60,10]);</span><br><span class="line">line([0,2],[-As,-As],&#x27;color&#x27;,&#x27;y&#x27;,&#x27;linestyle&#x27;,&#x27;--&#x27;,&#x27;LineWidth&#x27;,2);</span><br><span class="line">line([0,2],[-Rp,-Rp],&#x27;color&#x27;,&#x27;g&#x27;,&#x27;linestyle&#x27;,&#x27;--&#x27;,&#x27;LineWidth&#x27;,2);</span><br><span class="line">line([wsd,wsd],[-30,10],&#x27;color&#x27;,&#x27;r&#x27;,&#x27;linestyle&#x27;,&#x27;--&#x27;,&#x27;LineWidth&#x27;,2);</span><br><span class="line">line([wsu,wsu],[-30,10],&#x27;color&#x27;,&#x27;r&#x27;,&#x27;linestyle&#x27;,&#x27;--&#x27;,&#x27;LineWidth&#x27;,2);</span><br><span class="line">subplot(2,2,2);plot(w,mag);title(&#x27;æ»¤æ³¢å™¨å¹…åº¦å“åº”å›¾&#x27;);</span><br><span class="line">xlabel(&#x27;w/pi&#x27;);ylabel(&#x27;å¹…åº¦mag&#x27;);</span><br><span class="line">axis([0,1,-0.5,1.5]);</span><br><span class="line">subplot(2,2,3);plot(w,pha);title(&#x27;æ»¤æ³¢å™¨å¹…åº¦å“åº”å›¾&#x27;);</span><br><span class="line">xlabel(&#x27;w/pi&#x27;);ylabel(&#x27;ç›¸ä½pha&#x27;);</span><br><span class="line">axis([0,1,-4,4]);</span><br><span class="line">subplot(2,2,4);stem(n,h_bs);title(&#x27;æ»¤æ³¢å™¨å¹…åº¦å“åº”å›¾&#x27;);</span><br><span class="line">xlabel(&#x27;w/pi&#x27;);ylabel(&#x27;db&#x27;);</span><br><span class="line">axis([0,1500,0,1]);</span><br><span class="line"> </span><br><span class="line">y_fil=fftfilt(h_bs,y);  %ç”¨è®¾è®¡å¥½çš„æ»¤æ³¢å™¨å¯¹yè¿›è¡Œæ»¤æ³¢</span><br><span class="line">Y_fil=fft(y_fil);Y_fil=Y_fil(1:N/2);  %è®¡ç®—é¢‘è°±å–å‰ä¸€åŠ</span><br><span class="line">figure(3)</span><br><span class="line">subplot(3,2,1);plot(t,x);xlabel(&#x27;æ—¶é—´t&#x27;);ylabel(&#x27;å¹…åº¦&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">title(&#x27;åŸå§‹è¯­éŸ³ä¿¡å·&#x27;);</span><br><span class="line">subplot(3,2,2);plot(f,X);xlabel(&#x27;é¢‘ç‡f&#x27;);ylabel(&#x27;å¹…åº¦è°±&#x27;);</span><br><span class="line">title(&#x27;åŸå§‹è¯­éŸ³ä¿¡å·å¹…åº¦è°±&#x27;);</span><br><span class="line">axis([0,4000,0,600]);</span><br><span class="line">subplot(3,2,3);plot(t,y);xlabel(&#x27;æ—¶é—´t&#x27;);ylabel(&#x27;Â·å¹…åº¦&#x27;);</span><br><span class="line">title(&#x27;åŠ å¹²æ‰°åè¯­éŸ³ä¿¡å·&#x27;);</span><br><span class="line">subplot(3,2,4);plot(f,Y);xlabel(&#x27;é¢‘ç‡f&#x27;);ylabel(&#x27;å¹…åº¦è°±&#x27;);</span><br><span class="line">title(&#x27;åŠ å¹²æ‰°åè¯­éŸ³ä¿¡å·å¹…åº¦è°±&#x27;);</span><br><span class="line">axis([0,4000,0,600]);</span><br><span class="line">subplot(3,2,5);plot(t,y_fil);xlabel(&#x27;æ—¶é—´t&#x27;);ylabel(&#x27;å¹…åº¦&#x27;);</span><br><span class="line">title(&#x27;æ»¤æ³¢åè¯­éŸ³ä¿¡å·&#x27;);</span><br><span class="line">subplot(3,2,6);plot(f,Y_fil);xlabel(&#x27;é¢‘ç‡f&#x27;);ylabel(&#x27;å¹…åº¦è°±&#x27;);</span><br><span class="line">title(&#x27;æ»¤æ³¢åè¯­éŸ³ä¿¡å·å¹…åº¦è°±&#x27;);</span><br><span class="line">axis([0,4000,0,600]);</span><br><span class="line">figure(4)</span><br><span class="line">subplot(2,1,1);plot(f,20*log10(Y));grid on; </span><br><span class="line">subplot(2,1,2);plot(f,20*log10(Y_fil));grid on; </span><br><span class="line">sound(x,fs,bits);   % æ’­æ”¾åŸå§‹ä¿¡å·</span><br><span class="line">sound (y_fil,fs,bits);  %æ’­æ”¾æ»¤æ³¢åçš„ä¿¡å·</span><br><span class="line"> </span><br><span class="line">[C,B,A]=dir2fs(h_bs);</span><br></pre></td></tr></table></figure>

<h2 id="å‡½æ•°FREQZ-M-Må®šä¹‰ï¼š"><a href="#å‡½æ•°FREQZ-M-Må®šä¹‰ï¼š" class="headerlink" title="å‡½æ•°FREQZ_M.Må®šä¹‰ï¼š"></a>å‡½æ•°FREQZ_M.Må®šä¹‰ï¼š</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function [db,mag,pha,grd,w] = freqz_m(b,a);</span><br><span class="line">% Modified version of freqz subroutine</span><br><span class="line">% ------------------------------------</span><br><span class="line">% [db,mag,pha,grd,w] = freqz_m(b,a);</span><br><span class="line">%  db = Relative magnitude in dB computed over 0 to pi radians</span><br><span class="line">% mag = absolute magnitude computed over 0 to pi radians </span><br><span class="line">% pha = Phase response in radians over 0 to pi radians</span><br><span class="line">% grd = Group delay over 0 to pi radians</span><br><span class="line">%   w = 501 frequency samples between 0 to pi radians</span><br><span class="line">%   b = numerator polynomial of H(z)   (for FIR: b=h)</span><br><span class="line">%   a = denominator polynomial of H(z) (for FIR: a=[1])</span><br><span class="line">%</span><br><span class="line">[H,w] = freqz(b,a,1000,&#x27;whole&#x27;);</span><br><span class="line">    H = (H(1:1:501))&#x27;; w = (w(1:1:501))&#x27;;</span><br><span class="line">  mag = abs(H);</span><br><span class="line">   db = 20*log10((mag+eps)/max(mag));</span><br><span class="line">  pha = angle(H);</span><br><span class="line">%  pha = unwrap(angle(H));</span><br><span class="line">  grd = grpdelay(b,a,w);</span><br><span class="line">%  grd = diff(pha);</span><br><span class="line">%  grd = [grd(1) grd];</span><br><span class="line">%  grd = [0 grd(1:1:500); grd; grd(2:1:501) 0];</span><br><span class="line">%  grd = median(grd)*500/pi;</span><br></pre></td></tr></table></figure>
<h2 id="å‡½æ•°IDEAL-LP-Må®šä¹‰ï¼š"><a href="#å‡½æ•°IDEAL-LP-Må®šä¹‰ï¼š" class="headerlink" title="å‡½æ•°IDEAL_LP.Må®šä¹‰ï¼š"></a>å‡½æ•°IDEAL_LP.Må®šä¹‰ï¼š</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function hd = ideal_lp(wc,M);</span><br><span class="line">% Ideal LowPass filter computation</span><br><span class="line">% --------------------------------</span><br><span class="line">% [hd] = ideal_lp(wc,M)</span><br><span class="line">%  hd = ideal impulse response between 0 to M-1</span><br><span class="line">%  wc = cutoff frequency in radians</span><br><span class="line">%   M = length of the ideal filter</span><br><span class="line">%</span><br><span class="line">alpha = (M-1)/2;</span><br><span class="line">n = [0:1:(M-1)];</span><br><span class="line">m = n - alpha + eps;</span><br><span class="line">hd = sin(wc*m) ./ (pi*m);</span><br></pre></td></tr></table></figure>



<blockquote>
<p>è¯¥æ–‡ä¸ºç¬”è€…è¯¾ç¨‹è®¾è®¡è®ºæ–‡ï¼Œå¦‚æœ‰ä¸å¦¥ï¼Œè¿˜è¯·æŒ‡å‡º</p>
</blockquote>
]]></content>
      <categories>
        <category>è¯¾ç¨‹è®¾è®¡</category>
      </categories>
  </entry>
  <entry>
    <title>Luaè¿ç»­æ•™ç¨‹ä¹‹Luaèµ„æºç®¡ç†</title>
    <url>/45984.html</url>
    <content><![CDATA[<p>å‡½æ•°dirä¼šéå†ç›®å½•å¹¶è¿”å›ä¸€å¼ åŒ…å«æŒ‡å®šç›®å½•ä¸‹æ‰€æœ‰å†…å®¹çš„è¡¨ã€‚è¿™é‡Œå¯¹diræ–°çš„å®ç°ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ¯æ¬¡è°ƒç”¨è¿™ä¸ªè¿­ä»£å™¨æ—¶å®ƒéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°å…ƒç´ ã€‚é€šè¿‡è¿™ç§å®ç°ï¼Œæˆ‘ä»¬å°±èƒ½ä½¿ç”¨å¦‚ä¸‹çš„å¾ªç¯æ¥éå†ç›®å½•ï¼š</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> fname <span class="keyword">in</span> <span class="built_in">dir</span>.<span class="built_in">open</span>(<span class="string">&quot;.&quot;</span>)do</span><br><span class="line">	<span class="built_in">print</span>(fname)</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>è¦åœ¨Cè¯­è¨€ä¸­éå†ä¸€ä¸ªç›®å½•ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°DIRç»“æ„ä½“ã€‚DIRçš„å®ä¾‹ç”±opendiråˆ›å»ºï¼Œä¸”å¿…é¡»é€šè¿‡è°ƒç”¨closediræ˜¾ç¤ºåœ°é‡Šæ”¾ã€‚åœ¨ä¹‹å‰çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬å°†DIRçš„ç¤ºä¾‹å½“åšå±€éƒ¨å˜é‡ï¼Œå¹¶åœ¨æˆ–è·å–æœ€åä¸€ä¸ªæ–‡ä»¶ååé‡Šæ”¾äº†å®ƒã€‚è€Œåœ¨æ–°çš„å®ç°ä¸­ï¼Œç”±äºå¿…é¡»é€šè¿‡å¤šæ¬¡è°ƒç”¨æ¥æŸ¥è¯¢è¯¥å€¼ï¼Œå› æ­¤ä¸èƒ½æŠŠDIRçš„å®ä¾‹ä¿å­˜åˆ°å±€éƒ¨å˜é‡ä¸­ã€‚æ­¤å¤–ï¼Œä¸èƒ½åœ¨è·å–æœ€åä¸€ä¸ªæ–‡ä»¶ååå†é‡Šæ”¾DIRçš„ç¤ºä¾‹ï¼Œå› ä¸ºå¦‚æœç¨‹åºä»å¾ªç¯ä¸­è·³å‡ºï¼Œé‚£ä¹ˆè¿­ä»£å™¨æ°¸è¿œä¸ä¼šè·å–æœ€åä¸€ä¸ªæ–‡ä»¶åã€‚å› æ­¤ï¼Œä¸ºäº†ç¡®ä¿DIRçš„å®ä¾‹èƒ½è¢«æ­£ç¡®é‡Šæ”¾ï¼Œéœ€è¦æŠŠè¯¥å®ä¾‹çš„åœ°å€å­˜å…¥ä¸€ä¸ªç”¨æˆ·æ•°æ®ä¸­ï¼Œå¹¶ä¸”ç”¨è¿™ä¸ªç”¨æˆ·æ•°æ®çš„è¿œæ–¹__gcæ¥é‡Šæ”¾è¯¥ç»“æ„ä½“ã€‚<br>å°½ç®¡ç”¨æˆ·æ•°æ®åœ¨æˆ‘ä»¬å®ç°ä¸­å¤„äºæ ¸å¿ƒåœ°ä½ï¼Œä½†è¿™ä¸ªè¡¨ç¤ºç›®å½•æ•°æ®å¹¶ä¸ä¸€å®šéœ€è¦å¯¹Luaå¯è§ã€‚å‡½æ•°dir.openä¼šè¿”å›ä¸€ä¸ªLuaå¯è§çš„è¿­ä»£å‡½æ•°ï¼Œè€Œç›®å½•å¯ä»¥ä½œä¸ºè¿­ä»£å‡½æ•°çš„ä¸€ä¸ªä¸Šå€¼ã€‚è¿™æ ·ï¼Œè¿­ä»£å‡½æ•°èƒ½ç›´æ¥è®¿é—®è¿™ä¸ªç»“æ„ä½“ï¼Œè€ŒLuaä»£ç åˆ™ä¸èƒ½ã€‚<br>æ€»ä¹‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸‰ä¸ªCè¯­è¨€å‡½æ•°ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å‡½æ•°dir.openï¼Œè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼ŒLuaè°ƒç”¨è¯¥å‡½æ•°æ¥åˆ›å»ºè¿­ä»£å™¨ï¼›å®ƒå¿…é¡»æ‰“å¼€ä¸€ä¸ªDIRç»“æ„ä½“ï¼Œå¹¶å°†è¿™ä¸ªç»“æ„ä½“ä½œä¸ºä¸Šå€¼åˆ›å»ºä¸€ä¸ªè¿­ä»£å‡½æ•°çš„é—­åŒ…ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦è¿­ä»£å‡½æ•°ã€‚æœ€åï¼Œæˆ‘ä»¬éœ€è¦__gcå…ƒæ–¹æ³•ï¼Œè¯¥å…ƒæ–¹æ³•ç”¨äºé‡Šæ”¾DIRç»“æ„ä½“ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªé¢å¤–çš„å‡½æ•°è¿›è¡Œä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œä¾‹å¦‚ä¸ºç›®å½•åˆ›å»ºå’Œåˆå§‹åŒ–å…ƒè¡¨ã€‚<br>å…ˆæ¥çœ‹å‡½æ•°dir.openï¼Œå‚åŠ ä¸‹é¢ç¤ºä¾‹</p>
<blockquote>
<p>ç¤ºä¾‹ å·¥å‚å‡½æ•°dir.open</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;dirent.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;lua.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;luaxlib.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*è¿­ä»£å‡½æ•°çš„å‰å‘å£°æ˜*/</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">dir_iter</span><span class="params">(lua_State *L)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">l_dir</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *path = luaL_checkstring(L,<span class="number">1</span>);</span><br><span class="line">	<span class="comment">/*åˆ›å»ºä¸€ä¸ªä¿å­˜DIRç»“æ„ä½“çš„ç”¨æˆ·æ•°æ®*/</span></span><br><span class="line">	DIR **d = (DIR **)lua_newuserdata(L,<span class="keyword">sizeof</span>(DIR *));</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* é¢„å…ˆåˆå§‹åŒ–*/</span></span><br><span class="line">	*d = <span class="literal">NULL</span>ï¼›</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*è®¾ç½®å…ƒè¡¨*/</span></span><br><span class="line">	luaL_getmetatable(L,<span class="string">&quot;LuaBook.dir&quot;</span>);</span><br><span class="line">	lua_setmetatable(L,<span class="number">-2</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*å°è¯•æ‰“å¼€æŒ‡å®šç›®å½•*/</span></span><br><span class="line">	*d = opendir(path);</span><br><span class="line">	<span class="keyword">if</span> (*d == <span class="literal">NULL</span>)  <span class="comment">/* æ‰“å¼€ç›®å½•å¤±è´¥*/</span></span><br><span class="line">		luaL_error(L, <span class="string">&quot;cannot open %s:%s&quot;</span>,path,strerror(errno));</span><br><span class="line">	<span class="comment">/*åˆ›å»ºå¹¶è¿”å›è¿­ä»£å‡½æ•°ï¼›è¯¥å‡½æ•°å”¯ä¸€çš„ä¸Šå€¼ï¼Œå³ä»£è¡¨ç›®å½•çš„ç”¨æˆ·æ•°æ®æœ¬èº«å°±ä½äºæ ˆé¡¶*/</span></span><br><span class="line">	lua_pushcclosure(L,dir_iter,<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»åœ¨æ‰“å¼€ç›®å½•å‰å…ˆåˆ›å»ºç”¨æˆ·æ•°æ®ã€‚å¦‚æœå…ˆæ‰“å¼€ç›®å½•å†è°ƒç”¨lua_newuserdataï¼Œé‚£ä¹ˆä¼šå¼•å‘å†…å­˜é”™è¯¯ï¼Œè¯¥å‡½æ•°ä¼šä¸¢å¤±å¹¶æ³„éœ²DIRç»“æ„ä½“ã€‚å¦‚æœé¡ºåºæ­£ç¡®ï¼ŒDIRç»“æ„ä½“ä¸€æ—¦è¢«åˆ›å»ºå°±ä¼šç«‹å³ä¸ç”¨æˆ·æ•°æ®ç›¸å…³è”ï¼›æ— è®ºæ­¤åå‘ç”Ÿä»€ä¹ˆï¼Œå…ƒæ–¹æ³•__gcæœ€ç»ˆéƒ½ä¼šå°†å…¶é‡Šæ”¾ã€‚<br>å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ç”¨æˆ·æ•°æ®çš„ä¸€è‡´æ€§ã€‚ä¸€æ—¦è®¾ç½®äº†å…ƒè¡¨ï¼Œå…ƒæ–¹æ³•__gcå°±ä¸€å®šä¼šè¢«è°ƒç”¨ã€‚å› æ­¤ï¼Œåœ¨è®¾ç½®å…ƒè¡¨å‰ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨NULLé¢„å…ˆåˆå§‹åŒ–ç”¨æˆ·æ•°æ®ï¼Œä»¥ç¡®ä¿ç”¨æˆ·æ•°æ®å…·æœ‰å®šä¹‰æ˜ç¡®çš„å€¼ã€‚<br>ä¸‹ä¸€ä¸ªå‡½æ•°dir_iterä¹Ÿå°±æ˜¯è¿­ä»£å™¨æœ¬èº«ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ diråº“ä¸­çš„å…¶ä»–å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">dir_iter</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	DIR *d = *(DIR **)lua_touserdata(L, lua_upvalueindex(<span class="number">1</span>));</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">dirent</span> *<span class="title">entry</span> =</span> readdir(d);</span><br><span class="line">	<span class="keyword">if</span> (entry != <span class="literal">NULL</span>)&#123;</span><br><span class="line">		lua_pushstring(L,entry -&gt;d_name);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">/* éå†å®Œæˆ*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">dir_gc</span><span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">	DIR *d = *(DIR **)lua_touserdata(L,<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">if</span>(d) closedir(d);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">dirlib</span> [] =</span> &#123;</span><br><span class="line">	&#123;<span class="string">&quot;open&quot;</span>,l_dir&#125;,</span><br><span class="line">	(<span class="literal">NULL</span>,<span class="literal">NULL</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">luaopen_dir</span> <span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	luaL_newmetatable(L,<span class="string">&quot;luaBook.dir&quot;</span>);</span><br><span class="line">	<span class="comment">/*è®¾ç½®__gcå­—æ®µ*/</span></span><br><span class="line">	lua_pushcfunction(L,dir_gc);</span><br><span class="line">	lua_setfield(L,<span class="number">-2</span>,<span class="string">&quot;__gc&quot;</span>);</span><br><span class="line">	<span class="comment">/*åˆ›å»ºåº“*/</span></span><br><span class="line">	luaL_newlib(L,dirlib);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç å¾ˆç®€å•ï¼Œå®ƒä»ä¸Šå€¼ä¸­è·å–DIRç»“æ„ä½“çš„åœ°å€ï¼Œç„¶åè°ƒç”¨readdirè¯»å–ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚<br>å‡½æ•°dir_gcå°±æ˜¯å…ƒæ–¹æ³•__gcï¼Œè¯¥å…ƒæ–¹æ³•ç”¨äºå…³é—­ç›®å½•ã€‚æ­£å¦‚ä¹‹å‰æåˆ°çš„ï¼Œè¯¥å…ƒæ–¹æ³•å¿…é¡»åšå¥½é˜²å¾¡æªæ–½ï¼šå¦‚æœåˆå§‹åŒ–å‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆç›®å½•å¯èƒ½ä¼šæ˜¯NULLã€‚<br>æ•´ä¸ªç¤ºä¾‹ä¸­è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚dir_gcä¼¼ä¹åº”è¯¥æ£€æŸ¥å…¶å‚æ•°æ˜¯å¦ä¸ºä¸€ä¸ªç›®å½•ä»¥åŠç›®å½•æ˜¯å¦å·²ç»è¢«å…³é—­ï¼›å¦åˆ™ï¼Œæ¶æ„ç”¨æˆ·å¯èƒ½ä¼šç”¨å…¶ä»–ç±»å‹çš„ç”¨æˆ·æ•°æ®æ¥è°ƒç”¨dir_gcæˆ–è€…å…³é—­ä¸€ä¸ªç›®å½•ä¸¤æ¬¡ï¼Œè¿™æ ·ä¼šé€ æˆç¾éš¾æ€§åæœã€‚ç„¶è€Œï¼ŒLuaç¨‹åºæ—¶æ— æ³•è®¿é—®è¿™ä¸ªå‡½æ•°çš„ï¼šè¯¥å‡½æ•°è¢«ä¿å­˜åœ¨ç›®å½•çš„å…ƒè¡¨ä¸­ï¼Œè€Œç”¨æˆ·æ•°æ®åˆè¢«ä¿å­˜ä¸ºè¿­ä»£å‡½æ•°çš„ä¸Šå€¼ï¼Œå› æ­¤Luaä»£ç æ— æ³•è®¿é—®è¿™äº›ç›®å½•ã€‚</p>
<h2 id="XMLè§£æå™¨"><a href="#XMLè§£æå™¨" class="headerlink" title="XMLè§£æå™¨"></a>XMLè§£æå™¨</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ç§ä½¿ç”¨Luaè¯­è¨€ç¼–å†™çš„Expatç»‘å®šçš„ç®€å•å®ç°ï¼Œç§°ä¸ºlxpã€‚Expatæ˜¯ä¸€ä¸ªç”¨Cè¯­è¨€ç¼–å†™çš„å¼€æºXML1.0è§£æå™¨ï¼Œå®ç°äº†SAXï¼Œå³<em>Simple API for XML</em>ã€‚SAXæ˜¯ä¸€å¥—åŸºäºäº‹ä»¶çš„APIï¼Œè¿™å°±æ„å‘³ç€ä¸€ä¸ªSAXè§£æå™¨åœ¨è¯»å–XMLæ–‡æ¡£æ—¶ä¼šè¾¹è¯»å–è¾¹é€šè¿‡å›è°ƒå‡½æ•°å‘åº”ç”¨ä¸ŠæŠ¥è¯»å–åˆ°çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®©Expatè§£æå½¢å¦‚â€<tag cap="5">hi</tag>â€œçš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆExpatä¼šç”Ÿæˆä¸‰ä¸ªäº‹ä»¶ï¼šå½“è¯»å–åˆ°å­ä¸²â€<tag cap ="5">â€œæ—¶ï¼Œç”Ÿæˆå¼€å§‹å…ƒç´ äº‹ä»¶ï¼›å½“è¯»å–åˆ°â€hiâ€æ—¶ï¼Œç”Ÿæˆæ–‡æœ¬äº‹ä»¶ï¼Œä¹Ÿç§°ä¸ºå­—ç¬¦æ•°æ®äº‹ä»¶ï¼›å½“è¯»å–åˆ°â€</tag>â€œæ—¶ï¼Œç”Ÿæˆç»“æŸå…ƒç´ äº‹ä»¶ã€‚æ¯ä¸ªäº‹ä»¶éƒ½ä¼šè°ƒç”¨åº”ç”¨ä¸­ç›¸åº”çš„å›è°ƒå¤„ç†å™¨ã€‚<br>åœ¨æ­¤æˆ‘ä»¬ä¸ä¼šä»‹ç»æ•´ä¸ªExpatåº“ï¼Œåªå…³æ³¨äºé‚£äº›ç”¨äºæ¼”ç¤ºä¸Luaäº¤äº’çš„æ–°æŠ€æœ¯éƒ¨åˆ†ã€‚è™½ç„¶Expatå¯ä»¥å¤„ç†å¾ˆå¤šä¸åŒçš„äº‹ä»¶ï¼Œä½†æˆ‘ä»¬åªè€ƒè™‘å‰é¢ç¤ºä¾‹ä¸­æ‰€æåˆ°çš„ä¸‰ä¸ªäº‹ä»¶ï¼ˆå¼€å§‹å…ƒç´ ã€ç»“æŸå…ƒç´ å’Œæ–‡æœ¬äº‹ä»¶ï¼‰ã€‚<br>æœ¬ä¾‹ä¸­ç”¨åˆ°çš„Expat APIå¾ˆå°‘ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç”¨äºåˆ›å»ºå’Œé”€æ¯Expatè§£æå™¨çš„å‡½æ•°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">XML_Parser <span class="title function_">XML_ParserCreate</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *encoding)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">XML_PaserFree</span><span class="params">(XML_Parser p)</span>;</span><br></pre></td></tr></table></figure>
<p>å‚æ•°encodingæ˜¯å¯é€‰çš„ï¼Œæœ¬ä¾‹ä¸­å°†ä½¿ç”¨NULLã€‚<br>å½“è§£æå™¨åˆ›å»ºå®Œæˆåï¼Œå¿…é¡»æ³¨å†Œå›è°ƒå¤„ç†å™¨ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">XML_SetElementHandler</span><span class="params">(SML_Parser p,XML_StartElementHandler start,XML_EndElementHandler end)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">XML_SetCharacterDataHandler</span><span class="params">(XML_Parser p, XML_CharacterDataHandler hndl)</span>;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå‡½æ•°ä¸ºå¼€å§‹å…ƒç´ å’Œç»“æŸå…ƒç´ äº‹ä»¶æ³¨å†Œäº†å¤„ç†å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‡½æ•°ä¸ºæ–‡æœ¬ï¼ˆXMLæœ¯è¯­ä¸­çš„å­—ç¬¦æ•°æ®character data)äº‹ä»¶æ³¨å†Œäº†å¤„ç†å‡½æ•°ã€‚<br>æ‰€æœ‰å›è°ƒå¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ç”¨æˆ·æ•°æ®ï¼Œå¼€å§‹å…ƒç´ äº‹ä»¶çš„å¤„ç†å‡½æ•°è¿˜èƒ½æ¥æ”¶æ ‡ç­¾åï¼ˆtag nameï¼‰åŠå…¶å±æ€§ï¼ˆattribute):</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="title function_">void</span><span class="params">(*XML_StartElementHandler)</span><span class="params">(<span class="type">void</span> *uData, <span class="type">const</span> <span class="type">char</span> *name, <span class="type">const</span> <span class="type">char</span> **atts)</span>;</span><br></pre></td></tr></table></figure>
<p>å±æ€§æ˜¯ä¸€ä¸ªä»¥NULLç»“å°¾çš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œå…¶ä¸­æ¯å¯¹è¿ç»­çš„å­—ç¬¦ä¸²ä¿å­˜ä¸€ä¸ªå±æ€§çš„åç§°å’Œå€¼ã€‚ç»“æŸå…ƒç´ äº‹ä»¶å¤„ç†å‡½æ•°é™¤äº†ç”¨æˆ·æ•°æ®å¤–è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼Œå³æ ‡ç­¾åï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="title function_">void</span><span class="params">(XML_EndElementHandler)</span><span class="params">(<span class="type">void</span> *uData, <span class="type">const</span> <span class="type">char</span> *name)</span>;</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œæ–‡æœ¬äº‹ä»¶å¤„ç†å‡½æ•°åªæ¥æ”¶æ–‡æœ¬ä½œä¸ºé¢å¤–å‚æ•°ï¼Œè¯¥æ–‡æœ¬å­—ç¬¦ä¸²ä¸æ˜¯ä»¥NULLç»“å°¾çš„ï¼Œå®ƒæœ‰ä¸€ä¸ªæ˜¾ç¤ºçš„é•¿åº¦ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">typedef void(*XML_CharacterDataHandler)(void *uData, const char *s, int len);</span><br><span class="line">```c</span><br><span class="line">ä¸ºäº†å°†æ–‡æœ¬è¾“å…¥Expatï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‡½æ•°ï¼š</span><br></pre></td></tr></table></figure>
<p>int XML_Parser(XML_Parser p, const char *s, int len, int isLast);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Expaté€šè¿‡è¿ç»­è°ƒç”¨å‡½æ•°XML_Parseä¸€æ®µä¸€æ®µåœ°æ¥æ”¶è¦è§£æçš„æ–‡æ¡£ã€‚XML_Parseçš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œå¸ƒå°”ç±»å‹çš„isLastï¼Œå‘ŠçŸ¥Expatè¯¥ç‰‡æ®µæ˜¯å¦æ˜¯æ–‡æ¡£çš„æœ€åä¸€ä¸ªç‰‡æ®µã€‚å¦‚æœæ£€æµ‹åˆ°è§£æé”™è¯¯ï¼ŒXML_è¿”å›é›¶ã€‚</span><br><span class="line">Expatä¸­è¦ç”¨åˆ°çš„æœ€åä¸€ä¸ªå‡½æ•°å…è®¸æˆ‘ä»¬è®¾ç½®ä¼ é€’ç»™äº‹ä»¶å¤„ç†å‡½æ•°çš„ç”¨æˆ·æ•°æ®ï¼š</span><br><span class="line">```c</span><br><span class="line">void XML_SetUserData(XML_Parser p, void *uData);</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•åœ¨Luaä¸­ä½¿ç”¨è¿™ä¸ªåº“ã€‚ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä¸€ç§ç›´æ¥çš„æ–¹æ³•ï¼Œå³ç®€å•åœ°æŠŠæ‰€æœ‰å‡½æ•°å¯¼å‡ºç»™Luaã€‚å¦ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•æ˜¯è®©è¿™äº›å‡½æ•°é€‚é…Luaã€‚ä¾‹å¦‚ï¼Œå› ä¸ºLuaè¯­è¨€ä¸æ˜¯å¼ºç±»å‹çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦ä¸ºæ¯ä¸€ç§å›è°ƒå‡½æ•°è®¾ç½®ä¸åŒçš„å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ï¼Œç”šè‡³å…å»æ‰€æœ‰æ³¨å†Œå›è°ƒå‡½æ•°çš„å‡½æ•°ã€‚æˆ‘ä»¬è¦åšçš„åªæ˜¯åˆ›å»ºè§£æå™¨æ—¶æä¾›ä¸€ä¸ªåŒ…å«æ‰€æœ‰äº‹ä»¶å¤„ç†å‡½æ•°çš„å›è°ƒå‡½æ•°è¡¨ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªé”®å€¼å¯¹æ˜¯ä¸ç›¸åº”æ—¶é—´å¯¹åº”çš„é”®å’Œäº‹ä»¶å¤„ç†å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦æ‰“å°å‡ºä¸€ä¸ªæ–‡æ¡£çš„å¸ƒå±€ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å›è°ƒå‡½æ•°è¡¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">local count = <span class="number">0</span></span><br><span class="line">callbacks = &#123;</span><br><span class="line">	StartElement = function(parser, tagname)</span><br><span class="line">		io.write(<span class="string">&quot;+ &quot;</span>, string.rep(<span class="string">&quot; &quot;</span>,count),tagname,<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">		count = count + <span class="number">1</span></span><br><span class="line">	end,</span><br><span class="line"></span><br><span class="line">	EndElement = function (parser,tagname)</span><br><span class="line">		count = count - <span class="number">1</span></span><br><span class="line">		io.write(<span class="string">&quot;- &quot;</span>,string.rep(<span class="string">&quot; &quot;</span>,count),tagname,<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">	end,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥å†…å®¹â€<to><yes/></to>â€œæ—¶ï¼Œè¿™äº›äº‹ä»¶å¤„ç†å‡½æ•°ä¼šæ‰“å°å‡ºå¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">+ to</span><br><span class="line">+   yes</span><br><span class="line">-   yes</span><br><span class="line">- to</span><br></pre></td></tr></table></figure>
<p>æœ‰äº†è¿™ä¸ªAPIï¼Œæˆ‘ä»¬å°±ä¸å†éœ€è¦é‚£äº›æ“ä½œå›è°ƒå‡½æ•°çš„å‡½æ•°äº†ï¼Œå¯ä»¥ç›´æ¥åœ¨å›è°ƒå‡½æ•°è¡¨ä¸­æ“ä½œå®ƒä»¬ã€‚å› æ­¤ï¼Œæ•´ä¸ªAPIåªéœ€ç”¨åˆ°ä¸‰ä¸ªå‡½æ•°ï¼šä¸€ä¸ªç”¨äºåˆ›å»ºè§£æå™¨ï¼Œä¸€ä¸ªç”¨äºè§£ææ–‡æœ¬ï¼Œä¸€ä¸ªç”¨äºå…³é—­è§£æå™¨ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å°†åä¸¤ä¸ªå‡½æ•°å®ç°ä¸ºè§£æå™¨å¯¹è±¡çš„æ–¹æ³•ã€‚è¯¥APIçš„å…¸å‹ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">local lxp = require <span class="string">&quot;lxp&quot;</span></span><br><span class="line">p = lxp.new(callbacks)</span><br><span class="line"><span class="keyword">for</span> l in io.lines() <span class="keyword">do</span></span><br><span class="line">	assert(p:parse(l))</span><br><span class="line">	assert(p:parse(<span class="string">&quot;\n&quot;</span>))</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">assert(p:parse())</span><br><span class="line">p:close()</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°å®ƒã€‚é¦–å…ˆè¦å†³å®šå¦‚ä½•åœ¨Luaè¯­è¨€ä¸­è¡¨ç¤ºä¸€ä¸ªè§£æå™¨ã€‚æˆ‘ä»¬ä¼šå¾ˆè‡ªç„¶åœ°æƒ³åˆ°ä½¿ç”¨ç”¨æˆ·æ•°æ®æ¥åŒ…å«Cè¯­è¨€ç»“æ„ä½“ï¼Œä½†æ˜¯éœ€è¦åœ¨ç”¨æˆ·æ•°æ®ä¸­æ”¾äº›ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿæˆ‘ä»¬è‡³å°‘éœ€è¦å®é™…çš„Expatè§£æå™¨æ¥å›è°ƒå‡½æ•°è¡¨ã€‚ç”±äºè¿™äº›è§£æå™¨å¯¹è±¡éƒ½æ˜¯Expatå›è°ƒå‡½æ•°æ¥æ”¶çš„ï¼Œå¹¶ä¸”å›è°ƒå‡½æ•°éœ€è¦è°ƒç”¨Luaè¯­è¨€ï¼Œå› æ­¤è¿˜éœ€è¦ä¿å­˜LuaçŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨Cè¯­è¨€ç»“æ„ä½“ä¸­ä¿å­˜Expatè§£æå™¨å’ŒLuaçŠ¶æ€ï¼›è€Œå¯¹äºä½œä¸ºLuaè¯­è¨€å€¼çš„å›è°ƒå‡½æ•°è¡¨ï¼Œä¸€ä¸ªé€‰æ‹©æ˜¯åœ¨æ³¨å†Œè¡¨ä¸­ä¸ºå…¶åˆ›å»ºå¼•ç”¨å¹¶ä¿å­˜è¯¥å¼•ç”¨ï¼Œå¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨ç”¨æˆ·å€¼ã€‚æ¯ä¸ªç”¨æˆ·æ•°æ®éƒ½å¯ä»¥æœ‰ä¸€ä¸ªä¸å…¶ç›´æ¥å…³è”çš„å”¯ä¸€çš„Luaè¯­è¨€å€¼ï¼Œè¿™ä¸ªå€¼å°±è¢«å«åšç”¨æˆ·å€¼ã€‚è¦æ˜¯ä½¿ç”¨è¿™ç§æ–¹å¼çš„è¯ï¼Œè§£æå™¨å¯¹è±¡çš„å®šä¹‰å½¢å¦‚ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;expat.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;lua.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;luaxlib.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">lxp_userdata</span>&#123;</span></span><br><span class="line">	XML_Parser parser;</span><br><span class="line">	lua_State *L;</span><br><span class="line">&#125;lxp_userdata;</span><br></pre></td></tr></table></figure>
<p>ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºè§£æå™¨å¯¹è±¡çš„å‡½æ•°lxp_make_parser,å‚è€ƒä¸‹ä¾‹</p>
<blockquote>
<p>ç¤ºä¾‹ åˆ›å»ºXMLè§£æå™¨å¯¹è±¡çš„å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å›è°ƒå‡½æ•°çš„å‰å‘å£°æ˜ */</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">f_StartElemnt</span> <span class="params">(<span class="type">void</span> *ud, <span class="type">const</span> <span class="type">char</span> *name, <span class="type">const</span> <span class="type">char</span> **atts)</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">f_CharData</span><span class="params">(<span class="type">void</span> *ud, <span class="type">const</span> <span class="type">char</span> *s,<span class="type">int</span> len)</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">lxp_make_parser</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	XML_Parser p;</span><br><span class="line">	<span class="comment">/* åˆ›å»ºè§£æå™¨å¯¹è±¡ */</span></span><br><span class="line">	lxp_userdata *xpu = (lxp_userdata *)lua_newuserdata(L, <span class="keyword">sizeof</span>(lxp_userdata));</span><br><span class="line">	<span class="comment">/* é¢„å…ˆåˆå§‹åŒ–ä»¥é˜²æ­¢é”™è¯¯å‘ç”Ÿ */</span></span><br><span class="line">	xpu-&gt;parser = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* è®¾ç½®å…ƒè¡¨*/</span></span><br><span class="line">	luaL_getmetatable(L, <span class="string">&quot;Expat&quot;</span>);</span><br><span class="line">	lua_setmetatable(L,<span class="number">-2</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* åˆ›å»ºExpatè§£æå™¨ */</span></span><br><span class="line">	p = xpu-&gt; parser = XML_ParserCreate(<span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span>(!p)</span><br><span class="line">		luaL_error(L,<span class="string">&quot;XML_ParserCreate failed&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* æ£€æŸ¥å¹¶ä¿å­˜å›è°ƒå‡½æ•°è¡¨*/</span></span><br><span class="line">	luaL_checktype(L,<span class="number">1</span>,LUA_TTABLE );</span><br><span class="line">	lua_pushvalue(L,<span class="number">1</span>); <span class="comment">/* å›è°ƒå‡½æ•°è¡¨å…¥æ ˆ */</span></span><br><span class="line">	lua_setuservalue(L,<span class="number">-2</span>); <span class="comment">/* å°†å›è°ƒå‡½æ•°è¡¨è®¾ç½®ä¸ºç”¨æˆ·å€¼*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/* è®¾ç½®Expatè§£æå™¨ */</span></span><br><span class="line">	XML_SetUserData(p,xpu);</span><br><span class="line"></span><br><span class="line">	XML_SetElementHandler(p,f_StartElemnt, f_EndElement);</span><br><span class="line">	XML_SetCharacterDataHandler(p,f_CharData);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°æœ‰å››ä¸ªä¸»è¦æ­¥éª¤ã€‚</p>
<ul>
<li>ç¬¬ä¸€æ­¥éµå¾ªå¸¸è§çš„æ¨¡ å¼ï¼šå…ˆåˆ›å»ºç”¨æˆ·æ•°æ®ï¼Œç„¶åä½¿ç”¨ä¸€è‡´æ€§çš„å€¼é¢„å…ˆåˆå§‹åŒ–ç”¨æˆ·æ•°æ®ï¼Œæœ€åè®¾ç½®ç”¨æˆ·æ•°æ®çš„å…ƒè¡¨ï¼ˆå…¶ä¸­çš„é¢„å…ˆåˆå§‹åŒ–ç¡®ä¿å¦‚æœåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œè§£æå™¨èƒ½å¤Ÿä»¥ä¸€è‡´æ€§çš„çŠ¶æ€å¤„ç†ç”¨æˆ·æ•°æ®ï¼‰ã€‚</li>
<li>ç¬¬äºŒæ­¥ä¸­ï¼Œè¯¥å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªExpatè§£æå™¨ï¼Œå°†å…¶å­˜å‚¨åˆ°ç”¨æˆ·æ•°æ®ä¸­ï¼Œå¹¶æ£€æŸ¥äº†é”™è¯¯ã€‚</li>
<li>ç¬¬ä¸‰æ­¥ä¿è¯è¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè¡¨ï¼ˆå›è°ƒå‡½æ•°è¡¨ï¼‰ï¼Œå¹¶å°†å…¶ä½œä¸ºç”¨æˆ·å€¼èµ‹ç»™äº†æ–°çš„ç”¨æˆ·æ•°æ®ã€‚</li>
<li>æœ€åä¸€æ­¥åˆå§‹åŒ–Expatè§£æå™¨ï¼Œå°†ç”¨æˆ·æ•°æ®è®¾ä¸ºä¼ é€’ç»™å›è°ƒå‡½æ•°çš„å¯¹è±¡ï¼Œå¹¶è®¾ç½®äº†å›è°ƒå‡½æ•°ã€‚è¯·æ³¨æ„ï¼Œè¿™äº›å›è°ƒå‡½æ•°å¯¹äºæ‰€æœ‰çš„è§£æå™¨æ¥è¯´éƒ½æ˜¯ç›¸åŒçš„ï¼›æ¯•ç«Ÿï¼Œç”¨æˆ·æ— æ³•åœ¨Cè¯­è¨€ä¸­åŠ¨æ€åœ°åˆ›å»ºæ–°å‡½æ•°ã€‚ä¸åŒç‚¹åœ¨äºï¼Œè¿™äº›å›ºå®šçš„Cè¯­è¨€å‡½æ•°ä¼šé€šè¿‡å›è°ƒå‡½æ•°è¡¨æ¥å†³å®šæ¯æ¬¡åº”è¯¥è°ƒç”¨å“ªäº›Luaå‡½æ•°ã€‚<br>æ¥ä¸‹æ¥æ˜¯è§£æå‡½æ•°lxp_parseï¼Œè¯¥å‡½æ•°ç”¨äºè§£æXMLæ•°æ®ç‰‡æ®µã€‚<blockquote>
<p>ç¤ºä¾‹ è§£æXMLç‰‡æ®µçš„å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">lxp_parse</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="type">int</span> status;</span><br><span class="line">	<span class="type">size_t</span> len;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *s;</span><br><span class="line">	lxp_userdata *xpu;</span><br><span class="line">	<span class="comment">/* è·å–å¹¶æ£€æŸ¥ç¬¬ä¸€ä¸ªå‚æ•° */</span></span><br><span class="line">	xpu = (lxp_userdata *)luaL_checkudata(L,<span class="number">1</span>,<span class="string">&quot;Expat&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* æ£€æŸ¥è§£æå™¨æ˜¯å¦å·²ç»è¢«å…³é—­äº†*/</span></span><br><span class="line">	luaL_argcheck(L,xpu-&gt;parser != <span class="literal">NULL</span>, <span class="number">1</span>,  <span class="string">&quot;parser is closed&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* è·å–ç¬¬äºŒä¸ªå‚æ•°*/</span></span><br><span class="line">	s = luaL_optlstring(L,<span class="number">2</span>,<span class="literal">NULL</span>, &amp;len);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* å°†å›è°ƒå‡½æ•°è¡¨æ”¾åœ¨æ ˆç´¢å¼•ä¸º3çš„ä½ç½® */</span></span><br><span class="line">	lua_settop(L,<span class="number">2</span>);</span><br><span class="line">	lua_getuservalue(L,<span class="number">1</span>);</span><br><span class="line">	xpu-&gt;L = L; <span class="comment">/*è®¾ç½®LuaçŠ¶æ€*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*è°ƒç”¨Expatè§£æå­—ç¬¦ä¸²*/</span></span><br><span class="line">	status = XML_Parse(xpu-&gt;parser , s, (<span class="type">int</span>)len , s == <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* è¿”å›é”™è¯¯ç  */</span></span><br><span class="line">	lua_pushboolean(L,status);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå³è§£æå™¨å¯¹è±¡å’Œä¸€ä¸ªå¯é€‰çš„XMLæ•°æ®ã€‚å¦‚æœè°ƒç”¨è¯¥å‡½æ•°æ—¶æœªä¼ å…¥XMLæ•°æ®ï¼Œé‚£ä¹ˆå®ƒè°é€šçŸ¥Expatæ–‡æ¡£å·²ç»“æŸã€‚<br>å½“lxp_parseè°ƒç”¨XML_Parseæ—¶ï¼Œåä¸€ä¸ªå‡½æ•°ä¼šä¸ºæŒ‡å®šæ–‡ä»¶ç‰‡æ®µä¸­æ‰¾åˆ°çš„æ¯ä¸ªç›¸å…³å…ƒç´ è°ƒç”¨å¤„ç†å‡½æ•°ã€‚è¿™äº›å¤„ç†å‡½æ•°éœ€è¦è®¿é—®å›è°ƒå‡½æ•°è¡¨ï¼Œå› æ­¤lxp_parseä¼šå°†è¿™ä¸ªè¡¨æ”¾åˆ°æ ˆç´¢å¼•ä¸º3çš„ä½ç½®ã€‚åœ¨è°ƒç”¨XML_Parseæ—¶è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚ï¼šè¯·æ³¨æ„ï¼Œè¯¥å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°ä¼šå‘Šè¯‰Expatæ–‡æœ¬çš„æŒ‡å®šç‰‡æ®µæ˜¯å¦ä¸ºæœ€åä¸€ä¸ªç‰‡æ®µã€‚å½“ä¸å¸¦å‚æ•°è°ƒç”¨parseæ—¶ï¼Œsæ˜¯NULLï¼Œè¿™æ ·æœ€åä¸€ä¸ªå‚æ•°å°±ä¸ºçœŸã€‚<br>ç°åœ¨æˆ‘ä»¬æŠŠæ³¨æ„åŠ›æ”¾åˆ°å¤„ç†å›è°ƒçš„f_CharDataã€f_StartElementå’Œf_EndElementå‡½æ•°ä¸Šã€‚è¿™ä¸‰ä¸ªå‡½æ•°çš„ä»£ç ç»“æ„ç±»ä¼¼ï¼Œå®ƒä»¬éƒ½ä¼šæ£€æŸ¥å›è°ƒå‡½æ•°è¡¨æ˜¯å¦ä¸ºæŒ‡å®šçš„äº‹æƒ…å®šä¹‰äº†Luaå¤„ç†å‡½æ•°ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å‡†å¤‡å¥½å‚æ•°å¹¶è°ƒç”¨è¿™ä¸ªå¤„ç†å‡½æ•°ã€‚<br>é¦–å…ˆæ¥çœ‹å®åŠ›ä¸­çš„æ¢³ç†å‡½æ•°f_CharData.<blockquote>
<p>ç¤ºä¾‹ å­—ç¬¦æ•°æ®äº‹ä»¶çš„å¤„ç†å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">f_CharData</span><span class="params">(<span class="type">void</span> *ud , <span class="type">const</span> <span class="type">char</span> *s, <span class="type">int</span> len)</span>&#123;</span><br><span class="line">	lxp_userdata *xpu = (lxp_userdata *)ud;</span><br><span class="line">	lua_State *L = xpu -&gt; L;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* ä»å›è°ƒå‡½æ•°è¡¨ä¸­è·å–å¤„ç†å‡½æ•° */</span></span><br><span class="line">	lua_getfield(L,<span class="number">3</span>,<span class="string">&quot;CharacterDara&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (lua_isnil(L,<span class="number">-1</span>)) &#123; <span class="comment">/* æ²¡æœ‰å¤„ç†å‡½æ•°ï¼Ÿ */</span></span><br><span class="line">		lua_pop(L,<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	lua_pushvalue(L,<span class="number">1</span>); <span class="comment">/* è§£æå™¨å‹æ ˆ*/</span></span><br><span class="line">	lua_pushlstring(L,<span class="number">1</span>,len); <span class="comment">/* å‹å…¥å­—ç¬¦æ•°æ® */</span></span><br><span class="line">	lua_call(L,<span class="number">2</span>,<span class="number">0</span>); <span class="comment">/* è°ƒç”¨å¤„ç†å‡½æ•° */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
è¯¥å‡½æ•°çš„ä»£ç å¾ˆç®€å•ã€‚ç”±äºåˆ›å»ºè§£æå™¨æ—¶è°ƒç”¨äº†XML_SetUserDataï¼Œæ‰€ä»¥å¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯lxp_userdataç»“æ„ä½“ã€‚åœ¨è·å–LuaçŠ¶æ€åï¼Œå¤„ç†å‡½æ•°å°±å¯ä»¥è®¿é—®ç”±lxp_parseè®¾ç½®çš„ä½äºæ ˆç´¢å¼•3ä½ç½®çš„å›è°ƒå‡½æ•°è¡¨ï¼Œä»¥åŠä½äºæ ˆç´¢å¼•1ä½ç½®çš„è§£æå™¨ã€‚ç„¶åï¼Œè¯¥å‡½æ•°å°±å¯ä»¥ç”¨è§£æå™¨å’Œå­—ç¬¦æ•°æ®ä½œä¸ºå‚æ•°è°ƒç”¨Luaä¸­å¯¹åº”çš„å¤„ç†å‡½æ•°äº†ã€‚<br>å¤„ç†å‡½æ•°f_EndElementä¸f_CharDataååˆ†ç›¸ä¼¼ï¼Œå‚è§ç¤ºä¾‹<blockquote>
<p>ç¤ºä¾‹ ç»“æŸå…ƒç´ äº‹ä»¶çš„å¤„ç†å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">f_EndElement</span><span class="params">(<span class="type">void</span> *ud, <span class="type">const</span> <span class="type">char</span> *name)</span>&#123;</span><br><span class="line">	lxp_userdata *xpu = (lxp_userdata *)ud;</span><br><span class="line">	lua_State *L = xpu -&gt;L;</span><br><span class="line"></span><br><span class="line">	lua_getfield(L,<span class="number">3</span>,<span class="string">&quot;EndElement&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (lua_isnil(L,<span class="number">-1</span>))&#123; <span class="comment">/*æ²¡æœ‰å¤„ç†å‡½æ•°ï¼Ÿ*/</span></span><br><span class="line">		lua_pop(L,<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	lua_pushvalue(L,<span class="number">1</span>); <span class="comment">/* è§£æå™¨å‹æ ˆ */</span></span><br><span class="line">	lua_pushstring(L,name); <span class="comment">/* å‹å…¥æ ‡ç­¾å */</span></span><br><span class="line">	lua_call(L,<span class="number">2</span>,<span class="number">0</span>); <span class="comment">/* è°ƒç”¨å¤„ç†å‡½æ•° */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
è¯¥å‡½æ•°ä¹Ÿä»¥è§£æå™¨å’Œæ ‡ç­¾åï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä»¥nullç»“å°¾ï¼‰ä½œä¸ºå‚æ•°è°ƒç”¨ç›¸åº”çš„Luaå¤„ç†å‡½æ•°ã€‚<br>ç¤ºä¾‹æ¼”ç¤ºäº†æœ€åä¸€ä¸ªå¤„ç†å‡½æ•°f_StartElement.<blockquote>
<p>ç¤ºä¾‹  å¼€å§‹å…ƒç´ äº‹ä»¶çš„å¤„ç†å‡½æ•°</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">f_StartElemnt</span> <span class="params">(<span class="type">void</span> *ud, <span class="type">const</span> <span class="type">char</span> *name, <span class="type">const</span> <span class="type">char</span> **atts)</span>&#123;</span><br><span class="line">	lxp_userdata *xpu = (lxp_userdata *)ud;</span><br><span class="line">	lua_State *L = xpu-&gt;L;</span><br><span class="line"></span><br><span class="line">	lua_getfield(L,<span class="number">3</span>,<span class="string">&quot;StartElement&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (lua_isnil(L,<span class="number">-1</span>)) &#123; <span class="comment">/* æ²¡æœ‰å¤„ç†å‡½æ•°ï¼Ÿ */</span>&#125;</span><br><span class="line">		lua_pop(L,<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">	lua_pushvalue(L,<span class="number">1</span>); <span class="comment">/* è§£æå™¨å‹æ ˆ */</span></span><br><span class="line">	lua_pushstring(L,name); <span class="comment">/* å‹å…¥æ ‡ç­¾å*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/* åˆ›å»ºå¹¶å¡«å……å±æ€§è¡¨ */</span></span><br><span class="line">	lua_newtable(L);</span><br><span class="line">	<span class="keyword">for</span> (; *atts; atts += <span class="number">2</span>)&#123;</span><br><span class="line">		lua_pushstring(L, *(atts + <span class="number">1</span>));</span><br><span class="line">		lua_Setfield(l,<span class="number">-2</span>,*atts); <span class="comment">/* table[*atts] = *(atts + 1) */</span></span><br><span class="line">	&#125;</span><br><span class="line">	lua_call(L,<span class="number">3</span>,<span class="number">0</span>); <span class="comment">/* è°ƒç”¨å¤„ç†å‡½æ•° */</span></span><br></pre></td></tr></table></figure>
è¯¥å‡½æ•°ä»¥è§£æå™¨ã€æ ‡ç­¾åå’Œä¸€ä¸ªå±æ€§åˆ—è¡¨ä¸ºå‚æ•°ï¼Œè°ƒç”¨äº†Luaå¤„ç†å‡½æ•°ã€‚å¤„ç†å‡½æ•°f_StartElementæ¯”å…¶ä»–çš„å¤„ç†å‡½æ•°ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œå› ä¸ºå®ƒéœ€è¦å°†å±æ€§çš„æ ‡ç­¾åˆ—è¡¨è½¬æ¢ä¸ºLuaè¯­è¨€ã€‚f_StartElementä½¿ç”¨äº†ä¸€ç§éå¸¸è‡ªç„¶çš„è½¬æ¢æ–¹æ³•ï¼Œå³åˆ›å»ºä¸€å¼ åŒ…å«å±æ€§åå’Œå±æ€§å€¼çš„è¡¨ã€‚ä¾‹å¦‚ï¼Œç±»ä¼¼è¿™æ ·çš„å¼€å§‹æ ‡ç­¾ï¼š<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">&lt;to method = <span class="string">&quot;post&quot;</span> proirity = <span class="string">&quot;hight&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
ä¼šäº§ç”Ÿå¦‚ä¸‹çš„å±æ€§è¡¨ï¼š<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">&#123;method = <span class="string">&quot;post&quot;</span>, priority = <span class="string">&quot;hight&quot;</span>&#125;</span><br></pre></td></tr></table></figure>
è§£æå™¨çš„æœ€åä¸€ä¸ªæ–¹æ³•æ˜¯closeï¼Œå‚è§ç¤ºä¾‹<blockquote>
<p>ç¤ºä¾‹ å…³é—­XMLè§£æå™¨çš„æ–¹æ³•</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">lxp_close</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	lxp_userdata *xpu = (lxp_userdata *)luaL_checkudata(L,<span class="number">1</span>,<span class="string">&quot;Expat&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* é‡Šæ”¾Expatè§£æå™¨ */</span></span><br><span class="line">	<span class="keyword">if</span> (xpu-&gt;parser)</span><br><span class="line">		XML_ParserFree(xpu-&gt;parser);</span><br><span class="line">	xpu-&gt;parser = <span class="literal">NULL</span>; <span class="comment">/* é¿å…é‡å¤å…³é—­*/</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
å½“å…³é—­è§£æå™¨æ—¶ï¼Œå¿…é¡»é‡Šæ”¾å…¶èµ„æºï¼Œä¹Ÿå°±æ˜¯Expatç»“æ„ä½“ã€‚è¯·æ³¨æ„ï¼Œç”±äºåœ¨åˆ›å»ºè§£æå™¨æ—¶å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ï¼Œè§£æå™¨å¯èƒ½æ²¡æœ‰è¿™äº›èµ„æºã€‚æ­¤å¤–è¿˜éœ€æ³¨æ„ï¼Œå¦‚ä½•åƒå…³é—­è§£æå™¨ä¸€æ ·ï¼Œåœ¨ä¸€è‡´çš„çŠ¶æ€ä¸­ä¿å­˜è§£æå™¨ï¼Œè¿™æ ·å½“æˆ‘ä»¬è¯•å›¾å†æ¬¡å…³é—­è§£æå™¨æˆ–è€…åƒåœ¾æ”¶é›†å™¨ç»“æŸè§£æå™¨æ—¶æ‰ä¸ä¼šäº§ç”Ÿé—®é¢˜ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå‡½æ•°å½“åšç»ˆç»“å™¨æ¥ä½¿ç”¨ã€‚è¿™æ ·ä¾¿å¯ä»¥ç¡®ä¿ï¼Œå³ä½¿ç¨‹åºå‘˜æ²¡æœ‰å…³é—­è§£æå™¨ï¼Œæ¯ä¸ªè§£æå™¨æœ€ç»ˆä¹Ÿä¼šé‡Šæ”¾å…¶èµ„æºã€‚<br>ä¸‹é¢ç¤ºä¾‹æ˜¯æœ€åä¸€æ­¥ï¼Œå®ƒæ¼”ç¤ºäº†æ‰“å¼€åº“çš„luaopen_lxpã€‚luaopen_lxpå°†å‰é¢æ‰€æœ‰çš„éƒ¨åˆ†ç»„ç»‡åˆ°ä¸€èµ·ã€‚<blockquote>
<p>ç¤ºä¾‹ lxpåº“çš„åˆå§‹åŒ–ä»£ç </p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">lxp_meths</span>[] =</span> &#123;</span><br><span class="line">	&#123;<span class="string">&quot;parse&quot;</span>, lxp_parse&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;close&quot;</span>, lxp_close&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;__gc&quot;</span>,  lxp_close&#125;,</span><br><span class="line">	&#123;<span class="literal">NULL</span>,<span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_Reg</span> <span class="title">lxp_funcs</span>[] =</span> &#123;</span><br><span class="line">	&#123;<span class="string">&quot;new&quot;</span>,lxp_make_parser&#125;ï¼Œ</span><br><span class="line">	&#123;<span class="literal">NULL</span>,<span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">luaopen_lxp</span><span class="params">(lua_State *L)</span>&#123;</span><br><span class="line">	<span class="comment">/*åˆ›å»ºå…ƒè¡¨*/</span></span><br><span class="line">	luaL_newmetatble(L,<span class="string">&quot;Expat&quot;</span>);</span><br><span class="line">	<span class="comment">/* metatable.__index = metatable */</span></span><br><span class="line">	lua_pushvalue(L,<span class="number">-1</span>);</span><br><span class="line">	lua_setfield(L,<span class="number">-2</span>,<span class="string">&quot;__index&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*æ³¨å†Œæ–¹æ³•*/</span></span><br><span class="line">	luaL_setfuncs(L,lxp_meths,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* æ³¨å†Œï¼ˆåªæœ‰lxp.newï¼‰ */</span></span><br><span class="line">	luaL_newlib(L,lxp_funcs);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>é€šä¿¡å·¥ç¨‹äº¤æ¢ä¼ è¾“å®ä¹ æŠ¥å‘Š</title>
    <url>/892cf0a2.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>æœ¬å­¦æœŸçš„3-5å‘¨ï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä¸ºæœŸ3å‘¨çš„ä¸“ä¸šå®ä¹ ï¼Œæœ¬æ¬¡å®ä¹ çš„å†…å®¹æ˜¯ç¨‹æ§äº¤æ¢å’Œå…‰çº¤ä¼ è¾“ï¼Œå®ä¹ åœ°ç‚¹æ˜¯äº‘å¡˜æ ¡åŒºç†ç§‘æ¥¼B304ç¨‹æ§äº¤æ¢å®éªŒå®¤ã€‚<br>å®ä¹ çš„å½¢å¼æ˜¯è€å¸ˆè®²è¿°ç†è®ºçŸ¥è¯†ï¼Œç„¶ååŒå­¦åˆ†ç»„å‚è§‚è®¾å¤‡ï¼Œå°†è€å¸ˆæ‰€è®²çš„ç†è®ºçŸ¥è¯†åº”ç”¨åˆ°å®é™…ä¸­ã€‚åœ¨è€å¸ˆæŒ‡å¯¼ä¸‹ï¼Œäº†è§£ç¨‹æ§äº¤æ¢æœºåŠå…¶å·¥ä½œåŸç†ï¼Œå…‰çº¤ä¼ è¾“è®¾å¤‡ä»¥åŠå…¶å·¥ä½œåŸç†ã€‚åŒæ—¶è¿›è¡Œäº†åŒ…æ‹¬å¯¹åä¸ºC&amp;C08äº¤æ¢æœºç›¸å…³æ“ä½œï¼Œå¯¹ç¨‹æ§äº¤æ¢æœºçš„è®¾ç½®ï¼Œäº†è§£å…‰çº¤ä¼ è¾“è®¾å¤‡OSN2000ã€Metrolo1000ç»´æŠ¤ç»ˆç«¯ï¼Œè®¤è¯†å„ä¸ªè®¾å¤‡çš„åŸºæœ¬ç»“æ„åŠæ„é€ ï¼Œè®¤è¯†è®¾å¤‡ä¸­çš„å•æ¿ï¼Œäº†è§£å„ä¸ªå•æ¿çš„ä½œç”¨ï¼Œå®ç°å¯¹ä¼ è¾“è®¾å¤‡çš„ç»´æŠ¤å’Œç®¡ç†ã€‚</p>
<h2 id="ç¬¬ä¸€éƒ¨åˆ†-ç¨‹æ§äº¤æ¢è®¾å¤‡"><a href="#ç¬¬ä¸€éƒ¨åˆ†-ç¨‹æ§äº¤æ¢è®¾å¤‡" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†   ç¨‹æ§äº¤æ¢è®¾å¤‡"></a>ç¬¬ä¸€éƒ¨åˆ†   ç¨‹æ§äº¤æ¢è®¾å¤‡</h2><h3 id="ä¸€ã€ç¨‹æ§äº¤æ¢å®ä¹ ç›®çš„å’Œè¦æ±‚"><a href="#ä¸€ã€ç¨‹æ§äº¤æ¢å®ä¹ ç›®çš„å’Œè¦æ±‚" class="headerlink" title="ä¸€ã€ç¨‹æ§äº¤æ¢å®ä¹ ç›®çš„å’Œè¦æ±‚"></a>ä¸€ã€ç¨‹æ§äº¤æ¢å®ä¹ ç›®çš„å’Œè¦æ±‚</h3><p>1ã€è®¤è¯†å®é™…äº¤æ¢æœºçš„å¤–è§‚åŠç»“æ„ï¼Œäº†è§£äº¤æ¢æœºçš„å‹å·ã€å‚æ•°ã€æ€§èƒ½æŒ‡æ ‡å’Œè¿è¡Œæƒ…å†µï¼›<br>2ã€å­¦ä¹ äº¤æ¢æœºçš„åŸºæœ¬æ“ä½œè¿‡ç¨‹å’Œå¸¸è§„ç»´æŠ¤ç®¡ç†ï¼›<br>3ã€è®¤è¯†äº¤æ¢æœºçš„åŸºæœ¬ç»„æˆï¼Œè®¤è¯†äº¤æ¢æ¨¡å—ã€æ§åˆ¶æ¨¡å—åŠå¤–å›´æ¨¡å—ï¼Œç†Ÿæ‚‰äº¤æ¢æœºå„ç»„æˆéƒ¨åˆ†çš„ä¸»è¦ä½œç”¨ï¼ŒåŠ æ·±ç†è§£äº¤æ¢æœºåœ¨æ•´ä¸ªé€šä¿¡ç½‘ä¸­çš„åœ°ä½ï¼›<br>4ã€é€šè¿‡ç°åœºå‚è§‚å’Œå®åœ°æ“ä½œï¼Œäº†è§£è®¾å¤‡çš„åŸºæœ¬ç»„æˆå’Œè¿è¡ŒçŠ¶å†µï¼›<br>5ã€å®ä¹ å®Œæˆåï¼Œé’ˆå¯¹æœŸé—´çš„ä¸»è¦æ”¶è·ï¼Œè®°å½•å®ä¹ æ—¥å¿—ï¼Œå¹¶å†™å®ä¹ æŠ¥å‘Šã€‚</p>
<h3 id="äºŒã€ç¨‹æ§äº¤æ¢ä¸»è¦è®¾å¤‡ç¡¬ä»¶ç»“æ„ä»‹ç»"><a href="#äºŒã€ç¨‹æ§äº¤æ¢ä¸»è¦è®¾å¤‡ç¡¬ä»¶ç»“æ„ä»‹ç»" class="headerlink" title="äºŒã€ç¨‹æ§äº¤æ¢ä¸»è¦è®¾å¤‡ç¡¬ä»¶ç»“æ„ä»‹ç»"></a>äºŒã€ç¨‹æ§äº¤æ¢ä¸»è¦è®¾å¤‡ç¡¬ä»¶ç»“æ„ä»‹ç»</h3><p>C&amp;C08ç¨‹æ§äº¤æ¢æœºä¸»è¦ç”±ç”¨æˆ·æ¡†ã€ä¸­ç»§æ¡†ã€æ—¶é’Ÿæ¡†ã€ä¸»æ§æ¡†å’ŒBAMç»„æˆã€‚å›¾1.1ä¸ºC&amp;C08ç¨‹æ§äº¤æ¢æœºç»„æˆå›¾ï¼Œç”¨æˆ·æ¡†å’Œä¸­ç»§æ¡†å®æ‹å›¾å¦‚å›¾1.2ï¼Œå…¶å®æ ‡é…å›¾å¦‚å›¾1.3ã€1.4ã€1.5æ‰€ç¤ºã€‚<br><img data-src="https://pic.imgdb.cn/item/664345240ea9cb1403c59842.png" alt=""/><br> ç”¨æˆ·æ¡†çš„PWXæ¿é™¤äº†æä¾›ç”µæºå¤–ï¼Œè¿˜æä¾›é“ƒæµã€‚ASLæ¿å³A32æ¿ï¼Œæä¾›32è·¯ç”¨æˆ·æ¥å£ï¼Œå¯å½’çº³ä¸ºBORSCHTä¸ƒä¸ªåŠŸèƒ½ï¼Œå³é¦ˆç”µã€è¿‡å‹ä¿æŠ¤ã€æŒ¯é“ƒæ§åˆ¶ã€ç›‘è§†ã€ç¼–è¯‘ç å’Œæ»¤æ³¢ã€æ··åˆç”µè·¯å’Œæµ‹è¯•åŠŸèƒ½ã€‚DRVæ¿ä¸»è¦ä½œä¸º32è·¯DTMFæ”¶å·å™¨ï¼Œé©±åŠ¨åŠæ¡†çš„HWä¿¡å·ã€ä¸²å£å’Œæ—¶é’Ÿã€‚<br><img data-src="https://pic.imgdb.cn/item/664345220ea9cb1403c5963e.png" alt=""/><br>   <img data-src="https://pic.imgdb.cn/item/664345210ea9cb1403c594f2.png" alt=""/><br>   ç”¨æˆ·æ¡†ä¸­å­˜åœ¨DRVã€ASLã€PWXä¸‰ç§å•æ¿ã€‚DRVå•æ¿æ˜¯32è·¯DTMFæ”¶å·å™¨ï¼Œèƒ½é©±åŠ¨åŠæ¡†HWä¿¡å·ã€ä¸²å£å’Œæ—¶é’Ÿã€‚å•æ¿ASLæ¨¡æ‹Ÿç”¨æˆ·æ¿å¯æä¾›32è·¯ç”¨æˆ·æ¥å£ã€‚å•æ¿PWXæ˜¯äºŒæ¬¡ç”µæºæ¿ï¼Œä¸ºæœ¬æœºæ¡†æä¾›5V&#x2F;10Aç›´æµç”µæºï¼Œ-5V&#x2F;5Aç›´æµç”µæºï¼ŒåŒæ—¶å¯ä¸ºæä¾›ç”¨äºæŒ¯é“ƒçš„75V&#x2F;400mAçš„é“ƒæµã€‚ç”¨æˆ·ç”µè·¯æ˜¯äº¤æ¢ç½‘ç»œå’Œç”¨æˆ·çº¿é—´çš„æ¥å£ç”µè·¯ï¼Œèƒ½å¤ŸæŠŠè¯­éŸ³ä¿¡å·ï¼ˆæ¨¡æ‹Ÿæˆ–æ•°å­—ï¼‰ä¼ é€ç»™äº¤æ¢ç½‘ç»œï¼Œä¹Ÿèƒ½æŠŠç”¨æˆ·çº¿ä¸Šçš„å…¶ä»–ä¿¡å·å’Œäº¤æ¢ç½‘éš”å¼€ï¼Œä»¥å…æŸåäº¤æ¢ç½‘ç»œã€‚<br><img data-src="https://pic.imgdb.cn/item/664345200ea9cb1403c5941c.png" alt=""/><br> ä¸­ç»§æ¡†ä¸­å­˜åœ¨PWCã€DTMã€SETã€DRVå››ç§å•æ¿ã€‚å•æ¿PWCä¹Ÿæ˜¯äºŒæ¬¡ ç”µæºæ¿ï¼Œä¸ºæœ¬æœºæ¡†æä¾›5V&#x2F;10Aç›´æµç”µæºï¼Œ-5V&#x2F;5Aç›´æµç”µæºã€‚DTMå•æ¿ä½œä¸ºå±€é—´æ•°å­—ä¸­ç»§æ¥å£ï¼Œæ¯å—æ¿å«2ä¸ªPCMã€60æ¡ä¸­ç»§ï¼Œå¹¶é…åˆä¸åŒçš„ä¿¡ä»¤è®¾å¤‡æ”¯æŒå¤šç§ä¸šåŠ¡ã€‚SETå•æ¿æä¾›HWå’ŒNODçš„é…çº¿åº§ï¼Œ2ä¸ªSETæä¾›åŠæ¡†HWå’ŒNODã€‚<br><img data-src="https://pic.imgdb.cn/item/6643451e0ea9cb1403c590dd.png" alt=""/><br> ä¸»æ§æ¿ç”±PWCã€NODã€EMAã€SIGã€MPUã€BNETã€MEMã€MFCã€MC2ã€ALMã€LAPã€OPTã€TCIç­‰å•æ¿ç»„æˆã€‚MPUå•æ¿æ˜¯ä¸»æ§å•å…ƒï¼Œèƒ½å¤Ÿé€šè¿‡æ€»çº¿ç›´æ¥æ§åˆ¶ä¸»æ§æ¡†å•æ¿ï¼Œé€šè¿‡ä¸»èŠ‚ç‚¹æ§åˆ¶ç”¨æˆ·å’Œä¸­ç»§ç”µè·¯ï¼Œè·å–ç”¨æˆ·å’Œä¸­ç»§çŠ¶æ€ï¼Œå‘å‡ºç›¸åº”å‘½ä»¤ã€‚MPUå•æ¿åŒæ—¶æä¾›æ§åˆ¶SIGæ¿ä¿¡å·å‘é€ã€æ§åˆ¶å‘½ä»¤çš„æ¥æ”¶å’ŒNETæ¿å¤„ç†å‘¼å«æ¥ç»­çš„åŠŸèƒ½ã€‚NODæ¿è´Ÿè´£MPUä¸ç”¨æˆ·æ¡†ã€ä¸­ç»§æ¡†å†…å•æ¿çš„é€šä¿¡ï¼Œæ¯ä¸ªSMå«11ä¸ªNODæ§½ä½ï¼Œæ¯å—NOD2æä¾›4ä¸ªä¸»èŠ‚ç‚¹ã€‚BENTæ¿æ˜¯æ¨¡å—é—´çš„äº¤æ¢ç½‘æ¿ï¼Œæä¾›4K<em>4Käº¤æ¢ç½‘ç»œå’Œ128æ¡HWã€‚SIGå•æ¿æä¾›å„ç§ç”¨æˆ·éŸ³ï¼ŒåŒ…æ‹¬æ‹¨å·éŸ³ã€å¿™éŸ³ã€è¾…åŠ©åº”ç­”ç­‰ã€‚MFCæ’æ§½èƒ½å¤Ÿå…¼å®¹MFCå’ŒLAPï¼ŒMFCæ˜¯å¤šé¢‘äº’æ§æ¿ï¼ŒLAPæ˜¯åè®®å¤„ç†æ¿ã€‚<br><img data-src="https://pic.imgdb.cn/item/664346170ea9cb1403c79c68.png" alt=""/><br> äº¤æ¢æœºçš„æ¡†é—´è¿çº¿ä¸»è¦é€šè¿‡HWå’ŒNODã€‚<br> NODä¸»èŠ‚ç‚¹ä¿¡ä»¤çº¿åˆ†ç”¨æˆ·ä¿¡ä»¤çº¿å’Œä¸­ç»§ä¿¡ä»¤çº¿ã€‚MCBèƒŒåæœ‰11ä¸ªä¿¡ä»¤çº¿çš„æ’æ¥ä½ç½®ï¼Œæ¯æ’æ¥ä½ç½®æä¾›å››ç»„ä¿¡ä»¤çº¿ã€‚è¿›è¡Œç”¨æˆ·ä¿¡ä»¤çº¿çš„é…ç½®æ—¶ä¸€åˆ†ä¸ºå››ï¼Œä¸€ä¸ªç”¨æˆ·æ¡†2ä¸ªä¸»èŠ‚ç‚¹ã€‚è¿›è¡Œä¸­ç»§ä¿¡ä»¤çº¿çš„é…ç½®æ—¶ï¼Œæ¯æ¿1ä¸ªä¸»èŠ‚ç‚¹ï¼Œä¸­ç»§æ¡†NODçº¿åˆ†ä¸¤ä¸ªåˆ†æ”¯ï¼Œåˆ†åˆ«è¿å¾€MCBçš„ä¸¤ä¸ªNODæ§½ã€‚<br> HWæ˜¯ä¼ é€’è¯éŸ³çš„é«˜é€Ÿå…¬è·¯ï¼Œåˆ†ä¸ºç”¨æˆ·HWçº¿å’Œä¸­ç»§HWçº¿ä¸¤ç§ï¼Œåˆ†åˆ«å®Œæˆç”¨æˆ·æ¡†å’Œä¸­ç»§æ¡†ä¸ä¸»æ§æ¡†BNETæ¿çš„è¿æ¥ï¼Œå®ç°å•Tæ—¶éš™äº¤æ¢ã€‚BNETæ¿çš„äº¤æ¢èƒ½åŠ›ä¸º4096</em>4096æ—¶éš™ï¼Œæ¯æ¡HWæ‰¿è½½32æ—¶éš™ï¼Œæ‰€ä»¥BNETæ¿å…±å¼•å‡º128æ¡HWï¼Œå…¶ä¸­64æ¡ä¾›å†…éƒ¨ä½¿ç”¨ï¼Œ64æ¡ä¾›ç»™ç”¨æˆ·å’Œä¸­ç»§ã€‚æ¯ç”¨æˆ·2è·ŸHWçº¿ï¼Œæ¯DTæ¿2è·ŸHWçº¿ï¼›æ¯æ ¹HWç”µç¼†å†…å«4æ ¹HWçº¿ï¼Œå…±16æ ¹HWç”µç¼†ã€‚é‡‡ç”¨çš„å¸ƒçº¿æ–¹å¼æ˜¯ç”¨æˆ·æ¡†ä»ä¸Šåˆ°ä¸‹æ’ï¼ŒDTæ¿ä»ä¸‹åˆ°ä¸Šæ’ã€‚</p>
<h3 id="ä¸‰ã€ç¨‹æ§äº¤æ¢å®ä¹ æ“ä½œå…·ä½“å†…å®¹ã€è¿‡ç¨‹å’Œç»“æœæè¿°"><a href="#ä¸‰ã€ç¨‹æ§äº¤æ¢å®ä¹ æ“ä½œå…·ä½“å†…å®¹ã€è¿‡ç¨‹å’Œç»“æœæè¿°" class="headerlink" title="ä¸‰ã€ç¨‹æ§äº¤æ¢å®ä¹ æ“ä½œå…·ä½“å†…å®¹ã€è¿‡ç¨‹å’Œç»“æœæè¿°"></a>ä¸‰ã€ç¨‹æ§äº¤æ¢å®ä¹ æ“ä½œå…·ä½“å†…å®¹ã€è¿‡ç¨‹å’Œç»“æœæè¿°</h3><p>1ã€é¦–å…ˆè¿›è¡Œæ•°æ®é…ç½®<br>å•å‡»â€œå¼€å§‹â€â€”&gt;â€œæ‰€æœ‰ç¨‹åºâ€â€”&gt;â€œä¸šåŠ¡æ“ä½œç»ˆç«¯â€â€”&gt;â€œC&amp;C08äº¤æ¢æœºä¸šåŠ¡ç»´æŠ¤â€ï¼Œå°†å¼¹å‡ºç™»å½•çª—å£ã€‚<br><img data-src="https://pic.imgdb.cn/item/664346160ea9cb1403c79c1c.png" alt=""/><br>è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åï¼Œå¯†ç å’Œå±€åï¼ŒIPåœ°å€åï¼Œç»´æŠ¤è¾“å‡ºçª—å£ä¼šæ˜¾ç¤ºç™»å½•æˆåŠŸçš„ç›¸å…³ä¿¡æ¯ï¼Œè‡ªåŠ¨æ‰§è¡Œå‡ æ¡ç³»ç»ŸæŸ¥è¯¢å‘½ä»¤ã€‚<br>ç‚¹å‡»å¿«æ·å·¥å…·æ ä¸Šçš„å°æˆ¿å­å›¾æ ‡ï¼Œå³å¯å¿«é€Ÿè¿›å…¥MMLå‘½ä»¤è¾“å…¥çª—å£ï¼Œåœ¨è¯¥ç•Œé¢é€æ¡è¾“å…¥ä¸€ä¸‹é…ç½®æŒ‡ä»¤å®Œæˆå¯¹äº¤æ¢æœºçš„ç¡¬ä»¶æ•°æ®é…ç½®ã€‚<br><img data-src="https://pic.imgdb.cn/item/664346160ea9cb1403c79bf8.png" alt=""/><br>é…ç½®æ­¥éª¤ï¼šè®¾ç½®æ ¼å¼è½¬æ¢çš„çŠ¶æ€â€”&gt;å…³é—­æ€§èƒ½ç»Ÿè®¡å¼€å…³â€”&gt;è®¾ç½®æœ¬å±€ä¿¡æ¯â€”&gt;å¢åŠ SMâ€”&gt;å¢åŠ æ§åˆ¶æ¡†â€”&gt;å¢åŠ 32è·¯ç”¨æˆ·æ¡†â€”&gt;å¢åŠ ä¸­ç»§æ¡†â€”&gt;åˆ é™¤ä¸»æ§æ¡†ä¸å­˜åœ¨çš„å•æ¿â€”&gt;åˆ é™¤ç”¨æˆ·æ¡†ä¸å­˜åœ¨çš„å•æ¿â€”&gt;åŠ è½½è®¾ç½®<br>2ã€å®Œæˆæ•°æ®é…ç½®åï¼Œè¿›è¡Œæ•°æ®å¯¼å…¥<br>åœ¨æ¡Œé¢ä¸Šå•å‡»E-Bridgeå®¢æˆ·ç«¯å›¾æ ‡ï¼Œè¿›å…¥E-Bridgeå®¢æˆ·ç«¯ç™»å½•ç•Œé¢<br><img data-src="https://pic.imgdb.cn/item/664346160ea9cb1403c79bca.png" alt=""/><br>è¾“å…¥æœåŠ¡å™¨çš„ipåœ°å€ï¼Œè¾“å…¥ç«¯å£å·ç‚¹å‡»ç¡®å®šè¿›è¡Œç™»å½•ã€‚<br>å•å‡»ç¡®å®šåï¼Œè¿›å…¥å›¾1.10æ‰€ç¤ºç•Œé¢ï¼Œä¹‹ååŒå‡»â€œç¨‹æ§ï¼šcc08â€è¿›å…¥å›¾1.11æ‰€ç¤ºç•Œé¢<br><img data-src="https://pic.imgdb.cn/item/664346160ea9cb1403c79ba9.png" alt=""/><br><img src ="https://pic.imgdb.cn/item/664346480ea9cb1403c7e46b.png" alt=""/><br>ç‚¹å‡»â€œå¼€å§‹ç¨‹æ§å®éªŒâ€ï¼&gt;â€œç”³è¯·åŠ è½½æ•°æ®â€ï¼&gt;â€œç¡®å®šâ€ï¼Œå±å¹•ä¸Šæ–¹ä¼šæ˜¾ç¤ºå½“å‰å ç”¨æœåŠ¡å™¨å¸­ä½çš„å®¢æˆ·ç«¯ï¼Œä½ ç”³è¯·å¸­ä½çš„å®¢æˆ·ç«¯æ’åœ¨ç¬¬å‡ ä½ï¼Œå‰©ä½™å¤šé•¿æ—¶é—´ã€‚å¦‚å›¾1.12æ‰€ç¤ºã€‚å¸­ä½ç”³è¯·æˆåŠŸåç³»ç»Ÿä¼šæç¤ºå¸­ä½ç”³è¯·æˆåŠŸï¼Œå¦‚å›¾1.13ã€‚<br><img data-src="https://pic.imgdb.cn/item/664346480ea9cb1403c7e45a.png" alt=""/><br> <img data-src="https://pic.imgdb.cn/item/664346480ea9cb1403c7e447.png" alt=""/><br>ç”³è¯·åˆ°æœåŠ¡å™¨å¸­ä½æ—¶ï¼Œç‚¹å‡»â€œç¡®è®¤â€ï¼Œç³»ç»Ÿè‡ªåŠ¨å°†æœ¬å®¢æˆ·ç«¯çš„æ•°æ®åº“ä¸­çš„æ•°æ®ä¼ åˆ°æœåŠ¡å™¨ã€‚å¦‚å›¾1.14æ‰€ç¤ºã€‚æ•°æ®åŠ è½½å®Œæˆåç³»ç»Ÿä¼šæç¤ºæ•°æ®åŠ è½½å®Œæˆã€‚å¦‚å›¾1.15æ‰€ç¤ºã€‚<br><img data-src="https://pic.imgdb.cn/item/664346480ea9cb1403c7e432.png" alt=""/><br><img data-src="https://pic.imgdb.cn/item/664346480ea9cb1403c7e41e.png" alt=""/><br>æ•°æ®åŠ è½½å®Œæˆåï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨è¿›è¡Œæ•°æ®æ ¼å¼è½¬æ¢ï¼Œå¹¶åŠ è½½åˆ°äº¤æ¢æœºä¸­<br><img data-src="https://pic.imgdb.cn/item/664346910ea9cb1403c83990.png" alt=""/><br>æ•°æ®åŠ è½½åˆ°äº¤æ¢æœºåï¼Œå¼€å§‹å®éªŒéªŒè¯ã€‚ç‚¹å‡»â€œä¸šåŠ¡æ“ä½œç»ˆç«¯â€ï¼&gt;â€œäº¤æ¢æœºä¸šåŠ¡ç»´æŠ¤â€ï¼Œå‡ºç°ç™»å½•çª—å£<br><img data-src="https://pic.imgdb.cn/item/664346910ea9cb1403c8397a.png" alt=""/><br>æˆ‘ä»¬è¾“å…¥ç›¸åº”çš„ç”¨æˆ·åã€å¯†ç ã€å±€åã€IPåœ°å€åç‚¹å‡»â€œç¡®è®¤â€ï¼Œç™»å½•åˆ°BAMæœåŠ¡å™¨ã€‚<br>ç‚¹å‡»â€œç»´æŠ¤â€ï¼&gt;â€œé…ç½®â€ï¼&gt;â€œç¡¬ä»¶é…ç½®çŠ¶æ€é¢æ¿â€ï¼&gt;â€œé€‰æ‹©æ¨¡å—â€å¯çœ‹åˆ°äº¤æ¢æœº1å·SMæ¨¡å—çš„å•æ¿è¿è¡ŒçŠ¶æ€ã€‚å¯ä»¥çœ‹åˆ°é…ç½®çš„å•æ¿å¹¶æ²¡æœ‰è­¦å‘Šé”™è¯¯ï¼Œè¯´æ˜æˆ‘ä»¬é…ç½®å®éªŒæ˜¯æˆåŠŸã€‚ï¼ˆè¡Œçš„0-25è¡¨ç¤ºæ§½ä½å·ï¼Œåˆ—çš„0-5è¡¨ç¤ºæ¡†å·ï¼Œä¸åŒçš„é¢œè‰²ä»£è¡¨å•æ¿ä¸åŒçš„çŠ¶æ€ã€‚ï¼‰<br><img data-src="https://pic.imgdb.cn/item/664346910ea9cb1403c83967.png" alt=""/><br>ä¹‹åç‚¹å‡»A32æ¿ï¼ŒæŸ¥è¯¢ç”¨æˆ·çŠ¶æ€ï¼Œé‡Œé¢å¯ä»¥å¾ˆæ¸…æ™°åœ°çœ‹åˆ°ç”¨æˆ·åºå·ã€ç”µè¯å·ç ã€çŠ¶æ€æ˜¯å¦ç©ºé—²ç­‰ï¼Œå¦‚å›¾1.19æ‰€ç¤ºã€‚<br><img data-src="https://pic.imgdb.cn/item/664346910ea9cb1403c83955.png" alt=""/><br>å›¾ä¸­ç”¨æˆ·ç±»å‹æ˜¯æœ‰çº¿ç”¨æˆ·ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ˜¯ç”µè¯ç”¨æˆ·ï¼Œç”¨æˆ·åºåˆ—æ˜¯ä»0-31æ€»æœ‰32ä¸ªç”¨æˆ·ï¼ŒçŠ¶æ€ç©ºé—²ï¼ŒHWã€TSéƒ½æ˜¯æœªå ç”¨çš„ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰æˆ¿å·ä¸èƒ½è¿›è¡Œä¸šåŠ¡ï¼Œæ‰€ä»¥éƒ½æ˜¯æœªå ç”¨çš„ã€‚<br>å¯¹12å·æ§½ä½çš„NETæ¿çŠ¶æ€æŸ¥è¯¢ï¼Œå¦‚å›¾1.20æ‰€ç¤º<br><img data-src="https://pic.imgdb.cn/item/664346910ea9cb1403c83947.png" alt=""/><br>æŸ¥è¯¢è¡¨åæ˜ äº†NETæ¿çš„å±æ€§å’ŒHWå ç”¨æƒ…å†µã€‚<br>å¯¹10å·æ§½ä½çš„MPUæ¿çŠ¶æ€æŸ¥è¯¢ï¼ŒæŸ¥è¯¢è¡¨ä¸­çš„ç¡¬å¼€å…³çŠ¶æ€ä¸»è¦æ˜¯ä¸MPUå•æ¿çš„æ‹¨ç å¼€å…³æœ‰å…³ï¼Œå¦‚å›¾1.21æ‰€ç¤ºã€‚<br><img data-src="https://pic.imgdb.cn/item/664346e10ea9cb1403c88cb2.png" alt=""/><br>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰©å±•å†…å­˜ã€æ•°æ®å†…å­˜å¯ç”¨ç©ºé—´ã€ä¸»æœºæ—¶é—´ã€å¤‡ä»½çŠ¶æ€ã€ç¡¬å¼€å…³çŠ¶æ€ã€è½¯å¼€å…³çŠ¶æ€ç­‰ä¿¡æ¯ã€‚<br>å¯¹2å·æ§½ä½çš„NODæ¿çŠ¶æ€è¿›è¡ŒæŸ¥è¯¢ã€‚å¦‚å›¾1.22æ‰€ç¤ºã€‚<br><img data-src="https://pic.imgdb.cn/item/664346e10ea9cb1403c88c85.png" alt=""/><br>ä¸Šé¢çš„ä¸€è¡Œä»£è¡¨NODæ¿çš„å±æ€§ï¼Œä¸€ä¸ªNODæ¿æœ‰4ä¸ªä¸»èŠ‚ç‚¹ï¼Œç¼–å·ä»0-3ï¼Œä¸¤ä¸ªçŠ¶æ€æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºä¸­ç»§æ¡†ä¸­2ä¸ªDTMæ¿ï¼Œä¸€ä¸ªDTMæ¿å ç”¨ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚</p>
<h3 id="å››ã€ç¨‹æ§äº¤æ¢å®ä¹ ç»å†çš„è®¤è¯†"><a href="#å››ã€ç¨‹æ§äº¤æ¢å®ä¹ ç»å†çš„è®¤è¯†" class="headerlink" title="å››ã€ç¨‹æ§äº¤æ¢å®ä¹ ç»å†çš„è®¤è¯†"></a>å››ã€ç¨‹æ§äº¤æ¢å®ä¹ ç»å†çš„è®¤è¯†</h3><p>æ­¤æ¬¡ç¨‹æ§äº¤æ¢å®ä¹ çš„å®ä¹ è¦æ±‚æ˜¯è®¤è¯†å®é™…äº¤æ¢æœºçš„å¤–è§‚åŠç»“æ„ï¼Œäº†è§£äº¤æ¢æœºçš„å‹å·ã€å‚æ•°ã€æ€§èƒ½æŒ‡æ ‡å’Œè¿è¡Œæƒ…å†µï¼›è®¤è¯†äº¤æ¢æœºçš„åŸºæœ¬ç»„æˆï¼Œè®¤è¯†äº¤æ¢æ¨¡å—ã€æ§åˆ¶æ¨¡å—åŠå¤–å›´æ¨¡å—ï¼Œç†Ÿæ‚‰äº¤æ¢æœºå„ç»„æˆéƒ¨åˆ†çš„ä¸»è¦ä½œç”¨ï¼ŒåŠ æ·±ç†è§£äº¤æ¢æœºåœ¨æ•´ä¸ªé€šä¿¡ç½‘ä¸­çš„åœ°ä½ï¼›å­¦ä¹ äº¤æ¢æœºçš„åŸºæœ¬æ“ä½œè¿‡ç¨‹å’Œå¸¸è§„ç»´æŠ¤ç®¡ç†ã€‚æˆ‘ä»¬å…ˆå¬è€å¸ˆè®²è§£ç¨‹æ§äº¤æ¢è®¾å¤‡ç¡¬ä»¶ç»“æ„ç­‰ç†è®ºçŸ¥è¯†ï¼Œåœ¨å®éªŒå®¤åé¢æ‰¾åˆ°å¯¹åº”çš„å„ä¸ªæ¨¡å—è¿›è¡Œå­¦ä¹ ã€‚ç„¶åå†åœ¨è‡ªå·±å°ç»„æˆå‘˜å…±åŒåŠªåŠ›ä»¥åŠè€å¸ˆçš„å¸®åŠ©ä¸‹å¯¹æœºå™¨è¿›è¡Œé…ç½®ï¼Œé…ç½®å®Œåå¹¶éªŒè¯ï¼Œå†ä¸€æ¬¡æ¬¡å¤±è´¥åç»ˆäºé…ç½®æˆåŠŸã€‚</p>
<h2 id="ç¬¬äºŒéƒ¨åˆ†-å…‰çº¤ä¼ è¾“è®¾å¤‡"><a href="#ç¬¬äºŒéƒ¨åˆ†-å…‰çº¤ä¼ è¾“è®¾å¤‡" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†  å…‰çº¤ä¼ è¾“è®¾å¤‡"></a>ç¬¬äºŒéƒ¨åˆ†  å…‰çº¤ä¼ è¾“è®¾å¤‡</h2><h3 id="ä¸€ã€å…‰çº¤ä¼ è¾“å®ä¹ ç›®çš„å’Œè¦æ±‚"><a href="#ä¸€ã€å…‰çº¤ä¼ è¾“å®ä¹ ç›®çš„å’Œè¦æ±‚" class="headerlink" title="ä¸€ã€å…‰çº¤ä¼ è¾“å®ä¹ ç›®çš„å’Œè¦æ±‚"></a>ä¸€ã€å…‰çº¤ä¼ è¾“å®ä¹ ç›®çš„å’Œè¦æ±‚</h3><p>1ã€è®¤è¯†å…‰çº¤é€šä¿¡è®¾å¤‡çš„å¤–è§‚åŠç»“æ„ï¼Œäº†è§£å‡ ç§å®é™…è®¾å¤‡çš„å‹å·ã€å‚æ•°ã€æ€§èƒ½æŒ‡æ ‡å’Œè¿è¡Œæƒ…å†µï¼›<br>2ã€åˆæ­¥äº†è§£å…‰çº¤ä¼ è¾“è®¾å¤‡çš„å¸¸è§å‡ ç§ç»„ç½‘æ–¹å¼ï¼›<br>3ã€å­¦ä¹ å…‰çº¤ä¼ è¾“è®¾å¤‡çš„åŸºæœ¬æ“ä½œè¿‡ç¨‹å’Œå¸¸è§„ç»´æŠ¤ç®¡ç†ï¼›<br>4ã€å…ˆå¬çŸ¥é“è€å¸ˆè®²è¿°ç¡¬ä»¶ç»“æ„å’Œæ“ä½œæ–¹æ³•ï¼Œç„¶ååœ¨æ“ä½œç»ˆç«¯ä¸Šè¿›è¡Œè„±æœºæ“ä½œï¼Œç¬¦åˆåŸºæœ¬è¦æ±‚åå†è½®æ¢è¿›è¡Œè”æœºæ“ä½œï¼Œè§‚å¯Ÿå’Œåˆ†ææ“ä½œç»“æœï¼›<br>5ã€å®ä¹ å®Œæˆåï¼Œé’ˆå¯¹æœŸé—´çš„ä¸»è¦æ”¶è·ï¼Œè®°å½•å®ä¹ æ—¥å¿—å¹¶å†™å®ä¹ æŠ¥å‘Šã€‚</p>
<h3 id="äºŒã€å…‰çº¤ä¼ è¾“ä¸»è¦è®¾å¤‡ç¡¬ä»¶ç»“æ„ä»‹ç»"><a href="#äºŒã€å…‰çº¤ä¼ è¾“ä¸»è¦è®¾å¤‡ç¡¬ä»¶ç»“æ„ä»‹ç»" class="headerlink" title="äºŒã€å…‰çº¤ä¼ è¾“ä¸»è¦è®¾å¤‡ç¡¬ä»¶ç»“æ„ä»‹ç»"></a>äºŒã€å…‰çº¤ä¼ è¾“ä¸»è¦è®¾å¤‡ç¡¬ä»¶ç»“æ„ä»‹ç»</h3><p>æ­¤æ¬¡å®éªŒå¹³å°ä¸ºåä¸ºå…¬å¸æœ€æ–°ä¸€ä»£SDHå…‰ä¼ è¾“è®¾å¤‡ï¼Œé‡‡ç”¨å¤šç§ADMæŠ€æœ¯ï¼Œæ ¹æ®å®é™…éœ€è¦å’Œé…ç½®ï¼Œç›®å‰æä¾›E1ã€64Kè¯­éŸ³ã€10M&#x2F;100Mä¸‰ç§æ¥å£ã€‚å®éªŒç»ˆç«¯é€šè¿‡å±€åŸŸç½‘é‡‡ç”¨SEVER&#x2F;CLIENTFæ–¹å¼å’Œå…‰ä¼ è¾“ç½‘å…ƒé€šè®¯ï¼Œå¹¶å®Œæˆå¯¹ç½‘å…ƒä¸šåŠ¡çš„è®¾ç½®ã€æ•°æ®ä¿®æ”¹ã€ç›‘è§†ç­‰æ¥è¾¾åˆ°ç”¨æˆ·ç®¡ç†çš„ç›®çš„ã€‚<br>å®éªŒå¹³å°æä¾›ä¼ è¾“è®¾å¤‡æœ‰OPTIXMETRO1000å’ŒOPTIXOSN2000ï¼Œå…¶ä¸­ï¼ŒOSN2000å¤„äºç½‘ç»œçš„æ¥å…¥å±‚ï¼Œä¸ºå®¢æˆ·æä¾›å…¨è§„æ ¼è®¾å¤‡çº§åˆ«ä¿æŠ¤çš„è§£å†³æ–¹æ¡ˆã€‚ä¼ è¾“é€Ÿç‡STM-4ï¼Œå³622Mã€‚ä¸¤ç§è®¾å¤‡åº”ç”¨äºåŸåŸŸç½‘ä¼ è¾“ç½‘ä¸­çš„æ¥å…¥å±‚ï¼Œå¯ä¸OSN9500ã€OptiX 10Gã€OptiX OSN2500ã€OptiX OSN2000ã€OptiX OSN3000æ··åˆç»„ç½‘ã€‚<br>1ã€OPTIXMETRO1000è®¾å¤‡åœ¨ç½‘ç»œä¸­çš„åœ°ä½å¦‚å›¾2.1æ‰€ç¤ºï¼š<br><img data-src="https://pic.imgdb.cn/item/664346e00ea9cb1403c88c60.png" alt=""/><br>2ã€OptiX 155&#x2F;622H(Metro1000)è®¾å¤‡<br><img data-src="https://pic.imgdb.cn/item/664346e00ea9cb1403c88c4c.png" alt=""/><br>OptiX 155&#x2F;622H(Metro1000)è®¾å¤‡ç”±ç”µæºå¤´æŸœã€é£æ‰‡å­æ¶ã€å­æ¶ã€æ¥å£åŒºå’Œæ’æ¿åŒºç»„æˆã€‚å…¶å•æ¿æ§½ä½å¦‚å›¾2.3<br><img data-src="https://pic.imgdb.cn/item/664346e00ea9cb1403c88c37.png" alt=""/><br>Metro 1000ç”±äº”å—å•æ¿ç»„æˆï¼Œå…¶å•æ¿æ§½ä½å’ŒåŠŸèƒ½æœ‰IU1:å…‰æ¥å£æ¿ä½ï¼ŒOI2&#x2F;OI4&#x2F;SB2ï¼›IU2ï¼ŒIU3ï¼šå…‰&#x2F;ç”µæ¥å£æ¿ä½ï¼ŒOI2&#x2F;OI4&#x2F;SB2ï¼ŒSP1&#x2F;SP2&#x2F;SM1&#x2F;HP2&#x2F;PL3ï¼›IU3ï¼šç¯å¢ƒç›‘æ§ï¼ŒEMUï¼›IU4ï¼šç”µæ¥å£æ¿ä½ï¼ŒPD2&#x2F;PM2&#x2F;TDAï¼›SCBï¼šç³»ç»Ÿæ§åˆ¶æ¿ä½ï¼ŒX42ã€SCCã€STGã€OHP2ï¼›Aï¼šé˜²å°˜ç½‘ï¼Œç”µæºæ»¤æ³¢æ¿ï¼ŒPOIï¼›Bï¼šé£æ‰‡æ¿ä½ï¼ŒFANã€‚<br>155&#x2F;622Hçš„IUæ¿æ ¹æ®å®ƒæ‰€å®Œæˆçš„åŠŸèƒ½ï¼Œå¯åˆ†ä¸ºSDHåŠŸèƒ½å•å…ƒã€PDHåŠŸèƒ½å•å…ƒã€ä»¥å¤ªç½‘åŠŸèƒ½å•å…ƒã€äº¤å‰è¿æ¥å’Œæ—¶é’ŸåŠŸèƒ½å•å…ƒã€ç³»ç»Ÿæ§åˆ¶åŠŸèƒ½å•å…ƒã€è¾…åŠ©å•å…ƒã€ç”µæºå•å…ƒå’Œé£æ‰‡å•å…ƒã€‚åœ¨SDHåŠŸèƒ½å•å…ƒï¼Œæœ‰OI4ï¼ˆ1è·¯STM-4å…‰æ¥å£æ¿ï¼‰ã€OI4Dï¼ˆ2è·¯STM-4å…‰æ¥å£æ¿ï¼‰ã€OI2Sï¼ˆ1è·¯STM-1å…‰æ¥å£æ¿ï¼‰ã€OI2Dï¼ˆ2è·¯STM-1å…‰æ¥å£æ¿ï¼‰ã€‚å…¶ä¸­OI4&#x2F; OI4Dçš„åŠŸèƒ½åŒ…æ‹¬æ¥æ”¶å’Œå‘é€STM-4å…‰ä¿¡å·ï¼›æä¾›I-4ã€S-4.1ã€L-4.1ã€L-4.2æ ‡å‡†å…‰æ¨¡å—ï¼›æä¾›ä¸°å¯Œçš„å‘Šè­¦å’Œæ€§èƒ½äº‹ä»¶ï¼Œä»è€Œä¾¿äºè®¾å¤‡çš„ç®¡ç†å’Œç»´æŠ¤ï¼›æä¾›å…‰å£çº§åˆ«çš„å†…å¤–ç¯å›åŠŸèƒ½ï¼Œä¾¿äºå¿«é€Ÿå®šä½æ•…éšœï¼›æä¾›æ¿€å…‰å™¨è‡ªåŠ¨å…³æ–­åŠŸèƒ½ï¼›æ”¯æŒå¤ç”¨æ®µä¿æŠ¤å’Œå­ç½‘è¿æ¥ä¿æŠ¤ï¼ˆSNCPï¼‰ã€‚<br>3ã€OptiX OSN2000 STM-1&#x2F;STM-4å…‰ä¼ è¾“è®¾å¤‡<br>OptiX OSN 2000 STM-1&#x2F;STM-4 å…‰ä¼ è¾“è®¾å¤‡ï¼ˆä»¥ä¸‹ç®€ç§°OptiX OSN 2000ï¼‰æ˜¯åä¸ºæŠ€æœ¯æœ‰é™å…¬å¸æ ¹æ®åŸåŸŸç½‘ç°çŠ¶å’Œæœªæ¥å‘å±•è¶‹åŠ¿ï¼Œå¼€å‘çš„å…‰ä¼ è¾“è®¾å¤‡ï¼Œå®ƒèåˆäº†SDHã€Ethernetã€PDHæŠ€æœ¯ï¼Œå®ç°åœ¨åŒä¸€ä¸ªå¹³å°ä¸Šé«˜æ•ˆåœ°ä¼ é€è¯­éŸ³å’Œæ•°æ®ä¸šåŠ¡ã€‚<br><img data-src="https://pic.imgdb.cn/item/664347060ea9cb1403c8b893.png" alt=""/><br>OptiX OSN2000 ç³»ç»Ÿç”±SDHä¸šåŠ¡å¤„ç†å•å…ƒã€PDHä¸šåŠ¡å¤„ç†å•å…ƒã€ä»¥å¤ªç½‘ä¸šåŠ¡å¤„ç†å•å…ƒã€äº¤å‰ã€æ—¶é’Ÿå•å…ƒã€ç³»ç»Ÿæ§åˆ¶ä¸é€šä¿¡å•å…ƒã€ç”µæºå•å…ƒã€è¾…åŠ©å•å…ƒã€è¾…åŠ©æ¥å£å•å…ƒã€å…‰åŠŸç‡æ”¾å¤§å•å…ƒç»„æˆã€‚OptiX OSN2000 è®¾å¤‡åº”ç”¨äºåŸåŸŸä¼ è¾“ç½‘ä¸­çš„æ¥å…¥å±‚ï¼Œå¯ä¸OptiX OSN2500ã€OptiX OSN3500ã€OptiX OSN7500ã€OptiX OSN9500ç­‰è®¾å¤‡ç»„æˆä¼ è¾“ç½‘ã€‚<br><img data-src="https://pic.imgdb.cn/item/664347060ea9cb1403c8b86e.png" alt=""/><br>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºOptiX OSN2000ä½äºAccess layerå±‚<br>OptiX OSN2000å…‰ä¼ è¾“ç³»ç»Ÿæ§½ä½åˆ†å¸ƒå¦‚å›¾2.6<br><img data-src="https://pic.imgdb.cn/item/664347060ea9cb1403c8b85a.png" alt=""/><br>å…¶ä¸­01ï¼Œ02ï¼Œ03â€¦â€¦æ˜¯å•æ¿æ§½ä½å·ï¼›ç‰¹æ®Šæ§½ä½ï¼šXCSï¼ŒSCCï¼ŒPIUï¼ŒAUXå•ç‹¬æ ‡æ˜ï¼›7å·äº¤å‰æ¿ä¸Šçš„çº¿è·¯æ¿æ§½ä½ä¸º27ï¼Œ8å·äº¤å‰æ¿ä¸Šçš„çº¿è·¯æ¿æ§½ä½ä¸º28ï¼›AUXå•æ¿ä¸Šçš„EOWæ§½ä½ä¸º18ã€STIæ§½ä½ä¸º19ï¼›é£æ‰‡æ§½ä½ä¸ºï¼š22ï¼›V1R2ç‰ˆæœ¬ä¸æ”¯æŒä¸»æ§å¤‡ä»½ï¼Œåªèƒ½æ’åœ¨12æ§½ä½ã€‚ç³»ç»Ÿé‡‡ç”¨é›†ä¸­ä¾›ç”µæ–¹å¼ï¼Œ14æ§½ä½å’Œ15æ§½ä½åŒ…æ‹¬48Vç”µæºå¼•å…¥ã€ç”µæºè½¬æ¢ç­‰åŠŸèƒ½ï¼Œè€Œä¸”14æ§½ä½å’Œ15æ§½ä½ç”µæºä¸»å¤‡ä»½ã€‚IU4<del>IU5ã€IU6</del>IU9ã€IU7<del>IU8ã€IU10</del>IU11äº’ä¸ºå¯¹å¶æ§½ä½ï¼Œåªæœ‰IU4<del>IU6&amp;IU9</del>IU11å¯¹åº”æœ‰æ¥å£æ¿ï¼Œå› æ­¤æ”¯è·¯æ¿éœ€è¦æ’åˆ°è¿™äº›æ§½ä½ã€‚</p>
<h3 id="ä¸‰ã€å…‰çº¤ä¼ è¾“å®ä¹ æ“ä½œå…·ä½“å†…å®¹ã€è¿‡ç¨‹å’Œç»“æœæè¿°"><a href="#ä¸‰ã€å…‰çº¤ä¼ è¾“å®ä¹ æ“ä½œå…·ä½“å†…å®¹ã€è¿‡ç¨‹å’Œç»“æœæè¿°" class="headerlink" title="ä¸‰ã€å…‰çº¤ä¼ è¾“å®ä¹ æ“ä½œå…·ä½“å†…å®¹ã€è¿‡ç¨‹å’Œç»“æœæè¿°"></a>ä¸‰ã€å…‰çº¤ä¼ è¾“å®ä¹ æ“ä½œå…·ä½“å†…å®¹ã€è¿‡ç¨‹å’Œç»“æœæè¿°</h3><p>å…‰çº¤ä¼ è¾“éƒ¨åˆ†çš„å®ä¹ ä¸»è¦æ˜¯é’ˆå¯¹OSN2000ã€Mctro1000çš„å•æ¿è¿›è¡Œé€‰æ‹©å’Œè®¾ç½®ï¼Œå…¶ä¸­æ¿ä½é€‰æ‹©çš„æ˜¯å®éªŒå®¤ä¸­è®¾å¤‡æ‰€ä½¿ç”¨çš„æ¿å­ï¼Œè¿›å…¥ç»´æŠ¤ç³»ç»Ÿä¹‹åå¯¹å…¶ä¸­çš„ä¸€äº›å‚æ•°è¿›è¡Œè®¾ç½®å¯ä»¥å®ç°ä¸åŒçš„åŠŸèƒ½ï¼ŒæœŸé—´æˆ‘ä»¬å®é™…æ“ä½œçš„æœ‰åŒ…æ‹¬å¯¹IDã€SDHä¸šåŠ¡é…ç½®ã€ä¼šè®®ç”µè¯é…ç½®ç­‰ã€‚ä»è€Œå®ç°å¯¹ç¡¬ä»¶çš„é…ç½®ã€‚<br><img data-src="https://pic.imgdb.cn/item/664347060ea9cb1403c8b80e.png" alt=""/><br>å…‰çº¤æ¥å£æ˜¯ç”¨æ¥è¿æ¥å…‰çº¤çº¿ç¼†çš„ç‰©ç†æ¥å£ã€‚å…¶åŸç†æ˜¯åˆ©ç”¨äº†å…‰ä»å…‰å¯†ä»‹è´¨è¿›å…¥å…‰ç–ä»‹è´¨ä»è€Œå‘ç”Ÿäº†å…¨åå°„ã€‚é€šå¸¸æœ‰SCã€STã€FCç­‰å‡ ç§ç±»å‹ï¼Œå®ƒä»¬ç”±æ—¥æœ¬NTTå…¬å¸å¼€å‘ã€‚FCå…¶å¤–éƒ¨åŠ å¼ºæ–¹å¼æ˜¯é‡‡ç”¨é‡‘å±å¥—ï¼Œç´§å›ºæ–¹å¼ä¸ºèºä¸æ‰£ã€‚STæ¥å£é€šå¸¸ç”¨äº10Base-Fï¼ŒSCæ¥å£é€šå¸¸ç”¨äº100Base-FXã€‚<br>SDHé‡‡ç”¨çš„ä¿¡æ¯ç»“æ„ç­‰çº§ç§°ä¸ºåŒæ­¥ä¼ é€æ¨¡å—STM-N(Synchronous Transport Modeï¼ŒN&#x3D;1ï¼Œ4ï¼Œ 16æµç¨‹ï¼Œ64)ï¼Œæœ€åŸºæœ¬çš„æ¨¡å—ä¸ºSTM-1ï¼Œå››ä¸ªSTM-1åŒæ­¥å¤ç”¨æ„æˆSTM-4ï¼Œ16ä¸ªSTM-1æˆ–å››ä¸ª STM-4åŒæ­¥å¤ç”¨æ„æˆSTM-16ï¼Œå››ä¸ªSTM-16åŒæ­¥å¤ç”¨æ„æˆSTM-64ï¼Œç”šè‡³å››ä¸ªSTM-64åŒæ­¥å¤ç”¨æ„æˆSTM-256;SDHé‡‡ç”¨å—çŠ¶çš„å¸§ç»“æ„æ¥æ‰¿è½½ä¿¡æ¯ï¼Œæ¯å¸§ç”±çºµå‘9è¡Œå’Œæ¨ªå‘ 270Ã—Nåˆ—å­—èŠ‚ç»„æˆï¼Œæ¯ä¸ªå­—èŠ‚å«8bitã€‚<br>STM-4 å…‰æ¥å£å•å…ƒOI4&#x2F;OI4DåŠŸèƒ½æœ‰ï¼šæ¥æ”¶å’Œå‘é€STM-4 å…‰ä¿¡å·ï¼›æä¾›I-4ï¼ŒS-4.1ï¼ŒL-4.1 å’ŒL-4.2 æ ‡å‡†å…‰æ¨¡å—ï¼›æä¾›ä¸°å¯Œçš„å‘Šè­¦å’Œæ€§èƒ½äº‹ä»¶ï¼Œä¾¿äºè®¾å¤‡çš„ç®¡ç†å’Œç»´æŠ¤ï¼›æä¾›å…‰å£çº§åˆ«çš„å†…å¤–ç¯å›åŠŸèƒ½ï¼Œä¾¿äºå¿«é€Ÿå®šä½æ•…éšœï¼›æä¾›æ¿€å…‰å™¨è‡ªåŠ¨å…³æ–­åŠŸèƒ½ï¼›æ”¯æŒå¤ç”¨æ®µä¿æŠ¤å’Œå­ç½‘è¿æ¥ä¿æŠ¤ï¼ˆSNCPï¼‰ã€‚<br><img data-src="https://pic.imgdb.cn/item/664347050ea9cb1403c8b7be.png" alt=""/><br>äº¤å‰æ¨¡å—æä¾›32 x 32 VC4å…¨äº¤å‰ï¼Œ2016Ã—2016 VC12ä½é˜¶äº¤å‰æˆ–ç­‰æ•ˆçš„VC3äº¤å‰èƒ½åŠ› ï¼›äº¤å‰å¤„ç†å•å…ƒå’Œæ—¶é’Ÿå¤„ç†å•å…ƒå‡æ”¯æŒ1ï¼‹1å¤‡ä»½ ï¼›æä¾›æœ€å¤§27è·¯æ—¶é’Ÿæºï¼Œåˆ†åˆ«ä¸º12è·¯çº¿è·¯æ—¶é’Ÿæºã€12è·¯æ”¯è·¯æ—¶é’Ÿæºã€2è·¯BITSæ—¶é’Ÿæºå’Œ1ä¸ªå†…éƒ¨æ—¶é’Ÿæºã€‚çº¿è·¯æºæœ€å¤§å¯æä¾›20è·¯ï¼Œæ”¯è·¯æºæœ€å¤§å¯æä¾›18è·¯ ï¼›æ”¯æŒæ ‡å‡†å’Œæ‰©å±•SSMåè®® ï¼›æä¾›120æ¬§å§†æ¥å£çš„2è·¯å¤–æ—¶é’Ÿæ¥å£ï¼Œè¾“å…¥&#x2F;è¾“å‡ºå¯é€‰æ‹©2MHzæˆ–è€…2Mbit&#x2F;S ï¼Œå¯ä»¥é€šè¿‡120æ¬§å§†è½¬75æ¬§å§†çš„è½¬æ¥ç”µç¼†æä¾›75æ¬§å§†çš„å¤–æ—¶é’Ÿæ¥å£ï¼›æ”¯æŒå¤–æ—¶é’Ÿé€ä¼ DCCçš„åŠŸèƒ½ ã€‚<br><img data-src="https://pic.imgdb.cn/item/6643472c0ea9cb1403c8f4d9.png" alt=""/></p>
<h3 id="å››ã€å…‰çº¤ä¼ è¾“å®ä¹ ç»å†çš„è®¤è¯†"><a href="#å››ã€å…‰çº¤ä¼ è¾“å®ä¹ ç»å†çš„è®¤è¯†" class="headerlink" title="å››ã€å…‰çº¤ä¼ è¾“å®ä¹ ç»å†çš„è®¤è¯†"></a>å››ã€å…‰çº¤ä¼ è¾“å®ä¹ ç»å†çš„è®¤è¯†</h3><p>å…‰çº¤ä¼ è¾“å®ä¹ è¿‡ç¨‹æ˜¯åˆ†ç»„è¿›è¡Œï¼Œå‚ç…§è€å¸ˆè®²è§£çš„å†…å®¹ï¼Œå¯¹ç…§è®¾å¤‡è¿›è¡Œè¿æ¥è®¤è¯†ï¼Œè€å¸ˆåœ¨æ—è¾¹æŒ‡å¯¼ã€‚æœ¬æ¬¡å…‰çº¤ä¼ è¾“çš„å®ä¹ æ“ä½œå†…å®¹ä¸»è¦åŒ…æ‹¬è®¤è¯†å…‰çº¤é€šä¿¡è®¾å¤‡çš„å¤–è§‚åŠç»“æ„ï¼Œäº†è§£ä¼ è¾“è®¾å¤‡çš„å‹å·ã€å‚æ•°ã€æ€§èƒ½æŒ‡æ ‡å’Œè¿è¡Œæƒ…å†µï¼›æŒ‡å¯¼å…‰çº¤ä¼ è¾“è®¾å¤‡çš„å¸¸è§å‡ ç§ç»„ç½‘æ–¹å¼ï¼Œå³é“¾å½¢ã€ç¯å½¢ã€ç¯ç›¸åˆ‡ç­‰ï¼›å­¦ä¹ å…‰çº¤ä¼ è¾“è®¾å¤‡çš„åŸºæœ¬æ“ä½œè¿‡ç¨‹å’Œå¸¸è§„ç»´æŠ¤ç®¡ç†ï¼Œå¹¶ä¸”å¯¹SDHå…‰ä¼ è¾“ç‚¹å¯¹ç‚¹ç»„ç½‘è¿›è¡Œäº†åŸºæœ¬çš„é…ç½®ã€‚</p>
<h2 id="ç¬¬ä¸‰éƒ¨åˆ†-å®ä¹ æ€»ç»“"><a href="#ç¬¬ä¸‰éƒ¨åˆ†-å®ä¹ æ€»ç»“" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†  å®ä¹ æ€»ç»“"></a>ç¬¬ä¸‰éƒ¨åˆ†  å®ä¹ æ€»ç»“</h2><p>åœ¨è€å¸ˆçš„ç²¾å¿ƒæŒ‡å¯¼å’ŒåŒå­¦çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ä»¬åœ†æ»¡çš„å®Œæˆäº†ä¸ºæœŸä¸‰å‘¨çš„å®ä¹ ã€‚æœ¬æ¬¡å®ä¹ åˆ†ä¸ºäº¤æ¢å’Œä¼ è¾“ä¸¤ä¸ªæ¨¡å—ï¼Œç»è¿‡è¿™ä¸‰å‘¨çš„å­¦ä¹ ï¼Œè‡ªå·±æ”¶è·ä¸å°‘ã€‚<br>è¿™ä¸‰å‘¨çš„å®ä¹ æŠŠå¤§å­¦å‰ä¸‰å¹´æ‰€å­¦å¾ˆå¤šçš„ä¸œè¥¿éƒ½ç»“åˆèµ·æ¥ï¼Œè®©è‡ªå·±åœ¨ä¸“ä¸šçŸ¥è¯†è¿™æ–¹é¢å¾—åˆ°äº†å¾ˆå¥½çš„å¤ä¹ ã€‚è™½ç„¶å®ä¹ çš„çŸ¥è¯†éƒ½æ˜¯ä¹¦æœ¬ä¸Šçš„ï¼Œä½†æ˜¯ä¸å¤Ÿè¯¦ç»†ï¼Œè€Œä¸”è‡ªå·±å¯¹äºæŸäº›çŸ¥è¯†çš„ç†è§£ä¹Ÿä¸é€å½»ï¼Œè¿™æ¬¡å®ä¹ é€šè¿‡å®é™…çš„æ“ä½œï¼Œè®©è‡ªå·±çš„å¯¹çŸ¥è¯†ç†è§£å¾—æ›´ä¸ºé€å½»ã€‚<br>å…¶æ¬¡é”»ç‚¼äº†è‡ªå·±çš„åŠ¨æ‰‹èƒ½åŠ›ä»¥åŠå›¢é˜Ÿåˆä½œèƒ½åŠ›ã€‚è¿™æ¬¡å®ä¹ ä¸åƒä¸Šè¯¾ï¼Œåªæœ‰è€å¸ˆè®²ï¼Œè€Œæ˜¯è€å¸ˆåœ¨è®²äº†ä¹‹åè®©æˆ‘ä»¬è‡ªå·±å®é™…åŠ¨æ‰‹å»æ“ä½œï¼Œè‡ªå·±å†™è„šæœ¬å†™ä»£ç ï¼Œä¿®æ”¹å‚æ•°ï¼Œè§‚å¯Ÿé…ç½®ï¼Œé”»ç‚¼äº†æˆ‘çš„åŠ¨æ‰‹èƒ½åŠ›å¯¹é—®é¢˜çš„ç†è§£èƒ½åŠ›ã€‚æˆ‘ä»¬å®ä¹ æ˜¯ä»¥å°ç»„å½¢å¼è¿›è¡Œçš„ï¼Œæ¯æ¬¡è€å¸ˆå¸ƒç½®ä»»åŠ¡éƒ½æ˜¯å¸ƒç½®ç»™ä¸€ä¸ªå°ç»„ï¼Œå…·ä½“å°ç»„å†…éƒ¨æ€ä¹ˆåˆ†é…è€å¸ˆä¸ç®¡ï¼Œæˆ‘ä»¬å°ç»„åŒå­¦ä¸ºäº†èƒ½å¤Ÿå®Œæˆæˆ‘ä»¬å°ç»„çš„ä»»åŠ¡éƒ½å¾ˆè®¤çœŸçš„å‚ä¸è¿›æ¥ï¼ŒåŸ¹å…»äº†æˆ‘ä»¬çš„å›¢é˜Ÿåˆä½œèƒ½åŠ›ã€‚<br>æœ€åç°åœ¨è‡ªå·±å¤§å››ï¼Œæ­£åœ¨æ‰¾å·¥ä½œã€‚è‡ªå·±ä»ä¸€å¼€å§‹å°±æ‰¾ä¸å‡†æ–¹å‘ï¼Œè¿™æ¬¡å®ä¹ è¿‡åï¼Œè‡ªå·±å¯¹è‡ªå·±çš„ä¸“ä¸šæœ‰äº†æ›´æ·±çš„è®¤è¯†ï¼Œå¯¹è‡ªå·±æ‰¾å·¥ä½œä¹Ÿæœ‰æ›´æ˜ç¡®çš„æ–¹å‘ã€‚<br>è¿™æ¬¡å®ä¹ çš„æ”¶è·éå¸¸çš„å¤§ï¼Œæ„Ÿè°¢å­¦æ ¡å®‰æ’çš„è¿™æ¬¡ä¸“ä¸šå®ä¹ ï¼Œæ„Ÿè°¢è€å¸ˆåœ¨å®ä¹ è¿‡ç¨‹ä¸­å¯¹æˆ‘çš„æ•™å¯¼å’ŒåŒå­¦ä»¬å¯¹æˆ‘çš„å¸®åŠ©ã€‚</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>]]></content>
      <categories>
        <category>è¯¾ç¨‹è®¾è®¡</category>
        <category>é€šä¿¡å·¥ç¨‹</category>
        <category>å®ä¹ æŠ¥å‘Š</category>
      </categories>
  </entry>
  <entry>
    <title>éå†æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶æ‰¾å‡ºå¤§äº500KBçš„å›¾ç‰‡</title>
    <url>/4a64b591.html</url>
    <content><![CDATA[<p>æˆ‘ä»¬Cocos Creatorå¯¼å‡ºwebé¡¹ç›®åï¼Œæˆ‘ä»¬å‘ç°æœ‰äº›å›¾ç‰‡æ¯”è¾ƒå¤§ï¼Œæ”¾åœ¨æœåŠ¡å™¨ä¸ŠåŠ è½½çš„æ—¶é—´æ¯”è¾ƒé•¿ï¼Œæƒ³ç€å¯ä»¥æŠŠè¿™äº›å›¾ç‰‡å‹ç¼©åå†æ”¾ä¸Šå»ã€‚ä½†æ˜¯å¯¼å‡ºçš„é¡¹ç›®æ–‡ä»¶å¤¹æ¯”è¾ƒå¤šï¼Œå›¾ç‰‡æ‰¾èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œäºæ˜¯å°±æœ‰äº†ä¸‹é¢çš„è„šæœ¬å·¥å…·ã€‚</p>
<span id="more"></span>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>åŠŸèƒ½ï¼šéå†æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„å­æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ‰¾å‡ºå¤§äº500KBçš„å›¾ç‰‡ï¼Œå¹¶è¾“å‡ºè¯¥å›¾ç‰‡çš„ç»å¯¹è·¯å¾„ï¼Œç”Ÿæˆä¸€ä¸ªtxtæ–‡æœ¬ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_large_images</span>(<span class="params">directory, size_limit_kb, output_file</span>):</span><br><span class="line">    <span class="comment"># æ‰“å¼€è¾“å‡ºæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(output_file, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="comment"># éå†æŒ‡å®šç›®å½•</span></span><br><span class="line">        <span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(directory):</span><br><span class="line">            <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">                <span class="comment"># æ„å»ºæ–‡ä»¶å®Œæ•´è·¯å¾„</span></span><br><span class="line">                file_path = os.path.join(root, file)</span><br><span class="line">                <span class="comment"># è·å–æ–‡ä»¶å¤§å°</span></span><br><span class="line">                file_size_kb = os.path.getsize(file_path) / <span class="number">1024</span></span><br><span class="line">                <span class="comment"># æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸ºå›¾ç‰‡ä¸”å¤§å°æ˜¯å¦è¶…è¿‡æŒ‡å®šé™åˆ¶</span></span><br><span class="line">                <span class="keyword">if</span> file.lower().endswith((<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.jpg&#x27;</span>, <span class="string">&#x27;.jpeg&#x27;</span>, <span class="string">&#x27;.gif&#x27;</span>, <span class="string">&#x27;.bmp&#x27;</span>)) <span class="keyword">and</span> file_size_kb &gt; size_limit_kb:</span><br><span class="line">                    <span class="comment"># å°†æ–‡ä»¶è·¯å¾„å†™å…¥è¾“å‡ºæ–‡ä»¶</span></span><br><span class="line">                    f.write(file_path + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># è·å–ç”¨æˆ·è¾“å…¥çš„ç›®å½•è·¯å¾„</span></span><br><span class="line">    directory_to_search = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥è¦éå†çš„ç›®å½•è·¯å¾„: &#x27;</span>)</span><br><span class="line">    size_limit_kb = <span class="number">500</span>  <span class="comment"># å¤§å°é™åˆ¶ï¼Œå•ä½ä¸ºKB</span></span><br><span class="line">    output_file = <span class="string">&#x27;large_images.txt&#x27;</span>  <span class="comment"># è¾“å‡ºæ–‡ä»¶å</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿è¡Œå‡½æ•°</span></span><br><span class="line">    find_large_images(directory_to_search, size_limit_kb, output_file)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;æŸ¥æ‰¾å®Œæˆï¼Œç»“æœå·²ä¿å­˜åˆ° <span class="subst">&#123;output_file&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ—¥å¸¸ä»£ç </category>
        <category>Pythonåº”ç”¨</category>
      </categories>
  </entry>
  <entry>
    <title>é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·</title>
    <url>/7ae85f4f.html</url>
    <content><![CDATA[<h1 id="1-é€šä¿¡ç§‘æŠ€çš„åœ°ä½"><a href="#1-é€šä¿¡ç§‘æŠ€çš„åœ°ä½" class="headerlink" title="1.é€šä¿¡ç§‘æŠ€çš„åœ°ä½"></a>1.é€šä¿¡ç§‘æŠ€çš„åœ°ä½</h1><p>é€šä¿¡ç§‘æŠ€æ—¢æ˜¯æ•´ä¸ªç§‘å­¦æŠ€æœ¯çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œåˆæ˜¯é€šä¿¡ç”Ÿäº§åŠ›ä¸­è¶Šæ¥è¶Šçªå‡ºå’Œå…·æœ‰é‡è¦æ„ä¹‰çš„å› ç´ ã€‚<br>ç›®å‰ï¼Œè½½æ³¢ã€å¾®æ³¢ã€å…‰çº¤ã€å«æ˜Ÿã€ç§»åŠ¨é€šä¿¡å’ŒInternetå·²åœ¨å„ç§é€šä¿¡ä¸šåŠ¡ä¸­å¹¿æ³›åº”ç”¨æ²¡ç”µè¯å’Œç§»åŠ¨ç»ˆç«¯è¿›å…¥äº†å¤§éƒ¨åˆ†å®¶åº­ã€‚é€šä¿¡ï¼Œé€šä¿¡éƒ¨é—¨æœ¬èº«å°±æ˜¯ä¸€ä¸ªæŠ€æœ¯å¯†é›†å‹çš„è¡Œä¸šã€‚å› æ­¤é€šä¿¡ç§‘æŠ€åœ¨ä¸–ç•Œç§‘æŠ€å’Œç”Ÿäº§åŠ›å‘å±•ä¸­æœ‰è¿™é‡è¦åœ°ä½ã€‚<br>ä»ä¸–ç•ŒèŒƒå›´æ¥çœ‹ï¼Œé€šä¿¡æŠ€æœ¯æ­£å‘ç€æ•°å­—åŒ–ã€ç»¼åˆåŒ–ã€æ™ºèƒ½åŒ–ã€ä¸ªäººåŒ–å’Œæ ‡å‡†åŒ–æ–¹å‘å‘å±•ã€‚<br>ï¼ˆ1ï¼‰æ•°å­—åŒ–å°±æ˜¯åœ¨é€šä¿¡ç½‘ä¸Šå…¨é¢ä½¿ç”¨æ•°å­—æŠ€æœ¯ï¼ŒåŒ…æ‹¬æ•°å­—ä¼ è¾“ã€æ•°å­—äº¤æ¢å’Œæ•°å­—ç»ˆç«¯ç­‰ã€‚<br>ï¼ˆ2ï¼‰ç»¼åˆåŒ–å°±æ˜¯æŠŠæ¥è‡ªå„ç§ä¿¡æ¯æºçš„ä¸šåŠ¡ç»¼åˆåœ¨ä¸€ä¸ªæ•°å­—é€šä¿¡ç½‘ä¸­åŠ å·¥ï¼Œä¸ºç”¨æˆ·æä¾›ç»¼åˆæ€§æœåŠ¡ã€‚<br>ï¼ˆ3ï¼‰æ™ºèƒ½åŒ–æ˜¯æŒ‡åœ¨é€šä¿¡ç½‘ä¸­å¼•è¿›æ›´å¤šçš„æ™ºèƒ½ï¼Œå½¢æˆæ‰€è°“çš„æ™ºèƒ½ç½‘ï¼Œä»è€Œæé«˜ç½‘è·¯çš„ä¸šåŠ¡åº”å˜èƒ½åŠ›ï¼Œå¯¹ç½‘è·¯èµ„æºè¿›è¡Œé‡åˆ†é…ï¼Œéšæ—¶æä¾›æ»¡è¶³å„ç±»ç”¨æˆ·éœ€è¦çš„ä¸šåŠ¡ã€‚<br>ï¼ˆ4ï¼‰å®½å¸¦åŒ–æ˜¯æŒ‡å®½å¸¦çš„æ™®åŠã€‚å®½å¸¦æŒ‡çš„æ˜¯ç”¨æ¥ä¼ è¾“å¤§å®¹é‡ä¿¡æ¯çš„å®½å¸¦ï¼Œå°±ç½‘ç»œç»ˆç«¯çš„ä¼ è¾“é€Ÿåº¦è€Œè¨€ï¼Œé«˜äºå½“æ—¶å†å²æ—¶æœŸä¸€èˆ¬ä¼ è¾“é€Ÿåº¦çš„ï¼Œå°±ç§°ä¸ºâ€œå®½å¸¦â€ã€‚å®½å¸¦æ˜¯ç›¸å¯¹äºçª„å¸¦è€Œè¨€çš„ã€‚<br>ï¼ˆ5ï¼‰ä¸ªäººåŒ–æ˜¯ç”±æŒ‡â€œæœåŠ¡åˆ°å®¶â€çš„é€šä¿¡æ–¹å¼å˜ä¸ºâ€œæœåŠ¡åˆ°äººâ€ã€‚ä½¿ç”¨æˆ·éšæ—¶å¯¹åœ°å¯ä»¥ä¸ä»»ä½•åœ°æ–¹çš„å¦ä¸€ä¸ªäººè¿›è¡Œé€šä¿¡ã€‚<br>ï¼ˆ6ï¼‰æ ‡å‡†åŒ–æ˜¯æŒ‡éšç€é€šä¿¡ç½‘çš„æ¼”å˜ä¸æ–­åˆ¶å®šæˆ–ä¿®è®¢å…¨å›½ç»Ÿä¸€ç½‘ç»œæ ‡å‡†ä»¥åŠæœ‰å…³å›½é™…æ ‡å‡†çš„è¿‡ç¨‹ã€‚</p>
<h1 id="2-é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„å«ä¹‰å³ç‰¹ç‚¹"><a href="#2-é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„å«ä¹‰å³ç‰¹ç‚¹" class="headerlink" title="2.é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„å«ä¹‰å³ç‰¹ç‚¹"></a>2.é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„å«ä¹‰å³ç‰¹ç‚¹</h1><h2 id="2-1-é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„å«ä¹‰"><a href="#2-1-é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„å«ä¹‰" class="headerlink" title="2.1 é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„å«ä¹‰"></a>2.1 é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„å«ä¹‰</h2><p>é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·ï¼Œæ˜¯ç¤¾ä¼šé“å¾·åŸåˆ™åœ¨é€šä¿¡è¡Œä¸šçš„å…·ä½“è¿ç”¨ï¼Œæ˜¯é€šä¿¡ç§‘æŠ€äººå‘˜åœ¨èŒä¸šæ´»åŠ¨ä¸­ä¸ºè´¯å½»ç¤¾ä¼šä¸»ä¹‰é“å¾·åŸåˆ™è€Œéµå¾ªçš„å…·ä½“è¡Œä¸ºå‡†åˆ™ï¼Œä¹Ÿæ˜¯ç¤¾ä¼šè¯„ä»·é€šä¿¡ç§‘æŠ€äººå‘˜é€šè¿‡ã€æ˜¯éã€è£è¾±ã€å–„æ¶çš„æ ‡å‡†ã€‚</p>
<h2 id="2-2-é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„ä¸¤é‡æ€§"><a href="#2-2-é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„ä¸¤é‡æ€§" class="headerlink" title="2.2 é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„ä¸¤é‡æ€§"></a>2.2 é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„ä¸¤é‡æ€§</h2><p>é€šä¿¡ç§‘æŠ€äººå‘˜æ˜¯æ•´ä¸ªç§‘æŠ€é˜Ÿä¼çš„ä¸€éƒ¨åˆ†ï¼Œåˆæ˜¯é€šä¿¡ä¼ä¸šçš„ä¸»åŠ›å†›ï¼Œæ‰¿æ‹…ç€å‘å±•é€šä¿¡ç”Ÿäº§åŠ›ã€ç¡®ä¿é€šä¿¡ç•…é€šæ— é˜»çš„ç¹é‡ä»»åŠ¡ã€‚å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œä¸ä»…æ˜¯è¦æŒæ¡ç°ä»£åŒ–çš„ç§‘å­¦æŠ€æœ¯ï¼Œè¿˜è¦è®²ç©¶èŒä¸šé“å¾·ï¼Œä½¿è‡ªå·±åœ¨å¤„ç†ä¸ªäººä¸è‡ªç„¶ç•Œçš„å…³ç³»æ–¹é¢ï¼Œå¢å¼ºè¿›å–ç²¾ç¥ï¼›åœ¨å¤„ç†ä¸ªäººä¸ç¤¾ä¼šã€ä¸ä»–äººçš„å…³ç³»æ–¹é¢ï¼Œå¢å¼ºåè°ƒæ€§ï¼Œå°†è‡ªå·±æ‰€æŒæ¡çš„ç°ä»£ç§‘å­¦æŠ€æœ¯çš„ä½œç”¨å……åˆ†å‘æŒ¥å‡ºæ¥ã€‚å¦å¤–ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜æ‰€ä»äº‹çš„èŒä¸šæ´»åŠ¨ï¼Œæ—¢æ˜¯ç§‘å­¦æŠ€æœ¯çš„èŒä¸šåŠ³åŠ¨ï¼Œåˆæ˜¯é€šä¿¡çš„èŒä¸šåŠ³åŠ¨ï¼Œæ—¢å…·æœ‰ä¸€èˆ¬ç§‘æŠ€èŒä¸šæ´»åŠ¨çš„ç‰¹ç‚¹ï¼Œåˆå…·æœ‰é€šä¿¡èŒä¸šæ´»åŠ¨çš„ç‰¹ç‚¹ã€‚é€šä¿¡ç§‘æŠ€äººå‘˜åœ¨é€šä¿¡ç§‘æŠ€çš„èŒä¸šæ´»åŠ¨ä¸­ï¼Œåº”æ—¢éµå¾ªä¸€èˆ¬ç§‘æŠ€äººå‘˜çš„èŒä¸šé“å¾·ï¼Œåˆè®²ç©¶å’Œéµå¾ªé€šä¿¡ç§‘æŠ€äººå‘˜çš„èŒä¸šé“å¾·ã€‚å› æ­¤ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜çš„èŒä¸šé“å¾·å…·æœ‰ä¸¤é‡æ€§ã€‚</p>
<h2 id="2-3-é€šä¿¡ç§‘æŠ€èŒä¸šçš„ç‰¹ç‚¹"><a href="#2-3-é€šä¿¡ç§‘æŠ€èŒä¸šçš„ç‰¹ç‚¹" class="headerlink" title="2.3 é€šä¿¡ç§‘æŠ€èŒä¸šçš„ç‰¹ç‚¹"></a>2.3 é€šä¿¡ç§‘æŠ€èŒä¸šçš„ç‰¹ç‚¹</h2><p>é€šä¿¡ç§‘æŠ€æ˜¯ç§‘å­¦æŠ€æœ¯åœ¨é€šä¿¡ä¸­çš„è¿ç”¨ï¼Œå®ƒå—é€šä¿¡èŒä¸šç‰¹ç‚¹çš„åˆ¶çº¦ã€‚ä¸å…¶ä»–ç§‘æŠ€èŒä¸šç›¸æ¯”ï¼Œé€šä¿¡ç§‘æŠ€èŒä¸šæ—¢å…·æœ‰ä¸€èˆ¬ç§‘æŠ€èŒä¸šçš„ç‰¹ç‚¹ï¼Œåˆå…·æœ‰è‡ªèº«çš„ç‰¹ç‚¹ã€‚å…·ä½“æ¥è¯´ï¼Œé€šä¿¡ç§‘æŠ€èŒä¸šçš„ç‰¹ç‚¹ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ã€‚<br>ï¼ˆ1ï¼‰ä»é€šä¿¡ç§‘æŠ€åŠ³åŠ¨çš„ç‰¹ç‚¹çœ‹ï¼Œé€šä¿¡ç§‘æŠ€èŒä¸šå…·æœ‰å®è·µæ€§ã€åº”ç”¨æ€§ã€‚é€šä¿¡æ—¢æ˜¯æŠŠæ¢ç´¢ç§‘å­¦ç†è®ºä¸æŠ€æœ¯å®è·µç›¸ç»“åˆï¼ŒæŠŠè„‘åŠ›åŠ³åŠ¨ä¸ä¸€å®šçš„ä½“åŠ›åŠ³åŠ¨ç›¸ç»“åˆï¼ŒæŠŠç§‘å­¦çŸ¥è¯†è¿…é€Ÿåœ°è½¬åŒ–ä¸ºé€šä¿¡ç”Ÿäº§çš„æ‰‹æ®µï¼Œä¸ºç¤¾ä¼šæœåŠ¡ï¼Œä¸ºäººç±»é€ ç¦ã€‚é€šä¿¡ç§‘æŠ€åŠ³åŠ¨æ˜¯å°†åŸºç¡€ç§‘å­¦çš„ä¸€èˆ¬åŸç†å’Œé€šç”¨æ€§æŠ€æœ¯çš„ç†è®ºï¼Œè¿ç”¨äºè§£å†³é€šä¿¡ç”Ÿäº§çš„è®¾å¤‡æŠ€æœ¯é—®é¢˜çš„ä¸€ç§â€œç‰©åŒ–â€åŠ³åŠ¨ã€‚å®ƒä¸ä»…å…·æœ‰ä¸€èˆ¬ç§‘æŠ€åŠ³åŠ¨çš„æ¢ç´¢æ€§ã€åˆ›é€ æ€§ï¼Œæ›´å…·æœ‰å®è·µæ€§å’Œå®ç”¨æ€§ã€‚<br>ï¼ˆ2ï¼‰ä»é€šä¿¡ç§‘æŠ€åŠ³åŠ¨çš„ç›®çš„å’Œç»“æœçœ‹ï¼Œé€šä¿¡ç§‘æŠ€èŒä¸šå…·æœ‰ä¸¥è°¨æ€§ã€å‡†ç¡®æ€§ã€‚é€šä¿¡ç§‘æŠ€åŠ³åŠ¨çš„äº§å“æ˜¯ä¸€ç§ç‰¹æ®Šçš„äº§å“â€”â€”â€œæ•ˆç”¨â€ã€‚å…¶åŠ³åŠ¨è¿‡ç¨‹å’Œæ¶ˆè´¹è¿‡ç¨‹ä¸å¯åˆ†å‰²ã€‚é€šä¿¡ç§‘æŠ€åŠ³åŠ¨è¿‡ç¨‹ä¸ç”¨æˆ·çš„ä½¿ç”¨è¿‡ç¨‹åŒæ—¶è¿›è¡Œã€‚å› æ­¤ï¼Œé€šä¿¡ç§‘æŠ€åŠ³åŠ¨è¿‡ç¨‹ä¸èƒ½å‘ç”Ÿå·®é”™ï¼Œä¸€æ—¦å‘ç”Ÿï¼Œå°†ç»™ç”¨æˆ·é€ æˆç‰©è´¨ã€ç²¾ç¥ã€ç»æµã€äººèº«å®‰å…¨æ–¹é¢çš„æŸå¤±å’Œå±å®³ã€‚æ‰€ä»¥ï¼Œä»äº‹é€šä¿¡ç§‘æŠ€åŠ³åŠ¨ï¼Œé¦–å…ˆè¦æ ‘ç«‹ä¸€ä¸ä¸è‹Ÿã€ä¸¥è°¨ã€å‡†ç¡®çš„è§‚å¿µã€‚<br>ï¼ˆ3ï¼‰ä»é€šä¿¡ç§‘æŠ€å…¨ç¨‹å…¨ç½‘ã€è”åˆä½œä¸šçš„åŠ³åŠ¨è¿‡ç¨‹çœ‹ï¼Œé€šä¿¡ç§‘æŠ€èŒä¸šå…·æœ‰é«˜åº¦çš„ç»Ÿä¸€æ€§ã€‚é¦–å…ˆï¼Œè¦æ±‚ä¼ä¸šä¸ä¼ä¸šä¹‹é—´ã€ä¼ä¸šå†…çš„å„ä¸ªå·¥åºä¹‹é—´ã€‚ä¸Šä¸€ç­ä¸‹ä¸€ç­ä¹‹é—´ã€æ˜¼å¤œä¹‹é—´ï¼Œå¿…é¡»ç´§å¯†è¡”æ¥ã€é…åˆé»˜å¥‘ã€åè°ƒä¸€è‡´ã€‚å…¶æ¬¡ï¼Œä¸ºäº†ç¡®ä¿é€šä¿¡ç§‘æŠ€åŠ³åŠ¨çš„æ•´ä½“æ€§ï¼Œä¾èµ–çºªå¾‹ã€æ³•å¾‹ã€è§„ç« åˆ¶åº¦çš„ç®¡ç†å’Œçº¦æŸå°¤ä¸ºé‡è¦ã€‚<br>ï¼ˆ4ï¼‰ä»é€šä¿¡ç§‘æŠ€åŠ³åŠ¨çš„äººé™…å…³ç³»çœ‹ï¼Œå…·æœ‰å¹¿å’Œè¿œçš„ç‰¹ç‚¹ã€‚å¹¿ï¼Œæ˜¯æŒ‡é€šä¿¡ç§‘æŠ€äººå‘˜åœ¨åŠ³åŠ¨ä¸­äººé™…å…³ç³»å¹¿æ³›ï¼Œä¸ä»…è¦å¤„ç†æœ¬å·¥åºé—´ä¸å…¶ä»–ç§‘æŠ€äººå‘˜çš„å…³ç³»ã€ä¸ç®¡ç†äººå‘˜å’Œè¾…åŠ©å·¥ä½œäººå‘˜çš„å…³ç³»ï¼Œè¿˜è¦å¤„ç†ä¸ªäººä¸å…¶ä»–å·¥åºé—´ã€å…¶ä»–ç­ç»„é—´å„ç±»äººå‘˜çš„å…³ç³»ã€‚è¿œï¼Œæ˜¯æŒ‡é€šä¿¡ç§‘æŠ€äººå‘˜è¿˜è¦å¤„ç†å¥½ç›¸è·ç”šè¿œã€ç´ ä¸ç›¸è¯†çš„åŒè¡Œå’Œå…¶ä»–å·¥ä½œäººå‘˜çš„å…³ç³»ã€‚è¿™äº›å…³ç³»å¦‚æœå¤„ç†ä¸å¥½ï¼ŒåŠ¿å¿…é€ æˆé€šä¿¡å—é˜»ç”šè‡³ä¸­æ–­ï¼Œç›´æ¥å½±å“åˆ°é€šä¿¡ä»»åŠ¡çš„å®Œæˆã€‚å› æ­¤ï¼Œå’Œè°ä¸€è‡´çš„äººé™…å…³ç³»ï¼Œæ˜¯é€šä¿¡èŒä¸šæŠ€æœ¯ç‰¹ç‚¹æ‰€è¦æ±‚çš„ã€‚<br>##2.4 é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„ç‰¹ç‚¹<br>é€šä¿¡ç§‘æŠ€èŒä¸šçš„ç‰¹ç‚¹ï¼Œå†³å®šäº†é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·ä¹Ÿå…·æœ‰è‡ªèº«çš„ç‰¹ç‚¹ã€‚å…·ä½“è¡¨ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ã€‚<br>ï¼ˆ1ï¼‰é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·æ˜¯ä¸€åˆ‡é€šä¿¡å·¥ä½œçš„å‡ºå‘ç‚¹å’Œè½è„šç‚¹ã€‚é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·æ˜¯æ£€éªŒé€šä¿¡è¡Œä¸šé“å¾·çš„æ ‡å‡†ï¼Œå¯ä»æ³•å¾‹ä¸Šçº¦æŸé€šä¿¡ç§‘æŠ€äººå‘˜è´¯å½»æ‰§è¡Œä¸ºäººæ°‘æœåŠ¡çš„å®—æ—¨ã€‚<br>ï¼ˆ2ï¼‰é€šä¿¡èŒä¸šé“å¾·ä½“ç°äº†é€šä¿¡çš„é›†ä¸­ç»Ÿä¸€æ€§ã€‚é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·è¦æ±‚åœ¨é€šä¿¡ç”Ÿäº§ä¸­ï¼Œå¿…é¡»æ ‘ç«‹å…¨ç¨‹å…¨ç½‘çš„æ•´ä½“è§‚å¿µï¼Œæœä»ç»Ÿä¸€æŒ‡æŒ¥è°ƒåº¦ï¼Œå¦å¤–ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·è¦æ±‚é€šä¿¡ç§‘æŠ€äººå‘˜è¦åŠ å¼ºå›¢ç»“åä½œï¼Œè¦æœ‰ç»„ç»‡ã€æœ‰çºªå¾‹ã€‚<br>ï¼ˆ3ï¼‰é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·ä½“ç°äº†é€šä¿¡â€œè¿…é€Ÿã€å‡†ç¡®ã€å®‰å…¨ã€æ–¹ä¾¿â€çš„æœåŠ¡æ–¹é’ˆã€‚é€šä¿¡çš„æœåŠ¡æ–¹é’ˆåæ˜ äº†é€šä¿¡çš„åŸºæœ¬ç‰¹ç‚¹å’Œå·¥ä½œæ ‡å‡†ï¼Œä¹Ÿåæ˜ äº†ç¤¾ä¼šå’Œäººæ°‘ç¾¤ä¼—å¯¹é€šä¿¡çš„åŸºæœ¬è¦æ±‚ã€‚é€šä¿¡çš„æ•ˆç”¨åœ¨äºç¼©çŸ­æ—¶é—´å’Œç©ºé—´è·ç¦»ï¼Œæ—¶é—´è¦æ±‚çŸ­ï¼Œæ•ˆç”¨è¦æ±‚å‡†ç¡®ï¼Œä¼ é€’è¦æ±‚å®‰å…¨ï¼ŒæœåŠ¡è¦å»ä¾¿åˆ©ã€‚</p>
<h1 id="3-é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„åŸºæœ¬è¦æ±‚"><a href="#3-é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„åŸºæœ¬è¦æ±‚" class="headerlink" title="3.é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„åŸºæœ¬è¦æ±‚"></a>3.é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„åŸºæœ¬è¦æ±‚</h1><p>ç”±äºé€šä¿¡ç§‘æŠ€èŒä¸šå…·æœ‰å®è·µæ€§å’Œåº”ç”¨æ€§ã€ä¸¥è°¨æ€§å’Œå‡†ç¡®æ€§ã€é«˜åº¦çš„é›†ä¸­ç»Ÿä¸€æ€§ä»¥åŠâ€œå¹¿â€å’Œâ€œè¿œâ€çš„ç‰¹æ€§ï¼Œå› æ­¤ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜åœ¨ä»äº‹é€šä¿¡ç§‘æŠ€çš„èŒä¸šæ´»åŠ¨ä¸­ï¼Œé™¤åº”å…·æœ‰ä¸€èˆ¬é€šä¿¡äººå‘˜çš„èŒä¸šé“å¾·å’Œä¸€èˆ¬ç§‘æŠ€äººå‘˜çš„èŒä¸šé“å¾·å¤–ï¼Œè¿˜åº”å…·æœ‰é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·ã€‚é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„åŸºæœ¬è¦æ±‚å¦‚ä¸‹ï¼š</p>
<h2 id="3-1-é€šä¿¡ç§‘æŠ€äººå‘˜è¦æœ‰å…¨ç¨‹å…¨ç½‘çš„è§‚å¿µï¼Œä¸èƒ½ææœ¬ä½ä¸»ä¹‰"><a href="#3-1-é€šä¿¡ç§‘æŠ€äººå‘˜è¦æœ‰å…¨ç¨‹å…¨ç½‘çš„è§‚å¿µï¼Œä¸èƒ½ææœ¬ä½ä¸»ä¹‰" class="headerlink" title="3.1 é€šä¿¡ç§‘æŠ€äººå‘˜è¦æœ‰å…¨ç¨‹å…¨ç½‘çš„è§‚å¿µï¼Œä¸èƒ½ææœ¬ä½ä¸»ä¹‰"></a>3.1 é€šä¿¡ç§‘æŠ€äººå‘˜è¦æœ‰å…¨ç¨‹å…¨ç½‘çš„è§‚å¿µï¼Œä¸èƒ½ææœ¬ä½ä¸»ä¹‰</h2><p>é€šä¿¡ç§‘æŠ€å·¥ä½œçš„è¡Œä¸šç‰¹ç‚¹ï¼Œè¦æ±‚é€šä¿¡ç§‘æŠ€äººå‘˜å¿…é¡»æ ‘ç«‹ç€çœ¼å…¨ç¨‹å…¨ç½‘çš„è§‚å¿µï¼Œåå¯¹æœ¬ä½ä¸»ä¹‰çš„æ€æƒ³ä½œé£ã€‚è¿™æ˜¯ç¤¾ä¼šä¸»ä¹‰ã€é›†ä½“ä¸»ä¹‰æ€æƒ³åœ¨é€šä¿¡ç§‘æŠ€èŒä¸šæ´»åŠ¨ä¸­çš„é‡è¦ä½“ç°ï¼Œæ˜¯é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„é‡è¦è§„èŒƒã€‚æœ¬ä½ä¸»ä¹‰æ˜¯ä»æœ¬åœ°åŒºã€æœ¬éƒ¨é—¨çš„åˆ©ç›Šå‡ºå‘ï¼Œä¸é¡¾å¤§å±€ã€ä¸é¡¾æ•´ä½“ã€ä¸é¡¾å…¶ä»–éƒ¨é—¨çš„ä¸è‰¯æ€æƒ³ä½œé£ï¼Œæ˜¯æ”¾å¤§äº†çš„ä¸ªäººä¸»ä¹‰ã€‚è¿™å°±è¦æ±‚é€šä¿¡ç§‘æŠ€äººå‘˜æ ‘ç«‹æ•´ä½“è§‚å¿µï¼Œè¦ä¸€åˆ‡ä»æ•´ä½“çš„åˆ©ç›Šå‡ºå‘ï¼Œè¯†å¤§ä½“ã€é¡¾å¤§å±€ï¼Œç»´æŠ¤æ•´ä½“åˆ©ç›Šã€‚<br>å…¨ç¨‹å…¨ç½‘é€šä¿¡ï¼Œè¦æ±‚æ¯ä¸€ä¸ªå±€éƒ¨ã€æ¯ä¸€ä¸ªå²—ä½éƒ½è¦é¦–å…ˆåšå¥½æœ¬èŒå·¥ä½œã€‚ä»»ä½•ä¸€ä¸ªéƒ¨é—¨ã€ä¸€ä¸ªå²—ä½çš„å¤±è°ƒéƒ½ä¼šä½¿é€šä¿¡å‘ç”Ÿæ•…éšœï¼Œå—åˆ°é˜»ç¢ã€‚é€šä¿¡ç§‘æŠ€å·¥ä½œè¿™ä¸ªå²—ä½è‚©è´Ÿçš„è´£ä»»ï¼Œè¾ƒä¹‹å…¶ä»–å·¥ç§æ›´ä¸ºé‡å¤§ï¼Œç¨æœ‰å¤±è¯¯ï¼Œå½±å“æ‰€åŠå°†ä¸ä»…ä»…æ˜¯ä¸€ä¸¤ä¸ªç”¨æˆ·ï¼Œå¾€å¾€ä¼šä½¿å¤§é¢ç§¯çš„é€šä¿¡å—åˆ°å¹²æ‰°ã€‚å› æ­¤ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜ä¸€å®šè¦ä¸¥æ ¼è¦æ±‚è‡ªå·±ï¼Œç«‹è¶³äºæœ¬èŒï¼Œä¸ºç¡®ä¿å…¨ç¨‹å…¨ç½‘çš„é€šä¿¡ç•…é€šï¼Œå…¢å…¢ä¸šä¸šã€å‹¤å‹¤æ³æ³åšå¥½ç§‘æŠ€å·¥ä½œã€‚<br>åœ¨å¼€é€šç”µè·¯ã€ç»´ä¿®å¼•è¿›ã€å®‰è£…è®¾å¤‡ç­‰ç§‘æŠ€å·¥ä½œä¸­è¦åšåˆ°æ”¯çº¿æœä»å¹²çº¿ã€å±€éƒ¨æœä»å…¨å±€ã€ä¸‹çº§æœä»ä¸Šçº§ã€åœ°æ–¹æœä»ä¸­å¤®ï¼›åœ¨å¤„ç†ä¼ä¸šé—´ã€å±€é™…é—´ã€å·¥åºé—´ã€ç­ç»„é—´çš„å…³ç³»ä¸­ï¼Œè¦ä¸»åŠ¨ä¸ºå¯¹æ–¹ç€æƒ³ï¼Œç´§å¯†é…åˆã€ç›¸äº’æ”¯æŒï¼Œä¸€åˆ‡ä»å®ç°å…¨ç¨‹å…¨ç½‘çš„é€šä¿¡å‡ºå‘ã€‚è¦å…‹æœä¸ªäººä¸»ä¹‰å’Œå°å›¢ä½“ä¸»ä¹‰ã€‚å› ä¸ºåœ¨ä¸ªäººä¸»ä¹‰æ€æƒ³çš„æ”¯é…ä¸‹ï¼Œä¸ºäº†ä¸ªäººåˆ©ç›Šå’Œå°å›¢ä½“åˆ©ç›Šï¼Œå¸¸å¸¸ä¼šä½¿å›½å®¶çš„ï¼Œé›†ä½“çš„åˆ©ç›Šå—åˆ°æŸå®³ï¼Œåœ¨äº’è”äº’é€šä¸Šä¸è‡ªè§‰åœ°ç»™å…¨ç¨‹å…¨ç½‘çš„é€šä¿¡é€ æˆæ¶åŠ£å½±å“ã€‚è¦ç«‹è¶³äºæœ¬èŒï¼Œä»è‡ªå·±åšèµ·ã€‚</p>
<h2 id="3-2-é€šä¿¡ç§‘æŠ€äººå‘˜è¦å‘æ‰¬åä½œç²¾ç¥ï¼Œåè°ƒå¥½äººé™…å…³ç³»ï¼Œå‘æ‰¬ç§‘å­¦æŠ€æœ¯çš„æ°‘ä¸»ç²¾ç¥"><a href="#3-2-é€šä¿¡ç§‘æŠ€äººå‘˜è¦å‘æ‰¬åä½œç²¾ç¥ï¼Œåè°ƒå¥½äººé™…å…³ç³»ï¼Œå‘æ‰¬ç§‘å­¦æŠ€æœ¯çš„æ°‘ä¸»ç²¾ç¥" class="headerlink" title="3.2 é€šä¿¡ç§‘æŠ€äººå‘˜è¦å‘æ‰¬åä½œç²¾ç¥ï¼Œåè°ƒå¥½äººé™…å…³ç³»ï¼Œå‘æ‰¬ç§‘å­¦æŠ€æœ¯çš„æ°‘ä¸»ç²¾ç¥"></a>3.2 é€šä¿¡ç§‘æŠ€äººå‘˜è¦å‘æ‰¬åä½œç²¾ç¥ï¼Œåè°ƒå¥½äººé™…å…³ç³»ï¼Œå‘æ‰¬ç§‘å­¦æŠ€æœ¯çš„æ°‘ä¸»ç²¾ç¥</h2><p>ç”±äºé€šä¿¡çš„è”åˆä½œä¸šï¼Œæ—¢æœ‰æ˜ç¡®çš„åˆ†å·¥å’Œä¸¥æ˜çš„å²—ä½èŒè´£ï¼Œåˆæœ‰ç´§å¯†çš„è¡”æ¥ã€‚å› æ­¤ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜è¦åšåˆ°ä¸»åŠ¨åä½œå’Œé…åˆï¼Œå‘æŒ¥ä¸»è§‚èƒ½åŠ¨æ€§ï¼Œå……åˆ†å‘æŒ¥å›¢ç»“åä½œç²¾ç¥ï¼Œåªæœ‰å¦‚æ­¤ï¼Œæ‰èƒ½ä¼˜è´¨é«˜æ•ˆåœ°å®Œæˆé€šä¿¡ä»»åŠ¡ã€‚<br>å‘æ‰¬åä½œç²¾ç¥ï¼Œé¦–å…ˆè¦è¥é€ å’Œè°çš„äººé™…å…³ç³»ï¼Œè¿™æ˜¯å®ç°å…¨ç¨‹å…¨ç½‘è”åˆä½œä¸šçš„é‡è¦ä¿è¯ã€‚å› æ­¤ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜ä¹‹é—´è¦åšåˆ°äº’æ•¬ã€äº’å°Šã€äº’åŠ©ã€äº’è°…ã€‚å…¶æ¬¡è¦æ ‘ç«‹é›†ä½“è£èª‰æ„Ÿã€‚è¦ç ´é™¤çŸ¥è¯†å’ŒæŠ€æœ¯ç§æœ‰çš„è§‚å¿µï¼Œç§¯æå¼€å±•å­¦æœ¯æ–¹é¢çš„äº¤æµï¼Œä¿ƒè¿›é€šä¿¡ç§‘æŠ€æ°´å¹³çš„å…¨é¢æé«˜ã€‚æœ€åè¦å‘æ‰¬ç§‘å­¦æŠ€æœ¯çš„æ°‘ä¸»ç²¾ç¥ã€‚å·¥ä½œä¸åˆ†å½¼æ­¤ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜åœ¨åˆ†é…ä»»åŠ¡æ—¶ï¼Œä¸æ–¤æ–¤è®¡è¾ƒï¼Œä¸ç›¸äº’æ‰¯çš®ï¼Œè¦ç´§å¯†é…åˆï¼Œå……åˆ†è°ƒåŠ¨å„æ–¹é¢çš„ç§¯ææ€§ï¼Œå…±åŒå®Œæˆç§‘ç ”è®¾è®¡å’Œè®¾å¤‡ç»´æŠ¤ç­‰ä»»åŠ¡ï¼Œè¦å¼˜æ‰¬æŠŠå›°éš¾ç•™ç»™è‡ªå·±ã€æ–¹ä¾¿è®©ç»™åˆ«äººçš„é£æ ¼ã€‚</p>
<h2 id="3-3-é€šä¿¡ç§‘æŠ€äººå‘˜è¦å…·æœ‰é«˜åº¦çš„ç»„ç»‡çºªå¾‹æ€§ã€å¼ºçƒˆçš„ç¤¾ä¼šè´£ä»»æ„Ÿ"><a href="#3-3-é€šä¿¡ç§‘æŠ€äººå‘˜è¦å…·æœ‰é«˜åº¦çš„ç»„ç»‡çºªå¾‹æ€§ã€å¼ºçƒˆçš„ç¤¾ä¼šè´£ä»»æ„Ÿ" class="headerlink" title="3.3 é€šä¿¡ç§‘æŠ€äººå‘˜è¦å…·æœ‰é«˜åº¦çš„ç»„ç»‡çºªå¾‹æ€§ã€å¼ºçƒˆçš„ç¤¾ä¼šè´£ä»»æ„Ÿ"></a>3.3 é€šä¿¡ç§‘æŠ€äººå‘˜è¦å…·æœ‰é«˜åº¦çš„ç»„ç»‡çºªå¾‹æ€§ã€å¼ºçƒˆçš„ç¤¾ä¼šè´£ä»»æ„Ÿ</h2><p>é€šä¿¡æ˜¯é«˜åº¦é›†ä¸­ç»Ÿä¸€ã€ä¸äººä»¬å·¥ä½œå’Œç”Ÿæ´»æ¯æ¯ç›¸å…³çš„æå…¶å¤æ‚çš„åºå¤§ç³»ç»Ÿï¼Œå› æ­¤è¦æ±‚é€šä¿¡ç§‘æŠ€äººå‘˜è¦å…·æœ‰é«˜åº¦çš„ç»„ç»‡çºªå¾‹æ€§ã€å¼ºçƒˆçš„ç¤¾ä¼šè´£ä»»æ„Ÿï¼Œè¿™æ˜¯å¯¹é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„çªå‡ºè¦æ±‚ã€‚ä¸ä»äº‹å…¶ä»–ç§‘æŠ€å·¥ä½œçš„äººå‘˜ç›¸æ¯”ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜çš„èŒä¸šæ´»åŠ¨å—é›†ä½“ã€å—ç»„ç»‡çºªå¾‹çš„çº¦æŸè¦æ›´ä¸¥ã€æ›´å¤šã€‚å› æ­¤ï¼Œä¸ºäº†ç¡®ä¿é€šä¿¡ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜å¿…é¡»å…·æœ‰é«˜åº¦çš„ç»„ç»‡çºªå¾‹æ€§ï¼Œä¸€åˆ‡è¡ŒåŠ¨å¬ä»æŒ‡æŒ¥ï¼Œä¸¥æ ¼éµçºªå®ˆæ³•ã€‚<br>ï¼ˆ1ï¼‰è¦æœ‰é«˜åº¦çš„ç»„ç»‡çºªå¾‹è§‚å¿µã€‚äººçš„è¡Œä¸ºæ˜¯å—æ€æƒ³æ”¯é…çš„ï¼Œä»æ€æƒ³ä¸Šæ ‘ç«‹äº†é«˜åº¦çš„ç»„ç»‡çºªå¾‹è§‚å¿µï¼ŒæŒæ¡äº†è¾¨åˆ«æ˜¯éå–„æ¶çš„æ ‡å‡†ï¼Œæ‰èƒ½ä¿è¯æ³•å¾‹ã€è§„ç« åˆ¶åº¦çš„è´¯å½»æ‰§è¡Œï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜ä¹Ÿæ¯«ä¸ä¾‹å¤–ã€‚å¢å¼ºç»„ç»‡çºªå¾‹è§‚å¿µï¼Œä¸€æ˜¯è¦æé«˜å¯¹éµçºªå®ˆæ³•çš„é‡è¦æ€§çš„è®¤è¯†ï¼›äºŒæ˜¯è¦è®¤çœŸå­¦ä¹ æ³•å¾‹ã€è§„ç« åˆ¶åº¦ï¼Œæ‡‚å¾—å·¥ä½œä¸­çš„è¡Œä¸ºè§„èŒƒï¼›ä¸‰æ˜¯è¦æŠŠæ³•å¾‹ã€çºªå¾‹ã€è§„ç« åˆ¶åº¦å˜æˆè‡ªå·±çš„è¡Œä¸ºå‡†åˆ™ï¼Œè‡ªè§‰è‡ªæ„¿åœ°éµå®ˆå’Œæœä»ã€‚åªæœ‰è¿™æ ·ï¼Œæ‰èƒ½å¥ å®šéµçºªå®ˆæ³•çš„åšå®ç†è®ºæ€æƒ³åŸºç¡€ã€‚<br>ï¼ˆ2ï¼‰è¦æœ‰å¼ºçƒˆçš„ç¤¾ä¼šè´£ä»»æ„Ÿã€‚ç¤¾ä¼šè´£ä»»æ„Ÿï¼Œæ˜¯ä¸ç§‘æŠ€äººå‘˜å¯¹ç¥–å›½ã€‚å¯¹ç¤¾ä¼šã€å¯¹äººæ°‘æ‰€æŒæ­£ç¡®æ€åº¦ç›¸å…³è”çš„ä¸€ç§æƒ…æ„Ÿï¼Œæ˜¯é€šä¿¡ç§‘æŠ€äººå‘˜å…·æœ‰é«˜åº¦ç»„ç»‡çºªå¾‹æ€§çš„æ€æƒ³åŸºç¡€ï¼Œæ˜¯é€šä¿¡ç§‘æŠ€äººå‘˜åœ¨ä»»ä½•æƒ…å†µã€ä»»ä½•æ—¶å€™åšåˆ°æœä»ç»„ç»‡é¢†å¯¼ã€éµçºªå®ˆæ³•çš„å†…åœ¨åŠ¨åŠ›ã€‚åªæœ‰å…·æœ‰å¼ºçƒˆçš„ç¤¾ä¼šè´£ä»»æ„Ÿï¼Œæ‰èƒ½æŠŠè‡ªå·±ä»äº‹çš„é€šä¿¡ç§‘æŠ€å·¥ä½œå’Œç¥–å›½ã€ç¤¾ä¼šã€äººæ°‘çš„åˆ©ç›Šç´§å¯†è”ç³»èµ·æ¥ï¼Œä»è€Œäº§ç”ŸèŒä¸šæƒ…æ„Ÿã€èŒä¸šä¿¡å¿µï¼Œå¹¶é€šè¿‡è‡ªå·±å†…å¿ƒçš„é“å¾·æ³•åº­é­ç­–è‡ªå·±è‡ªè§‰åœ°ã€æ— æ¡ä»¶åœ°ã€ä¸æŠ˜ä¸æ‰£åœ°æœä»ç»„ç»‡çºªå¾‹ï¼Œåœ¨å…³é”®æ—¶åˆ»ä¸ç¦»å²—ï¼Œå±é™©å…³å¤´å†²ä¸Šå‰ï¼Œè‡ªè§‰éµçºªå®ˆæ³•ã€‚å…·æœ‰å¼ºçƒˆçš„ç¤¾ä¼šè´£ä»»æ„Ÿï¼Œæ˜¯é€šè¿‡ç§‘æŠ€äººå‘˜çš„å…‰è£ä¼ ç»Ÿã€‚</p>
<h2 id="3-4-é€šä¿¡ç§‘æŠ€äººå‘˜è¦éµå®ˆé€šä¿¡æ³•å¾‹å’Œæ‰§è¡Œè§„ç« åˆ¶åº¦"><a href="#3-4-é€šä¿¡ç§‘æŠ€äººå‘˜è¦éµå®ˆé€šä¿¡æ³•å¾‹å’Œæ‰§è¡Œè§„ç« åˆ¶åº¦" class="headerlink" title="3.4 é€šä¿¡ç§‘æŠ€äººå‘˜è¦éµå®ˆé€šä¿¡æ³•å¾‹å’Œæ‰§è¡Œè§„ç« åˆ¶åº¦"></a>3.4 é€šä¿¡ç§‘æŠ€äººå‘˜è¦éµå®ˆé€šä¿¡æ³•å¾‹å’Œæ‰§è¡Œè§„ç« åˆ¶åº¦</h2><p>é€šä¿¡ç§‘æŠ€äººå‘˜éµå®ˆé€šä¿¡æ³•å¾‹å’Œæ‰§è¡Œè§„ç« åˆ¶åº¦ã€‚è¿™ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ æ–¹é¢ã€‚<br>ï¼ˆ1ï¼‰è¦éµå®ˆå„é¡¹æ³•å¾‹æ³•è§„ã€‚æ³•å¾‹å¸¦æœ‰å¼ºåˆ¶æ€§ï¼Œå®ƒä»¥å›½å®¶é¢å¸ƒçš„æ³•å¾‹ã€æ³•ä»¤ä¸ºæ‰‹æ®µï¼Œè¦æ±‚é€šä¿¡ç§‘æŠ€äººå‘˜å¿…é¡»ä»¥å®ƒæ¥çº¦æŸè‡ªå·±çš„èŒä¸šè¡Œä¸ºã€‚ç°åœ¨å·²ç»é¢å¸ƒçš„ä¸é€šä¿¡æœ‰å…³çš„å®ªæ³•ã€åˆ‘æ³•ã€åä¸æ­£å½“ç«äº‰æ³•ã€ä¿å¯†æ³•ã€ç”µä¿¡æ¡ä¾‹ç­‰ï¼Œéƒ½æ˜¯é€šä¿¡ç§‘æŠ€äººå‘˜å¿…é¡»è®¤çœŸå­¦ä¹ å’Œä¸¥æ ¼éµå®ˆçš„ã€‚é€šä¿¡è§„ç« åˆ¶åº¦ï¼Œæ˜¯å¤šå¹´æ¥é€šä¿¡å·¥ä½œçš„æ­£åä¸¤æ–¹é¢ç»éªŒçš„æ€»ç»“ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜å¿…é¡»è‡ªè§‰éµå®ˆï¼Œä¸¥æ ¼è´¯å½»æ‰§è¡Œã€‚<br>ï¼ˆ2ï¼‰è¦éµå®ˆåŠ³åŠ¨çºªå¾‹ã€‚åŠ³åŠ¨çºªå¾‹æ˜¯ç»„ç»‡äººä»¬è¿›è¡ŒåŠ³åŠ¨çš„å½¢å¼ï¼Œåˆæ˜¯åŠ³åŠ¨è¿‡ç¨‹ä¸­äººä¸äººä¹‹é—´çš„ä¸€ç§ç¤¾ä¼šè”ç³»ã€‚çºªå¾‹ï¼Œä½œä¸ºä¸€ç§è¡Œä¸ºè§„åˆ™ï¼Œæ˜¯ä»¥æœä»ä¸ºå‰æçš„ï¼Œå› è€Œå…·æœ‰å¼ºåˆ¶æ€§å’Œçº¦æŸåŠ›ã€‚éµå®ˆçºªå¾‹ä¹Ÿæ˜¯ä¸€ç§ç¾å¾·ï¼Œå› è€Œåˆå…·æœ‰é“å¾·æ„ä¹‰ã€‚éµå®ˆåŠ³åŠ¨çºªå¾‹ï¼Œè¦éµå®ˆåŠ³åŠ¨æ—¶é—´ï¼Œä¸è¿Ÿåˆ°ã€ä¸æ—©é€€ã€ä¸æ—·å·¥ï¼Œæœ‰äº‹æå‰è¯·å‡ï¼Œä¸Šå²—èšç²¾ä¼šç¥ï¼Œæ³¨é‡è´¨é‡æ•ˆç›Šã€å·¥ä½œæ•ˆç‡ã€ä¸é—²è°ˆã€ä¸åšç§äº‹ï¼Œè¦æŒºèƒ¸æŒ‡æŒ¥ã€æœä»è°ƒåº¦ã€‚<br>ï¼ˆ3ï¼‰é€šä¿¡ç§‘æŠ€äººå‘˜è¦éµå®ˆä¿å¯†åˆ¶åº¦ã€‚å¯¹å·¥ä½œä¸­æ¥è§¦åˆ°çš„é€šä¿¡å†…å®¹ä»¥åŠå…¶ä»–éœ€è¦ä¿å¯†çš„å†…å®¹ã€ç§‘æŠ€èµ„æ–™ã€å›¾çº¸ç­‰ï¼Œéƒ½è¦å®ˆå£å¦‚ç“¶ï¼Œä¸¥æ ¼ä¿ç®¡ä¿å¯†ï¼Œä¸å¾—éšæ„æ³„éœ²ï¼›åœ¨æµ‹è¯•ã€ç»´ä¿®é€šä¿¡è®¾å¤‡æ—¶ï¼Œè¦ä¸¥æ ¼æŒ‰ç…§æœ‰å…³è§„å®šçš„ç¨‹åºä½œä¸šï¼Œä¸å¾—ä»»æ„æ›´æ”¹ä¸¥é˜²è°ƒé”™ã€æ’é”™ç”µè·¯ã€è®¾å¤‡ï¼Œé˜²æ­¢ç”µè·¯è®¾å¤‡é—´ä¸²éŸ³ä¸²è¯ï¼›æé«˜è­¦æƒ•ï¼Œé˜²æ­¢åˆ«æœ‰ç”¨å¿ƒçš„äººç›—çªƒæœºå¯†ï¼Œå¦‚æ‹¦æˆªé€šä¿¡ä¿¡å·ã€çªƒå¬é€šè¯å†…å®¹ç­‰ã€‚</p>
<h2 id="3-5-é€šä¿¡ç§‘æŠ€äººå‘˜è¦æœä»ç¤¾ä¼šåˆ©ç›Šï¼Œä¸å›¾è°‹æŠ€æœ¯å„æ–­"><a href="#3-5-é€šä¿¡ç§‘æŠ€äººå‘˜è¦æœä»ç¤¾ä¼šåˆ©ç›Šï¼Œä¸å›¾è°‹æŠ€æœ¯å„æ–­" class="headerlink" title="3.5 é€šä¿¡ç§‘æŠ€äººå‘˜è¦æœä»ç¤¾ä¼šåˆ©ç›Šï¼Œä¸å›¾è°‹æŠ€æœ¯å„æ–­"></a>3.5 é€šä¿¡ç§‘æŠ€äººå‘˜è¦æœä»ç¤¾ä¼šåˆ©ç›Šï¼Œä¸å›¾è°‹æŠ€æœ¯å„æ–­</h2><p>é€šä¿¡å…¨ç¨‹å…¨ç½‘çš„ç‰¹ç‚¹å†³å®šäº†é€šä¿¡ç§‘æŠ€äººå‘˜å¿…é¡»ä»ç¤¾ä¼šæ•´ä½“åˆ©ç›Šçš„é«˜åº¦å‡ºå‘ï¼Œæ­£ç¡®å¯¹å¾…é€šä¿¡ç§‘å­¦æŠ€æœ¯çš„å‘å±•ã€åº”ç”¨ã€äº¤æµã€ä¼ æ’­å’Œå‘æ˜åˆ›é€ ã€‚å°¤å…¶åœ¨å¼•å…¥å•†å“ç»æµçš„ç«äº‰æœºåˆ¶ï¼Œå¤§åŠ›æ¨è¿›æŠ€æœ¯å¸‚åœºå‘å±•ã€ç§‘æŠ€æˆæœå•†å“åŒ–çš„ä»Šå¤©ï¼Œæœä»ç¤¾ä¼šæ•´ä½“åˆ©ç›Šï¼Œä¸å›¾è°‹æŠ€æœ¯å„æ–­ï¼Œå°±æˆä¸ºé€šä¿¡ç§‘æŠ€äººå‘˜ä»äº‹èŒä¸šæ´»åŠ¨çš„ä¸€é¡¹é‡è¦çš„é“å¾·åŸåˆ™ã€‚éµå¾ªè¿™æ¡åŸåˆ™ï¼Œæ˜¯é€šä¿¡ç§‘æŠ€äººå‘˜æ ‘ç«‹æœåŠ¡ä¿éšœè§‚å¿µã€ä¸å›¾ååˆ©åœ°ä½çš„é‡è¦ä½“ç°ï¼Œä¹Ÿæ˜¯é€šä¿¡ç§‘æŠ€äººå‘˜å°†ä¸ªäººåˆ©ç›Šã€å›¢ä½“åˆ©ç›Šæœä»æ•´ä½“åˆ©ç›Šçš„å¼ºçƒˆçš„ç¤¾ä¼šè´£ä»»æ„Ÿçš„é‡è¦ä½“ç°ã€‚<br>éµå¾ªè¿™ä¸€åŸåˆ™ï¼Œè¦æ±‚é€šä¿¡ç§‘æŠ€äººå‘˜è¦åšåˆ°ä»¥ä¸‹å‡ ç‚¹ã€‚<br>ï¼ˆ1ï¼‰ç«¯æ­£ç«äº‰æ€åº¦ã€‚åœ¨ç¤¾ä¼šä¸»ä¹‰å¸‚åœºç»æµæ¡ä»¶ä¸‹ï¼Œä¼ä¸šç«äº‰çš„æ ¹æœ¬åˆ©ç›Šæ˜¯ä¸€è‡´çš„ã€‚ç«äº‰è€…ä¹‹é—´çš„é¢å…³ç³»æ˜¯æ‰“ç ´å„æ–­ï¼Œç›®çš„æ˜¯ç›¸äº’ä¿ƒè¿›ã€å…±åŒæé«˜ã€‚åœ¨ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦ä¸‹ï¼Œå¦‚æœé€šä¿¡ç§‘æŠ€äººå‘˜ä¸ºäº†ç«äº‰ï¼ŒæŠŠæŒã€ç‹¬å ã€å°é”æŠ€æœ¯æ´»é‡‡ç”¨ä¸æ­£å½“çš„ç«äº‰æ‰‹æ®µï¼Œæ˜¯åº”è¯¥æ‘’å¼ƒçš„ã€‚ä¸ºäº†é€šä¿¡ç§‘æŠ€çš„è¿›æ­¥ï¼ŒåŒè¡Œé—´åº”é€šè¿‡æ­£å¸¸çš„ç«äº‰åŠ›ï¼ŒåŠ å¼ºæŠ€æœ¯åˆä½œå’ŒæŠ€æœ¯äº¤æµï¼Œç›¸äº’å­¦ä¹ ã€ç›¸äº’ä¿ƒè¿›ã€‚å°†é€šä¿¡ç§‘æŠ€ä¸æ–­æ¨å‘æ–°çš„æ°´å¹³ã€‚<br>ï¼ˆ2ï¼‰ä¸ä¿å®ˆæŠ€æœ¯ï¼Œæå¥½ä¼ ã€å¸®ã€å¸¦ã€‚è¦ç§¯æä¼ æˆæ–°æŠ€æœ¯ï¼Œè¦çƒ­æƒ…å¸®åŠ©æ–°èŒå·¥ï¼Œä½¿å…¶å°½å¿«æŒæ¡å’Œåˆ©ç”¨å…ˆè¿›æŠ€æœ¯ï¼Œè¦å¸¦åŠ¨ä¸€ç‰‡ï¼Œå„å±•æ‰èƒ½ï¼Œå…±åŒä¿ƒè¿›é€šä¿¡ç§‘æŠ€äº‹ä¸šçš„å‘å±•ã€‚<br>ï¼ˆ3ï¼‰ä¸é«˜æŠ€æœ¯å°é”ã€‚ä¸ºæ¨åŠ¨é€šç§‘æŠ€çš„è¿›æ­¥ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜è¦ç§¯æå‚åŠ æŠ€æœ¯åä½œã€æŠ€æœ¯æ”»å…³å’ŒæŠ€æœ¯äº¤æµï¼ŒåŒè¡Œç›¸äº²ã€é€šåŠ›åˆä½œï¼Œä¸å°é”æŠ€æœ¯ã€‚è¦æ­£ç¡®å¯¹å¾…ç§‘æŠ€æˆæœï¼Œæœ‰äº†å‘æ˜åˆ›é€ ï¼Œåº”æŒ‰ç…§å›½å®¶ä¸“åˆ©æ³•æ­£ç¡®å±¥è¡Œåº”æœ‰çš„æƒåˆ©å’Œä¹‰åŠ¡ã€‚<br>ï¼ˆ4ï¼‰ä¸ä»¥æŠ€æœ¯æƒå¨çš„åœ°ä½è‡ªå±…ã€‚ä¸å›¾è°‹æŠ€æœ¯å„æ–­ï¼Œä¸ä»…æ˜¯å¯¹å·²æœ‰çš„ç§‘å­¦æŠ€æœ¯æˆæœä¸èƒ½æŠŠæŒå’Œç‹¬å ï¼Œè¿˜è¦ä¸ä»¥æƒå¨è‡ªå±…å‹åˆ¶æ–°çš„ç§‘å­¦æŠ€æœ¯çš„å‘æ˜ã€å‘ç°ã€‚å°¤å…¶ä¸åº”ä»¥è‡ªå·±çš„æƒå¨åœ°ä½å‹åˆ¶ä¸åŒå­¦æœ¯è§‚ç‚¹çš„å‘è¡¨å’Œé’å¹´äººçš„æˆé•¿ã€‚è¦ä¸ºé’å¹´äººçš„æˆé•¿åˆ›é€ æ¡ä»¶ï¼Œè¦æ”¯æŒä¸è‡ªå·±å­¦æœ¯è§‚ç‚¹ä¸ç›¸åŒçš„äººå‘è‡ªå·±çš„ç†è®ºæŒ‘æˆ˜ã€‚</p>
<h2 id="3-6-æ ‘ç«‹æœåŠ¡ä¿éšœè§‚å¿µï¼Œä¸å›¾ååˆ©åœ°ä½"><a href="#3-6-æ ‘ç«‹æœåŠ¡ä¿éšœè§‚å¿µï¼Œä¸å›¾ååˆ©åœ°ä½" class="headerlink" title="3.6 æ ‘ç«‹æœåŠ¡ä¿éšœè§‚å¿µï¼Œä¸å›¾ååˆ©åœ°ä½"></a>3.6 æ ‘ç«‹æœåŠ¡ä¿éšœè§‚å¿µï¼Œä¸å›¾ååˆ©åœ°ä½</h2><p>æ ‘ç«‹æœåŠ¡ä¿éšœè§‚å¿µï¼Œæ˜¯é€šä¿¡ç§‘æŠ€å·¥ä½œçš„å‡ºå‘ç‚¹å’Œè½è„šç‚¹ï¼Œæ˜¯é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·çš„æœ€é«˜å®—æ—¨å’Œæ ¹æœ¬åŸåˆ™ï¼Œæ˜¯é€šä¿¡ç§‘æŠ€äººå‘˜æŠŠè‡ªå·±é€ ç¦äººæ°‘ã€æŒ¯å…´ç¥–å›½çš„è‰¯å¥½æ„¿æœ›åŒè¡ŒåŠ¨ç»Ÿä¸€èµ·æ¥çš„åŸºæœ¬è¦æ±‚ã€‚<br>ï¼ˆ1ï¼‰é€šä¿¡ç§‘æŠ€æ˜¯é€šä¿¡çš„æŠ€æœ¯ä¿éšœï¼Œå› æ­¤ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜è¦åšåˆ°å·¥ä½œç¬¬ä¸€ã€æœä»éœ€è¦ã€‚é€šä¿¡ç§‘æŠ€äººå‘˜è¦è®¤çœŸå±¥è¡Œå…šå’Œå›½å®¶ä»¥åŠäººæ°‘èµ‹äºˆçš„èŒè´£ã€‚é€šä¿¡ç§‘æŠ€æœ‰å¤šé‡åˆ†å·¥ï¼Œæœ‰çš„ç»´æŠ¤ã€ä¿å…»æœºå™¨è®¾å¤‡ï¼Œæœ‰çš„æ”»å…‹é«˜ã€ç²¾ã€å°–ç§‘æŠ€ï¼Œå·¥ä½œåœ¨å„ä¸ªå²—ä½ä¸Šçš„é€šä¿¡ç§‘æŠ€äººå‘˜ï¼Œéƒ½åº”å……åˆ†è®¤è¯†åˆ°è‡ªå·±å¹³å‡¡åŠ³åŠ¨çš„ä¼Ÿå¤§æ„ä¹‰ï¼Œå®‰å…¶ä½ï¼Œå¿ å…¶èŒï¼Œå…¢å…¢ä¸šä¸šï¼Œåœ¨å¹³å‡¡çš„å²—ä½ä¸Šåšå‡ºä¸å¹³å‡¡çš„æˆç»©ã€‚åœ¨å¹³æ—¶ï¼Œé€šä¿¡ç§‘æŠ€æ˜¯å®Œæˆæ”¿åºœéƒ¨é—¨æŒ‡æŒ¥å·¥ä½œã€ç»„ç»‡ç”Ÿäº§ã€äº†è§£æƒ…å†µï¼Œä»¥åŠäººæ°‘ç¾¤ä¼—ç›¸äº’è”ç³»çš„å·¥å…·ã€‚åœ¨æˆ˜æ—¶ï¼Œåœ¨éå¸¸æ—¶æœŸï¼Œé€šä¿¡ç§‘æŠ€åˆæ˜¯é…åˆå†›äº‹é€šä¿¡éƒ¨é—¨ã€ä¸´æ—¶æŒ‡æŒ¥æœºå…³ï¼Œä¿è¯æ²Ÿé€šè”ç»œçš„é‡è¦æ‰‹æ®µã€‚å› æ­¤é€šä¿¡ç§‘æŠ€äººå‘˜åº”æ ‘ç«‹å·¥ä½œç¬¬ä¸€ã€æœä»éœ€è¦çš„è§‚å¿µã€‚<br>ï¼ˆ2ï¼‰é€šä¿¡ç§‘æŠ€äººå‘˜è¦ä¸ç•è‰°è‹¦ï¼Œåšå®ˆå²—ä½ã€‚é€šä¿¡ç§‘æŠ€å·¥ä½œçš„è‰°è‹¦æ€§ä¸»è¦æ˜¯ç”Ÿæ´»ã€å·¥ä½œç¯å¢ƒçš„è‰°è‹¦ï¼Œå®ƒéœ€è¦æœ‰äººå¸¸å¹´æˆ˜æ–—åœ¨ç”Ÿäº§ç¬¬ä¸€çº¿ï¼Œæˆ˜æ–—åœ¨å®éªŒå®¤ï¼Œæˆ˜æ–—åœ¨è¾¹é™†ã€å­¤å²›ã€æ·±å±±è€æ—å’Œæœªå¼€å‘çš„è´«ç©·è½ååœ°åŒºï¼Œæ— è®ºä¸¥å†¬é…·æš‘ã€ç™½å¤©é»‘å¤œã€èŠ‚æ—¥å‡æ—¥ã€æ•Œæƒ…ã€é™©æƒ…ã€ç¾æƒ…ï¼Œéƒ½è¦åšå®ˆå²—ä½ï¼Œå…³é”®æ—¶åˆ»è¿˜è¦æŒºèº«è€Œå‡ºã€‚é€šä¿¡ç§‘æŠ€äººå‘˜ï¼Œè¦ç¡®ä¿é€šä¿¡çš„ç•…é€šæ— é˜»å’Œè´¨é‡æ•ˆç›Šçš„ä¸æ–­æé«˜ï¼Œèµ¶è¶…ä¸–ç•Œå…ˆè¿›é€šä¿¡æ°´å¹³ï¼Œå°±éœ€è¦æœ‰ä¸ç•è‰°è‹¦çš„ç²¾ç¥ã€‚åœ¨ç´§è¦å…³å¤´ï¼Œä¸ºäº†ç¡®ä¿é€šä¿¡ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜è¦åšåˆ°ä¸´å±ä¸æƒ§ï¼Œåšå®ˆå²—ä½ï¼Œä»¥è‡ªå·±çš„çŒ®è¡€å’Œç”Ÿå‘½ç¡®ä¿é€šä¿¡ä»»åŠ¡çš„å®Œæˆã€‚<br>ï¼ˆ3ï¼‰é€šä¿¡ç§‘æŠ€äººå‘˜è¦ç¡®ä¿è®¾å¤‡çš„å®Œå¥½ç‡ï¼Œç¡®ä¿è´¨é‡ç¬¬ä¸€ã€‚é€šä¿¡ç§‘æŠ€äººå‘˜é¡ºåˆ©æœåŠ¡ä¿éšœè§‚å¿µï¼Œä¸ä»…è¦å°¤ä¸ºäººæ°‘æœåŠ¡çš„è‰¯å¥½æ„¿æœ›å’Œç²¾ç¥çŠ¶æ€ï¼Œè¿˜è¦æ ‘ç«‹è´¨é‡ç¬¬ä¸€çš„æ€æƒ³ï¼ŒåŠªåŠ›ç²¾é€šæŠ€æœ¯ä¸šåŠ¡ï¼Œç”¨äºé©æ–°åˆ›é€ ï¼Œä¸æ–­ä¸ºé€šä¿¡æä¾›è‰¯å¥½çš„ã€å…ˆè¿›çš„è®¾å¤‡å’ŒæŠ€æœ¯ã€‚<br>è¦æ ‘ç«‹è´¨é‡ç¬¬ä¸€çš„è§‚å¿µã€‚é€šä¿¡ç§‘æŠ€æ˜¯ä¸ºæé«˜ä¼ é€’ä¿¡æ¯å’Œå®ç‰©çš„æ•ˆç›Šæä¾›æœåŠ¡å’ŒæŠ€æœ¯ä¿éšœçš„ï¼Œé€šä¿¡ç§‘æŠ€å·¥ä½œä¸€æ—¦å‘ç”Ÿè´¨é‡é—®é¢˜ï¼Œå°±ä¼šå½±å“é€šä¿¡æ•ˆç›Šæˆ–é€ æˆé€šä¿¡çš„ä¸­æ–­ï¼Œä»è€Œç»™é€šä¿¡å’Œä½¿ç”¨è€…é€ æˆä¸¥é‡çš„ã€ç”šè‡³æ˜¯ä¸å¯ä¼°é‡çš„æŸå¤±å’Œå±å®³ã€‚å› æ­¤ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜ï¼Œåº”æŠŠç¡®ä¿è´¨é‡æ”¾åœ¨é«˜äºä¸€åˆ‡ã€é‡äºä¸€åˆ‡ã€å¤§äºä¸€åˆ‡çš„ä½ç½®ä¸Šå»ï¼Œç‰¢å›ºåœ°æ ‘ç«‹è´¨é‡ç¬¬ä¸€å’Œåˆ›å…¨ä¼˜çš„æ„è¯†ã€‚<br>æ²¡æœ‰å®Œå¥½çš„ã€ä¼˜è´¨çš„è®¾å¤‡ï¼Œç§‘æŠ€æœåŠ¡ä¿éšœå°±æˆäº†æ— æºä¹‹æ°´ã€æ— æœ¬ä¹‹æœ¨ã€‚å› æ­¤ï¼Œé€šä¿¡ç§‘æŠ€è®¾å¤‡æ—¶å®Œæˆé€šä¿¡ç§‘æŠ€ä»»åŠ¡çš„å·¥å…·å’Œæ‰‹æ®µã€‚é€šä¿¡ç§‘æŠ€äººå‘˜è¦ç²¾é€šé€šä¿¡ç§‘æŠ€çŸ¥è¯†ï¼Œä¸æ–­æ›´æ–°çŸ¥è¯†ç»“æ„å’Œæé«˜è‡ªå·±çš„é€šä¿¡ç§‘æŠ€ç†è®ºæ°´å¹³ï¼›è¦ç²¾é€šè®¾å¤‡çš„ç»´ä¿®æŠ€æœ¯ï¼Œåœ¨å‘ç”Ÿæ•…éšœæ—¶èƒ½åº”ç”¨è‡ªå¦‚ï¼ŒåŠæ—¶æ’é™¤ï¼›è¦åŠ å¼ºè®¾å¤‡çš„ç»´ä¿®ä¿å…»ï¼Œç¡®ä¿è®¾å¤‡çš„å®Œå¥½ç‡ï¼Œä»¥ä¸¥è°¨ã€æ±‚å®çš„æ€åº¦å¯¹å¾…å¯ç–‘çš„ç°è±¡å’Œæ•…éšœï¼Œä¸æ•·è¡å¡è´£ï¼Œä¸å› ä¸ªäººçš„å¤±èŒæˆ–ç–å¿½å¤§æ„è€Œå¯¼è‡´é€šä¿¡çš„ä¸­æ–­å’Œä¼ é€’çš„å·®é”™ã€‚<br>ï¼ˆ4ï¼‰è¦å‘æ‰¬å¼€æ‹“åˆ›æ–°ç²¾ç¥ï¼Œç”¨äºé©æ–°ã€‚å¼€æ‹“ã€åˆ›æ–°æ˜¯é€šä¿¡ç§‘æŠ€äººå‘˜çš„å¿…å¤‡å“è´¨ï¼Œé€šä¿¡ç§‘æŠ€äººå‘˜åº”å‘æ‰¬å¼€æ‹“ã€åˆ›æ–°ç²¾ç¥ï¼Œæ”¹é€ æ—§è®¾å¤‡ã€æ›´æ–°æ—§æŠ€æœ¯ã€ç ”åˆ¶æ–°è®¾å¤‡ï¼Œæ‹“å±•æ–°æŠ€æœ¯ï¼Œä¸ºå¡«è¡¥æˆ‘å›½é€šä¿¡è®¾å¤‡çš„ç©ºç™½ï¼Œä¸ºæé«˜æŠ€æœ¯è£…å¤‡ã€å¢å¼ºé€šä¿¡èƒ½åŠ›ï¼Œå¢å¼ºäº”æœåŠ¡æ•ˆç›Šåšå‡ºç§¯æçš„è´¡çŒ®ã€‚</p>
]]></content>
      <categories>
        <category>é€šä¿¡ç§‘æŠ€äººå‘˜èŒä¸šé“å¾·</category>
      </categories>
  </entry>
  <entry>
    <title>vsCodeä¸æ˜¾ç¤º.metaæ–‡ä»¶çš„æ–¹æ³•</title>
    <url>/d7ba392e.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>ä¸»è¦åº”ç”¨äºvsCodeç¼–è¾‘Cocos Creatorå·¥ç¨‹æ—¶ï¼ˆä¸æƒ³å±•ç¤ºå…¶ä»–æ ¼å¼æ–‡ä»¶æ–¹æ³•ä¸€æ ·ï¼‰<br>ç‚¹å‡»å·¦ä¸‹è§’â€œè®¾ç½®â€å›¾æ ‡-&gt;â€œSettingâ€</p>
<img data-src="https://s1.ax1x.com/2023/04/12/ppjAtgI.png" style="width:500px;height:500px" alt="" />

<p>æ‰¾åˆ°ä¸‹å›¾æ‰€ç¤ºä½ç½®ï¼Œæ·»åŠ <code>**/*.meta</code>å³å¯<br><img data-src="https://s1.ax1x.com/2023/04/12/ppjANvt.png" style="width:500px;height:500px" alt="" /></p>
]]></content>
      <categories>
        <category>æ¸¸æˆå¼€å‘</category>
      </categories>
      <tags>
        <tag>TypeScript</tag>
        <tag>Cocos2dx</tag>
        <tag>vsCode</tag>
      </tags>
  </entry>
  <entry>
    <title>Cocos Creatorä¸­å…³äºsetTimeOutå’ŒsetIntervalæ”¹å˜thisæŒ‡å‘çš„é—®é¢˜</title>
    <url>/c80cf324.html</url>
    <content><![CDATA[<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3160571902547760"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3160571902547760"
     data-ad-slot="8630948880"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>åœ¨<code>setTimeOut()</code>æˆ–<code>setInterval()</code>è¿™æ ·çš„æ–¹æ³•ä¸­ï¼Œå¦‚æœä¼ å…¥çš„å‡½æ•°åŒ…å«<code>this</code>ï¼Œé‚£ä¹ˆï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°ä¸­çš„<code>this</code>ä¼šæŒ‡å‘<code>window</code>å¯¹è±¡ã€‚è¿™æ˜¯ç”±äº<code>setTimeout()</code>è°ƒç”¨çš„ä»£ç è¿è¡Œåœ¨ä¸æ‰€æœ‰å‡½æ•°å®Œå…¨åˆ†ç¦»çš„æ‰§è¡Œç¯å¢ƒä¸Šã€‚è¿™å›å¯¼è‡´è¿™äº›ä»£ç ä¸­åŒ…å«çš„<code>this</code>å…³é”®å­—ä¼šæŒ‡å‘<code>window</code>å¯¹è±¡ã€‚å¦‚ä¸‹å›¾ï¼š<br><img data-src="https://s1.ax1x.com/2023/04/20/p9AajjP.png"  alt="" /><br>ä¸‹é¢é‚£ä¸ª<code>this</code>å°±æ˜¯<code>setInterval()</code>ä¸­<code>this</code>æŒ‡å‘ã€‚</p>
<h2 id="è§£å†³æ–¹æ³•ï¼š"><a href="#è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h2><h3 id="å°†å½“å‰å¯¹è±¡çš„thiså­˜ä¸ºä¸€ä¸ªå˜é‡"><a href="#å°†å½“å‰å¯¹è±¡çš„thiså­˜ä¸ºä¸€ä¸ªå˜é‡" class="headerlink" title="å°†å½“å‰å¯¹è±¡çš„thiså­˜ä¸ºä¸€ä¸ªå˜é‡"></a>å°†å½“å‰å¯¹è±¡çš„<code>this</code>å­˜ä¸ºä¸€ä¸ªå˜é‡</h3><p>å®šæ—¶å™¨å†…éƒ¨çš„å‡½æ•°æ¥è®¿é—®åˆ°è¿™ä¸ªå˜é‡ï¼Œæ­¤æ—¶çš„<code>this</code>,å°±æŒ‡å‘äº†å½“å‰å¯¹è±¡</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">broadInter</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(that.<span class="property">msg</span>);</span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ©ç”¨bind-æ–¹æ³•"><a href="#åˆ©ç”¨bind-æ–¹æ³•" class="headerlink" title="åˆ©ç”¨bind()æ–¹æ³•"></a>åˆ©ç”¨bind()æ–¹æ³•</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">broadInter</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">msg</span>);   </span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h3><p>ES6ä¸­çš„ç®­å¤´å‡½æ•°,thisæ€»æ˜¯æŒ‡å‘è¯æ³•ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯å¤–å±‚è°ƒç”¨è€…<code>obj</code>ï¼Œå› æ­¤åˆ©ç”¨ç®­å¤´å‡½æ•°å°±å¯ä»¥è½»æ¾è§£å†³è¿™ä¸ªé—®é¢˜</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">broadInter</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">msg</span>);  </span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•å‡†ç¡®åˆ¤æ–­thisæŒ‡å‘çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å¦‚ä½•å‡†ç¡®åˆ¤æ–­thisæŒ‡å‘çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¦‚ä½•å‡†ç¡®åˆ¤æ–­thisæŒ‡å‘çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å¦‚ä½•å‡†ç¡®åˆ¤æ–­<code>this</code>æŒ‡å‘çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul>
<li>å‡½æ•°æ˜¯å¦åœ¨<code>new</code>ä¸­è°ƒç”¨ï¼ˆ<code>new</code>ç»‘å®šï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆthisç»‘å®šçš„æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</li>
<li>å‡½æ•°æ˜¯å¦é€šè¿‡<code>call</code>ï¼Œ<code>apply</code>è°ƒç”¨ï¼Œæˆ–è€…ä½¿ç”¨äº†<code>bind</code>(å³ç¡¬ç»‘å®š)ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆthisç»‘å®šçš„å°±æ˜¯æŒ‡å®šçš„å¯¹è±¡ã€‚</li>
<li>å‡½æ•°æ˜¯å¦åœ¨æŸä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è°ƒç”¨(éšå¼ç»‘å®š)ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œthisç»‘å®šçš„æ˜¯é‚£ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ä¸€èˆ¬æ˜¯<code>obj.foo()</code>ã€‚</li>
<li>å¦‚æœä»¥ä¸Šéƒ½ä¸æ˜¯ï¼Œé‚£ä¹ˆä½¿ç”¨é»˜è®¤ç»‘å®šã€‚å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ™ç»‘å®šåˆ°undefinedï¼Œå¦åˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚</li>
<li>å¦‚æœæŠŠ<code>null</code>æˆ–è€…<code>undefined</code>ä½œä¸º<code>this</code>çš„ç»‘å®šå¯¹è±¡ä¼ å…¥<code>call</code>ã€<code>apply</code>æˆ–è€…<code>bind</code>ï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ã€‚</li>
<li>å¦‚æœæ˜¯ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°çš„thisç»§æ‰¿çš„æ˜¯å¤–å±‚ä»£ç å—çš„<code>this</code>ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>Cocos Creator</category>
      </categories>
      <tags>
        <tag>Cocos Creator</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
</search>
